---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: PosixParser
        children: []
        pos: 1174
        length: 11
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private List tokens = new ArrayList();
          children: []
          pos: 1246
          length: 38
        - type: field_declaration
          fields:
            text: private boolean eatTheRest;
          children: []
          pos: 1339
          length: 27
        - type: field_declaration
          fields:
            text: private Option currentOption;
          children: []
          pos: 1413
          length: 29
        - type: field_declaration
          fields:
            text: private Options options;
          children: []
          pos: 1484
          length: 24
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: init
              children: []
              pos: 1696
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1683
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: eatTheRest = false;
                children: []
                pos: 1717
                length: 19
              - type: expression_statement
                fields:
                  text: tokens.clear();
                children: []
                pos: 1745
                length: 15
              pos: 1707
              length: 59
          children: []
          pos: 1683
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: flatten
              children: []
              pos: 3915
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3923
                length: 15
              pos: 3896
              length: 1897
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: init();
                children: []
                pos: 3999
                length: 7
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 4015
                length: 23
              - type: local_variable_declaration
                fields:
                  text: Iterator iter = Arrays.asList(arguments).iterator();
                children: []
                pos: 4099
                length: 52
              - type: while_statement
                fields:
                  text: "while (iter.hasNext())\n        {\n            // get the
                    next command line token\n            String token = (String) iter.next();\n\n
                    \           // handle long option --foo or --foo=bar\n            if
                    (token.startsWith(\"--\"))\n            {\n                int
                    pos = token.indexOf('=');\n                String opt = pos ==
                    -1 ? token : token.substring(0, pos); // --foo\n\n                if
                    (!options.hasOption(opt))\n                {\n                    processNonOptionToken(token,
                    stopAtNonOption);\n                }\n                else\n                {\n
                    \                   currentOption = options.getOption(opt);\n
                    \                   \n                    tokens.add(opt);\n                    if
                    (pos != -1)\n                    {\n                        tokens.add(token.substring(pos
                    + 1));\n                    }\n                }\n            }\n\n
                    \           // single hyphen\n            else if (\"-\".equals(token))\n
                    \           {\n                tokens.add(token);\n            }\n
                    \           else if (token.startsWith(\"-\"))\n            {\n
                    \               if (token.length() == 2 || options.hasOption(token))\n
                    \               {\n                    processOptionToken(token,
                    stopAtNonOption);\n                }\n                // requires
                    bursting\n                else\n                {\n                    burstToken(token,
                    stopAtNonOption);\n                }\n            }\n            else\n
                    \           {\n                processNonOptionToken(token, stopAtNonOption);\n
                    \           }\n\n            gobble(iter);\n        }"
                children: []
                pos: 4204
                length: 1513
              - type: return_statement
                fields:
                  text: return (String[]) tokens.toArray(new String[tokens.size()]);
                children: []
                pos: 5727
                length: 60
              pos: 3989
              length: 1804
          children: []
          pos: 3896
          length: 1897
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: gobble
              children: []
              pos: 5955
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator iter
                children: []
                pos: 5962
                length: 13
              pos: 5942
              length: 194
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: eatTheRest
                        children: []
                        pos: 5995
                        length: 10
                    children: []
                    pos: 5994
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: while_statement
                    fields:
                      text: |-
                        while (iter.hasNext())
                                    {
                                        tokens.add(iter.next());
                                    }
                    children: []
                    pos: 6029
                    length: 91
                  pos: 6015
                  length: 115
                pos: 5991
                length: 139
              pos: 5981
              length: 155
          children: []
          pos: 5942
          length: 194
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processNonOptionToken
              children: []
              pos: 6422
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String value
                children: []
                pos: 6444
                length: 12
              pos: 6409
              length: 277
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stopAtNonOption
                            children: []
                            pos: 6501
                            length: 15
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: currentOption
                                        children: []
                                        pos: 6521
                                        length: 13
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 6538
                                        length: 4
                                    children: []
                                    pos: 6521
                                    length: 21
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!currentOption.hasArg()"
                                    children: []
                                    pos: 6546
                                    length: 23
                                children: []
                                pos: 6521
                                length: 48
                            children: []
                            pos: 6520
                            length: 50
                        children: []
                        pos: 6501
                        length: 69
                    children: []
                    pos: 6500
                    length: 71
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: eatTheRest = true;
                    children: []
                    pos: 6594
                    length: 18
                  - type: expression_statement
                    fields:
                      text: tokens.add("--");
                    children: []
                    pos: 6625
                    length: 17
                  pos: 6580
                  length: 72
                pos: 6497
                length: 155
              - type: expression_statement
                fields:
                  text: tokens.add(value);
                children: []
                pos: 6662
                length: 18
              pos: 6487
              length: 199
          children: []
          pos: 6409
          length: 277
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processOptionToken
              children: []
              pos: 7170
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 7189
                length: 12
              pos: 7157
              length: 332
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stopAtNonOption
                            children: []
                            pos: 7246
                            length: 15
                          right:
                            type: unary_expression
                            fields:
                              text: "!options.hasOption(token)"
                            children: []
                            pos: 7265
                            length: 25
                        children: []
                        pos: 7246
                        length: 44
                    children: []
                    pos: 7245
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: eatTheRest = true;
                    children: []
                    pos: 7314
                    length: 18
                  pos: 7300
                  length: 42
                pos: 7242
                length: 100
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: options.hasOption(token)
                        children: []
                        pos: 7356
                        length: 24
                    children: []
                    pos: 7355
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = options.getOption(token);
                    children: []
                    pos: 7404
                    length: 41
                  pos: 7390
                  length: 65
                pos: 7352
                length: 103
              - type: expression_statement
                fields:
                  text: tokens.add(token);
                children: []
                pos: 7465
                length: 18
              pos: 7232
              length: 257
          children: []
          pos: 7157
          length: 332
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: burstToken
              children: []
              pos: 8805
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8816
                length: 12
              pos: 8790
              length: 816
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 1; i < token.length(); i++)
                            {
                                String ch = String.valueOf(token.charAt(i));

                                if (options.hasOption(ch))
                                {
                                    tokens.add("-" + ch);
                                    currentOption = options.getOption(ch);

                                    if (currentOption.hasArg() && (token.length() != (i + 1)))
                                    {
                                        tokens.add(token.substring(i + 1));

                                        break;
                                    }
                                }
                                else if (stopAtNonOption)
                                {
                                    processNonOptionToken(token.substring(i), true);
                                    break;
                                }
                                else
                                {
                                    tokens.add(token);
                                    break;
                                }
                            }
                children: []
                pos: 8869
                length: 731
              pos: 8859
              length: 747
          children: []
          pos: 8790
          length: 816
        pos: 1161
        length: 8447
    children: []
    pos: 1161
    length: 8447
  pos: 0
  length: 9609
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: PosixParser
        children: []
        pos: 1174
        length: 11
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private List tokens = new ArrayList();
          children: []
          pos: 1246
          length: 38
        - type: field_declaration
          fields:
            text: private boolean eatTheRest;
          children: []
          pos: 1339
          length: 27
        - type: field_declaration
          fields:
            text: private Options options;
          children: []
          pos: 1450
          length: 24
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: init
              children: []
              pos: 1662
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1649
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: eatTheRest = false;
                children: []
                pos: 1683
                length: 19
              - type: expression_statement
                fields:
                  text: tokens.clear();
                children: []
                pos: 1711
                length: 15
              pos: 1673
              length: 59
          children: []
          pos: 1649
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: flatten
              children: []
              pos: 3881
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3889
                length: 15
              pos: 3862
              length: 1904
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: init();
                children: []
                pos: 3965
                length: 7
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 3981
                length: 23
              - type: local_variable_declaration
                fields:
                  text: Iterator iter = Arrays.asList(arguments).iterator();
                children: []
                pos: 4065
                length: 52
              - type: while_statement
                fields:
                  text: "while (iter.hasNext())\n        {\n            // get the
                    next command line token\n            String token = (String) iter.next();\n\n
                    \           // handle long option --foo or --foo=bar\n            if
                    (token.startsWith(\"--\"))\n            {\n                int
                    pos = token.indexOf('=');\n                String opt = pos ==
                    -1 ? token : token.substring(0, pos); // --foo\n\n                if
                    (!options.hasOption(opt))\n                {\n                    processNonOptionToken(token);\n
                    \               }\n                else\n                {\n                    \n
                    \                   tokens.add(opt);\n                    if (pos
                    != -1)\n                    {\n                        tokens.add(token.substring(pos
                    + 1));\n                    }\n                }\n            }\n\n
                    \           // single hyphen\n            else if (\"-\".equals(token))\n
                    \           {\n                tokens.add(token);\n            }\n
                    \           else if (token.startsWith(\"-\"))\n            {\n
                    \               if (token.length() == 2 || options.hasOption(token))\n
                    \               {\n                    processOptionToken(token,
                    stopAtNonOption);\n                }\n                // requires
                    bursting\n                else\n                {\n                    burstToken(token,
                    stopAtNonOption);\n                }\n            }\n            else
                    if (stopAtNonOption)\n            {\n                processNonOptionToken(token);\n
                    \           }\n            else\n            {\n                tokens.add(token);\n
                    \           }\n\n            gobble(iter);\n        }"
                children: []
                pos: 4170
                length: 1520
              - type: return_statement
                fields:
                  text: return (String[]) tokens.toArray(new String[tokens.size()]);
                children: []
                pos: 5700
                length: 60
              pos: 3955
              length: 1811
          children: []
          pos: 3862
          length: 1904
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: gobble
              children: []
              pos: 5928
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator iter
                children: []
                pos: 5935
                length: 13
              pos: 5915
              length: 194
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: eatTheRest
                        children: []
                        pos: 5968
                        length: 10
                    children: []
                    pos: 5967
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: while_statement
                    fields:
                      text: |-
                        while (iter.hasNext())
                                    {
                                        tokens.add(iter.next());
                                    }
                    children: []
                    pos: 6002
                    length: 91
                  pos: 5988
                  length: 115
                pos: 5964
                length: 139
              pos: 5954
              length: 155
          children: []
          pos: 5915
          length: 194
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processNonOptionToken
              children: []
              pos: 6395
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String value
                children: []
                pos: 6417
                length: 12
              pos: 6382
              length: 149
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: eatTheRest = true;
                children: []
                pos: 6449
                length: 18
              - type: expression_statement
                fields:
                  text: tokens.add("--");
                children: []
                pos: 6480
                length: 17
              - type: expression_statement
                fields:
                  text: tokens.add(value);
                children: []
                pos: 6507
                length: 18
              pos: 6435
              length: 96
          children: []
          pos: 6382
          length: 149
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processOptionToken
              children: []
              pos: 7015
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 7034
                length: 12
              pos: 7002
              length: 220
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stopAtNonOption
                            children: []
                            pos: 7091
                            length: 15
                          right:
                            type: unary_expression
                            fields:
                              text: "!options.hasOption(token)"
                            children: []
                            pos: 7110
                            length: 25
                        children: []
                        pos: 7091
                        length: 44
                    children: []
                    pos: 7090
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: eatTheRest = true;
                    children: []
                    pos: 7159
                    length: 18
                  pos: 7145
                  length: 42
                pos: 7087
                length: 100
              - type: expression_statement
                fields:
                  text: tokens.add(token);
                children: []
                pos: 7198
                length: 18
              pos: 7077
              length: 145
          children: []
          pos: 7002
          length: 220
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: burstToken
              children: []
              pos: 8538
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8549
                length: 12
              pos: 8523
              length: 840
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Option currentOption;
                children: []
                pos: 8602
                length: 21
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 1; i < token.length(); i++)
                            {
                                String ch = String.valueOf(token.charAt(i));

                                if (options.hasOption(ch))
                                {
                                    tokens.add("-" + ch);
                                    currentOption = options.getOption(ch);

                                    if (currentOption.hasArg() && (token.length() != (i + 1)))
                                    {
                                        tokens.add(token.substring(i + 1));

                                        break;
                                    }
                                }
                                else if (stopAtNonOption)
                                {
                                    processNonOptionToken(token.substring(i));
                                    break;
                                }
                                else
                                {
                                    tokens.add(token);
                                    break;
                                }
                            }
                children: []
                pos: 8632
                length: 725
              pos: 8592
              length: 771
          children: []
          pos: 8523
          length: 840
        pos: 1161
        length: 8204
    children: []
    pos: 1161
    length: 8204
  pos: 0
  length: 9366
text_diff: "--- before\n+++ after\n@@ -38,7 +38,6 @@\n     private boolean eatTheRest;\n
  \n     /** holder for the current option */\n-    private Option currentOption;\n
  \n     /** the command line Options */\n     private Options options;\n@@ -114,11
  +113,10 @@\n \n                 if (!options.hasOption(opt))\n                 {\n-
  \                   processNonOptionToken(token, stopAtNonOption);\n+                    processNonOptionToken(token);\n
  \                }\n                 else\n                 {\n-                    currentOption
  = options.getOption(opt);\n                     \n                     tokens.add(opt);\n
  \                    if (pos != -1)\n@@ -145,9 +143,13 @@\n                     burstToken(token,
  stopAtNonOption);\n                 }\n             }\n+            else if (stopAtNonOption)\n+
  \           {\n+                processNonOptionToken(token);\n+            }\n
  \            else\n             {\n-                processNonOptionToken(token,
  stopAtNonOption);\n+                tokens.add(token);\n             }\n \n             gobble(iter);\n@@
  -179,13 +181,10 @@\n      *\n      * @param value The current token\n      */\n-
  \   private void processNonOptionToken(String value, boolean stopAtNonOption)\n+
  \   private void processNonOptionToken(String value)\n     {\n-        if (stopAtNonOption
  && (currentOption == null || !currentOption.hasArg()))\n-        {\n             eatTheRest
  = true;\n             tokens.add(\"--\");\n-        }\n \n         tokens.add(value);\n
  \    }\n@@ -209,10 +208,6 @@\n             eatTheRest = true;\n         }\n \n-
  \       if (options.hasOption(token))\n-        {\n-            currentOption =
  options.getOption(token);\n-        }\n \n         tokens.add(token);\n     }\n@@
  -245,6 +240,7 @@\n      */\n     protected void burstToken(String token, boolean
  stopAtNonOption)\n     {\n+        Option currentOption;\n         for (int i =
  1; i < token.length(); i++)\n         {\n             String ch = String.valueOf(token.charAt(i));\n@@
  -263,7 +259,7 @@\n             }\n             else if (stopAtNonOption)\n             {\n-
  \               processNonOptionToken(token.substring(i), true);\n+                processNonOptionToken(token.substring(i));\n
  \                break;\n             }\n             else\n"
tree_diff: "New cluster:\n===\ninsert-node\n---\nmethod_declaration [3862,5766]\nto\nclass_body
  [1161,9608]\nat 5\n------------\n===\ninsert-node\n---\nmethod_declaration [3862,5766]\nto\nclass_body
  [1161,9608]\nat 5\n===\ninsert-node\n---\nidentifier: flatten [3881,3888]\nto\nmethod_declaration
  [3862,5766]\nat 0\n\nNew cluster:\n===\ninsert-node\n---\nmethod_declaration [6382,6531]\nto\nclass_body
  [1161,9608]\nat 8\n------------\n===\ninsert-node\n---\nmethod_declaration [6382,6531]\nto\nclass_body
  [1161,9608]\nat 8\n===\ninsert-node\n---\nidentifier: processNonOptionToken [6395,6416]\nto\nmethod_declaration
  [6382,6531]\nat 0\n\nNew cluster:\nMOVE from method_declaration [3862,5766]\n------------\n===\nmove-tree\n---\nmethod_parameters
  [3896,5793]\n    formal_parameter: Options options [3923,3938]\nto\nmethod_declaration
  [3862,5766]\nat 1\n\nNew cluster:\nUnknown cluster type\n------------\n===\ninsert-tree\n---\nblock
  [3955,5766]\n    expression_statement: init(); [3965,3972]\n    expression_statement:
  this.options = options; [3981,4004]\n    local_variable_declaration: Iterator iter
  = Arrays.asList(arguments).iterator(); [4065,4117]\n    while_statement: while (iter.hasNext())\n
  \       {\n            // get the next command line token\n            String token
  = (String) iter.next();\n\n            // handle long option --foo or --foo=bar\n
  \           if (token.startsWith(\"--\"))\n            {\n                int pos
  = token.indexOf('=');\n                String opt = pos == -1 ? token : token.substring(0,
  pos); // --foo\n\n                if (!options.hasOption(opt))\n                {\n
  \                   processNonOptionToken(token);\n                }\n                else\n
  \               {\n                    \n                    tokens.add(opt);\n
  \                   if (pos != -1)\n                    {\n                        tokens.add(token.substring(pos
  + 1));\n                    }\n                }\n            }\n\n            //
  single hyphen\n            else if (\"-\".equals(token))\n            {\n                tokens.add(token);\n
  \           }\n            else if (token.startsWith(\"-\"))\n            {\n                if
  (token.length() == 2 || options.hasOption(token))\n                {\n                    processOptionToken(token,
  stopAtNonOption);\n                }\n                // requires bursting\n                else\n
  \               {\n                    burstToken(token, stopAtNonOption);\n                }\n
  \           }\n            else if (stopAtNonOption)\n            {\n                processNonOptionToken(token);\n
  \           }\n            else\n            {\n                tokens.add(token);\n
  \           }\n\n            gobble(iter);\n        } [4170,5690]\n    return_statement:
  return (String[]) tokens.toArray(new String[tokens.size()]); [5700,5760]\nto\nmethod_declaration
  [3862,5766]\nat 2\n\nNew cluster:\nMOVE from method_declaration [6382,6531]\n------------\n===\nmove-tree\n---\nmethod_parameters
  [6409,6686]\n    formal_parameter: String value [6444,6456]\nto\nmethod_declaration
  [6382,6531]\nat 1\n\nNew cluster:\nUnknown cluster type\n------------\n===\ninsert-tree\n---\nblock
  [6435,6531]\n    expression_statement: eatTheRest = true; [6449,6467]\n    expression_statement:
  tokens.add(\"--\"); [6480,6497]\n    expression_statement: tokens.add(value); [6507,6525]\nto\nmethod_declaration
  [6382,6531]\nat 2\n\nNew cluster:\n===\ninsert-node\n---\nlocal_variable_declaration:
  Option currentOption; [8602,8623]\nto\nblock [8859,9606]\nat 0\n------------\n===\ninsert-node\n---\nlocal_variable_declaration:
  Option currentOption; [8602,8623]\nto\nblock [8859,9606]\nat 0\n\nNew cluster:\nUPDATE
  from for (int i = 1; i < token.length(); i++)\n        {\n            String ch
  = String.valueOf(token.charAt(i));\n\n            if (options.hasOption(ch))\n            {\n
  \               tokens.add(\"-\" + ch);\n                currentOption = options.getOption(ch);\n\n
  \               if (currentOption.hasArg() && (token.length() != (i + 1)))\n                {\n
  \                   tokens.add(token.substring(i + 1));\n\n                    break;\n
  \               }\n            }\n            else if (stopAtNonOption)\n            {\n
  \               processNonOptionToken(token.substring(i), true);\n                break;\n
  \           }\n            else\n            {\n                tokens.add(token);\n
  \               break;\n            }\n        } to for (int i = 1; i < token.length();
  i++)\n        {\n            String ch = String.valueOf(token.charAt(i));\n\n            if
  (options.hasOption(ch))\n            {\n                tokens.add(\"-\" + ch);\n
  \               currentOption = options.getOption(ch);\n\n                if (currentOption.hasArg()
  && (token.length() != (i + 1)))\n                {\n                    tokens.add(token.substring(i
  + 1));\n\n                    break;\n                }\n            }\n            else
  if (stopAtNonOption)\n            {\n                processNonOptionToken(token.substring(i));\n
  \               break;\n            }\n            else\n            {\n                tokens.add(token);\n
  \               break;\n            }\n        }\n------------\n===\nupdate-node\n---\nfor_statement:
  for (int i = 1; i < token.length(); i++)\n        {\n            String ch = String.valueOf(token.charAt(i));\n\n
  \           if (options.hasOption(ch))\n            {\n                tokens.add(\"-\"
  + ch);\n                currentOption = options.getOption(ch);\n\n                if
  (currentOption.hasArg() && (token.length() != (i + 1)))\n                {\n                    tokens.add(token.substring(i
  + 1));\n\n                    break;\n                }\n            }\n            else
  if (stopAtNonOption)\n            {\n                processNonOptionToken(token.substring(i),
  true);\n                break;\n            }\n            else\n            {\n
  \               tokens.add(token);\n                break;\n            }\n        }
  [8869,9600]\nreplace for (int i = 1; i < token.length(); i++)\n        {\n            String
  ch = String.valueOf(token.charAt(i));\n\n            if (options.hasOption(ch))\n
  \           {\n                tokens.add(\"-\" + ch);\n                currentOption
  = options.getOption(ch);\n\n                if (currentOption.hasArg() && (token.length()
  != (i + 1)))\n                {\n                    tokens.add(token.substring(i
  + 1));\n\n                    break;\n                }\n            }\n            else
  if (stopAtNonOption)\n            {\n                processNonOptionToken(token.substring(i),
  true);\n                break;\n            }\n            else\n            {\n
  \               tokens.add(token);\n                break;\n            }\n        }
  by for (int i = 1; i < token.length(); i++)\n        {\n            String ch =
  String.valueOf(token.charAt(i));\n\n            if (options.hasOption(ch))\n            {\n
  \               tokens.add(\"-\" + ch);\n                currentOption = options.getOption(ch);\n\n
  \               if (currentOption.hasArg() && (token.length() != (i + 1)))\n                {\n
  \                   tokens.add(token.substring(i + 1));\n\n                    break;\n
  \               }\n            }\n            else if (stopAtNonOption)\n            {\n
  \               processNonOptionToken(token.substring(i));\n                break;\n
  \           }\n            else\n            {\n                tokens.add(token);\n
  \               break;\n            }\n        }\n\nNew cluster:\n===\ndelete-node\n---\nfield_declaration:
  private Option currentOption; [1413,1442]\n===\n------------\n===\ndelete-node\n---\nfield_declaration:
  private Option currentOption; [1413,1442]\n===\n\nNew cluster:\n===\ndelete-node\n---\nmethod_declaration
  [3896,5793]\n===\n------------\n===\ndelete-node\n---\nmethod_declaration [3896,5793]\n===\n===\ndelete-node\n---\nidentifier:
  flatten [3915,3922]\n===\n\nNew cluster:\nUnknown cluster type\n------------\n===\ndelete-tree\n---\nblock
  [3989,5793]\n    expression_statement: init(); [3999,4006]\n    expression_statement:
  this.options = options; [4015,4038]\n    local_variable_declaration: Iterator iter
  = Arrays.asList(arguments).iterator(); [4099,4151]\n    while_statement: while (iter.hasNext())\n
  \       {\n            // get the next command line token\n            String token
  = (String) iter.next();\n\n            // handle long option --foo or --foo=bar\n
  \           if (token.startsWith(\"--\"))\n            {\n                int pos
  = token.indexOf('=');\n                String opt = pos == -1 ? token : token.substring(0,
  pos); // --foo\n\n                if (!options.hasOption(opt))\n                {\n
  \                   processNonOptionToken(token, stopAtNonOption);\n                }\n
  \               else\n                {\n                    currentOption = options.getOption(opt);\n
  \                   \n                    tokens.add(opt);\n                    if
  (pos != -1)\n                    {\n                        tokens.add(token.substring(pos
  + 1));\n                    }\n                }\n            }\n\n            //
  single hyphen\n            else if (\"-\".equals(token))\n            {\n                tokens.add(token);\n
  \           }\n            else if (token.startsWith(\"-\"))\n            {\n                if
  (token.length() == 2 || options.hasOption(token))\n                {\n                    processOptionToken(token,
  stopAtNonOption);\n                }\n                // requires bursting\n                else\n
  \               {\n                    burstToken(token, stopAtNonOption);\n                }\n
  \           }\n            else\n            {\n                processNonOptionToken(token,
  stopAtNonOption);\n            }\n\n            gobble(iter);\n        } [4204,5717]\n
  \   return_statement: return (String[]) tokens.toArray(new String[tokens.size()]);
  [5727,5787]\n\nNew cluster:\n===\ndelete-node\n---\nmethod_declaration [6409,6686]\n===\n------------\n===\ndelete-node\n---\nidentifier:
  processNonOptionToken [6422,6443]\n===\n===\ndelete-node\n---\nmethod_declaration
  [6409,6686]\n===\n\nNew cluster:\nUnknown cluster type\n------------\n===\ndelete-tree\n---\nblock
  [6487,6686]\n    if_statement [6497,6652]\n        parenthesized_expression [6500,6571]\n
  \           and [6501,6570]\n                identifier: stopAtNonOption [6501,6516]\n
  \               parenthesized_expression [6520,6570]\n                    or [6521,6569]\n
  \                       equals [6521,6542]\n                            identifier:
  currentOption [6521,6534]\n                            null_literal [6538,6542]\n
  \                       unary_expression: !currentOption.hasArg() [6546,6569]\n
  \       block [6580,6652]\n            expression_statement: eatTheRest = true;
  [6594,6612]\n            expression_statement: tokens.add(\"--\"); [6625,6642]\n
  \   expression_statement: tokens.add(value); [6662,6680]\n\nNew cluster:\nUnknown
  cluster type\n------------\n===\ndelete-tree\n---\nif_statement [7352,7455]\n    parenthesized_expression
  [7355,7381]\n        method_invocation: options.hasOption(token) [7356,7380]\n    block
  [7390,7455]\n        expression_statement: currentOption = options.getOption(token);
  [7404,7445]\n\n"
