---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 4651
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: static final String DELEGATE_PROXY_SUFFIX = "(Proxy)";
          children: []
          pos: 4780
          length: 54
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 4838
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5019
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 5210
          length: 179
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 5393
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 5436
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 5492
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 5533
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 5584
          length: 42
        - type: field_declaration
          fields:
            text: private List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 5629
          length: 72
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 5862
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 5884
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 5905
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 5929
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 6277
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 6285
                      length: 11
                    pos: 6272
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 6306
                      length: 62
                    pos: 6298
                    length: 76
                children: []
                pos: 6272
                length: 102
              pos: 5848
              length: 530
          children: []
          pos: 5848
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 6382
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 6488
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 6980
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 6992
                length: 9
              pos: 6967
              length: 1725
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 7212
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 7239
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 7289
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7299
                            length: 4
                        children: []
                        pos: 7289
                        length: 14
                    children: []
                    pos: 7288
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 7364
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 7408
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 7488
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 7529
                    length: 53
                  pos: 7305
                  length: 283
                pos: 7285
                length: 508
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 7799
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 7843
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type instanceof FunctionType) {
                            FunctionType fnType = (FunctionType) type;
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 8039
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8521
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8531
                            length: 4
                        children: []
                        pos: 8521
                        length: 14
                    children: []
                    pos: 8520
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes);
                    children: []
                    pos: 8545
                    length: 116
                  pos: 8537
                  length: 130
                pos: 8517
                length: 150
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 8672
                length: 16
              pos: 7017
              length: 1675
          children: []
          pos: 6967
          length: 1725
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 8851
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8870
                length: 9
              pos: 8824
              length: 1616
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, root, new DiscoverEnums(typeRegistry));
                children: []
                pos: 8888
                length: 72
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 8966
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 9007
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9062
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 9126
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 9180
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9235
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 9295
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9353
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9416
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9472
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9533
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 9598
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9654
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9717
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9779
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9839
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 9898
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "goog.typedef", NO_TYPE);
                children: []
                pos: 10133
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 10362
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 10427
                length: 9
              pos: 8881
              length: 1559
          children: []
          pos: 8824
          length: 1616
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 10457
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 10483
                length: 11
              pos: 10444
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 10520
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 10582
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 10655
                length: 89
              pos: 10514
              length: 234
          children: []
          pos: 10444
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 10765
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 10788
                length: 11
              pos: 10752
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 10844
                length: 64
              pos: 10838
              length: 74
          children: []
          pos: 10752
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 10929
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 10947
                length: 11
              pos: 10916
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 10989
                length: 42
              pos: 10983
              length: 52
          children: []
          pos: 10916
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnums
              children: []
              pos: 11060
              length: 13
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 11112
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnums(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 11156
                length: 78
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 11266
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 11272
                      length: 15
                    pos: 11240
                    length: 658
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 11321
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 11357
                              length: 14
                          children: []
                          pos: 11356
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NAME:
                                        nameNode = node;
                                        break;
                                      case Token.VAR:
                                        if (node.hasOneChild()) {
                                          nameNode = node.getFirstChild();
                                        }
                                        break;
                                      case Token.ASSIGN:
                                        nameNode = node.getFirstChild();
                                        break;
                                    }
                          children: []
                          pos: 11373
                          length: 299
                      children: []
                      pos: 11349
                      length: 323
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: nameNode
                                  children: []
                                  pos: 11684
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 11696
                                  length: 4
                              children: []
                              pos: 11684
                              length: 16
                          children: []
                          pos: 11683
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSDocInfo info = node.getJSDocInfo();
                          children: []
                          pos: 11712
                          length: 37
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 11762
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 11770
                                          length: 4
                                      children: []
                                      pos: 11762
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 11778
                                      length: 27
                                  children: []
                                  pos: 11762
                                  length: 43
                              children: []
                              pos: 11761
                              length: 45
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: registry.identifyEnumName(nameNode.getQualifiedName());
                              children: []
                              pos: 11819
                              length: 55
                            pos: 11807
                            length: 77
                          pos: 11758
                          length: 126
                        pos: 11702
                        length: 190
                      pos: 11680
                      length: 212
                    pos: 11313
                    length: 585
                children: []
                pos: 11240
                length: 658
              pos: 11039
              length: 863
          children: []
          pos: 11039
          length: 863
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrototypePropertyOwner
              children: []
              pos: 12132
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 12158
                length: 6
              pos: 12112
              length: 432
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: n.getType()
                            children: []
                            pos: 12176
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Token.GETPROP
                            children: []
                            pos: 12191
                            length: 13
                        children: []
                        pos: 12176
                        length: 28
                    children: []
                    pos: 12175
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node firstChild = n.getFirstChild();
                    children: []
                    pos: 12214
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: firstChild.getType()
                                    children: []
                                    pos: 12261
                                    length: 20
                                  right:
                                    type: field_access
                                    fields:
                                      text: Token.GETPROP
                                    children: []
                                    pos: 12285
                                    length: 13
                                children: []
                                pos: 12261
                                length: 37
                              right:
                                type: method_invocation
                                fields:
                                  text: firstChild.getLastChild().getString().equals("prototype")
                                children: []
                                pos: 12312
                                length: 57
                            children: []
                            pos: 12261
                            length: 108
                        children: []
                        pos: 12260
                        length: 110
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: Node maybeOwner = firstChild.getFirstChild();
                        children: []
                        pos: 12381
                        length: 45
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: method_invocation
                                fields:
                                  text: maybeOwner.isQualifiedName()
                                children: []
                                pos: 12439
                                length: 28
                            children: []
                            pos: 12438
                            length: 30
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return maybeOwner;
                            children: []
                            pos: 12481
                            length: 18
                          pos: 12469
                          length: 40
                        pos: 12435
                        length: 74
                      pos: 12371
                      length: 146
                    pos: 12257
                    length: 260
                  pos: 12206
                  length: 317
                pos: 12172
                length: 351
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 12528
                length: 12
              pos: 12166
              length: 378
          children: []
          pos: 12112
          length: 432
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: attachLiteralTypes
              children: []
              pos: 12561
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 12580
                length: 6
              pos: 12548
              length: 997
            body:
              type: block
              fields: {}
              children:
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: n.getType()
                        children: []
                        pos: 12602
                        length: 11
                    children: []
                    pos: 12601
                    length: 13
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                              case Token.NULL:
                                n.setJSType(getNativeType(NULL_TYPE));
                                break;

                              case Token.VOID:
                                n.setJSType(getNativeType(VOID_TYPE));
                                break;

                              case Token.STRING:
                                n.setJSType(getNativeType(STRING_TYPE));
                                break;

                              case Token.NUMBER:
                                n.setJSType(getNativeType(NUMBER_TYPE));
                                break;

                              case Token.TRUE:
                              case Token.FALSE:
                                n.setJSType(getNativeType(BOOLEAN_TYPE));
                                break;

                              case Token.REGEXP:
                                n.setJSType(getNativeType(REGEXP_TYPE));
                                break;

                              case Token.REF_SPECIAL:
                                n.setJSType(getNativeType(UNKNOWN_TYPE));
                                break;

                              case Token.OBJECTLIT:
                                if (n.getJSType() == null) {
                                  n.setJSType(typeRegistry.createAnonymousObjectType());
                                }
                                break;

                              // NOTE(nicksantos): If we ever support Array tuples,
                              // we will need to put ARRAYLIT here as well.
                            }
                    children: []
                    pos: 12615
                    length: 926
                children: []
                pos: 12594
                length: 947
              pos: 12588
              length: 957
          children: []
          pos: 12548
          length: 997
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 13564
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 13578
                length: 23
              pos: 13549
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 13609
                length: 46
              pos: 13603
              length: 56
          children: []
          pos: 13549
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 13686
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 13808
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 13832
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 14009
                length: 67
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 14252
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 14404
                length: 33
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 14443
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 14529
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 14545
                      length: 9
                    pos: 14524
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 14577
                      length: 54
                    pos: 14569
                    length: 68
                children: []
                pos: 14524
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 14648
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 14643
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 14720
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 14875
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 14919
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 15097
                      length: 40
                    pos: 14663
                    length: 480
                children: []
                pos: 14643
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 15184
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal nodeTraversal
                      children: []
                      pos: 15199
                      length: 27
                    pos: 15149
                    length: 536
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 15269
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 15284
                                      length: 14
                                  children: []
                                  pos: 15269
                                  length: 29
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 15312
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.SCRIPT
                                      children: []
                                      pos: 15327
                                      length: 12
                                  children: []
                                  pos: 15312
                                  length: 27
                              children: []
                              pos: 15269
                              length: 70
                          children: []
                          pos: 15268
                          length: 72
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: sourceName = (String) n.getProp(Node.SOURCENAME_PROP);
                          children: []
                          pos: 15351
                          length: 54
                        pos: 15341
                        length: 72
                      pos: 15265
                      length: 148
                    - type: return_statement
                      fields:
                        text: |-
                          return parent == null || parent.getType() != Token.FUNCTION ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 15545
                      length: 134
                    pos: 15257
                    length: 428
                children: []
                pos: 15149
                length: 536
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 15717
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 15723
                      length: 15
                    pos: 15691
                    length: 1550
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(n);
                      children: []
                      pos: 15769
                      length: 22
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 15807
                              length: 11
                          children: []
                          pos: 15806
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // VARs and ASSIGNs are handled in different branches of this
                                        // switch statement.
                                        if (parent.getType() != Token.ASSIGN &&
                                            parent.getType() != Token.NAME) {
                                          defineDeclaredFunction(n, parent);
                                        }

                                        break;

                                      case Token.ASSIGN:
                                        // Handle constructor and enum definitions.
                                        defineNamedTypeAssign(n, parent);

                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.getType() == Token.GETPROP &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.getType() == Token.EXPR_RESULT &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 15820
                          length: 1415
                      children: []
                      pos: 15799
                      length: 1436
                    pos: 15761
                    length: 1480
                children: []
                pos: 15691
                length: 1550
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 17484
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 17521
                      length: 15
                    pos: 17477
                    length: 168
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(t.getSourceName(),
                          node, info);
                      children: []
                      pos: 17573
                      length: 66
                    pos: 17565
                    length: 80
                children: []
                pos: 17477
                length: 168
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 17658
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 17686
                      length: 17
                    pos: 17651
                    length: 1675
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 17748
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode = node.getType() == Token.GETPROP ?
                                    node.getFirstChild() : null;
                      children: []
                      pos: 17776
                      length: 87
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 17874
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 17882
                                  length: 4
                              children: []
                              pos: 17874
                              length: 12
                          children: []
                          pos: 17873
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 17902
                                  length: 14
                              children: []
                              pos: 17901
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 17930
                              length: 54
                            pos: 17918
                            length: 76
                          pos: 17898
                          length: 1393
                        pos: 17888
                        length: 1411
                      pos: 17870
                      length: 1429
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 19306
                      length: 14
                    pos: 17740
                    length: 1586
                children: []
                pos: 17651
                length: 1675
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 19481
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 19502
                      length: 6
                    pos: 19476
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 19528
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 19580
                      length: 46
                    pos: 19520
                    length: 112
                children: []
                pos: 19476
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 19693
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 19705
                      length: 6
                    pos: 19688
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 19734
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 19778
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 19820
                      length: 31
                    pos: 19726
                    length: 131
                children: []
                pos: 19688
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 19921
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 19931
                      length: 6
                    pos: 19916
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 19960
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 20002
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 20047
                              length: 23
                          children: []
                          pos: 20046
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 20086
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20094
                                      length: 4
                                  children: []
                                  pos: 20086
                                  length: 12
                              children: []
                              pos: 20085
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 20143
                              length: 63
                            pos: 20100
                            length: 116
                          pos: 20082
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 20225
                          length: 102
                        pos: 20072
                        length: 263
                      pos: 20043
                      length: 440
                    pos: 19952
                    length: 537
                children: []
                pos: 19916
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineDeclaredFunction
                    children: []
                    pos: 20552
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 20575
                      length: 6
                    pos: 20547
                    length: 670
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 20604
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 20652
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: int parentType = parent.getType();
                      children: []
                      pos: 20693
                      length: 34
                    - type: expression_statement
                      fields:
                        text: |-
                          Preconditions.checkState(
                                    (scope.isLocal() || parentType != Token.ASSIGN) &&
                                    parentType != Token.NAME,
                                    "function defined as standalone function when it is being " +
                                    "assigned");
                      children: []
                      pos: 20734
                      length: 217
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = n.getFirstChild().getString();
                      children: []
                      pos: 20958
                      length: 52
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType = getFunctionType(functionName, n, info,
                                    null);
                      children: []
                      pos: 21017
                      length: 83
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 21111
                              length: 33
                          children: []
                          pos: 21110
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 21156
                          length: 47
                        pos: 21146
                        length: 65
                      pos: 21107
                      length: 104
                    pos: 20596
                    length: 621
                children: []
                pos: 20547
                length: 670
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineNamedTypeAssign
                    children: []
                    pos: 21310
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 21332
                      length: 6
                    pos: 21305
                    length: 1098
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.ASSIGN);
                      children: []
                      pos: 21361
                      length: 38
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 21406
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: Node rvalue = n.getLastChild();
                      children: []
                      pos: 21788
                      length: 31
                    - type: local_variable_declaration
                      fields:
                        text: Node lvalue = n.getFirstChild();
                      children: []
                      pos: 21826
                      length: 32
                    - type: expression_statement
                      fields:
                        text: 'info = (info != null) ? info : rvalue.getJSDocInfo();'
                      children: []
                      pos: 21865
                      length: 53
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: rvalue.getType()
                                      children: []
                                      pos: 21929
                                      length: 16
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 21949
                                      length: 14
                                  children: []
                                  pos: 21929
                                  length: 34
                                right:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 21977
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 21985
                                          length: 4
                                      children: []
                                      pos: 21977
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.isConstructor()
                                      children: []
                                      pos: 21993
                                      length: 20
                                  children: []
                                  pos: 21977
                                  length: 36
                              children: []
                              pos: 21929
                              length: 84
                          children: []
                          pos: 21928
                          length: 86
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              getFunctionType(lvalue.getQualifiedName(), rvalue, info,
                                          lvalue);
                          children: []
                          pos: 22025
                          length: 77
                        pos: 22015
                        length: 95
                      pos: 21925
                      length: 472
                    pos: 21353
                    length: 1050
                children: []
                pos: 21305
                length: 1098
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 22806
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 22817
                      length: 9
                    pos: 22793
                    length: 1342
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 22875
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: value
                                      children: []
                                      pos: 22921
                                      length: 5
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22930
                                      length: 4
                                  children: []
                                  pos: 22921
                                  length: 13
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: value.getType()
                                      children: []
                                      pos: 22938
                                      length: 15
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 22957
                                      length: 14
                                  children: []
                                  pos: 22938
                                  length: 33
                              children: []
                              pos: 22921
                              length: 50
                          children: []
                          pos: 22920
                          length: 52
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String functionName = name.getString();
                          children: []
                          pos: 23003
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType functionType =
                                          getFunctionType(functionName, value, info, null);
                          children: []
                          pos: 23051
                          length: 89
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: functionType.isReturnTypeInferred()
                                      children: []
                                      pos: 23153
                                      length: 35
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.isLocal()
                                      children: []
                                      pos: 23204
                                      length: 15
                                  children: []
                                  pos: 23153
                                  length: 66
                              children: []
                              pos: 23152
                              length: 68
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(name, var, null);
                              children: []
                              pos: 23233
                              length: 28
                            pos: 23221
                            length: 50
                          pos: 23149
                          length: 186
                        pos: 22973
                        length: 370
                      pos: 22917
                      length: 1212
                    pos: 22867
                    length: 1268
                children: []
                pos: 22793
                length: 1342
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 24767
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String name
                      children: []
                      pos: 24783
                      length: 11
                    pos: 24746
                    length: 2991
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 24868
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 24991
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25001
                                          length: 4
                                      children: []
                                      pos: 24991
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 25009
                                      length: 24
                                  children: []
                                  pos: 24991
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 25037
                                  length: 16
                              children: []
                              pos: 24991
                              length: 62
                          children: []
                          pos: 24990
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 25065
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 25128
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25135
                                          length: 4
                                      children: []
                                      pos: 25128
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof FunctionType
                                      children: []
                                      pos: 25143
                                      length: 37
                                  children: []
                                  pos: 25128
                                  length: 52
                              children: []
                              pos: 25127
                              length: 54
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: functionType = (FunctionType) var.getType();
                              children: []
                              pos: 25194
                              length: 44
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: functionType
                                              children: []
                                              pos: 25253
                                              length: 12
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 25269
                                              length: 4
                                          children: []
                                          pos: 25253
                                          length: 20
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: functionType.isConstructor()
                                          children: []
                                          pos: 25277
                                          length: 28
                                      children: []
                                      pos: 25253
                                      length: 52
                                  children: []
                                  pos: 25252
                                  length: 54
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: typeRegistry.declareType(name, functionType.getInstanceType());
                                  children: []
                                  pos: 25321
                                  length: 63
                                pos: 25307
                                length: 89
                              pos: 25249
                              length: 147
                            pos: 25182
                            length: 224
                          pos: 25124
                          length: 282
                        - type: return_statement
                          fields:
                            text: return functionType;
                          children: []
                          pos: 25415
                          length: 20
                        pos: 25055
                        length: 388
                      pos: 24987
                      length: 456
                    - type: local_variable_declaration
                      fields:
                        text: Node owner = null;
                      children: []
                      pos: 25451
                      length: 18
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: lvalueNode
                                  children: []
                                  pos: 25480
                                  length: 10
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 25494
                                  length: 4
                              children: []
                              pos: 25480
                              length: 18
                          children: []
                          pos: 25479
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: owner = getPrototypePropertyOwner(lvalueNode);
                          children: []
                          pos: 25510
                          length: 46
                        pos: 25500
                        length: 64
                      pos: 25476
                      length: 88
                    - type: local_variable_declaration
                      fields:
                        text: 'Node errorRoot = rValue == null ? lvalueNode : rValue;'
                      children: []
                      pos: 25572
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean isFnLiteral =
                                    rValue != null && rValue.getType() == Token.FUNCTION;
                      children: []
                      pos: 25633
                      length: 85
                    - type: local_variable_declaration
                      fields:
                        text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                      children: []
                      pos: 25725
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node parametersNode = isFnLiteral ?
                                    rValue.getFirstChild().getNext() : null;
                      children: []
                      pos: 25774
                      length: 86
                    - type: local_variable_declaration
                      fields:
                        text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                          : null;'
                      children: []
                      pos: 25867
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 25940
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25956
                                          length: 4
                                      children: []
                                      pos: 25940
                                      length: 20
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 25964
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25972
                                          length: 4
                                      children: []
                                      pos: 25964
                                      length: 12
                                  children: []
                                  pos: 25940
                                  length: 36
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 25980
                                  length: 14
                              children: []
                              pos: 25940
                              length: 54
                          children: []
                          pos: 25939
                          length: 56
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType type = info.getType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 26006
                          length: 59
                        - type: expression_statement
                          fields:
                            text: type = type.restrictByNotNullOrUndefined();
                          children: []
                          pos: 26147
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: type.isFunctionType()
                                  children: []
                                  pos: 26203
                                  length: 21
                              children: []
                              pos: 26202
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: functionType = (FunctionType) type;
                              children: []
                              pos: 26238
                              length: 35
                            - type: expression_statement
                              fields:
                                text: functionType.setJSDocInfo(info);
                              children: []
                              pos: 26284
                              length: 32
                            pos: 26226
                            length: 100
                          pos: 26199
                          length: 127
                        pos: 25996
                        length: 338
                      pos: 25936
                      length: 398
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 26346
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26362
                                  length: 4
                              children: []
                              pos: 26346
                              length: 20
                          children: []
                          pos: 26345
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType overriddenPropType = null;
                          children: []
                          pos: 26431
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: lvalueNode
                                              children: []
                                              pos: 26483
                                              length: 10
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 26497
                                              length: 4
                                          children: []
                                          pos: 26483
                                          length: 18
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: lvalueNode.getType()
                                              children: []
                                              pos: 26505
                                              length: 20
                                            right:
                                              type: field_access
                                              fields:
                                                text: Token.GETPROP
                                              children: []
                                              pos: 26529
                                              length: 13
                                          children: []
                                          pos: 26505
                                          length: 37
                                      children: []
                                      pos: 26483
                                      length: 59
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: lvalueNode.isQualifiedName()
                                      children: []
                                      pos: 26558
                                      length: 28
                                  children: []
                                  pos: 26483
                                  length: 103
                              children: []
                              pos: 26482
                              length: 105
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  Var var = scope.getVar(
                                                lvalueNode.getFirstChild().getQualifiedName());
                              children: []
                              pos: 26600
                              length: 85
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 26700
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 26707
                                          length: 4
                                      children: []
                                      pos: 26700
                                      length: 11
                                  children: []
                                  pos: 26699
                                  length: 13
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: ObjectType ownerType = ObjectType.cast(var.getType());
                                  children: []
                                  pos: 26727
                                  length: 54
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 26798
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 26811
                                              length: 4
                                          children: []
                                          pos: 26798
                                          length: 17
                                      children: []
                                      pos: 26797
                                      length: 19
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: local_variable_declaration
                                      fields:
                                        text: String propName = lvalueNode.getLastChild().getString();
                                      children: []
                                      pos: 26833
                                      length: 56
                                    - type: expression_statement
                                      fields:
                                        text: overriddenPropType = findOverriddenFunction(ownerType,
                                          propName);
                                      children: []
                                      pos: 26904
                                      length: 65
                                    pos: 26817
                                    length: 166
                                  pos: 26794
                                  length: 189
                                pos: 26713
                                length: 282
                              pos: 26696
                              length: 299
                            pos: 26588
                            length: 417
                          pos: 26479
                          length: 526
                        - type: expression_statement
                          fields:
                            text: |-
                              functionType =
                                          new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                              scope)
                                          .setSourceNode(fnRoot)
                                          .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                          .inferTemplateTypeName(info)
                                          .inferReturnType(info)
                                          .inferInheritance(info)
                                          .inferThisType(info, owner)
                                          .inferParameterTypes(parametersNode, info)
                                          .inferReturnStatementsAsLastResort(fnBlock)
                                          .buildAndRegister();
                          children: []
                          pos: 27015
                          length: 520
                        pos: 26368
                        length: 1175
                      pos: 26342
                      length: 1201
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: rValue
                                  children: []
                                  pos: 27613
                                  length: 6
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 27623
                                  length: 4
                              children: []
                              pos: 27613
                              length: 14
                          children: []
                          pos: 27612
                          length: 16
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: setDeferredType(rValue, functionType);
                          children: []
                          pos: 27639
                          length: 38
                        pos: 27629
                        length: 56
                      pos: 27609
                      length: 76
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 27711
                      length: 20
                    pos: 24860
                    length: 2877
                children: []
                pos: 24746
                length: 2991
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 27851
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 27883
                      length: 20
                    pos: 27830
                    length: 740
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 28016
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: propType instanceof FunctionType
                              children: []
                              pos: 28081
                              length: 32
                          children: []
                          pos: 28080
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return (FunctionType) propType;
                          children: []
                          pos: 28125
                          length: 31
                        pos: 28115
                        length: 49
                      pos: 28077
                      length: 467
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 28552
                      length: 12
                    pos: 27922
                    length: 648
                children: []
                pos: 27830
                length: 740
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getEnumType
                    children: []
                    pos: 29239
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String name
                      children: []
                      pos: 29251
                      length: 11
                    pos: 29222
                    length: 1569
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 29326
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: value
                                  children: []
                                  pos: 29392
                                  length: 5
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29401
                                  length: 4
                              children: []
                              pos: 29392
                              length: 13
                          children: []
                          pos: 29391
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: value.getType()
                                      children: []
                                      pos: 29421
                                      length: 15
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.OBJECTLIT
                                      children: []
                                      pos: 29440
                                      length: 15
                                  children: []
                                  pos: 29421
                                  length: 34
                              children: []
                              pos: 29420
                              length: 36
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = typeRegistry.createEnumType(name,
                                  elementsType);
                              children: []
                              pos: 29504
                              length: 59
                            - type: local_variable_declaration
                              fields:
                                text: Node key = value.getFirstChild();
                              children: []
                              pos: 29612
                              length: 33
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);

                                              if (enumType.hasOwnProperty(keyName)) {
                                                compiler.report(JSError.make(sourceName, key, ENUM_DUP, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName);
                                              }
                                              key = key.getNext();
                                              key = (key == null) ? null : key.getNext();
                                            }
                              children: []
                              pos: 29656
                              length: 574
                            pos: 29457
                            length: 783
                          pos: 29417
                          length: 1056
                        pos: 29407
                        length: 1074
                      pos: 29388
                      length: 1093
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 30493
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 30505
                                  length: 4
                              children: []
                              pos: 30493
                              length: 16
                          children: []
                          pos: 30492
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: compiler.report(JSError.make(sourceName, parent,
                              ENUM_INITIALIZER));
                          children: []
                          pos: 30521
                          length: 68
                        pos: 30511
                        length: 86
                      pos: 30489
                      length: 272
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 30769
                      length: 16
                    pos: 29318
                    length: 1473
                children: []
                pos: 29222
                length: 1569
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 31214
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 31225
                      length: 9
                    pos: 31201
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 31270
                      length: 45
                    pos: 31262
                    length: 59
                children: []
                pos: 31201
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 31815
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 31826
                      length: 6
                    pos: 31810
                    length: 2706
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 31886
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: boolean shouldDeclareOnGlobalThis = false;
                      children: []
                      pos: 32010
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.getType()
                                  children: []
                                  pos: 32063
                                  length: 11
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.NAME
                                  children: []
                                  pos: 32078
                                  length: 10
                              children: []
                              pos: 32063
                              length: 25
                          children: []
                          pos: 32062
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.getType() == Token.FUNCTION ||
                                          parent.getType() == Token.VAR ||
                                          parent.getType() == Token.LP ||
                                          parent.getType() == Token.CATCH);
                          children: []
                          pos: 32100
                          length: 213
                        - type: expression_statement
                          fields:
                            text: |-
                              shouldDeclareOnGlobalThis = scope.isGlobal() &&
                                          (parent.getType() == Token.VAR ||
                                           parent.getType() == Token.FUNCTION);
                          children: []
                          pos: 32322
                          length: 143
                        pos: 32090
                        length: 383
                      pos: 32059
                      length: 613
                    - type: local_variable_declaration
                      fields:
                        text: String variableName = n.getQualifiedName();
                      children: []
                      pos: 32679
                      length: 43
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 32729
                      length: 53
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scope.isDeclared(variableName, false)
                              children: []
                              pos: 32830
                              length: 37
                          children: []
                          pos: 32829
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scope.getVar(variableName);
                          children: []
                          pos: 32879
                          length: 40
                        - type: expression_statement
                          fields:
                            text: |-
                              validator.expectUndeclaredVariable(
                                          sourceName, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 32928
                          length: 99
                        pos: 32869
                        length: 166
                      pos: 32826
                      length: 1684
                    pos: 31878
                    length: 2638
                children: []
                pos: 31810
                length: 2706
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredGetPropType
                    children: []
                    pos: 34900
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 34923
                      length: 15
                    pos: 34885
                    length: 506
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 34999
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35007
                                      length: 4
                                  children: []
                                  pos: 34999
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 35015
                                  length: 14
                              children: []
                              pos: 34999
                              length: 30
                          children: []
                          pos: 34998
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(t, n, info);
                          children: []
                          pos: 35041
                          length: 47
                        pos: 35031
                        length: 65
                      pos: 34995
                      length: 390
                    pos: 34987
                    length: 404
                children: []
                pos: 34885
                length: 506
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 35607
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 35643
                      length: 15
                    pos: 35594
                    length: 2312
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 35689
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 35790
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 35806
                                  length: 4
                              children: []
                              pos: 35790
                              length: 20
                          children: []
                          pos: 35789
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType superClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.superclassName));
                          children: []
                          pos: 35822
                          length: 104
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType subClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.subclassName));
                          children: []
                          pos: 35935
                          length: 100
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: superClass
                                          children: []
                                          pos: 36048
                                          length: 10
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36062
                                          length: 4
                                      children: []
                                      pos: 36048
                                      length: 18
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: subClass
                                          children: []
                                          pos: 36070
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36082
                                          length: 4
                                      children: []
                                      pos: 36070
                                      length: 16
                                  children: []
                                  pos: 36048
                                  length: 38
                              children: []
                              pos: 36047
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superCtor = superClass.getConstructor();
                              children: []
                              pos: 36100
                              length: 53
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType subCtor = subClass.getConstructor();
                              children: []
                              pos: 36164
                              length: 49
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: field_access
                                          fields:
                                            text: relationship.type
                                          children: []
                                          pos: 36229
                                          length: 17
                                        right:
                                          type: field_access
                                          fields:
                                            text: SubclassType.INHERITS
                                          children: []
                                          pos: 36250
                                          length: 21
                                      children: []
                                      pos: 36229
                                      length: 42
                                  children: []
                                  pos: 36228
                                  length: 44
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 36287
                                  length: 54
                                pos: 36273
                                length: 80
                              pos: 36225
                              length: 128
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 36369
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 36382
                                              length: 4
                                          children: []
                                          pos: 36369
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 36390
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 36401
                                              length: 4
                                          children: []
                                          pos: 36390
                                          length: 15
                                      children: []
                                      pos: 36369
                                      length: 36
                                  children: []
                                  pos: 36368
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 36421
                                  length: 99
                                pos: 36407
                                length: 125
                              pos: 36365
                              length: 167
                            pos: 36088
                            length: 454
                          pos: 36044
                          length: 498
                        pos: 35812
                        length: 738
                      pos: 35786
                      length: 764
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 36558
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 36661
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 36689
                                  length: 4
                              children: []
                              pos: 36661
                              length: 32
                          children: []
                          pos: 36660
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 36705
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 36819
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 36833
                                      length: 4
                                  children: []
                                  pos: 36819
                                  length: 18
                              children: []
                              pos: 36818
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 36851
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 36923
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36939
                                          length: 4
                                      children: []
                                      pos: 36923
                                      length: 20
                                  children: []
                                  pos: 36922
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 36959
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 37058
                                  length: 92
                                pos: 36945
                                length: 217
                              pos: 36919
                              length: 243
                            pos: 36839
                            length: 333
                          pos: 36815
                          length: 357
                        pos: 36695
                        length: 485
                      pos: 36657
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 37188
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 37297
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37321
                                  length: 4
                              children: []
                              pos: 37297
                              length: 28
                          children: []
                          pos: 37296
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 37337
                          length: 48
                        pos: 37327
                        length: 66
                      pos: 37293
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(t, n);
                      children: []
                      pos: 37401
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 37504
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37525
                                  length: 4
                              children: []
                              pos: 37504
                              length: 25
                          children: []
                          pos: 37503
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType type = ObjectType.cast(
                                          typeRegistry.getType(objectLiteralCast.typeName));
                          children: []
                          pos: 37541
                          length: 97
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: type
                                          children: []
                                          pos: 37651
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37659
                                          length: 4
                                      children: []
                                      pos: 37651
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: type.getConstructor()
                                          children: []
                                          pos: 37667
                                          length: 21
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37692
                                          length: 4
                                      children: []
                                      pos: 37667
                                      length: 29
                                  children: []
                                  pos: 37651
                                  length: 45
                              children: []
                              pos: 37650
                              length: 47
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: setDeferredType(objectLiteralCast.objectNode,
                                  type);
                              children: []
                              pos: 37710
                              length: 52
                            pos: 37698
                            length: 74
                          pos: 37647
                          length: 245
                        pos: 37531
                        length: 369
                      pos: 37500
                      length: 400
                    pos: 35681
                    length: 2225
                children: []
                pos: 35594
                length: 2312
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 38003
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 38038
                      length: 41
                    pos: 37990
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 38089
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 38206
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 38329
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 38468
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 38487
                                          length: 4
                                      children: []
                                      pos: 38468
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 38505
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 38527
                                          length: 4
                                      children: []
                                      pos: 38505
                                      length: 26
                                  children: []
                                  pos: 38468
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 38545
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 38568
                                      length: 4
                                  children: []
                                  pos: 38545
                                  length: 27
                              children: []
                              pos: 38468
                              length: 104
                          children: []
                          pos: 38467
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 38584
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 38655
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 38732
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 38816
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 38833
                                              length: 4
                                          children: []
                                          pos: 38816
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 38841
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 38861
                                              length: 4
                                          children: []
                                          pos: 38841
                                          length: 24
                                      children: []
                                      pos: 38816
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 38881
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 38902
                                          length: 4
                                      children: []
                                      pos: 38881
                                      length: 25
                                  children: []
                                  pos: 38816
                                  length: 90
                              children: []
                              pos: 38815
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 38920
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 39028
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 39130
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 39320
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 39505
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 39571
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 39741
                              length: 58
                            pos: 38908
                            length: 901
                          pos: 38812
                          length: 997
                        pos: 38574
                        length: 1243
                      pos: 38464
                      length: 1353
                    pos: 38081
                    length: 1742
                children: []
                pos: 37990
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 40257
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 40283
                      length: 15
                    pos: 40252
                    length: 4050
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 40368
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 40410
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 40465
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 40508
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 40562
                      length: 64
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 40873
                              length: 28
                          children: []
                          pos: 40872
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 40913
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 40957
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 40965
                                      length: 4
                                  children: []
                                  pos: 40957
                                  length: 12
                              children: []
                              pos: 40956
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!qVar.isTypeInferred()"
                                      children: []
                                      pos: 40987
                                      length: 22
                                  children: []
                                  pos: 40986
                                  length: 24
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: return_statement
                                  fields:
                                    text: return;
                                  children: []
                                  pos: 41084
                                  length: 7
                                pos: 41011
                                length: 92
                              pos: 40983
                              length: 120
                            - type: expression_statement
                              fields:
                                text: scope.undeclare(qVar);
                              children: []
                              pos: 41114
                              length: 22
                            pos: 40971
                            length: 175
                          pos: 40953
                          length: 193
                        pos: 40903
                        length: 251
                      pos: 40869
                      length: 285
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredGetPropType(t, info, n,
                          rhsValue);
                      children: []
                      pos: 41743
                      length: 64
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 41818
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 41831
                                      length: 4
                                  children: []
                                  pos: 41818
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 41839
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 41851
                                      length: 4
                                  children: []
                                  pos: 41839
                                  length: 16
                              children: []
                              pos: 41818
                              length: 37
                          children: []
                          pos: 41817
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 41902
                          length: 33
                        pos: 41857
                        length: 86
                      pos: 41814
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 41955
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 41968
                                  length: 4
                              children: []
                              pos: 41955
                              length: 17
                          children: []
                          pos: 41954
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: parent.getType()
                                      children: []
                                      pos: 41988
                                      length: 16
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.EXPR_RESULT
                                      children: []
                                      pos: 42008
                                      length: 17
                                  children: []
                                  pos: 41988
                                  length: 37
                              children: []
                              pos: 41987
                              length: 39
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 42039
                              length: 148
                            pos: 42027
                            length: 170
                          pos: 41984
                          length: 213
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 42207
                          length: 7
                        pos: 41974
                        length: 248
                      pos: 41951
                      length: 271
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 42230
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 42265
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 42273
                                  length: 4
                              children: []
                              pos: 42265
                              length: 12
                          children: []
                          pos: 42264
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType() || info.hasEnumParameterType() ||
                                          FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 42336
                          length: 127
                        pos: 42279
                        length: 192
                      pos: 42261
                      length: 210
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: inferred
                              children: []
                              pos: 42483
                              length: 8
                          children: []
                          pos: 42482
                          length: 10
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(rhsValue != null &&
                                          rhsValue.getType() == Token.FUNCTION &&
                                          !scope.isDeclared(qName, false));
                          children: []
                          pos: 42545
                          length: 130
                        pos: 42493
                        length: 190
                      pos: 42479
                      length: 204
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 42695
                              length: 9
                          children: []
                          pos: 42694
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 42716
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 42777
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42790
                                      length: 4
                                  children: []
                                  pos: 42777
                                  length: 17
                              children: []
                              pos: 42776
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 42909
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 42992
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 43046
                                                  length: 42
                                              children: []
                                              pos: 42992
                                              length: 96
                                          children: []
                                          pos: 42991
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 43109
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 43121
                                                          length: 31
                                                      children: []
                                                      pos: 43109
                                                      length: 43
                                                  children: []
                                                  pos: 43108
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 43172
                                                  length: 27
                                              children: []
                                              pos: 43108
                                              length: 91
                                          children: []
                                          pos: 43107
                                          length: 93
                                      children: []
                                      pos: 42991
                                      length: 209
                                  children: []
                                  pos: 42990
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, isExtern);
                                  children: []
                                  pos: 43290
                                  length: 64
                                pos: 43202
                                length: 164
                              pos: 42987
                              length: 379
                            pos: 42796
                            length: 580
                          pos: 42773
                          length: 603
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 43518
                          length: 43
                        pos: 42706
                        length: 863
                      pos: 42691
                      length: 1605
                    pos: 40360
                    length: 3942
                children: []
                pos: 40252
                length: 4050
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 44547
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 44561
                      length: 15
                    pos: 44528
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 44586
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 44635
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 44647
                                  length: 4
                              children: []
                              pos: 44635
                              length: 16
                          children: []
                          pos: 44634
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 44663
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 44713
                          length: 110
                        pos: 44653
                        length: 178
                      pos: 44631
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 44838
                      length: 12
                    pos: 44578
                    length: 278
                children: []
                pos: 44528
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 44998
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 44993
                    length: 1189
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, isExtern);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 45032
                      length: 1144
                    pos: 45024
                    length: 1158
                children: []
                pos: 44993
                length: 1189
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 46334
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 46400
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 46442
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 46544
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 46550
                            length: 15
                          pos: 46532
                          length: 398
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: parent
                                            children: []
                                            pos: 46602
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 46612
                                            length: 4
                                        children: []
                                        pos: 46602
                                        length: 14
                                      right:
                                        type: equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: parent.getType()
                                            children: []
                                            pos: 46620
                                            length: 16
                                          right:
                                            type: field_access
                                            fields:
                                              text: Token.EXPR_RESULT
                                            children: []
                                            pos: 46640
                                            length: 17
                                        children: []
                                        pos: 46620
                                        length: 37
                                    children: []
                                    pos: 46602
                                    length: 55
                                children: []
                                pos: 46601
                                length: 57
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: n.getType()
                                        children: []
                                        pos: 46679
                                        length: 11
                                    children: []
                                    pos: 46678
                                    length: 13
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, n.getFirstChild(), n);
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, n, n);
                                                      break;
                                                  }
                                    children: []
                                    pos: 46692
                                    length: 220
                                children: []
                                pos: 46671
                                length: 241
                              pos: 46659
                              length: 263
                            pos: 46598
                            length: 324
                          pos: 46588
                          length: 342
                      children: []
                      pos: 46532
                      length: 398
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 46951
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 46970
                            length: 15
                          pos: 46938
                          length: 979
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 47044
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 47294
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 47302
                                                length: 4
                                            children: []
                                            pos: 47294
                                            length: 12
                                          right:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: member.getType()
                                                children: []
                                                pos: 47322
                                                length: 16
                                              right:
                                                type: field_access
                                                fields:
                                                  text: Token.GETPROP
                                                children: []
                                                pos: 47342
                                                length: 13
                                            children: []
                                            pos: 47322
                                            length: 33
                                        children: []
                                        pos: 47294
                                        length: 61
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: member.getFirstChild().getType()
                                            children: []
                                            pos: 47371
                                            length: 32
                                          right:
                                            type: field_access
                                            fields:
                                              text: Token.THIS
                                            children: []
                                            pos: 47407
                                            length: 10
                                        children: []
                                        pos: 47371
                                        length: 46
                                    children: []
                                    pos: 47294
                                    length: 123
                                children: []
                                pos: 47293
                                length: 125
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 47431
                                length: 7
                              pos: 47419
                              length: 29
                            pos: 47290
                            length: 158
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 47458
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredTypeInAnnotation(t,
                                member, info);
                            children: []
                            pos: 47510
                            length: 61
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 47580
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 47627
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 47637
                                            length: 4
                                        children: []
                                        pos: 47627
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 47658
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.NAME
                                                    children: []
                                                    pos: 47676
                                                    length: 10
                                                children: []
                                                pos: 47658
                                                length: 28
                                              right:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 47690
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.STRING
                                                    children: []
                                                    pos: 47708
                                                    length: 12
                                                children: []
                                                pos: 47690
                                                length: 30
                                            children: []
                                            pos: 47658
                                            length: 62
                                        children: []
                                        pos: 47657
                                        length: 64
                                    children: []
                                    pos: 47627
                                    length: 94
                                children: []
                                pos: 47626
                                length: 96
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  false /* functions with implementations are not in externs */);
                                children: []
                                pos: 47735
                                length: 164
                              pos: 47723
                              length: 186
                            pos: 47623
                            length: 286
                          pos: 47034
                          length: 883
                      children: []
                      pos: 46938
                      length: 979
                    pos: 46314
                    length: 1609
                children: []
                pos: 46314
                length: 1609
              pos: 13663
              length: 34289
          children: []
          pos: 13663
          length: 34289
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 48049
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 48071
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 48100
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 48136
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 48173
                length: 168
              pos: 48022
              length: 323
          children: []
          pos: 48022
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 48480
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 48535
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 48874
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 48880
                      length: 15
                    pos: 48852
                    length: 489
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 48926
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 48968
                              length: 11
                          children: []
                          pos: 48967
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.ASSIGN:
                                        // Handle typedefs.
                                        checkForOldStyleTypedef(t, n);
                                        break;

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForOldStyleTypedef(t, n);
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 48981
                          length: 354
                      children: []
                      pos: 48960
                      length: 375
                    pos: 48918
                    length: 423
                children: []
                pos: 48852
                length: 489
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 49366
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 49401
                      length: 15
                    pos: 49347
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 49486
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 49521
                      length: 62
                    pos: 49478
                    length: 111
                children: []
                pos: 49347
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 49769
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 49794
                      length: 15
                    pos: 49756
                    length: 942
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 49855
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 49863
                                      length: 4
                                  children: []
                                  pos: 49855
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 49871
                                  length: 22
                              children: []
                              pos: 49855
                              length: 38
                          children: []
                          pos: 49854
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 49905
                          length: 7
                        pos: 49895
                        length: 25
                      pos: 49851
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 49928
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 49985
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 49996
                                  length: 4
                              children: []
                              pos: 49985
                              length: 15
                          children: []
                          pos: 49984
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 50012
                          length: 7
                        pos: 50002
                        length: 25
                      pos: 49981
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.forwardDeclareType(typedef);
                      children: []
                      pos: 50201
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 50250
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 50331
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 50343
                                  length: 4
                              children: []
                              pos: 50331
                              length: 16
                          children: []
                          pos: 50330
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 50359
                          length: 118
                        pos: 50349
                        length: 136
                      pos: 50327
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, realType);
                      children: []
                      pos: 50493
                      length: 44
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: candidate.getType()
                                  children: []
                                  pos: 50548
                                  length: 19
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.GETPROP
                                  children: []
                                  pos: 50571
                                  length: 13
                              children: []
                              pos: 50548
                              length: 36
                          children: []
                          pos: 50547
                          length: 38
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 50596
                          length: 88
                        pos: 50586
                        length: 106
                      pos: 50544
                      length: 148
                    pos: 49843
                    length: 855
                children: []
                pos: 49756
                length: 942
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForOldStyleTypedef
                    children: []
                    pos: 50879
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50903
                      length: 15
                    pos: 50866
                    length: 988
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = codingConvention.identifyTypeDefAssign(candidate);
                      children: []
                      pos: 50972
                      length: 67
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 51050
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 51061
                                  length: 4
                              children: []
                              pos: 51050
                              length: 15
                          children: []
                          pos: 51049
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.forwardDeclareType(typedef);
                          children: []
                          pos: 51249
                          length: 41
                        - type: local_variable_declaration
                          fields:
                            text: JSDocInfo info = candidate.getJSDocInfo();
                          children: []
                          pos: 51300
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: JSType realType = null;
                          children: []
                          pos: 51351
                          length: 23
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 51387
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51395
                                          length: 4
                                      children: []
                                      pos: 51387
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: info.getType()
                                          children: []
                                          pos: 51403
                                          length: 14
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51421
                                          length: 4
                                      children: []
                                      pos: 51403
                                      length: 22
                                  children: []
                                  pos: 51387
                                  length: 38
                              children: []
                              pos: 51386
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: realType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 51439
                              length: 56
                            pos: 51427
                            length: 78
                          pos: 51383
                          length: 122
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: realType
                                      children: []
                                      pos: 51519
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 51531
                                      length: 4
                                  children: []
                                  pos: 51519
                                  length: 16
                              children: []
                              pos: 51518
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(
                                                    t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                              children: []
                              pos: 51549
                              length: 122
                            pos: 51537
                            length: 144
                          pos: 51515
                          length: 166
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(typedef, realType);
                          children: []
                          pos: 51691
                          length: 44
                        pos: 51067
                        length: 781
                      pos: 51046
                      length: 802
                    pos: 50936
                    length: 918
                children: []
                pos: 50866
                length: 988
              pos: 48460
              length: 3398
          children: []
          pos: 48460
          length: 3398
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 52010
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 52130
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 52268
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 52263
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 52284
                      length: 60
                    pos: 52276
                    length: 74
                children: []
                pos: 52263
                length: 87
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 52636
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 52642
                      length: 15
                    pos: 52614
                    length: 284
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 52692
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 52697
                                  length: 19
                              children: []
                              pos: 52692
                              length: 24
                          children: []
                          pos: 52691
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 52718
                        length: 7
                      pos: 52688
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 52737
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.LP
                                      children: []
                                      pos: 52752
                                      length: 8
                                  children: []
                                  pos: 52737
                                  length: 23
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 52764
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 52774
                                      length: 19
                                  children: []
                                  pos: 52764
                                  length: 29
                              children: []
                              pos: 52737
                              length: 56
                          children: []
                          pos: 52736
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 52805
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 52843
                          length: 7
                        pos: 52795
                        length: 63
                      pos: 52733
                      length: 125
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 52866
                      length: 26
                    pos: 52680
                    length: 218
                children: []
                pos: 52614
                length: 284
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 52979
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 53000
                      length: 11
                    pos: 52966
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 53057
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 53105
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 53155
                              length: 17
                          children: []
                          pos: 53154
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 53184
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 53236
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 53245
                                          length: 4
                                      children: []
                                      pos: 53236
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 53430
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 53453
                                                  length: 4
                                              children: []
                                              pos: 53430
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 53606
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 53633
                                                  length: 6
                                              children: []
                                              pos: 53606
                                              length: 33
                                          children: []
                                          pos: 53430
                                          length: 209
                                      children: []
                                      pos: 53429
                                      length: 211
                                  children: []
                                  pos: 53236
                                  length: 404
                              children: []
                              pos: 53235
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 53654
                              length: 58
                            pos: 53642
                            length: 80
                          pos: 53232
                          length: 490
                        pos: 53174
                        length: 556
                      pos: 53151
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 53738
                      length: 25
                    pos: 53013
                    length: 756
                children: []
                pos: 52966
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 53851
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 53868
                      length: 17
                    pos: 53838
                    length: 843
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 53895
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 53962
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = (FunctionType) functionNode.getJSType();
                      children: []
                      pos: 54005
                      length: 68
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 54084
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54100
                                  length: 4
                              children: []
                              pos: 54084
                              length: 20
                          children: []
                          pos: 54083
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 54116
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 54185
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54204
                                      length: 4
                                  children: []
                                  pos: 54185
                                  length: 23
                              children: []
                              pos: 54184
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 54222
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), true);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 54287
                              length: 370
                            pos: 54210
                            length: 457
                          pos: 54181
                          length: 486
                        pos: 54106
                        length: 569
                      pos: 54080
                      length: 595
                    pos: 53887
                    length: 794
                children: []
                pos: 53838
                length: 843
              pos: 51990
              length: 2719
          children: []
          pos: 51990
          length: 2719
        pos: 4639
        length: 50097
    children: []
    pos: 4639
    length: 50097
  pos: 0
  length: 54737
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 4651
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: static final String DELEGATE_PROXY_SUFFIX = "(Proxy)";
          children: []
          pos: 4780
          length: 54
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 4838
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5019
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 5210
          length: 179
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 5393
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 5436
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 5492
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 5533
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 5584
          length: 42
        - type: field_declaration
          fields:
            text: private List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 5629
          length: 72
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 5862
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 5884
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 5905
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 5929
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 6277
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 6285
                      length: 11
                    pos: 6272
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 6306
                      length: 62
                    pos: 6298
                    length: 76
                children: []
                pos: 6272
                length: 102
              pos: 5848
              length: 530
          children: []
          pos: 5848
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 6382
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 6488
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 6980
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 6992
                length: 9
              pos: 6967
              length: 1725
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 7212
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 7239
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 7289
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7299
                            length: 4
                        children: []
                        pos: 7289
                        length: 14
                    children: []
                    pos: 7288
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 7364
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 7408
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 7488
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 7529
                    length: 53
                  pos: 7305
                  length: 283
                pos: 7285
                length: 508
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 7799
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 7843
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type instanceof FunctionType) {
                            FunctionType fnType = (FunctionType) type;
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 8039
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8521
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8531
                            length: 4
                        children: []
                        pos: 8521
                        length: 14
                    children: []
                    pos: 8520
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes);
                    children: []
                    pos: 8545
                    length: 116
                  pos: 8537
                  length: 130
                pos: 8517
                length: 150
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 8672
                length: 16
              pos: 7017
              length: 1675
          children: []
          pos: 6967
          length: 1725
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 8851
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8870
                length: 9
              pos: 8824
              length: 1616
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, root, new DiscoverEnums(typeRegistry));
                children: []
                pos: 8888
                length: 72
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 8966
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 9007
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9062
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 9126
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 9180
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9235
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 9295
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9353
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9416
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9472
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9533
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 9598
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 9654
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9717
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9779
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 9839
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 9898
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "goog.typedef", NO_TYPE);
                children: []
                pos: 10133
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 10362
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 10427
                length: 9
              pos: 8881
              length: 1559
          children: []
          pos: 8824
          length: 1616
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 10457
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 10483
                length: 11
              pos: 10444
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 10520
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 10582
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 10655
                length: 89
              pos: 10514
              length: 234
          children: []
          pos: 10444
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 10765
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 10788
                length: 11
              pos: 10752
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 10844
                length: 64
              pos: 10838
              length: 74
          children: []
          pos: 10752
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 10929
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 10947
                length: 11
              pos: 10916
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 10989
                length: 42
              pos: 10983
              length: 52
          children: []
          pos: 10916
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnums
              children: []
              pos: 11060
              length: 13
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 11112
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnums(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 11156
                length: 78
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 11266
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 11272
                      length: 15
                    pos: 11240
                    length: 658
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 11321
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 11357
                              length: 14
                          children: []
                          pos: 11356
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NAME:
                                        nameNode = node;
                                        break;
                                      case Token.VAR:
                                        if (node.hasOneChild()) {
                                          nameNode = node.getFirstChild();
                                        }
                                        break;
                                      case Token.ASSIGN:
                                        nameNode = node.getFirstChild();
                                        break;
                                    }
                          children: []
                          pos: 11373
                          length: 299
                      children: []
                      pos: 11349
                      length: 323
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: nameNode
                                  children: []
                                  pos: 11684
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 11696
                                  length: 4
                              children: []
                              pos: 11684
                              length: 16
                          children: []
                          pos: 11683
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSDocInfo info = node.getJSDocInfo();
                          children: []
                          pos: 11712
                          length: 37
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 11762
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 11770
                                          length: 4
                                      children: []
                                      pos: 11762
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 11778
                                      length: 27
                                  children: []
                                  pos: 11762
                                  length: 43
                              children: []
                              pos: 11761
                              length: 45
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: registry.identifyEnumName(nameNode.getQualifiedName());
                              children: []
                              pos: 11819
                              length: 55
                            pos: 11807
                            length: 77
                          pos: 11758
                          length: 126
                        pos: 11702
                        length: 190
                      pos: 11680
                      length: 212
                    pos: 11313
                    length: 585
                children: []
                pos: 11240
                length: 658
              pos: 11039
              length: 863
          children: []
          pos: 11039
          length: 863
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrototypePropertyOwner
              children: []
              pos: 12132
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 12158
                length: 6
              pos: 12112
              length: 432
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: n.getType()
                            children: []
                            pos: 12176
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Token.GETPROP
                            children: []
                            pos: 12191
                            length: 13
                        children: []
                        pos: 12176
                        length: 28
                    children: []
                    pos: 12175
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node firstChild = n.getFirstChild();
                    children: []
                    pos: 12214
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: firstChild.getType()
                                    children: []
                                    pos: 12261
                                    length: 20
                                  right:
                                    type: field_access
                                    fields:
                                      text: Token.GETPROP
                                    children: []
                                    pos: 12285
                                    length: 13
                                children: []
                                pos: 12261
                                length: 37
                              right:
                                type: method_invocation
                                fields:
                                  text: firstChild.getLastChild().getString().equals("prototype")
                                children: []
                                pos: 12312
                                length: 57
                            children: []
                            pos: 12261
                            length: 108
                        children: []
                        pos: 12260
                        length: 110
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: Node maybeOwner = firstChild.getFirstChild();
                        children: []
                        pos: 12381
                        length: 45
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: method_invocation
                                fields:
                                  text: maybeOwner.isQualifiedName()
                                children: []
                                pos: 12439
                                length: 28
                            children: []
                            pos: 12438
                            length: 30
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return maybeOwner;
                            children: []
                            pos: 12481
                            length: 18
                          pos: 12469
                          length: 40
                        pos: 12435
                        length: 74
                      pos: 12371
                      length: 146
                    pos: 12257
                    length: 260
                  pos: 12206
                  length: 317
                pos: 12172
                length: 351
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 12528
                length: 12
              pos: 12166
              length: 378
          children: []
          pos: 12112
          length: 432
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: attachLiteralTypes
              children: []
              pos: 12561
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 12580
                length: 6
              pos: 12548
              length: 997
            body:
              type: block
              fields: {}
              children:
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: n.getType()
                        children: []
                        pos: 12602
                        length: 11
                    children: []
                    pos: 12601
                    length: 13
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                              case Token.NULL:
                                n.setJSType(getNativeType(NULL_TYPE));
                                break;

                              case Token.VOID:
                                n.setJSType(getNativeType(VOID_TYPE));
                                break;

                              case Token.STRING:
                                n.setJSType(getNativeType(STRING_TYPE));
                                break;

                              case Token.NUMBER:
                                n.setJSType(getNativeType(NUMBER_TYPE));
                                break;

                              case Token.TRUE:
                              case Token.FALSE:
                                n.setJSType(getNativeType(BOOLEAN_TYPE));
                                break;

                              case Token.REGEXP:
                                n.setJSType(getNativeType(REGEXP_TYPE));
                                break;

                              case Token.REF_SPECIAL:
                                n.setJSType(getNativeType(UNKNOWN_TYPE));
                                break;

                              case Token.OBJECTLIT:
                                if (n.getJSType() == null) {
                                  n.setJSType(typeRegistry.createAnonymousObjectType());
                                }
                                break;

                              // NOTE(nicksantos): If we ever support Array tuples,
                              // we will need to put ARRAYLIT here as well.
                            }
                    children: []
                    pos: 12615
                    length: 926
                children: []
                pos: 12594
                length: 947
              pos: 12588
              length: 957
          children: []
          pos: 12548
          length: 997
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 13564
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 13578
                length: 23
              pos: 13549
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 13609
                length: 46
              pos: 13603
              length: 56
          children: []
          pos: 13549
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 13686
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 13808
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 13832
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 14009
                length: 67
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 14252
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 14404
                length: 33
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 14443
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 14529
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 14545
                      length: 9
                    pos: 14524
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 14577
                      length: 54
                    pos: 14569
                    length: 68
                children: []
                pos: 14524
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 14648
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 14643
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 14720
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 14875
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 14919
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 15097
                      length: 40
                    pos: 14663
                    length: 480
                children: []
                pos: 14643
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 15184
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal nodeTraversal
                      children: []
                      pos: 15199
                      length: 27
                    pos: 15149
                    length: 536
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 15269
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 15284
                                      length: 14
                                  children: []
                                  pos: 15269
                                  length: 29
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 15312
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.SCRIPT
                                      children: []
                                      pos: 15327
                                      length: 12
                                  children: []
                                  pos: 15312
                                  length: 27
                              children: []
                              pos: 15269
                              length: 70
                          children: []
                          pos: 15268
                          length: 72
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: sourceName = (String) n.getProp(Node.SOURCENAME_PROP);
                          children: []
                          pos: 15351
                          length: 54
                        pos: 15341
                        length: 72
                      pos: 15265
                      length: 148
                    - type: return_statement
                      fields:
                        text: |-
                          return parent == null || parent.getType() != Token.FUNCTION ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 15545
                      length: 134
                    pos: 15257
                    length: 428
                children: []
                pos: 15149
                length: 536
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 15717
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 15723
                      length: 15
                    pos: 15691
                    length: 1550
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(n);
                      children: []
                      pos: 15769
                      length: 22
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 15807
                              length: 11
                          children: []
                          pos: 15806
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // VARs and ASSIGNs are handled in different branches of this
                                        // switch statement.
                                        if (parent.getType() != Token.ASSIGN &&
                                            parent.getType() != Token.NAME) {
                                          defineDeclaredFunction(n, parent);
                                        }

                                        break;

                                      case Token.ASSIGN:
                                        // Handle constructor and enum definitions.
                                        defineNamedTypeAssign(n, parent);

                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.getType() == Token.GETPROP &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.getType() == Token.EXPR_RESULT &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 15820
                          length: 1415
                      children: []
                      pos: 15799
                      length: 1436
                    pos: 15761
                    length: 1480
                children: []
                pos: 15691
                length: 1550
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 17484
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 17521
                      length: 15
                    pos: 17477
                    length: 168
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(t.getSourceName(),
                          node, info);
                      children: []
                      pos: 17573
                      length: 66
                    pos: 17565
                    length: 80
                children: []
                pos: 17477
                length: 168
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 17658
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 17686
                      length: 17
                    pos: 17651
                    length: 1675
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 17748
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode = node.getType() == Token.GETPROP ?
                                    node.getFirstChild() : null;
                      children: []
                      pos: 17776
                      length: 87
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 17874
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 17882
                                  length: 4
                              children: []
                              pos: 17874
                              length: 12
                          children: []
                          pos: 17873
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 17902
                                  length: 14
                              children: []
                              pos: 17901
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 17930
                              length: 54
                            pos: 17918
                            length: 76
                          pos: 17898
                          length: 1393
                        pos: 17888
                        length: 1411
                      pos: 17870
                      length: 1429
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 19306
                      length: 14
                    pos: 17740
                    length: 1586
                children: []
                pos: 17651
                length: 1675
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 19481
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 19502
                      length: 6
                    pos: 19476
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 19528
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 19580
                      length: 46
                    pos: 19520
                    length: 112
                children: []
                pos: 19476
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 19693
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 19705
                      length: 6
                    pos: 19688
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 19734
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 19778
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 19820
                      length: 31
                    pos: 19726
                    length: 131
                children: []
                pos: 19688
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 19921
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 19931
                      length: 6
                    pos: 19916
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 19960
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 20002
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 20047
                              length: 23
                          children: []
                          pos: 20046
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 20086
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20094
                                      length: 4
                                  children: []
                                  pos: 20086
                                  length: 12
                              children: []
                              pos: 20085
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 20143
                              length: 63
                            pos: 20100
                            length: 116
                          pos: 20082
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 20225
                          length: 102
                        pos: 20072
                        length: 263
                      pos: 20043
                      length: 440
                    pos: 19952
                    length: 537
                children: []
                pos: 19916
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineDeclaredFunction
                    children: []
                    pos: 20552
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 20575
                      length: 6
                    pos: 20547
                    length: 670
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 20604
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 20652
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: int parentType = parent.getType();
                      children: []
                      pos: 20693
                      length: 34
                    - type: expression_statement
                      fields:
                        text: |-
                          Preconditions.checkState(
                                    (scope.isLocal() || parentType != Token.ASSIGN) &&
                                    parentType != Token.NAME,
                                    "function defined as standalone function when it is being " +
                                    "assigned");
                      children: []
                      pos: 20734
                      length: 217
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = n.getFirstChild().getString();
                      children: []
                      pos: 20958
                      length: 52
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType = getFunctionType(functionName, n, info,
                                    null);
                      children: []
                      pos: 21017
                      length: 83
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 21111
                              length: 33
                          children: []
                          pos: 21110
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 21156
                          length: 47
                        pos: 21146
                        length: 65
                      pos: 21107
                      length: 104
                    pos: 20596
                    length: 621
                children: []
                pos: 20547
                length: 670
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineNamedTypeAssign
                    children: []
                    pos: 21310
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 21332
                      length: 6
                    pos: 21305
                    length: 1098
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.ASSIGN);
                      children: []
                      pos: 21361
                      length: 38
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 21406
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: Node rvalue = n.getLastChild();
                      children: []
                      pos: 21788
                      length: 31
                    - type: local_variable_declaration
                      fields:
                        text: Node lvalue = n.getFirstChild();
                      children: []
                      pos: 21826
                      length: 32
                    - type: expression_statement
                      fields:
                        text: 'info = (info != null) ? info : rvalue.getJSDocInfo();'
                      children: []
                      pos: 21865
                      length: 53
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: rvalue.getType()
                                      children: []
                                      pos: 21929
                                      length: 16
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 21949
                                      length: 14
                                  children: []
                                  pos: 21929
                                  length: 34
                                right:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 21977
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 21985
                                          length: 4
                                      children: []
                                      pos: 21977
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.isConstructor()
                                      children: []
                                      pos: 21993
                                      length: 20
                                  children: []
                                  pos: 21977
                                  length: 36
                              children: []
                              pos: 21929
                              length: 84
                          children: []
                          pos: 21928
                          length: 86
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              getFunctionType(lvalue.getQualifiedName(), rvalue, info,
                                          lvalue);
                          children: []
                          pos: 22025
                          length: 77
                        pos: 22015
                        length: 95
                      pos: 21925
                      length: 472
                    pos: 21353
                    length: 1050
                children: []
                pos: 21305
                length: 1098
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 22806
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 22817
                      length: 9
                    pos: 22793
                    length: 1342
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 22875
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: value
                                      children: []
                                      pos: 22921
                                      length: 5
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22930
                                      length: 4
                                  children: []
                                  pos: 22921
                                  length: 13
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: value.getType()
                                      children: []
                                      pos: 22938
                                      length: 15
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 22957
                                      length: 14
                                  children: []
                                  pos: 22938
                                  length: 33
                              children: []
                              pos: 22921
                              length: 50
                          children: []
                          pos: 22920
                          length: 52
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String functionName = name.getString();
                          children: []
                          pos: 23003
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType functionType =
                                          getFunctionType(functionName, value, info, null);
                          children: []
                          pos: 23051
                          length: 89
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: functionType.isReturnTypeInferred()
                                      children: []
                                      pos: 23153
                                      length: 35
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.isLocal()
                                      children: []
                                      pos: 23204
                                      length: 15
                                  children: []
                                  pos: 23153
                                  length: 66
                              children: []
                              pos: 23152
                              length: 68
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(name, var, null);
                              children: []
                              pos: 23233
                              length: 28
                            pos: 23221
                            length: 50
                          pos: 23149
                          length: 186
                        pos: 22973
                        length: 370
                      pos: 22917
                      length: 1212
                    pos: 22867
                    length: 1268
                children: []
                pos: 22793
                length: 1342
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 24767
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String name
                      children: []
                      pos: 24783
                      length: 11
                    pos: 24746
                    length: 2991
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 24868
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 24991
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25001
                                          length: 4
                                      children: []
                                      pos: 24991
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 25009
                                      length: 24
                                  children: []
                                  pos: 24991
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 25037
                                  length: 16
                              children: []
                              pos: 24991
                              length: 62
                          children: []
                          pos: 24990
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 25065
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 25128
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25135
                                          length: 4
                                      children: []
                                      pos: 25128
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof FunctionType
                                      children: []
                                      pos: 25143
                                      length: 37
                                  children: []
                                  pos: 25128
                                  length: 52
                              children: []
                              pos: 25127
                              length: 54
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: functionType = (FunctionType) var.getType();
                              children: []
                              pos: 25194
                              length: 44
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: functionType
                                              children: []
                                              pos: 25253
                                              length: 12
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 25269
                                              length: 4
                                          children: []
                                          pos: 25253
                                          length: 20
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: functionType.isConstructor()
                                          children: []
                                          pos: 25277
                                          length: 28
                                      children: []
                                      pos: 25253
                                      length: 52
                                  children: []
                                  pos: 25252
                                  length: 54
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: typeRegistry.declareType(name, functionType.getInstanceType());
                                  children: []
                                  pos: 25321
                                  length: 63
                                pos: 25307
                                length: 89
                              pos: 25249
                              length: 147
                            pos: 25182
                            length: 224
                          pos: 25124
                          length: 282
                        - type: return_statement
                          fields:
                            text: return functionType;
                          children: []
                          pos: 25415
                          length: 20
                        pos: 25055
                        length: 388
                      pos: 24987
                      length: 456
                    - type: local_variable_declaration
                      fields:
                        text: Node owner = null;
                      children: []
                      pos: 25451
                      length: 18
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: lvalueNode
                                  children: []
                                  pos: 25480
                                  length: 10
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 25494
                                  length: 4
                              children: []
                              pos: 25480
                              length: 18
                          children: []
                          pos: 25479
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: owner = getPrototypePropertyOwner(lvalueNode);
                          children: []
                          pos: 25510
                          length: 46
                        pos: 25500
                        length: 64
                      pos: 25476
                      length: 88
                    - type: local_variable_declaration
                      fields:
                        text: 'Node errorRoot = rValue == null ? lvalueNode : rValue;'
                      children: []
                      pos: 25572
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean isFnLiteral =
                                    rValue != null && rValue.getType() == Token.FUNCTION;
                      children: []
                      pos: 25633
                      length: 85
                    - type: local_variable_declaration
                      fields:
                        text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                      children: []
                      pos: 25725
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node parametersNode = isFnLiteral ?
                                    rValue.getFirstChild().getNext() : null;
                      children: []
                      pos: 25774
                      length: 86
                    - type: local_variable_declaration
                      fields:
                        text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                          : null;'
                      children: []
                      pos: 25867
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 25940
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25956
                                          length: 4
                                      children: []
                                      pos: 25940
                                      length: 20
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 25964
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 25972
                                          length: 4
                                      children: []
                                      pos: 25964
                                      length: 12
                                  children: []
                                  pos: 25940
                                  length: 36
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 25980
                                  length: 14
                              children: []
                              pos: 25940
                              length: 54
                          children: []
                          pos: 25939
                          length: 56
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType type = info.getType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 26006
                          length: 59
                        - type: expression_statement
                          fields:
                            text: type = type.restrictByNotNullOrUndefined();
                          children: []
                          pos: 26147
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: type.isFunctionType()
                                  children: []
                                  pos: 26203
                                  length: 21
                              children: []
                              pos: 26202
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: functionType = (FunctionType) type;
                              children: []
                              pos: 26238
                              length: 35
                            - type: expression_statement
                              fields:
                                text: functionType.setJSDocInfo(info);
                              children: []
                              pos: 26284
                              length: 32
                            pos: 26226
                            length: 100
                          pos: 26199
                          length: 127
                        pos: 25996
                        length: 338
                      pos: 25936
                      length: 398
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 26346
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26362
                                  length: 4
                              children: []
                              pos: 26346
                              length: 20
                          children: []
                          pos: 26345
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType overriddenPropType = null;
                          children: []
                          pos: 26431
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: lvalueNode
                                              children: []
                                              pos: 26483
                                              length: 10
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 26497
                                              length: 4
                                          children: []
                                          pos: 26483
                                          length: 18
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: lvalueNode.getType()
                                              children: []
                                              pos: 26505
                                              length: 20
                                            right:
                                              type: field_access
                                              fields:
                                                text: Token.GETPROP
                                              children: []
                                              pos: 26529
                                              length: 13
                                          children: []
                                          pos: 26505
                                          length: 37
                                      children: []
                                      pos: 26483
                                      length: 59
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: lvalueNode.isQualifiedName()
                                      children: []
                                      pos: 26558
                                      length: 28
                                  children: []
                                  pos: 26483
                                  length: 103
                              children: []
                              pos: 26482
                              length: 105
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  Var var = scope.getVar(
                                                lvalueNode.getFirstChild().getQualifiedName());
                              children: []
                              pos: 26600
                              length: 85
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 26700
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 26707
                                          length: 4
                                      children: []
                                      pos: 26700
                                      length: 11
                                  children: []
                                  pos: 26699
                                  length: 13
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: ObjectType ownerType = ObjectType.cast(var.getType());
                                  children: []
                                  pos: 26727
                                  length: 54
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 26798
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 26811
                                              length: 4
                                          children: []
                                          pos: 26798
                                          length: 17
                                      children: []
                                      pos: 26797
                                      length: 19
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: local_variable_declaration
                                      fields:
                                        text: String propName = lvalueNode.getLastChild().getString();
                                      children: []
                                      pos: 26833
                                      length: 56
                                    - type: expression_statement
                                      fields:
                                        text: overriddenPropType = findOverriddenFunction(ownerType,
                                          propName);
                                      children: []
                                      pos: 26904
                                      length: 65
                                    pos: 26817
                                    length: 166
                                  pos: 26794
                                  length: 189
                                pos: 26713
                                length: 282
                              pos: 26696
                              length: 299
                            pos: 26588
                            length: 417
                          pos: 26479
                          length: 526
                        - type: expression_statement
                          fields:
                            text: |-
                              functionType =
                                          new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                              scope)
                                          .setSourceNode(fnRoot)
                                          .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                          .inferTemplateTypeName(info)
                                          .inferReturnType(info)
                                          .inferInheritance(info)
                                          .inferThisType(info, owner)
                                          .inferParameterTypes(parametersNode, info)
                                          .inferReturnStatementsAsLastResort(fnBlock)
                                          .buildAndRegister();
                          children: []
                          pos: 27015
                          length: 520
                        pos: 26368
                        length: 1175
                      pos: 26342
                      length: 1201
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: rValue
                                  children: []
                                  pos: 27613
                                  length: 6
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 27623
                                  length: 4
                              children: []
                              pos: 27613
                              length: 14
                          children: []
                          pos: 27612
                          length: 16
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: setDeferredType(rValue, functionType);
                          children: []
                          pos: 27639
                          length: 38
                        pos: 27629
                        length: 56
                      pos: 27609
                      length: 76
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 27711
                      length: 20
                    pos: 24860
                    length: 2877
                children: []
                pos: 24746
                length: 2991
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 27851
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 27883
                      length: 20
                    pos: 27830
                    length: 740
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 28016
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: propType instanceof FunctionType
                              children: []
                              pos: 28081
                              length: 32
                          children: []
                          pos: 28080
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return (FunctionType) propType;
                          children: []
                          pos: 28125
                          length: 31
                        pos: 28115
                        length: 49
                      pos: 28077
                      length: 467
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 28552
                      length: 12
                    pos: 27922
                    length: 648
                children: []
                pos: 27830
                length: 740
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getEnumType
                    children: []
                    pos: 29239
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String name
                      children: []
                      pos: 29251
                      length: 11
                    pos: 29222
                    length: 1569
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 29326
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: value
                                  children: []
                                  pos: 29392
                                  length: 5
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29401
                                  length: 4
                              children: []
                              pos: 29392
                              length: 13
                          children: []
                          pos: 29391
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: value.getType()
                                      children: []
                                      pos: 29421
                                      length: 15
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.OBJECTLIT
                                      children: []
                                      pos: 29440
                                      length: 15
                                  children: []
                                  pos: 29421
                                  length: 34
                              children: []
                              pos: 29420
                              length: 36
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = typeRegistry.createEnumType(name,
                                  elementsType);
                              children: []
                              pos: 29504
                              length: 59
                            - type: local_variable_declaration
                              fields:
                                text: Node key = value.getFirstChild();
                              children: []
                              pos: 29612
                              length: 33
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);

                                              if (enumType.hasOwnProperty(keyName)) {
                                                compiler.report(JSError.make(sourceName, key, ENUM_DUP, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName);
                                              }
                                              key = key.getNext();
                                              key = (key == null) ? null : key.getNext();
                                            }
                              children: []
                              pos: 29656
                              length: 574
                            pos: 29457
                            length: 783
                          pos: 29417
                          length: 1056
                        pos: 29407
                        length: 1074
                      pos: 29388
                      length: 1093
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 30493
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 30505
                                  length: 4
                              children: []
                              pos: 30493
                              length: 16
                          children: []
                          pos: 30492
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: compiler.report(JSError.make(sourceName, parent,
                              ENUM_INITIALIZER));
                          children: []
                          pos: 30521
                          length: 68
                        pos: 30511
                        length: 86
                      pos: 30489
                      length: 272
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 30769
                      length: 16
                    pos: 29318
                    length: 1473
                children: []
                pos: 29222
                length: 1569
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 31214
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 31225
                      length: 9
                    pos: 31201
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 31270
                      length: 45
                    pos: 31262
                    length: 59
                children: []
                pos: 31201
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 31815
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 31826
                      length: 6
                    pos: 31810
                    length: 2706
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 31886
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: boolean shouldDeclareOnGlobalThis = false;
                      children: []
                      pos: 32010
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.getType()
                                  children: []
                                  pos: 32063
                                  length: 11
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.NAME
                                  children: []
                                  pos: 32078
                                  length: 10
                              children: []
                              pos: 32063
                              length: 25
                          children: []
                          pos: 32062
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.getType() == Token.FUNCTION ||
                                          parent.getType() == Token.VAR ||
                                          parent.getType() == Token.LP ||
                                          parent.getType() == Token.CATCH);
                          children: []
                          pos: 32100
                          length: 213
                        - type: expression_statement
                          fields:
                            text: |-
                              shouldDeclareOnGlobalThis = scope.isGlobal() &&
                                          (parent.getType() == Token.VAR ||
                                           parent.getType() == Token.FUNCTION);
                          children: []
                          pos: 32322
                          length: 143
                        pos: 32090
                        length: 383
                      pos: 32059
                      length: 613
                    - type: local_variable_declaration
                      fields:
                        text: String variableName = n.getQualifiedName();
                      children: []
                      pos: 32679
                      length: 43
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 32729
                      length: 53
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scope.isDeclared(variableName, false)
                              children: []
                              pos: 32830
                              length: 37
                          children: []
                          pos: 32829
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scope.getVar(variableName);
                          children: []
                          pos: 32879
                          length: 40
                        - type: expression_statement
                          fields:
                            text: |-
                              validator.expectUndeclaredVariable(
                                          sourceName, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 32928
                          length: 99
                        pos: 32869
                        length: 166
                      pos: 32826
                      length: 1684
                    pos: 31878
                    length: 2638
                children: []
                pos: 31810
                length: 2706
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredGetPropType
                    children: []
                    pos: 34900
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 34923
                      length: 15
                    pos: 34885
                    length: 506
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 34999
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35007
                                      length: 4
                                  children: []
                                  pos: 34999
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 35015
                                  length: 14
                              children: []
                              pos: 34999
                              length: 30
                          children: []
                          pos: 34998
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(t, n, info);
                          children: []
                          pos: 35041
                          length: 47
                        pos: 35031
                        length: 65
                      pos: 34995
                      length: 390
                    pos: 34987
                    length: 404
                children: []
                pos: 34885
                length: 506
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 35607
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 35643
                      length: 15
                    pos: 35594
                    length: 2312
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 35689
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 35790
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 35806
                                  length: 4
                              children: []
                              pos: 35790
                              length: 20
                          children: []
                          pos: 35789
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType superClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.superclassName));
                          children: []
                          pos: 35822
                          length: 104
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType subClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.subclassName));
                          children: []
                          pos: 35935
                          length: 100
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: superClass
                                          children: []
                                          pos: 36048
                                          length: 10
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36062
                                          length: 4
                                      children: []
                                      pos: 36048
                                      length: 18
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: subClass
                                          children: []
                                          pos: 36070
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36082
                                          length: 4
                                      children: []
                                      pos: 36070
                                      length: 16
                                  children: []
                                  pos: 36048
                                  length: 38
                              children: []
                              pos: 36047
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superCtor = superClass.getConstructor();
                              children: []
                              pos: 36100
                              length: 53
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType subCtor = subClass.getConstructor();
                              children: []
                              pos: 36164
                              length: 49
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: field_access
                                          fields:
                                            text: relationship.type
                                          children: []
                                          pos: 36229
                                          length: 17
                                        right:
                                          type: field_access
                                          fields:
                                            text: SubclassType.INHERITS
                                          children: []
                                          pos: 36250
                                          length: 21
                                      children: []
                                      pos: 36229
                                      length: 42
                                  children: []
                                  pos: 36228
                                  length: 44
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 36287
                                  length: 54
                                pos: 36273
                                length: 80
                              pos: 36225
                              length: 128
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 36369
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 36382
                                              length: 4
                                          children: []
                                          pos: 36369
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 36390
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 36401
                                              length: 4
                                          children: []
                                          pos: 36390
                                          length: 15
                                      children: []
                                      pos: 36369
                                      length: 36
                                  children: []
                                  pos: 36368
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 36421
                                  length: 99
                                pos: 36407
                                length: 125
                              pos: 36365
                              length: 167
                            pos: 36088
                            length: 454
                          pos: 36044
                          length: 498
                        pos: 35812
                        length: 738
                      pos: 35786
                      length: 764
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 36558
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 36661
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 36689
                                  length: 4
                              children: []
                              pos: 36661
                              length: 32
                          children: []
                          pos: 36660
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 36705
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 36819
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 36833
                                      length: 4
                                  children: []
                                  pos: 36819
                                  length: 18
                              children: []
                              pos: 36818
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 36851
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 36923
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36939
                                          length: 4
                                      children: []
                                      pos: 36923
                                      length: 20
                                  children: []
                                  pos: 36922
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 36959
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 37058
                                  length: 92
                                pos: 36945
                                length: 217
                              pos: 36919
                              length: 243
                            pos: 36839
                            length: 333
                          pos: 36815
                          length: 357
                        pos: 36695
                        length: 485
                      pos: 36657
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 37188
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 37297
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37321
                                  length: 4
                              children: []
                              pos: 37297
                              length: 28
                          children: []
                          pos: 37296
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 37337
                          length: 48
                        pos: 37327
                        length: 66
                      pos: 37293
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(t, n);
                      children: []
                      pos: 37401
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 37504
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37525
                                  length: 4
                              children: []
                              pos: 37504
                              length: 25
                          children: []
                          pos: 37503
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType type = ObjectType.cast(
                                          typeRegistry.getType(objectLiteralCast.typeName));
                          children: []
                          pos: 37541
                          length: 97
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: type
                                          children: []
                                          pos: 37651
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37659
                                          length: 4
                                      children: []
                                      pos: 37651
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: type.getConstructor()
                                          children: []
                                          pos: 37667
                                          length: 21
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37692
                                          length: 4
                                      children: []
                                      pos: 37667
                                      length: 29
                                  children: []
                                  pos: 37651
                                  length: 45
                              children: []
                              pos: 37650
                              length: 47
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: setDeferredType(objectLiteralCast.objectNode,
                                  type);
                              children: []
                              pos: 37710
                              length: 52
                            pos: 37698
                            length: 74
                          pos: 37647
                          length: 245
                        pos: 37531
                        length: 369
                      pos: 37500
                      length: 400
                    pos: 35681
                    length: 2225
                children: []
                pos: 35594
                length: 2312
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 38003
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 38038
                      length: 41
                    pos: 37990
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 38089
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 38206
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 38329
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 38468
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 38487
                                          length: 4
                                      children: []
                                      pos: 38468
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 38505
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 38527
                                          length: 4
                                      children: []
                                      pos: 38505
                                      length: 26
                                  children: []
                                  pos: 38468
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 38545
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 38568
                                      length: 4
                                  children: []
                                  pos: 38545
                                  length: 27
                              children: []
                              pos: 38468
                              length: 104
                          children: []
                          pos: 38467
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 38584
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 38655
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 38732
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 38816
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 38833
                                              length: 4
                                          children: []
                                          pos: 38816
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 38841
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 38861
                                              length: 4
                                          children: []
                                          pos: 38841
                                          length: 24
                                      children: []
                                      pos: 38816
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 38881
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 38902
                                          length: 4
                                      children: []
                                      pos: 38881
                                      length: 25
                                  children: []
                                  pos: 38816
                                  length: 90
                              children: []
                              pos: 38815
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 38920
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 39028
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 39130
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 39320
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 39505
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 39571
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 39741
                              length: 58
                            pos: 38908
                            length: 901
                          pos: 38812
                          length: 997
                        pos: 38574
                        length: 1243
                      pos: 38464
                      length: 1353
                    pos: 38081
                    length: 1742
                children: []
                pos: 37990
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 40257
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 40283
                      length: 15
                    pos: 40252
                    length: 4050
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 40368
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 40410
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 40465
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 40508
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 40562
                      length: 64
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 40873
                              length: 28
                          children: []
                          pos: 40872
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 40913
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 40957
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 40965
                                      length: 4
                                  children: []
                                  pos: 40957
                                  length: 12
                              children: []
                              pos: 40956
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!qVar.isTypeInferred()"
                                      children: []
                                      pos: 40987
                                      length: 22
                                  children: []
                                  pos: 40986
                                  length: 24
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: return_statement
                                  fields:
                                    text: return;
                                  children: []
                                  pos: 41084
                                  length: 7
                                pos: 41011
                                length: 92
                              pos: 40983
                              length: 120
                            - type: expression_statement
                              fields:
                                text: scope.undeclare(qVar);
                              children: []
                              pos: 41114
                              length: 22
                            pos: 40971
                            length: 175
                          pos: 40953
                          length: 193
                        pos: 40903
                        length: 251
                      pos: 40869
                      length: 285
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredGetPropType(t, info, n,
                          rhsValue);
                      children: []
                      pos: 41743
                      length: 64
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 41818
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 41831
                                      length: 4
                                  children: []
                                  pos: 41818
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 41839
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 41851
                                      length: 4
                                  children: []
                                  pos: 41839
                                  length: 16
                              children: []
                              pos: 41818
                              length: 37
                          children: []
                          pos: 41817
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 41902
                          length: 33
                        pos: 41857
                        length: 86
                      pos: 41814
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 41955
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 41968
                                  length: 4
                              children: []
                              pos: 41955
                              length: 17
                          children: []
                          pos: 41954
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: parent.getType()
                                      children: []
                                      pos: 41988
                                      length: 16
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.EXPR_RESULT
                                      children: []
                                      pos: 42008
                                      length: 17
                                  children: []
                                  pos: 41988
                                  length: 37
                              children: []
                              pos: 41987
                              length: 39
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 42039
                              length: 148
                            pos: 42027
                            length: 170
                          pos: 41984
                          length: 213
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 42207
                          length: 7
                        pos: 41974
                        length: 248
                      pos: 41951
                      length: 271
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 42230
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 42265
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 42273
                                  length: 4
                              children: []
                              pos: 42265
                              length: 12
                          children: []
                          pos: 42264
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType() || info.hasEnumParameterType() ||
                                          FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 42336
                          length: 127
                        pos: 42279
                        length: 192
                      pos: 42261
                      length: 210
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: inferred
                              children: []
                              pos: 42483
                              length: 8
                          children: []
                          pos: 42482
                          length: 10
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(rhsValue != null &&
                                          rhsValue.getType() == Token.FUNCTION &&
                                          !scope.isDeclared(qName, false));
                          children: []
                          pos: 42545
                          length: 130
                        pos: 42493
                        length: 190
                      pos: 42479
                      length: 204
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 42695
                              length: 9
                          children: []
                          pos: 42694
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 42716
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 42777
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42790
                                      length: 4
                                  children: []
                                  pos: 42777
                                  length: 17
                              children: []
                              pos: 42776
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 42909
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 42992
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 43046
                                                  length: 42
                                              children: []
                                              pos: 42992
                                              length: 96
                                          children: []
                                          pos: 42991
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 43109
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 43121
                                                          length: 31
                                                      children: []
                                                      pos: 43109
                                                      length: 43
                                                  children: []
                                                  pos: 43108
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 43172
                                                  length: 27
                                              children: []
                                              pos: 43108
                                              length: 91
                                          children: []
                                          pos: 43107
                                          length: 93
                                      children: []
                                      pos: 42991
                                      length: 209
                                  children: []
                                  pos: 42990
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, isExtern);
                                  children: []
                                  pos: 43290
                                  length: 64
                                pos: 43202
                                length: 164
                              pos: 42987
                              length: 379
                            pos: 42796
                            length: 580
                          pos: 42773
                          length: 603
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 43518
                          length: 43
                        pos: 42706
                        length: 863
                      pos: 42691
                      length: 1605
                    pos: 40360
                    length: 3942
                children: []
                pos: 40252
                length: 4050
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 44547
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 44561
                      length: 15
                    pos: 44528
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 44586
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 44635
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 44647
                                  length: 4
                              children: []
                              pos: 44635
                              length: 16
                          children: []
                          pos: 44634
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 44663
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 44713
                          length: 110
                        pos: 44653
                        length: 178
                      pos: 44631
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 44838
                      length: 12
                    pos: 44578
                    length: 278
                children: []
                pos: 44528
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 44998
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 44993
                    length: 1189
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, isExtern);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 45032
                      length: 1144
                    pos: 45024
                    length: 1158
                children: []
                pos: 44993
                length: 1189
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 46334
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 46400
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 46442
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 46544
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 46550
                            length: 15
                          pos: 46532
                          length: 398
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: parent
                                            children: []
                                            pos: 46602
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 46612
                                            length: 4
                                        children: []
                                        pos: 46602
                                        length: 14
                                      right:
                                        type: equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: parent.getType()
                                            children: []
                                            pos: 46620
                                            length: 16
                                          right:
                                            type: field_access
                                            fields:
                                              text: Token.EXPR_RESULT
                                            children: []
                                            pos: 46640
                                            length: 17
                                        children: []
                                        pos: 46620
                                        length: 37
                                    children: []
                                    pos: 46602
                                    length: 55
                                children: []
                                pos: 46601
                                length: 57
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: n.getType()
                                        children: []
                                        pos: 46679
                                        length: 11
                                    children: []
                                    pos: 46678
                                    length: 13
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, n.getFirstChild(), n);
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, n, n);
                                                      break;
                                                  }
                                    children: []
                                    pos: 46692
                                    length: 220
                                children: []
                                pos: 46671
                                length: 241
                              pos: 46659
                              length: 263
                            pos: 46598
                            length: 324
                          pos: 46588
                          length: 342
                      children: []
                      pos: 46532
                      length: 398
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 46951
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 46970
                            length: 15
                          pos: 46938
                          length: 979
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 47044
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 47294
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 47302
                                                length: 4
                                            children: []
                                            pos: 47294
                                            length: 12
                                          right:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: member.getType()
                                                children: []
                                                pos: 47322
                                                length: 16
                                              right:
                                                type: field_access
                                                fields:
                                                  text: Token.GETPROP
                                                children: []
                                                pos: 47342
                                                length: 13
                                            children: []
                                            pos: 47322
                                            length: 33
                                        children: []
                                        pos: 47294
                                        length: 61
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: member.getFirstChild().getType()
                                            children: []
                                            pos: 47371
                                            length: 32
                                          right:
                                            type: field_access
                                            fields:
                                              text: Token.THIS
                                            children: []
                                            pos: 47407
                                            length: 10
                                        children: []
                                        pos: 47371
                                        length: 46
                                    children: []
                                    pos: 47294
                                    length: 123
                                children: []
                                pos: 47293
                                length: 125
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 47431
                                length: 7
                              pos: 47419
                              length: 29
                            pos: 47290
                            length: 158
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 47458
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredTypeInAnnotation(t,
                                member, info);
                            children: []
                            pos: 47510
                            length: 61
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 47580
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 47627
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 47637
                                            length: 4
                                        children: []
                                        pos: 47627
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 47658
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.NAME
                                                    children: []
                                                    pos: 47676
                                                    length: 10
                                                children: []
                                                pos: 47658
                                                length: 28
                                              right:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 47690
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.STRING
                                                    children: []
                                                    pos: 47708
                                                    length: 12
                                                children: []
                                                pos: 47690
                                                length: 30
                                            children: []
                                            pos: 47658
                                            length: 62
                                        children: []
                                        pos: 47657
                                        length: 64
                                    children: []
                                    pos: 47627
                                    length: 94
                                children: []
                                pos: 47626
                                length: 96
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  false /* functions with implementations are not in externs */);
                                children: []
                                pos: 47735
                                length: 164
                              pos: 47723
                              length: 186
                            pos: 47623
                            length: 286
                          pos: 47034
                          length: 883
                      children: []
                      pos: 46938
                      length: 979
                    pos: 46314
                    length: 1609
                children: []
                pos: 46314
                length: 1609
              pos: 13663
              length: 34289
          children: []
          pos: 13663
          length: 34289
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 48049
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 48071
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 48100
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 48136
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 48173
                length: 168
              pos: 48022
              length: 323
          children: []
          pos: 48022
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 48480
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 48535
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 48874
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 48880
                      length: 15
                    pos: 48852
                    length: 489
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 48926
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 48968
                              length: 11
                          children: []
                          pos: 48967
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.ASSIGN:
                                        // Handle typedefs.
                                        checkForOldStyleTypedef(t, n);
                                        break;

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForOldStyleTypedef(t, n);
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 48981
                          length: 354
                      children: []
                      pos: 48960
                      length: 375
                    pos: 48918
                    length: 423
                children: []
                pos: 48852
                length: 489
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 49366
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 49401
                      length: 15
                    pos: 49347
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 49486
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 49521
                      length: 62
                    pos: 49478
                    length: 111
                children: []
                pos: 49347
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 49769
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 49794
                      length: 15
                    pos: 49756
                    length: 942
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 49855
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 49863
                                      length: 4
                                  children: []
                                  pos: 49855
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 49871
                                  length: 22
                              children: []
                              pos: 49855
                              length: 38
                          children: []
                          pos: 49854
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 49905
                          length: 7
                        pos: 49895
                        length: 25
                      pos: 49851
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 49928
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 49985
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 49996
                                  length: 4
                              children: []
                              pos: 49985
                              length: 15
                          children: []
                          pos: 49984
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 50012
                          length: 7
                        pos: 50002
                        length: 25
                      pos: 49981
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.forwardDeclareType(typedef);
                      children: []
                      pos: 50201
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 50250
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 50331
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 50343
                                  length: 4
                              children: []
                              pos: 50331
                              length: 16
                          children: []
                          pos: 50330
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 50359
                          length: 118
                        pos: 50349
                        length: 136
                      pos: 50327
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, realType);
                      children: []
                      pos: 50493
                      length: 44
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: candidate.getType()
                                  children: []
                                  pos: 50548
                                  length: 19
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.GETPROP
                                  children: []
                                  pos: 50571
                                  length: 13
                              children: []
                              pos: 50548
                              length: 36
                          children: []
                          pos: 50547
                          length: 38
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 50596
                          length: 88
                        pos: 50586
                        length: 106
                      pos: 50544
                      length: 148
                    pos: 49843
                    length: 855
                children: []
                pos: 49756
                length: 942
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForOldStyleTypedef
                    children: []
                    pos: 50879
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50903
                      length: 15
                    pos: 50866
                    length: 988
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = codingConvention.identifyTypeDefAssign(candidate);
                      children: []
                      pos: 50972
                      length: 67
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 51050
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 51061
                                  length: 4
                              children: []
                              pos: 51050
                              length: 15
                          children: []
                          pos: 51049
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.forwardDeclareType(typedef);
                          children: []
                          pos: 51249
                          length: 41
                        - type: local_variable_declaration
                          fields:
                            text: JSDocInfo info = candidate.getJSDocInfo();
                          children: []
                          pos: 51300
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: JSType realType = null;
                          children: []
                          pos: 51351
                          length: 23
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 51387
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51395
                                          length: 4
                                      children: []
                                      pos: 51387
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: info.getType()
                                          children: []
                                          pos: 51403
                                          length: 14
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51421
                                          length: 4
                                      children: []
                                      pos: 51403
                                      length: 22
                                  children: []
                                  pos: 51387
                                  length: 38
                              children: []
                              pos: 51386
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: realType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 51439
                              length: 56
                            pos: 51427
                            length: 78
                          pos: 51383
                          length: 122
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: realType
                                      children: []
                                      pos: 51519
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 51531
                                      length: 4
                                  children: []
                                  pos: 51519
                                  length: 16
                              children: []
                              pos: 51518
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(
                                                    t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                              children: []
                              pos: 51549
                              length: 122
                            pos: 51537
                            length: 144
                          pos: 51515
                          length: 166
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(typedef, realType);
                          children: []
                          pos: 51691
                          length: 44
                        pos: 51067
                        length: 781
                      pos: 51046
                      length: 802
                    pos: 50936
                    length: 918
                children: []
                pos: 50866
                length: 988
              pos: 48460
              length: 3398
          children: []
          pos: 48460
          length: 3398
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 52010
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 52130
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 52268
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 52263
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 52284
                      length: 60
                    pos: 52276
                    length: 74
                children: []
                pos: 52263
                length: 87
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 52636
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 52642
                      length: 15
                    pos: 52614
                    length: 638
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 52692
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 52697
                                  length: 19
                              children: []
                              pos: 52692
                              length: 24
                          children: []
                          pos: 52691
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 52718
                        length: 7
                      pos: 52688
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 52737
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.LP
                                      children: []
                                      pos: 52752
                                      length: 8
                                  children: []
                                  pos: 52737
                                  length: 23
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 52764
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 52774
                                      length: 19
                                  children: []
                                  pos: 52764
                                  length: 29
                              children: []
                              pos: 52737
                              length: 56
                          children: []
                          pos: 52736
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 52805
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 52843
                          length: 7
                        pos: 52795
                        length: 63
                      pos: 52733
                      length: 125
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(n);
                      children: []
                      pos: 52866
                      length: 22
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 52903
                              length: 11
                          children: []
                          pos: 52902
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.FUNCTION:
                                        if (parent.getType() == Token.NAME) {
                                          return;
                                        }
                                        defineDeclaredFunction(n, parent);
                                        break;
                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;
                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;
                                    }
                          children: []
                          pos: 52916
                          length: 330
                      children: []
                      pos: 52895
                      length: 351
                    pos: 52680
                    length: 572
                children: []
                pos: 52614
                length: 638
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 53333
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 53354
                      length: 11
                    pos: 53320
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 53411
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 53459
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 53509
                              length: 17
                          children: []
                          pos: 53508
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 53538
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 53590
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 53599
                                          length: 4
                                      children: []
                                      pos: 53590
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 53784
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 53807
                                                  length: 4
                                              children: []
                                              pos: 53784
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 53960
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 53987
                                                  length: 6
                                              children: []
                                              pos: 53960
                                              length: 33
                                          children: []
                                          pos: 53784
                                          length: 209
                                      children: []
                                      pos: 53783
                                      length: 211
                                  children: []
                                  pos: 53590
                                  length: 404
                              children: []
                              pos: 53589
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 54008
                              length: 58
                            pos: 53996
                            length: 80
                          pos: 53586
                          length: 490
                        pos: 53528
                        length: 556
                      pos: 53505
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 54092
                      length: 25
                    pos: 53367
                    length: 756
                children: []
                pos: 53320
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 54205
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 54222
                      length: 17
                    pos: 54192
                    length: 843
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 54249
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 54316
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = (FunctionType) functionNode.getJSType();
                      children: []
                      pos: 54359
                      length: 68
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 54438
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54454
                                  length: 4
                              children: []
                              pos: 54438
                              length: 20
                          children: []
                          pos: 54437
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 54470
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 54539
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54558
                                      length: 4
                                  children: []
                                  pos: 54539
                                  length: 23
                              children: []
                              pos: 54538
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 54576
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), true);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 54641
                              length: 370
                            pos: 54564
                            length: 457
                          pos: 54535
                          length: 486
                        pos: 54460
                        length: 569
                      pos: 54434
                      length: 595
                    pos: 54241
                    length: 794
                children: []
                pos: 54192
                length: 843
              pos: 51990
              length: 3073
          children: []
          pos: 51990
          length: 3073
        pos: 4639
        length: 50451
    children: []
    pos: 4639
    length: 50451
  pos: 0
  length: 55091
text_diff: "--- before\n+++ after\n@@ -1448,7 +1448,21 @@\n         return;\n       }\n
  \n-      super.visit(t, n, parent);\n+      attachLiteralTypes(n);\n+      switch
  (n.getType()) {\n+        case Token.FUNCTION:\n+          if (parent.getType()
  == Token.NAME) {\n+            return;\n+          }\n+          defineDeclaredFunction(n,
  parent);\n+          break;\n+        case Token.CATCH:\n+          defineCatch(n,
  parent);\n+          break;\n+        case Token.VAR:\n+          defineVar(n, parent);\n+
  \         break;\n+      }\n     }\n \n     /** Handle bleeding functions and function
  parameters. */\n"
tree_diff: |+
  New cluster:
  UPDATE from super.visit(t, n, parent); to attachLiteralTypes(n);
  ------------
  ===
  update-node
  ---
  expression_statement: super.visit(t, n, parent); [52866,52892]
  replace super.visit(t, n, parent); by attachLiteralTypes(n);

  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  switch_expression [52895,53246]
      parenthesized_expression [52902,52915]
          method_invocation: n.getType() [52903,52914]
      switch_block: {
          case Token.FUNCTION:
            if (parent.getType() == Token.NAME) {
              return;
            }
            defineDeclaredFunction(n, parent);
            break;
          case Token.CATCH:
            defineCatch(n, parent);
            break;
          case Token.VAR:
            defineVar(n, parent);
            break;
        } [52916,53246]
  to
  block [52680,52898]
  at 3

...
