---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: JsonTreeReader
        children: []
        pos: 1154
        length: 14
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              private static final Reader UNREADABLE_READER = new Reader() {
                  @Override public int read(char[] buffer, int offset, int count) throws IOException {
                    throw new AssertionError();
                  }
                  @Override public void close() throws IOException {
                    throw new AssertionError();
                  }
                };
          children: []
          pos: 1192
          length: 291
        - type: field_declaration
          fields:
            text: private static final Object SENTINEL_CLOSED = new Object();
          children: []
          pos: 1486
          length: 59
        - type: field_declaration
          fields:
            text: private Object[] stack = new Object[32];
          children: []
          pos: 1641
          length: 40
        - type: field_declaration
          fields:
            text: private int stackSize = 0;
          children: []
          pos: 1684
          length: 26
        - type: field_declaration
          fields:
            text: private String[] pathNames = new String[32];
          children: []
          pos: 2177
          length: 44
        - type: field_declaration
          fields:
            text: private int[] pathIndices = new int[32];
          children: []
          pos: 2224
          length: 40
        - type: constructor_declaration
          fields:
            text: |-
              public JsonTreeReader(JsonElement element) {
                  super(UNREADABLE_READER);
                  push(element);
                }
          children: []
          pos: 2268
          length: 97
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: beginArray
              children: []
              pos: 2391
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2369
              length: 205
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.BEGIN_ARRAY);
                children: []
                pos: 2429
                length: 30
              - type: local_variable_declaration
                fields:
                  text: JsonArray array = (JsonArray) peekStack();
                children: []
                pos: 2464
                length: 42
              - type: expression_statement
                fields:
                  text: push(array.iterator());
                children: []
                pos: 2511
                length: 23
              - type: expression_statement
                fields:
                  text: pathIndices[stackSize - 1] = 0;
                children: []
                pos: 2539
                length: 31
              pos: 2423
              length: 151
          children: []
          pos: 2369
          length: 205
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: endArray
              children: []
              pos: 2600
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2578
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.END_ARRAY);
                children: []
                pos: 2636
                length: 28
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 2669
                length: 11
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 2703
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 2732
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 2744
                            length: 1
                        children: []
                        pos: 2732
                        length: 13
                    children: []
                    pos: 2731
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 2755
                    length: 29
                  pos: 2747
                  length: 43
                pos: 2728
                length: 62
              pos: 2630
              length: 164
          children: []
          pos: 2578
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: beginObject
              children: []
              pos: 2820
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2798
              length: 186
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.BEGIN_OBJECT);
                children: []
                pos: 2859
                length: 31
              - type: local_variable_declaration
                fields:
                  text: JsonObject object = (JsonObject) peekStack();
                children: []
                pos: 2895
                length: 45
              - type: expression_statement
                fields:
                  text: push(object.entrySet().iterator());
                children: []
                pos: 2945
                length: 35
              pos: 2853
              length: 131
          children: []
          pos: 2798
          length: 186
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: endObject
              children: []
              pos: 3010
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2988
              length: 219
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.END_OBJECT);
                children: []
                pos: 3047
                length: 29
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 3081
                length: 11
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 3115
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 3145
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3157
                            length: 1
                        children: []
                        pos: 3145
                        length: 13
                    children: []
                    pos: 3144
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 3168
                    length: 29
                  pos: 3160
                  length: 43
                pos: 3141
                length: 62
              pos: 3041
              length: 166
          children: []
          pos: 2988
          length: 219
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasNext
              children: []
              pos: 3236
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3211
              length: 163
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 3271
                length: 25
              - type: return_statement
                fields:
                  text: return token != JsonToken.END_OBJECT && token != JsonToken.END_ARRAY;
                children: []
                pos: 3301
                length: 69
              pos: 3265
              length: 109
          children: []
          pos: 3211
          length: 163
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: peek
              children: []
              pos: 3405
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3378
              length: 1323
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 3441
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3454
                            length: 1
                        children: []
                        pos: 3441
                        length: 14
                    children: []
                    pos: 3440
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return JsonToken.END_DOCUMENT;
                    children: []
                    pos: 3465
                    length: 30
                  pos: 3457
                  length: 44
                pos: 3437
                length: 64
              - type: local_variable_declaration
                fields:
                  text: Object o = peekStack();
                children: []
                pos: 3507
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: o instanceof Iterator
                        children: []
                        pos: 3539
                        length: 21
                    children: []
                    pos: 3538
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: boolean isObject = stack[stackSize - 2] instanceof JsonObject;
                    children: []
                    pos: 3570
                    length: 62
                  - type: local_variable_declaration
                    fields:
                      text: Iterator<?> iterator = (Iterator<?>) o;
                    children: []
                    pos: 3639
                    length: 39
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: iterator.hasNext()
                            children: []
                            pos: 3689
                            length: 18
                        children: []
                        pos: 3688
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: identifier
                                fields:
                                  text: isObject
                                children: []
                                pos: 3723
                                length: 8
                            children: []
                            pos: 3722
                            length: 10
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return JsonToken.NAME;
                            children: []
                            pos: 3745
                            length: 22
                          pos: 3733
                          length: 44
                        pos: 3719
                        length: 133
                      pos: 3709
                      length: 151
                    pos: 3685
                    length: 260
                  pos: 3562
                  length: 389
                pos: 3535
                length: 1162
              pos: 3431
              length: 1270
          children: []
          pos: 3378
          length: 1323
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: peekStack
              children: []
              pos: 4720
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4705
              length: 65
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return stack[stackSize - 1];
                children: []
                pos: 4738
                length: 28
              pos: 4732
              length: 38
          children: []
          pos: 4705
          length: 65
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: popStack
              children: []
              pos: 4789
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4774
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object result = stack[--stackSize];
                children: []
                pos: 4806
                length: 35
              - type: expression_statement
                fields:
                  text: stack[stackSize] = null;
                children: []
                pos: 4846
                length: 24
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 4875
                length: 14
              pos: 4800
              length: 93
          children: []
          pos: 4774
          length: 119
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expect
              children: []
              pos: 4910
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonToken expected
                children: []
                pos: 4917
                length: 18
              pos: 4897
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: peek()
                            children: []
                            pos: 4966
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: expected
                            children: []
                            pos: 4976
                            length: 8
                        children: []
                        pos: 4966
                        length: 18
                    children: []
                    pos: 4965
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + expected + " but was " + peek() + locationString());
                    children: []
                    pos: 4994
                    length: 109
                  pos: 4986
                  length: 123
                pos: 4962
                length: 147
              pos: 4956
              length: 157
          children: []
          pos: 4897
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextName
              children: []
              pos: 5141
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5117
              length: 321
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.NAME);
                children: []
                pos: 5177
                length: 23
              - type: local_variable_declaration
                fields:
                  text: Iterator<?> i = (Iterator<?>) peekStack();
                children: []
                pos: 5205
                length: 42
              - type: local_variable_declaration
                fields:
                  text: Map.Entry<?, ?> entry = (Map.Entry<?, ?>) i.next();
                children: []
                pos: 5252
                length: 51
              - type: local_variable_declaration
                fields:
                  text: String result = (String) entry.getKey();
                children: []
                pos: 5308
                length: 40
              - type: expression_statement
                fields:
                  text: pathNames[stackSize - 1] = result;
                children: []
                pos: 5353
                length: 34
              - type: expression_statement
                fields:
                  text: push(entry.getValue());
                children: []
                pos: 5392
                length: 23
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 5420
                length: 14
              pos: 5171
              length: 267
          children: []
          pos: 5117
          length: 321
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextString
              children: []
              pos: 5466
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5442
              length: 436
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 5504
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 5538
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 5547
                                length: 16
                            children: []
                            pos: 5538
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 5567
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 5576
                                length: 16
                            children: []
                            pos: 5567
                            length: 25
                        children: []
                        pos: 5538
                        length: 54
                    children: []
                    pos: 5537
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.STRING + " but was " + token + locationString());
                    children: []
                    pos: 5602
                    length: 116
                  pos: 5594
                  length: 130
                pos: 5534
                length: 190
              - type: local_variable_declaration
                fields:
                  text: String result = ((JsonPrimitive) popStack()).getAsString();
                children: []
                pos: 5729
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 5797
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 5809
                            length: 1
                        children: []
                        pos: 5797
                        length: 13
                    children: []
                    pos: 5796
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 5820
                    length: 29
                  pos: 5812
                  length: 43
                pos: 5793
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 5860
                length: 14
              pos: 5498
              length: 380
          children: []
          pos: 5442
          length: 436
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextBoolean
              children: []
              pos: 5907
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5882
              length: 246
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.BOOLEAN);
                children: []
                pos: 5946
                length: 26
              - type: local_variable_declaration
                fields:
                  text: boolean result = ((JsonPrimitive) popStack()).getAsBoolean();
                children: []
                pos: 5977
                length: 61
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 6047
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6059
                            length: 1
                        children: []
                        pos: 6047
                        length: 13
                    children: []
                    pos: 6046
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 6070
                    length: 29
                  pos: 6062
                  length: 43
                pos: 6043
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 6110
                length: 14
              pos: 5940
              length: 188
          children: []
          pos: 5882
          length: 246
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextNull
              children: []
              pos: 6154
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6132
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.NULL);
                children: []
                pos: 6190
                length: 23
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 6218
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 6238
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6250
                            length: 1
                        children: []
                        pos: 6238
                        length: 13
                    children: []
                    pos: 6237
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 6261
                    length: 29
                  pos: 6253
                  length: 43
                pos: 6234
                length: 62
              pos: 6184
              length: 116
          children: []
          pos: 6132
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextDouble
              children: []
              pos: 6328
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6304
              length: 623
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 6366
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 6400
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 6409
                                length: 16
                            children: []
                            pos: 6400
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 6429
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 6438
                                length: 16
                            children: []
                            pos: 6429
                            length: 25
                        children: []
                        pos: 6400
                        length: 54
                    children: []
                    pos: 6399
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.NUMBER + " but was " + token + locationString());
                    children: []
                    pos: 6464
                    length: 116
                  pos: 6456
                  length: 130
                pos: 6396
                length: 190
              - type: local_variable_declaration
                fields:
                  text: double result = ((JsonPrimitive) peekStack()).getAsDouble();
                children: []
                pos: 6591
                length: 60
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!isLenient()"
                            children: []
                            pos: 6660
                            length: 12
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: Double.isNaN(result)
                                    children: []
                                    pos: 6677
                                    length: 20
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: Double.isInfinite(result)
                                    children: []
                                    pos: 6701
                                    length: 25
                                children: []
                                pos: 6677
                                length: 49
                            children: []
                            pos: 6676
                            length: 51
                        children: []
                        pos: 6660
                        length: 67
                    children: []
                    pos: 6659
                    length: 69
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new NumberFormatException("JSON forbids NaN and
                        infinities: " + result);'
                    children: []
                    pos: 6737
                    length: 78
                  pos: 6729
                  length: 92
                pos: 6656
                length: 165
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 6826
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 6846
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6858
                            length: 1
                        children: []
                        pos: 6846
                        length: 13
                    children: []
                    pos: 6845
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 6869
                    length: 29
                  pos: 6861
                  length: 43
                pos: 6842
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 6909
                length: 14
              pos: 6360
              length: 567
          children: []
          pos: 6304
          length: 623
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextLong
              children: []
              pos: 6953
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6931
              length: 445
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 6989
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7023
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 7032
                                length: 16
                            children: []
                            pos: 7023
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7052
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 7061
                                length: 16
                            children: []
                            pos: 7052
                            length: 25
                        children: []
                        pos: 7023
                        length: 54
                    children: []
                    pos: 7022
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.NUMBER + " but was " + token + locationString());
                    children: []
                    pos: 7087
                    length: 116
                  pos: 7079
                  length: 130
                pos: 7019
                length: 190
              - type: local_variable_declaration
                fields:
                  text: long result = ((JsonPrimitive) peekStack()).getAsLong();
                children: []
                pos: 7214
                length: 56
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 7275
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 7295
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7307
                            length: 1
                        children: []
                        pos: 7295
                        length: 13
                    children: []
                    pos: 7294
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 7318
                    length: 29
                  pos: 7310
                  length: 43
                pos: 7291
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 7358
                length: 14
              pos: 6983
              length: 393
          children: []
          pos: 6931
          length: 445
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextInt
              children: []
              pos: 7401
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7380
              length: 441
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 7436
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7470
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 7479
                                length: 16
                            children: []
                            pos: 7470
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7499
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 7508
                                length: 16
                            children: []
                            pos: 7499
                            length: 25
                        children: []
                        pos: 7470
                        length: 54
                    children: []
                    pos: 7469
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.NUMBER + " but was " + token + locationString());
                    children: []
                    pos: 7534
                    length: 116
                  pos: 7526
                  length: 130
                pos: 7466
                length: 190
              - type: local_variable_declaration
                fields:
                  text: int result = ((JsonPrimitive) peekStack()).getAsInt();
                children: []
                pos: 7661
                length: 54
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 7720
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 7740
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7752
                            length: 1
                        children: []
                        pos: 7740
                        length: 13
                    children: []
                    pos: 7739
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 7763
                    length: 29
                  pos: 7755
                  length: 43
                pos: 7736
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 7803
                length: 14
              pos: 7430
              length: 391
          children: []
          pos: 7380
          length: 441
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: close
              children: []
              pos: 7847
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7825
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: stack = new Object[] { SENTINEL_CLOSED };
                children: []
                pos: 7880
                length: 41
              - type: expression_statement
                fields:
                  text: stackSize = 1;
                children: []
                pos: 7926
                length: 14
              pos: 7874
              length: 70
          children: []
          pos: 7825
          length: 119
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: skipValue
              children: []
              pos: 7970
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7948
              length: 335
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: peek()
                            children: []
                            pos: 8011
                            length: 6
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.NAME
                            children: []
                            pos: 8021
                            length: 14
                        children: []
                        pos: 8011
                        length: 24
                    children: []
                    pos: 8010
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: nextName();
                    children: []
                    pos: 8045
                    length: 11
                  - type: expression_statement
                    fields:
                      text: pathNames[stackSize - 2] = "null";
                    children: []
                    pos: 8063
                    length: 34
                  pos: 8037
                  length: 66
                pos: 8007
                length: 205
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 8221
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 8233
                            length: 1
                        children: []
                        pos: 8221
                        length: 13
                    children: []
                    pos: 8220
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 8244
                    length: 29
                  pos: 8236
                  length: 43
                pos: 8217
                length: 62
              pos: 8001
              length: 282
          children: []
          pos: 7948
          length: 335
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 8311
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8287
              length: 79
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getClass().getSimpleName();
                children: []
                pos: 8328
                length: 34
              pos: 8322
              length: 44
          children: []
          pos: 8287
          length: 79
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: promoteNameToValue
              children: []
              pos: 8382
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8370
              length: 270
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.NAME);
                children: []
                pos: 8428
                length: 23
              - type: local_variable_declaration
                fields:
                  text: Iterator<?> i = (Iterator<?>) peekStack();
                children: []
                pos: 8456
                length: 42
              - type: local_variable_declaration
                fields:
                  text: Map.Entry<?, ?> entry = (Map.Entry<?, ?>) i.next();
                children: []
                pos: 8503
                length: 51
              - type: expression_statement
                fields:
                  text: push(entry.getValue());
                children: []
                pos: 8559
                length: 23
              - type: expression_statement
                fields:
                  text: push(new JsonPrimitive((String) entry.getKey()));
                children: []
                pos: 8587
                length: 49
              pos: 8422
              length: 218
          children: []
          pos: 8370
          length: 270
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: push
              children: []
              pos: 8657
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object newTop
                children: []
                pos: 8662
                length: 13
              pos: 8644
              length: 563
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 8687
                            length: 9
                          right:
                            type: field_access
                            fields:
                              text: stack.length
                            children: []
                            pos: 8700
                            length: 12
                        children: []
                        pos: 8687
                        length: 25
                    children: []
                    pos: 8686
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Object[] newStack = new Object[stackSize * 2];
                    children: []
                    pos: 8722
                    length: 46
                  - type: local_variable_declaration
                    fields:
                      text: int[] newPathIndices = new int[stackSize * 2];
                    children: []
                    pos: 8775
                    length: 46
                  - type: local_variable_declaration
                    fields:
                      text: String[] newPathNames = new String[stackSize * 2];
                    children: []
                    pos: 8828
                    length: 50
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(stack, 0, newStack, 0, stackSize);
                    children: []
                    pos: 8885
                    length: 51
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(pathIndices, 0, newPathIndices, 0, stackSize);
                    children: []
                    pos: 8943
                    length: 63
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(pathNames, 0, newPathNames, 0, stackSize);
                    children: []
                    pos: 9013
                    length: 59
                  - type: expression_statement
                    fields:
                      text: stack = newStack;
                    children: []
                    pos: 9079
                    length: 17
                  - type: expression_statement
                    fields:
                      text: pathIndices = newPathIndices;
                    children: []
                    pos: 9103
                    length: 29
                  - type: expression_statement
                    fields:
                      text: pathNames = newPathNames;
                    children: []
                    pos: 9139
                    length: 25
                  pos: 8714
                  length: 456
                pos: 8683
                length: 487
              - type: expression_statement
                fields:
                  text: stack[stackSize++] = newTop;
                children: []
                pos: 9175
                length: 28
              pos: 8677
              length: 530
          children: []
          pos: 8644
          length: 563
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPath
              children: []
              pos: 9235
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9211
              length: 577
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder result = new StringBuilder().append('$');
                children: []
                pos: 9251
                length: 55
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < stackSize; i++) {
                          if (stack[i] instanceof JsonArray) {
                            if (stack[++i] instanceof Iterator) {
                              result.append('[').append(pathIndices[i]).append(']');
                            }
                          } else if (stack[i] instanceof JsonObject) {
                            if (stack[++i] instanceof Iterator) {
                              result.append('.');
                              if (pathNames[i] != null) {
                                result.append(pathNames[i]);
                              }
                            }
                          }
                        }
                children: []
                pos: 9311
                length: 443
              - type: return_statement
                fields:
                  text: return result.toString();
                children: []
                pos: 9759
                length: 25
              pos: 9245
              length: 543
          children: []
          pos: 9211
          length: 577
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: locationString
              children: []
              pos: 9807
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9792
              length: 73
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return " at path " + getPath();
                children: []
                pos: 9830
                length: 31
              pos: 9824
              length: 41
          children: []
          pos: 9792
          length: 73
        pos: 1135
        length: 8732
    children: []
    pos: 1135
    length: 8732
  pos: 0
  length: 9868
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: JsonTreeReader
        children: []
        pos: 1154
        length: 14
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              private static final Reader UNREADABLE_READER = new Reader() {
                  @Override public int read(char[] buffer, int offset, int count) throws IOException {
                    throw new AssertionError();
                  }
                  @Override public void close() throws IOException {
                    throw new AssertionError();
                  }
                };
          children: []
          pos: 1192
          length: 291
        - type: field_declaration
          fields:
            text: private static final Object SENTINEL_CLOSED = new Object();
          children: []
          pos: 1486
          length: 59
        - type: field_declaration
          fields:
            text: private Object[] stack = new Object[32];
          children: []
          pos: 1641
          length: 40
        - type: field_declaration
          fields:
            text: private int stackSize = 0;
          children: []
          pos: 1684
          length: 26
        - type: field_declaration
          fields:
            text: private String[] pathNames = new String[32];
          children: []
          pos: 2177
          length: 44
        - type: field_declaration
          fields:
            text: private int[] pathIndices = new int[32];
          children: []
          pos: 2224
          length: 40
        - type: constructor_declaration
          fields:
            text: |-
              public JsonTreeReader(JsonElement element) {
                  super(UNREADABLE_READER);
                  push(element);
                }
          children: []
          pos: 2268
          length: 97
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: beginArray
              children: []
              pos: 2391
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2369
              length: 205
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.BEGIN_ARRAY);
                children: []
                pos: 2429
                length: 30
              - type: local_variable_declaration
                fields:
                  text: JsonArray array = (JsonArray) peekStack();
                children: []
                pos: 2464
                length: 42
              - type: expression_statement
                fields:
                  text: push(array.iterator());
                children: []
                pos: 2511
                length: 23
              - type: expression_statement
                fields:
                  text: pathIndices[stackSize - 1] = 0;
                children: []
                pos: 2539
                length: 31
              pos: 2423
              length: 151
          children: []
          pos: 2369
          length: 205
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: endArray
              children: []
              pos: 2600
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2578
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.END_ARRAY);
                children: []
                pos: 2636
                length: 28
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 2669
                length: 11
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 2703
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 2732
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 2744
                            length: 1
                        children: []
                        pos: 2732
                        length: 13
                    children: []
                    pos: 2731
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 2755
                    length: 29
                  pos: 2747
                  length: 43
                pos: 2728
                length: 62
              pos: 2630
              length: 164
          children: []
          pos: 2578
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: beginObject
              children: []
              pos: 2820
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2798
              length: 186
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.BEGIN_OBJECT);
                children: []
                pos: 2859
                length: 31
              - type: local_variable_declaration
                fields:
                  text: JsonObject object = (JsonObject) peekStack();
                children: []
                pos: 2895
                length: 45
              - type: expression_statement
                fields:
                  text: push(object.entrySet().iterator());
                children: []
                pos: 2945
                length: 35
              pos: 2853
              length: 131
          children: []
          pos: 2798
          length: 186
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: endObject
              children: []
              pos: 3010
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2988
              length: 219
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.END_OBJECT);
                children: []
                pos: 3047
                length: 29
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 3081
                length: 11
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 3115
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 3145
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3157
                            length: 1
                        children: []
                        pos: 3145
                        length: 13
                    children: []
                    pos: 3144
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 3168
                    length: 29
                  pos: 3160
                  length: 43
                pos: 3141
                length: 62
              pos: 3041
              length: 166
          children: []
          pos: 2988
          length: 219
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasNext
              children: []
              pos: 3236
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3211
              length: 163
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 3271
                length: 25
              - type: return_statement
                fields:
                  text: return token != JsonToken.END_OBJECT && token != JsonToken.END_ARRAY;
                children: []
                pos: 3301
                length: 69
              pos: 3265
              length: 109
          children: []
          pos: 3211
          length: 163
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: peek
              children: []
              pos: 3405
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3378
              length: 1323
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 3441
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3454
                            length: 1
                        children: []
                        pos: 3441
                        length: 14
                    children: []
                    pos: 3440
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return JsonToken.END_DOCUMENT;
                    children: []
                    pos: 3465
                    length: 30
                  pos: 3457
                  length: 44
                pos: 3437
                length: 64
              - type: local_variable_declaration
                fields:
                  text: Object o = peekStack();
                children: []
                pos: 3507
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: o instanceof Iterator
                        children: []
                        pos: 3539
                        length: 21
                    children: []
                    pos: 3538
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: boolean isObject = stack[stackSize - 2] instanceof JsonObject;
                    children: []
                    pos: 3570
                    length: 62
                  - type: local_variable_declaration
                    fields:
                      text: Iterator<?> iterator = (Iterator<?>) o;
                    children: []
                    pos: 3639
                    length: 39
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: iterator.hasNext()
                            children: []
                            pos: 3689
                            length: 18
                        children: []
                        pos: 3688
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: identifier
                                fields:
                                  text: isObject
                                children: []
                                pos: 3723
                                length: 8
                            children: []
                            pos: 3722
                            length: 10
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return JsonToken.NAME;
                            children: []
                            pos: 3745
                            length: 22
                          pos: 3733
                          length: 44
                        pos: 3719
                        length: 133
                      pos: 3709
                      length: 151
                    pos: 3685
                    length: 260
                  pos: 3562
                  length: 389
                pos: 3535
                length: 1162
              pos: 3431
              length: 1270
          children: []
          pos: 3378
          length: 1323
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: peekStack
              children: []
              pos: 4720
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4705
              length: 65
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return stack[stackSize - 1];
                children: []
                pos: 4738
                length: 28
              pos: 4732
              length: 38
          children: []
          pos: 4705
          length: 65
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: popStack
              children: []
              pos: 4789
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4774
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object result = stack[--stackSize];
                children: []
                pos: 4806
                length: 35
              - type: expression_statement
                fields:
                  text: stack[stackSize] = null;
                children: []
                pos: 4846
                length: 24
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 4875
                length: 14
              pos: 4800
              length: 93
          children: []
          pos: 4774
          length: 119
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expect
              children: []
              pos: 4910
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonToken expected
                children: []
                pos: 4917
                length: 18
              pos: 4897
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: peek()
                            children: []
                            pos: 4966
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: expected
                            children: []
                            pos: 4976
                            length: 8
                        children: []
                        pos: 4966
                        length: 18
                    children: []
                    pos: 4965
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + expected + " but was " + peek() + locationString());
                    children: []
                    pos: 4994
                    length: 109
                  pos: 4986
                  length: 123
                pos: 4962
                length: 147
              pos: 4956
              length: 157
          children: []
          pos: 4897
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextName
              children: []
              pos: 5141
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5117
              length: 321
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.NAME);
                children: []
                pos: 5177
                length: 23
              - type: local_variable_declaration
                fields:
                  text: Iterator<?> i = (Iterator<?>) peekStack();
                children: []
                pos: 5205
                length: 42
              - type: local_variable_declaration
                fields:
                  text: Map.Entry<?, ?> entry = (Map.Entry<?, ?>) i.next();
                children: []
                pos: 5252
                length: 51
              - type: local_variable_declaration
                fields:
                  text: String result = (String) entry.getKey();
                children: []
                pos: 5308
                length: 40
              - type: expression_statement
                fields:
                  text: pathNames[stackSize - 1] = result;
                children: []
                pos: 5353
                length: 34
              - type: expression_statement
                fields:
                  text: push(entry.getValue());
                children: []
                pos: 5392
                length: 23
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 5420
                length: 14
              pos: 5171
              length: 267
          children: []
          pos: 5117
          length: 321
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextString
              children: []
              pos: 5466
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5442
              length: 436
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 5504
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 5538
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 5547
                                length: 16
                            children: []
                            pos: 5538
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 5567
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 5576
                                length: 16
                            children: []
                            pos: 5567
                            length: 25
                        children: []
                        pos: 5538
                        length: 54
                    children: []
                    pos: 5537
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.STRING + " but was " + token + locationString());
                    children: []
                    pos: 5602
                    length: 116
                  pos: 5594
                  length: 130
                pos: 5534
                length: 190
              - type: local_variable_declaration
                fields:
                  text: String result = ((JsonPrimitive) popStack()).getAsString();
                children: []
                pos: 5729
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 5797
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 5809
                            length: 1
                        children: []
                        pos: 5797
                        length: 13
                    children: []
                    pos: 5796
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 5820
                    length: 29
                  pos: 5812
                  length: 43
                pos: 5793
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 5860
                length: 14
              pos: 5498
              length: 380
          children: []
          pos: 5442
          length: 436
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextBoolean
              children: []
              pos: 5907
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5882
              length: 246
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.BOOLEAN);
                children: []
                pos: 5946
                length: 26
              - type: local_variable_declaration
                fields:
                  text: boolean result = ((JsonPrimitive) popStack()).getAsBoolean();
                children: []
                pos: 5977
                length: 61
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 6047
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6059
                            length: 1
                        children: []
                        pos: 6047
                        length: 13
                    children: []
                    pos: 6046
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 6070
                    length: 29
                  pos: 6062
                  length: 43
                pos: 6043
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 6110
                length: 14
              pos: 5940
              length: 188
          children: []
          pos: 5882
          length: 246
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextNull
              children: []
              pos: 6154
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6132
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.NULL);
                children: []
                pos: 6190
                length: 23
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 6218
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 6238
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6250
                            length: 1
                        children: []
                        pos: 6238
                        length: 13
                    children: []
                    pos: 6237
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 6261
                    length: 29
                  pos: 6253
                  length: 43
                pos: 6234
                length: 62
              pos: 6184
              length: 116
          children: []
          pos: 6132
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextDouble
              children: []
              pos: 6328
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6304
              length: 623
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 6366
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 6400
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 6409
                                length: 16
                            children: []
                            pos: 6400
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 6429
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 6438
                                length: 16
                            children: []
                            pos: 6429
                            length: 25
                        children: []
                        pos: 6400
                        length: 54
                    children: []
                    pos: 6399
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.NUMBER + " but was " + token + locationString());
                    children: []
                    pos: 6464
                    length: 116
                  pos: 6456
                  length: 130
                pos: 6396
                length: 190
              - type: local_variable_declaration
                fields:
                  text: double result = ((JsonPrimitive) peekStack()).getAsDouble();
                children: []
                pos: 6591
                length: 60
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!isLenient()"
                            children: []
                            pos: 6660
                            length: 12
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: Double.isNaN(result)
                                    children: []
                                    pos: 6677
                                    length: 20
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: Double.isInfinite(result)
                                    children: []
                                    pos: 6701
                                    length: 25
                                children: []
                                pos: 6677
                                length: 49
                            children: []
                            pos: 6676
                            length: 51
                        children: []
                        pos: 6660
                        length: 67
                    children: []
                    pos: 6659
                    length: 69
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new NumberFormatException("JSON forbids NaN and
                        infinities: " + result);'
                    children: []
                    pos: 6737
                    length: 78
                  pos: 6729
                  length: 92
                pos: 6656
                length: 165
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 6826
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 6846
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6858
                            length: 1
                        children: []
                        pos: 6846
                        length: 13
                    children: []
                    pos: 6845
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 6869
                    length: 29
                  pos: 6861
                  length: 43
                pos: 6842
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 6909
                length: 14
              pos: 6360
              length: 567
          children: []
          pos: 6304
          length: 623
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextLong
              children: []
              pos: 6953
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6931
              length: 445
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 6989
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7023
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 7032
                                length: 16
                            children: []
                            pos: 7023
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7052
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 7061
                                length: 16
                            children: []
                            pos: 7052
                            length: 25
                        children: []
                        pos: 7023
                        length: 54
                    children: []
                    pos: 7022
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.NUMBER + " but was " + token + locationString());
                    children: []
                    pos: 7087
                    length: 116
                  pos: 7079
                  length: 130
                pos: 7019
                length: 190
              - type: local_variable_declaration
                fields:
                  text: long result = ((JsonPrimitive) peekStack()).getAsLong();
                children: []
                pos: 7214
                length: 56
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 7275
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 7295
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7307
                            length: 1
                        children: []
                        pos: 7295
                        length: 13
                    children: []
                    pos: 7294
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 7318
                    length: 29
                  pos: 7310
                  length: 43
                pos: 7291
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 7358
                length: 14
              pos: 6983
              length: 393
          children: []
          pos: 6931
          length: 445
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: nextInt
              children: []
              pos: 7401
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7380
              length: 441
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken token = peek();
                children: []
                pos: 7436
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7470
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.NUMBER
                                children: []
                                pos: 7479
                                length: 16
                            children: []
                            pos: 7470
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: token
                                children: []
                                pos: 7499
                                length: 5
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.STRING
                                children: []
                                pos: 7508
                                length: 16
                            children: []
                            pos: 7499
                            length: 25
                        children: []
                        pos: 7470
                        length: 54
                    children: []
                    pos: 7469
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new IllegalStateException(
                                  "Expected " + JsonToken.NUMBER + " but was " + token + locationString());
                    children: []
                    pos: 7534
                    length: 116
                  pos: 7526
                  length: 130
                pos: 7466
                length: 190
              - type: local_variable_declaration
                fields:
                  text: int result = ((JsonPrimitive) peekStack()).getAsInt();
                children: []
                pos: 7661
                length: 54
              - type: expression_statement
                fields:
                  text: popStack();
                children: []
                pos: 7720
                length: 11
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 7740
                            length: 9
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7752
                            length: 1
                        children: []
                        pos: 7740
                        length: 13
                    children: []
                    pos: 7739
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pathIndices[stackSize - 1]++;
                    children: []
                    pos: 7763
                    length: 29
                  pos: 7755
                  length: 43
                pos: 7736
                length: 62
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 7803
                length: 14
              pos: 7430
              length: 391
          children: []
          pos: 7380
          length: 441
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: close
              children: []
              pos: 7847
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7825
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: stack = new Object[] { SENTINEL_CLOSED };
                children: []
                pos: 7880
                length: 41
              - type: expression_statement
                fields:
                  text: stackSize = 1;
                children: []
                pos: 7926
                length: 14
              pos: 7874
              length: 70
          children: []
          pos: 7825
          length: 119
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: skipValue
              children: []
              pos: 7970
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7948
              length: 269
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: peek()
                            children: []
                            pos: 8011
                            length: 6
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.NAME
                            children: []
                            pos: 8021
                            length: 14
                        children: []
                        pos: 8011
                        length: 24
                    children: []
                    pos: 8010
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: nextName();
                    children: []
                    pos: 8045
                    length: 11
                  - type: expression_statement
                    fields:
                      text: pathNames[stackSize - 2] = "null";
                    children: []
                    pos: 8063
                    length: 34
                  pos: 8037
                  length: 66
                pos: 8007
                length: 170
              - type: expression_statement
                fields:
                  text: pathIndices[stackSize - 1]++;
                children: []
                pos: 8184
                length: 29
              pos: 8001
              length: 216
          children: []
          pos: 7948
          length: 269
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 8245
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8221
              length: 79
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getClass().getSimpleName();
                children: []
                pos: 8262
                length: 34
              pos: 8256
              length: 44
          children: []
          pos: 8221
          length: 79
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: promoteNameToValue
              children: []
              pos: 8316
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8304
              length: 270
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: expect(JsonToken.NAME);
                children: []
                pos: 8362
                length: 23
              - type: local_variable_declaration
                fields:
                  text: Iterator<?> i = (Iterator<?>) peekStack();
                children: []
                pos: 8390
                length: 42
              - type: local_variable_declaration
                fields:
                  text: Map.Entry<?, ?> entry = (Map.Entry<?, ?>) i.next();
                children: []
                pos: 8437
                length: 51
              - type: expression_statement
                fields:
                  text: push(entry.getValue());
                children: []
                pos: 8493
                length: 23
              - type: expression_statement
                fields:
                  text: push(new JsonPrimitive((String) entry.getKey()));
                children: []
                pos: 8521
                length: 49
              pos: 8356
              length: 218
          children: []
          pos: 8304
          length: 270
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: push
              children: []
              pos: 8591
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object newTop
                children: []
                pos: 8596
                length: 13
              pos: 8578
              length: 563
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: stackSize
                            children: []
                            pos: 8621
                            length: 9
                          right:
                            type: field_access
                            fields:
                              text: stack.length
                            children: []
                            pos: 8634
                            length: 12
                        children: []
                        pos: 8621
                        length: 25
                    children: []
                    pos: 8620
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Object[] newStack = new Object[stackSize * 2];
                    children: []
                    pos: 8656
                    length: 46
                  - type: local_variable_declaration
                    fields:
                      text: int[] newPathIndices = new int[stackSize * 2];
                    children: []
                    pos: 8709
                    length: 46
                  - type: local_variable_declaration
                    fields:
                      text: String[] newPathNames = new String[stackSize * 2];
                    children: []
                    pos: 8762
                    length: 50
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(stack, 0, newStack, 0, stackSize);
                    children: []
                    pos: 8819
                    length: 51
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(pathIndices, 0, newPathIndices, 0, stackSize);
                    children: []
                    pos: 8877
                    length: 63
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(pathNames, 0, newPathNames, 0, stackSize);
                    children: []
                    pos: 8947
                    length: 59
                  - type: expression_statement
                    fields:
                      text: stack = newStack;
                    children: []
                    pos: 9013
                    length: 17
                  - type: expression_statement
                    fields:
                      text: pathIndices = newPathIndices;
                    children: []
                    pos: 9037
                    length: 29
                  - type: expression_statement
                    fields:
                      text: pathNames = newPathNames;
                    children: []
                    pos: 9073
                    length: 25
                  pos: 8648
                  length: 456
                pos: 8617
                length: 487
              - type: expression_statement
                fields:
                  text: stack[stackSize++] = newTop;
                children: []
                pos: 9109
                length: 28
              pos: 8611
              length: 530
          children: []
          pos: 8578
          length: 563
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPath
              children: []
              pos: 9169
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9145
              length: 577
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder result = new StringBuilder().append('$');
                children: []
                pos: 9185
                length: 55
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < stackSize; i++) {
                          if (stack[i] instanceof JsonArray) {
                            if (stack[++i] instanceof Iterator) {
                              result.append('[').append(pathIndices[i]).append(']');
                            }
                          } else if (stack[i] instanceof JsonObject) {
                            if (stack[++i] instanceof Iterator) {
                              result.append('.');
                              if (pathNames[i] != null) {
                                result.append(pathNames[i]);
                              }
                            }
                          }
                        }
                children: []
                pos: 9245
                length: 443
              - type: return_statement
                fields:
                  text: return result.toString();
                children: []
                pos: 9693
                length: 25
              pos: 9179
              length: 543
          children: []
          pos: 9145
          length: 577
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: locationString
              children: []
              pos: 9741
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9726
              length: 73
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return " at path " + getPath();
                children: []
                pos: 9764
                length: 31
              pos: 9758
              length: 41
          children: []
          pos: 9726
          length: 73
        pos: 1135
        length: 8666
    children: []
    pos: 1135
    length: 8666
  pos: 0
  length: 9802
text_diff: "--- before\n+++ after\n@@ -259,13 +259,9 @@\n       pathNames[stackSize
  - 2] = \"null\";\n     } else {\n       popStack();\n-      if (stackSize > 0) {\n
  \        pathNames[stackSize - 1] = \"null\";\n-      }\n     }\n-    if (stackSize
  > 0) {\n       pathIndices[stackSize - 1]++;\n-    }\n   }\n \n   @Override public
  String toString() {\n"
tree_diff: |+
  New cluster:
  ===
  insert-node
  ---
  expression_statement: pathIndices[stackSize - 1]++; [8184,8213]
  to
  block [8001,8283]
  at 1
  ------------
  ===
  insert-node
  ---
  expression_statement: pathIndices[stackSize - 1]++; [8184,8213]
  to
  block [8001,8283]
  at 1

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [8217,8279]
      parenthesized_expression [8220,8235]
          greater_than [8221,8234]
              identifier: stackSize [8221,8230]
              decimal_integer_literal: 0 [8233,8234]
      block [8236,8279]
          expression_statement: pathIndices[stackSize - 1]++; [8244,8273]

...
