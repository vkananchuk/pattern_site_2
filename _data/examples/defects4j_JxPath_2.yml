---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Expression
        children: []
        pos: 1633
        length: 10
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected static final Double ZERO = new Double(0);
          children: []
          pos: 1651
          length: 51
        - type: field_declaration
          fields:
            text: protected static final Double ONE = new Double(1);
          children: []
          pos: 1707
          length: 50
        - type: field_declaration
          fields:
            text: protected static final Double NOT_A_NUMBER = new Double(Double.NaN);
          children: []
          pos: 1762
          length: 68
        - type: field_declaration
          fields:
            text: private boolean contextDependencyKnown = false;
          children: []
          pos: 1836
          length: 47
        - type: field_declaration
          fields:
            text: private boolean contextDependent;
          children: []
          pos: 1888
          length: 33
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContextDependent
              children: []
              pos: 2082
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2067
              length: 226
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!contextDependencyKnown"
                        children: []
                        pos: 2117
                        length: 23
                    children: []
                    pos: 2116
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: contextDependent = computeContextDependent();
                    children: []
                    pos: 2156
                    length: 45
                  - type: expression_statement
                    fields:
                      text: contextDependencyKnown = true;
                    children: []
                    pos: 2214
                    length: 30
                  pos: 2142
                  length: 112
                pos: 2113
                length: 141
              - type: return_statement
                fields:
                  text: return contextDependent;
                children: []
                pos: 2263
                length: 24
              pos: 2103
              length: 190
          children: []
          pos: 2067
          length: 226
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeContextDependent
              children: []
              pos: 2417
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2393
              length: 50
          children: []
          pos: 2393
          length: 50
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeValue
              children: []
              pos: 2600
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2613
                length: 19
              pos: 2577
              length: 57
          children: []
          pos: 2577
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compute
              children: []
              pos: 2662
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2670
                length: 19
              pos: 2639
              length: 52
          children: []
          pos: 2639
          length: 52
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterate
              children: []
              pos: 2713
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2721
                length: 19
              pos: 2697
              length: 386
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object result = compute(context);
                children: []
                pos: 2752
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: result instanceof EvalContext
                        children: []
                        pos: 2798
                        length: 29
                    children: []
                    pos: 2797
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ValueIterator((EvalContext) result);
                    children: []
                    pos: 2843
                    length: 47
                  pos: 2829
                  length: 71
                pos: 2794
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: result instanceof NodeSet
                        children: []
                        pos: 2913
                        length: 25
                    children: []
                    pos: 2912
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ValueIterator(((NodeSet) result).getPointers().iterator());
                    children: []
                    pos: 2954
                    length: 70
                  pos: 2940
                  length: 94
                pos: 2909
                length: 125
              - type: return_statement
                fields:
                  text: return ValueUtils.iterate(result);
                children: []
                pos: 3043
                length: 34
              pos: 2742
              length: 341
          children: []
          pos: 2697
          length: 386
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iteratePointers
              children: []
              pos: 3105
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 3121
                length: 19
              pos: 3089
              length: 740
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object result = compute(context);
                children: []
                pos: 3152
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: result
                            children: []
                            pos: 3198
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3208
                            length: 4
                        children: []
                        pos: 3198
                        length: 14
                    children: []
                    pos: 3197
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.EMPTY_LIST.iterator();
                    children: []
                    pos: 3228
                    length: 41
                  pos: 3214
                  length: 65
                pos: 3194
                length: 85
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: result instanceof EvalContext
                        children: []
                        pos: 3292
                        length: 29
                    children: []
                    pos: 3291
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return (EvalContext) result;
                    children: []
                    pos: 3337
                    length: 28
                  pos: 3323
                  length: 52
                pos: 3288
                length: 87
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: result instanceof NodeSet
                        children: []
                        pos: 3388
                        length: 25
                    children: []
                    pos: 3387
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return new PointerIterator(((NodeSet) result).getPointers().iterator(),
                                            new QName(null, "value"),
                                            context.getRootContext().getCurrentNodePointer().getLocale());
                    children: []
                    pos: 3429
                    length: 200
                  pos: 3415
                  length: 224
                pos: 3384
                length: 255
              - type: return_statement
                fields:
                  text: |-
                    return new PointerIterator(ValueUtils.iterate(result),
                                    new QName(null, "value"),
                                    context.getRootContext().getCurrentNodePointer().getLocale());
                children: []
                pos: 3648
                length: 175
              pos: 3142
              length: 687
          children: []
          pos: 3089
          length: 740
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: PointerIterator
              children: []
              pos: 3855
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private Iterator iterator;
                children: []
                pos: 3901
                length: 26
              - type: field_declaration
                fields:
                  text: private QName qname;
                children: []
                pos: 3936
                length: 20
              - type: field_declaration
                fields:
                  text: private Locale locale;
                children: []
                pos: 3965
                length: 22
              - type: constructor_declaration
                fields:
                  text: |-
                    public PointerIterator(Iterator it, QName qname, Locale locale) {
                                this.iterator = it;
                                this.qname = qname;
                                this.locale = locale;
                            }
                children: []
                pos: 4148
                length: 173
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hasNext
                    children: []
                    pos: 4346
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4331
                    length: 75
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return iterator.hasNext();
                      children: []
                      pos: 4370
                      length: 26
                    pos: 4356
                    length: 50
                children: []
                pos: 4331
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: next
                    children: []
                    pos: 4430
                    length: 4
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4416
                    length: 164
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Object o = iterator.next();
                      children: []
                      pos: 4451
                      length: 27
                    - type: return_statement
                      fields:
                        text: 'return o instanceof Pointer ? o : NodePointer.newNodePointer(qname,
                          o, locale);'
                      children: []
                      pos: 4491
                      length: 79
                    pos: 4437
                    length: 143
                children: []
                pos: 4416
                length: 164
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: remove
                    children: []
                    pos: 4602
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4590
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: throw_statement
                      fields:
                        text: throw new UnsupportedOperationException();
                      children: []
                      pos: 4625
                      length: 42
                    pos: 4611
                    length: 66
                children: []
                pos: 4590
                length: 87
              pos: 3835
              length: 848
          children: []
          pos: 3835
          length: 848
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ValueIterator
              children: []
              pos: 4709
              length: 13
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private Iterator iterator;
                children: []
                pos: 4753
                length: 26
              - type: constructor_declaration
                fields:
                  text: |-
                    public ValueIterator(Iterator it) {
                                this.iterator = it;
                            }
                children: []
                pos: 4789
                length: 77
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hasNext
                    children: []
                    pos: 4891
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4876
                    length: 75
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return iterator.hasNext();
                      children: []
                      pos: 4915
                      length: 26
                    pos: 4901
                    length: 50
                children: []
                pos: 4876
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: next
                    children: []
                    pos: 4975
                    length: 4
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4961
                    length: 197
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Object o = iterator.next();
                      children: []
                      pos: 4996
                      length: 27
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: o instanceof Pointer
                              children: []
                              pos: 5040
                              length: 20
                          children: []
                          pos: 5039
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return ((Pointer) o).getValue();
                          children: []
                          pos: 5080
                          length: 32
                        pos: 5062
                        length: 64
                      pos: 5036
                      length: 90
                    - type: return_statement
                      fields:
                        text: return o;
                      children: []
                      pos: 5139
                      length: 9
                    pos: 4982
                    length: 176
                children: []
                pos: 4961
                length: 197
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: remove
                    children: []
                    pos: 5180
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 5168
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: throw_statement
                      fields:
                        text: throw new UnsupportedOperationException();
                      children: []
                      pos: 5203
                      length: 42
                    pos: 5189
                    length: 66
                children: []
                pos: 5168
                length: 87
              pos: 4689
              length: 572
          children: []
          pos: 4689
          length: 572
        pos: 1611
        length: 3652
    children: []
    pos: 1611
    length: 3652
  pos: 0
  length: 5263
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Expression
        children: []
        pos: 1591
        length: 10
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected static final Double ZERO = new Double(0);
          children: []
          pos: 1609
          length: 51
        - type: field_declaration
          fields:
            text: protected static final Double ONE = new Double(1);
          children: []
          pos: 1665
          length: 50
        - type: field_declaration
          fields:
            text: protected static final Double NOT_A_NUMBER = new Double(Double.NaN);
          children: []
          pos: 1720
          length: 68
        - type: field_declaration
          fields:
            text: private boolean contextDependencyKnown = false;
          children: []
          pos: 1794
          length: 47
        - type: field_declaration
          fields:
            text: private boolean contextDependent;
          children: []
          pos: 1846
          length: 33
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContextDependent
              children: []
              pos: 2040
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2025
              length: 226
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!contextDependencyKnown"
                        children: []
                        pos: 2075
                        length: 23
                    children: []
                    pos: 2074
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: contextDependent = computeContextDependent();
                    children: []
                    pos: 2114
                    length: 45
                  - type: expression_statement
                    fields:
                      text: contextDependencyKnown = true;
                    children: []
                    pos: 2172
                    length: 30
                  pos: 2100
                  length: 112
                pos: 2071
                length: 141
              - type: return_statement
                fields:
                  text: return contextDependent;
                children: []
                pos: 2221
                length: 24
              pos: 2061
              length: 190
          children: []
          pos: 2025
          length: 226
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeContextDependent
              children: []
              pos: 2375
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2351
              length: 50
          children: []
          pos: 2351
          length: 50
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeValue
              children: []
              pos: 2558
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2571
                length: 19
              pos: 2535
              length: 57
          children: []
          pos: 2535
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compute
              children: []
              pos: 2620
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2628
                length: 19
              pos: 2597
              length: 52
          children: []
          pos: 2597
          length: 52
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterate
              children: []
              pos: 2671
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2679
                length: 19
              pos: 2655
              length: 252
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object result = compute(context);
                children: []
                pos: 2710
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: result instanceof EvalContext
                        children: []
                        pos: 2756
                        length: 29
                    children: []
                    pos: 2755
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ValueIterator((EvalContext) result);
                    children: []
                    pos: 2801
                    length: 47
                  pos: 2787
                  length: 71
                pos: 2752
                length: 106
              - type: return_statement
                fields:
                  text: return ValueUtils.iterate(result);
                children: []
                pos: 2867
                length: 34
              pos: 2700
              length: 207
          children: []
          pos: 2655
          length: 252
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iteratePointers
              children: []
              pos: 2929
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 2945
                length: 19
              pos: 2913
              length: 476
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object result = compute(context);
                children: []
                pos: 2976
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: result
                            children: []
                            pos: 3022
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3032
                            length: 4
                        children: []
                        pos: 3022
                        length: 14
                    children: []
                    pos: 3021
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.EMPTY_LIST.iterator();
                    children: []
                    pos: 3052
                    length: 41
                  pos: 3038
                  length: 65
                pos: 3018
                length: 85
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: result instanceof EvalContext
                        children: []
                        pos: 3116
                        length: 29
                    children: []
                    pos: 3115
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return (EvalContext) result;
                    children: []
                    pos: 3161
                    length: 28
                  pos: 3147
                  length: 52
                pos: 3112
                length: 87
              - type: return_statement
                fields:
                  text: |-
                    return new PointerIterator(ValueUtils.iterate(result),
                                    new QName(null, "value"),
                                    context.getRootContext().getCurrentNodePointer().getLocale());
                children: []
                pos: 3208
                length: 175
              pos: 2966
              length: 423
          children: []
          pos: 2913
          length: 476
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: PointerIterator
              children: []
              pos: 3415
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private Iterator iterator;
                children: []
                pos: 3461
                length: 26
              - type: field_declaration
                fields:
                  text: private QName qname;
                children: []
                pos: 3496
                length: 20
              - type: field_declaration
                fields:
                  text: private Locale locale;
                children: []
                pos: 3525
                length: 22
              - type: constructor_declaration
                fields:
                  text: |-
                    public PointerIterator(Iterator it, QName qname, Locale locale) {
                                this.iterator = it;
                                this.qname = qname;
                                this.locale = locale;
                            }
                children: []
                pos: 3708
                length: 173
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hasNext
                    children: []
                    pos: 3906
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 3891
                    length: 75
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return iterator.hasNext();
                      children: []
                      pos: 3930
                      length: 26
                    pos: 3916
                    length: 50
                children: []
                pos: 3891
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: next
                    children: []
                    pos: 3990
                    length: 4
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 3976
                    length: 164
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Object o = iterator.next();
                      children: []
                      pos: 4011
                      length: 27
                    - type: return_statement
                      fields:
                        text: 'return o instanceof Pointer ? o : NodePointer.newNodePointer(qname,
                          o, locale);'
                      children: []
                      pos: 4051
                      length: 79
                    pos: 3997
                    length: 143
                children: []
                pos: 3976
                length: 164
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: remove
                    children: []
                    pos: 4162
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4150
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: throw_statement
                      fields:
                        text: throw new UnsupportedOperationException();
                      children: []
                      pos: 4185
                      length: 42
                    pos: 4171
                    length: 66
                children: []
                pos: 4150
                length: 87
              pos: 3395
              length: 848
          children: []
          pos: 3395
          length: 848
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ValueIterator
              children: []
              pos: 4269
              length: 13
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private Iterator iterator;
                children: []
                pos: 4313
                length: 26
              - type: constructor_declaration
                fields:
                  text: |-
                    public ValueIterator(Iterator it) {
                                this.iterator = it;
                            }
                children: []
                pos: 4349
                length: 77
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hasNext
                    children: []
                    pos: 4451
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4436
                    length: 75
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return iterator.hasNext();
                      children: []
                      pos: 4475
                      length: 26
                    pos: 4461
                    length: 50
                children: []
                pos: 4436
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: next
                    children: []
                    pos: 4535
                    length: 4
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4521
                    length: 197
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Object o = iterator.next();
                      children: []
                      pos: 4556
                      length: 27
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: o instanceof Pointer
                              children: []
                              pos: 4600
                              length: 20
                          children: []
                          pos: 4599
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return ((Pointer) o).getValue();
                          children: []
                          pos: 4640
                          length: 32
                        pos: 4622
                        length: 64
                      pos: 4596
                      length: 90
                    - type: return_statement
                      fields:
                        text: return o;
                      children: []
                      pos: 4699
                      length: 9
                    pos: 4542
                    length: 176
                children: []
                pos: 4521
                length: 197
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: remove
                    children: []
                    pos: 4740
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4728
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: throw_statement
                      fields:
                        text: throw new UnsupportedOperationException();
                      children: []
                      pos: 4763
                      length: 42
                    pos: 4749
                    length: 66
                children: []
                pos: 4728
                length: 87
              pos: 4249
              length: 572
          children: []
          pos: 4249
          length: 572
        pos: 1569
        length: 3254
    children: []
    pos: 1569
    length: 3254
  pos: 0
  length: 4824
text_diff: "--- before\n+++ after\n@@ -16,7 +16,6 @@\n  */\n package org.apache.commons.jxpath.ri.compiler;\n
  \n-import org.apache.commons.jxpath.NodeSet;\n import org.apache.commons.jxpath.Pointer;\n
  import org.apache.commons.jxpath.ri.EvalContext;\n import org.apache.commons.jxpath.ri.model.NodePointer;\n@@
  -75,9 +74,6 @@\n         if (result instanceof EvalContext) {\n             return
  new ValueIterator((EvalContext) result);\n         }\n-        if (result instanceof
  NodeSet) {\n-            return new ValueIterator(((NodeSet) result).getPointers().iterator());\n-
  \       }\n         return ValueUtils.iterate(result);\n     }\n \n@@ -89,11 +85,6
  @@\n         if (result instanceof EvalContext) {\n             return (EvalContext)
  result;\n         }\n-        if (result instanceof NodeSet) {\n-            return
  new PointerIterator(((NodeSet) result).getPointers().iterator(),\n-                    new
  QName(null, \"value\"),\n-                    context.getRootContext().getCurrentNodePointer().getLocale());\n-
  \       }\n         return new PointerIterator(ValueUtils.iterate(result),\n                 new
  QName(null, \"value\"),\n                 context.getRootContext().getCurrentNodePointer().getLocale());\n@@
  -151,4 +142,4 @@\n             throw new UnsupportedOperationException();\n         }\n
  \    }\n-}\n\\ No newline at end of file\n+}\n"
tree_diff: |+
  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [2909,3034]
      parenthesized_expression [2912,2939]
          instanceof_expression: result instanceof NodeSet [2913,2938]
      block [2940,3034]
          return_statement: return new ValueIterator(((NodeSet) result).getPointers().iterator()); [2954,3024]

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [3384,3639]
      parenthesized_expression [3387,3414]
          instanceof_expression: result instanceof NodeSet [3388,3413]
      block [3415,3639]
          return_statement: return new PointerIterator(((NodeSet) result).getPointers().iterator(),
                      new QName(null, "value"),
                      context.getRootContext().getCurrentNodePointer().getLocale()); [3429,3629]

...
