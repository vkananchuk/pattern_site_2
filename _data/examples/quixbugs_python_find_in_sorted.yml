---
language: python
before_tree:
  type: child
  fields: {}
  children:
  - type: method_declaration
    fields:
      name:
        type: identifier
        fields:
          text: find_in_sorted
        children: []
        pos: 4
        length: 14
      parameters:
        type: method_parameters
        fields: {}
        children:
        - type: identifier
          fields:
            text: arr
          children: []
          pos: 19
          length: 3
        pos: 0
        length: 350
      body:
        type: block
        fields: {}
        children:
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: binsearch
              children: []
              pos: 36
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: identifier
                fields:
                  text: start
                children: []
                pos: 46
                length: 5
              pos: 32
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: equals
                    fields:
                      left:
                        type: identifier
                        fields:
                          text: start
                        children: []
                        pos: 70
                        length: 5
                      right:
                        type: identifier
                        fields:
                          text: end
                        children: []
                        pos: 79
                        length: 3
                    children: []
                    pos: 70
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return -1
                    children: []
                    pos: 96
                    length: 9
                  pos: 96
                  length: 9
                pos: 67
                length: 38
              - type: expression_statement
                fields:
                  text: mid = start + (end - start) // 2
                children: []
                pos: 114
                length: 32
              - type: if_statement
                fields:
                  condition:
                    type: less_than
                    fields:
                      left:
                        type: identifier
                        fields:
                          text: x
                        children: []
                        pos: 158
                        length: 1
                      right:
                        type: subscript
                        fields:
                          value:
                            type: identifier
                            fields:
                              text: arr
                            children: []
                            pos: 162
                            length: 3
                          subscript:
                            type: identifier
                            fields:
                              text: mid
                            children: []
                            pos: 166
                            length: 3
                        children: []
                        pos: 162
                        length: 8
                    children: []
                    pos: 158
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return binsearch(start, mid)
                    children: []
                    pos: 184
                    length: 28
                  pos: 184
                  length: 28
                - type: elif_clause
                  fields:
                    condition:
                      type: greater_than
                      fields:
                        left:
                          type: identifier
                          fields:
                            text: x
                          children: []
                          pos: 226
                          length: 1
                        right:
                          type: subscript
                          fields:
                            value:
                              type: identifier
                              fields:
                                text: arr
                              children: []
                              pos: 230
                              length: 3
                            subscript:
                              type: identifier
                              fields:
                                text: mid
                              children: []
                              pos: 234
                              length: 3
                          children: []
                          pos: 230
                          length: 8
                      children: []
                      pos: 226
                      length: 12
                    consequence:
                      type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return binsearch(mid, end)
                        children: []
                        pos: 252
                        length: 26
                      pos: 252
                      length: 26
                  children: []
                  pos: 221
                  length: 57
                - type: else_clause
                  fields:
                    body:
                      type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return mid
                        children: []
                        pos: 305
                        length: 10
                      pos: 305
                      length: 10
                  children: []
                  pos: 287
                  length: 28
                pos: 155
                length: 160
              pos: 67
              length: 248
          children: []
          pos: 32
          length: 283
        - type: return_statement
          fields:
            text: return binsearch(0, len(arr))
          children: []
          pos: 321
          length: 29
        pos: 32
        length: 318
    children: []
    pos: 0
    length: 350
  pos: 0
  length: 351
after_tree:
  type: child
  fields: {}
  children:
  - type: method_declaration
    fields:
      name:
        type: identifier
        fields:
          text: find_in_sorted
        children: []
        pos: 4
        length: 14
      parameters:
        type: method_parameters
        fields: {}
        children:
        - type: identifier
          fields:
            text: arr
          children: []
          pos: 19
          length: 3
        pos: 0
        length: 354
      body:
        type: block
        fields: {}
        children:
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: binsearch
              children: []
              pos: 36
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: identifier
                fields:
                  text: start
                children: []
                pos: 46
                length: 5
              pos: 32
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: equals
                    fields:
                      left:
                        type: identifier
                        fields:
                          text: start
                        children: []
                        pos: 70
                        length: 5
                      right:
                        type: identifier
                        fields:
                          text: end
                        children: []
                        pos: 79
                        length: 3
                    children: []
                    pos: 70
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return -1
                    children: []
                    pos: 96
                    length: 9
                  pos: 96
                  length: 9
                pos: 67
                length: 38
              - type: expression_statement
                fields:
                  text: mid = start + (end - start) // 2
                children: []
                pos: 114
                length: 32
              - type: if_statement
                fields:
                  condition:
                    type: less_than
                    fields:
                      left:
                        type: identifier
                        fields:
                          text: x
                        children: []
                        pos: 158
                        length: 1
                      right:
                        type: subscript
                        fields:
                          value:
                            type: identifier
                            fields:
                              text: arr
                            children: []
                            pos: 162
                            length: 3
                          subscript:
                            type: identifier
                            fields:
                              text: mid
                            children: []
                            pos: 166
                            length: 3
                        children: []
                        pos: 162
                        length: 8
                    children: []
                    pos: 158
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return binsearch(start, mid)
                    children: []
                    pos: 184
                    length: 28
                  pos: 184
                  length: 28
                - type: elif_clause
                  fields:
                    condition:
                      type: greater_than
                      fields:
                        left:
                          type: identifier
                          fields:
                            text: x
                          children: []
                          pos: 226
                          length: 1
                        right:
                          type: subscript
                          fields:
                            value:
                              type: identifier
                              fields:
                                text: arr
                              children: []
                              pos: 230
                              length: 3
                            subscript:
                              type: identifier
                              fields:
                                text: mid
                              children: []
                              pos: 234
                              length: 3
                          children: []
                          pos: 230
                          length: 8
                      children: []
                      pos: 226
                      length: 12
                    consequence:
                      type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return binsearch(mid + 1, end)
                        children: []
                        pos: 252
                        length: 30
                      pos: 252
                      length: 30
                  children: []
                  pos: 221
                  length: 61
                - type: else_clause
                  fields:
                    body:
                      type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return mid
                        children: []
                        pos: 309
                        length: 10
                      pos: 309
                      length: 10
                  children: []
                  pos: 291
                  length: 28
                pos: 155
                length: 164
              pos: 67
              length: 252
          children: []
          pos: 32
          length: 287
        - type: return_statement
          fields:
            text: return binsearch(0, len(arr))
          children: []
          pos: 325
          length: 29
        pos: 32
        length: 322
    children: []
    pos: 0
    length: 354
  pos: 0
  length: 355
text_diff: "--- before\n+++ after\n@@ -6,7 +6,7 @@\n         if x < arr[mid]:\n             return
  binsearch(start, mid)\n         elif x > arr[mid]:\n-            return binsearch(mid,
  end)\n+            return binsearch(mid + 1, end)\n         else:\n             return
  mid\n \n"
tree_diff: |+
  New cluster:
  UPDATE from return binsearch(mid, end) to return binsearch(mid + 1, end)
  ------------
  ===
  update-node
  ---
  return_statement: return binsearch(mid, end) [252,278]
  replace return binsearch(mid, end) by return binsearch(mid + 1, end)

...
