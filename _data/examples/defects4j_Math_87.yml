---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: SimplexTableau
        children: []
        pos: 2412
        length: 14
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -1369660067587938365L;
          children: []
          pos: 2502
          length: 67
        - type: field_declaration
          fields:
            text: private final LinearObjectiveFunction f;
          children: []
          pos: 2613
          length: 40
        - type: field_declaration
          fields:
            text: private final Collection<LinearConstraint> constraints;
          children: []
          pos: 2690
          length: 55
        - type: field_declaration
          fields:
            text: private final boolean restrictToNonNegative;
          children: []
          pos: 2820
          length: 44
        - type: field_declaration
          fields:
            text: protected transient RealMatrix tableau;
          children: []
          pos: 2897
          length: 39
        - type: field_declaration
          fields:
            text: protected final int numDecisionVariables;
          children: []
          pos: 2983
          length: 41
        - type: field_declaration
          fields:
            text: protected final int numSlackVariables;
          children: []
          pos: 3068
          length: 38
        - type: field_declaration
          fields:
            text: protected int numArtificialVariables;
          children: []
          pos: 3155
          length: 37
        - type: field_declaration
          fields:
            text: protected final double epsilon;
          children: []
          pos: 3267
          length: 31
        - type: constructor_declaration
          fields:
            text: |-
              SimplexTableau(final LinearObjectiveFunction f,
                                 final Collection<LinearConstraint> constraints,
                                 final GoalType goalType, final boolean restrictToNonNegative,
                                 final double epsilon) {
                      this.f                      = f;
                      this.constraints            = constraints;
                      this.restrictToNonNegative  = restrictToNonNegative;
                      this.epsilon                = epsilon;
                      this.numDecisionVariables   = getNumVariables() + (restrictToNonNegative ? 0 : 1);
                      this.numSlackVariables      = getConstraintTypeCounts(Relationship.LEQ) +
                                                    getConstraintTypeCounts(Relationship.GEQ);
                      this.numArtificialVariables = getConstraintTypeCounts(Relationship.EQ) +
                                                    getConstraintTypeCounts(Relationship.GEQ);
                      this.tableau = new RealMatrixImpl(createTableau(goalType == GoalType.MAXIMIZE));
                      initialize();
                  }
          children: []
          pos: 3746
          length: 971
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createTableau
              children: []
              pos: 4903
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final boolean maximize
                children: []
                pos: 4917
                length: 22
              pos: 4882
              length: 2922
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<LinearConstraint> constraints = getNormalizedConstraints();
                children: []
                pos: 4999
                length: 64
              - type: local_variable_declaration
                fields:
                  text: |-
                    int width = numDecisionVariables + numSlackVariables +
                            numArtificialVariables + getNumObjectiveFunctions() + 1;
                children: []
                pos: 5072
                length: 119
              - type: local_variable_declaration
                fields:
                  text: int height = constraints.size() + getNumObjectiveFunctions();
                children: []
                pos: 5218
                length: 61
              - type: local_variable_declaration
                fields:
                  text: double[][] matrix = new double[height][width];
                children: []
                pos: 5288
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: getNumObjectiveFunctions()
                            children: []
                            pos: 5398
                            length: 26
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '2'
                            children: []
                            pos: 5428
                            length: 1
                        children: []
                        pos: 5398
                        length: 31
                    children: []
                    pos: 5397
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: matrix[0][0] = -1;
                    children: []
                    pos: 5445
                    length: 18
                  pos: 5431
                  length: 42
                pos: 5394
                length: 79
              - type: local_variable_declaration
                fields:
                  text: 'int zIndex = (getNumObjectiveFunctions() == 1) ? 0 : 1;'
                children: []
                pos: 5482
                length: 55
              - type: expression_statement
                fields:
                  text: 'matrix[zIndex][zIndex] = maximize ? 1 : -1;'
                children: []
                pos: 5546
                length: 43
              - type: local_variable_declaration
                fields:
                  text: |-
                    RealVector objectiveCoefficients =
                                maximize ? f.getCoefficients().mapMultiply(-1) : f.getCoefficients();
                children: []
                pos: 5598
                length: 116
              - type: expression_statement
                fields:
                  text: copyArray(objectiveCoefficients.getData(), matrix[zIndex],
                    getNumObjectiveFunctions());
                children: []
                pos: 5727
                length: 87
              - type: expression_statement
                fields:
                  text: |-
                    matrix[zIndex][width - 1] =
                                    maximize ? f.getConstantTerm() : -1 * f.getConstantTerm();
                children: []
                pos: 5827
                length: 102
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!restrictToNonNegative"
                        children: []
                        pos: 5951
                        length: 22
                    children: []
                    pos: 5950
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        matrix[zIndex][getSlackVariableOffset() - 1] =
                                                getInvertedCoeffiecientSum(objectiveCoefficients);
                    children: []
                    pos: 5997
                    length: 121
                  pos: 5975
                  length: 161
                pos: 5947
                length: 189
              - type: local_variable_declaration
                fields:
                  text: int slackVar = 0;
                children: []
                pos: 6204
                length: 17
              - type: local_variable_declaration
                fields:
                  text: int artificialVar = 0;
                children: []
                pos: 6238
                length: 22
              - type: for_statement
                fields:
                  text: "for (int i = 0; i < constraints.size(); i++) {\n                    LinearConstraint
                    constraint = constraints.get(i);\n                    int row
                    = getNumObjectiveFunctions() + i;\n\n                    // decision
                    variable coefficients\n                    copyArray(constraint.getCoefficients().getData(),
                    matrix[row], 1);\n\n                    // x-\n                    if
                    (!restrictToNonNegative) {\n                        matrix[row][getSlackVariableOffset()
                    - 1] =\n                            getInvertedCoeffiecientSum(constraint.getCoefficients());\n
                    \                   }\n\n                    // RHS\n                    matrix[row][width
                    - 1] = constraint.getValue();\n\n                    // slack
                    variables\n                    if (constraint.getRelationship()
                    == Relationship.LEQ) {\n                        matrix[row][getSlackVariableOffset()
                    + slackVar++] = 1;  // slack\n                    } else if (constraint.getRelationship()
                    == Relationship.GEQ) {\n                        matrix[row][getSlackVariableOffset()
                    + slackVar++] = -1; // excess\n                    }\n\n                    //
                    artificial variables\n                    if ((constraint.getRelationship()
                    == Relationship.EQ) ||\n                        (constraint.getRelationship()
                    == Relationship.GEQ)) {\n                        matrix[0][getArtificialVariableOffset()
                    + artificialVar] = 1; \n                        matrix[row][getArtificialVariableOffset()
                    + artificialVar++] = 1; \n                    }\n                }"
                children: []
                pos: 6277
                length: 1489
              - type: return_statement
                fields:
                  text: return matrix;
                children: []
                pos: 7784
                length: 14
              pos: 4941
              length: 2863
          children: []
          pos: 4882
          length: 2922
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumVariables
              children: []
              pos: 7901
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7890
              length: 87
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return f.getCoefficients().getDimension();
                children: []
                pos: 7929
                length: 42
              pos: 7919
              length: 58
          children: []
          pos: 7890
          length: 87
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNormalizedConstraints
              children: []
              pos: 8157
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8127
              length: 289
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<LinearConstraint> normalized = new ArrayList<LinearConstraint>();
                children: []
                pos: 8194
                length: 70
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (LinearConstraint constraint : constraints) {
                                normalized.add(normalize(constraint));
                            }
                children: []
                pos: 8273
                length: 110
              - type: return_statement
                fields:
                  text: return normalized;
                children: []
                pos: 8392
                length: 18
              pos: 8184
              length: 232
          children: []
          pos: 8127
          length: 289
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: normalize
              children: []
              pos: 8619
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final LinearConstraint constraint
                children: []
                pos: 8629
                length: 33
              pos: 8594
              length: 533
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: constraint.getValue()
                            children: []
                            pos: 8678
                            length: 21
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 8702
                            length: 1
                        children: []
                        pos: 8678
                        length: 25
                    children: []
                    pos: 8677
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return new LinearConstraint(constraint.getCoefficients().mapMultiply(-1),
                                                                constraint.getRelationship().oppositeRelationship(),
                                                                -1 * constraint.getValue());
                    children: []
                    pos: 8719
                    length: 235
                  pos: 8705
                  length: 259
                pos: 8674
                length: 290
              - type: return_statement
                fields:
                  text: "return new LinearConstraint(constraint.getCoefficients(),
                    \n                                    constraint.getRelationship(),
                    constraint.getValue());"
                children: []
                pos: 8973
                length: 148
              pos: 8664
              length: 463
          children: []
          pos: 8594
          length: 533
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumObjectiveFunctions
              children: []
              pos: 9277
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9257
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return this.numArtificialVariables > 0 ? 2 : 1;'
                children: []
                pos: 9314
                length: 47
              pos: 9304
              length: 63
          children: []
          pos: 9257
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getConstraintTypeCounts
              children: []
              pos: 9595
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Relationship relationship
                children: []
                pos: 9619
                length: 31
              pos: 9583
              length: 298
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 0;
                children: []
                pos: 9662
                length: 14
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final LinearConstraint constraint : constraints) {
                                if (constraint.getRelationship() == relationship) {
                                    ++count;
                                }
                            }
                children: []
                pos: 9685
                length: 168
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 9862
                length: 13
              pos: 9652
              length: 229
          children: []
          pos: 9583
          length: 298
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: initialize
              children: []
              pos: 10059
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10046
              length: 258
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int artificialVar = 0; artificialVar < numArtificialVariables; artificialVar++) {
                                int row = getBasicRow(getArtificialVariableOffset() + artificialVar);
                                subtractRow(0, row, 1.0);
                            }
                children: []
                pos: 10082
                length: 216
              pos: 10072
              length: 232
          children: []
          pos: 10046
          length: 258
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getInvertedCoeffiecientSum
              children: []
              pos: 10545
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final RealVector coefficients
                children: []
                pos: 10572
                length: 29
              pos: 10521
              length: 235
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: double sum = 0;
                children: []
                pos: 10613
                length: 15
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (double coefficient : coefficients.getData()) {
                                sum -= coefficient;
                            }
                children: []
                pos: 10637
                length: 93
              - type: return_statement
                fields:
                  text: return sum;
                children: []
                pos: 10739
                length: 11
              pos: 10603
              length: 153
          children: []
          pos: 10521
          length: 235
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBasicRow
              children: []
              pos: 10977
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int col
                children: []
                pos: 10989
                length: 13
              pos: 10961
              length: 410
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Integer row = null;
                children: []
                pos: 11014
                length: 19
              - type: for_statement
                fields:
                  text: |-
                    for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
                                if (MathUtils.equals(getEntry(i, col), 1.0, epsilon) && (row == null)) {
                                    row = i;
                                } else if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                                    return null;
                                }
                            }
                children: []
                pos: 11042
                length: 303
              - type: return_statement
                fields:
                  text: return row;
                children: []
                pos: 11354
                length: 11
              pos: 11004
              length: 367
          children: []
          pos: 10961
          length: 410
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: discardArtificialVariables
              children: []
              pos: 11498
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 11483
              length: 610
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numArtificialVariables
                            children: []
                            pos: 11541
                            length: 22
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11567
                            length: 1
                        children: []
                        pos: 11541
                        length: 27
                    children: []
                    pos: 11540
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 11584
                    length: 7
                  pos: 11570
                  length: 31
                pos: 11537
                length: 64
              - type: local_variable_declaration
                fields:
                  text: int width = getWidth() - numArtificialVariables - 1;
                children: []
                pos: 11610
                length: 52
              - type: local_variable_declaration
                fields:
                  text: int height = getHeight() - 1;
                children: []
                pos: 11671
                length: 29
              - type: local_variable_declaration
                fields:
                  text: double[][] matrix = new double[height][width];
                children: []
                pos: 11709
                length: 46
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < height; i++) {
                                for (int j = 0; j < width - 1; j++) {
                                    matrix[i][j] = getEntry(i + 1, j + 1);
                                }
                                matrix[i][width - 1] = getEntry(i + 1, getRhsOffset());
                            }
                children: []
                pos: 11764
                length: 231
              - type: expression_statement
                fields:
                  text: this.tableau = new RealMatrixImpl(matrix);
                children: []
                pos: 12004
                length: 42
              - type: expression_statement
                fields:
                  text: this.numArtificialVariables = 0;
                children: []
                pos: 12055
                length: 32
              pos: 11527
              length: 566
          children: []
          pos: 11483
          length: 610
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: copyArray
              children: []
              pos: 12252
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final double[] src
                children: []
                pos: 12262
                length: 18
              pos: 12239
              length: 198
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: System.arraycopy(src, 0, dest, getNumObjectiveFunctions(),
                    src.length);
                children: []
                pos: 12359
                length: 71
              pos: 12349
              length: 88
          children: []
          pos: 12239
          length: 198
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSolution
              children: []
              pos: 12658
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 12629
              length: 1082
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: double[] coefficients = new double[getOriginalNumDecisionVariables()];
                children: []
                pos: 12682
                length: 70
              - type: local_variable_declaration
                fields:
                  text: |-
                    Integer basicRow =
                                getBasicRow(getNumObjectiveFunctions() + getOriginalNumDecisionVariables());
                children: []
                pos: 12761
                length: 107
              - type: local_variable_declaration
                fields:
                  text: 'double mostNegative = basicRow == null ? 0 : getEntry(basicRow,
                    getRhsOffset());'
                children: []
                pos: 12877
                length: 80
              - type: local_variable_declaration
                fields:
                  text: Set<Integer> basicRows = new HashSet<Integer>();
                children: []
                pos: 12966
                length: 48
              - type: for_statement
                fields:
                  text: "for (int i = 0; i < coefficients.length; i++) {\n            basicRow
                    = getBasicRow(getNumObjectiveFunctions() + i);\n            if
                    (basicRows.contains(basicRow)) {\n                // if multiple
                    variables can take a given value \n                // then we
                    choose the first and set the rest equal to 0\n                coefficients[i]
                    = 0;\n            } else {\n                basicRows.add(basicRow);\n
                    \               coefficients[i] =\n                    (basicRow
                    == null ? 0 : getEntry(basicRow, getRhsOffset())) -\n                    (restrictToNonNegative
                    ? 0 : mostNegative);\n            }\n        }"
                children: []
                pos: 13023
                length: 603
              - type: return_statement
                fields:
                  text: return new RealPointValuePair(coefficients, f.getValue(coefficients));
                children: []
                pos: 13635
                length: 70
              pos: 12672
              length: 1039
          children: []
          pos: 12629
          length: 1082
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: divideRow
              children: []
              pos: 14039
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int dividendRow
                children: []
                pos: 14049
                length: 21
              pos: 14024
              length: 224
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int j = 0; j < getWidth(); j++) {
                                tableau.setEntry(dividendRow, j, tableau.getEntry(dividendRow, j) / divisor);
                            }
                children: []
                pos: 14104
                length: 138
              pos: 14094
              length: 154
          children: []
          pos: 14024
          length: 224
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: subtractRow
              children: []
              pos: 14608
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int minuendRow
                children: []
                pos: 14620
                length: 20
              pos: 14593
              length: 347
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int j = 0; j < getWidth(); j++) {
                                tableau.setEntry(minuendRow, j, tableau.getEntry(minuendRow, j) -
                                                 multiple * tableau.getEntry(subtrahendRow, j));
                            }
                children: []
                pos: 14731
                length: 203
              pos: 14721
              length: 219
          children: []
          pos: 14593
          length: 347
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getWidth
              children: []
              pos: 15055
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15035
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getColumnDimension();
                children: []
                pos: 15076
                length: 36
              pos: 15066
              length: 52
          children: []
          pos: 15035
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getHeight
              children: []
              pos: 15235
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15215
              length: 81
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getRowDimension();
                children: []
                pos: 15257
                length: 33
              pos: 15247
              length: 49
          children: []
          pos: 15215
          length: 81
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getEntry
              children: []
              pos: 15470
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int row
                children: []
                pos: 15479
                length: 13
              pos: 15447
              length: 118
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getEntry(row, column);
                children: []
                pos: 15522
                length: 37
              pos: 15512
              length: 53
          children: []
          pos: 15447
          length: 118
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setEntry
              children: []
              pos: 15733
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int row
                children: []
                pos: 15742
                length: 13
              pos: 15712
              length: 170
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: tableau.setEntry(row, column, value);
                children: []
                pos: 15839
                length: 37
              pos: 15829
              length: 53
          children: []
          pos: 15712
          length: 170
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSlackVariableOffset
              children: []
              pos: 16025
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16005
              length: 118
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNumObjectiveFunctions() + numDecisionVariables;
                children: []
                pos: 16060
                length: 57
              pos: 16050
              length: 73
          children: []
          pos: 16005
          length: 118
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getArtificialVariableOffset
              children: []
              pos: 16276
              length: 27
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16256
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNumObjectiveFunctions() + numDecisionVariables +
                    numSlackVariables;
                children: []
                pos: 16316
                length: 77
              pos: 16306
              length: 93
          children: []
          pos: 16256
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRhsOffset
              children: []
              pos: 16532
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16512
              length: 73
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getWidth() - 1;
                children: []
                pos: 16557
                length: 22
              pos: 16547
              length: 38
          children: []
          pos: 16512
          length: 73
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumDecisionVariables
              children: []
              pos: 16966
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16946
              length: 90
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return numDecisionVariables;
                children: []
                pos: 17002
                length: 28
              pos: 16992
              length: 44
          children: []
          pos: 16946
          length: 90
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOriginalNumDecisionVariables
              children: []
              pos: 17224
              length: 31
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17204
              length: 149
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return restrictToNonNegative ? numDecisionVariables : numDecisionVariables
                    - 1;'
                children: []
                pos: 17268
                length: 79
              pos: 17258
              length: 95
          children: []
          pos: 17204
          length: 149
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumSlackVariables
              children: []
              pos: 17478
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17458
              length: 84
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return numSlackVariables;
                children: []
                pos: 17511
                length: 25
              pos: 17501
              length: 41
          children: []
          pos: 17458
          length: 84
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumArtificialVariables
              children: []
              pos: 17677
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17657
              length: 94
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return numArtificialVariables;
                children: []
                pos: 17715
                length: 30
              pos: 17705
              length: 46
          children: []
          pos: 17657
          length: 94
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getData
              children: []
              pos: 17857
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17830
              length: 78
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getData();
                children: []
                pos: 17877
                length: 25
              pos: 17867
              length: 41
          children: []
          pos: 17830
          length: 78
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 17968
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object other
                children: []
                pos: 17975
                length: 12
              pos: 17939
              length: 836
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: this
                            fields: {}
                            children: []
                            pos: 18002
                            length: 4
                          right:
                            type: identifier
                            fields:
                              text: other
                            children: []
                            pos: 18010
                            length: 5
                        children: []
                        pos: 18002
                        length: 13
                    children: []
                    pos: 18001
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 18028
                    length: 12
                  pos: 18017
                  length: 31
                pos: 17998
                length: 50
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: other
                            children: []
                            pos: 18060
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18069
                            length: 4
                        children: []
                        pos: 18060
                        length: 13
                    children: []
                    pos: 18059
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 18085
                    length: 13
                  pos: 18075
                  length: 31
                pos: 18056
                length: 50
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: SimplexTableau rhs = (SimplexTableau) other;
                      children: []
                      pos: 18131
                      length: 44
                    - type: return_statement
                      fields:
                        text: |-
                          return (restrictToNonNegative  == rhs.restrictToNonNegative) &&
                                           (numDecisionVariables   == rhs.numDecisionVariables) &&
                                           (numSlackVariables      == rhs.numSlackVariables) &&
                                           (numArtificialVariables == rhs.numArtificialVariables) &&
                                           (epsilon                == rhs.epsilon) &&
                                           f.equals(rhs.f) &&
                                           constraints.equals(rhs.constraints) &&
                                           tableau.equals(rhs.tableau);
                      children: []
                      pos: 18186
                      length: 479
                    pos: 18118
                    length: 556
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (ClassCastException ex) {
                                    // ignore exception
                                    return false;
                                }
                      children: []
                      pos: 18675
                      length: 93
                    pos: 18114
                    length: 654
                children: []
                pos: 18114
                length: 654
              pos: 17989
              length: 786
          children: []
          pos: 17939
          length: 836
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hashCode
              children: []
              pos: 18835
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18810
              length: 380
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return Boolean.valueOf(restrictToNonNegative).hashCode() ^
                                   numDecisionVariables ^
                                   numSlackVariables ^
                                   numArtificialVariables ^
                                   Double.valueOf(epsilon).hashCode() ^
                                   f.hashCode() ^
                                   constraints.hashCode() ^
                                   tableau.hashCode();
                children: []
                pos: 18856
                length: 328
              pos: 18846
              length: 344
          children: []
          pos: 18810
          length: 380
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeObject
              children: []
              pos: 19370
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: ObjectOutputStream oos
                children: []
                pos: 19382
                length: 22
              pos: 19357
              length: 172
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: oos.defaultWriteObject();
                children: []
                pos: 19443
                length: 25
              - type: expression_statement
                fields:
                  text: MatrixUtils.serializeRealMatrix(tableau, oos);
                children: []
                pos: 19477
                length: 46
              pos: 19433
              length: 96
          children: []
          pos: 19357
          length: 172
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: readObject
              children: []
              pos: 19799
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: ObjectInputStream ois
                children: []
                pos: 19810
                length: 21
              pos: 19786
              length: 201
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: ois.defaultReadObject();
                children: []
                pos: 19892
                length: 24
              - type: expression_statement
                fields:
                  text: MatrixUtils.deserializeRealMatrix(this, "tableau", ois);
                children: []
                pos: 19925
                length: 56
              pos: 19882
              length: 105
          children: []
          pos: 19786
          length: 201
        pos: 2406
        length: 17583
    children: []
    pos: 2406
    length: 17583
  pos: 0
  length: 19990
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: SimplexTableau
        children: []
        pos: 2412
        length: 14
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -1369660067587938365L;
          children: []
          pos: 2502
          length: 67
        - type: field_declaration
          fields:
            text: private final LinearObjectiveFunction f;
          children: []
          pos: 2613
          length: 40
        - type: field_declaration
          fields:
            text: private final Collection<LinearConstraint> constraints;
          children: []
          pos: 2690
          length: 55
        - type: field_declaration
          fields:
            text: private final boolean restrictToNonNegative;
          children: []
          pos: 2820
          length: 44
        - type: field_declaration
          fields:
            text: protected transient RealMatrix tableau;
          children: []
          pos: 2897
          length: 39
        - type: field_declaration
          fields:
            text: protected final int numDecisionVariables;
          children: []
          pos: 2983
          length: 41
        - type: field_declaration
          fields:
            text: protected final int numSlackVariables;
          children: []
          pos: 3068
          length: 38
        - type: field_declaration
          fields:
            text: protected int numArtificialVariables;
          children: []
          pos: 3155
          length: 37
        - type: field_declaration
          fields:
            text: protected final double epsilon;
          children: []
          pos: 3267
          length: 31
        - type: constructor_declaration
          fields:
            text: |-
              SimplexTableau(final LinearObjectiveFunction f,
                                 final Collection<LinearConstraint> constraints,
                                 final GoalType goalType, final boolean restrictToNonNegative,
                                 final double epsilon) {
                      this.f                      = f;
                      this.constraints            = constraints;
                      this.restrictToNonNegative  = restrictToNonNegative;
                      this.epsilon                = epsilon;
                      this.numDecisionVariables   = getNumVariables() + (restrictToNonNegative ? 0 : 1);
                      this.numSlackVariables      = getConstraintTypeCounts(Relationship.LEQ) +
                                                    getConstraintTypeCounts(Relationship.GEQ);
                      this.numArtificialVariables = getConstraintTypeCounts(Relationship.EQ) +
                                                    getConstraintTypeCounts(Relationship.GEQ);
                      this.tableau = new RealMatrixImpl(createTableau(goalType == GoalType.MAXIMIZE));
                      initialize();
                  }
          children: []
          pos: 3746
          length: 971
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createTableau
              children: []
              pos: 4903
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final boolean maximize
                children: []
                pos: 4917
                length: 22
              pos: 4882
              length: 2922
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<LinearConstraint> constraints = getNormalizedConstraints();
                children: []
                pos: 4999
                length: 64
              - type: local_variable_declaration
                fields:
                  text: |-
                    int width = numDecisionVariables + numSlackVariables +
                            numArtificialVariables + getNumObjectiveFunctions() + 1;
                children: []
                pos: 5072
                length: 119
              - type: local_variable_declaration
                fields:
                  text: int height = constraints.size() + getNumObjectiveFunctions();
                children: []
                pos: 5218
                length: 61
              - type: local_variable_declaration
                fields:
                  text: double[][] matrix = new double[height][width];
                children: []
                pos: 5288
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: getNumObjectiveFunctions()
                            children: []
                            pos: 5398
                            length: 26
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '2'
                            children: []
                            pos: 5428
                            length: 1
                        children: []
                        pos: 5398
                        length: 31
                    children: []
                    pos: 5397
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: matrix[0][0] = -1;
                    children: []
                    pos: 5445
                    length: 18
                  pos: 5431
                  length: 42
                pos: 5394
                length: 79
              - type: local_variable_declaration
                fields:
                  text: 'int zIndex = (getNumObjectiveFunctions() == 1) ? 0 : 1;'
                children: []
                pos: 5482
                length: 55
              - type: expression_statement
                fields:
                  text: 'matrix[zIndex][zIndex] = maximize ? 1 : -1;'
                children: []
                pos: 5546
                length: 43
              - type: local_variable_declaration
                fields:
                  text: |-
                    RealVector objectiveCoefficients =
                                maximize ? f.getCoefficients().mapMultiply(-1) : f.getCoefficients();
                children: []
                pos: 5598
                length: 116
              - type: expression_statement
                fields:
                  text: copyArray(objectiveCoefficients.getData(), matrix[zIndex],
                    getNumObjectiveFunctions());
                children: []
                pos: 5727
                length: 87
              - type: expression_statement
                fields:
                  text: |-
                    matrix[zIndex][width - 1] =
                                    maximize ? f.getConstantTerm() : -1 * f.getConstantTerm();
                children: []
                pos: 5827
                length: 102
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!restrictToNonNegative"
                        children: []
                        pos: 5951
                        length: 22
                    children: []
                    pos: 5950
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        matrix[zIndex][getSlackVariableOffset() - 1] =
                                                getInvertedCoeffiecientSum(objectiveCoefficients);
                    children: []
                    pos: 5997
                    length: 121
                  pos: 5975
                  length: 161
                pos: 5947
                length: 189
              - type: local_variable_declaration
                fields:
                  text: int slackVar = 0;
                children: []
                pos: 6204
                length: 17
              - type: local_variable_declaration
                fields:
                  text: int artificialVar = 0;
                children: []
                pos: 6238
                length: 22
              - type: for_statement
                fields:
                  text: "for (int i = 0; i < constraints.size(); i++) {\n                    LinearConstraint
                    constraint = constraints.get(i);\n                    int row
                    = getNumObjectiveFunctions() + i;\n\n                    // decision
                    variable coefficients\n                    copyArray(constraint.getCoefficients().getData(),
                    matrix[row], 1);\n\n                    // x-\n                    if
                    (!restrictToNonNegative) {\n                        matrix[row][getSlackVariableOffset()
                    - 1] =\n                            getInvertedCoeffiecientSum(constraint.getCoefficients());\n
                    \                   }\n\n                    // RHS\n                    matrix[row][width
                    - 1] = constraint.getValue();\n\n                    // slack
                    variables\n                    if (constraint.getRelationship()
                    == Relationship.LEQ) {\n                        matrix[row][getSlackVariableOffset()
                    + slackVar++] = 1;  // slack\n                    } else if (constraint.getRelationship()
                    == Relationship.GEQ) {\n                        matrix[row][getSlackVariableOffset()
                    + slackVar++] = -1; // excess\n                    }\n\n                    //
                    artificial variables\n                    if ((constraint.getRelationship()
                    == Relationship.EQ) ||\n                        (constraint.getRelationship()
                    == Relationship.GEQ)) {\n                        matrix[0][getArtificialVariableOffset()
                    + artificialVar] = 1; \n                        matrix[row][getArtificialVariableOffset()
                    + artificialVar++] = 1; \n                    }\n                }"
                children: []
                pos: 6277
                length: 1489
              - type: return_statement
                fields:
                  text: return matrix;
                children: []
                pos: 7784
                length: 14
              pos: 4941
              length: 2863
          children: []
          pos: 4882
          length: 2922
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumVariables
              children: []
              pos: 7901
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7890
              length: 87
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return f.getCoefficients().getDimension();
                children: []
                pos: 7929
                length: 42
              pos: 7919
              length: 58
          children: []
          pos: 7890
          length: 87
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNormalizedConstraints
              children: []
              pos: 8157
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8127
              length: 289
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<LinearConstraint> normalized = new ArrayList<LinearConstraint>();
                children: []
                pos: 8194
                length: 70
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (LinearConstraint constraint : constraints) {
                                normalized.add(normalize(constraint));
                            }
                children: []
                pos: 8273
                length: 110
              - type: return_statement
                fields:
                  text: return normalized;
                children: []
                pos: 8392
                length: 18
              pos: 8184
              length: 232
          children: []
          pos: 8127
          length: 289
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: normalize
              children: []
              pos: 8619
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final LinearConstraint constraint
                children: []
                pos: 8629
                length: 33
              pos: 8594
              length: 533
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: constraint.getValue()
                            children: []
                            pos: 8678
                            length: 21
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 8702
                            length: 1
                        children: []
                        pos: 8678
                        length: 25
                    children: []
                    pos: 8677
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return new LinearConstraint(constraint.getCoefficients().mapMultiply(-1),
                                                                constraint.getRelationship().oppositeRelationship(),
                                                                -1 * constraint.getValue());
                    children: []
                    pos: 8719
                    length: 235
                  pos: 8705
                  length: 259
                pos: 8674
                length: 290
              - type: return_statement
                fields:
                  text: "return new LinearConstraint(constraint.getCoefficients(),
                    \n                                    constraint.getRelationship(),
                    constraint.getValue());"
                children: []
                pos: 8973
                length: 148
              pos: 8664
              length: 463
          children: []
          pos: 8594
          length: 533
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumObjectiveFunctions
              children: []
              pos: 9277
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9257
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return this.numArtificialVariables > 0 ? 2 : 1;'
                children: []
                pos: 9314
                length: 47
              pos: 9304
              length: 63
          children: []
          pos: 9257
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getConstraintTypeCounts
              children: []
              pos: 9595
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Relationship relationship
                children: []
                pos: 9619
                length: 31
              pos: 9583
              length: 298
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 0;
                children: []
                pos: 9662
                length: 14
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final LinearConstraint constraint : constraints) {
                                if (constraint.getRelationship() == relationship) {
                                    ++count;
                                }
                            }
                children: []
                pos: 9685
                length: 168
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 9862
                length: 13
              pos: 9652
              length: 229
          children: []
          pos: 9583
          length: 298
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: initialize
              children: []
              pos: 10059
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10046
              length: 258
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int artificialVar = 0; artificialVar < numArtificialVariables; artificialVar++) {
                                int row = getBasicRow(getArtificialVariableOffset() + artificialVar);
                                subtractRow(0, row, 1.0);
                            }
                children: []
                pos: 10082
                length: 216
              pos: 10072
              length: 232
          children: []
          pos: 10046
          length: 258
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getInvertedCoeffiecientSum
              children: []
              pos: 10545
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final RealVector coefficients
                children: []
                pos: 10572
                length: 29
              pos: 10521
              length: 235
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: double sum = 0;
                children: []
                pos: 10613
                length: 15
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (double coefficient : coefficients.getData()) {
                                sum -= coefficient;
                            }
                children: []
                pos: 10637
                length: 93
              - type: return_statement
                fields:
                  text: return sum;
                children: []
                pos: 10739
                length: 11
              pos: 10603
              length: 153
          children: []
          pos: 10521
          length: 235
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBasicRow
              children: []
              pos: 10977
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int col
                children: []
                pos: 10989
                length: 13
              pos: 10961
              length: 396
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Integer row = null;
                children: []
                pos: 11014
                length: 19
              - type: for_statement
                fields:
                  text: |-
                    for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
                                if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                                    if (row == null) {
                                    row = i;
                                    } else {
                                    return null;
                                    }
                                }
                            }
                children: []
                pos: 11042
                length: 289
              - type: return_statement
                fields:
                  text: return row;
                children: []
                pos: 11340
                length: 11
              pos: 11004
              length: 353
          children: []
          pos: 10961
          length: 396
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: discardArtificialVariables
              children: []
              pos: 11484
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 11469
              length: 610
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numArtificialVariables
                            children: []
                            pos: 11527
                            length: 22
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11553
                            length: 1
                        children: []
                        pos: 11527
                        length: 27
                    children: []
                    pos: 11526
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 11570
                    length: 7
                  pos: 11556
                  length: 31
                pos: 11523
                length: 64
              - type: local_variable_declaration
                fields:
                  text: int width = getWidth() - numArtificialVariables - 1;
                children: []
                pos: 11596
                length: 52
              - type: local_variable_declaration
                fields:
                  text: int height = getHeight() - 1;
                children: []
                pos: 11657
                length: 29
              - type: local_variable_declaration
                fields:
                  text: double[][] matrix = new double[height][width];
                children: []
                pos: 11695
                length: 46
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < height; i++) {
                                for (int j = 0; j < width - 1; j++) {
                                    matrix[i][j] = getEntry(i + 1, j + 1);
                                }
                                matrix[i][width - 1] = getEntry(i + 1, getRhsOffset());
                            }
                children: []
                pos: 11750
                length: 231
              - type: expression_statement
                fields:
                  text: this.tableau = new RealMatrixImpl(matrix);
                children: []
                pos: 11990
                length: 42
              - type: expression_statement
                fields:
                  text: this.numArtificialVariables = 0;
                children: []
                pos: 12041
                length: 32
              pos: 11513
              length: 566
          children: []
          pos: 11469
          length: 610
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: copyArray
              children: []
              pos: 12238
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final double[] src
                children: []
                pos: 12248
                length: 18
              pos: 12225
              length: 198
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: System.arraycopy(src, 0, dest, getNumObjectiveFunctions(),
                    src.length);
                children: []
                pos: 12345
                length: 71
              pos: 12335
              length: 88
          children: []
          pos: 12225
          length: 198
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSolution
              children: []
              pos: 12644
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 12615
              length: 1082
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: double[] coefficients = new double[getOriginalNumDecisionVariables()];
                children: []
                pos: 12668
                length: 70
              - type: local_variable_declaration
                fields:
                  text: |-
                    Integer basicRow =
                                getBasicRow(getNumObjectiveFunctions() + getOriginalNumDecisionVariables());
                children: []
                pos: 12747
                length: 107
              - type: local_variable_declaration
                fields:
                  text: 'double mostNegative = basicRow == null ? 0 : getEntry(basicRow,
                    getRhsOffset());'
                children: []
                pos: 12863
                length: 80
              - type: local_variable_declaration
                fields:
                  text: Set<Integer> basicRows = new HashSet<Integer>();
                children: []
                pos: 12952
                length: 48
              - type: for_statement
                fields:
                  text: "for (int i = 0; i < coefficients.length; i++) {\n            basicRow
                    = getBasicRow(getNumObjectiveFunctions() + i);\n            if
                    (basicRows.contains(basicRow)) {\n                // if multiple
                    variables can take a given value \n                // then we
                    choose the first and set the rest equal to 0\n                coefficients[i]
                    = 0;\n            } else {\n                basicRows.add(basicRow);\n
                    \               coefficients[i] =\n                    (basicRow
                    == null ? 0 : getEntry(basicRow, getRhsOffset())) -\n                    (restrictToNonNegative
                    ? 0 : mostNegative);\n            }\n        }"
                children: []
                pos: 13009
                length: 603
              - type: return_statement
                fields:
                  text: return new RealPointValuePair(coefficients, f.getValue(coefficients));
                children: []
                pos: 13621
                length: 70
              pos: 12658
              length: 1039
          children: []
          pos: 12615
          length: 1082
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: divideRow
              children: []
              pos: 14025
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int dividendRow
                children: []
                pos: 14035
                length: 21
              pos: 14010
              length: 224
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int j = 0; j < getWidth(); j++) {
                                tableau.setEntry(dividendRow, j, tableau.getEntry(dividendRow, j) / divisor);
                            }
                children: []
                pos: 14090
                length: 138
              pos: 14080
              length: 154
          children: []
          pos: 14010
          length: 224
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: subtractRow
              children: []
              pos: 14594
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int minuendRow
                children: []
                pos: 14606
                length: 20
              pos: 14579
              length: 347
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int j = 0; j < getWidth(); j++) {
                                tableau.setEntry(minuendRow, j, tableau.getEntry(minuendRow, j) -
                                                 multiple * tableau.getEntry(subtrahendRow, j));
                            }
                children: []
                pos: 14717
                length: 203
              pos: 14707
              length: 219
          children: []
          pos: 14579
          length: 347
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getWidth
              children: []
              pos: 15041
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15021
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getColumnDimension();
                children: []
                pos: 15062
                length: 36
              pos: 15052
              length: 52
          children: []
          pos: 15021
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getHeight
              children: []
              pos: 15221
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15201
              length: 81
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getRowDimension();
                children: []
                pos: 15243
                length: 33
              pos: 15233
              length: 49
          children: []
          pos: 15201
          length: 81
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getEntry
              children: []
              pos: 15456
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int row
                children: []
                pos: 15465
                length: 13
              pos: 15433
              length: 118
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getEntry(row, column);
                children: []
                pos: 15508
                length: 37
              pos: 15498
              length: 53
          children: []
          pos: 15433
          length: 118
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setEntry
              children: []
              pos: 15719
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int row
                children: []
                pos: 15728
                length: 13
              pos: 15698
              length: 170
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: tableau.setEntry(row, column, value);
                children: []
                pos: 15825
                length: 37
              pos: 15815
              length: 53
          children: []
          pos: 15698
          length: 170
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSlackVariableOffset
              children: []
              pos: 16011
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15991
              length: 118
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNumObjectiveFunctions() + numDecisionVariables;
                children: []
                pos: 16046
                length: 57
              pos: 16036
              length: 73
          children: []
          pos: 15991
          length: 118
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getArtificialVariableOffset
              children: []
              pos: 16262
              length: 27
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16242
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNumObjectiveFunctions() + numDecisionVariables +
                    numSlackVariables;
                children: []
                pos: 16302
                length: 77
              pos: 16292
              length: 93
          children: []
          pos: 16242
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRhsOffset
              children: []
              pos: 16518
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16498
              length: 73
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getWidth() - 1;
                children: []
                pos: 16543
                length: 22
              pos: 16533
              length: 38
          children: []
          pos: 16498
          length: 73
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumDecisionVariables
              children: []
              pos: 16952
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16932
              length: 90
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return numDecisionVariables;
                children: []
                pos: 16988
                length: 28
              pos: 16978
              length: 44
          children: []
          pos: 16932
          length: 90
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOriginalNumDecisionVariables
              children: []
              pos: 17210
              length: 31
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17190
              length: 149
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return restrictToNonNegative ? numDecisionVariables : numDecisionVariables
                    - 1;'
                children: []
                pos: 17254
                length: 79
              pos: 17244
              length: 95
          children: []
          pos: 17190
          length: 149
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumSlackVariables
              children: []
              pos: 17464
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17444
              length: 84
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return numSlackVariables;
                children: []
                pos: 17497
                length: 25
              pos: 17487
              length: 41
          children: []
          pos: 17444
          length: 84
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNumArtificialVariables
              children: []
              pos: 17663
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17643
              length: 94
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return numArtificialVariables;
                children: []
                pos: 17701
                length: 30
              pos: 17691
              length: 46
          children: []
          pos: 17643
          length: 94
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getData
              children: []
              pos: 17843
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17816
              length: 78
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return tableau.getData();
                children: []
                pos: 17863
                length: 25
              pos: 17853
              length: 41
          children: []
          pos: 17816
          length: 78
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 17954
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object other
                children: []
                pos: 17961
                length: 12
              pos: 17925
              length: 836
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: this
                            fields: {}
                            children: []
                            pos: 17988
                            length: 4
                          right:
                            type: identifier
                            fields:
                              text: other
                            children: []
                            pos: 17996
                            length: 5
                        children: []
                        pos: 17988
                        length: 13
                    children: []
                    pos: 17987
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 18014
                    length: 12
                  pos: 18003
                  length: 31
                pos: 17984
                length: 50
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: other
                            children: []
                            pos: 18046
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18055
                            length: 4
                        children: []
                        pos: 18046
                        length: 13
                    children: []
                    pos: 18045
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 18071
                    length: 13
                  pos: 18061
                  length: 31
                pos: 18042
                length: 50
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: SimplexTableau rhs = (SimplexTableau) other;
                      children: []
                      pos: 18117
                      length: 44
                    - type: return_statement
                      fields:
                        text: |-
                          return (restrictToNonNegative  == rhs.restrictToNonNegative) &&
                                           (numDecisionVariables   == rhs.numDecisionVariables) &&
                                           (numSlackVariables      == rhs.numSlackVariables) &&
                                           (numArtificialVariables == rhs.numArtificialVariables) &&
                                           (epsilon                == rhs.epsilon) &&
                                           f.equals(rhs.f) &&
                                           constraints.equals(rhs.constraints) &&
                                           tableau.equals(rhs.tableau);
                      children: []
                      pos: 18172
                      length: 479
                    pos: 18104
                    length: 556
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (ClassCastException ex) {
                                    // ignore exception
                                    return false;
                                }
                      children: []
                      pos: 18661
                      length: 93
                    pos: 18100
                    length: 654
                children: []
                pos: 18100
                length: 654
              pos: 17975
              length: 786
          children: []
          pos: 17925
          length: 836
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hashCode
              children: []
              pos: 18821
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18796
              length: 380
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return Boolean.valueOf(restrictToNonNegative).hashCode() ^
                                   numDecisionVariables ^
                                   numSlackVariables ^
                                   numArtificialVariables ^
                                   Double.valueOf(epsilon).hashCode() ^
                                   f.hashCode() ^
                                   constraints.hashCode() ^
                                   tableau.hashCode();
                children: []
                pos: 18842
                length: 328
              pos: 18832
              length: 344
          children: []
          pos: 18796
          length: 380
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeObject
              children: []
              pos: 19356
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: ObjectOutputStream oos
                children: []
                pos: 19368
                length: 22
              pos: 19343
              length: 172
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: oos.defaultWriteObject();
                children: []
                pos: 19429
                length: 25
              - type: expression_statement
                fields:
                  text: MatrixUtils.serializeRealMatrix(tableau, oos);
                children: []
                pos: 19463
                length: 46
              pos: 19419
              length: 96
          children: []
          pos: 19343
          length: 172
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: readObject
              children: []
              pos: 19785
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: ObjectInputStream ois
                children: []
                pos: 19796
                length: 21
              pos: 19772
              length: 201
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: ois.defaultReadObject();
                children: []
                pos: 19878
                length: 24
              - type: expression_statement
                fields:
                  text: MatrixUtils.deserializeRealMatrix(this, "tableau", ois);
                children: []
                pos: 19911
                length: 56
              pos: 19868
              length: 105
          children: []
          pos: 19772
          length: 201
        pos: 2406
        length: 17569
    children: []
    pos: 2406
    length: 17569
  pos: 0
  length: 19976
text_diff: |
  --- before
  +++ after
  @@ -272,10 +272,12 @@
       private Integer getBasicRow(final int col) {
           Integer row = null;
           for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
  -            if (MathUtils.equals(getEntry(i, col), 1.0, epsilon) && (row == null)) {
  +            if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
  +                if (row == null) {
                   row = i;
  -            } else if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
  +                } else {
                   return null;
  +                }
               }
           }
           return row;
tree_diff: |+
  New cluster:
  UPDATE from for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
              if (MathUtils.equals(getEntry(i, col), 1.0, epsilon) && (row == null)) {
                  row = i;
              } else if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                  return null;
              }
          } to for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
              if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                  if (row == null) {
                  row = i;
                  } else {
                  return null;
                  }
              }
          }
  ------------
  ===
  update-node
  ---
  for_statement: for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
              if (MathUtils.equals(getEntry(i, col), 1.0, epsilon) && (row == null)) {
                  row = i;
              } else if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                  return null;
              }
          } [11042,11345]
  replace for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
              if (MathUtils.equals(getEntry(i, col), 1.0, epsilon) && (row == null)) {
                  row = i;
              } else if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                  return null;
              }
          } by for (int i = getNumObjectiveFunctions(); i < getHeight(); i++) {
              if (!MathUtils.equals(getEntry(i, col), 0.0, epsilon)) {
                  if (row == null) {
                  row = i;
                  } else {
                  return null;
                  }
              }
          }

...
