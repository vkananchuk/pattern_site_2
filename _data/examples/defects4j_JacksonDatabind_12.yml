---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: MapDeserializer
        children: []
        pos: 1126
        length: 15
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -3378654289961736240L;
          children: []
          pos: 1268
          length: 67
        - type: field_declaration
          fields:
            text: protected final JavaType _mapType;
          children: []
          pos: 1389
          length: 34
        - type: field_declaration
          fields:
            text: protected final KeyDeserializer _keyDeserializer;
          children: []
          pos: 1599
          length: 49
        - type: field_declaration
          fields:
            text: protected boolean _standardStringKey;
          children: []
          pos: 1944
          length: 37
        - type: field_declaration
          fields:
            text: protected final JsonDeserializer<Object> _valueDeserializer;
          children: []
          pos: 2030
          length: 60
        - type: field_declaration
          fields:
            text: protected final TypeDeserializer _valueTypeDeserializer;
          children: []
          pos: 2229
          length: 56
        - type: field_declaration
          fields:
            text: protected final ValueInstantiator _valueInstantiator;
          children: []
          pos: 2338
          length: 53
        - type: field_declaration
          fields:
            text: protected final boolean _hasDefaultCreator;
          children: []
          pos: 2397
          length: 43
        - type: field_declaration
          fields:
            text: protected JsonDeserializer<Object> _delegateDeserializer;
          children: []
          pos: 2579
          length: 57
        - type: field_declaration
          fields:
            text: protected PropertyBasedCreator _propertyBasedCreator;
          children: []
          pos: 2863
          length: 53
        - type: field_declaration
          fields:
            text: protected HashSet<String> _ignorableProperties;
          children: []
          pos: 2975
          length: 47
        - type: constructor_declaration
          fields:
            text: |-
              public MapDeserializer(JavaType mapType, ValueInstantiator valueInstantiator,
                          KeyDeserializer keyDeser, JsonDeserializer<Object> valueDeser,
                          TypeDeserializer valueTypeDeser)
                  {
                      super(mapType);
                      _mapType = mapType;
                      _keyDeserializer = keyDeser;
                      _valueDeserializer = valueDeser;
                      _valueTypeDeserializer = valueTypeDeser;
                      _valueInstantiator = valueInstantiator;
                      _hasDefaultCreator = valueInstantiator.canCreateUsingDefault();
                      _delegateDeserializer = null;
                      _propertyBasedCreator = null;
                      _standardStringKey = _isStdKeyDeser(mapType, keyDeser);
                  }
          children: []
          pos: 3190
          length: 648
        - type: constructor_declaration
          fields:
            text: |-
              protected MapDeserializer(MapDeserializer src)
                  {
                      super(src._mapType);
                      _mapType = src._mapType;
                      _keyDeserializer = src._keyDeserializer;
                      _valueDeserializer = src._valueDeserializer;
                      _valueTypeDeserializer = src._valueTypeDeserializer;
                      _valueInstantiator = src._valueInstantiator;
                      _propertyBasedCreator = src._propertyBasedCreator;
                      _delegateDeserializer = src._delegateDeserializer;
                      _hasDefaultCreator = src._hasDefaultCreator;
                      // should we make a copy here?
                      _ignorableProperties = src._ignorableProperties;

                      _standardStringKey = src._standardStringKey;
                  }
          children: []
          pos: 3999
          length: 657
        - type: constructor_declaration
          fields:
            text: |-
              protected MapDeserializer(MapDeserializer src,
                          KeyDeserializer keyDeser, JsonDeserializer<Object> valueDeser,
                          TypeDeserializer valueTypeDeser,
                          HashSet<String> ignorable)
                  {
                      super(src._mapType);
                      _mapType = src._mapType;
                      _keyDeserializer = keyDeser;
                      _valueDeserializer = valueDeser;
                      _valueTypeDeserializer = valueTypeDeser;
                      _valueInstantiator = src._valueInstantiator;
                      _propertyBasedCreator = src._propertyBasedCreator;
                      _delegateDeserializer = src._delegateDeserializer;
                      _hasDefaultCreator = src._hasDefaultCreator;
                      _ignorableProperties = ignorable;

                      _standardStringKey = _isStdKeyDeser(_mapType, keyDeser);
                  }
          children: []
          pos: 4662
          length: 738
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withResolved
              children: []
              pos: 5614
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: KeyDeserializer keyDeser
                children: []
                pos: 5627
                length: 24
              pos: 5553
              length: 590
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: _keyDeserializer
                                            children: []
                                            pos: 5797
                                            length: 16
                                          right:
                                            type: identifier
                                            fields:
                                              text: keyDeser
                                            children: []
                                            pos: 5817
                                            length: 8
                                        children: []
                                        pos: 5797
                                        length: 28
                                    children: []
                                    pos: 5796
                                    length: 30
                                  right:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: _valueDeserializer
                                            children: []
                                            pos: 5831
                                            length: 18
                                          right:
                                            type: identifier
                                            fields:
                                              text: valueDeser
                                            children: []
                                            pos: 5853
                                            length: 10
                                        children: []
                                        pos: 5831
                                        length: 32
                                    children: []
                                    pos: 5830
                                    length: 34
                                children: []
                                pos: 5796
                                length: 68
                              right:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: _valueTypeDeserializer
                                        children: []
                                        pos: 5885
                                        length: 22
                                      right:
                                        type: identifier
                                        fields:
                                          text: valueTypeDeser
                                        children: []
                                        pos: 5911
                                        length: 14
                                    children: []
                                    pos: 5885
                                    length: 40
                                children: []
                                pos: 5884
                                length: 42
                            children: []
                            pos: 5796
                            length: 130
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: _ignorableProperties
                                    children: []
                                    pos: 5931
                                    length: 20
                                  right:
                                    type: identifier
                                    fields:
                                      text: ignorable
                                    children: []
                                    pos: 5955
                                    length: 9
                                children: []
                                pos: 5931
                                length: 33
                            children: []
                            pos: 5930
                            length: 35
                        children: []
                        pos: 5796
                        length: 169
                    children: []
                    pos: 5795
                    length: 171
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 5981
                    length: 12
                  pos: 5967
                  length: 36
                pos: 5792
                length: 211
              - type: return_statement
                fields:
                  text: |-
                    return new MapDeserializer(this,
                                    keyDeser, (JsonDeserializer<Object>) valueDeser, valueTypeDeser, ignorable);
                children: []
                pos: 6012
                length: 125
              pos: 5773
              length: 370
          children: []
          pos: 5553
          length: 590
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _isStdKeyDeser
              children: []
              pos: 6327
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JavaType mapType
                children: []
                pos: 6342
                length: 16
              pos: 6303
              length: 484
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: keyDeser
                            children: []
                            pos: 6404
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6416
                            length: 4
                        children: []
                        pos: 6404
                        length: 16
                    children: []
                    pos: 6403
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 6436
                    length: 12
                  pos: 6422
                  length: 36
                pos: 6400
                length: 58
              - type: local_variable_declaration
                fields:
                  text: JavaType keyType = mapType.getKeyType();
                children: []
                pos: 6467
                length: 40
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: keyType
                            children: []
                            pos: 6520
                            length: 7
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6531
                            length: 4
                        children: []
                        pos: 6520
                        length: 15
                    children: []
                    pos: 6519
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 6575
                    length: 12
                  pos: 6537
                  length: 60
                pos: 6516
                length: 81
              - type: local_variable_declaration
                fields:
                  text: Class<?> rawKeyType = keyType.getRawClass();
                children: []
                pos: 6606
                length: 44
              - type: return_statement
                fields:
                  text: |-
                    return ((rawKeyType == String.class || rawKeyType == Object.class)
                                    && isDefaultKeyDeserializer(keyDeser));
                children: []
                pos: 6659
                length: 122
              pos: 6390
              length: 397
          children: []
          pos: 6303
          length: 484
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setIgnorableProperties
              children: []
              pos: 6805
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String[] ignorable
                children: []
                pos: 6828
                length: 18
              pos: 6793
              length: 196
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    _ignorableProperties = (ignorable == null || ignorable.length == 0) ?
                                null : ArrayBuilders.arrayToSet(ignorable);
                children: []
                pos: 6858
                length: 125
              pos: 6848
              length: 141
          children: []
          pos: 6793
          length: 196
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: resolve
              children: []
              pos: 7225
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 7233
                length: 27
              pos: 7199
              length: 1398
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: _valueInstantiator.canCreateUsingDelegate()
                        children: []
                        pos: 7391
                        length: 43
                    children: []
                    pos: 7390
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: JavaType delegateType = _valueInstantiator.getDelegateType(ctxt.getConfig());
                    children: []
                    pos: 7450
                    length: 77
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: delegateType
                                children: []
                                pos: 7544
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7560
                                length: 4
                            children: []
                            pos: 7544
                            length: 20
                        children: []
                        pos: 7543
                        length: 22
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: throw_statement
                        fields:
                          text: |-
                            throw new IllegalArgumentException("Invalid delegate-creator definition for "+_mapType
                                                    +": value instantiator ("+_valueInstantiator.getClass().getName()
                                                    +") returned true for 'canCreateUsingDelegate()', but null for 'getDelegateType()'");
                        children: []
                        pos: 7584
                        length: 286
                      pos: 7566
                      length: 318
                    pos: 7540
                    length: 344
                  - type: expression_statement
                    fields:
                      text: _delegateDeserializer = findDeserializer(ctxt, delegateType,
                        null);
                    children: []
                    pos: 8152
                    length: 67
                  pos: 7436
                  length: 793
                pos: 7387
                length: 842
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: _valueInstantiator.canCreateFromObjectWith()
                        children: []
                        pos: 8242
                        length: 44
                    children: []
                    pos: 8241
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: SettableBeanProperty[] creatorProps = _valueInstantiator.getFromObjectArguments(ctxt.getConfig());
                    children: []
                    pos: 8302
                    length: 98
                  - type: expression_statement
                    fields:
                      text: _propertyBasedCreator = PropertyBasedCreator.construct(ctxt,
                        _valueInstantiator, creatorProps);
                    children: []
                    pos: 8413
                    length: 95
                  pos: 8288
                  length: 230
                pos: 8238
                length: 280
              - type: expression_statement
                fields:
                  text: _standardStringKey = _isStdKeyDeser(_mapType, _keyDeserializer);
                children: []
                pos: 8527
                length: 64
              pos: 7294
              length: 1303
          children: []
          pos: 7199
          length: 1398
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createContextual
              children: []
              pos: 8792
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 8809
                length: 27
              pos: 8751
              length: 1659
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: KeyDeserializer kd = _keyDeserializer;
                children: []
                pos: 8915
                length: 38
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: kd
                            children: []
                            pos: 8966
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8972
                            length: 4
                        children: []
                        pos: 8966
                        length: 10
                    children: []
                    pos: 8965
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: kd = ctxt.findKeyDeserializer(_mapType.getKeyType(), property);
                    children: []
                    pos: 8992
                    length: 63
                  pos: 8978
                  length: 87
                pos: 8962
                length: 281
              - type: local_variable_declaration
                fields:
                  text: JsonDeserializer<?> vd = _valueDeserializer;
                children: []
                pos: 9252
                length: 44
              - type: expression_statement
                fields:
                  text: vd = findConvertingContentDeserializer(ctxt, property, vd);
                children: []
                pos: 9351
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: vd
                            children: []
                            pos: 9423
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9429
                            length: 4
                        children: []
                        pos: 9423
                        length: 10
                    children: []
                    pos: 9422
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: vd = ctxt.findContextualValueDeserializer(_mapType.getContentType(),
                        property);
                    children: []
                    pos: 9449
                    length: 79
                  pos: 9435
                  length: 103
                pos: 9419
                length: 264
              - type: local_variable_declaration
                fields:
                  text: TypeDeserializer vtd = _valueTypeDeserializer;
                children: []
                pos: 9692
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: vtd
                            children: []
                            pos: 9751
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9758
                            length: 4
                        children: []
                        pos: 9751
                        length: 11
                    children: []
                    pos: 9750
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: vtd = vtd.forProperty(property);
                    children: []
                    pos: 9778
                    length: 32
                  pos: 9764
                  length: 56
                pos: 9747
                length: 73
              - type: local_variable_declaration
                fields:
                  text: HashSet<String> ignored = _ignorableProperties;
                children: []
                pos: 9829
                length: 47
              - type: local_variable_declaration
                fields:
                  text: AnnotationIntrospector intr = ctxt.getAnnotationIntrospector();
                children: []
                pos: 9885
                length: 63
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: intr
                                children: []
                                pos: 9961
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9969
                                length: 4
                            children: []
                            pos: 9961
                            length: 12
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: property
                                children: []
                                pos: 9977
                                length: 8
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9989
                                length: 4
                            children: []
                            pos: 9977
                            length: 16
                        children: []
                        pos: 9961
                        length: 32
                    children: []
                    pos: 9960
                    length: 34
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String[] moreToIgnore = intr.findPropertiesToIgnore(property.getMember());
                    children: []
                    pos: 10009
                    length: 74
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: moreToIgnore
                                children: []
                                pos: 10100
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 10116
                                length: 4
                            children: []
                            pos: 10100
                            length: 20
                        children: []
                        pos: 10099
                        length: 22
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: 'ignored = (ignored == null) ? new HashSet<String>()
                            : new HashSet<String>(ignored);'
                        children: []
                        pos: 10140
                        length: 83
                      - type: enhanced_for_statement
                        fields:
                          text: |-
                            for (String str : moreToIgnore) {
                                                ignored.add(str);
                                            }
                        children: []
                        pos: 10240
                        length: 89
                      pos: 10122
                      length: 221
                    pos: 10096
                    length: 247
                  pos: 9995
                  length: 358
                pos: 9957
                length: 396
              - type: return_statement
                fields:
                  text: return withResolved(kd, vtd, vd, ignored);
                children: []
                pos: 10362
                length: 42
              pos: 8905
              length: 1505
          children: []
          pos: 8751
          length: 1659
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getContentType
              children: []
              pos: 10631
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10601
              length: 96
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _mapType.getContentType();
                children: []
                pos: 10658
                length: 33
              pos: 10648
              length: 49
          children: []
          pos: 10601
          length: 96
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getContentDeserializer
              children: []
              pos: 10749
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10703
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _valueDeserializer;
                children: []
                pos: 10784
                length: 26
              pos: 10774
              length: 42
          children: []
          pos: 10703
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCachable
              children: []
              pos: 11579
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 11550
              length: 418
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return (_valueDeserializer == null)
                                    && (_keyDeserializer == null)
                                    && (_valueTypeDeserializer == null)
                                    && (_ignorableProperties == null);
                children: []
                pos: 11778
                length: 184
              pos: 11592
              length: 376
          children: []
          pos: 11550
          length: 418
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserialize
              children: []
              pos: 12049
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 12061
                length: 13
              pos: 11974
              length: 1448
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _propertyBasedCreator
                            children: []
                            pos: 12175
                            length: 21
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12200
                            length: 4
                        children: []
                        pos: 12175
                        length: 29
                    children: []
                    pos: 12174
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return _deserializeUsingCreator(jp, ctxt);
                    children: []
                    pos: 12220
                    length: 42
                  pos: 12206
                  length: 66
                pos: 12171
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _delegateDeserializer
                            children: []
                            pos: 12285
                            length: 21
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12310
                            length: 4
                        children: []
                        pos: 12285
                        length: 29
                    children: []
                    pos: 12284
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return (Map<Object,Object>) _valueInstantiator.createUsingDelegate(ctxt,
                                            _delegateDeserializer.deserialize(jp, ctxt));
                    children: []
                    pos: 12330
                    length: 138
                  pos: 12316
                  length: 162
                pos: 12281
                length: 197
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!_hasDefaultCreator"
                        children: []
                        pos: 12491
                        length: 19
                    children: []
                    pos: 12490
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw ctxt.instantiationException(getMapClass(), "No default
                        constructor found");
                    children: []
                    pos: 12526
                    length: 81
                  pos: 12512
                  length: 105
                pos: 12487
                length: 130
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 12694
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: t
                                    children: []
                                    pos: 12742
                                    length: 1
                                  right:
                                    type: field_access
                                    fields:
                                      text: JsonToken.START_OBJECT
                                    children: []
                                    pos: 12747
                                    length: 22
                                children: []
                                pos: 12742
                                length: 27
                              right:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: t
                                    children: []
                                    pos: 12773
                                    length: 1
                                  right:
                                    type: field_access
                                    fields:
                                      text: JsonToken.FIELD_NAME
                                    children: []
                                    pos: 12778
                                    length: 20
                                children: []
                                pos: 12773
                                length: 25
                            children: []
                            pos: 12742
                            length: 56
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 12802
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.END_OBJECT
                                children: []
                                pos: 12807
                                length: 20
                            children: []
                            pos: 12802
                            length: 25
                        children: []
                        pos: 12742
                        length: 85
                    children: []
                    pos: 12741
                    length: 87
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 12910
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.VALUE_STRING
                                children: []
                                pos: 12915
                                length: 22
                            children: []
                            pos: 12910
                            length: 27
                        children: []
                        pos: 12909
                        length: 29
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return (Map<Object,Object>) _valueInstantiator.createFromString(ctxt,
                            jp.getText());
                        children: []
                        pos: 12957
                        length: 84
                      pos: 12939
                      length: 116
                    pos: 12906
                    length: 149
                  - type: throw_statement
                    fields:
                      text: throw ctxt.mappingException(getMapClass());
                    children: []
                    pos: 13068
                    length: 43
                  pos: 12829
                  length: 292
                pos: 12738
                length: 383
              - type: local_variable_declaration
                fields:
                  text: final Map<Object,Object> result = (Map<Object,Object>) _valueInstantiator.createUsingDefault(ctxt);
                children: []
                pos: 13130
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: _standardStringKey
                        children: []
                        pos: 13242
                        length: 18
                    children: []
                    pos: 13241
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _readAndBindStringMap(jp, ctxt, result);
                    children: []
                    pos: 13276
                    length: 40
                  - type: return_statement
                    fields:
                      text: return result;
                    children: []
                    pos: 13329
                    length: 14
                  pos: 13262
                  length: 91
                pos: 13238
                length: 115
              - type: expression_statement
                fields:
                  text: _readAndBind(jp, ctxt, result);
                children: []
                pos: 13362
                length: 31
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 13402
                length: 14
              pos: 12161
              length: 1261
          children: []
          pos: 11974
          length: 1448
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserialize
              children: []
              pos: 13468
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 13480
                length: 13
              pos: 13428
              length: 623
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 13685
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 13733
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.START_OBJECT
                                children: []
                                pos: 13738
                                length: 22
                            children: []
                            pos: 13733
                            length: 27
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 13764
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.FIELD_NAME
                                children: []
                                pos: 13769
                                length: 20
                            children: []
                            pos: 13764
                            length: 25
                        children: []
                        pos: 13733
                        length: 56
                    children: []
                    pos: 13732
                    length: 58
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw ctxt.mappingException(getMapClass());
                    children: []
                    pos: 13805
                    length: 43
                  pos: 13791
                  length: 67
                pos: 13729
                length: 129
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: _standardStringKey
                        children: []
                        pos: 13871
                        length: 18
                    children: []
                    pos: 13870
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _readAndBindStringMap(jp, ctxt, result);
                    children: []
                    pos: 13905
                    length: 40
                  - type: return_statement
                    fields:
                      text: return result;
                    children: []
                    pos: 13958
                    length: 14
                  pos: 13891
                  length: 91
                pos: 13867
                length: 115
              - type: expression_statement
                fields:
                  text: _readAndBind(jp, ctxt, result);
                children: []
                pos: 13991
                length: 31
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 14031
                length: 14
              pos: 13619
              length: 432
          children: []
          pos: 13428
          length: 623
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserializeWithType
              children: []
              pos: 14085
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 14105
                length: 13
              pos: 14057
              length: 353
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeDeserializer.deserializeTypedFromObject(jp, ctxt);
                children: []
                pos: 14343
                length: 61
              pos: 14252
              length: 158
          children: []
          pos: 14057
          length: 353
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMapClass
              children: []
              pos: 14651
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14594
              length: 133
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return (Class<Map<Object,Object>>) _mapType.getRawClass();
                children: []
                pos: 14667
                length: 58
              pos: 14665
              length: 62
          children: []
          pos: 14594
          length: 133
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValueType
              children: []
              pos: 14759
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14733
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _mapType;
                children: []
                pos: 14776
                length: 16
              pos: 14774
              length: 20
          children: []
          pos: 14733
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _readAndBind
              children: []
              pos: 14989
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 15002
                length: 13
              pos: 14968
              length: 2368
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 15151
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 15199
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 15204
                            length: 22
                        children: []
                        pos: 15199
                        length: 27
                    children: []
                    pos: 15198
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = jp.nextToken();
                    children: []
                    pos: 15242
                    length: 19
                  pos: 15228
                  length: 43
                pos: 15195
                length: 76
              - type: local_variable_declaration
                fields:
                  text: final KeyDeserializer keyDes = _keyDeserializer;
                children: []
                pos: 15280
                length: 48
              - type: local_variable_declaration
                fields:
                  text: final JsonDeserializer<Object> valueDes = _valueDeserializer;
                children: []
                pos: 15337
                length: 61
              - type: local_variable_declaration
                fields:
                  text: final TypeDeserializer typeDeser = _valueTypeDeserializer;
                children: []
                pos: 15407
                length: 58
              - type: local_variable_declaration
                fields:
                  text: MapReferringAccumulator referringAccumulator = null;
                children: []
                pos: 15475
                length: 52
              - type: local_variable_declaration
                fields:
                  text: boolean useObjectId = valueDes.getObjectIdReader() != null;
                children: []
                pos: 15536
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: useObjectId
                        children: []
                        pos: 15608
                        length: 11
                    children: []
                    pos: 15607
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: referringAccumulator = new MapReferringAccumulator(_mapType.getContentType().getRawClass(),
                        result);
                    children: []
                    pos: 15635
                    length: 100
                  pos: 15621
                  length: 124
                pos: 15604
                length: 141
              - type: for_statement
                fields:
                  text: |-
                    for (; t == JsonToken.FIELD_NAME; t = jp.nextToken()) {
                                // Must point to field name
                                String fieldName = jp.getCurrentName();
                                Object key = keyDes.deserializeKey(fieldName, ctxt);
                                // And then the value...
                                t = jp.nextToken();
                                if (_ignorableProperties != null && _ignorableProperties.contains(fieldName)) {
                                    jp.skipChildren();
                                    continue;
                                }
                                try{
                                    // Note: must handle null explicitly here; value deserializers won't
                                    Object value;
                                    if (t == JsonToken.VALUE_NULL) {
                                        value = valueDes.getNullValue();
                                    } else if (typeDeser == null) {
                                        value = valueDes.deserialize(jp, ctxt);
                                    } else {
                                        value = valueDes.deserializeWithType(jp, ctxt, typeDeser);
                                    }
                                    /* !!! 23-Dec-2008, tatu: should there be an option to verify
                                     *   that there are no duplicate field names? (and/or what
                                     *   to do, keep-first or keep-last)
                                     */
                                    if (useObjectId) {
                                        referringAccumulator.put(key, value);
                                    } else {
                                        result.put(key, value);
                                    }
                                } catch (UnresolvedForwardReference reference) {
                                    handleUnresolvedReference(jp, referringAccumulator, key, reference);
                                } catch (Exception e) {
                                    wrapAndThrow(e, result, fieldName);
                                }
                            }
                children: []
                pos: 15754
                length: 1576
              pos: 15141
              length: 2195
          children: []
          pos: 14968
          length: 2368
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _readAndBindStringMap
              children: []
              pos: 17539
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 17561
                length: 13
              pos: 17518
              length: 2047
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 17710
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 17758
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 17763
                            length: 22
                        children: []
                        pos: 17758
                        length: 27
                    children: []
                    pos: 17757
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = jp.nextToken();
                    children: []
                    pos: 17801
                    length: 19
                  pos: 17787
                  length: 43
                pos: 17754
                length: 76
              - type: local_variable_declaration
                fields:
                  text: final JsonDeserializer<Object> valueDes = _valueDeserializer;
                children: []
                pos: 17839
                length: 61
              - type: local_variable_declaration
                fields:
                  text: final TypeDeserializer typeDeser = _valueTypeDeserializer;
                children: []
                pos: 17909
                length: 58
              - type: local_variable_declaration
                fields:
                  text: MapReferringAccumulator referringAccumulator = null;
                children: []
                pos: 17976
                length: 52
              - type: local_variable_declaration
                fields:
                  text: boolean useObjectId = valueDes.getObjectIdReader() != null;
                children: []
                pos: 18037
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: useObjectId
                        children: []
                        pos: 18109
                        length: 11
                    children: []
                    pos: 18108
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: referringAccumulator = new MapReferringAccumulator(_mapType.getContentType().getRawClass(),
                        result);
                    children: []
                    pos: 18136
                    length: 100
                  pos: 18122
                  length: 124
                pos: 18105
                length: 141
              - type: for_statement
                fields:
                  text: |-
                    for (; t == JsonToken.FIELD_NAME; t = jp.nextToken()) {
                                // Must point to field name
                                String fieldName = jp.getCurrentName();
                                // And then the value...
                                t = jp.nextToken();
                                if (_ignorableProperties != null && _ignorableProperties.contains(fieldName)) {
                                    jp.skipChildren();
                                    continue;
                                }
                                try {
                                    // Note: must handle null explicitly here; value deserializers won't
                                    Object value;
                                    if (t == JsonToken.VALUE_NULL) {
                                        value = valueDes.getNullValue();
                                    } else if (typeDeser == null) {
                                        value = valueDes.deserialize(jp, ctxt);
                                    } else {
                                        value = valueDes.deserializeWithType(jp, ctxt, typeDeser);
                                    }
                                    if (useObjectId) {
                                        referringAccumulator.put(fieldName, value);
                                    } else {
                                        result.put(fieldName, value);
                                    }
                                } catch (UnresolvedForwardReference reference) {
                                    handleUnresolvedReference(jp, referringAccumulator, fieldName, reference);
                                } catch (Exception e) {
                                    wrapAndThrow(e, result, fieldName);
                                }
                            }
                children: []
                pos: 18255
                length: 1304
              pos: 17700
              length: 1865
          children: []
          pos: 17518
          length: 2047
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _deserializeUsingCreator
              children: []
              pos: 19637
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 19662
                length: 13
              pos: 19575
              length: 2913
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final PropertyBasedCreator creator = _propertyBasedCreator;
                children: []
                pos: 19772
                length: 59
              - type: local_variable_declaration
                fields:
                  text: PropertyValueBuffer buffer = creator.startBuilding(jp, ctxt,
                    null);
                children: []
                pos: 19893
                length: 67
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 19970
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 20018
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 20023
                            length: 22
                        children: []
                        pos: 20018
                        length: 27
                    children: []
                    pos: 20017
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = jp.nextToken();
                    children: []
                    pos: 20061
                    length: 19
                  pos: 20047
                  length: 43
                pos: 20014
                length: 76
              - type: local_variable_declaration
                fields:
                  text: final JsonDeserializer<Object> valueDes = _valueDeserializer;
                children: []
                pos: 20099
                length: 61
              - type: local_variable_declaration
                fields:
                  text: final TypeDeserializer typeDeser = _valueTypeDeserializer;
                children: []
                pos: 20169
                length: 58
              - type: for_statement
                fields:
                  text: "for (; t == JsonToken.FIELD_NAME; t = jp.nextToken()) {\n
                    \           String propName = jp.getCurrentName();\n            t
                    = jp.nextToken(); // to get to value\n            if (_ignorableProperties
                    != null && _ignorableProperties.contains(propName)) {\n                jp.skipChildren();
                    // and skip it (in case of array/object)\n                continue;\n
                    \           }\n            // creator property?\n            SettableBeanProperty
                    prop = creator.findCreatorProperty(propName);\n            if
                    (prop != null) {\n                // Last property to set?\n                Object
                    value = prop.deserialize(jp, ctxt);\n                if (buffer.assignParameter(prop.getCreatorIndex(),
                    value)) {\n                    jp.nextToken();\n                    Map<Object,Object>
                    result;\n                    try {\n                        result
                    = (Map<Object,Object>)creator.build(ctxt, buffer);\n                    }
                    catch (Exception e) {\n                        wrapAndThrow(e,
                    _mapType.getRawClass(), propName);\n                        return
                    null;\n                    }\n                    _readAndBind(jp,
                    ctxt, result);\n                    return result;\n                }\n
                    \               continue;\n            }\n            // other
                    property? needs buffering\n            String fieldName = jp.getCurrentName();\n
                    \           Object key = _keyDeserializer.deserializeKey(fieldName,
                    ctxt);\n            Object value; \n\n            try {\n                if
                    (t == JsonToken.VALUE_NULL) {\n                    value = valueDes.getNullValue();\n
                    \               } else if (typeDeser == null) {\n                    value
                    = valueDes.deserialize(jp, ctxt);\n                } else {\n
                    \                   value = valueDes.deserializeWithType(jp, ctxt,
                    typeDeser);\n                }\n            } catch (Exception
                    e) {\n                wrapAndThrow(e, _mapType.getRawClass(),
                    propName);\n                return null;\n            }\n            buffer.bufferMapProperty(key,
                    value);\n        }"
                children: []
                pos: 20236
                length: 1957
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return (Map<Object,Object>)creator.build(ctxt, buffer);
                      children: []
                      pos: 22301
                      length: 55
                    pos: 22287
                    length: 79
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (Exception e) {
                                      wrapAndThrow(e, _mapType.getRawClass(), null);
                                      return null;
                                  }
                      children: []
                      pos: 22367
                      length: 115
                    pos: 22283
                    length: 199
                children: []
                pos: 22283
                length: 199
              pos: 19762
              length: 2726
          children: []
          pos: 19575
          length: 2913
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapAndThrow
              children: []
              pos: 22538
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable t
                children: []
                pos: 22551
                length: 11
              pos: 22494
              length: 144
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: wrapAndThrow(t, ref, null);
                children: []
                pos: 22605
                length: 27
              pos: 22595
              length: 43
          children: []
          pos: 22494
          length: 144
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapAndThrow
              children: []
              pos: 22737
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable t
                children: []
                pos: 22750
                length: 11
              pos: 22722
              length: 619
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (t instanceof InvocationTargetException && t.getCause() != null) {
                                t = t.getCause();
                            }
                children: []
                pos: 22856
                length: 112
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: t instanceof Error
                        children: []
                        pos: 23043
                        length: 18
                    children: []
                    pos: 23042
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw (Error) t;
                    children: []
                    pos: 23077
                    length: 16
                  pos: 23063
                  length: 40
                pos: 23039
                length: 64
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: t instanceof IOException
                            children: []
                            pos: 23161
                            length: 24
                          right:
                            type: unary_expression
                            fields:
                              text: "!(t instanceof JsonMappingException)"
                            children: []
                            pos: 23189
                            length: 36
                        children: []
                        pos: 23161
                        length: 64
                    children: []
                    pos: 23160
                    length: 66
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw (IOException) t;
                    children: []
                    pos: 23241
                    length: 22
                  pos: 23227
                  length: 46
                pos: 23157
                length: 116
              - type: throw_statement
                fields:
                  text: throw JsonMappingException.wrapWithPath(t, ref, key);
                children: []
                pos: 23282
                length: 53
              pos: 22810
              length: 531
          children: []
          pos: 22722
          length: 619
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleUnresolvedReference
              children: []
              pos: 23360
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 23386
                length: 13
              pos: 23347
              length: 500
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: accumulator
                            children: []
                            pos: 23554
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 23569
                            length: 4
                        children: []
                        pos: 23554
                        length: 19
                    children: []
                    pos: 23553
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw JsonMappingException.from(jp, "Unresolved forward
                        reference but no identity info.", reference);
                    children: []
                    pos: 23589
                    length: 101
                  pos: 23575
                  length: 125
                pos: 23550
                length: 150
              - type: local_variable_declaration
                fields:
                  text: Referring referring = accumulator.handleUnresolvedReference(reference,
                    key);
                children: []
                pos: 23709
                length: 76
              - type: expression_statement
                fields:
                  text: reference.getRoid().appendReferring(referring);
                children: []
                pos: 23794
                length: 47
              pos: 23540
              length: 307
          children: []
          pos: 23347
          length: 500
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: MapReferringAccumulator
              children: []
              pos: 23880
              length: 23
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Class<?> _valueType;
                children: []
                pos: 23914
                length: 34
              - type: field_declaration
                fields:
                  text: private Map<Object,Object> _result;
                children: []
                pos: 23957
                length: 35
              - type: field_declaration
                fields:
                  text: private List<MapReferring> _accumulator = new ArrayList<MapReferring>();
                children: []
                pos: 24089
                length: 72
              - type: constructor_declaration
                fields:
                  text: |-
                    public MapReferringAccumulator(Class<?> valueType, Map<Object, Object> result) {
                                _valueType = valueType;
                                _result = result;
                            }
                children: []
                pos: 24171
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: put
                    children: []
                    pos: 24349
                    length: 3
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object key
                      children: []
                      pos: 24353
                      length: 10
                    pos: 24337
                    length: 299
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: _accumulator.isEmpty()
                              children: []
                              pos: 24405
                              length: 22
                          children: []
                          pos: 24404
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: _result.put(key, value);
                          children: []
                          pos: 24447
                          length: 24
                        pos: 24429
                        length: 56
                      pos: 24401
                      length: 225
                    pos: 24387
                    length: 249
                children: []
                pos: 24337
                length: 299
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleUnresolvedReference
                    children: []
                    pos: 24663
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: UnresolvedForwardReference reference
                      children: []
                      pos: 24689
                      length: 36
                    pos: 24646
                    length: 251
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: MapReferring id = new MapReferring(this, reference,
                          _valueType, key);
                      children: []
                      pos: 24761
                      length: 69
                    - type: expression_statement
                      fields:
                        text: _accumulator.add(id);
                      children: []
                      pos: 24843
                      length: 21
                    - type: return_statement
                      fields:
                        text: return id;
                      children: []
                      pos: 24877
                      length: 10
                    pos: 24747
                    length: 150
                children: []
                pos: 24646
                length: 251
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveForwardReference
                    children: []
                    pos: 24919
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object id
                      children: []
                      pos: 24943
                      length: 9
                    pos: 24907
                    length: 1003
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<MapReferring> iterator = _accumulator.iterator();
                      children: []
                      pos: 25009
                      length: 58
                    - type: local_variable_declaration
                      fields:
                        text: Map<Object,Object> previous = _result;
                      children: []
                      pos: 25325
                      length: 38
                    - type: while_statement
                      fields:
                        text: |-
                          while (iterator.hasNext()) {
                                          MapReferring ref = iterator.next();
                                          if (ref.hasId(id)) {
                                              iterator.remove();
                                              previous.put(ref.key, value);
                                              previous.putAll(ref.next);
                                              return;
                                          }
                                          previous = ref.next;
                                      }
                      children: []
                      pos: 25376
                      length: 350
                    - type: throw_statement
                      fields:
                        text: |-
                          throw new IllegalArgumentException("Trying to resolve a forward reference with id [" + id
                                              + "] that wasn't previously seen as unresolved.");
                      children: []
                      pos: 25740
                      length: 160
                    pos: 24995
                    length: 915
                children: []
                pos: 24907
                length: 1003
              pos: 23853
              length: 2063
          children: []
          pos: 23853
          length: 2063
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: MapReferring
              children: []
              pos: 26129
              length: 12
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final MapReferringAccumulator _parent;
                children: []
                pos: 26170
                length: 46
              - type: field_declaration
                fields:
                  text: public final Map<Object, Object> next = new LinkedHashMap<Object,
                    Object>();
                children: []
                pos: 26226
                length: 76
              - type: field_declaration
                fields:
                  text: public final Object key;
                children: []
                pos: 26311
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    protected MapReferring(MapReferringAccumulator parent, UnresolvedForwardReference ref,
                                    Class<?> valueType, Object key)
                            {
                                super(ref, valueType);
                                _parent = parent;
                                this.key = key;
                            }
                children: []
                pos: 26353
                length: 247
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleResolvedForwardReference
                    children: []
                    pos: 26640
                    length: 30
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object id
                      children: []
                      pos: 26671
                      length: 9
                    pos: 26610
                    length: 172
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _parent.resolveForwardReference(id, value);
                      children: []
                      pos: 26729
                      length: 43
                    pos: 26715
                    length: 67
                children: []
                pos: 26610
                length: 172
              pos: 26102
              length: 686
          children: []
          pos: 26102
          length: 686
        pos: 1097
        length: 25693
    children: []
    pos: 1097
    length: 25693
  pos: 0
  length: 26791
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: MapDeserializer
        children: []
        pos: 1126
        length: 15
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -3378654289961736240L;
          children: []
          pos: 1268
          length: 67
        - type: field_declaration
          fields:
            text: protected final JavaType _mapType;
          children: []
          pos: 1389
          length: 34
        - type: field_declaration
          fields:
            text: protected final KeyDeserializer _keyDeserializer;
          children: []
          pos: 1599
          length: 49
        - type: field_declaration
          fields:
            text: protected boolean _standardStringKey;
          children: []
          pos: 1944
          length: 37
        - type: field_declaration
          fields:
            text: protected final JsonDeserializer<Object> _valueDeserializer;
          children: []
          pos: 2030
          length: 60
        - type: field_declaration
          fields:
            text: protected final TypeDeserializer _valueTypeDeserializer;
          children: []
          pos: 2229
          length: 56
        - type: field_declaration
          fields:
            text: protected final ValueInstantiator _valueInstantiator;
          children: []
          pos: 2338
          length: 53
        - type: field_declaration
          fields:
            text: protected final boolean _hasDefaultCreator;
          children: []
          pos: 2397
          length: 43
        - type: field_declaration
          fields:
            text: protected JsonDeserializer<Object> _delegateDeserializer;
          children: []
          pos: 2579
          length: 57
        - type: field_declaration
          fields:
            text: protected PropertyBasedCreator _propertyBasedCreator;
          children: []
          pos: 2863
          length: 53
        - type: field_declaration
          fields:
            text: protected HashSet<String> _ignorableProperties;
          children: []
          pos: 2975
          length: 47
        - type: constructor_declaration
          fields:
            text: |-
              public MapDeserializer(JavaType mapType, ValueInstantiator valueInstantiator,
                          KeyDeserializer keyDeser, JsonDeserializer<Object> valueDeser,
                          TypeDeserializer valueTypeDeser)
                  {
                      super(mapType);
                      _mapType = mapType;
                      _keyDeserializer = keyDeser;
                      _valueDeserializer = valueDeser;
                      _valueTypeDeserializer = valueTypeDeser;
                      _valueInstantiator = valueInstantiator;
                      _hasDefaultCreator = valueInstantiator.canCreateUsingDefault();
                      _delegateDeserializer = null;
                      _propertyBasedCreator = null;
                      _standardStringKey = _isStdKeyDeser(mapType, keyDeser);
                  }
          children: []
          pos: 3190
          length: 648
        - type: constructor_declaration
          fields:
            text: |-
              protected MapDeserializer(MapDeserializer src)
                  {
                      super(src._mapType);
                      _mapType = src._mapType;
                      _keyDeserializer = src._keyDeserializer;
                      _valueDeserializer = src._valueDeserializer;
                      _valueTypeDeserializer = src._valueTypeDeserializer;
                      _valueInstantiator = src._valueInstantiator;
                      _propertyBasedCreator = src._propertyBasedCreator;
                      _delegateDeserializer = src._delegateDeserializer;
                      _hasDefaultCreator = src._hasDefaultCreator;
                      // should we make a copy here?
                      _ignorableProperties = src._ignorableProperties;

                      _standardStringKey = src._standardStringKey;
                  }
          children: []
          pos: 3999
          length: 657
        - type: constructor_declaration
          fields:
            text: |-
              protected MapDeserializer(MapDeserializer src,
                          KeyDeserializer keyDeser, JsonDeserializer<Object> valueDeser,
                          TypeDeserializer valueTypeDeser,
                          HashSet<String> ignorable)
                  {
                      super(src._mapType);
                      _mapType = src._mapType;
                      _keyDeserializer = keyDeser;
                      _valueDeserializer = valueDeser;
                      _valueTypeDeserializer = valueTypeDeser;
                      _valueInstantiator = src._valueInstantiator;
                      _propertyBasedCreator = src._propertyBasedCreator;
                      _delegateDeserializer = src._delegateDeserializer;
                      _hasDefaultCreator = src._hasDefaultCreator;
                      _ignorableProperties = ignorable;

                      _standardStringKey = _isStdKeyDeser(_mapType, keyDeser);
                  }
          children: []
          pos: 4662
          length: 738
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withResolved
              children: []
              pos: 5614
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: KeyDeserializer keyDeser
                children: []
                pos: 5627
                length: 24
              pos: 5553
              length: 590
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: _keyDeserializer
                                            children: []
                                            pos: 5797
                                            length: 16
                                          right:
                                            type: identifier
                                            fields:
                                              text: keyDeser
                                            children: []
                                            pos: 5817
                                            length: 8
                                        children: []
                                        pos: 5797
                                        length: 28
                                    children: []
                                    pos: 5796
                                    length: 30
                                  right:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: _valueDeserializer
                                            children: []
                                            pos: 5831
                                            length: 18
                                          right:
                                            type: identifier
                                            fields:
                                              text: valueDeser
                                            children: []
                                            pos: 5853
                                            length: 10
                                        children: []
                                        pos: 5831
                                        length: 32
                                    children: []
                                    pos: 5830
                                    length: 34
                                children: []
                                pos: 5796
                                length: 68
                              right:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: _valueTypeDeserializer
                                        children: []
                                        pos: 5885
                                        length: 22
                                      right:
                                        type: identifier
                                        fields:
                                          text: valueTypeDeser
                                        children: []
                                        pos: 5911
                                        length: 14
                                    children: []
                                    pos: 5885
                                    length: 40
                                children: []
                                pos: 5884
                                length: 42
                            children: []
                            pos: 5796
                            length: 130
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: _ignorableProperties
                                    children: []
                                    pos: 5931
                                    length: 20
                                  right:
                                    type: identifier
                                    fields:
                                      text: ignorable
                                    children: []
                                    pos: 5955
                                    length: 9
                                children: []
                                pos: 5931
                                length: 33
                            children: []
                            pos: 5930
                            length: 35
                        children: []
                        pos: 5796
                        length: 169
                    children: []
                    pos: 5795
                    length: 171
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 5981
                    length: 12
                  pos: 5967
                  length: 36
                pos: 5792
                length: 211
              - type: return_statement
                fields:
                  text: |-
                    return new MapDeserializer(this,
                                    keyDeser, (JsonDeserializer<Object>) valueDeser, valueTypeDeser, ignorable);
                children: []
                pos: 6012
                length: 125
              pos: 5773
              length: 370
          children: []
          pos: 5553
          length: 590
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _isStdKeyDeser
              children: []
              pos: 6327
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JavaType mapType
                children: []
                pos: 6342
                length: 16
              pos: 6303
              length: 484
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: keyDeser
                            children: []
                            pos: 6404
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6416
                            length: 4
                        children: []
                        pos: 6404
                        length: 16
                    children: []
                    pos: 6403
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 6436
                    length: 12
                  pos: 6422
                  length: 36
                pos: 6400
                length: 58
              - type: local_variable_declaration
                fields:
                  text: JavaType keyType = mapType.getKeyType();
                children: []
                pos: 6467
                length: 40
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: keyType
                            children: []
                            pos: 6520
                            length: 7
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6531
                            length: 4
                        children: []
                        pos: 6520
                        length: 15
                    children: []
                    pos: 6519
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 6575
                    length: 12
                  pos: 6537
                  length: 60
                pos: 6516
                length: 81
              - type: local_variable_declaration
                fields:
                  text: Class<?> rawKeyType = keyType.getRawClass();
                children: []
                pos: 6606
                length: 44
              - type: return_statement
                fields:
                  text: |-
                    return ((rawKeyType == String.class || rawKeyType == Object.class)
                                    && isDefaultKeyDeserializer(keyDeser));
                children: []
                pos: 6659
                length: 122
              pos: 6390
              length: 397
          children: []
          pos: 6303
          length: 484
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setIgnorableProperties
              children: []
              pos: 6805
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String[] ignorable
                children: []
                pos: 6828
                length: 18
              pos: 6793
              length: 196
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    _ignorableProperties = (ignorable == null || ignorable.length == 0) ?
                                null : ArrayBuilders.arrayToSet(ignorable);
                children: []
                pos: 6858
                length: 125
              pos: 6848
              length: 141
          children: []
          pos: 6793
          length: 196
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: resolve
              children: []
              pos: 7225
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 7233
                length: 27
              pos: 7199
              length: 1398
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: _valueInstantiator.canCreateUsingDelegate()
                        children: []
                        pos: 7391
                        length: 43
                    children: []
                    pos: 7390
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: JavaType delegateType = _valueInstantiator.getDelegateType(ctxt.getConfig());
                    children: []
                    pos: 7450
                    length: 77
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: delegateType
                                children: []
                                pos: 7544
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7560
                                length: 4
                            children: []
                            pos: 7544
                            length: 20
                        children: []
                        pos: 7543
                        length: 22
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: throw_statement
                        fields:
                          text: |-
                            throw new IllegalArgumentException("Invalid delegate-creator definition for "+_mapType
                                                    +": value instantiator ("+_valueInstantiator.getClass().getName()
                                                    +") returned true for 'canCreateUsingDelegate()', but null for 'getDelegateType()'");
                        children: []
                        pos: 7584
                        length: 286
                      pos: 7566
                      length: 318
                    pos: 7540
                    length: 344
                  - type: expression_statement
                    fields:
                      text: _delegateDeserializer = findDeserializer(ctxt, delegateType,
                        null);
                    children: []
                    pos: 8152
                    length: 67
                  pos: 7436
                  length: 793
                pos: 7387
                length: 842
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: _valueInstantiator.canCreateFromObjectWith()
                        children: []
                        pos: 8242
                        length: 44
                    children: []
                    pos: 8241
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: SettableBeanProperty[] creatorProps = _valueInstantiator.getFromObjectArguments(ctxt.getConfig());
                    children: []
                    pos: 8302
                    length: 98
                  - type: expression_statement
                    fields:
                      text: _propertyBasedCreator = PropertyBasedCreator.construct(ctxt,
                        _valueInstantiator, creatorProps);
                    children: []
                    pos: 8413
                    length: 95
                  pos: 8288
                  length: 230
                pos: 8238
                length: 280
              - type: expression_statement
                fields:
                  text: _standardStringKey = _isStdKeyDeser(_mapType, _keyDeserializer);
                children: []
                pos: 8527
                length: 64
              pos: 7294
              length: 1303
          children: []
          pos: 7199
          length: 1398
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createContextual
              children: []
              pos: 8792
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 8809
                length: 27
              pos: 8751
              length: 1659
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: KeyDeserializer kd = _keyDeserializer;
                children: []
                pos: 8915
                length: 38
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: kd
                            children: []
                            pos: 8966
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8972
                            length: 4
                        children: []
                        pos: 8966
                        length: 10
                    children: []
                    pos: 8965
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: kd = ctxt.findKeyDeserializer(_mapType.getKeyType(), property);
                    children: []
                    pos: 8992
                    length: 63
                  pos: 8978
                  length: 87
                pos: 8962
                length: 281
              - type: local_variable_declaration
                fields:
                  text: JsonDeserializer<?> vd = _valueDeserializer;
                children: []
                pos: 9252
                length: 44
              - type: expression_statement
                fields:
                  text: vd = findConvertingContentDeserializer(ctxt, property, vd);
                children: []
                pos: 9351
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: vd
                            children: []
                            pos: 9423
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9429
                            length: 4
                        children: []
                        pos: 9423
                        length: 10
                    children: []
                    pos: 9422
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: vd = ctxt.findContextualValueDeserializer(_mapType.getContentType(),
                        property);
                    children: []
                    pos: 9449
                    length: 79
                  pos: 9435
                  length: 103
                pos: 9419
                length: 264
              - type: local_variable_declaration
                fields:
                  text: TypeDeserializer vtd = _valueTypeDeserializer;
                children: []
                pos: 9692
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: vtd
                            children: []
                            pos: 9751
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9758
                            length: 4
                        children: []
                        pos: 9751
                        length: 11
                    children: []
                    pos: 9750
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: vtd = vtd.forProperty(property);
                    children: []
                    pos: 9778
                    length: 32
                  pos: 9764
                  length: 56
                pos: 9747
                length: 73
              - type: local_variable_declaration
                fields:
                  text: HashSet<String> ignored = _ignorableProperties;
                children: []
                pos: 9829
                length: 47
              - type: local_variable_declaration
                fields:
                  text: AnnotationIntrospector intr = ctxt.getAnnotationIntrospector();
                children: []
                pos: 9885
                length: 63
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: intr
                                children: []
                                pos: 9961
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9969
                                length: 4
                            children: []
                            pos: 9961
                            length: 12
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: property
                                children: []
                                pos: 9977
                                length: 8
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9989
                                length: 4
                            children: []
                            pos: 9977
                            length: 16
                        children: []
                        pos: 9961
                        length: 32
                    children: []
                    pos: 9960
                    length: 34
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String[] moreToIgnore = intr.findPropertiesToIgnore(property.getMember());
                    children: []
                    pos: 10009
                    length: 74
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: moreToIgnore
                                children: []
                                pos: 10100
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 10116
                                length: 4
                            children: []
                            pos: 10100
                            length: 20
                        children: []
                        pos: 10099
                        length: 22
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: 'ignored = (ignored == null) ? new HashSet<String>()
                            : new HashSet<String>(ignored);'
                        children: []
                        pos: 10140
                        length: 83
                      - type: enhanced_for_statement
                        fields:
                          text: |-
                            for (String str : moreToIgnore) {
                                                ignored.add(str);
                                            }
                        children: []
                        pos: 10240
                        length: 89
                      pos: 10122
                      length: 221
                    pos: 10096
                    length: 247
                  pos: 9995
                  length: 358
                pos: 9957
                length: 396
              - type: return_statement
                fields:
                  text: return withResolved(kd, vtd, vd, ignored);
                children: []
                pos: 10362
                length: 42
              pos: 8905
              length: 1505
          children: []
          pos: 8751
          length: 1659
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getContentType
              children: []
              pos: 10631
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10601
              length: 96
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _mapType.getContentType();
                children: []
                pos: 10658
                length: 33
              pos: 10648
              length: 49
          children: []
          pos: 10601
          length: 96
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getContentDeserializer
              children: []
              pos: 10749
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10703
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _valueDeserializer;
                children: []
                pos: 10784
                length: 26
              pos: 10774
              length: 42
          children: []
          pos: 10703
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCachable
              children: []
              pos: 11579
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 11550
              length: 324
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return (_valueTypeDeserializer == null)
                                    && (_ignorableProperties == null);
                children: []
                pos: 11778
                length: 90
              pos: 11592
              length: 282
          children: []
          pos: 11550
          length: 324
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserialize
              children: []
              pos: 11955
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 11967
                length: 13
              pos: 11880
              length: 1448
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _propertyBasedCreator
                            children: []
                            pos: 12081
                            length: 21
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12106
                            length: 4
                        children: []
                        pos: 12081
                        length: 29
                    children: []
                    pos: 12080
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return _deserializeUsingCreator(jp, ctxt);
                    children: []
                    pos: 12126
                    length: 42
                  pos: 12112
                  length: 66
                pos: 12077
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _delegateDeserializer
                            children: []
                            pos: 12191
                            length: 21
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12216
                            length: 4
                        children: []
                        pos: 12191
                        length: 29
                    children: []
                    pos: 12190
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return (Map<Object,Object>) _valueInstantiator.createUsingDelegate(ctxt,
                                            _delegateDeserializer.deserialize(jp, ctxt));
                    children: []
                    pos: 12236
                    length: 138
                  pos: 12222
                  length: 162
                pos: 12187
                length: 197
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!_hasDefaultCreator"
                        children: []
                        pos: 12397
                        length: 19
                    children: []
                    pos: 12396
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw ctxt.instantiationException(getMapClass(), "No default
                        constructor found");
                    children: []
                    pos: 12432
                    length: 81
                  pos: 12418
                  length: 105
                pos: 12393
                length: 130
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 12600
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: t
                                    children: []
                                    pos: 12648
                                    length: 1
                                  right:
                                    type: field_access
                                    fields:
                                      text: JsonToken.START_OBJECT
                                    children: []
                                    pos: 12653
                                    length: 22
                                children: []
                                pos: 12648
                                length: 27
                              right:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: t
                                    children: []
                                    pos: 12679
                                    length: 1
                                  right:
                                    type: field_access
                                    fields:
                                      text: JsonToken.FIELD_NAME
                                    children: []
                                    pos: 12684
                                    length: 20
                                children: []
                                pos: 12679
                                length: 25
                            children: []
                            pos: 12648
                            length: 56
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 12708
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.END_OBJECT
                                children: []
                                pos: 12713
                                length: 20
                            children: []
                            pos: 12708
                            length: 25
                        children: []
                        pos: 12648
                        length: 85
                    children: []
                    pos: 12647
                    length: 87
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 12816
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.VALUE_STRING
                                children: []
                                pos: 12821
                                length: 22
                            children: []
                            pos: 12816
                            length: 27
                        children: []
                        pos: 12815
                        length: 29
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return (Map<Object,Object>) _valueInstantiator.createFromString(ctxt,
                            jp.getText());
                        children: []
                        pos: 12863
                        length: 84
                      pos: 12845
                      length: 116
                    pos: 12812
                    length: 149
                  - type: throw_statement
                    fields:
                      text: throw ctxt.mappingException(getMapClass());
                    children: []
                    pos: 12974
                    length: 43
                  pos: 12735
                  length: 292
                pos: 12644
                length: 383
              - type: local_variable_declaration
                fields:
                  text: final Map<Object,Object> result = (Map<Object,Object>) _valueInstantiator.createUsingDefault(ctxt);
                children: []
                pos: 13036
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: _standardStringKey
                        children: []
                        pos: 13148
                        length: 18
                    children: []
                    pos: 13147
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _readAndBindStringMap(jp, ctxt, result);
                    children: []
                    pos: 13182
                    length: 40
                  - type: return_statement
                    fields:
                      text: return result;
                    children: []
                    pos: 13235
                    length: 14
                  pos: 13168
                  length: 91
                pos: 13144
                length: 115
              - type: expression_statement
                fields:
                  text: _readAndBind(jp, ctxt, result);
                children: []
                pos: 13268
                length: 31
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 13308
                length: 14
              pos: 12067
              length: 1261
          children: []
          pos: 11880
          length: 1448
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserialize
              children: []
              pos: 13374
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 13386
                length: 13
              pos: 13334
              length: 623
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 13591
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 13639
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.START_OBJECT
                                children: []
                                pos: 13644
                                length: 22
                            children: []
                            pos: 13639
                            length: 27
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t
                                children: []
                                pos: 13670
                                length: 1
                              right:
                                type: field_access
                                fields:
                                  text: JsonToken.FIELD_NAME
                                children: []
                                pos: 13675
                                length: 20
                            children: []
                            pos: 13670
                            length: 25
                        children: []
                        pos: 13639
                        length: 56
                    children: []
                    pos: 13638
                    length: 58
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw ctxt.mappingException(getMapClass());
                    children: []
                    pos: 13711
                    length: 43
                  pos: 13697
                  length: 67
                pos: 13635
                length: 129
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: _standardStringKey
                        children: []
                        pos: 13777
                        length: 18
                    children: []
                    pos: 13776
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _readAndBindStringMap(jp, ctxt, result);
                    children: []
                    pos: 13811
                    length: 40
                  - type: return_statement
                    fields:
                      text: return result;
                    children: []
                    pos: 13864
                    length: 14
                  pos: 13797
                  length: 91
                pos: 13773
                length: 115
              - type: expression_statement
                fields:
                  text: _readAndBind(jp, ctxt, result);
                children: []
                pos: 13897
                length: 31
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 13937
                length: 14
              pos: 13525
              length: 432
          children: []
          pos: 13334
          length: 623
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserializeWithType
              children: []
              pos: 13991
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 14011
                length: 13
              pos: 13963
              length: 353
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeDeserializer.deserializeTypedFromObject(jp, ctxt);
                children: []
                pos: 14249
                length: 61
              pos: 14158
              length: 158
          children: []
          pos: 13963
          length: 353
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMapClass
              children: []
              pos: 14557
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14500
              length: 133
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return (Class<Map<Object,Object>>) _mapType.getRawClass();
                children: []
                pos: 14573
                length: 58
              pos: 14571
              length: 62
          children: []
          pos: 14500
          length: 133
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValueType
              children: []
              pos: 14665
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14639
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _mapType;
                children: []
                pos: 14682
                length: 16
              pos: 14680
              length: 20
          children: []
          pos: 14639
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _readAndBind
              children: []
              pos: 14895
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 14908
                length: 13
              pos: 14874
              length: 2368
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 15057
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 15105
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 15110
                            length: 22
                        children: []
                        pos: 15105
                        length: 27
                    children: []
                    pos: 15104
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = jp.nextToken();
                    children: []
                    pos: 15148
                    length: 19
                  pos: 15134
                  length: 43
                pos: 15101
                length: 76
              - type: local_variable_declaration
                fields:
                  text: final KeyDeserializer keyDes = _keyDeserializer;
                children: []
                pos: 15186
                length: 48
              - type: local_variable_declaration
                fields:
                  text: final JsonDeserializer<Object> valueDes = _valueDeserializer;
                children: []
                pos: 15243
                length: 61
              - type: local_variable_declaration
                fields:
                  text: final TypeDeserializer typeDeser = _valueTypeDeserializer;
                children: []
                pos: 15313
                length: 58
              - type: local_variable_declaration
                fields:
                  text: MapReferringAccumulator referringAccumulator = null;
                children: []
                pos: 15381
                length: 52
              - type: local_variable_declaration
                fields:
                  text: boolean useObjectId = valueDes.getObjectIdReader() != null;
                children: []
                pos: 15442
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: useObjectId
                        children: []
                        pos: 15514
                        length: 11
                    children: []
                    pos: 15513
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: referringAccumulator = new MapReferringAccumulator(_mapType.getContentType().getRawClass(),
                        result);
                    children: []
                    pos: 15541
                    length: 100
                  pos: 15527
                  length: 124
                pos: 15510
                length: 141
              - type: for_statement
                fields:
                  text: |-
                    for (; t == JsonToken.FIELD_NAME; t = jp.nextToken()) {
                                // Must point to field name
                                String fieldName = jp.getCurrentName();
                                Object key = keyDes.deserializeKey(fieldName, ctxt);
                                // And then the value...
                                t = jp.nextToken();
                                if (_ignorableProperties != null && _ignorableProperties.contains(fieldName)) {
                                    jp.skipChildren();
                                    continue;
                                }
                                try{
                                    // Note: must handle null explicitly here; value deserializers won't
                                    Object value;
                                    if (t == JsonToken.VALUE_NULL) {
                                        value = valueDes.getNullValue();
                                    } else if (typeDeser == null) {
                                        value = valueDes.deserialize(jp, ctxt);
                                    } else {
                                        value = valueDes.deserializeWithType(jp, ctxt, typeDeser);
                                    }
                                    /* !!! 23-Dec-2008, tatu: should there be an option to verify
                                     *   that there are no duplicate field names? (and/or what
                                     *   to do, keep-first or keep-last)
                                     */
                                    if (useObjectId) {
                                        referringAccumulator.put(key, value);
                                    } else {
                                        result.put(key, value);
                                    }
                                } catch (UnresolvedForwardReference reference) {
                                    handleUnresolvedReference(jp, referringAccumulator, key, reference);
                                } catch (Exception e) {
                                    wrapAndThrow(e, result, fieldName);
                                }
                            }
                children: []
                pos: 15660
                length: 1576
              pos: 15047
              length: 2195
          children: []
          pos: 14874
          length: 2368
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _readAndBindStringMap
              children: []
              pos: 17445
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 17467
                length: 13
              pos: 17424
              length: 2047
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 17616
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 17664
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 17669
                            length: 22
                        children: []
                        pos: 17664
                        length: 27
                    children: []
                    pos: 17663
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = jp.nextToken();
                    children: []
                    pos: 17707
                    length: 19
                  pos: 17693
                  length: 43
                pos: 17660
                length: 76
              - type: local_variable_declaration
                fields:
                  text: final JsonDeserializer<Object> valueDes = _valueDeserializer;
                children: []
                pos: 17745
                length: 61
              - type: local_variable_declaration
                fields:
                  text: final TypeDeserializer typeDeser = _valueTypeDeserializer;
                children: []
                pos: 17815
                length: 58
              - type: local_variable_declaration
                fields:
                  text: MapReferringAccumulator referringAccumulator = null;
                children: []
                pos: 17882
                length: 52
              - type: local_variable_declaration
                fields:
                  text: boolean useObjectId = valueDes.getObjectIdReader() != null;
                children: []
                pos: 17943
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: useObjectId
                        children: []
                        pos: 18015
                        length: 11
                    children: []
                    pos: 18014
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: referringAccumulator = new MapReferringAccumulator(_mapType.getContentType().getRawClass(),
                        result);
                    children: []
                    pos: 18042
                    length: 100
                  pos: 18028
                  length: 124
                pos: 18011
                length: 141
              - type: for_statement
                fields:
                  text: |-
                    for (; t == JsonToken.FIELD_NAME; t = jp.nextToken()) {
                                // Must point to field name
                                String fieldName = jp.getCurrentName();
                                // And then the value...
                                t = jp.nextToken();
                                if (_ignorableProperties != null && _ignorableProperties.contains(fieldName)) {
                                    jp.skipChildren();
                                    continue;
                                }
                                try {
                                    // Note: must handle null explicitly here; value deserializers won't
                                    Object value;
                                    if (t == JsonToken.VALUE_NULL) {
                                        value = valueDes.getNullValue();
                                    } else if (typeDeser == null) {
                                        value = valueDes.deserialize(jp, ctxt);
                                    } else {
                                        value = valueDes.deserializeWithType(jp, ctxt, typeDeser);
                                    }
                                    if (useObjectId) {
                                        referringAccumulator.put(fieldName, value);
                                    } else {
                                        result.put(fieldName, value);
                                    }
                                } catch (UnresolvedForwardReference reference) {
                                    handleUnresolvedReference(jp, referringAccumulator, fieldName, reference);
                                } catch (Exception e) {
                                    wrapAndThrow(e, result, fieldName);
                                }
                            }
                children: []
                pos: 18161
                length: 1304
              pos: 17606
              length: 1865
          children: []
          pos: 17424
          length: 2047
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _deserializeUsingCreator
              children: []
              pos: 19543
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 19568
                length: 13
              pos: 19481
              length: 2913
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final PropertyBasedCreator creator = _propertyBasedCreator;
                children: []
                pos: 19678
                length: 59
              - type: local_variable_declaration
                fields:
                  text: PropertyValueBuffer buffer = creator.startBuilding(jp, ctxt,
                    null);
                children: []
                pos: 19799
                length: 67
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = jp.getCurrentToken();
                children: []
                pos: 19876
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 19924
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 19929
                            length: 22
                        children: []
                        pos: 19924
                        length: 27
                    children: []
                    pos: 19923
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = jp.nextToken();
                    children: []
                    pos: 19967
                    length: 19
                  pos: 19953
                  length: 43
                pos: 19920
                length: 76
              - type: local_variable_declaration
                fields:
                  text: final JsonDeserializer<Object> valueDes = _valueDeserializer;
                children: []
                pos: 20005
                length: 61
              - type: local_variable_declaration
                fields:
                  text: final TypeDeserializer typeDeser = _valueTypeDeserializer;
                children: []
                pos: 20075
                length: 58
              - type: for_statement
                fields:
                  text: "for (; t == JsonToken.FIELD_NAME; t = jp.nextToken()) {\n
                    \           String propName = jp.getCurrentName();\n            t
                    = jp.nextToken(); // to get to value\n            if (_ignorableProperties
                    != null && _ignorableProperties.contains(propName)) {\n                jp.skipChildren();
                    // and skip it (in case of array/object)\n                continue;\n
                    \           }\n            // creator property?\n            SettableBeanProperty
                    prop = creator.findCreatorProperty(propName);\n            if
                    (prop != null) {\n                // Last property to set?\n                Object
                    value = prop.deserialize(jp, ctxt);\n                if (buffer.assignParameter(prop.getCreatorIndex(),
                    value)) {\n                    jp.nextToken();\n                    Map<Object,Object>
                    result;\n                    try {\n                        result
                    = (Map<Object,Object>)creator.build(ctxt, buffer);\n                    }
                    catch (Exception e) {\n                        wrapAndThrow(e,
                    _mapType.getRawClass(), propName);\n                        return
                    null;\n                    }\n                    _readAndBind(jp,
                    ctxt, result);\n                    return result;\n                }\n
                    \               continue;\n            }\n            // other
                    property? needs buffering\n            String fieldName = jp.getCurrentName();\n
                    \           Object key = _keyDeserializer.deserializeKey(fieldName,
                    ctxt);\n            Object value; \n\n            try {\n                if
                    (t == JsonToken.VALUE_NULL) {\n                    value = valueDes.getNullValue();\n
                    \               } else if (typeDeser == null) {\n                    value
                    = valueDes.deserialize(jp, ctxt);\n                } else {\n
                    \                   value = valueDes.deserializeWithType(jp, ctxt,
                    typeDeser);\n                }\n            } catch (Exception
                    e) {\n                wrapAndThrow(e, _mapType.getRawClass(),
                    propName);\n                return null;\n            }\n            buffer.bufferMapProperty(key,
                    value);\n        }"
                children: []
                pos: 20142
                length: 1957
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return (Map<Object,Object>)creator.build(ctxt, buffer);
                      children: []
                      pos: 22207
                      length: 55
                    pos: 22193
                    length: 79
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (Exception e) {
                                      wrapAndThrow(e, _mapType.getRawClass(), null);
                                      return null;
                                  }
                      children: []
                      pos: 22273
                      length: 115
                    pos: 22189
                    length: 199
                children: []
                pos: 22189
                length: 199
              pos: 19668
              length: 2726
          children: []
          pos: 19481
          length: 2913
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapAndThrow
              children: []
              pos: 22444
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable t
                children: []
                pos: 22457
                length: 11
              pos: 22400
              length: 144
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: wrapAndThrow(t, ref, null);
                children: []
                pos: 22511
                length: 27
              pos: 22501
              length: 43
          children: []
          pos: 22400
          length: 144
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapAndThrow
              children: []
              pos: 22643
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable t
                children: []
                pos: 22656
                length: 11
              pos: 22628
              length: 619
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (t instanceof InvocationTargetException && t.getCause() != null) {
                                t = t.getCause();
                            }
                children: []
                pos: 22762
                length: 112
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: t instanceof Error
                        children: []
                        pos: 22949
                        length: 18
                    children: []
                    pos: 22948
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw (Error) t;
                    children: []
                    pos: 22983
                    length: 16
                  pos: 22969
                  length: 40
                pos: 22945
                length: 64
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: t instanceof IOException
                            children: []
                            pos: 23067
                            length: 24
                          right:
                            type: unary_expression
                            fields:
                              text: "!(t instanceof JsonMappingException)"
                            children: []
                            pos: 23095
                            length: 36
                        children: []
                        pos: 23067
                        length: 64
                    children: []
                    pos: 23066
                    length: 66
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw (IOException) t;
                    children: []
                    pos: 23147
                    length: 22
                  pos: 23133
                  length: 46
                pos: 23063
                length: 116
              - type: throw_statement
                fields:
                  text: throw JsonMappingException.wrapWithPath(t, ref, key);
                children: []
                pos: 23188
                length: 53
              pos: 22716
              length: 531
          children: []
          pos: 22628
          length: 619
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleUnresolvedReference
              children: []
              pos: 23266
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser jp
                children: []
                pos: 23292
                length: 13
              pos: 23253
              length: 500
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: accumulator
                            children: []
                            pos: 23460
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 23475
                            length: 4
                        children: []
                        pos: 23460
                        length: 19
                    children: []
                    pos: 23459
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw JsonMappingException.from(jp, "Unresolved forward
                        reference but no identity info.", reference);
                    children: []
                    pos: 23495
                    length: 101
                  pos: 23481
                  length: 125
                pos: 23456
                length: 150
              - type: local_variable_declaration
                fields:
                  text: Referring referring = accumulator.handleUnresolvedReference(reference,
                    key);
                children: []
                pos: 23615
                length: 76
              - type: expression_statement
                fields:
                  text: reference.getRoid().appendReferring(referring);
                children: []
                pos: 23700
                length: 47
              pos: 23446
              length: 307
          children: []
          pos: 23253
          length: 500
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: MapReferringAccumulator
              children: []
              pos: 23786
              length: 23
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Class<?> _valueType;
                children: []
                pos: 23820
                length: 34
              - type: field_declaration
                fields:
                  text: private Map<Object,Object> _result;
                children: []
                pos: 23863
                length: 35
              - type: field_declaration
                fields:
                  text: private List<MapReferring> _accumulator = new ArrayList<MapReferring>();
                children: []
                pos: 23995
                length: 72
              - type: constructor_declaration
                fields:
                  text: |-
                    public MapReferringAccumulator(Class<?> valueType, Map<Object, Object> result) {
                                _valueType = valueType;
                                _result = result;
                            }
                children: []
                pos: 24077
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: put
                    children: []
                    pos: 24255
                    length: 3
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object key
                      children: []
                      pos: 24259
                      length: 10
                    pos: 24243
                    length: 299
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: _accumulator.isEmpty()
                              children: []
                              pos: 24311
                              length: 22
                          children: []
                          pos: 24310
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: _result.put(key, value);
                          children: []
                          pos: 24353
                          length: 24
                        pos: 24335
                        length: 56
                      pos: 24307
                      length: 225
                    pos: 24293
                    length: 249
                children: []
                pos: 24243
                length: 299
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleUnresolvedReference
                    children: []
                    pos: 24569
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: UnresolvedForwardReference reference
                      children: []
                      pos: 24595
                      length: 36
                    pos: 24552
                    length: 251
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: MapReferring id = new MapReferring(this, reference,
                          _valueType, key);
                      children: []
                      pos: 24667
                      length: 69
                    - type: expression_statement
                      fields:
                        text: _accumulator.add(id);
                      children: []
                      pos: 24749
                      length: 21
                    - type: return_statement
                      fields:
                        text: return id;
                      children: []
                      pos: 24783
                      length: 10
                    pos: 24653
                    length: 150
                children: []
                pos: 24552
                length: 251
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveForwardReference
                    children: []
                    pos: 24825
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object id
                      children: []
                      pos: 24849
                      length: 9
                    pos: 24813
                    length: 1003
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<MapReferring> iterator = _accumulator.iterator();
                      children: []
                      pos: 24915
                      length: 58
                    - type: local_variable_declaration
                      fields:
                        text: Map<Object,Object> previous = _result;
                      children: []
                      pos: 25231
                      length: 38
                    - type: while_statement
                      fields:
                        text: |-
                          while (iterator.hasNext()) {
                                          MapReferring ref = iterator.next();
                                          if (ref.hasId(id)) {
                                              iterator.remove();
                                              previous.put(ref.key, value);
                                              previous.putAll(ref.next);
                                              return;
                                          }
                                          previous = ref.next;
                                      }
                      children: []
                      pos: 25282
                      length: 350
                    - type: throw_statement
                      fields:
                        text: |-
                          throw new IllegalArgumentException("Trying to resolve a forward reference with id [" + id
                                              + "] that wasn't previously seen as unresolved.");
                      children: []
                      pos: 25646
                      length: 160
                    pos: 24901
                    length: 915
                children: []
                pos: 24813
                length: 1003
              pos: 23759
              length: 2063
          children: []
          pos: 23759
          length: 2063
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: MapReferring
              children: []
              pos: 26035
              length: 12
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final MapReferringAccumulator _parent;
                children: []
                pos: 26076
                length: 46
              - type: field_declaration
                fields:
                  text: public final Map<Object, Object> next = new LinkedHashMap<Object,
                    Object>();
                children: []
                pos: 26132
                length: 76
              - type: field_declaration
                fields:
                  text: public final Object key;
                children: []
                pos: 26217
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    protected MapReferring(MapReferringAccumulator parent, UnresolvedForwardReference ref,
                                    Class<?> valueType, Object key)
                            {
                                super(ref, valueType);
                                _parent = parent;
                                this.key = key;
                            }
                children: []
                pos: 26259
                length: 247
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleResolvedForwardReference
                    children: []
                    pos: 26546
                    length: 30
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object id
                      children: []
                      pos: 26577
                      length: 9
                    pos: 26516
                    length: 172
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _parent.resolveForwardReference(id, value);
                      children: []
                      pos: 26635
                      length: 43
                    pos: 26621
                    length: 67
                children: []
                pos: 26516
                length: 172
              pos: 26008
              length: 686
          children: []
          pos: 26008
          length: 686
        pos: 1097
        length: 25599
    children: []
    pos: 1097
    length: 25599
  pos: 0
  length: 26697
text_diff: "--- before\n+++ after\n@@ -300,9 +300,7 @@\n         /* As per [databind#735],
  existence of value or key deserializer (only passed\n          * if annotated to
  use non-standard one) should also prevent caching.\n          */\n-        return
  (_valueDeserializer == null)\n-                && (_keyDeserializer == null)\n-
  \               && (_valueTypeDeserializer == null)\n+        return (_valueTypeDeserializer
  == null)\n                 && (_ignorableProperties == null);\n     }\n \n"
tree_diff: |+
  New cluster:
  UPDATE from return (_valueDeserializer == null)
                  && (_keyDeserializer == null)
                  && (_valueTypeDeserializer == null)
                  && (_ignorableProperties == null); to return (_valueTypeDeserializer == null)
                  && (_ignorableProperties == null);
  ------------
  ===
  update-node
  ---
  return_statement: return (_valueDeserializer == null)
                  && (_keyDeserializer == null)
                  && (_valueTypeDeserializer == null)
                  && (_ignorableProperties == null); [11778,11962]
  replace return (_valueDeserializer == null)
                  && (_keyDeserializer == null)
                  && (_valueTypeDeserializer == null)
                  && (_ignorableProperties == null); by return (_valueTypeDeserializer == null)
                  && (_ignorableProperties == null);

...
