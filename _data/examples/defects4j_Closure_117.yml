---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypeValidator
        children: []
        pos: 2647
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 2666
          length: 40
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 2709
          length: 42
        - type: field_declaration
          fields:
            text: private final JSType allValueTypes;
          children: []
          pos: 2754
          length: 35
        - type: field_declaration
          fields:
            text: private boolean shouldReport = true;
          children: []
          pos: 2792
          length: 36
        - type: field_declaration
          fields:
            text: private final JSType nullOrUndefined;
          children: []
          pos: 2831
          length: 37
        - type: field_declaration
          fields:
            text: private final List<TypeMismatch> mismatches = Lists.newArrayList();
          children: []
          pos: 3083
          length: 67
        - type: field_declaration
          fields:
            text: |-
              private static final String FOUND_REQUIRED =
                    "{0}\n" +
                    "found   : {1}\n" +
                    "required: {2}";
          children: []
          pos: 3173
          length: 109
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType INVALID_CAST =
                    DiagnosticType.warning("JSC_INVALID_CAST",
                        "invalid cast - must be a subtype or supertype\n" +
                        "from: {0}\n" +
                        "to  : {1}");
          children: []
          pos: 3286
          length: 203
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType TYPE_MISMATCH_WARNING =
                    DiagnosticType.warning(
                        "JSC_TYPE_MISMATCH",
                        "{0}");
          children: []
          pos: 3493
          length: 130
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MISSING_EXTENDS_TAG_WARNING =
                    DiagnosticType.warning(
                        "JSC_MISSING_EXTENDS_TAG",
                        "Missing @extends tag on type {0}");
          children: []
          pos: 3627
          length: 171
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType DUP_VAR_DECLARATION =
                    DiagnosticType.warning("JSC_DUP_VAR_DECLARATION",
                        "variable {0} redefined with type {1}, " +
                        "original definition at {2}:{3} with type {4}");
          children: []
          pos: 3802
          length: 217
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType HIDDEN_PROPERTY_MISMATCH =
                    DiagnosticType.warning("JSC_HIDDEN_PROPERTY_MISMATCH",
                        "mismatch of the {0} property type and the type " +
                        "of the property it overrides from superclass {1}\n" +
                        "original: {2}\n" +
                        "override: {3}");
          children: []
          pos: 4023
          length: 300
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType INTERFACE_METHOD_NOT_IMPLEMENTED =
                    DiagnosticType.warning(
                        "JSC_INTERFACE_METHOD_NOT_IMPLEMENTED",
                        "property {0} on interface {1} is not implemented by type {2}");
          children: []
          pos: 4327
          length: 217
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType HIDDEN_INTERFACE_PROPERTY_MISMATCH =
                    DiagnosticType.warning(
                      "JSC_HIDDEN_INTERFACE_PROPERTY_MISMATCH",
                      "mismatch of the {0} property type and the type " +
                      "of the property it overrides from interface {1}\n" +
                      "original: {2}\n" +
                      "override: {3}");
          children: []
          pos: 4548
          length: 320
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_TYPEOF_VALUE =
                    DiagnosticType.warning("JSC_UNKNOWN_TYPEOF_VALUE", "unknown type: {0}");
          children: []
          pos: 4872
          length: 129
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ILLEGAL_PROPERTY_ACCESS =
                    DiagnosticType.warning("JSC_ILLEGAL_PROPERTY_ACCESS",
                                           "Cannot do {0} access on a {1}");
          children: []
          pos: 5005
          length: 176
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticGroup ALL_DIAGNOSTICS = new DiagnosticGroup(
                    INVALID_CAST,
                    TYPE_MISMATCH_WARNING,
                    MISSING_EXTENDS_TAG_WARNING,
                    DUP_VAR_DECLARATION,
                    HIDDEN_PROPERTY_MISMATCH,
                    INTERFACE_METHOD_NOT_IMPLEMENTED,
                    HIDDEN_INTERFACE_PROPERTY_MISMATCH,
                    UNKNOWN_TYPEOF_VALUE,
                    ILLEGAL_PROPERTY_ACCESS);
          children: []
          pos: 5185
          length: 352
        - type: constructor_declaration
          fields:
            text: |-
              TypeValidator(AbstractCompiler compiler) {
                  this.compiler = compiler;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.allValueTypes = typeRegistry.createUnionType(
                      STRING_TYPE, NUMBER_TYPE, BOOLEAN_TYPE, NULL_TYPE, VOID_TYPE);
                  this.nullOrUndefined = typeRegistry.createUnionType(
                      NULL_TYPE, VOID_TYPE);
                }
          children: []
          pos: 5541
          length: 342
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMismatches
              children: []
              pos: 6103
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6080
              length: 67
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return mismatches;
                children: []
                pos: 6125
                length: 18
              pos: 6119
              length: 28
          children: []
          pos: 6080
          length: 67
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setShouldReport
              children: []
              pos: 6156
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean report
                children: []
                pos: 6172
                length: 14
              pos: 6151
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.shouldReport = report;
                children: []
                pos: 6194
                length: 27
              pos: 6188
              length: 37
          children: []
          pos: 6151
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectValidTypeofName
              children: []
              pos: 6473
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 6495
                length: 15
              pos: 6468
              length: 148
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: report(JSError.make(t.getSourceName(), n, UNKNOWN_TYPEOF_VALUE,
                    found));
                children: []
                pos: 6540
                length: 72
              pos: 6534
              length: 82
          children: []
          pos: 6468
          length: 148
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectObject
              children: []
              pos: 6887
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 6900
                length: 15
              pos: 6879
              length: 205
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.matchesObjectContext()"
                        children: []
                        pos: 6960
                        length: 28
                    children: []
                    pos: 6959
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, OBJECT_TYPE);
                    children: []
                    pos: 6998
                    length: 39
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 7044
                    length: 13
                  pos: 6990
                  length: 73
                pos: 6956
                length: 107
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 7068
                length: 12
              pos: 6950
              length: 134
          children: []
          pos: 6879
          length: 205
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectActualObject
              children: []
              pos: 7217
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 7236
                length: 15
              pos: 7212
              length: 159
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.isObject()"
                        children: []
                        pos: 7296
                        length: 16
                    children: []
                    pos: 7295
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, OBJECT_TYPE);
                    children: []
                    pos: 7322
                    length: 39
                  pos: 7314
                  length: 53
                pos: 7292
                length: 75
              pos: 7286
              length: 85
          children: []
          pos: 7212
          length: 159
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectAnyObject
              children: []
              pos: 7542
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 7558
                length: 15
              pos: 7537
              length: 253
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSType anyObjectType = getNativeType(NO_OBJECT_TYPE);
                children: []
                pos: 7614
                length: 53
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!anyObjectType.isSubtype(type)"
                            children: []
                            pos: 7676
                            length: 30
                          right:
                            type: unary_expression
                            fields:
                              text: "!type.isEmptyType()"
                            children: []
                            pos: 7710
                            length: 19
                        children: []
                        pos: 7676
                        length: 53
                    children: []
                    pos: 7675
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, anyObjectType);
                    children: []
                    pos: 7739
                    length: 41
                  pos: 7731
                  length: 55
                pos: 7672
                length: 114
              pos: 7608
              length: 182
          children: []
          pos: 7537
          length: 253
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectString
              children: []
              pos: 7983
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 7996
                length: 15
              pos: 7978
              length: 165
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.matchesStringContext()"
                        children: []
                        pos: 8056
                        length: 28
                    children: []
                    pos: 8055
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, STRING_TYPE);
                    children: []
                    pos: 8094
                    length: 39
                  pos: 8086
                  length: 53
                pos: 8052
                length: 87
              pos: 8046
              length: 97
          children: []
          pos: 7978
          length: 165
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectNumber
              children: []
              pos: 8336
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 8349
                length: 15
              pos: 8331
              length: 165
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.matchesNumberContext()"
                        children: []
                        pos: 8409
                        length: 28
                    children: []
                    pos: 8408
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, NUMBER_TYPE);
                    children: []
                    pos: 8447
                    length: 39
                  pos: 8439
                  length: 53
                pos: 8405
                length: 87
              pos: 8399
              length: 97
          children: []
          pos: 8331
          length: 165
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectBitwiseable
              children: []
              pos: 8711
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 8729
                length: 15
              pos: 8706
              length: 206
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!type.matchesNumberContext()"
                            children: []
                            pos: 8789
                            length: 28
                          right:
                            type: unary_expression
                            fields:
                              text: "!type.isSubtype(allValueTypes)"
                            children: []
                            pos: 8821
                            length: 30
                        children: []
                        pos: 8789
                        length: 62
                    children: []
                    pos: 8788
                    length: 64
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, allValueTypes);
                    children: []
                    pos: 8861
                    length: 41
                  pos: 8853
                  length: 55
                pos: 8785
                length: 123
              pos: 8779
              length: 133
          children: []
          pos: 8706
          length: 206
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectStringOrNumber
              children: []
              pos: 9127
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 9155
                length: 15
              pos: 9122
              length: 214
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!type.matchesNumberContext()"
                            children: []
                            pos: 9215
                            length: 28
                          right:
                            type: unary_expression
                            fields:
                              text: "!type.matchesStringContext()"
                            children: []
                            pos: 9247
                            length: 28
                        children: []
                        pos: 9215
                        length: 60
                    children: []
                    pos: 9214
                    length: 62
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, NUMBER_STRING);
                    children: []
                    pos: 9285
                    length: 41
                  pos: 9277
                  length: 55
                pos: 9211
                length: 121
              pos: 9205
              length: 131
          children: []
          pos: 9122
          length: 214
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectNotNullOrUndefined
              children: []
              pos: 9678
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 9710
                length: 15
              pos: 9670
              length: 923
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: unary_expression
                                    fields:
                                      text: "!type.isNoType()"
                                    children: []
                                    pos: 9791
                                    length: 16
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!type.isUnknownType()"
                                    children: []
                                    pos: 9811
                                    length: 21
                                children: []
                                pos: 9791
                                length: 41
                              right:
                                type: method_invocation
                                fields:
                                  text: type.isSubtype(nullOrUndefined)
                                children: []
                                pos: 9844
                                length: 31
                            children: []
                            pos: 9791
                            length: 84
                          right:
                            type: unary_expression
                            fields:
                              text: "!containsForwardDeclaredUnresolvedName(type)"
                            children: []
                            pos: 9887
                            length: 44
                        children: []
                        pos: 9791
                        length: 140
                    children: []
                    pos: 9790
                    length: 142
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: n.isGetProp()
                                    children: []
                                    pos: 10400
                                    length: 13
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!t.inGlobalScope()"
                                    children: []
                                    pos: 10427
                                    length: 18
                                children: []
                                pos: 10400
                                length: 45
                              right:
                                type: method_invocation
                                fields:
                                  text: type.isNullType()
                                children: []
                                pos: 10449
                                length: 17
                            children: []
                            pos: 10400
                            length: 66
                        children: []
                        pos: 10399
                        length: 68
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 10478
                        length: 12
                      pos: 10468
                      length: 30
                    pos: 10396
                    length: 102
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, expectedType);
                    children: []
                    pos: 10506
                    length: 40
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 10553
                    length: 13
                  pos: 9933
                  length: 639
                pos: 9787
                length: 785
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 10577
                length: 12
              pos: 9781
              length: 812
          children: []
          pos: 9670
          length: 923
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: containsForwardDeclaredUnresolvedName
              children: []
              pos: 10613
              length: 37
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSType type
                children: []
                pos: 10651
                length: 11
              pos: 10597
              length: 310
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: type.isUnionType()
                        children: []
                        pos: 10674
                        length: 18
                    children: []
                    pos: 10673
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (JSType alt : type.toMaybeUnionType().getAlternates()) {
                                if (containsForwardDeclaredUnresolvedName(alt)) {
                                  return true;
                                }
                              }
                    children: []
                    pos: 10702
                    length: 159
                  pos: 10694
                  length: 173
                pos: 10670
                length: 197
              - type: return_statement
                fields:
                  text: return type.isNoResolvedType();
                children: []
                pos: 10872
                length: 31
              pos: 10664
              length: 243
          children: []
          pos: 10597
          length: 310
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectSwitchMatchesCase
              children: []
              pos: 11021
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 11045
                length: 15
              pos: 11016
              length: 627
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!switchType.canTestForShallowEqualityWith(caseType)"
                            children: []
                            pos: 11354
                            length: 51
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: caseType.autoboxesTo()
                                        children: []
                                        pos: 11418
                                        length: 22
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 11444
                                        length: 4
                                    children: []
                                    pos: 11418
                                    length: 30
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!caseType.autoboxesTo().isSubtype(switchType)"
                                    children: []
                                    pos: 11464
                                    length: 45
                                children: []
                                pos: 11418
                                length: 91
                            children: []
                            pos: 11417
                            length: 93
                        children: []
                        pos: 11354
                        length: 156
                    children: []
                    pos: 11353
                    length: 158
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        mismatch(t, n.getFirstChild(),
                                  "case expression doesn't match switch",
                                  caseType, switchType);
                    children: []
                    pos: 11520
                    length: 113
                  pos: 11512
                  length: 127
                pos: 11350
                length: 289
              pos: 11112
              length: 531
          children: []
          pos: 11016
          length: 627
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectIndexMatch
              children: []
              pos: 12042
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 12059
                length: 15
              pos: 12037
              length: 1295
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(n.isGetElem());
                children: []
                pos: 12148
                length: 40
              - type: local_variable_declaration
                fields:
                  text: Node indexNode = n.getLastChild();
                children: []
                pos: 12193
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: objType.isStruct()
                        children: []
                        pos: 12236
                        length: 18
                    children: []
                    pos: 12235
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        report(JSError.make(t.getSourceName(), indexNode,
                                                  ILLEGAL_PROPERTY_ACCESS, "'[]'", "struct"));
                    children: []
                    pos: 12264
                    length: 120
                  pos: 12256
                  length: 134
                pos: 12232
                length: 158
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: objType.isUnknownType()
                        children: []
                        pos: 12399
                        length: 23
                    children: []
                    pos: 12398
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: expectStringOrNumber(t, indexNode, indexType, "property
                        access");
                    children: []
                    pos: 12432
                    length: 65
                  pos: 12424
                  length: 79
                pos: 12395
                length: 933
              pos: 12142
              length: 1190
          children: []
          pos: 12037
          length: 1295
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanAssignToPropertyOf
              children: []
              pos: 13837
              length: 27
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 13865
                length: 15
              pos: 13829
              length: 944
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!leftType.isNoType()"
                            children: []
                            pos: 14030
                            length: 20
                          right:
                            type: unary_expression
                            fields:
                              text: "!rightType.isSubtype(leftType)"
                            children: []
                            pos: 14054
                            length: 30
                        children: []
                        pos: 14030
                        length: 54
                    children: []
                    pos: 14029
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: JSType ownerType = getJSType(owner);
                    children: []
                    pos: 14258
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: ownerType.isFunctionPrototypeType()
                            children: []
                            pos: 14305
                            length: 35
                        children: []
                        pos: 14304
                        length: 37
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: FunctionType ownerFn = ownerType.toObjectType().getOwnerFunction();
                        children: []
                        pos: 14352
                        length: 67
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: and
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: ownerFn.isInterface()
                                        children: []
                                        pos: 14432
                                        length: 21
                                      right:
                                        type: method_invocation
                                        fields:
                                          text: rightType.isFunctionType()
                                        children: []
                                        pos: 14469
                                        length: 26
                                    children: []
                                    pos: 14432
                                    length: 63
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: leftType.isFunctionType()
                                    children: []
                                    pos: 14499
                                    length: 25
                                children: []
                                pos: 14432
                                length: 92
                            children: []
                            pos: 14431
                            length: 94
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return true;
                            children: []
                            pos: 14538
                            length: 12
                          pos: 14526
                          length: 34
                        pos: 14428
                        length: 132
                      pos: 14342
                      length: 226
                    pos: 14301
                    length: 267
                  - type: expression_statement
                    fields:
                      text: |-
                        mismatch(t, n,
                                  "assignment to property " + propName + " of " +
                                  getReadableJSTypeName(owner, true),
                                  rightType, leftType);
                    children: []
                    pos: 14576
                    length: 150
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 14733
                    length: 13
                  pos: 14086
                  length: 666
                pos: 14026
                length: 726
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 14757
                length: 12
              pos: 13960
              length: 813
          children: []
          pos: 13829
          length: 944
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanAssignTo
              children: []
              pos: 15223
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 15241
                length: 15
              pos: 15215
              length: 242
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!rightType.isSubtype(leftType)"
                        children: []
                        pos: 15329
                        length: 30
                    children: []
                    pos: 15328
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, rightType, leftType);
                    children: []
                    pos: 15369
                    length: 41
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 15417
                    length: 13
                  pos: 15361
                  length: 75
                pos: 15325
                length: 111
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 15441
                length: 12
              pos: 15319
              length: 138
          children: []
          pos: 15215
          length: 242
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectArgumentMatchesParameter
              children: []
              pos: 15905
              length: 30
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 15936
                length: 15
              pos: 15900
              length: 417
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!argType.isSubtype(paramType)"
                        children: []
                        pos: 16039
                        length: 29
                    children: []
                    pos: 16038
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        mismatch(t, n,
                                  String.format("actual parameter %d of %s does not match " +
                                      "formal parameter", ordinal,
                                      getReadableJSTypeName(callNode.getFirstChild(), false)),
                                  argType, paramType);
                    children: []
                    pos: 16078
                    length: 229
                  pos: 16070
                  length: 243
                pos: 16035
                length: 278
              pos: 16029
              length: 288
          children: []
          pos: 15900
          length: 417
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanOverride
              children: []
              pos: 16811
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 16829
                length: 15
              pos: 16806
              length: 417
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!overridingType.isSubtype(hiddenType)"
                        children: []
                        pos: 16951
                        length: 37
                    children: []
                    pos: 16950
                    length: 39
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        registerMismatch(overridingType, hiddenType,
                                  report(t.makeError(n, HIDDEN_PROPERTY_MISMATCH, propertyName,
                                    ownerType.toString(), hiddenType.toString(),
                                    overridingType.toString())));
                    children: []
                    pos: 16998
                    length: 215
                  pos: 16990
                  length: 229
                pos: 16947
                length: 272
              pos: 16941
              length: 282
          children: []
          pos: 16806
          length: 417
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectSuperType
              children: []
              pos: 17518
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 17534
                length: 15
              pos: 17513
              length: 1146
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType subCtor = subObject.getConstructor();
                children: []
                pos: 17617
                length: 50
              - type: local_variable_declaration
                fields:
                  text: ObjectType implicitProto = subObject.getImplicitPrototype();
                children: []
                pos: 17672
                length: 60
              - type: local_variable_declaration
                fields:
                  text: |-
                    ObjectType declaredSuper =
                            implicitProto == null ? null : implicitProto.getImplicitPrototype();
                children: []
                pos: 17737
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: declaredSuper
                                children: []
                                pos: 17849
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 17866
                                length: 4
                            children: []
                            pos: 17849
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: declaredSuper.isTemplatizedType()
                            children: []
                            pos: 17874
                            length: 33
                        children: []
                        pos: 17849
                        length: 58
                    children: []
                    pos: 17848
                    length: 60
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        declaredSuper =
                                  declaredSuper.toMaybeTemplatizedType().getReferencedType();
                    children: []
                    pos: 17917
                    length: 85
                  pos: 17909
                  length: 99
                pos: 17845
                length: 163
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: declaredSuper
                                    children: []
                                    pos: 18017
                                    length: 13
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 18034
                                    length: 4
                                children: []
                                pos: 18017
                                length: 21
                              right:
                                type: unary_expression
                                fields:
                                  text: "!(superObject instanceof UnknownType)"
                                children: []
                                pos: 18050
                                length: 37
                            children: []
                            pos: 18017
                            length: 70
                          right:
                            type: unary_expression
                            fields:
                              text: "!declaredSuper.isEquivalentTo(superObject)"
                            children: []
                            pos: 18099
                            length: 42
                        children: []
                        pos: 18017
                        length: 124
                    children: []
                    pos: 18016
                    length: 126
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: declaredSuper.isEquivalentTo(getNativeType(OBJECT_TYPE))
                            children: []
                            pos: 18155
                            length: 56
                        children: []
                        pos: 18154
                        length: 58
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: |-
                            registerMismatch(superObject, declaredSuper, report(
                                        t.makeError(n, MISSING_EXTENDS_TAG_WARNING, subObject.toString())));
                        children: []
                        pos: 18223
                        length: 133
                      pos: 18213
                      length: 151
                    pos: 18151
                    length: 366
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: unary_expression
                            fields:
                              text: "!subCtor.hasCachedValues()"
                            children: []
                            pos: 18562
                            length: 26
                        children: []
                        pos: 18561
                        length: 28
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: subCtor.setPrototypeBasedOn(superObject);
                        children: []
                        pos: 18600
                        length: 41
                      pos: 18590
                      length: 59
                    pos: 18558
                    length: 91
                  pos: 18143
                  length: 512
                pos: 18013
                length: 642
              pos: 17611
              length: 1048
          children: []
          pos: 17513
          length: 1146
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanCast
              children: []
              pos: 18988
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 19002
                length: 15
              pos: 18983
              length: 248
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.canCastTo(castType)"
                        children: []
                        pos: 19067
                        length: 25
                    children: []
                    pos: 19066
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        registerMismatch(type, castType, report(t.makeError(n, INVALID_CAST,
                                  type.toString(), castType.toString())));
                    children: []
                    pos: 19102
                    length: 119
                  pos: 19094
                  length: 133
                pos: 19063
                length: 164
              pos: 19057
              length: 174
          children: []
          pos: 18983
          length: 248
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectUndeclaredVariable
              children: []
              pos: 19894
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String sourceName
                children: []
                pos: 19919
                length: 17
              pos: 19890
              length: 2334
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Var newVar = var;
                children: []
                pos: 20038
                length: 17
              - type: local_variable_declaration
                fields:
                  text: boolean allowDupe = false;
                children: []
                pos: 20060
                length: 26
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: n.isGetProp()
                            children: []
                            pos: 20095
                            length: 13
                          right:
                            type: method_invocation
                            fields:
                              text: NodeUtil.isObjectLitKey(n)
                            children: []
                            pos: 20120
                            length: 26
                        children: []
                        pos: 20095
                        length: 51
                    children: []
                    pos: 20094
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: JSDocInfo info = n.getJSDocInfo();
                    children: []
                    pos: 20156
                    length: 34
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: info
                                children: []
                                pos: 20201
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 20209
                                length: 4
                            children: []
                            pos: 20201
                            length: 12
                        children: []
                        pos: 20200
                        length: 14
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: info = parent.getJSDocInfo();
                        children: []
                        pos: 20225
                        length: 29
                      pos: 20215
                      length: 47
                    pos: 20197
                    length: 65
                  - type: expression_statement
                    fields:
                      text: |-
                        allowDupe =
                                  info != null && info.getSuppressions().contains("duplicate");
                    children: []
                    pos: 20269
                    length: 83
                  pos: 20148
                  length: 210
                pos: 20091
                length: 267
              - type: local_variable_declaration
                fields:
                  text: JSType varType = var.getType();
                children: []
                pos: 20364
                length: 31
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: varType
                                        children: []
                                        pos: 20577
                                        length: 7
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 20588
                                        length: 4
                                    children: []
                                    pos: 20577
                                    length: 15
                                  right:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: varType
                                        children: []
                                        pos: 20604
                                        length: 7
                                      right:
                                        type: method_invocation
                                        fields:
                                          text: typeRegistry.getNativeType(UNKNOWN_TYPE)
                                        children: []
                                        pos: 20615
                                        length: 40
                                    children: []
                                    pos: 20604
                                    length: 51
                                children: []
                                pos: 20577
                                length: 78
                              right:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: newType
                                    children: []
                                    pos: 20667
                                    length: 7
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 20678
                                    length: 4
                                children: []
                                pos: 20667
                                length: 15
                            children: []
                            pos: 20577
                            length: 105
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: newType
                                children: []
                                pos: 20694
                                length: 7
                              right:
                                type: method_invocation
                                fields:
                                  text: typeRegistry.getNativeType(UNKNOWN_TYPE)
                                children: []
                                pos: 20705
                                length: 40
                            children: []
                            pos: 20694
                            length: 51
                        children: []
                        pos: 20577
                        length: 168
                    children: []
                    pos: 20576
                    length: 170
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: field_access
                                fields:
                                  text: var.input
                                children: []
                                pos: 21116
                                length: 9
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21129
                                length: 4
                            children: []
                            pos: 21116
                            length: 17
                        children: []
                        pos: 21115
                        length: 19
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: Scope s = var.getScope();
                        children: []
                        pos: 21145
                        length: 25
                      - type: expression_statement
                        fields:
                          text: s.undeclare(var);
                        children: []
                        pos: 21179
                        length: 17
                      - type: expression_statement
                        fields:
                          text: newVar = s.declare(variableName, n, varType, input,
                            false);
                        children: []
                        pos: 21205
                        length: 59
                      - type: expression_statement
                        fields:
                          text: n.setJSType(varType);
                        children: []
                        pos: 21274
                        length: 21
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: method_invocation
                                fields:
                                  text: parent.isVar()
                                children: []
                                pos: 21308
                                length: 14
                            children: []
                            pos: 21307
                            length: 16
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: n.getFirstChild()
                                        children: []
                                        pos: 21340
                                        length: 17
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 21361
                                        length: 4
                                    children: []
                                    pos: 21340
                                    length: 25
                                children: []
                                pos: 21339
                                length: 27
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: n.getFirstChild().setJSType(varType);
                                children: []
                                pos: 21381
                                length: 37
                              pos: 21367
                              length: 63
                            pos: 21336
                            length: 94
                          pos: 21324
                          length: 116
                        pos: 21304
                        length: 247
                      pos: 21135
                      length: 424
                    pos: 21112
                    length: 1082
                  pos: 20747
                  length: 1453
                pos: 20573
                length: 1627
              - type: return_statement
                fields:
                  text: return newVar;
                children: []
                pos: 22206
                length: 14
              pos: 20032
              length: 2192
          children: []
          pos: 19890
          length: 2334
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectAllInterfaceProperties
              children: []
              pos: 22359
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 22388
                length: 15
              pos: 22354
              length: 461
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: ObjectType instance = type.getInstanceType();
                children: []
                pos: 22444
                length: 45
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (ObjectType implemented : type.getAllImplementedInterfaces()) {
                          if (implemented.getImplicitPrototype() != null) {
                            for (String prop :
                                 implemented.getImplicitPrototype().getOwnPropertyNames()) {
                              expectInterfaceProperty(t, n, instance, implemented, prop);
                            }
                          }
                        }
                children: []
                pos: 22494
                length: 317
              pos: 22438
              length: 377
          children: []
          pos: 22354
          length: 461
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectInterfaceProperty
              children: []
              pos: 22957
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 22981
                length: 15
              pos: 22944
              length: 1814
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StaticSlot<JSType> propSlot = instance.getSlot(prop);
                children: []
                pos: 23085
                length: 53
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: propSlot
                            children: []
                            pos: 23147
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 23159
                            length: 4
                        children: []
                        pos: 23147
                        length: 16
                    children: []
                    pos: 23146
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String sourceName = n.getSourceFileName();
                    children: []
                    pos: 23198
                    length: 42
                  - type: expression_statement
                    fields:
                      text: 'sourceName = sourceName == null ? "" : sourceName;'
                    children: []
                    pos: 23247
                    length: 50
                  - type: expression_statement
                    fields:
                      text: |-
                        registerMismatch(instance, implementedInterface,
                                  report(JSError.make(sourceName, n,
                                  INTERFACE_METHOD_NOT_IMPLEMENTED,
                                  prop, implementedInterface.toString(), instance.toString())));
                    children: []
                    pos: 23304
                    length: 210
                  pos: 23165
                  length: 355
                pos: 23143
                length: 1611
              pos: 23079
              length: 1679
          children: []
          pos: 22944
          length: 1814
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: mismatch
              children: []
              pos: 24815
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 24824
                length: 15
              pos: 24802
              length: 177
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: mismatch(t.getSourceName(), n, msg, found, required);
                children: []
                pos: 24922
                length: 53
              pos: 24916
              length: 63
          children: []
          pos: 24802
          length: 177
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: mismatch
              children: []
              pos: 24996
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 25005
                length: 15
              pos: 24983
              length: 182
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: mismatch(t, n, msg, found, getNativeType(required));
                children: []
                pos: 25109
                length: 52
              pos: 25103
              length: 62
          children: []
          pos: 24983
          length: 182
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: mismatch
              children: []
              pos: 25182
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String sourceName
                children: []
                pos: 25191
                length: 17
              pos: 25169
              length: 293
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    registerMismatch(found, required, report(
                            JSError.make(sourceName, n, TYPE_MISMATCH_WARNING,
                                         formatFoundRequired(msg, found, required))));
                children: []
                pos: 25291
                length: 167
              pos: 25285
              length: 177
          children: []
          pos: 25169
          length: 293
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: registerMismatch
              children: []
              pos: 25479
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSType found
                children: []
                pos: 25496
                length: 12
              pos: 25466
              length: 1042
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: found = found.restrictByNotNullOrUndefined();
                children: []
                pos: 25657
                length: 45
              - type: expression_statement
                fields:
                  text: required = required.restrictByNotNullOrUndefined();
                children: []
                pos: 25707
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: found.isSubtype(required)
                            children: []
                            pos: 25767
                            length: 25
                          right:
                            type: method_invocation
                            fields:
                              text: required.isSubtype(found)
                            children: []
                            pos: 25796
                            length: 25
                        children: []
                        pos: 25767
                        length: 54
                    children: []
                    pos: 25766
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 25831
                    length: 7
                  pos: 25823
                  length: 21
                pos: 25763
                length: 81
              - type: expression_statement
                fields:
                  text: mismatches.add(new TypeMismatch(found, required, error));
                children: []
                pos: 25850
                length: 57
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: found.isFunctionType()
                            children: []
                            pos: 25916
                            length: 22
                          right:
                            type: method_invocation
                            fields:
                              text: required.isFunctionType()
                            children: []
                            pos: 25950
                            length: 25
                        children: []
                        pos: 25916
                        length: 59
                    children: []
                    pos: 25915
                    length: 61
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: FunctionType fnTypeA = found.toMaybeFunctionType();
                    children: []
                    pos: 25985
                    length: 51
                  - type: local_variable_declaration
                    fields:
                      text: FunctionType fnTypeB = required.toMaybeFunctionType();
                    children: []
                    pos: 26043
                    length: 54
                  - type: local_variable_declaration
                    fields:
                      text: Iterator<Node> paramItA = fnTypeA.getParameters().iterator();
                    children: []
                    pos: 26104
                    length: 61
                  - type: local_variable_declaration
                    fields:
                      text: Iterator<Node> paramItB = fnTypeB.getParameters().iterator();
                    children: []
                    pos: 26172
                    length: 61
                  - type: while_statement
                    fields:
                      text: |-
                        while (paramItA.hasNext() && paramItB.hasNext()) {
                                registerIfMismatch(paramItA.next().getJSType(),
                                    paramItB.next().getJSType(), error);
                              }
                    children: []
                    pos: 26240
                    length: 163
                  - type: expression_statement
                    fields:
                      text: |-
                        registerIfMismatch(
                                  fnTypeA.getReturnType(), fnTypeB.getReturnType(), error);
                    children: []
                    pos: 26411
                    length: 87
                  pos: 25977
                  length: 527
                pos: 25912
                length: 592
              pos: 25542
              length: 966
          children: []
          pos: 25466
          length: 1042
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: registerIfMismatch
              children: []
              pos: 26525
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSType found
                children: []
                pos: 26551
                length: 12
              pos: 26512
              length: 227
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: found
                                    children: []
                                    pos: 26607
                                    length: 5
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 26616
                                    length: 4
                                children: []
                                pos: 26607
                                length: 13
                              right:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: required
                                    children: []
                                    pos: 26624
                                    length: 8
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 26636
                                    length: 4
                                children: []
                                pos: 26624
                                length: 16
                            children: []
                            pos: 26607
                            length: 33
                          right:
                            type: unary_expression
                            fields:
                              text: "!found.isSubtype(required)"
                            children: []
                            pos: 26652
                            length: 26
                        children: []
                        pos: 26607
                        length: 71
                    children: []
                    pos: 26606
                    length: 73
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: registerMismatch(found, required, error);
                    children: []
                    pos: 26688
                    length: 41
                  pos: 26680
                  length: 55
                pos: 26603
                length: 132
              pos: 26597
              length: 142
          children: []
          pos: 26512
          length: 227
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: formatFoundRequired
              children: []
              pos: 26815
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String description
                children: []
                pos: 26835
                length: 18
              pos: 26800
              length: 176
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return MessageFormat.format(FOUND_REQUIRED, description, found,
                    required);
                children: []
                pos: 26898
                length: 74
              pos: 26892
              length: 84
          children: []
          pos: 26800
          length: 176
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getReadableJSTypeName
              children: []
              pos: 27405
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 27427
                length: 6
              pos: 27398
              length: 1873
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSType type = getJSType(n);
                children: []
                pos: 27462
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: dereference
                        children: []
                        pos: 27498
                        length: 11
                    children: []
                    pos: 27497
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: ObjectType dereferenced = type.dereference();
                    children: []
                    pos: 27519
                    length: 45
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: dereferenced
                                children: []
                                pos: 27575
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 27591
                                length: 4
                            children: []
                            pos: 27575
                            length: 20
                        children: []
                        pos: 27574
                        length: 22
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: type = dereferenced;
                        children: []
                        pos: 27607
                        length: 20
                      pos: 27597
                      length: 38
                    pos: 27571
                    length: 64
                  pos: 27511
                  length: 130
                pos: 27494
                length: 147
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: type.isFunctionPrototypeType()
                            children: []
                            pos: 27702
                            length: 30
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: type.toObjectType()
                                        children: []
                                        pos: 27745
                                        length: 19
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 27768
                                        length: 4
                                    children: []
                                    pos: 27745
                                    length: 27
                                  right:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: type.toObjectType().getConstructor()
                                        children: []
                                        pos: 27785
                                        length: 36
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 27825
                                        length: 4
                                    children: []
                                    pos: 27785
                                    length: 44
                                children: []
                                pos: 27745
                                length: 84
                            children: []
                            pos: 27744
                            length: 86
                        children: []
                        pos: 27702
                        length: 128
                    children: []
                    pos: 27701
                    length: 130
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return type.toString();
                    children: []
                    pos: 27840
                    length: 23
                  pos: 27832
                  length: 37
                pos: 27698
                length: 171
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: n.isGetProp()
                        children: []
                        pos: 28069
                        length: 13
                    children: []
                    pos: 28068
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: ObjectType objectType = getJSType(n.getFirstChild()).dereference();
                    children: []
                    pos: 28092
                    length: 67
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: objectType
                                children: []
                                pos: 28170
                                length: 10
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 28184
                                length: 4
                            children: []
                            pos: 28170
                            length: 18
                        children: []
                        pos: 28169
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String propName = n.getLastChild().getString();
                        children: []
                        pos: 28200
                        length: 47
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: objectType.getConstructor()
                                        children: []
                                        pos: 28260
                                        length: 27
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 28291
                                        length: 4
                                    children: []
                                    pos: 28260
                                    length: 35
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: objectType.getConstructor().isInterface()
                                    children: []
                                    pos: 28311
                                    length: 41
                                children: []
                                pos: 28260
                                length: 92
                            children: []
                            pos: 28259
                            length: 94
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: |-
                                objectType = FunctionType.getTopDefiningInterface(
                                              objectType, propName);
                            children: []
                            pos: 28366
                            length: 87
                          pos: 28354
                          length: 109
                        pos: 28256
                        length: 396
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: objectType
                                        children: []
                                        pos: 28790
                                        length: 10
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 28804
                                        length: 4
                                    children: []
                                    pos: 28790
                                    length: 18
                                  right:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: or
                                        fields:
                                          left:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: objectType.getConstructor()
                                                children: []
                                                pos: 28825
                                                length: 27
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 28856
                                                length: 4
                                            children: []
                                            pos: 28825
                                            length: 35
                                          right:
                                            type: method_invocation
                                            fields:
                                              text: objectType.isFunctionPrototypeType()
                                            children: []
                                            pos: 28877
                                            length: 36
                                        children: []
                                        pos: 28825
                                        length: 88
                                    children: []
                                    pos: 28824
                                    length: 90
                                children: []
                                pos: 28790
                                length: 124
                            children: []
                            pos: 28789
                            length: 126
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return objectType.toString() + "." + propName;
                            children: []
                            pos: 28928
                            length: 46
                          pos: 28916
                          length: 68
                        pos: 28786
                        length: 198
                      pos: 28190
                      length: 802
                    pos: 28166
                    length: 826
                  pos: 28084
                  length: 914
                pos: 28065
                length: 933
              - type: local_variable_declaration
                fields:
                  text: String qualifiedName = n.getQualifiedName();
                children: []
                pos: 29004
                length: 44
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: qualifiedName
                            children: []
                            pos: 29057
                            length: 13
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 29074
                            length: 4
                        children: []
                        pos: 29057
                        length: 21
                    children: []
                    pos: 29056
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return qualifiedName;
                    children: []
                    pos: 29088
                    length: 21
                  pos: 29080
                  length: 35
                pos: 29053
                length: 214
              pos: 27456
              length: 1815
          children: []
          pos: 27398
          length: 1873
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getJSType
              children: []
              pos: 29396
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 29406
                length: 6
              pos: 29381
              length: 455
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSType jsType = n.getJSType();
                children: []
                pos: 29420
                length: 30
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: jsType
                            children: []
                            pos: 29459
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 29469
                            length: 4
                        children: []
                        pos: 29459
                        length: 14
                    children: []
                    pos: 29458
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return getNativeType(UNKNOWN_TYPE);
                    children: []
                    pos: 29757
                    length: 35
                  pos: 29475
                  length: 323
                pos: 29455
                length: 377
              pos: 29414
              length: 422
          children: []
          pos: 29381
          length: 455
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 29855
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative typeId
                children: []
                pos: 29869
                length: 19
              pos: 29840
              length: 102
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(typeId);
                children: []
                pos: 29896
                length: 42
              pos: 29890
              length: 52
          children: []
          pos: 29840
          length: 102
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: report
              children: []
              pos: 29962
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSError error
                children: []
                pos: 29969
                length: 13
              pos: 29946
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: shouldReport
                        children: []
                        pos: 29994
                        length: 12
                    children: []
                    pos: 29993
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: compiler.report(error);
                    children: []
                    pos: 30016
                    length: 23
                  pos: 30008
                  length: 37
                pos: 29990
                length: 55
              - type: return_statement
                fields:
                  text: return error;
                children: []
                pos: 30050
                length: 13
              pos: 29984
              length: 83
          children: []
          pos: 29946
          length: 121
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: TypeMismatch
              children: []
              pos: 30306
              length: 12
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final JSType typeA;
                children: []
                pos: 30325
                length: 19
              - type: field_declaration
                fields:
                  text: final JSType typeB;
                children: []
                pos: 30349
                length: 19
              - type: field_declaration
                fields:
                  text: final JSError src;
                children: []
                pos: 30373
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    TypeMismatch(JSType a, JSType b, JSError src) {
                          this.typeA = a;
                          this.typeB = b;
                          this.src = src;
                        }
                children: []
                pos: 30572
                length: 119
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: equals
                    children: []
                    pos: 30722
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object object
                      children: []
                      pos: 30729
                      length: 13
                    pos: 30697
                    length: 402
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: object instanceof TypeMismatch
                              children: []
                              pos: 30756
                              length: 30
                          children: []
                          pos: 30755
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: TypeMismatch that = (TypeMismatch) object;
                          children: []
                          pos: 30798
                          length: 42
                        - type: return_statement
                          fields:
                            text: |-
                              return (that.typeA.isEquivalentTo(this.typeA)
                                              && that.typeB.isEquivalentTo(this.typeB))
                                          || (that.typeB.isEquivalentTo(this.typeA)
                                              && that.typeA.isEquivalentTo(this.typeB));
                          children: []
                          pos: 30849
                          length: 216
                        pos: 30788
                        length: 285
                      pos: 30752
                      length: 321
                    - type: return_statement
                      fields:
                        text: return false;
                      children: []
                      pos: 31080
                      length: 13
                    pos: 30744
                    length: 355
                children: []
                pos: 30697
                length: 402
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hashCode
                    children: []
                    pos: 31126
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 31105
                    length: 84
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return Objects.hashCode(typeA, typeB);
                      children: []
                      pos: 31145
                      length: 38
                    pos: 31137
                    length: 52
                children: []
                pos: 31105
                length: 84
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: toString
                    children: []
                    pos: 31219
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 31195
                    length: 89
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return "(" + typeA + ", " + typeB + ")";
                      children: []
                      pos: 31238
                      length: 40
                    pos: 31230
                    length: 54
                children: []
                pos: 31195
                length: 89
              pos: 30293
              length: 995
          children: []
          pos: 30293
          length: 995
        pos: 2641
        length: 28649
    children: []
    pos: 2641
    length: 28649
  pos: 0
  length: 31291
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypeValidator
        children: []
        pos: 2647
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 2666
          length: 40
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 2709
          length: 42
        - type: field_declaration
          fields:
            text: private final JSType allValueTypes;
          children: []
          pos: 2754
          length: 35
        - type: field_declaration
          fields:
            text: private boolean shouldReport = true;
          children: []
          pos: 2792
          length: 36
        - type: field_declaration
          fields:
            text: private final JSType nullOrUndefined;
          children: []
          pos: 2831
          length: 37
        - type: field_declaration
          fields:
            text: private final List<TypeMismatch> mismatches = Lists.newArrayList();
          children: []
          pos: 3083
          length: 67
        - type: field_declaration
          fields:
            text: |-
              private static final String FOUND_REQUIRED =
                    "{0}\n" +
                    "found   : {1}\n" +
                    "required: {2}";
          children: []
          pos: 3173
          length: 109
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType INVALID_CAST =
                    DiagnosticType.warning("JSC_INVALID_CAST",
                        "invalid cast - must be a subtype or supertype\n" +
                        "from: {0}\n" +
                        "to  : {1}");
          children: []
          pos: 3286
          length: 203
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType TYPE_MISMATCH_WARNING =
                    DiagnosticType.warning(
                        "JSC_TYPE_MISMATCH",
                        "{0}");
          children: []
          pos: 3493
          length: 130
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MISSING_EXTENDS_TAG_WARNING =
                    DiagnosticType.warning(
                        "JSC_MISSING_EXTENDS_TAG",
                        "Missing @extends tag on type {0}");
          children: []
          pos: 3627
          length: 171
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType DUP_VAR_DECLARATION =
                    DiagnosticType.warning("JSC_DUP_VAR_DECLARATION",
                        "variable {0} redefined with type {1}, " +
                        "original definition at {2}:{3} with type {4}");
          children: []
          pos: 3802
          length: 217
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType HIDDEN_PROPERTY_MISMATCH =
                    DiagnosticType.warning("JSC_HIDDEN_PROPERTY_MISMATCH",
                        "mismatch of the {0} property type and the type " +
                        "of the property it overrides from superclass {1}\n" +
                        "original: {2}\n" +
                        "override: {3}");
          children: []
          pos: 4023
          length: 300
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType INTERFACE_METHOD_NOT_IMPLEMENTED =
                    DiagnosticType.warning(
                        "JSC_INTERFACE_METHOD_NOT_IMPLEMENTED",
                        "property {0} on interface {1} is not implemented by type {2}");
          children: []
          pos: 4327
          length: 217
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType HIDDEN_INTERFACE_PROPERTY_MISMATCH =
                    DiagnosticType.warning(
                      "JSC_HIDDEN_INTERFACE_PROPERTY_MISMATCH",
                      "mismatch of the {0} property type and the type " +
                      "of the property it overrides from interface {1}\n" +
                      "original: {2}\n" +
                      "override: {3}");
          children: []
          pos: 4548
          length: 320
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_TYPEOF_VALUE =
                    DiagnosticType.warning("JSC_UNKNOWN_TYPEOF_VALUE", "unknown type: {0}");
          children: []
          pos: 4872
          length: 129
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ILLEGAL_PROPERTY_ACCESS =
                    DiagnosticType.warning("JSC_ILLEGAL_PROPERTY_ACCESS",
                                           "Cannot do {0} access on a {1}");
          children: []
          pos: 5005
          length: 176
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticGroup ALL_DIAGNOSTICS = new DiagnosticGroup(
                    INVALID_CAST,
                    TYPE_MISMATCH_WARNING,
                    MISSING_EXTENDS_TAG_WARNING,
                    DUP_VAR_DECLARATION,
                    HIDDEN_PROPERTY_MISMATCH,
                    INTERFACE_METHOD_NOT_IMPLEMENTED,
                    HIDDEN_INTERFACE_PROPERTY_MISMATCH,
                    UNKNOWN_TYPEOF_VALUE,
                    ILLEGAL_PROPERTY_ACCESS);
          children: []
          pos: 5185
          length: 352
        - type: constructor_declaration
          fields:
            text: |-
              TypeValidator(AbstractCompiler compiler) {
                  this.compiler = compiler;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.allValueTypes = typeRegistry.createUnionType(
                      STRING_TYPE, NUMBER_TYPE, BOOLEAN_TYPE, NULL_TYPE, VOID_TYPE);
                  this.nullOrUndefined = typeRegistry.createUnionType(
                      NULL_TYPE, VOID_TYPE);
                }
          children: []
          pos: 5541
          length: 342
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMismatches
              children: []
              pos: 6103
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6080
              length: 67
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return mismatches;
                children: []
                pos: 6125
                length: 18
              pos: 6119
              length: 28
          children: []
          pos: 6080
          length: 67
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setShouldReport
              children: []
              pos: 6156
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean report
                children: []
                pos: 6172
                length: 14
              pos: 6151
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.shouldReport = report;
                children: []
                pos: 6194
                length: 27
              pos: 6188
              length: 37
          children: []
          pos: 6151
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectValidTypeofName
              children: []
              pos: 6473
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 6495
                length: 15
              pos: 6468
              length: 148
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: report(JSError.make(t.getSourceName(), n, UNKNOWN_TYPEOF_VALUE,
                    found));
                children: []
                pos: 6540
                length: 72
              pos: 6534
              length: 82
          children: []
          pos: 6468
          length: 148
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectObject
              children: []
              pos: 6887
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 6900
                length: 15
              pos: 6879
              length: 205
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.matchesObjectContext()"
                        children: []
                        pos: 6960
                        length: 28
                    children: []
                    pos: 6959
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, OBJECT_TYPE);
                    children: []
                    pos: 6998
                    length: 39
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 7044
                    length: 13
                  pos: 6990
                  length: 73
                pos: 6956
                length: 107
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 7068
                length: 12
              pos: 6950
              length: 134
          children: []
          pos: 6879
          length: 205
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectActualObject
              children: []
              pos: 7217
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 7236
                length: 15
              pos: 7212
              length: 159
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.isObject()"
                        children: []
                        pos: 7296
                        length: 16
                    children: []
                    pos: 7295
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, OBJECT_TYPE);
                    children: []
                    pos: 7322
                    length: 39
                  pos: 7314
                  length: 53
                pos: 7292
                length: 75
              pos: 7286
              length: 85
          children: []
          pos: 7212
          length: 159
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectAnyObject
              children: []
              pos: 7542
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 7558
                length: 15
              pos: 7537
              length: 253
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSType anyObjectType = getNativeType(NO_OBJECT_TYPE);
                children: []
                pos: 7614
                length: 53
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!anyObjectType.isSubtype(type)"
                            children: []
                            pos: 7676
                            length: 30
                          right:
                            type: unary_expression
                            fields:
                              text: "!type.isEmptyType()"
                            children: []
                            pos: 7710
                            length: 19
                        children: []
                        pos: 7676
                        length: 53
                    children: []
                    pos: 7675
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, anyObjectType);
                    children: []
                    pos: 7739
                    length: 41
                  pos: 7731
                  length: 55
                pos: 7672
                length: 114
              pos: 7608
              length: 182
          children: []
          pos: 7537
          length: 253
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectString
              children: []
              pos: 7983
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 7996
                length: 15
              pos: 7978
              length: 165
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.matchesStringContext()"
                        children: []
                        pos: 8056
                        length: 28
                    children: []
                    pos: 8055
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, STRING_TYPE);
                    children: []
                    pos: 8094
                    length: 39
                  pos: 8086
                  length: 53
                pos: 8052
                length: 87
              pos: 8046
              length: 97
          children: []
          pos: 7978
          length: 165
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectNumber
              children: []
              pos: 8336
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 8349
                length: 15
              pos: 8331
              length: 165
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.matchesNumberContext()"
                        children: []
                        pos: 8409
                        length: 28
                    children: []
                    pos: 8408
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, NUMBER_TYPE);
                    children: []
                    pos: 8447
                    length: 39
                  pos: 8439
                  length: 53
                pos: 8405
                length: 87
              pos: 8399
              length: 97
          children: []
          pos: 8331
          length: 165
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectBitwiseable
              children: []
              pos: 8711
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 8729
                length: 15
              pos: 8706
              length: 206
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!type.matchesNumberContext()"
                            children: []
                            pos: 8789
                            length: 28
                          right:
                            type: unary_expression
                            fields:
                              text: "!type.isSubtype(allValueTypes)"
                            children: []
                            pos: 8821
                            length: 30
                        children: []
                        pos: 8789
                        length: 62
                    children: []
                    pos: 8788
                    length: 64
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, allValueTypes);
                    children: []
                    pos: 8861
                    length: 41
                  pos: 8853
                  length: 55
                pos: 8785
                length: 123
              pos: 8779
              length: 133
          children: []
          pos: 8706
          length: 206
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectStringOrNumber
              children: []
              pos: 9127
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 9155
                length: 15
              pos: 9122
              length: 214
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!type.matchesNumberContext()"
                            children: []
                            pos: 9215
                            length: 28
                          right:
                            type: unary_expression
                            fields:
                              text: "!type.matchesStringContext()"
                            children: []
                            pos: 9247
                            length: 28
                        children: []
                        pos: 9215
                        length: 60
                    children: []
                    pos: 9214
                    length: 62
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, NUMBER_STRING);
                    children: []
                    pos: 9285
                    length: 41
                  pos: 9277
                  length: 55
                pos: 9211
                length: 121
              pos: 9205
              length: 131
          children: []
          pos: 9122
          length: 214
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectNotNullOrUndefined
              children: []
              pos: 9678
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 9710
                length: 15
              pos: 9670
              length: 923
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: unary_expression
                                    fields:
                                      text: "!type.isNoType()"
                                    children: []
                                    pos: 9791
                                    length: 16
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!type.isUnknownType()"
                                    children: []
                                    pos: 9811
                                    length: 21
                                children: []
                                pos: 9791
                                length: 41
                              right:
                                type: method_invocation
                                fields:
                                  text: type.isSubtype(nullOrUndefined)
                                children: []
                                pos: 9844
                                length: 31
                            children: []
                            pos: 9791
                            length: 84
                          right:
                            type: unary_expression
                            fields:
                              text: "!containsForwardDeclaredUnresolvedName(type)"
                            children: []
                            pos: 9887
                            length: 44
                        children: []
                        pos: 9791
                        length: 140
                    children: []
                    pos: 9790
                    length: 142
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: n.isGetProp()
                                    children: []
                                    pos: 10400
                                    length: 13
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!t.inGlobalScope()"
                                    children: []
                                    pos: 10427
                                    length: 18
                                children: []
                                pos: 10400
                                length: 45
                              right:
                                type: method_invocation
                                fields:
                                  text: type.isNullType()
                                children: []
                                pos: 10449
                                length: 17
                            children: []
                            pos: 10400
                            length: 66
                        children: []
                        pos: 10399
                        length: 68
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 10478
                        length: 12
                      pos: 10468
                      length: 30
                    pos: 10396
                    length: 102
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, type, expectedType);
                    children: []
                    pos: 10506
                    length: 40
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 10553
                    length: 13
                  pos: 9933
                  length: 639
                pos: 9787
                length: 785
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 10577
                length: 12
              pos: 9781
              length: 812
          children: []
          pos: 9670
          length: 923
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: containsForwardDeclaredUnresolvedName
              children: []
              pos: 10613
              length: 37
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSType type
                children: []
                pos: 10651
                length: 11
              pos: 10597
              length: 310
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: type.isUnionType()
                        children: []
                        pos: 10674
                        length: 18
                    children: []
                    pos: 10673
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (JSType alt : type.toMaybeUnionType().getAlternates()) {
                                if (containsForwardDeclaredUnresolvedName(alt)) {
                                  return true;
                                }
                              }
                    children: []
                    pos: 10702
                    length: 159
                  pos: 10694
                  length: 173
                pos: 10670
                length: 197
              - type: return_statement
                fields:
                  text: return type.isNoResolvedType();
                children: []
                pos: 10872
                length: 31
              pos: 10664
              length: 243
          children: []
          pos: 10597
          length: 310
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectSwitchMatchesCase
              children: []
              pos: 11021
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 11045
                length: 15
              pos: 11016
              length: 627
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!switchType.canTestForShallowEqualityWith(caseType)"
                            children: []
                            pos: 11354
                            length: 51
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: caseType.autoboxesTo()
                                        children: []
                                        pos: 11418
                                        length: 22
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 11444
                                        length: 4
                                    children: []
                                    pos: 11418
                                    length: 30
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!caseType.autoboxesTo().isSubtype(switchType)"
                                    children: []
                                    pos: 11464
                                    length: 45
                                children: []
                                pos: 11418
                                length: 91
                            children: []
                            pos: 11417
                            length: 93
                        children: []
                        pos: 11354
                        length: 156
                    children: []
                    pos: 11353
                    length: 158
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        mismatch(t, n.getFirstChild(),
                                  "case expression doesn't match switch",
                                  caseType, switchType);
                    children: []
                    pos: 11520
                    length: 113
                  pos: 11512
                  length: 127
                pos: 11350
                length: 289
              pos: 11112
              length: 531
          children: []
          pos: 11016
          length: 627
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectIndexMatch
              children: []
              pos: 12042
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 12059
                length: 15
              pos: 12037
              length: 1295
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(n.isGetElem());
                children: []
                pos: 12148
                length: 40
              - type: local_variable_declaration
                fields:
                  text: Node indexNode = n.getLastChild();
                children: []
                pos: 12193
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: objType.isStruct()
                        children: []
                        pos: 12236
                        length: 18
                    children: []
                    pos: 12235
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        report(JSError.make(t.getSourceName(), indexNode,
                                                  ILLEGAL_PROPERTY_ACCESS, "'[]'", "struct"));
                    children: []
                    pos: 12264
                    length: 120
                  pos: 12256
                  length: 134
                pos: 12232
                length: 158
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: objType.isUnknownType()
                        children: []
                        pos: 12399
                        length: 23
                    children: []
                    pos: 12398
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: expectStringOrNumber(t, indexNode, indexType, "property
                        access");
                    children: []
                    pos: 12432
                    length: 65
                  pos: 12424
                  length: 79
                pos: 12395
                length: 933
              pos: 12142
              length: 1190
          children: []
          pos: 12037
          length: 1295
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanAssignToPropertyOf
              children: []
              pos: 13837
              length: 27
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 13865
                length: 15
              pos: 13829
              length: 944
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!leftType.isNoType()"
                            children: []
                            pos: 14030
                            length: 20
                          right:
                            type: unary_expression
                            fields:
                              text: "!rightType.isSubtype(leftType)"
                            children: []
                            pos: 14054
                            length: 30
                        children: []
                        pos: 14030
                        length: 54
                    children: []
                    pos: 14029
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: JSType ownerType = getJSType(owner);
                    children: []
                    pos: 14258
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: ownerType.isFunctionPrototypeType()
                            children: []
                            pos: 14305
                            length: 35
                        children: []
                        pos: 14304
                        length: 37
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: FunctionType ownerFn = ownerType.toObjectType().getOwnerFunction();
                        children: []
                        pos: 14352
                        length: 67
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: and
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: ownerFn.isInterface()
                                        children: []
                                        pos: 14432
                                        length: 21
                                      right:
                                        type: method_invocation
                                        fields:
                                          text: rightType.isFunctionType()
                                        children: []
                                        pos: 14469
                                        length: 26
                                    children: []
                                    pos: 14432
                                    length: 63
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: leftType.isFunctionType()
                                    children: []
                                    pos: 14499
                                    length: 25
                                children: []
                                pos: 14432
                                length: 92
                            children: []
                            pos: 14431
                            length: 94
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return true;
                            children: []
                            pos: 14538
                            length: 12
                          pos: 14526
                          length: 34
                        pos: 14428
                        length: 132
                      pos: 14342
                      length: 226
                    pos: 14301
                    length: 267
                  - type: expression_statement
                    fields:
                      text: |-
                        mismatch(t, n,
                                  "assignment to property " + propName + " of " +
                                  getReadableJSTypeName(owner, true),
                                  rightType, leftType);
                    children: []
                    pos: 14576
                    length: 150
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 14733
                    length: 13
                  pos: 14086
                  length: 666
                pos: 14026
                length: 726
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 14757
                length: 12
              pos: 13960
              length: 813
          children: []
          pos: 13829
          length: 944
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanAssignTo
              children: []
              pos: 15223
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 15241
                length: 15
              pos: 15215
              length: 242
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!rightType.isSubtype(leftType)"
                        children: []
                        pos: 15329
                        length: 30
                    children: []
                    pos: 15328
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: mismatch(t, n, msg, rightType, leftType);
                    children: []
                    pos: 15369
                    length: 41
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 15417
                    length: 13
                  pos: 15361
                  length: 75
                pos: 15325
                length: 111
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 15441
                length: 12
              pos: 15319
              length: 138
          children: []
          pos: 15215
          length: 242
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectArgumentMatchesParameter
              children: []
              pos: 15905
              length: 30
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 15936
                length: 15
              pos: 15900
              length: 417
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!argType.isSubtype(paramType)"
                        children: []
                        pos: 16039
                        length: 29
                    children: []
                    pos: 16038
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        mismatch(t, n,
                                  String.format("actual parameter %d of %s does not match " +
                                      "formal parameter", ordinal,
                                      getReadableJSTypeName(callNode.getFirstChild(), false)),
                                  argType, paramType);
                    children: []
                    pos: 16078
                    length: 229
                  pos: 16070
                  length: 243
                pos: 16035
                length: 278
              pos: 16029
              length: 288
          children: []
          pos: 15900
          length: 417
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanOverride
              children: []
              pos: 16811
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 16829
                length: 15
              pos: 16806
              length: 417
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!overridingType.isSubtype(hiddenType)"
                        children: []
                        pos: 16951
                        length: 37
                    children: []
                    pos: 16950
                    length: 39
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        registerMismatch(overridingType, hiddenType,
                                  report(t.makeError(n, HIDDEN_PROPERTY_MISMATCH, propertyName,
                                    ownerType.toString(), hiddenType.toString(),
                                    overridingType.toString())));
                    children: []
                    pos: 16998
                    length: 215
                  pos: 16990
                  length: 229
                pos: 16947
                length: 272
              pos: 16941
              length: 282
          children: []
          pos: 16806
          length: 417
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectSuperType
              children: []
              pos: 17518
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 17534
                length: 15
              pos: 17513
              length: 1146
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType subCtor = subObject.getConstructor();
                children: []
                pos: 17617
                length: 50
              - type: local_variable_declaration
                fields:
                  text: ObjectType implicitProto = subObject.getImplicitPrototype();
                children: []
                pos: 17672
                length: 60
              - type: local_variable_declaration
                fields:
                  text: |-
                    ObjectType declaredSuper =
                            implicitProto == null ? null : implicitProto.getImplicitPrototype();
                children: []
                pos: 17737
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: declaredSuper
                                children: []
                                pos: 17849
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 17866
                                length: 4
                            children: []
                            pos: 17849
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: declaredSuper.isTemplatizedType()
                            children: []
                            pos: 17874
                            length: 33
                        children: []
                        pos: 17849
                        length: 58
                    children: []
                    pos: 17848
                    length: 60
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        declaredSuper =
                                  declaredSuper.toMaybeTemplatizedType().getReferencedType();
                    children: []
                    pos: 17917
                    length: 85
                  pos: 17909
                  length: 99
                pos: 17845
                length: 163
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: declaredSuper
                                    children: []
                                    pos: 18017
                                    length: 13
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 18034
                                    length: 4
                                children: []
                                pos: 18017
                                length: 21
                              right:
                                type: unary_expression
                                fields:
                                  text: "!(superObject instanceof UnknownType)"
                                children: []
                                pos: 18050
                                length: 37
                            children: []
                            pos: 18017
                            length: 70
                          right:
                            type: unary_expression
                            fields:
                              text: "!declaredSuper.isEquivalentTo(superObject)"
                            children: []
                            pos: 18099
                            length: 42
                        children: []
                        pos: 18017
                        length: 124
                    children: []
                    pos: 18016
                    length: 126
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: declaredSuper.isEquivalentTo(getNativeType(OBJECT_TYPE))
                            children: []
                            pos: 18155
                            length: 56
                        children: []
                        pos: 18154
                        length: 58
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: |-
                            registerMismatch(superObject, declaredSuper, report(
                                        t.makeError(n, MISSING_EXTENDS_TAG_WARNING, subObject.toString())));
                        children: []
                        pos: 18223
                        length: 133
                      pos: 18213
                      length: 151
                    pos: 18151
                    length: 366
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: unary_expression
                            fields:
                              text: "!subCtor.hasCachedValues()"
                            children: []
                            pos: 18562
                            length: 26
                        children: []
                        pos: 18561
                        length: 28
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: subCtor.setPrototypeBasedOn(superObject);
                        children: []
                        pos: 18600
                        length: 41
                      pos: 18590
                      length: 59
                    pos: 18558
                    length: 91
                  pos: 18143
                  length: 512
                pos: 18013
                length: 642
              pos: 17611
              length: 1048
          children: []
          pos: 17513
          length: 1146
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectCanCast
              children: []
              pos: 18988
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 19002
                length: 15
              pos: 18983
              length: 248
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!type.canCastTo(castType)"
                        children: []
                        pos: 19067
                        length: 25
                    children: []
                    pos: 19066
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        registerMismatch(type, castType, report(t.makeError(n, INVALID_CAST,
                                  type.toString(), castType.toString())));
                    children: []
                    pos: 19102
                    length: 119
                  pos: 19094
                  length: 133
                pos: 19063
                length: 164
              pos: 19057
              length: 174
          children: []
          pos: 18983
          length: 248
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectUndeclaredVariable
              children: []
              pos: 19894
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String sourceName
                children: []
                pos: 19919
                length: 17
              pos: 19890
              length: 2334
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Var newVar = var;
                children: []
                pos: 20038
                length: 17
              - type: local_variable_declaration
                fields:
                  text: boolean allowDupe = false;
                children: []
                pos: 20060
                length: 26
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: n.isGetProp()
                            children: []
                            pos: 20095
                            length: 13
                          right:
                            type: method_invocation
                            fields:
                              text: NodeUtil.isObjectLitKey(n)
                            children: []
                            pos: 20120
                            length: 26
                        children: []
                        pos: 20095
                        length: 51
                    children: []
                    pos: 20094
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: JSDocInfo info = n.getJSDocInfo();
                    children: []
                    pos: 20156
                    length: 34
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: info
                                children: []
                                pos: 20201
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 20209
                                length: 4
                            children: []
                            pos: 20201
                            length: 12
                        children: []
                        pos: 20200
                        length: 14
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: info = parent.getJSDocInfo();
                        children: []
                        pos: 20225
                        length: 29
                      pos: 20215
                      length: 47
                    pos: 20197
                    length: 65
                  - type: expression_statement
                    fields:
                      text: |-
                        allowDupe =
                                  info != null && info.getSuppressions().contains("duplicate");
                    children: []
                    pos: 20269
                    length: 83
                  pos: 20148
                  length: 210
                pos: 20091
                length: 267
              - type: local_variable_declaration
                fields:
                  text: JSType varType = var.getType();
                children: []
                pos: 20364
                length: 31
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: varType
                                        children: []
                                        pos: 20577
                                        length: 7
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 20588
                                        length: 4
                                    children: []
                                    pos: 20577
                                    length: 15
                                  right:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: varType
                                        children: []
                                        pos: 20604
                                        length: 7
                                      right:
                                        type: method_invocation
                                        fields:
                                          text: typeRegistry.getNativeType(UNKNOWN_TYPE)
                                        children: []
                                        pos: 20615
                                        length: 40
                                    children: []
                                    pos: 20604
                                    length: 51
                                children: []
                                pos: 20577
                                length: 78
                              right:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: newType
                                    children: []
                                    pos: 20667
                                    length: 7
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 20678
                                    length: 4
                                children: []
                                pos: 20667
                                length: 15
                            children: []
                            pos: 20577
                            length: 105
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: newType
                                children: []
                                pos: 20694
                                length: 7
                              right:
                                type: method_invocation
                                fields:
                                  text: typeRegistry.getNativeType(UNKNOWN_TYPE)
                                children: []
                                pos: 20705
                                length: 40
                            children: []
                            pos: 20694
                            length: 51
                        children: []
                        pos: 20577
                        length: 168
                    children: []
                    pos: 20576
                    length: 170
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: field_access
                                fields:
                                  text: var.input
                                children: []
                                pos: 21116
                                length: 9
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21129
                                length: 4
                            children: []
                            pos: 21116
                            length: 17
                        children: []
                        pos: 21115
                        length: 19
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: Scope s = var.getScope();
                        children: []
                        pos: 21145
                        length: 25
                      - type: expression_statement
                        fields:
                          text: s.undeclare(var);
                        children: []
                        pos: 21179
                        length: 17
                      - type: expression_statement
                        fields:
                          text: newVar = s.declare(variableName, n, varType, input,
                            false);
                        children: []
                        pos: 21205
                        length: 59
                      - type: expression_statement
                        fields:
                          text: n.setJSType(varType);
                        children: []
                        pos: 21274
                        length: 21
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: method_invocation
                                fields:
                                  text: parent.isVar()
                                children: []
                                pos: 21308
                                length: 14
                            children: []
                            pos: 21307
                            length: 16
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: n.getFirstChild()
                                        children: []
                                        pos: 21340
                                        length: 17
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 21361
                                        length: 4
                                    children: []
                                    pos: 21340
                                    length: 25
                                children: []
                                pos: 21339
                                length: 27
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: n.getFirstChild().setJSType(varType);
                                children: []
                                pos: 21381
                                length: 37
                              pos: 21367
                              length: 63
                            pos: 21336
                            length: 94
                          pos: 21324
                          length: 116
                        pos: 21304
                        length: 247
                      pos: 21135
                      length: 424
                    pos: 21112
                    length: 1082
                  pos: 20747
                  length: 1453
                pos: 20573
                length: 1627
              - type: return_statement
                fields:
                  text: return newVar;
                children: []
                pos: 22206
                length: 14
              pos: 20032
              length: 2192
          children: []
          pos: 19890
          length: 2334
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectAllInterfaceProperties
              children: []
              pos: 22359
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 22388
                length: 15
              pos: 22354
              length: 461
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: ObjectType instance = type.getInstanceType();
                children: []
                pos: 22444
                length: 45
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (ObjectType implemented : type.getAllImplementedInterfaces()) {
                          if (implemented.getImplicitPrototype() != null) {
                            for (String prop :
                                 implemented.getImplicitPrototype().getOwnPropertyNames()) {
                              expectInterfaceProperty(t, n, instance, implemented, prop);
                            }
                          }
                        }
                children: []
                pos: 22494
                length: 317
              pos: 22438
              length: 377
          children: []
          pos: 22354
          length: 461
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: expectInterfaceProperty
              children: []
              pos: 22957
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 22981
                length: 15
              pos: 22944
              length: 1814
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StaticSlot<JSType> propSlot = instance.getSlot(prop);
                children: []
                pos: 23085
                length: 53
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: propSlot
                            children: []
                            pos: 23147
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 23159
                            length: 4
                        children: []
                        pos: 23147
                        length: 16
                    children: []
                    pos: 23146
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String sourceName = n.getSourceFileName();
                    children: []
                    pos: 23198
                    length: 42
                  - type: expression_statement
                    fields:
                      text: 'sourceName = sourceName == null ? "" : sourceName;'
                    children: []
                    pos: 23247
                    length: 50
                  - type: expression_statement
                    fields:
                      text: |-
                        registerMismatch(instance, implementedInterface,
                                  report(JSError.make(sourceName, n,
                                  INTERFACE_METHOD_NOT_IMPLEMENTED,
                                  prop, implementedInterface.toString(), instance.toString())));
                    children: []
                    pos: 23304
                    length: 210
                  pos: 23165
                  length: 355
                pos: 23143
                length: 1611
              pos: 23079
              length: 1679
          children: []
          pos: 22944
          length: 1814
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: mismatch
              children: []
              pos: 24815
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 24824
                length: 15
              pos: 24802
              length: 177
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: mismatch(t.getSourceName(), n, msg, found, required);
                children: []
                pos: 24922
                length: 53
              pos: 24916
              length: 63
          children: []
          pos: 24802
          length: 177
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: mismatch
              children: []
              pos: 24996
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTraversal t
                children: []
                pos: 25005
                length: 15
              pos: 24983
              length: 182
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: mismatch(t, n, msg, found, getNativeType(required));
                children: []
                pos: 25109
                length: 52
              pos: 25103
              length: 62
          children: []
          pos: 24983
          length: 182
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: mismatch
              children: []
              pos: 25182
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String sourceName
                children: []
                pos: 25191
                length: 17
              pos: 25169
              length: 293
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    registerMismatch(found, required, report(
                            JSError.make(sourceName, n, TYPE_MISMATCH_WARNING,
                                         formatFoundRequired(msg, found, required))));
                children: []
                pos: 25291
                length: 167
              pos: 25285
              length: 177
          children: []
          pos: 25169
          length: 293
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: registerMismatch
              children: []
              pos: 25479
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSType found
                children: []
                pos: 25496
                length: 12
              pos: 25466
              length: 1042
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: found = found.restrictByNotNullOrUndefined();
                children: []
                pos: 25657
                length: 45
              - type: expression_statement
                fields:
                  text: required = required.restrictByNotNullOrUndefined();
                children: []
                pos: 25707
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: found.isSubtype(required)
                            children: []
                            pos: 25767
                            length: 25
                          right:
                            type: method_invocation
                            fields:
                              text: required.isSubtype(found)
                            children: []
                            pos: 25796
                            length: 25
                        children: []
                        pos: 25767
                        length: 54
                    children: []
                    pos: 25766
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 25831
                    length: 7
                  pos: 25823
                  length: 21
                pos: 25763
                length: 81
              - type: expression_statement
                fields:
                  text: mismatches.add(new TypeMismatch(found, required, error));
                children: []
                pos: 25850
                length: 57
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: found.isFunctionType()
                            children: []
                            pos: 25916
                            length: 22
                          right:
                            type: method_invocation
                            fields:
                              text: required.isFunctionType()
                            children: []
                            pos: 25950
                            length: 25
                        children: []
                        pos: 25916
                        length: 59
                    children: []
                    pos: 25915
                    length: 61
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: FunctionType fnTypeA = found.toMaybeFunctionType();
                    children: []
                    pos: 25985
                    length: 51
                  - type: local_variable_declaration
                    fields:
                      text: FunctionType fnTypeB = required.toMaybeFunctionType();
                    children: []
                    pos: 26043
                    length: 54
                  - type: local_variable_declaration
                    fields:
                      text: Iterator<Node> paramItA = fnTypeA.getParameters().iterator();
                    children: []
                    pos: 26104
                    length: 61
                  - type: local_variable_declaration
                    fields:
                      text: Iterator<Node> paramItB = fnTypeB.getParameters().iterator();
                    children: []
                    pos: 26172
                    length: 61
                  - type: while_statement
                    fields:
                      text: |-
                        while (paramItA.hasNext() && paramItB.hasNext()) {
                                registerIfMismatch(paramItA.next().getJSType(),
                                    paramItB.next().getJSType(), error);
                              }
                    children: []
                    pos: 26240
                    length: 163
                  - type: expression_statement
                    fields:
                      text: |-
                        registerIfMismatch(
                                  fnTypeA.getReturnType(), fnTypeB.getReturnType(), error);
                    children: []
                    pos: 26411
                    length: 87
                  pos: 25977
                  length: 527
                pos: 25912
                length: 592
              pos: 25542
              length: 966
          children: []
          pos: 25466
          length: 1042
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: registerIfMismatch
              children: []
              pos: 26525
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSType found
                children: []
                pos: 26551
                length: 12
              pos: 26512
              length: 227
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: found
                                    children: []
                                    pos: 26607
                                    length: 5
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 26616
                                    length: 4
                                children: []
                                pos: 26607
                                length: 13
                              right:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: required
                                    children: []
                                    pos: 26624
                                    length: 8
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 26636
                                    length: 4
                                children: []
                                pos: 26624
                                length: 16
                            children: []
                            pos: 26607
                            length: 33
                          right:
                            type: unary_expression
                            fields:
                              text: "!found.isSubtype(required)"
                            children: []
                            pos: 26652
                            length: 26
                        children: []
                        pos: 26607
                        length: 71
                    children: []
                    pos: 26606
                    length: 73
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: registerMismatch(found, required, error);
                    children: []
                    pos: 26688
                    length: 41
                  pos: 26680
                  length: 55
                pos: 26603
                length: 132
              pos: 26597
              length: 142
          children: []
          pos: 26512
          length: 227
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: formatFoundRequired
              children: []
              pos: 26815
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String description
                children: []
                pos: 26835
                length: 18
              pos: 26800
              length: 176
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return MessageFormat.format(FOUND_REQUIRED, description, found,
                    required);
                children: []
                pos: 26898
                length: 74
              pos: 26892
              length: 84
          children: []
          pos: 26800
          length: 176
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getReadableJSTypeName
              children: []
              pos: 27405
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 27427
                length: 6
              pos: 27398
              length: 1873
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: n.isGetProp()
                        children: []
                        pos: 27709
                        length: 13
                    children: []
                    pos: 27708
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: ObjectType objectType = getJSType(n.getFirstChild()).dereference();
                    children: []
                    pos: 27732
                    length: 67
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: objectType
                                children: []
                                pos: 27810
                                length: 10
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 27824
                                length: 4
                            children: []
                            pos: 27810
                            length: 18
                        children: []
                        pos: 27809
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String propName = n.getLastChild().getString();
                        children: []
                        pos: 27840
                        length: 47
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: objectType.getConstructor()
                                        children: []
                                        pos: 27900
                                        length: 27
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 27931
                                        length: 4
                                    children: []
                                    pos: 27900
                                    length: 35
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: objectType.getConstructor().isInterface()
                                    children: []
                                    pos: 27951
                                    length: 41
                                children: []
                                pos: 27900
                                length: 92
                            children: []
                            pos: 27899
                            length: 94
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: |-
                                objectType = FunctionType.getTopDefiningInterface(
                                              objectType, propName);
                            children: []
                            pos: 28006
                            length: 87
                          pos: 27994
                          length: 109
                        pos: 27896
                        length: 396
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: objectType
                                        children: []
                                        pos: 28430
                                        length: 10
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 28444
                                        length: 4
                                    children: []
                                    pos: 28430
                                    length: 18
                                  right:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: or
                                        fields:
                                          left:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: objectType.getConstructor()
                                                children: []
                                                pos: 28465
                                                length: 27
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 28496
                                                length: 4
                                            children: []
                                            pos: 28465
                                            length: 35
                                          right:
                                            type: method_invocation
                                            fields:
                                              text: objectType.isFunctionPrototypeType()
                                            children: []
                                            pos: 28517
                                            length: 36
                                        children: []
                                        pos: 28465
                                        length: 88
                                    children: []
                                    pos: 28464
                                    length: 90
                                children: []
                                pos: 28430
                                length: 124
                            children: []
                            pos: 28429
                            length: 126
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return objectType.toString() + "." + propName;
                            children: []
                            pos: 28568
                            length: 46
                          pos: 28556
                          length: 68
                        pos: 28426
                        length: 198
                      pos: 27830
                      length: 802
                    pos: 27806
                    length: 826
                  pos: 27724
                  length: 914
                pos: 27705
                length: 933
              - type: local_variable_declaration
                fields:
                  text: JSType type = getJSType(n);
                children: []
                pos: 28644
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: dereference
                        children: []
                        pos: 28680
                        length: 11
                    children: []
                    pos: 28679
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: ObjectType dereferenced = type.dereference();
                    children: []
                    pos: 28701
                    length: 45
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: dereferenced
                                children: []
                                pos: 28757
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 28773
                                length: 4
                            children: []
                            pos: 28757
                            length: 20
                        children: []
                        pos: 28756
                        length: 22
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: type = dereferenced;
                        children: []
                        pos: 28789
                        length: 20
                      pos: 28779
                      length: 38
                    pos: 28753
                    length: 64
                  pos: 28693
                  length: 130
                pos: 28676
                length: 147
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: type.isFunctionPrototypeType()
                            children: []
                            pos: 28832
                            length: 30
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: type.toObjectType()
                                        children: []
                                        pos: 28875
                                        length: 19
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 28898
                                        length: 4
                                    children: []
                                    pos: 28875
                                    length: 27
                                  right:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: type.toObjectType().getConstructor()
                                        children: []
                                        pos: 28915
                                        length: 36
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 28955
                                        length: 4
                                    children: []
                                    pos: 28915
                                    length: 44
                                children: []
                                pos: 28875
                                length: 84
                            children: []
                            pos: 28874
                            length: 86
                        children: []
                        pos: 28832
                        length: 128
                    children: []
                    pos: 28831
                    length: 130
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return type.toString();
                    children: []
                    pos: 28970
                    length: 23
                  pos: 28962
                  length: 37
                pos: 28828
                length: 171
              - type: local_variable_declaration
                fields:
                  text: String qualifiedName = n.getQualifiedName();
                children: []
                pos: 29004
                length: 44
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: qualifiedName
                            children: []
                            pos: 29057
                            length: 13
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 29074
                            length: 4
                        children: []
                        pos: 29057
                        length: 21
                    children: []
                    pos: 29056
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return qualifiedName;
                    children: []
                    pos: 29088
                    length: 21
                  pos: 29080
                  length: 35
                pos: 29053
                length: 214
              pos: 27456
              length: 1815
          children: []
          pos: 27398
          length: 1873
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getJSType
              children: []
              pos: 29396
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 29406
                length: 6
              pos: 29381
              length: 455
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSType jsType = n.getJSType();
                children: []
                pos: 29420
                length: 30
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: jsType
                            children: []
                            pos: 29459
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 29469
                            length: 4
                        children: []
                        pos: 29459
                        length: 14
                    children: []
                    pos: 29458
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return getNativeType(UNKNOWN_TYPE);
                    children: []
                    pos: 29757
                    length: 35
                  pos: 29475
                  length: 323
                pos: 29455
                length: 377
              pos: 29414
              length: 422
          children: []
          pos: 29381
          length: 455
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 29855
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative typeId
                children: []
                pos: 29869
                length: 19
              pos: 29840
              length: 102
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(typeId);
                children: []
                pos: 29896
                length: 42
              pos: 29890
              length: 52
          children: []
          pos: 29840
          length: 102
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: report
              children: []
              pos: 29962
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSError error
                children: []
                pos: 29969
                length: 13
              pos: 29946
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: shouldReport
                        children: []
                        pos: 29994
                        length: 12
                    children: []
                    pos: 29993
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: compiler.report(error);
                    children: []
                    pos: 30016
                    length: 23
                  pos: 30008
                  length: 37
                pos: 29990
                length: 55
              - type: return_statement
                fields:
                  text: return error;
                children: []
                pos: 30050
                length: 13
              pos: 29984
              length: 83
          children: []
          pos: 29946
          length: 121
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: TypeMismatch
              children: []
              pos: 30306
              length: 12
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final JSType typeA;
                children: []
                pos: 30325
                length: 19
              - type: field_declaration
                fields:
                  text: final JSType typeB;
                children: []
                pos: 30349
                length: 19
              - type: field_declaration
                fields:
                  text: final JSError src;
                children: []
                pos: 30373
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    TypeMismatch(JSType a, JSType b, JSError src) {
                          this.typeA = a;
                          this.typeB = b;
                          this.src = src;
                        }
                children: []
                pos: 30572
                length: 119
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: equals
                    children: []
                    pos: 30722
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Object object
                      children: []
                      pos: 30729
                      length: 13
                    pos: 30697
                    length: 402
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: object instanceof TypeMismatch
                              children: []
                              pos: 30756
                              length: 30
                          children: []
                          pos: 30755
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: TypeMismatch that = (TypeMismatch) object;
                          children: []
                          pos: 30798
                          length: 42
                        - type: return_statement
                          fields:
                            text: |-
                              return (that.typeA.isEquivalentTo(this.typeA)
                                              && that.typeB.isEquivalentTo(this.typeB))
                                          || (that.typeB.isEquivalentTo(this.typeA)
                                              && that.typeA.isEquivalentTo(this.typeB));
                          children: []
                          pos: 30849
                          length: 216
                        pos: 30788
                        length: 285
                      pos: 30752
                      length: 321
                    - type: return_statement
                      fields:
                        text: return false;
                      children: []
                      pos: 31080
                      length: 13
                    pos: 30744
                    length: 355
                children: []
                pos: 30697
                length: 402
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hashCode
                    children: []
                    pos: 31126
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 31105
                    length: 84
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return Objects.hashCode(typeA, typeB);
                      children: []
                      pos: 31145
                      length: 38
                    pos: 31137
                    length: 52
                children: []
                pos: 31105
                length: 84
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: toString
                    children: []
                    pos: 31219
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 31195
                    length: 89
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return "(" + typeA + ", " + typeB + ")";
                      children: []
                      pos: 31238
                      length: 40
                    pos: 31230
                    length: 54
                children: []
                pos: 31195
                length: 89
              pos: 30293
              length: 995
          children: []
          pos: 30293
          length: 995
        pos: 2641
        length: 28649
    children: []
    pos: 2641
    length: 28649
  pos: 0
  length: 31291
text_diff: "--- before\n+++ after\n@@ -722,20 +722,8 @@\n    *     to an Object type,
  if possible.\n    */\n   String getReadableJSTypeName(Node n, boolean dereference)
  {\n-    JSType type = getJSType(n);\n-    if (dereference) {\n-      ObjectType
  dereferenced = type.dereference();\n-      if (dereferenced != null) {\n-        type
  = dereferenced;\n-      }\n-    }\n \n     // The best type name is the actual type
  name.\n-    if (type.isFunctionPrototypeType() ||\n-        (type.toObjectType()
  != null &&\n-         type.toObjectType().getConstructor() != null)) {\n-      return
  type.toString();\n-    }\n \n     // If we're analyzing a GETPROP, the property
  may be inherited by the\n     // prototype chain. So climb the prototype chain and
  find out where\n@@ -765,6 +753,18 @@\n       }\n     }\n \n+    JSType type = getJSType(n);\n+
  \   if (dereference) {\n+      ObjectType dereferenced = type.dereference();\n+
  \     if (dereferenced != null) {\n+        type = dereferenced;\n+      }\n+    }\n+
  \   if (type.isFunctionPrototypeType() ||\n+        (type.toObjectType() != null
  &&\n+         type.toObjectType().getConstructor() != null)) {\n+      return type.toString();\n+
  \   }\n     String qualifiedName = n.getQualifiedName();\n     if (qualifiedName
  != null) {\n       return qualifiedName;\n"
tree_diff: |+
  New cluster:
  MOVE from block [27456,29271]
  ------------
  ===
  move-tree
  ---
  if_statement [28065,28998]
      parenthesized_expression [28068,28083]
          method_invocation: n.isGetProp() [28069,28082]
      block [28084,28998]
          local_variable_declaration: ObjectType objectType = getJSType(n.getFirstChild()).dereference(); [28092,28159]
          if_statement [28166,28992]
              parenthesized_expression [28169,28189]
                  not_equals [28170,28188]
                      identifier: objectType [28170,28180]
                      null_literal [28184,28188]
              block [28190,28992]
                  local_variable_declaration: String propName = n.getLastChild().getString(); [28200,28247]
                  if_statement [28256,28652]
                      parenthesized_expression [28259,28353]
                          and [28260,28352]
                              not_equals [28260,28295]
                                  method_invocation: objectType.getConstructor() [28260,28287]
                                  null_literal [28291,28295]
                              method_invocation: objectType.getConstructor().isInterface() [28311,28352]
                      block [28354,28463]
                          expression_statement: objectType = FunctionType.getTopDefiningInterface(
                objectType, propName); [28366,28453]
                  if_statement [28786,28984]
                      parenthesized_expression [28789,28915]
                          and [28790,28914]
                              not_equals [28790,28808]
                                  identifier: objectType [28790,28800]
                                  null_literal [28804,28808]
                              parenthesized_expression [28824,28914]
                                  or [28825,28913]
                                      not_equals [28825,28860]
                                          method_invocation: objectType.getConstructor() [28825,28852]
                                          null_literal [28856,28860]
                                      method_invocation: objectType.isFunctionPrototypeType() [28877,28913]
                      block [28916,28984]
                          return_statement: return objectType.toString() + "." + propName; [28928,28974]
  to
  block [27456,29271]
  at 0

...
