---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 5087
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 5216
          length: 91
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5311
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5492
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5683
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 5871
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 6060
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 6243
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6417
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6611
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6654
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6710
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6751
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 6802
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 6847
          length: 78
        - type: field_declaration
          fields:
            text: |-
              private final Map<String, String> delegateCallingConventions =
                    Maps.newHashMap();
          children: []
          pos: 6928
          length: 87
        - type: field_declaration
          fields:
            text: |-
              private final Map<Node, AstFunctionContents> functionAnalysisResults =
                    Maps.newHashMap();
          children: []
          pos: 7068
          length: 95
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 7324
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 7346
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 7367
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 7391
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 7739
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 7747
                      length: 11
                    pos: 7734
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 7768
                      length: 62
                    pos: 7760
                    length: 76
                children: []
                pos: 7734
                length: 102
              pos: 7310
              length: 530
          children: []
          pos: 7310
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 7844
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 7950
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 8454
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8466
                length: 9
              pos: 8429
              length: 1971
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 8686
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 8713
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8763
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8773
                            length: 4
                        children: []
                        pos: 8763
                        length: 14
                    children: []
                    pos: 8762
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        (new FirstOrderFunctionAnalyzer(compiler, functionAnalysisResults))
                                  .process(root.getFirstChild(), root.getLastChild());
                    children: []
                    pos: 8845
                    length: 130
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 9034
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 9078
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 9158
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 9199
                    length: 53
                  pos: 8779
                  length: 479
                pos: 8759
                length: 704
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 9469
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 9513
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type.isFunctionType()) {
                            FunctionType fnType = type.toMaybeFunctionType();
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 9709
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 10191
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10201
                            length: 4
                        children: []
                        pos: 10191
                        length: 14
                    children: []
                    pos: 10190
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes,
                                  delegateCallingConventions);
                    children: []
                    pos: 10215
                    length: 154
                  pos: 10207
                  length: 168
                pos: 10187
                length: 188
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 10380
                length: 16
              pos: 8491
              length: 1909
          children: []
          pos: 8429
          length: 1971
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: patchGlobalScope
              children: []
              pos: 10694
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope globalScope
                children: []
                pos: 10711
                length: 17
              pos: 10689
              length: 1668
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(scriptRoot.isScript());
                children: []
                pos: 10902
                length: 48
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(globalScope);
                children: []
                pos: 10955
                length: 40
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(globalScope.isGlobal());
                children: []
                pos: 11000
                length: 49
              - type: local_variable_declaration
                fields:
                  text: String scriptName = NodeUtil.getSourceName(scriptRoot);
                children: []
                pos: 11055
                length: 55
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(scriptName);
                children: []
                pos: 11115
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {
                          if (scriptName.equals(NodeUtil.getSourceName(node))) {
                            functionAnalysisResults.remove(node);
                          }
                        }
                children: []
                pos: 11159
                length: 195
              - type: expression_statement
                fields:
                  text: |-
                    (new FirstOrderFunctionAnalyzer(
                            compiler, functionAnalysisResults)).process(null, scriptRoot);
                children: []
                pos: 11360
                length: 103
              - type: local_variable_declaration
                fields:
                  text: Iterator<Var> varIter = globalScope.getVars();
                children: []
                pos: 11766
                length: 46
              - type: local_variable_declaration
                fields:
                  text: List<Var> varsToRemove = Lists.newArrayList();
                children: []
                pos: 11817
                length: 46
              - type: while_statement
                fields:
                  text: |-
                    while (varIter.hasNext()) {
                          Var oldVar = varIter.next();
                          if (scriptName.equals(oldVar.getInputName())) {
                            varsToRemove.add(oldVar);
                          }
                        }
                children: []
                pos: 11868
                length: 164
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Var var : varsToRemove) {
                          globalScope.undeclare(var);
                          globalScope.getTypeOfThis().removeProperty(var.getName());
                        }
                children: []
                pos: 12037
                length: 135
              - type: local_variable_declaration
                fields:
                  text: GlobalScopeBuilder scopeBuilder = new GlobalScopeBuilder(globalScope);
                children: []
                pos: 12219
                length: 70
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, scriptRoot, scopeBuilder);
                children: []
                pos: 12294
                length: 59
              pos: 10747
              length: 1610
          children: []
          pos: 10689
          length: 1668
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 12516
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 12535
                length: 9
              pos: 12489
              length: 1400
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 12553
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 12651
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 12692
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 12747
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 12811
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 12865
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 12920
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 12980
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13038
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13101
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13157
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13218
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 13283
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13339
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13402
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13464
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13524
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 13583
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 13811
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 13876
                length: 9
              pos: 12546
              length: 1343
          children: []
          pos: 12489
          length: 1400
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 13906
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 13932
                length: 11
              pos: 13893
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 13969
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 14031
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 14104
                length: 89
              pos: 13963
              length: 234
          children: []
          pos: 13893
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 14214
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14237
                length: 11
              pos: 14201
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 14293
                length: 64
              pos: 14287
              length: 74
          children: []
          pos: 14201
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 14378
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14396
                length: 11
              pos: 14365
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 14438
                length: 42
              pos: 14432
              length: 52
          children: []
          pos: 14365
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 14509
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 14587
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 14631
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 14752
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 14758
                      length: 15
                    pos: 14726
                    length: 841
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 14807
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 14843
                              length: 14
                          children: []
                          pos: 14842
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, child.getFirstChild(),
                                              NodeUtil.getBestJSDocInfo(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.isAssign()) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getLastChild(),
                                              firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, null, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 14859
                          length: 702
                      children: []
                      pos: 14835
                      length: 726
                    pos: 14799
                    length: 768
                children: []
                pos: 14726
                length: 841
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 15586
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 15612
                      length: 13
                    pos: 15573
                    length: 432
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 15671
                              length: 26
                          children: []
                          pos: 15670
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 15713
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 15721
                                      length: 4
                                  children: []
                                  pos: 15713
                                  length: 12
                              children: []
                              pos: 15712
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 15743
                                      length: 27
                                  children: []
                                  pos: 15742
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 15786
                                  length: 62
                                pos: 15772
                                length: 88
                              pos: 15739
                              length: 242
                            pos: 15727
                            length: 264
                          pos: 15709
                          length: 282
                        pos: 15699
                        length: 300
                      pos: 15667
                      length: 332
                    pos: 15659
                    length: 346
                children: []
                pos: 15573
                length: 432
              pos: 14488
              length: 1521
          children: []
          pos: 14488
          length: 1521
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 16028
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 16042
                length: 23
              pos: 16013
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 16073
                length: 46
              pos: 16067
              length: 56
          children: []
          pos: 16013
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 16150
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 16272
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 16296
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 16473
                length: 67
              - type: field_declaration
                fields:
                  text: private List<Node> lentObjectLiterals = null;
                children: []
                pos: 16957
                length: 45
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 17178
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 17330
                length: 33
              - type: field_declaration
                fields:
                  text: private InputId inputId;
                children: []
                pos: 17425
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 17455
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 17541
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 17557
                      length: 9
                    pos: 17536
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 17589
                      length: 54
                    pos: 17581
                    length: 68
                children: []
                pos: 17536
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 17660
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 17655
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 17732
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 17887
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 17931
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 18109
                      length: 40
                    pos: 17675
                    length: 480
                children: []
                pos: 17655
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 18196
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18211
                      length: 15
                    pos: 18161
                    length: 1043
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 18265
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isFunction()
                                  children: []
                                  pos: 18301
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: n.isScript()
                                  children: []
                                  pos: 18329
                                  length: 12
                              children: []
                              pos: 18301
                              length: 40
                          children: []
                          pos: 18300
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(inputId);
                          children: []
                          pos: 18353
                          length: 36
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 18398
                          length: 39
                        pos: 18343
                        length: 102
                      pos: 18297
                      length: 148
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || !parent.isFunction() ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 18577
                      length: 131
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 18720
                              length: 7
                          children: []
                          pos: 18719
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 18869
                                  length: 29
                              children: []
                              pos: 18868
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child, n);
                                              }
                                            }
                              children: []
                              pos: 18912
                              length: 245
                            pos: 18900
                            length: 267
                          pos: 18865
                          length: 302
                        pos: 18729
                        length: 446
                      pos: 18716
                      length: 459
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 19183
                      length: 15
                    pos: 18257
                    length: 947
                children: []
                pos: 18161
                length: 1043
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 19236
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19242
                      length: 15
                    pos: 19210
                    length: 1765
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 19288
                      length: 25
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(t, n);
                      children: []
                      pos: 19320
                      length: 25
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 19361
                              length: 11
                          children: []
                          pos: 19360
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        checkForCallingConventionDefiningCalls(n, delegateCallingConventions);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n, parent);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.isGetProp() &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.isExprResult() &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 19374
                          length: 1287
                      children: []
                      pos: 19353
                      length: 1308
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getParent()
                                          children: []
                                          pos: 20736
                                          length: 13
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 20753
                                          length: 4
                                      children: []
                                      pos: 20736
                                      length: 21
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isStatement(n)
                                      children: []
                                      pos: 20761
                                      length: 23
                                  children: []
                                  pos: 20736
                                  length: 48
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lentObjectLiterals
                                      children: []
                                      pos: 20798
                                      length: 18
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20820
                                      length: 4
                                  children: []
                                  pos: 20798
                                  length: 26
                              children: []
                              pos: 20736
                              length: 88
                          children: []
                          pos: 20735
                          length: 90
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node objLit : lentObjectLiterals) {
                                        defineObjectLiteral(objLit);
                                      }
                          children: []
                          pos: 20836
                          length: 89
                        - type: expression_statement
                          fields:
                            text: lentObjectLiterals.clear();
                          children: []
                          pos: 20934
                          length: 27
                        pos: 20826
                        length: 143
                      pos: 20732
                      length: 237
                    pos: 19280
                    length: 1695
                children: []
                pos: 19210
                length: 1765
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 20994
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 21013
                      length: 15
                    pos: 20981
                    length: 1205
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 21054
                              length: 11
                          children: []
                          pos: 21053
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        n.setJSType(getNativeType(STRING_TYPE));
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        JSDocInfo info = n.getJSDocInfo();
                                        if (info != null &&
                                            info.getLendsName() != null) {
                                          if (lentObjectLiterals == null) {
                                            lentObjectLiterals = Lists.newArrayList();
                                          }
                                          lentObjectLiterals.add(n);
                                        } else {
                                          defineObjectLiteral(n);
                                        }
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 21067
                          length: 1113
                      children: []
                      pos: 21046
                      length: 1134
                    pos: 21038
                    length: 1148
                children: []
                pos: 20981
                length: 1205
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 22205
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objectLit
                      children: []
                      pos: 22225
                      length: 14
                    pos: 22192
                    length: 1674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 22288
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 22314
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 22367
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22375
                                      length: 4
                                  children: []
                                  pos: 22367
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 22393
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22416
                                      length: 4
                                  children: []
                                  pos: 22393
                                  length: 27
                              children: []
                              pos: 22367
                              length: 53
                          children: []
                          pos: 22366
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 22432
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 22480
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 22532
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22544
                                      length: 4
                                  children: []
                                  pos: 22532
                                  length: 16
                              children: []
                              pos: 22531
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 22562
                              length: 94
                            pos: 22550
                            length: 116
                          pos: 22528
                          length: 616
                        pos: 22422
                        length: 730
                      pos: 22363
                      length: 789
                    - type: expression_statement
                      fields:
                        text: info = NodeUtil.getBestJSDocInfo(objectLit);
                      children: []
                      pos: 23160
                      length: 44
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(objectLit);
                      children: []
                      pos: 23211
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 23266
                      length: 55
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 23328
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 23371
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23379
                                      length: 4
                                  children: []
                                  pos: 23371
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 23387
                                  length: 27
                              children: []
                              pos: 23371
                              length: 43
                          children: []
                          pos: 23370
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 23426
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 23503
                          length: 23
                        pos: 23416
                        length: 118
                      pos: 23367
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 23546
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 23554
                                  length: 4
                              children: []
                              pos: 23546
                              length: 12
                          children: []
                          pos: 23545
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType();
                          children: []
                          pos: 23570
                          length: 48
                        pos: 23560
                        length: 66
                      pos: 23542
                      length: 84
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 23634
                      length: 33
                    - type: expression_statement
                      fields:
                        text: |-
                          processObjectLitProperties(
                                    objectLit, ObjectType.cast(objectLit.getJSType()), !createdEnumType);
                      children: []
                      pos: 23753
                      length: 107
                    pos: 22241
                    length: 1625
                children: []
                pos: 22192
                length: 1674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 24263
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objLit
                      children: []
                      pos: 24299
                      length: 11
                    pos: 24258
                    length: 1382
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType =
                                      getDeclaredType(keyNode.getSourceFileName(), info, keyNode, value);
                                  JSType keyType =  objLitType.isEnumType() ?
                                      objLitType.toMaybeEnumType().getElementsType() :
                                      NodeUtil.getObjectLitKeyTypeFromValueType(keyNode, valueType);

                                  // Try to declare this property in the current scope if it
                                  // has an authoritative name.
                                  String qualifiedName = NodeUtil.getBestLValueName(keyNode);
                                  if (qualifiedName != null) {
                                    boolean inferred = keyType == null;
                                    defineSlot(keyNode, objLit, qualifiedName, keyType, inferred);
                                  } else if (keyType != null) {
                                    setDeferredType(keyNode, keyType);
                                  }

                                  if (keyType != null && objLitType != null && declareOnOwner) {
                                    // Declare this property on its object literal.
                                    boolean isExtern = keyNode.isFromExterns();
                                    objLitType.defineDeclaredProperty(memberName, keyType, keyNode);
                                  }
                                }
                      children: []
                      pos: 24375
                      length: 1259
                    pos: 24367
                    length: 1273
                children: []
                pos: 24258
                length: 1382
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 25891
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 25919
                      length: 17
                    pos: 25876
                    length: 674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 25981
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode =
                                    node.isGetProp() ? node.getFirstChild() :
                                    NodeUtil.isObjectLitKey(node, node.getParent()) ? node.getParent() :
                                    null;
                      children: []
                      pos: 26009
                      length: 161
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 26181
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26189
                                  length: 4
                              children: []
                              pos: 26181
                              length: 12
                          children: []
                          pos: 26180
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 26209
                                  length: 14
                              children: []
                              pos: 26208
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 26237
                              length: 54
                            pos: 26225
                            length: 76
                          pos: 26205
                          length: 310
                        pos: 26195
                        length: 328
                      pos: 26177
                      length: 346
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 26530
                      length: 14
                    pos: 25973
                    length: 577
                children: []
                pos: 25876
                length: 674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 26705
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26726
                      length: 6
                    pos: 26700
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 26752
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 26804
                      length: 46
                    pos: 26744
                    length: 112
                children: []
                pos: 26700
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 26917
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26929
                      length: 6
                    pos: 26912
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 26958
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 27002
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 27044
                      length: 31
                    pos: 26950
                    length: 131
                children: []
                pos: 26912
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 27145
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27155
                      length: 6
                    pos: 27140
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 27184
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 27226
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 27271
                              length: 23
                          children: []
                          pos: 27270
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 27310
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 27318
                                      length: 4
                                  children: []
                                  pos: 27310
                                  length: 12
                              children: []
                              pos: 27309
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 27367
                              length: 63
                            pos: 27324
                            length: 116
                          pos: 27306
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 27449
                          length: 102
                        pos: 27296
                        length: 263
                      pos: 27267
                      length: 440
                    pos: 27176
                    length: 537
                children: []
                pos: 27140
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 27775
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27797
                      length: 6
                    pos: 27770
                    length: 850
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 27826
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(n);
                      children: []
                      pos: 27981
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = NodeUtil.getBestJSDocInfo(n);
                      children: []
                      pos: 28028
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 28081
                      length: 57
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 28145
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 28308
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 28514
                              length: 33
                          children: []
                          pos: 28513
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 28559
                          length: 47
                        pos: 28549
                        length: 65
                      pos: 28510
                      length: 104
                    pos: 27818
                    length: 802
                children: []
                pos: 27770
                length: 850
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 29023
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 29034
                      length: 9
                    pos: 29010
                    length: 420
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 29092
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(sourceName, info, name,
                          value);
                      children: []
                      pos: 29159
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 29231
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29239
                                  length: 4
                              children: []
                              pos: 29231
                              length: 12
                          children: []
                          pos: 29230
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              type = name.isFromExterns() ?
                                          getNativeType(UNKNOWN_TYPE) : null;
                          children: []
                          pos: 29304
                          length: 77
                        pos: 29245
                        length: 144
                      pos: 29227
                      length: 162
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 29396
                      length: 28
                    pos: 29084
                    length: 346
                children: []
                pos: 29010
                length: 420
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 29776
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 29814
                      length: 17
                    pos: 29760
                    length: 350
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 29874
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29882
                                  length: 4
                              children: []
                              pos: 29874
                              length: 12
                          children: []
                          pos: 29873
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 29898
                          length: 12
                        pos: 29888
                        length: 30
                      pos: 29870
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 29929
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 29939
                                      length: 4
                                  children: []
                                  pos: 29929
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                                  children: []
                                  pos: 29957
                                  length: 51
                              children: []
                              pos: 29929
                              length: 79
                          children: []
                          pos: 29928
                          length: 81
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 30020
                          length: 13
                        pos: 30010
                        length: 31
                      pos: 29925
                      length: 116
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 30048
                      length: 56
                    pos: 29862
                    length: 248
                children: []
                pos: 29760
                length: 350
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 31158
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 31195
                      length: 21
                    pos: 31137
                    length: 4260
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 31327
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 31446
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 31456
                                          length: 4
                                      children: []
                                      pos: 31446
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 31464
                                      length: 24
                                  children: []
                                  pos: 31446
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 31492
                                  length: 16
                              children: []
                              pos: 31446
                              length: 62
                          children: []
                          pos: 31445
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 31520
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 31583
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31590
                                              length: 4
                                          children: []
                                          pos: 31583
                                          length: 11
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: var.getType()
                                              children: []
                                              pos: 31598
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31615
                                              length: 4
                                          children: []
                                          pos: 31598
                                          length: 21
                                      children: []
                                      pos: 31583
                                      length: 36
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: var.getType().isFunctionType()
                                      children: []
                                      pos: 31635
                                      length: 30
                                  children: []
                                  pos: 31583
                                  length: 82
                              children: []
                              pos: 31582
                              length: 84
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = var.getType().toMaybeFunctionType();
                              children: []
                              pos: 31679
                              length: 64
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 31759
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 31790
                                                  length: 25
                                              children: []
                                              pos: 31759
                                              length: 56
                                          children: []
                                          pos: 31758
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 31834
                                          length: 33
                                      children: []
                                      pos: 31758
                                      length: 109
                                  children: []
                                  pos: 31757
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 31883
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 31928
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 31936
                                                  length: 4
                                              children: []
                                              pos: 31928
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 31944
                                              length: 16
                                          children: []
                                          pos: 31928
                                          length: 32
                                      children: []
                                      pos: 31927
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 31978
                                      length: 63
                                    pos: 31962
                                    length: 93
                                  pos: 31924
                                  length: 131
                                pos: 31869
                                length: 198
                              pos: 31754
                              length: 313
                            pos: 31667
                            length: 410
                          pos: 31579
                          length: 498
                        pos: 31510
                        length: 575
                      pos: 31442
                      length: 643
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 32097
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 32113
                                  length: 4
                              children: []
                              pos: 32097
                              length: 20
                          children: []
                          pos: 32096
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 32129
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.isFunction();
                          children: []
                          pos: 32192
                          length: 72
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 32273
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 32324
                          length: 88
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                              : null;'
                          children: []
                          pos: 32421
                          length: 61
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 32496
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 32504
                                          length: 4
                                      children: []
                                      pos: 32496
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 32512
                                      length: 14
                                  children: []
                                  pos: 32496
                                  length: 30
                              children: []
                              pos: 32495
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 32540
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 32685
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 32743
                                      length: 21
                                  children: []
                                  pos: 32742
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = type.toMaybeFunctionType();
                                  children: []
                                  pos: 32780
                                  length: 42
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 32835
                                  length: 32
                                pos: 32766
                                length: 113
                              pos: 32739
                              length: 140
                            pos: 32528
                            length: 361
                          pos: 32492
                          length: 397
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 32903
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 32919
                                      length: 4
                                  children: []
                                  pos: 32903
                                  length: 20
                              children: []
                              pos: 32902
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(lvalueNode);
                              children: []
                              pos: 32992
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 33060
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: Var ownerVar = null;
                              children: []
                              pos: 33128
                              length: 20
                            - type: local_variable_declaration
                              fields:
                                text: String propName = null;
                              children: []
                              pos: 33159
                              length: 23
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 33193
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 33236
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 33249
                                          length: 4
                                      children: []
                                      pos: 33236
                                      length: 17
                                  children: []
                                  pos: 33235
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 33269
                                  length: 35
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 33321
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33333
                                              length: 4
                                          children: []
                                          pos: 33321
                                          length: 16
                                      children: []
                                      pos: 33320
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: ownerType = ObjectType.cast(ownerVar.getType());
                                      children: []
                                      pos: 33355
                                      length: 48
                                    pos: 33339
                                    length: 78
                                  pos: 33317
                                  length: 100
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: name
                                              children: []
                                              pos: 33434
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33442
                                              length: 4
                                          children: []
                                          pos: 33434
                                          length: 12
                                      children: []
                                      pos: 33433
                                      length: 14
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: propName = name.substring(ownerName.length()
                                          + 1);
                                      children: []
                                      pos: 33464
                                      length: 50
                                    pos: 33448
                                    length: 80
                                  pos: 33430
                                  length: 98
                                pos: 33255
                                length: 285
                              pos: 33232
                              length: 308
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenPropType = null;
                              children: []
                              pos: 33552
                              length: 39
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 33606
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33619
                                              length: 4
                                          children: []
                                          pos: 33606
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: propName
                                              children: []
                                              pos: 33627
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33639
                                              length: 4
                                          children: []
                                          pos: 33627
                                          length: 16
                                      children: []
                                      pos: 33606
                                      length: 37
                                  children: []
                                  pos: 33605
                                  length: 39
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      overriddenPropType =
                                                      findOverriddenFunction(ownerType, propName);
                                  children: []
                                  pos: 33659
                                  length: 81
                                pos: 33645
                                length: 107
                              pos: 33602
                              length: 150
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setContents(getFunctionAnalysisResults(fnRoot))
                                                .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                                .inferTemplateTypeName(info)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 33764
                              length: 392
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 34206
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 34257
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 34270
                                                  length: 4
                                              children: []
                                              pos: 34257
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: ownerType.isFunctionPrototypeType()
                                              children: []
                                              pos: 34278
                                              length: 35
                                          children: []
                                          pos: 34257
                                          length: 56
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerType.getOwnerFunction().hasInstanceType()
                                          children: []
                                          pos: 34331
                                          length: 46
                                      children: []
                                      pos: 34257
                                      length: 120
                                  children: []
                                  pos: 34256
                                  length: 122
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      builder.inferThisType(
                                                      info, ownerType.getOwnerFunction().getInstanceType());
                                  children: []
                                  pos: 34393
                                  length: 93
                                - type: expression_statement
                                  fields:
                                    text: searchedForThisType = true;
                                  children: []
                                  pos: 34499
                                  length: 27
                                pos: 34379
                                length: 159
                              pos: 34253
                              length: 856
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 35125
                                      length: 20
                                  children: []
                                  pos: 35124
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info);
                                  children: []
                                  pos: 35161
                                  length: 28
                                pos: 35147
                                length: 54
                              pos: 35121
                              length: 80
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .buildAndRegister();
                              children: []
                              pos: 35213
                              length: 114
                            pos: 32925
                            length: 2412
                          pos: 32899
                          length: 2438
                        pos: 32119
                        length: 3226
                      pos: 32093
                      length: 3252
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 35371
                      length: 20
                    pos: 31318
                    length: 4079
                children: []
                pos: 31137
                length: 4260
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 35511
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 35543
                      length: 20
                    pos: 35490
                    length: 780
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 35676
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: propType
                                      children: []
                                      pos: 35741
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35753
                                      length: 4
                                  children: []
                                  pos: 35741
                                  length: 16
                                right:
                                  type: method_invocation
                                  fields:
                                    text: propType.isFunctionType()
                                  children: []
                                  pos: 35761
                                  length: 25
                              children: []
                              pos: 35741
                              length: 45
                          children: []
                          pos: 35740
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return propType.toMaybeFunctionType();
                          children: []
                          pos: 35798
                          length: 38
                        pos: 35788
                        length: 56
                      pos: 35737
                      length: 507
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 36252
                      length: 12
                    pos: 35582
                    length: 688
                children: []
                pos: 35490
                length: 780
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 36977
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 37001
                      length: 11
                    pos: 36960
                    length: 1636
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 37076
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 37116
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 37178
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 37214
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 37224
                                      length: 4
                                  children: []
                                  pos: 37214
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 37232
                                  length: 24
                              children: []
                              pos: 37214
                              length: 42
                          children: []
                          pos: 37213
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 37303
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 37366
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37373
                                          length: 4
                                      children: []
                                      pos: 37366
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 37381
                                      length: 33
                                  children: []
                                  pos: 37366
                                  length: 48
                              children: []
                              pos: 37365
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 37428
                              length: 36
                            pos: 37416
                            length: 58
                          pos: 37362
                          length: 112
                        pos: 37258
                        length: 224
                      pos: 37210
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 37494
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37506
                                  length: 4
                              children: []
                              pos: 37494
                              length: 16
                          children: []
                          pos: 37493
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 37522
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, rValue,
                              elementsType);
                          children: []
                          pos: 37623
                          length: 67
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 37704
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37714
                                          length: 4
                                      children: []
                                      pos: 37704
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isObjectLit()
                                      children: []
                                      pos: 37722
                                      length: 20
                                  children: []
                                  pos: 37704
                                  length: 38
                              children: []
                              pos: 37703
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 37791
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 37836
                              length: 589
                            pos: 37744
                            length: 691
                          pos: 37700
                          length: 735
                        pos: 37512
                        length: 931
                      pos: 37490
                      length: 953
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 38455
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 38463
                                      length: 4
                                  children: []
                                  pos: 38455
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 38471
                                  length: 16
                              children: []
                              pos: 38455
                              length: 32
                          children: []
                          pos: 38454
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 38499
                          length: 59
                        pos: 38489
                        length: 77
                      pos: 38451
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 38574
                      length: 16
                    pos: 37068
                    length: 1528
                children: []
                pos: 36960
                length: 1636
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 39019
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 39030
                      length: 9
                    pos: 39006
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 39075
                      length: 45
                    pos: 39067
                    length: 59
                children: []
                pos: 39006
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 39620
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 39631
                      length: 6
                    pos: 39615
                    length: 695
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 39691
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.isName()
                              children: []
                              pos: 39894
                              length: 10
                          children: []
                          pos: 39893
                          length: 12
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.isFunction() ||
                                          parent.isVar() ||
                                          parent.isParamList() ||
                                          parent.isCatch());
                          children: []
                          pos: 39916
                          length: 160
                        pos: 39906
                        length: 178
                      pos: 39890
                      length: 347
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 40244
                      length: 60
                    pos: 39683
                    length: 627
                children: []
                pos: 39615
                length: 695
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 40751
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 40762
                      length: 6
                    pos: 40746
                    length: 5804
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 40851
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.isName() && scope.isGlobal();
                      children: []
                      pos: 40912
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.isVar() ||
                                     parent.isFunction());
                      children: []
                      pos: 40972
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 41302
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isGetProp()
                                      children: []
                                      pos: 41344
                                      length: 13
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 41361
                                      length: 17
                                  children: []
                                  pos: 41344
                                  length: 34
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 41392
                                  length: 29
                              children: []
                              pos: 41344
                              length: 77
                          children: []
                          pos: 41343
                          length: 79
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 41433
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 41603
                                  length: 44
                              children: []
                              pos: 41602
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 41661
                              length: 42
                            pos: 41649
                            length: 64
                          pos: 41599
                          length: 114
                        pos: 41423
                        length: 298
                      pos: 41340
                      length: 381
                    - type: local_variable_declaration
                      fields:
                        text: boolean isExtern = n.isFromExterns();
                      children: []
                      pos: 41846
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Var newVar = null;
                      children: []
                      pos: 41890
                      length: 18
                    - type: local_variable_declaration
                      fields:
                        text: CompilerInput input = compiler.getInput(inputId);
                      children: []
                      pos: 41952
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 42012
                              length: 48
                          children: []
                          pos: 42011
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 42072
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              newVar = validator.expectUndeclaredVariable(
                                          sourceName, input, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 42132
                          length: 115
                        pos: 42062
                        length: 193
                      pos: 42008
                      length: 806
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType fnType = JSType.toMaybeFunctionType(type);
                      children: []
                      pos: 42899
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: fnType
                                      children: []
                                      pos: 42965
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42975
                                      length: 4
                                  children: []
                                  pos: 42965
                                  length: 14
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!type.isEmptyType()"
                                  children: []
                                  pos: 43053
                                  length: 19
                              children: []
                              pos: 42965
                              length: 107
                          children: []
                          pos: 42964
                          length: 109
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isConstructor()
                                              children: []
                                              pos: 43089
                                              length: 22
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isInterface()
                                              children: []
                                              pos: 43115
                                              length: 20
                                          children: []
                                          pos: 43089
                                          length: 46
                                      children: []
                                      pos: 43088
                                      length: 48
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!fnType.equals(getNativeType(U2U_CONSTRUCTOR_TYPE))"
                                      children: []
                                      pos: 43152
                                      length: 51
                                  children: []
                                  pos: 43088
                                  length: 115
                              children: []
                              pos: 43087
                              length: 117
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superClassCtor = fnType.getSuperClassConstructor();
                              children: []
                              pos: 43272
                              length: 64
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType.Property prototypeSlot = fnType.getSlot("prototype");
                              children: []
                              pos: 43347
                              length: 64
                            - type: expression_statement
                              fields:
                                text: prototypeSlot.setNode(n);
                              children: []
                              pos: 43872
                              length: 25
                            - type: local_variable_declaration
                              fields:
                                text: String prototypeName = variableName + ".prototype";
                              children: []
                              pos: 43909
                              length: 51
                            - type: local_variable_declaration
                              fields:
                                text: Var prototypeVar = scopeToDeclareIn.getVar(prototypeName);
                              children: []
                              pos: 44192
                              length: 58
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: prototypeVar
                                              children: []
                                              pos: 44265
                                              length: 12
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 44281
                                              length: 4
                                          children: []
                                          pos: 44265
                                          length: 20
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: field_access
                                              fields:
                                                text: prototypeVar.scope
                                              children: []
                                              pos: 44289
                                              length: 18
                                            right:
                                              type: identifier
                                              fields:
                                                text: scopeToDeclareIn
                                              children: []
                                              pos: 44311
                                              length: 16
                                          children: []
                                          pos: 44289
                                          length: 38
                                      children: []
                                      pos: 44265
                                      length: 62
                                  children: []
                                  pos: 44264
                                  length: 64
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scopeToDeclareIn.undeclare(prototypeVar);
                                  children: []
                                  pos: 44343
                                  length: 41
                                pos: 44329
                                length: 67
                              pos: 44261
                              length: 135
                            - type: expression_statement
                              fields:
                                text: |-
                                  scopeToDeclareIn.declare(prototypeName,
                                                n, prototypeSlot.getType(), input,
                                                /* declared iff there's an explicit supertype */
                                                superClassCtor == null ||
                                                superClassCtor.getInstanceType().equals(
                                                    getNativeType(OBJECT_TYPE)));
                              children: []
                              pos: 44408
                              length: 294
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: newVar.getInitialValue()
                                                  children: []
                                                  pos: 44820
                                                  length: 24
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 44848
                                                  length: 4
                                              children: []
                                              pos: 44820
                                              length: 32
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!isExtern"
                                              children: []
                                              pos: 44870
                                              length: 9
                                          children: []
                                          pos: 44820
                                          length: 59
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: |-
                                              variableName.equals(
                                                                fnType.getInstanceType().getReferenceName())
                                          children: []
                                          pos: 45279
                                          length: 83
                                      children: []
                                      pos: 44820
                                      length: 542
                                  children: []
                                  pos: 44819
                                  length: 544
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      compiler.report(
                                                      JSError.make(sourceName, n,
                                                          fnType.isConstructor() ?
                                                          CTOR_INITIALIZER : IFACE_INITIALIZER,
                                                          variableName));
                                  children: []
                                  pos: 45378
                                  length: 199
                                pos: 45364
                                length: 225
                              pos: 44816
                              length: 773
                            pos: 43205
                            length: 2394
                          pos: 43084
                          length: 2515
                        pos: 43074
                        length: 2533
                      pos: 42961
                      length: 2646
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: shouldDeclareOnGlobalThis
                              children: []
                              pos: 45619
                              length: 25
                          children: []
                          pos: 45618
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType globalThis =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS);
                          children: []
                          pos: 45656
                          length: 82
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: identifier
                                  fields:
                                    text: inferred
                                  children: []
                                  pos: 45751
                                  length: 8
                              children: []
                              pos: 45750
                              length: 10
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  globalThis.defineInferredProperty(variableName,
                                                type == null ?
                                                getNativeType(JSTypeNative.NO_TYPE) :
                                                type,
                                                n);
                              children: []
                              pos: 45773
                              length: 166
                            pos: 45761
                            length: 188
                          pos: 45747
                          length: 287
                        pos: 45646
                        length: 396
                      pos: 45615
                      length: 427
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: isGlobalVar
                                              children: []
                                              pos: 46054
                                              length: 11
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: '"Window".equals(variableName)'
                                              children: []
                                              pos: 46069
                                              length: 29
                                          children: []
                                          pos: 46054
                                          length: 44
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 46112
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 46120
                                              length: 4
                                          children: []
                                          pos: 46112
                                          length: 12
                                      children: []
                                      pos: 46054
                                      length: 70
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 46138
                                      length: 21
                                  children: []
                                  pos: 46054
                                  length: 105
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 46173
                                  length: 20
                              children: []
                              pos: 46054
                              length: 139
                          children: []
                          pos: 46053
                          length: 141
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 46205
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 46319
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 46381
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn((type.toMaybeFunctionType()).getInstanceType());
                          children: []
                          pos: 46440
                          length: 96
                        pos: 46195
                        length: 349
                      pos: 46050
                      length: 494
                    pos: 40843
                    length: 5707
                children: []
                pos: 40746
                length: 5804
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 46664
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46691
                      length: 6
                    pos: 46648
                    length: 148
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Scope scope = getQnameRootScope(n);
                      children: []
                      pos: 46707
                      length: 35
                    - type: return_statement
                      fields:
                        text: return scope != null && scope.isGlobal();
                      children: []
                      pos: 46749
                      length: 41
                    pos: 46699
                    length: 97
                children: []
                pos: 46648
                length: 148
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getQnameRootScope
                    children: []
                    pos: 46888
                    length: 17
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46906
                      length: 6
                    pos: 46874
                    length: 275
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 46922
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: root.isName()
                              children: []
                              pos: 46980
                              length: 13
                          children: []
                          pos: 46979
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 47005
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 47059
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47066
                                      length: 4
                                  children: []
                                  pos: 47059
                                  length: 11
                              children: []
                              pos: 47058
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.getScope();
                              children: []
                              pos: 47084
                              length: 22
                            pos: 47072
                            length: 44
                          pos: 47055
                          length: 61
                        pos: 46995
                        length: 129
                      pos: 46976
                      length: 148
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 47131
                      length: 12
                    pos: 46914
                    length: 235
                children: []
                pos: 46874
                length: 275
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 47519
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 47535
                      length: 17
                    pos: 47504
                    length: 2542
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 47626
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47634
                                      length: 4
                                  children: []
                                  pos: 47626
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 47642
                                  length: 14
                              children: []
                              pos: 47626
                              length: 30
                          children: []
                          pos: 47625
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                              info);
                          children: []
                          pos: 47668
                          length: 61
                        pos: 47658
                        length: 79
                      pos: 47622
                      length: 2349
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                          info);
                      children: []
                      pos: 49979
                      length: 61
                    pos: 47614
                    length: 2432
                children: []
                pos: 47504
                length: 2542
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 50073
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Var v"
                      children: []
                      pos: 50089
                      length: 15
                    pos: 50052
                    length: 211
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: 'JSType t = v == null ? null : v.getType();'
                      children: []
                      pos: 50114
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: 'ObjectType o = t == null ? null : t.dereference();'
                      children: []
                      pos: 50163
                      length: 50
                    - type: return_statement
                      fields:
                        text: return JSType.toMaybeFunctionType(o);
                      children: []
                      pos: 50220
                      length: 37
                    pos: 50106
                    length: 157
                children: []
                pos: 50052
                length: 211
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForCallingConventionDefiningCalls
                    children: []
                    pos: 50369
                    length: 38
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 50417
                      length: 6
                    pos: 50356
                    length: 228
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: |-
                          codingConvention.checkForCallingConventionDefiningCalls(n,
                                    delegateCallingConventions);
                      children: []
                      pos: 50481
                      length: 97
                    pos: 50473
                    length: 111
                children: []
                pos: 50356
                length: 228
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 50800
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50836
                      length: 15
                    pos: 50787
                    length: 2928
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 50882
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 50983
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 50999
                                  length: 4
                              children: []
                              pos: 50983
                              length: 20
                          children: []
                          pos: 50982
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType superCtor = getFunctionType(
                                          scope.getVar(relationship.superclassName));
                          children: []
                          pos: 51015
                          length: 97
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType subCtor = getFunctionType(
                                          scope.getVar(relationship.subclassName));
                          children: []
                          pos: 51121
                          length: 93
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: superCtor
                                                  children: []
                                                  pos: 51227
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 51240
                                                  length: 4
                                              children: []
                                              pos: 51227
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: superCtor.isConstructor()
                                              children: []
                                              pos: 51248
                                              length: 25
                                          children: []
                                          pos: 51227
                                          length: 46
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 51289
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51300
                                              length: 4
                                          children: []
                                          pos: 51289
                                          length: 15
                                      children: []
                                      pos: 51227
                                      length: 77
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: subCtor.isConstructor()
                                      children: []
                                      pos: 51308
                                      length: 23
                                  children: []
                                  pos: 51227
                                  length: 104
                              children: []
                              pos: 51226
                              length: 106
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType superClass = superCtor.getInstanceType();
                              children: []
                              pos: 51345
                              length: 52
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType subClass = subCtor.getInstanceType();
                              children: []
                              pos: 51408
                              length: 48
                            - type: expression_statement
                              fields:
                                text: superCtor = superClass.getConstructor();
                              children: []
                              pos: 51654
                              length: 40
                            - type: expression_statement
                              fields:
                                text: subCtor = subClass.getConstructor();
                              children: []
                              pos: 51705
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: field_access
                                                  fields:
                                                    text: relationship.type
                                                  children: []
                                                  pos: 51757
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: SubclassType.INHERITS
                                                  children: []
                                                  pos: 51778
                                                  length: 21
                                              children: []
                                              pos: 51757
                                              length: 42
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!superClass.isEmptyType()"
                                              children: []
                                              pos: 51817
                                              length: 25
                                          children: []
                                          pos: 51757
                                          length: 85
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!subClass.isEmptyType()"
                                          children: []
                                          pos: 51846
                                          length: 23
                                      children: []
                                      pos: 51757
                                      length: 112
                                  children: []
                                  pos: 51756
                                  length: 114
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 51885
                                  length: 54
                                pos: 51871
                                length: 80
                              pos: 51753
                              length: 198
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 51967
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51980
                                              length: 4
                                          children: []
                                          pos: 51967
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 51988
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51999
                                              length: 4
                                          children: []
                                          pos: 51988
                                          length: 15
                                      children: []
                                      pos: 51967
                                      length: 36
                                  children: []
                                  pos: 51966
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 52019
                                  length: 99
                                pos: 52005
                                length: 125
                              pos: 51963
                              length: 167
                            pos: 51333
                            length: 807
                          pos: 51223
                          length: 917
                        pos: 51005
                        length: 1143
                      pos: 50979
                      length: 1169
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 52156
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 52259
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52287
                                  length: 4
                              children: []
                              pos: 52259
                              length: 32
                          children: []
                          pos: 52258
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 52303
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 52417
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52431
                                      length: 4
                                  children: []
                                  pos: 52417
                                  length: 18
                              children: []
                              pos: 52416
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 52449
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 52521
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 52537
                                          length: 4
                                      children: []
                                      pos: 52521
                                      length: 20
                                  children: []
                                  pos: 52520
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 52557
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 52656
                                  length: 92
                                pos: 52543
                                length: 217
                              pos: 52517
                              length: 243
                            pos: 52437
                            length: 333
                          pos: 52413
                          length: 357
                        pos: 52293
                        length: 485
                      pos: 52255
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 52786
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 52895
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52919
                                  length: 4
                              children: []
                              pos: 52895
                              length: 28
                          children: []
                          pos: 52894
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 52935
                          length: 48
                        pos: 52925
                        length: 66
                      pos: 52891
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(n);
                      children: []
                      pos: 52999
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 53099
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 53120
                                  length: 4
                              children: []
                              pos: 53099
                              length: 25
                          children: []
                          pos: 53098
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: field_access
                                      fields:
                                        text: objectLiteralCast.diagnosticType
                                      children: []
                                      pos: 53140
                                      length: 32
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 53176
                                      length: 4
                                  children: []
                                  pos: 53140
                                  length: 40
                              children: []
                              pos: 53139
                              length: 42
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  ObjectType type = ObjectType.cast(
                                                typeRegistry.getType(objectLiteralCast.typeName));
                              children: []
                              pos: 53194
                              length: 99
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 53308
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53316
                                              length: 4
                                          children: []
                                          pos: 53308
                                          length: 12
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: type.getConstructor()
                                              children: []
                                              pos: 53324
                                              length: 21
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53349
                                              length: 4
                                          children: []
                                          pos: 53324
                                          length: 29
                                      children: []
                                      pos: 53308
                                      length: 45
                                  children: []
                                  pos: 53307
                                  length: 47
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: setDeferredType(objectLiteralCast.objectNode,
                                      type);
                                  children: []
                                  pos: 53369
                                  length: 52
                                pos: 53355
                                length: 78
                              pos: 53304
                              length: 255
                            pos: 53182
                            length: 387
                          pos: 53136
                          length: 565
                        pos: 53126
                        length: 583
                      pos: 53095
                      length: 614
                    pos: 50874
                    length: 2841
                children: []
                pos: 50787
                length: 2928
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 53812
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 53847
                      length: 41
                    pos: 53799
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 53898
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 54015
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 54138
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 54277
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54296
                                          length: 4
                                      children: []
                                      pos: 54277
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 54314
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54336
                                          length: 4
                                      children: []
                                      pos: 54314
                                      length: 26
                                  children: []
                                  pos: 54277
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 54354
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54377
                                      length: 4
                                  children: []
                                  pos: 54354
                                  length: 27
                              children: []
                              pos: 54277
                              length: 104
                          children: []
                          pos: 54276
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 54393
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 54464
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 54541
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 54625
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54642
                                              length: 4
                                          children: []
                                          pos: 54625
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 54650
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54670
                                              length: 4
                                          children: []
                                          pos: 54650
                                          length: 24
                                      children: []
                                      pos: 54625
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 54690
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54711
                                          length: 4
                                      children: []
                                      pos: 54690
                                      length: 25
                                  children: []
                                  pos: 54625
                                  length: 90
                              children: []
                              pos: 54624
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 54729
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 54837
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 54939
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 55129
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 55314
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 55380
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 55550
                              length: 58
                            pos: 54717
                            length: 901
                          pos: 54621
                          length: 997
                        pos: 54383
                        length: 1243
                      pos: 54273
                      length: 1353
                    pos: 53890
                    length: 1742
                children: []
                pos: 53799
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 56066
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 56092
                      length: 15
                    pos: 56061
                    length: 4679
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 56177
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 56219
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 56274
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 56317
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 56371
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(t.getSourceName(),
                          info, n, rhsValue);
                      children: []
                      pos: 57092
                      length: 73
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 57176
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57189
                                      length: 4
                                  children: []
                                  pos: 57176
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 57197
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57209
                                      length: 4
                                  children: []
                                  pos: 57197
                                  length: 16
                              children: []
                              pos: 57176
                              length: 37
                          children: []
                          pos: 57175
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 57260
                          length: 33
                        pos: 57215
                        length: 86
                      pos: 57172
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 57548
                              length: 28
                          children: []
                          pos: 57547
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 57588
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 57632
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57640
                                      length: 4
                                  children: []
                                  pos: 57632
                                  length: 12
                              children: []
                              pos: 57631
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType qVarType = ObjectType.cast(qVar.getType());
                              children: []
                              pos: 57975
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: qVarType
                                                  children: []
                                                  pos: 58044
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 58056
                                                  length: 4
                                              children: []
                                              pos: 58044
                                              length: 16
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: rhsValue
                                                  children: []
                                                  pos: 58078
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 58090
                                                  length: 4
                                              children: []
                                              pos: 58078
                                              length: 16
                                          children: []
                                          pos: 58044
                                          length: 50
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rhsValue.isObjectLit()
                                          children: []
                                          pos: 58112
                                          length: 22
                                      children: []
                                      pos: 58044
                                      length: 90
                                  children: []
                                  pos: 58043
                                  length: 92
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      typeRegistry.resetImplicitPrototype(
                                                      rhsValue.getJSType(), qVarType.getImplicitPrototype());
                                  children: []
                                  pos: 58150
                                  length: 108
                                pos: 58136
                                length: 134
                              pos: 58040
                              length: 652
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: qVar.getScope()
                                          children: []
                                          pos: 58707
                                          length: 15
                                        right:
                                          type: identifier
                                          fields:
                                            text: scope
                                          children: []
                                          pos: 58726
                                          length: 5
                                      children: []
                                      pos: 58707
                                      length: 24
                                  children: []
                                  pos: 58706
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scope.undeclare(qVar);
                                  children: []
                                  pos: 58747
                                  length: 22
                                pos: 58733
                                length: 48
                              pos: 58703
                              length: 78
                            pos: 57646
                            length: 1145
                          pos: 57628
                          length: 1163
                        pos: 57578
                        length: 1221
                      pos: 57544
                      length: 1255
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 58811
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 58824
                                  length: 4
                              children: []
                              pos: 58811
                              length: 17
                          children: []
                          pos: 58810
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: parent.isExprResult()
                                  children: []
                                  pos: 58844
                                  length: 21
                              children: []
                              pos: 58843
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 58879
                              length: 148
                            pos: 58867
                            length: 170
                          pos: 58840
                          length: 197
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 59047
                          length: 7
                        pos: 58830
                        length: 232
                      pos: 58807
                      length: 255
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean inferred = isQualifiedNameInferred(
                                    qName, n, info, rhsValue, valueType);
                      children: []
                      pos: 59070
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 59172
                              length: 9
                          children: []
                          pos: 59171
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 59193
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 59254
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 59267
                                      length: 4
                                  children: []
                                  pos: 59254
                                  length: 17
                              children: []
                              pos: 59253
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 59386
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 59469
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 59523
                                                  length: 42
                                              children: []
                                              pos: 59469
                                              length: 96
                                          children: []
                                          pos: 59468
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 59586
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 59598
                                                          length: 31
                                                      children: []
                                                      pos: 59586
                                                      length: 43
                                                  children: []
                                                  pos: 59585
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 59649
                                                  length: 27
                                              children: []
                                              pos: 59585
                                              length: 91
                                          children: []
                                          pos: 59584
                                          length: 93
                                      children: []
                                      pos: 59468
                                      length: 209
                                  children: []
                                  pos: 59467
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, n);
                                  children: []
                                  pos: 59767
                                  length: 57
                                pos: 59679
                                length: 157
                              pos: 59464
                              length: 372
                            pos: 59273
                            length: 573
                          pos: 59250
                          length: 596
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 59988
                          length: 43
                        pos: 59183
                        length: 856
                      pos: 59168
                      length: 1566
                    pos: 56169
                    length: 4571
                children: []
                pos: 56061
                length: 4679
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQualifiedNameInferred
                    children: []
                    pos: 61789
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String qName
                      children: []
                      pos: 61822
                      length: 12
                    pos: 61773
                    length: 1523
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 61913
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61926
                                  length: 4
                              children: []
                              pos: 61913
                              length: 17
                          children: []
                          pos: 61912
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 61942
                          length: 12
                        pos: 61932
                        length: 30
                      pos: 61909
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 61970
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 62005
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 62013
                                  length: 4
                              children: []
                              pos: 62005
                              length: 12
                          children: []
                          pos: 62004
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (info.isConstant() && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 62029
                          length: 241
                        pos: 62019
                        length: 259
                      pos: 62001
                      length: 277
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: inferred
                                      children: []
                                      pos: 62290
                                      length: 8
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rhsValue
                                          children: []
                                          pos: 62302
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 62314
                                          length: 4
                                      children: []
                                      pos: 62302
                                      length: 16
                                  children: []
                                  pos: 62290
                                  length: 28
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rhsValue.isFunction()
                                  children: []
                                  pos: 62322
                                  length: 21
                              children: []
                              pos: 62290
                              length: 53
                          children: []
                          pos: 62289
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 62359
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 62367
                                      length: 4
                                  children: []
                                  pos: 62359
                                  length: 12
                              children: []
                              pos: 62358
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return false;
                              children: []
                              pos: 62385
                              length: 13
                            pos: 62373
                            length: 35
                          pos: 62355
                          length: 904
                        pos: 62345
                        length: 922
                      pos: 62286
                      length: 981
                    - type: return_statement
                      fields:
                        text: return inferred;
                      children: []
                      pos: 63274
                      length: 16
                    pos: 61901
                    length: 1395
                children: []
                pos: 61773
                length: 1523
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 63541
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 63555
                      length: 15
                    pos: 63522
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 63580
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 63629
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 63641
                                  length: 4
                              children: []
                              pos: 63629
                              length: 16
                          children: []
                          pos: 63628
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 63657
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 63707
                          length: 110
                        pos: 63647
                        length: 178
                      pos: 63625
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 63832
                      length: 12
                    pos: 63572
                    length: 278
                children: []
                pos: 63522
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 63992
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 63987
                    length: 1182
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 64026
                      length: 1137
                    pos: 64018
                    length: 1151
                children: []
                pos: 63987
                length: 1182
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 65321
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 65396
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 65438
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 65556
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 65562
                            length: 15
                          pos: 65528
                          length: 483
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: method_invocation
                                    fields:
                                      text: n.isExprResult()
                                    children: []
                                    pos: 65614
                                    length: 16
                                children: []
                                pos: 65613
                                length: 18
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 65644
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 65694
                                        length: 15
                                    children: []
                                    pos: 65693
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 65711
                                    length: 282
                                children: []
                                pos: 65686
                                length: 307
                              pos: 65632
                              length: 371
                            pos: 65610
                            length: 393
                          pos: 65600
                          length: 411
                      children: []
                      pos: 65528
                      length: 483
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 66032
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 66051
                            length: 15
                          pos: 66019
                          length: 899
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 66147
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 66397
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 66405
                                                length: 4
                                            children: []
                                            pos: 66397
                                            length: 12
                                          right:
                                            type: unary_expression
                                            fields:
                                              text: "!member.isGetProp()"
                                            children: []
                                            pos: 66425
                                            length: 19
                                        children: []
                                        pos: 66397
                                        length: 47
                                      right:
                                        type: unary_expression
                                        fields:
                                          text: "!member.getFirstChild().isThis()"
                                        children: []
                                        pos: 66460
                                        length: 32
                                    children: []
                                    pos: 66397
                                    length: 95
                                children: []
                                pos: 66396
                                length: 97
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 66506
                                length: 7
                              pos: 66494
                              length: 29
                            pos: 66393
                            length: 130
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 66533
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(t.getSourceName(),
                                info, member, value);
                            children: []
                            pos: 66585
                            length: 72
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 66666
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 66713
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 66723
                                            length: 4
                                        children: []
                                        pos: 66713
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: name.isName()
                                                children: []
                                                pos: 66744
                                                length: 13
                                              right:
                                                type: method_invocation
                                                fields:
                                                  text: name.isString()
                                                children: []
                                                pos: 66761
                                                length: 15
                                            children: []
                                            pos: 66744
                                            length: 32
                                        children: []
                                        pos: 66743
                                        length: 34
                                    children: []
                                    pos: 66713
                                    length: 64
                                children: []
                                pos: 66712
                                length: 66
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  member);
                                children: []
                                pos: 66791
                                length: 109
                              pos: 66779
                              length: 131
                            pos: 66709
                            length: 201
                          pos: 66137
                          length: 781
                      children: []
                      pos: 66019
                      length: 899
                    pos: 65301
                    length: 1623
                children: []
                pos: 65301
                length: 1623
              pos: 16127
              length: 50826
          children: []
          pos: 16127
          length: 50826
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 67050
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 67072
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 67101
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 67137
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 67174
                length: 168
              pos: 67023
              length: 323
          children: []
          pos: 67023
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 67481
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 67536
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 67875
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 67881
                      length: 15
                    pos: 67853
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 67927
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 67969
                              length: 11
                          children: []
                          pos: 67968
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 67982
                          length: 195
                      children: []
                      pos: 67961
                      length: 216
                    pos: 67919
                    length: 264
                children: []
                pos: 67853
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 68208
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 68243
                      length: 15
                    pos: 68189
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 68328
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 68363
                      length: 62
                    pos: 68320
                    length: 111
                children: []
                pos: 68189
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 68611
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 68636
                      length: 15
                    pos: 68598
                    length: 960
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 68697
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 68705
                                      length: 4
                                  children: []
                                  pos: 68697
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 68713
                                  length: 22
                              children: []
                              pos: 68697
                              length: 38
                          children: []
                          pos: 68696
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 68747
                          length: 7
                        pos: 68737
                        length: 25
                      pos: 68693
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 68770
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 68827
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 68838
                                  length: 4
                              children: []
                              pos: 68827
                              length: 15
                          children: []
                          pos: 68826
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 68854
                          length: 7
                        pos: 68844
                        length: 25
                      pos: 68823
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                      children: []
                      pos: 69044
                      length: 63
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 69115
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 69196
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 69208
                                  length: 4
                              children: []
                              pos: 69196
                              length: 16
                          children: []
                          pos: 69195
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 69224
                          length: 118
                        pos: 69214
                        length: 136
                      pos: 69192
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 69358
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: candidate.isGetProp()
                              children: []
                              pos: 69423
                              length: 21
                          children: []
                          pos: 69422
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 69456
                          length: 88
                        pos: 69446
                        length: 106
                      pos: 69419
                      length: 133
                    pos: 68685
                    length: 873
                children: []
                pos: 68598
                length: 960
              pos: 67461
              length: 2101
          children: []
          pos: 67461
          length: 2101
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 69714
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 69834
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 69972
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 69967
                    length: 744
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 69988
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          AstFunctionContents contents =
                                    getFunctionAnalysisResults(scope.getRootNode());
                      children: []
                      pos: 70056
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: contents
                                  children: []
                                  pos: 70156
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 70168
                                  length: 4
                              children: []
                              pos: 70156
                              length: 16
                          children: []
                          pos: 70155
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (String varName : contents.getEscapedVarNames()) {
                                        Var v = scope.getVar(varName);
                                        Preconditions.checkState(v.getScope() == scope);
                                        v.markEscaped();
                                      }
                          children: []
                          pos: 70184
                          length: 191
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Multiset.Entry<String> entry :
                                               contents.getAssignedNameCounts().entrySet()) {
                                        Var v = scope.getVar(entry.getElement());
                                        Preconditions.checkState(v.getScope() == scope);
                                        if (entry.getCount() == 1) {
                                          v.markAssignedExactlyOnce();
                                        }
                                      }
                          children: []
                          pos: 70385
                          length: 312
                        pos: 70174
                        length: 531
                      pos: 70152
                      length: 553
                    pos: 69980
                    length: 731
                children: []
                pos: 69967
                length: 744
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 70997
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71003
                      length: 15
                    pos: 70975
                    length: 276
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 71053
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 71058
                                  length: 19
                              children: []
                              pos: 71053
                              length: 24
                          children: []
                          pos: 71052
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 71079
                        length: 7
                      pos: 71049
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isParamList()
                                  children: []
                                  pos: 71098
                                  length: 15
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 71117
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 71127
                                      length: 19
                                  children: []
                                  pos: 71117
                                  length: 29
                              children: []
                              pos: 71098
                              length: 48
                          children: []
                          pos: 71097
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 71158
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71196
                          length: 7
                        pos: 71148
                        length: 63
                      pos: 71094
                      length: 117
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 71219
                      length: 26
                    pos: 71041
                    length: 210
                children: []
                pos: 70975
                length: 276
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 71332
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 71353
                      length: 11
                    pos: 71319
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 71410
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 71458
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 71508
                              length: 17
                          children: []
                          pos: 71507
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 71537
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 71589
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 71598
                                          length: 4
                                      children: []
                                      pos: 71589
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 71783
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 71806
                                                  length: 4
                                              children: []
                                              pos: 71783
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 71959
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 71986
                                                  length: 6
                                              children: []
                                              pos: 71959
                                              length: 33
                                          children: []
                                          pos: 71783
                                          length: 209
                                      children: []
                                      pos: 71782
                                      length: 211
                                  children: []
                                  pos: 71589
                                  length: 404
                              children: []
                              pos: 71588
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 72007
                              length: 58
                            pos: 71995
                            length: 80
                          pos: 71585
                          length: 490
                        pos: 71527
                        length: 556
                      pos: 71504
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 72091
                      length: 25
                    pos: 71366
                    length: 756
                children: []
                pos: 71319
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 72204
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 72221
                      length: 17
                    pos: 72191
                    length: 975
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 72248
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 72315
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean isFnTypeInferred = functionNode.getBooleanProp(
                                    Node.INFERRED_FUNCTION);
                      children: []
                      pos: 72358
                      length: 90
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    JSType.toMaybeFunctionType(functionNode.getJSType());
                      children: []
                      pos: 72455
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 72557
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 72573
                                  length: 4
                              children: []
                              pos: 72557
                              length: 20
                          children: []
                          pos: 72556
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 72589
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 72658
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 72677
                                      length: 4
                                  children: []
                                  pos: 72658
                                  length: 23
                              children: []
                              pos: 72657
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 72695
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), isFnTypeInferred);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 72760
                              length: 382
                            pos: 72683
                            length: 469
                          pos: 72654
                          length: 498
                        pos: 72579
                        length: 581
                      pos: 72553
                      length: 607
                    pos: 72240
                    length: 926
                children: []
                pos: 72191
                length: 975
              pos: 69694
              length: 3500
          children: []
          pos: 69694
          length: 3500
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: FirstOrderFunctionAnalyzer
              children: []
              pos: 73397
              length: 26
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final AbstractCompiler compiler;
                children: []
                pos: 73491
                length: 40
              - type: field_declaration
                fields:
                  text: private final Map<Node, AstFunctionContents> data;
                children: []
                pos: 73536
                length: 50
              - type: constructor_declaration
                fields:
                  text: |-
                    FirstOrderFunctionAnalyzer(
                            AbstractCompiler compiler, Map<Node, AstFunctionContents> outParam) {
                          this.compiler = compiler;
                          this.data = outParam;
                        }
                children: []
                pos: 73592
                length: 171
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: process
                    children: []
                    pos: 73791
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node externs
                      children: []
                      pos: 73799
                      length: 12
                    pos: 73769
                    length: 267
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: externs
                                  children: []
                                  pos: 73836
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 73847
                                  length: 4
                              children: []
                              pos: 73836
                              length: 15
                          children: []
                          pos: 73835
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: NodeTraversal.traverse(compiler, root, this);
                          children: []
                          pos: 73863
                          length: 45
                        pos: 73853
                        length: 63
                      pos: 73832
                      length: 198
                    pos: 73824
                    length: 212
                children: []
                pos: 73769
                length: 267
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: enterScope
                    children: []
                    pos: 74064
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 74075
                      length: 15
                    pos: 74042
                    length: 181
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!t.inGlobalScope()"
                              children: []
                              pos: 74104
                              length: 18
                          children: []
                          pos: 74103
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node n = t.getScopeRoot();
                          children: []
                          pos: 74134
                          length: 26
                        - type: expression_statement
                          fields:
                            text: data.put(n, new AstFunctionContents(n));
                          children: []
                          pos: 74169
                          length: 40
                        pos: 74124
                        length: 93
                      pos: 74100
                      length: 117
                    pos: 74092
                    length: 131
                children: []
                pos: 74042
                length: 181
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 74251
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 74257
                      length: 15
                    pos: 74229
                    length: 1927
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: t.inGlobalScope()
                              children: []
                              pos: 74307
                              length: 17
                          children: []
                          pos: 74306
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74336
                          length: 7
                        pos: 74326
                        length: 25
                      pos: 74303
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isReturn()
                                  children: []
                                  pos: 74363
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getFirstChild()
                                      children: []
                                      pos: 74379
                                      length: 17
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 74400
                                      length: 4
                                  children: []
                                  pos: 74379
                                  length: 25
                              children: []
                              pos: 74363
                              length: 41
                          children: []
                          pos: 74362
                          length: 43
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: data.get(t.getScopeRoot()).recordNonEmptyReturn();
                          children: []
                          pos: 74416
                          length: 50
                        pos: 74406
                        length: 68
                      pos: 74359
                      length: 115
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_or_equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: t.getScopeDepth()
                                  children: []
                                  pos: 74486
                                  length: 17
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '1'
                                  children: []
                                  pos: 74507
                                  length: 1
                              children: []
                              pos: 74486
                              length: 22
                          children: []
                          pos: 74485
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74911
                          length: 7
                        pos: 74510
                        length: 416
                      pos: 74482
                      length: 444
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isName()
                                      children: []
                                      pos: 74938
                                      length: 10
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isLValue(n)
                                      children: []
                                      pos: 74952
                                      length: 20
                                  children: []
                                  pos: 74938
                                  length: 34
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!NodeUtil.isBleedingFunctionName(n)"
                                  children: []
                                  pos: 75127
                                  length: 35
                              children: []
                              pos: 74938
                              length: 224
                          children: []
                          pos: 74937
                          length: 226
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String name = n.getString();
                          children: []
                          pos: 75174
                          length: 28
                        - type: local_variable_declaration
                          fields:
                            text: Scope scope = t.getScope();
                          children: []
                          pos: 75211
                          length: 27
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(name);
                          children: []
                          pos: 75247
                          length: 29
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 75289
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 75296
                                      length: 4
                                  children: []
                                  pos: 75289
                                  length: 11
                              children: []
                              pos: 75288
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Scope ownerScope = var.getScope();
                              children: []
                              pos: 75314
                              length: 34
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: ownerScope.isLocal()
                                      children: []
                                      pos: 75363
                                      length: 20
                                  children: []
                                  pos: 75362
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordAssignedName(name);
                                  children: []
                                  pos: 75399
                                  length: 60
                                pos: 75385
                                length: 86
                              pos: 75359
                              length: 112
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: scope
                                              children: []
                                              pos: 75487
                                              length: 5
                                            right:
                                              type: identifier
                                              fields:
                                                text: ownerScope
                                              children: []
                                              pos: 75496
                                              length: 10
                                          children: []
                                          pos: 75487
                                          length: 19
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerScope.isLocal()
                                          children: []
                                          pos: 75510
                                          length: 20
                                      children: []
                                      pos: 75487
                                      length: 43
                                  children: []
                                  pos: 75486
                                  length: 45
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordEscapedVarName(name);
                                  children: []
                                  pos: 75546
                                  length: 62
                                pos: 75532
                                length: 88
                              pos: 75483
                              length: 137
                            pos: 75302
                            length: 328
                          pos: 75285
                          length: 345
                        pos: 75164
                        length: 474
                      pos: 74934
                      length: 1216
                    pos: 74295
                    length: 1861
                children: []
                pos: 74229
                length: 1927
              pos: 73376
              length: 2784
          children: []
          pos: 73376
          length: 2784
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFunctionAnalysisResults
              children: []
              pos: 76192
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node n"
                children: []
                pos: 76219
                length: 16
              pos: 76164
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: "n"
                            children: []
                            pos: 76247
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 76252
                            length: 4
                        children: []
                        pos: 76247
                        length: 9
                    children: []
                    pos: 76246
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 76266
                    length: 12
                  pos: 76258
                  length: 26
                pos: 76243
                length: 41
              - type: return_statement
                fields:
                  text: return functionAnalysisResults.get(n);
                children: []
                pos: 76409
                length: 38
              pos: 76237
              length: 214
          children: []
          pos: 76164
          length: 287
        pos: 5075
        length: 71378
    children: []
    pos: 5075
    length: 71378
  pos: 0
  length: 76454
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 5087
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 5216
          length: 91
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5311
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5492
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5683
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 5871
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 6060
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 6243
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6417
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6611
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6654
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6710
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6751
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 6802
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 6847
          length: 78
        - type: field_declaration
          fields:
            text: |-
              private final Map<String, String> delegateCallingConventions =
                    Maps.newHashMap();
          children: []
          pos: 6928
          length: 87
        - type: field_declaration
          fields:
            text: |-
              private final Map<Node, AstFunctionContents> functionAnalysisResults =
                    Maps.newHashMap();
          children: []
          pos: 7068
          length: 95
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 7324
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 7346
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 7367
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 7391
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 7739
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 7747
                      length: 11
                    pos: 7734
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 7768
                      length: 62
                    pos: 7760
                    length: 76
                children: []
                pos: 7734
                length: 102
              pos: 7310
              length: 530
          children: []
          pos: 7310
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 7844
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 7950
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 8454
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8466
                length: 9
              pos: 8429
              length: 1971
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 8686
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 8713
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8763
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8773
                            length: 4
                        children: []
                        pos: 8763
                        length: 14
                    children: []
                    pos: 8762
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        (new FirstOrderFunctionAnalyzer(compiler, functionAnalysisResults))
                                  .process(root.getFirstChild(), root.getLastChild());
                    children: []
                    pos: 8845
                    length: 130
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 9034
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 9078
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 9158
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 9199
                    length: 53
                  pos: 8779
                  length: 479
                pos: 8759
                length: 704
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 9469
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 9513
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type.isFunctionType()) {
                            FunctionType fnType = type.toMaybeFunctionType();
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 9709
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 10191
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10201
                            length: 4
                        children: []
                        pos: 10191
                        length: 14
                    children: []
                    pos: 10190
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes,
                                  delegateCallingConventions);
                    children: []
                    pos: 10215
                    length: 154
                  pos: 10207
                  length: 168
                pos: 10187
                length: 188
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 10380
                length: 16
              pos: 8491
              length: 1909
          children: []
          pos: 8429
          length: 1971
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: patchGlobalScope
              children: []
              pos: 10694
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope globalScope
                children: []
                pos: 10711
                length: 17
              pos: 10689
              length: 1668
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(scriptRoot.isScript());
                children: []
                pos: 10902
                length: 48
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(globalScope);
                children: []
                pos: 10955
                length: 40
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(globalScope.isGlobal());
                children: []
                pos: 11000
                length: 49
              - type: local_variable_declaration
                fields:
                  text: String scriptName = NodeUtil.getSourceName(scriptRoot);
                children: []
                pos: 11055
                length: 55
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(scriptName);
                children: []
                pos: 11115
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {
                          if (scriptName.equals(NodeUtil.getSourceName(node))) {
                            functionAnalysisResults.remove(node);
                          }
                        }
                children: []
                pos: 11159
                length: 195
              - type: expression_statement
                fields:
                  text: |-
                    (new FirstOrderFunctionAnalyzer(
                            compiler, functionAnalysisResults)).process(null, scriptRoot);
                children: []
                pos: 11360
                length: 103
              - type: local_variable_declaration
                fields:
                  text: Iterator<Var> varIter = globalScope.getVars();
                children: []
                pos: 11766
                length: 46
              - type: local_variable_declaration
                fields:
                  text: List<Var> varsToRemove = Lists.newArrayList();
                children: []
                pos: 11817
                length: 46
              - type: while_statement
                fields:
                  text: |-
                    while (varIter.hasNext()) {
                          Var oldVar = varIter.next();
                          if (scriptName.equals(oldVar.getInputName())) {
                            varsToRemove.add(oldVar);
                          }
                        }
                children: []
                pos: 11868
                length: 164
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Var var : varsToRemove) {
                          globalScope.undeclare(var);
                          globalScope.getTypeOfThis().removeProperty(var.getName());
                        }
                children: []
                pos: 12037
                length: 135
              - type: local_variable_declaration
                fields:
                  text: GlobalScopeBuilder scopeBuilder = new GlobalScopeBuilder(globalScope);
                children: []
                pos: 12219
                length: 70
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, scriptRoot, scopeBuilder);
                children: []
                pos: 12294
                length: 59
              pos: 10747
              length: 1610
          children: []
          pos: 10689
          length: 1668
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 12516
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 12535
                length: 9
              pos: 12489
              length: 1400
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 12553
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 12651
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 12692
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 12747
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 12811
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 12865
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 12920
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 12980
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13038
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13101
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13157
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13218
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 13283
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13339
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13402
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13464
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13524
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 13583
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 13811
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 13876
                length: 9
              pos: 12546
              length: 1343
          children: []
          pos: 12489
          length: 1400
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 13906
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 13932
                length: 11
              pos: 13893
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 13969
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 14031
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 14104
                length: 89
              pos: 13963
              length: 234
          children: []
          pos: 13893
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 14214
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14237
                length: 11
              pos: 14201
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 14293
                length: 64
              pos: 14287
              length: 74
          children: []
          pos: 14201
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 14378
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14396
                length: 11
              pos: 14365
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 14438
                length: 42
              pos: 14432
              length: 52
          children: []
          pos: 14365
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 14509
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 14587
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 14631
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 14752
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 14758
                      length: 15
                    pos: 14726
                    length: 841
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 14807
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 14843
                              length: 14
                          children: []
                          pos: 14842
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, child.getFirstChild(),
                                              NodeUtil.getBestJSDocInfo(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.isAssign()) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getLastChild(),
                                              firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, null, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 14859
                          length: 702
                      children: []
                      pos: 14835
                      length: 726
                    pos: 14799
                    length: 768
                children: []
                pos: 14726
                length: 841
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 15586
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 15612
                      length: 13
                    pos: 15573
                    length: 432
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 15671
                              length: 26
                          children: []
                          pos: 15670
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 15713
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 15721
                                      length: 4
                                  children: []
                                  pos: 15713
                                  length: 12
                              children: []
                              pos: 15712
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 15743
                                      length: 27
                                  children: []
                                  pos: 15742
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 15786
                                  length: 62
                                pos: 15772
                                length: 88
                              pos: 15739
                              length: 242
                            pos: 15727
                            length: 264
                          pos: 15709
                          length: 282
                        pos: 15699
                        length: 300
                      pos: 15667
                      length: 332
                    pos: 15659
                    length: 346
                children: []
                pos: 15573
                length: 432
              pos: 14488
              length: 1521
          children: []
          pos: 14488
          length: 1521
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 16028
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 16042
                length: 23
              pos: 16013
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 16073
                length: 46
              pos: 16067
              length: 56
          children: []
          pos: 16013
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 16150
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 16272
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 16296
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 16473
                length: 67
              - type: field_declaration
                fields:
                  text: private List<Node> lentObjectLiterals = null;
                children: []
                pos: 16957
                length: 45
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 17178
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 17330
                length: 33
              - type: field_declaration
                fields:
                  text: private InputId inputId;
                children: []
                pos: 17425
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 17455
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 17541
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 17557
                      length: 9
                    pos: 17536
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 17589
                      length: 54
                    pos: 17581
                    length: 68
                children: []
                pos: 17536
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 17660
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 17655
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 17732
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 17887
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 17931
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 18109
                      length: 40
                    pos: 17675
                    length: 480
                children: []
                pos: 17655
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 18196
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18211
                      length: 15
                    pos: 18161
                    length: 1043
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 18265
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isFunction()
                                  children: []
                                  pos: 18301
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: n.isScript()
                                  children: []
                                  pos: 18329
                                  length: 12
                              children: []
                              pos: 18301
                              length: 40
                          children: []
                          pos: 18300
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(inputId);
                          children: []
                          pos: 18353
                          length: 36
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 18398
                          length: 39
                        pos: 18343
                        length: 102
                      pos: 18297
                      length: 148
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || !parent.isFunction() ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 18577
                      length: 131
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 18720
                              length: 7
                          children: []
                          pos: 18719
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 18869
                                  length: 29
                              children: []
                              pos: 18868
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child, n);
                                              }
                                            }
                              children: []
                              pos: 18912
                              length: 245
                            pos: 18900
                            length: 267
                          pos: 18865
                          length: 302
                        pos: 18729
                        length: 446
                      pos: 18716
                      length: 459
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 19183
                      length: 15
                    pos: 18257
                    length: 947
                children: []
                pos: 18161
                length: 1043
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 19236
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19242
                      length: 15
                    pos: 19210
                    length: 1765
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 19288
                      length: 25
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(t, n);
                      children: []
                      pos: 19320
                      length: 25
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 19361
                              length: 11
                          children: []
                          pos: 19360
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        checkForCallingConventionDefiningCalls(n, delegateCallingConventions);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n, parent);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.isGetProp() &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.isExprResult() &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 19374
                          length: 1287
                      children: []
                      pos: 19353
                      length: 1308
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getParent()
                                          children: []
                                          pos: 20736
                                          length: 13
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 20753
                                          length: 4
                                      children: []
                                      pos: 20736
                                      length: 21
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isStatement(n)
                                      children: []
                                      pos: 20761
                                      length: 23
                                  children: []
                                  pos: 20736
                                  length: 48
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lentObjectLiterals
                                      children: []
                                      pos: 20798
                                      length: 18
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20820
                                      length: 4
                                  children: []
                                  pos: 20798
                                  length: 26
                              children: []
                              pos: 20736
                              length: 88
                          children: []
                          pos: 20735
                          length: 90
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node objLit : lentObjectLiterals) {
                                        defineObjectLiteral(objLit);
                                      }
                          children: []
                          pos: 20836
                          length: 89
                        - type: expression_statement
                          fields:
                            text: lentObjectLiterals.clear();
                          children: []
                          pos: 20934
                          length: 27
                        pos: 20826
                        length: 143
                      pos: 20732
                      length: 237
                    pos: 19280
                    length: 1695
                children: []
                pos: 19210
                length: 1765
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 20994
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 21013
                      length: 15
                    pos: 20981
                    length: 1205
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 21054
                              length: 11
                          children: []
                          pos: 21053
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        n.setJSType(getNativeType(STRING_TYPE));
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        JSDocInfo info = n.getJSDocInfo();
                                        if (info != null &&
                                            info.getLendsName() != null) {
                                          if (lentObjectLiterals == null) {
                                            lentObjectLiterals = Lists.newArrayList();
                                          }
                                          lentObjectLiterals.add(n);
                                        } else {
                                          defineObjectLiteral(n);
                                        }
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 21067
                          length: 1113
                      children: []
                      pos: 21046
                      length: 1134
                    pos: 21038
                    length: 1148
                children: []
                pos: 20981
                length: 1205
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 22205
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objectLit
                      children: []
                      pos: 22225
                      length: 14
                    pos: 22192
                    length: 1674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 22288
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 22314
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 22367
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22375
                                      length: 4
                                  children: []
                                  pos: 22367
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 22393
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22416
                                      length: 4
                                  children: []
                                  pos: 22393
                                  length: 27
                              children: []
                              pos: 22367
                              length: 53
                          children: []
                          pos: 22366
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 22432
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 22480
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 22532
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22544
                                      length: 4
                                  children: []
                                  pos: 22532
                                  length: 16
                              children: []
                              pos: 22531
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 22562
                              length: 94
                            pos: 22550
                            length: 116
                          pos: 22528
                          length: 616
                        pos: 22422
                        length: 730
                      pos: 22363
                      length: 789
                    - type: expression_statement
                      fields:
                        text: info = NodeUtil.getBestJSDocInfo(objectLit);
                      children: []
                      pos: 23160
                      length: 44
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(objectLit);
                      children: []
                      pos: 23211
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 23266
                      length: 55
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 23328
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 23371
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23379
                                      length: 4
                                  children: []
                                  pos: 23371
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 23387
                                  length: 27
                              children: []
                              pos: 23371
                              length: 43
                          children: []
                          pos: 23370
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 23426
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 23503
                          length: 23
                        pos: 23416
                        length: 118
                      pos: 23367
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 23546
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 23554
                                  length: 4
                              children: []
                              pos: 23546
                              length: 12
                          children: []
                          pos: 23545
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType();
                          children: []
                          pos: 23570
                          length: 48
                        pos: 23560
                        length: 66
                      pos: 23542
                      length: 84
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 23634
                      length: 33
                    - type: expression_statement
                      fields:
                        text: |-
                          processObjectLitProperties(
                                    objectLit, ObjectType.cast(objectLit.getJSType()), !createdEnumType);
                      children: []
                      pos: 23753
                      length: 107
                    pos: 22241
                    length: 1625
                children: []
                pos: 22192
                length: 1674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 24263
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objLit
                      children: []
                      pos: 24299
                      length: 11
                    pos: 24258
                    length: 1382
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType =
                                      getDeclaredType(keyNode.getSourceFileName(), info, keyNode, value);
                                  JSType keyType =  objLitType.isEnumType() ?
                                      objLitType.toMaybeEnumType().getElementsType() :
                                      NodeUtil.getObjectLitKeyTypeFromValueType(keyNode, valueType);

                                  // Try to declare this property in the current scope if it
                                  // has an authoritative name.
                                  String qualifiedName = NodeUtil.getBestLValueName(keyNode);
                                  if (qualifiedName != null) {
                                    boolean inferred = keyType == null;
                                    defineSlot(keyNode, objLit, qualifiedName, keyType, inferred);
                                  } else if (keyType != null) {
                                    setDeferredType(keyNode, keyType);
                                  }

                                  if (keyType != null && objLitType != null && declareOnOwner) {
                                    // Declare this property on its object literal.
                                    boolean isExtern = keyNode.isFromExterns();
                                    objLitType.defineDeclaredProperty(memberName, keyType, keyNode);
                                  }
                                }
                      children: []
                      pos: 24375
                      length: 1259
                    pos: 24367
                    length: 1273
                children: []
                pos: 24258
                length: 1382
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 25891
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 25919
                      length: 17
                    pos: 25876
                    length: 674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 25981
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode =
                                    node.isGetProp() ? node.getFirstChild() :
                                    NodeUtil.isObjectLitKey(node, node.getParent()) ? node.getParent() :
                                    null;
                      children: []
                      pos: 26009
                      length: 161
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 26181
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26189
                                  length: 4
                              children: []
                              pos: 26181
                              length: 12
                          children: []
                          pos: 26180
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 26209
                                  length: 14
                              children: []
                              pos: 26208
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 26237
                              length: 54
                            pos: 26225
                            length: 76
                          pos: 26205
                          length: 310
                        pos: 26195
                        length: 328
                      pos: 26177
                      length: 346
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 26530
                      length: 14
                    pos: 25973
                    length: 577
                children: []
                pos: 25876
                length: 674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 26705
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26726
                      length: 6
                    pos: 26700
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 26752
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 26804
                      length: 46
                    pos: 26744
                    length: 112
                children: []
                pos: 26700
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 26917
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26929
                      length: 6
                    pos: 26912
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 26958
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 27002
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 27044
                      length: 31
                    pos: 26950
                    length: 131
                children: []
                pos: 26912
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 27145
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27155
                      length: 6
                    pos: 27140
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 27184
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 27226
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 27271
                              length: 23
                          children: []
                          pos: 27270
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 27310
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 27318
                                      length: 4
                                  children: []
                                  pos: 27310
                                  length: 12
                              children: []
                              pos: 27309
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 27367
                              length: 63
                            pos: 27324
                            length: 116
                          pos: 27306
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 27449
                          length: 102
                        pos: 27296
                        length: 263
                      pos: 27267
                      length: 440
                    pos: 27176
                    length: 537
                children: []
                pos: 27140
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 27775
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27797
                      length: 6
                    pos: 27770
                    length: 850
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 27826
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(n);
                      children: []
                      pos: 27981
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = NodeUtil.getBestJSDocInfo(n);
                      children: []
                      pos: 28028
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 28081
                      length: 57
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 28145
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 28308
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 28514
                              length: 33
                          children: []
                          pos: 28513
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 28559
                          length: 47
                        pos: 28549
                        length: 65
                      pos: 28510
                      length: 104
                    pos: 27818
                    length: 802
                children: []
                pos: 27770
                length: 850
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 29023
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 29034
                      length: 9
                    pos: 29010
                    length: 420
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 29092
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(sourceName, info, name,
                          value);
                      children: []
                      pos: 29159
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 29231
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29239
                                  length: 4
                              children: []
                              pos: 29231
                              length: 12
                          children: []
                          pos: 29230
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              type = name.isFromExterns() ?
                                          getNativeType(UNKNOWN_TYPE) : null;
                          children: []
                          pos: 29304
                          length: 77
                        pos: 29245
                        length: 144
                      pos: 29227
                      length: 162
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 29396
                      length: 28
                    pos: 29084
                    length: 346
                children: []
                pos: 29010
                length: 420
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 29776
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 29814
                      length: 17
                    pos: 29760
                    length: 350
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 29874
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29882
                                  length: 4
                              children: []
                              pos: 29874
                              length: 12
                          children: []
                          pos: 29873
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 29898
                          length: 12
                        pos: 29888
                        length: 30
                      pos: 29870
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 29929
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 29939
                                      length: 4
                                  children: []
                                  pos: 29929
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                                  children: []
                                  pos: 29957
                                  length: 51
                              children: []
                              pos: 29929
                              length: 79
                          children: []
                          pos: 29928
                          length: 81
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 30020
                          length: 13
                        pos: 30010
                        length: 31
                      pos: 29925
                      length: 116
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 30048
                      length: 56
                    pos: 29862
                    length: 248
                children: []
                pos: 29760
                length: 350
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 31158
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 31195
                      length: 21
                    pos: 31137
                    length: 4260
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 31327
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 31446
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 31456
                                          length: 4
                                      children: []
                                      pos: 31446
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 31464
                                      length: 24
                                  children: []
                                  pos: 31446
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 31492
                                  length: 16
                              children: []
                              pos: 31446
                              length: 62
                          children: []
                          pos: 31445
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 31520
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 31583
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31590
                                              length: 4
                                          children: []
                                          pos: 31583
                                          length: 11
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: var.getType()
                                              children: []
                                              pos: 31598
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31615
                                              length: 4
                                          children: []
                                          pos: 31598
                                          length: 21
                                      children: []
                                      pos: 31583
                                      length: 36
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: var.getType().isFunctionType()
                                      children: []
                                      pos: 31635
                                      length: 30
                                  children: []
                                  pos: 31583
                                  length: 82
                              children: []
                              pos: 31582
                              length: 84
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = var.getType().toMaybeFunctionType();
                              children: []
                              pos: 31679
                              length: 64
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 31759
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 31790
                                                  length: 25
                                              children: []
                                              pos: 31759
                                              length: 56
                                          children: []
                                          pos: 31758
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 31834
                                          length: 33
                                      children: []
                                      pos: 31758
                                      length: 109
                                  children: []
                                  pos: 31757
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 31883
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 31928
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 31936
                                                  length: 4
                                              children: []
                                              pos: 31928
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 31944
                                              length: 16
                                          children: []
                                          pos: 31928
                                          length: 32
                                      children: []
                                      pos: 31927
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 31978
                                      length: 63
                                    pos: 31962
                                    length: 93
                                  pos: 31924
                                  length: 131
                                pos: 31869
                                length: 198
                              pos: 31754
                              length: 313
                            pos: 31667
                            length: 410
                          pos: 31579
                          length: 498
                        pos: 31510
                        length: 575
                      pos: 31442
                      length: 643
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 32097
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 32113
                                  length: 4
                              children: []
                              pos: 32097
                              length: 20
                          children: []
                          pos: 32096
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 32129
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.isFunction();
                          children: []
                          pos: 32192
                          length: 72
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 32273
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 32324
                          length: 88
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                              : null;'
                          children: []
                          pos: 32421
                          length: 61
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 32496
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 32504
                                          length: 4
                                      children: []
                                      pos: 32496
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 32512
                                      length: 14
                                  children: []
                                  pos: 32496
                                  length: 30
                              children: []
                              pos: 32495
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 32540
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 32685
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 32743
                                      length: 21
                                  children: []
                                  pos: 32742
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = type.toMaybeFunctionType();
                                  children: []
                                  pos: 32780
                                  length: 42
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 32835
                                  length: 32
                                pos: 32766
                                length: 113
                              pos: 32739
                              length: 140
                            pos: 32528
                            length: 361
                          pos: 32492
                          length: 397
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 32903
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 32919
                                      length: 4
                                  children: []
                                  pos: 32903
                                  length: 20
                              children: []
                              pos: 32902
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(lvalueNode);
                              children: []
                              pos: 32992
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 33060
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: Var ownerVar = null;
                              children: []
                              pos: 33128
                              length: 20
                            - type: local_variable_declaration
                              fields:
                                text: String propName = null;
                              children: []
                              pos: 33159
                              length: 23
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 33193
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 33236
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 33249
                                          length: 4
                                      children: []
                                      pos: 33236
                                      length: 17
                                  children: []
                                  pos: 33235
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 33269
                                  length: 35
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 33321
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33333
                                              length: 4
                                          children: []
                                          pos: 33321
                                          length: 16
                                      children: []
                                      pos: 33320
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: ownerType = ObjectType.cast(ownerVar.getType());
                                      children: []
                                      pos: 33355
                                      length: 48
                                    pos: 33339
                                    length: 78
                                  pos: 33317
                                  length: 100
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: name
                                              children: []
                                              pos: 33434
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33442
                                              length: 4
                                          children: []
                                          pos: 33434
                                          length: 12
                                      children: []
                                      pos: 33433
                                      length: 14
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: propName = name.substring(ownerName.length()
                                          + 1);
                                      children: []
                                      pos: 33464
                                      length: 50
                                    pos: 33448
                                    length: 80
                                  pos: 33430
                                  length: 98
                                pos: 33255
                                length: 285
                              pos: 33232
                              length: 308
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenPropType = null;
                              children: []
                              pos: 33552
                              length: 39
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 33606
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33619
                                              length: 4
                                          children: []
                                          pos: 33606
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: propName
                                              children: []
                                              pos: 33627
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33639
                                              length: 4
                                          children: []
                                          pos: 33627
                                          length: 16
                                      children: []
                                      pos: 33606
                                      length: 37
                                  children: []
                                  pos: 33605
                                  length: 39
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      overriddenPropType =
                                                      findOverriddenFunction(ownerType, propName);
                                  children: []
                                  pos: 33659
                                  length: 81
                                pos: 33645
                                length: 107
                              pos: 33602
                              length: 150
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setContents(getFunctionAnalysisResults(fnRoot))
                                                .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                                .inferTemplateTypeName(info)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 33764
                              length: 392
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 34206
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 34257
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 34270
                                                  length: 4
                                              children: []
                                              pos: 34257
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: ownerType.isFunctionPrototypeType()
                                              children: []
                                              pos: 34278
                                              length: 35
                                          children: []
                                          pos: 34257
                                          length: 56
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerType.getOwnerFunction().hasInstanceType()
                                          children: []
                                          pos: 34331
                                          length: 46
                                      children: []
                                      pos: 34257
                                      length: 120
                                  children: []
                                  pos: 34256
                                  length: 122
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      builder.inferThisType(
                                                      info, ownerType.getOwnerFunction().getInstanceType());
                                  children: []
                                  pos: 34393
                                  length: 93
                                - type: expression_statement
                                  fields:
                                    text: searchedForThisType = true;
                                  children: []
                                  pos: 34499
                                  length: 27
                                pos: 34379
                                length: 159
                              pos: 34253
                              length: 856
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 35125
                                      length: 20
                                  children: []
                                  pos: 35124
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info);
                                  children: []
                                  pos: 35161
                                  length: 28
                                pos: 35147
                                length: 54
                              pos: 35121
                              length: 80
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .buildAndRegister();
                              children: []
                              pos: 35213
                              length: 114
                            pos: 32925
                            length: 2412
                          pos: 32899
                          length: 2438
                        pos: 32119
                        length: 3226
                      pos: 32093
                      length: 3252
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 35371
                      length: 20
                    pos: 31318
                    length: 4079
                children: []
                pos: 31137
                length: 4260
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 35511
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 35543
                      length: 20
                    pos: 35490
                    length: 780
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 35676
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: propType
                                      children: []
                                      pos: 35741
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35753
                                      length: 4
                                  children: []
                                  pos: 35741
                                  length: 16
                                right:
                                  type: method_invocation
                                  fields:
                                    text: propType.isFunctionType()
                                  children: []
                                  pos: 35761
                                  length: 25
                              children: []
                              pos: 35741
                              length: 45
                          children: []
                          pos: 35740
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return propType.toMaybeFunctionType();
                          children: []
                          pos: 35798
                          length: 38
                        pos: 35788
                        length: 56
                      pos: 35737
                      length: 507
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 36252
                      length: 12
                    pos: 35582
                    length: 688
                children: []
                pos: 35490
                length: 780
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 36977
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 37001
                      length: 11
                    pos: 36960
                    length: 1636
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 37076
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 37116
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 37178
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 37214
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 37224
                                      length: 4
                                  children: []
                                  pos: 37214
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 37232
                                  length: 24
                              children: []
                              pos: 37214
                              length: 42
                          children: []
                          pos: 37213
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 37303
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 37366
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37373
                                          length: 4
                                      children: []
                                      pos: 37366
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 37381
                                      length: 33
                                  children: []
                                  pos: 37366
                                  length: 48
                              children: []
                              pos: 37365
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 37428
                              length: 36
                            pos: 37416
                            length: 58
                          pos: 37362
                          length: 112
                        pos: 37258
                        length: 224
                      pos: 37210
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 37494
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37506
                                  length: 4
                              children: []
                              pos: 37494
                              length: 16
                          children: []
                          pos: 37493
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 37522
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, rValue,
                              elementsType);
                          children: []
                          pos: 37623
                          length: 67
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 37704
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37714
                                          length: 4
                                      children: []
                                      pos: 37704
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isObjectLit()
                                      children: []
                                      pos: 37722
                                      length: 20
                                  children: []
                                  pos: 37704
                                  length: 38
                              children: []
                              pos: 37703
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 37791
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 37836
                              length: 589
                            pos: 37744
                            length: 691
                          pos: 37700
                          length: 735
                        pos: 37512
                        length: 931
                      pos: 37490
                      length: 953
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 38455
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 38463
                                      length: 4
                                  children: []
                                  pos: 38455
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 38471
                                  length: 16
                              children: []
                              pos: 38455
                              length: 32
                          children: []
                          pos: 38454
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 38499
                          length: 59
                        pos: 38489
                        length: 77
                      pos: 38451
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 38574
                      length: 16
                    pos: 37068
                    length: 1528
                children: []
                pos: 36960
                length: 1636
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 39019
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 39030
                      length: 9
                    pos: 39006
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 39075
                      length: 45
                    pos: 39067
                    length: 59
                children: []
                pos: 39006
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 39620
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 39631
                      length: 6
                    pos: 39615
                    length: 695
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 39691
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.isName()
                              children: []
                              pos: 39894
                              length: 10
                          children: []
                          pos: 39893
                          length: 12
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.isFunction() ||
                                          parent.isVar() ||
                                          parent.isParamList() ||
                                          parent.isCatch());
                          children: []
                          pos: 39916
                          length: 160
                        pos: 39906
                        length: 178
                      pos: 39890
                      length: 347
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 40244
                      length: 60
                    pos: 39683
                    length: 627
                children: []
                pos: 39615
                length: 695
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 40751
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 40762
                      length: 6
                    pos: 40746
                    length: 5804
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 40851
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.isName() && scope.isGlobal();
                      children: []
                      pos: 40912
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.isVar() ||
                                     parent.isFunction());
                      children: []
                      pos: 40972
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 41302
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isGetProp()
                                      children: []
                                      pos: 41344
                                      length: 13
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 41361
                                      length: 17
                                  children: []
                                  pos: 41344
                                  length: 34
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 41392
                                  length: 29
                              children: []
                              pos: 41344
                              length: 77
                          children: []
                          pos: 41343
                          length: 79
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 41433
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 41603
                                  length: 44
                              children: []
                              pos: 41602
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 41661
                              length: 42
                            pos: 41649
                            length: 64
                          pos: 41599
                          length: 114
                        pos: 41423
                        length: 298
                      pos: 41340
                      length: 381
                    - type: local_variable_declaration
                      fields:
                        text: boolean isExtern = n.isFromExterns();
                      children: []
                      pos: 41846
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Var newVar = null;
                      children: []
                      pos: 41890
                      length: 18
                    - type: local_variable_declaration
                      fields:
                        text: CompilerInput input = compiler.getInput(inputId);
                      children: []
                      pos: 41952
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 42012
                              length: 48
                          children: []
                          pos: 42011
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 42072
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              newVar = validator.expectUndeclaredVariable(
                                          sourceName, input, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 42132
                          length: 115
                        pos: 42062
                        length: 193
                      pos: 42008
                      length: 806
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType fnType = JSType.toMaybeFunctionType(type);
                      children: []
                      pos: 42899
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: fnType
                                      children: []
                                      pos: 42965
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42975
                                      length: 4
                                  children: []
                                  pos: 42965
                                  length: 14
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!type.isEmptyType()"
                                  children: []
                                  pos: 43053
                                  length: 19
                              children: []
                              pos: 42965
                              length: 107
                          children: []
                          pos: 42964
                          length: 109
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isConstructor()
                                              children: []
                                              pos: 43089
                                              length: 22
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isInterface()
                                              children: []
                                              pos: 43115
                                              length: 20
                                          children: []
                                          pos: 43089
                                          length: 46
                                      children: []
                                      pos: 43088
                                      length: 48
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!fnType.equals(getNativeType(U2U_CONSTRUCTOR_TYPE))"
                                      children: []
                                      pos: 43152
                                      length: 51
                                  children: []
                                  pos: 43088
                                  length: 115
                              children: []
                              pos: 43087
                              length: 117
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superClassCtor = fnType.getSuperClassConstructor();
                              children: []
                              pos: 43272
                              length: 64
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType.Property prototypeSlot = fnType.getSlot("prototype");
                              children: []
                              pos: 43347
                              length: 64
                            - type: expression_statement
                              fields:
                                text: prototypeSlot.setNode(n);
                              children: []
                              pos: 43872
                              length: 25
                            - type: local_variable_declaration
                              fields:
                                text: String prototypeName = variableName + ".prototype";
                              children: []
                              pos: 43909
                              length: 51
                            - type: local_variable_declaration
                              fields:
                                text: Var prototypeVar = scopeToDeclareIn.getVar(prototypeName);
                              children: []
                              pos: 44192
                              length: 58
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: prototypeVar
                                              children: []
                                              pos: 44265
                                              length: 12
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 44281
                                              length: 4
                                          children: []
                                          pos: 44265
                                          length: 20
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: field_access
                                              fields:
                                                text: prototypeVar.scope
                                              children: []
                                              pos: 44289
                                              length: 18
                                            right:
                                              type: identifier
                                              fields:
                                                text: scopeToDeclareIn
                                              children: []
                                              pos: 44311
                                              length: 16
                                          children: []
                                          pos: 44289
                                          length: 38
                                      children: []
                                      pos: 44265
                                      length: 62
                                  children: []
                                  pos: 44264
                                  length: 64
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scopeToDeclareIn.undeclare(prototypeVar);
                                  children: []
                                  pos: 44343
                                  length: 41
                                pos: 44329
                                length: 67
                              pos: 44261
                              length: 135
                            - type: expression_statement
                              fields:
                                text: |-
                                  scopeToDeclareIn.declare(prototypeName,
                                                n, prototypeSlot.getType(), input,
                                                /* declared iff there's an explicit supertype */
                                                superClassCtor == null ||
                                                superClassCtor.getInstanceType().equals(
                                                    getNativeType(OBJECT_TYPE)));
                              children: []
                              pos: 44408
                              length: 294
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: newVar.getInitialValue()
                                                  children: []
                                                  pos: 44820
                                                  length: 24
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 44848
                                                  length: 4
                                              children: []
                                              pos: 44820
                                              length: 32
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!isExtern"
                                              children: []
                                              pos: 44870
                                              length: 9
                                          children: []
                                          pos: 44820
                                          length: 59
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: |-
                                              variableName.equals(
                                                                fnType.getInstanceType().getReferenceName())
                                          children: []
                                          pos: 45279
                                          length: 83
                                      children: []
                                      pos: 44820
                                      length: 542
                                  children: []
                                  pos: 44819
                                  length: 544
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      compiler.report(
                                                      JSError.make(sourceName, n,
                                                          fnType.isConstructor() ?
                                                          CTOR_INITIALIZER : IFACE_INITIALIZER,
                                                          variableName));
                                  children: []
                                  pos: 45378
                                  length: 199
                                pos: 45364
                                length: 225
                              pos: 44816
                              length: 773
                            pos: 43205
                            length: 2394
                          pos: 43084
                          length: 2515
                        pos: 43074
                        length: 2533
                      pos: 42961
                      length: 2646
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: shouldDeclareOnGlobalThis
                              children: []
                              pos: 45619
                              length: 25
                          children: []
                          pos: 45618
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType globalThis =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS);
                          children: []
                          pos: 45656
                          length: 82
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: identifier
                                  fields:
                                    text: inferred
                                  children: []
                                  pos: 45751
                                  length: 8
                              children: []
                              pos: 45750
                              length: 10
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  globalThis.defineInferredProperty(variableName,
                                                type == null ?
                                                getNativeType(JSTypeNative.NO_TYPE) :
                                                type,
                                                n);
                              children: []
                              pos: 45773
                              length: 166
                            pos: 45761
                            length: 188
                          pos: 45747
                          length: 287
                        pos: 45646
                        length: 396
                      pos: 45615
                      length: 427
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: isGlobalVar
                                              children: []
                                              pos: 46054
                                              length: 11
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: '"Window".equals(variableName)'
                                              children: []
                                              pos: 46069
                                              length: 29
                                          children: []
                                          pos: 46054
                                          length: 44
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 46112
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 46120
                                              length: 4
                                          children: []
                                          pos: 46112
                                          length: 12
                                      children: []
                                      pos: 46054
                                      length: 70
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 46138
                                      length: 21
                                  children: []
                                  pos: 46054
                                  length: 105
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 46173
                                  length: 20
                              children: []
                              pos: 46054
                              length: 139
                          children: []
                          pos: 46053
                          length: 141
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 46205
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 46319
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 46381
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn((type.toMaybeFunctionType()).getInstanceType());
                          children: []
                          pos: 46440
                          length: 96
                        pos: 46195
                        length: 349
                      pos: 46050
                      length: 494
                    pos: 40843
                    length: 5707
                children: []
                pos: 40746
                length: 5804
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 46664
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46691
                      length: 6
                    pos: 46648
                    length: 148
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Scope scope = getQnameRootScope(n);
                      children: []
                      pos: 46707
                      length: 35
                    - type: return_statement
                      fields:
                        text: return scope != null && scope.isGlobal();
                      children: []
                      pos: 46749
                      length: 41
                    pos: 46699
                    length: 97
                children: []
                pos: 46648
                length: 148
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getQnameRootScope
                    children: []
                    pos: 46888
                    length: 17
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46906
                      length: 6
                    pos: 46874
                    length: 275
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 46922
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: root.isName()
                              children: []
                              pos: 46980
                              length: 13
                          children: []
                          pos: 46979
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 47005
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 47059
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47066
                                      length: 4
                                  children: []
                                  pos: 47059
                                  length: 11
                              children: []
                              pos: 47058
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.getScope();
                              children: []
                              pos: 47084
                              length: 22
                            pos: 47072
                            length: 44
                          pos: 47055
                          length: 61
                        pos: 46995
                        length: 129
                      pos: 46976
                      length: 148
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 47131
                      length: 12
                    pos: 46914
                    length: 235
                children: []
                pos: 46874
                length: 275
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 47519
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 47535
                      length: 17
                    pos: 47504
                    length: 2542
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 47626
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47634
                                      length: 4
                                  children: []
                                  pos: 47626
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 47642
                                  length: 14
                              children: []
                              pos: 47626
                              length: 30
                          children: []
                          pos: 47625
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                              info);
                          children: []
                          pos: 47668
                          length: 61
                        pos: 47658
                        length: 79
                      pos: 47622
                      length: 2349
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                          info);
                      children: []
                      pos: 49979
                      length: 61
                    pos: 47614
                    length: 2432
                children: []
                pos: 47504
                length: 2542
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 50073
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Var v"
                      children: []
                      pos: 50089
                      length: 15
                    pos: 50052
                    length: 211
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: 'JSType t = v == null ? null : v.getType();'
                      children: []
                      pos: 50114
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: 'ObjectType o = t == null ? null : t.dereference();'
                      children: []
                      pos: 50163
                      length: 50
                    - type: return_statement
                      fields:
                        text: return JSType.toMaybeFunctionType(o);
                      children: []
                      pos: 50220
                      length: 37
                    pos: 50106
                    length: 157
                children: []
                pos: 50052
                length: 211
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForCallingConventionDefiningCalls
                    children: []
                    pos: 50369
                    length: 38
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 50417
                      length: 6
                    pos: 50356
                    length: 228
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: |-
                          codingConvention.checkForCallingConventionDefiningCalls(n,
                                    delegateCallingConventions);
                      children: []
                      pos: 50481
                      length: 97
                    pos: 50473
                    length: 111
                children: []
                pos: 50356
                length: 228
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 50800
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50836
                      length: 15
                    pos: 50787
                    length: 2928
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 50882
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 50983
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 50999
                                  length: 4
                              children: []
                              pos: 50983
                              length: 20
                          children: []
                          pos: 50982
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType superCtor = getFunctionType(
                                          scope.getVar(relationship.superclassName));
                          children: []
                          pos: 51015
                          length: 97
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType subCtor = getFunctionType(
                                          scope.getVar(relationship.subclassName));
                          children: []
                          pos: 51121
                          length: 93
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: superCtor
                                                  children: []
                                                  pos: 51227
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 51240
                                                  length: 4
                                              children: []
                                              pos: 51227
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: superCtor.isConstructor()
                                              children: []
                                              pos: 51248
                                              length: 25
                                          children: []
                                          pos: 51227
                                          length: 46
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 51289
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51300
                                              length: 4
                                          children: []
                                          pos: 51289
                                          length: 15
                                      children: []
                                      pos: 51227
                                      length: 77
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: subCtor.isConstructor()
                                      children: []
                                      pos: 51308
                                      length: 23
                                  children: []
                                  pos: 51227
                                  length: 104
                              children: []
                              pos: 51226
                              length: 106
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType superClass = superCtor.getInstanceType();
                              children: []
                              pos: 51345
                              length: 52
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType subClass = subCtor.getInstanceType();
                              children: []
                              pos: 51408
                              length: 48
                            - type: expression_statement
                              fields:
                                text: superCtor = superClass.getConstructor();
                              children: []
                              pos: 51654
                              length: 40
                            - type: expression_statement
                              fields:
                                text: subCtor = subClass.getConstructor();
                              children: []
                              pos: 51705
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: field_access
                                                  fields:
                                                    text: relationship.type
                                                  children: []
                                                  pos: 51757
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: SubclassType.INHERITS
                                                  children: []
                                                  pos: 51778
                                                  length: 21
                                              children: []
                                              pos: 51757
                                              length: 42
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!superClass.isEmptyType()"
                                              children: []
                                              pos: 51817
                                              length: 25
                                          children: []
                                          pos: 51757
                                          length: 85
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!subClass.isEmptyType()"
                                          children: []
                                          pos: 51846
                                          length: 23
                                      children: []
                                      pos: 51757
                                      length: 112
                                  children: []
                                  pos: 51756
                                  length: 114
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 51885
                                  length: 54
                                pos: 51871
                                length: 80
                              pos: 51753
                              length: 198
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 51967
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51980
                                              length: 4
                                          children: []
                                          pos: 51967
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 51988
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51999
                                              length: 4
                                          children: []
                                          pos: 51988
                                          length: 15
                                      children: []
                                      pos: 51967
                                      length: 36
                                  children: []
                                  pos: 51966
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 52019
                                  length: 99
                                pos: 52005
                                length: 125
                              pos: 51963
                              length: 167
                            pos: 51333
                            length: 807
                          pos: 51223
                          length: 917
                        pos: 51005
                        length: 1143
                      pos: 50979
                      length: 1169
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 52156
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 52259
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52287
                                  length: 4
                              children: []
                              pos: 52259
                              length: 32
                          children: []
                          pos: 52258
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 52303
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 52417
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52431
                                      length: 4
                                  children: []
                                  pos: 52417
                                  length: 18
                              children: []
                              pos: 52416
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 52449
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 52521
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 52537
                                          length: 4
                                      children: []
                                      pos: 52521
                                      length: 20
                                  children: []
                                  pos: 52520
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 52557
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 52656
                                  length: 92
                                pos: 52543
                                length: 217
                              pos: 52517
                              length: 243
                            pos: 52437
                            length: 333
                          pos: 52413
                          length: 357
                        pos: 52293
                        length: 485
                      pos: 52255
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 52786
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 52895
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52919
                                  length: 4
                              children: []
                              pos: 52895
                              length: 28
                          children: []
                          pos: 52894
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 52935
                          length: 48
                        pos: 52925
                        length: 66
                      pos: 52891
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(n);
                      children: []
                      pos: 52999
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 53099
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 53120
                                  length: 4
                              children: []
                              pos: 53099
                              length: 25
                          children: []
                          pos: 53098
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: field_access
                                      fields:
                                        text: objectLiteralCast.diagnosticType
                                      children: []
                                      pos: 53140
                                      length: 32
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 53176
                                      length: 4
                                  children: []
                                  pos: 53140
                                  length: 40
                              children: []
                              pos: 53139
                              length: 42
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  ObjectType type = ObjectType.cast(
                                                typeRegistry.getType(objectLiteralCast.typeName));
                              children: []
                              pos: 53194
                              length: 99
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 53308
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53316
                                              length: 4
                                          children: []
                                          pos: 53308
                                          length: 12
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: type.getConstructor()
                                              children: []
                                              pos: 53324
                                              length: 21
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53349
                                              length: 4
                                          children: []
                                          pos: 53324
                                          length: 29
                                      children: []
                                      pos: 53308
                                      length: 45
                                  children: []
                                  pos: 53307
                                  length: 47
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: setDeferredType(objectLiteralCast.objectNode,
                                      type);
                                  children: []
                                  pos: 53369
                                  length: 52
                                pos: 53355
                                length: 78
                              pos: 53304
                              length: 255
                            pos: 53182
                            length: 387
                          pos: 53136
                          length: 565
                        pos: 53126
                        length: 583
                      pos: 53095
                      length: 614
                    pos: 50874
                    length: 2841
                children: []
                pos: 50787
                length: 2928
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 53812
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 53847
                      length: 41
                    pos: 53799
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 53898
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 54015
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 54138
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 54277
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54296
                                          length: 4
                                      children: []
                                      pos: 54277
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 54314
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54336
                                          length: 4
                                      children: []
                                      pos: 54314
                                      length: 26
                                  children: []
                                  pos: 54277
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 54354
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54377
                                      length: 4
                                  children: []
                                  pos: 54354
                                  length: 27
                              children: []
                              pos: 54277
                              length: 104
                          children: []
                          pos: 54276
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 54393
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 54464
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 54541
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 54625
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54642
                                              length: 4
                                          children: []
                                          pos: 54625
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 54650
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54670
                                              length: 4
                                          children: []
                                          pos: 54650
                                          length: 24
                                      children: []
                                      pos: 54625
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 54690
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54711
                                          length: 4
                                      children: []
                                      pos: 54690
                                      length: 25
                                  children: []
                                  pos: 54625
                                  length: 90
                              children: []
                              pos: 54624
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 54729
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 54837
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 54939
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 55129
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 55314
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 55380
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 55550
                              length: 58
                            pos: 54717
                            length: 901
                          pos: 54621
                          length: 997
                        pos: 54383
                        length: 1243
                      pos: 54273
                      length: 1353
                    pos: 53890
                    length: 1742
                children: []
                pos: 53799
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 56066
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 56092
                      length: 15
                    pos: 56061
                    length: 4679
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 56177
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 56219
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 56274
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 56317
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 56371
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(t.getSourceName(),
                          info, n, rhsValue);
                      children: []
                      pos: 57092
                      length: 73
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 57176
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57189
                                      length: 4
                                  children: []
                                  pos: 57176
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 57197
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57209
                                      length: 4
                                  children: []
                                  pos: 57197
                                  length: 16
                              children: []
                              pos: 57176
                              length: 37
                          children: []
                          pos: 57175
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 57260
                          length: 33
                        pos: 57215
                        length: 86
                      pos: 57172
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 57548
                              length: 28
                          children: []
                          pos: 57547
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 57588
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 57632
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57640
                                      length: 4
                                  children: []
                                  pos: 57632
                                  length: 12
                              children: []
                              pos: 57631
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType qVarType = ObjectType.cast(qVar.getType());
                              children: []
                              pos: 57975
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: qVarType
                                                  children: []
                                                  pos: 58044
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 58056
                                                  length: 4
                                              children: []
                                              pos: 58044
                                              length: 16
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: rhsValue
                                                  children: []
                                                  pos: 58078
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 58090
                                                  length: 4
                                              children: []
                                              pos: 58078
                                              length: 16
                                          children: []
                                          pos: 58044
                                          length: 50
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rhsValue.isObjectLit()
                                          children: []
                                          pos: 58112
                                          length: 22
                                      children: []
                                      pos: 58044
                                      length: 90
                                  children: []
                                  pos: 58043
                                  length: 92
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      typeRegistry.resetImplicitPrototype(
                                                      rhsValue.getJSType(), qVarType.getImplicitPrototype());
                                  children: []
                                  pos: 58150
                                  length: 108
                                pos: 58136
                                length: 134
                              pos: 58040
                              length: 652
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: qVar.getScope()
                                          children: []
                                          pos: 58707
                                          length: 15
                                        right:
                                          type: identifier
                                          fields:
                                            text: scope
                                          children: []
                                          pos: 58726
                                          length: 5
                                      children: []
                                      pos: 58707
                                      length: 24
                                  children: []
                                  pos: 58706
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scope.undeclare(qVar);
                                  children: []
                                  pos: 58747
                                  length: 22
                                pos: 58733
                                length: 48
                              pos: 58703
                              length: 78
                            pos: 57646
                            length: 1145
                          pos: 57628
                          length: 1163
                        pos: 57578
                        length: 1221
                      pos: 57544
                      length: 1255
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 58811
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 58824
                                  length: 4
                              children: []
                              pos: 58811
                              length: 17
                          children: []
                          pos: 58810
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: parent.isExprResult()
                                  children: []
                                  pos: 58844
                                  length: 21
                              children: []
                              pos: 58843
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 58879
                              length: 148
                            pos: 58867
                            length: 170
                          pos: 58840
                          length: 197
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 59047
                          length: 7
                        pos: 58830
                        length: 232
                      pos: 58807
                      length: 255
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean inferred = isQualifiedNameInferred(
                                    qName, n, info, rhsValue, valueType);
                      children: []
                      pos: 59070
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 59172
                              length: 9
                          children: []
                          pos: 59171
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 59193
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 59254
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 59267
                                      length: 4
                                  children: []
                                  pos: 59254
                                  length: 17
                              children: []
                              pos: 59253
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 59386
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 59469
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 59523
                                                  length: 42
                                              children: []
                                              pos: 59469
                                              length: 96
                                          children: []
                                          pos: 59468
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 59586
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 59598
                                                          length: 31
                                                      children: []
                                                      pos: 59586
                                                      length: 43
                                                  children: []
                                                  pos: 59585
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 59649
                                                  length: 27
                                              children: []
                                              pos: 59585
                                              length: 91
                                          children: []
                                          pos: 59584
                                          length: 93
                                      children: []
                                      pos: 59468
                                      length: 209
                                  children: []
                                  pos: 59467
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, n);
                                  children: []
                                  pos: 59767
                                  length: 57
                                pos: 59679
                                length: 157
                              pos: 59464
                              length: 372
                            pos: 59273
                            length: 573
                          pos: 59250
                          length: 596
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 59988
                          length: 43
                        pos: 59183
                        length: 856
                      pos: 59168
                      length: 1566
                    pos: 56169
                    length: 4571
                children: []
                pos: 56061
                length: 4679
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQualifiedNameInferred
                    children: []
                    pos: 61789
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String qName
                      children: []
                      pos: 61822
                      length: 12
                    pos: 61773
                    length: 1523
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 61913
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61926
                                  length: 4
                              children: []
                              pos: 61913
                              length: 17
                          children: []
                          pos: 61912
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 61942
                          length: 12
                        pos: 61932
                        length: 30
                      pos: 61909
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 61970
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 62005
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 62013
                                  length: 4
                              children: []
                              pos: 62005
                              length: 12
                          children: []
                          pos: 62004
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (info.isConstant() && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 62029
                          length: 241
                        pos: 62019
                        length: 259
                      pos: 62001
                      length: 277
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: inferred
                                      children: []
                                      pos: 62290
                                      length: 8
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rhsValue
                                          children: []
                                          pos: 62302
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 62314
                                          length: 4
                                      children: []
                                      pos: 62302
                                      length: 16
                                  children: []
                                  pos: 62290
                                  length: 28
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rhsValue.isFunction()
                                  children: []
                                  pos: 62322
                                  length: 21
                              children: []
                              pos: 62290
                              length: 53
                          children: []
                          pos: 62289
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 62359
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 62367
                                      length: 4
                                  children: []
                                  pos: 62359
                                  length: 12
                              children: []
                              pos: 62358
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return false;
                              children: []
                              pos: 62385
                              length: 13
                            pos: 62373
                            length: 35
                          pos: 62355
                          length: 904
                        pos: 62345
                        length: 922
                      pos: 62286
                      length: 981
                    - type: return_statement
                      fields:
                        text: return inferred;
                      children: []
                      pos: 63274
                      length: 16
                    pos: 61901
                    length: 1395
                children: []
                pos: 61773
                length: 1523
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 63541
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 63555
                      length: 15
                    pos: 63522
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 63580
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 63629
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 63641
                                  length: 4
                              children: []
                              pos: 63629
                              length: 16
                          children: []
                          pos: 63628
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 63657
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 63707
                          length: 110
                        pos: 63647
                        length: 178
                      pos: 63625
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 63832
                      length: 12
                    pos: 63572
                    length: 278
                children: []
                pos: 63522
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 63992
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 63987
                    length: 1182
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 64026
                      length: 1137
                    pos: 64018
                    length: 1151
                children: []
                pos: 63987
                length: 1182
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 65321
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 65396
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 65438
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 65556
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 65562
                            length: 15
                          pos: 65528
                          length: 483
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: method_invocation
                                    fields:
                                      text: n.isExprResult()
                                    children: []
                                    pos: 65614
                                    length: 16
                                children: []
                                pos: 65613
                                length: 18
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 65644
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 65694
                                        length: 15
                                    children: []
                                    pos: 65693
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 65711
                                    length: 282
                                children: []
                                pos: 65686
                                length: 307
                              pos: 65632
                              length: 371
                            pos: 65610
                            length: 393
                          pos: 65600
                          length: 411
                      children: []
                      pos: 65528
                      length: 483
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 66032
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 66051
                            length: 15
                          pos: 66019
                          length: 899
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 66147
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 66397
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 66405
                                                length: 4
                                            children: []
                                            pos: 66397
                                            length: 12
                                          right:
                                            type: unary_expression
                                            fields:
                                              text: "!member.isGetProp()"
                                            children: []
                                            pos: 66425
                                            length: 19
                                        children: []
                                        pos: 66397
                                        length: 47
                                      right:
                                        type: unary_expression
                                        fields:
                                          text: "!member.getFirstChild().isThis()"
                                        children: []
                                        pos: 66460
                                        length: 32
                                    children: []
                                    pos: 66397
                                    length: 95
                                children: []
                                pos: 66396
                                length: 97
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 66506
                                length: 7
                              pos: 66494
                              length: 29
                            pos: 66393
                            length: 130
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 66533
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(t.getSourceName(),
                                info, member, value);
                            children: []
                            pos: 66585
                            length: 72
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 66666
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 66713
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 66723
                                            length: 4
                                        children: []
                                        pos: 66713
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: name.isName()
                                                children: []
                                                pos: 66744
                                                length: 13
                                              right:
                                                type: method_invocation
                                                fields:
                                                  text: name.isString()
                                                children: []
                                                pos: 66761
                                                length: 15
                                            children: []
                                            pos: 66744
                                            length: 32
                                        children: []
                                        pos: 66743
                                        length: 34
                                    children: []
                                    pos: 66713
                                    length: 64
                                children: []
                                pos: 66712
                                length: 66
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  member);
                                children: []
                                pos: 66791
                                length: 109
                              pos: 66779
                              length: 131
                            pos: 66709
                            length: 201
                          pos: 66137
                          length: 781
                      children: []
                      pos: 66019
                      length: 899
                    pos: 65301
                    length: 1623
                children: []
                pos: 65301
                length: 1623
              pos: 16127
              length: 50826
          children: []
          pos: 16127
          length: 50826
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 67050
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 67072
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 67101
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 67137
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 67174
                length: 168
              pos: 67023
              length: 323
          children: []
          pos: 67023
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 67481
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 67536
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 67875
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 67881
                      length: 15
                    pos: 67853
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 67927
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 67969
                              length: 11
                          children: []
                          pos: 67968
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 67982
                          length: 195
                      children: []
                      pos: 67961
                      length: 216
                    pos: 67919
                    length: 264
                children: []
                pos: 67853
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 68208
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 68243
                      length: 15
                    pos: 68189
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 68328
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 68363
                      length: 62
                    pos: 68320
                    length: 111
                children: []
                pos: 68189
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 68611
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 68636
                      length: 15
                    pos: 68598
                    length: 960
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 68697
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 68705
                                      length: 4
                                  children: []
                                  pos: 68697
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 68713
                                  length: 22
                              children: []
                              pos: 68697
                              length: 38
                          children: []
                          pos: 68696
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 68747
                          length: 7
                        pos: 68737
                        length: 25
                      pos: 68693
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 68770
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 68827
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 68838
                                  length: 4
                              children: []
                              pos: 68827
                              length: 15
                          children: []
                          pos: 68826
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 68854
                          length: 7
                        pos: 68844
                        length: 25
                      pos: 68823
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                      children: []
                      pos: 69044
                      length: 63
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 69115
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 69196
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 69208
                                  length: 4
                              children: []
                              pos: 69196
                              length: 16
                          children: []
                          pos: 69195
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 69224
                          length: 118
                        pos: 69214
                        length: 136
                      pos: 69192
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 69358
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: candidate.isGetProp()
                              children: []
                              pos: 69423
                              length: 21
                          children: []
                          pos: 69422
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 69456
                          length: 88
                        pos: 69446
                        length: 106
                      pos: 69419
                      length: 133
                    pos: 68685
                    length: 873
                children: []
                pos: 68598
                length: 960
              pos: 67461
              length: 2101
          children: []
          pos: 67461
          length: 2101
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 69714
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 69834
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 69972
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 69967
                    length: 744
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 69988
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          AstFunctionContents contents =
                                    getFunctionAnalysisResults(scope.getRootNode());
                      children: []
                      pos: 70056
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: contents
                                  children: []
                                  pos: 70156
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 70168
                                  length: 4
                              children: []
                              pos: 70156
                              length: 16
                          children: []
                          pos: 70155
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (String varName : contents.getEscapedVarNames()) {
                                        Var v = scope.getVar(varName);
                                        Preconditions.checkState(v.getScope() == scope);
                                        v.markEscaped();
                                      }
                          children: []
                          pos: 70184
                          length: 191
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Multiset.Entry<String> entry :
                                               contents.getAssignedNameCounts().entrySet()) {
                                        Var v = scope.getVar(entry.getElement());
                                        Preconditions.checkState(v.getScope() == scope);
                                        if (entry.getCount() == 1) {
                                          v.markAssignedExactlyOnce();
                                        }
                                      }
                          children: []
                          pos: 70385
                          length: 312
                        pos: 70174
                        length: 531
                      pos: 70152
                      length: 553
                    pos: 69980
                    length: 731
                children: []
                pos: 69967
                length: 744
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 70997
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71003
                      length: 15
                    pos: 70975
                    length: 276
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 71053
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 71058
                                  length: 19
                              children: []
                              pos: 71053
                              length: 24
                          children: []
                          pos: 71052
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 71079
                        length: 7
                      pos: 71049
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isParamList()
                                  children: []
                                  pos: 71098
                                  length: 15
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 71117
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 71127
                                      length: 19
                                  children: []
                                  pos: 71117
                                  length: 29
                              children: []
                              pos: 71098
                              length: 48
                          children: []
                          pos: 71097
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 71158
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71196
                          length: 7
                        pos: 71148
                        length: 63
                      pos: 71094
                      length: 117
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 71219
                      length: 26
                    pos: 71041
                    length: 210
                children: []
                pos: 70975
                length: 276
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 71332
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 71353
                      length: 11
                    pos: 71319
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 71410
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 71458
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 71508
                              length: 17
                          children: []
                          pos: 71507
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 71537
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 71589
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 71598
                                          length: 4
                                      children: []
                                      pos: 71589
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 71783
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 71806
                                                  length: 4
                                              children: []
                                              pos: 71783
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 71959
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 71986
                                                  length: 6
                                              children: []
                                              pos: 71959
                                              length: 33
                                          children: []
                                          pos: 71783
                                          length: 209
                                      children: []
                                      pos: 71782
                                      length: 211
                                  children: []
                                  pos: 71589
                                  length: 404
                              children: []
                              pos: 71588
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 72007
                              length: 58
                            pos: 71995
                            length: 80
                          pos: 71585
                          length: 490
                        pos: 71527
                        length: 556
                      pos: 71504
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 72091
                      length: 25
                    pos: 71366
                    length: 756
                children: []
                pos: 71319
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 72204
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 72221
                      length: 17
                    pos: 72191
                    length: 975
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 72248
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 72315
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean isFnTypeInferred = functionNode.getBooleanProp(
                                    Node.INFERRED_FUNCTION);
                      children: []
                      pos: 72358
                      length: 90
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    JSType.toMaybeFunctionType(functionNode.getJSType());
                      children: []
                      pos: 72455
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 72557
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 72573
                                  length: 4
                              children: []
                              pos: 72557
                              length: 20
                          children: []
                          pos: 72556
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 72589
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 72658
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 72677
                                      length: 4
                                  children: []
                                  pos: 72658
                                  length: 23
                              children: []
                              pos: 72657
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 72695
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), isFnTypeInferred);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 72760
                              length: 382
                            pos: 72683
                            length: 469
                          pos: 72654
                          length: 498
                        pos: 72579
                        length: 581
                      pos: 72553
                      length: 607
                    pos: 72240
                    length: 926
                children: []
                pos: 72191
                length: 975
              pos: 69694
              length: 3500
          children: []
          pos: 69694
          length: 3500
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: FirstOrderFunctionAnalyzer
              children: []
              pos: 73397
              length: 26
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final AbstractCompiler compiler;
                children: []
                pos: 73491
                length: 40
              - type: field_declaration
                fields:
                  text: private final Map<Node, AstFunctionContents> data;
                children: []
                pos: 73536
                length: 50
              - type: constructor_declaration
                fields:
                  text: |-
                    FirstOrderFunctionAnalyzer(
                            AbstractCompiler compiler, Map<Node, AstFunctionContents> outParam) {
                          this.compiler = compiler;
                          this.data = outParam;
                        }
                children: []
                pos: 73592
                length: 171
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: process
                    children: []
                    pos: 73791
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node externs
                      children: []
                      pos: 73799
                      length: 12
                    pos: 73769
                    length: 267
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: externs
                                  children: []
                                  pos: 73836
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 73847
                                  length: 4
                              children: []
                              pos: 73836
                              length: 15
                          children: []
                          pos: 73835
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: NodeTraversal.traverse(compiler, root, this);
                          children: []
                          pos: 73863
                          length: 45
                        pos: 73853
                        length: 63
                      pos: 73832
                      length: 198
                    pos: 73824
                    length: 212
                children: []
                pos: 73769
                length: 267
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: enterScope
                    children: []
                    pos: 74064
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 74075
                      length: 15
                    pos: 74042
                    length: 181
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!t.inGlobalScope()"
                              children: []
                              pos: 74104
                              length: 18
                          children: []
                          pos: 74103
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node n = t.getScopeRoot();
                          children: []
                          pos: 74134
                          length: 26
                        - type: expression_statement
                          fields:
                            text: data.put(n, new AstFunctionContents(n));
                          children: []
                          pos: 74169
                          length: 40
                        pos: 74124
                        length: 93
                      pos: 74100
                      length: 117
                    pos: 74092
                    length: 131
                children: []
                pos: 74042
                length: 181
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 74251
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 74257
                      length: 15
                    pos: 74229
                    length: 1927
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: t.inGlobalScope()
                              children: []
                              pos: 74307
                              length: 17
                          children: []
                          pos: 74306
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74336
                          length: 7
                        pos: 74326
                        length: 25
                      pos: 74303
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isReturn()
                                  children: []
                                  pos: 74363
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getFirstChild()
                                      children: []
                                      pos: 74379
                                      length: 17
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 74400
                                      length: 4
                                  children: []
                                  pos: 74379
                                  length: 25
                              children: []
                              pos: 74363
                              length: 41
                          children: []
                          pos: 74362
                          length: 43
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: data.get(t.getScopeRoot()).recordNonEmptyReturn();
                          children: []
                          pos: 74416
                          length: 50
                        pos: 74406
                        length: 68
                      pos: 74359
                      length: 115
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_or_equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: t.getScopeDepth()
                                  children: []
                                  pos: 74486
                                  length: 17
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '2'
                                  children: []
                                  pos: 74507
                                  length: 1
                              children: []
                              pos: 74486
                              length: 22
                          children: []
                          pos: 74485
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74911
                          length: 7
                        pos: 74510
                        length: 416
                      pos: 74482
                      length: 444
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isName()
                                      children: []
                                      pos: 74938
                                      length: 10
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isLValue(n)
                                      children: []
                                      pos: 74952
                                      length: 20
                                  children: []
                                  pos: 74938
                                  length: 34
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!NodeUtil.isBleedingFunctionName(n)"
                                  children: []
                                  pos: 75127
                                  length: 35
                              children: []
                              pos: 74938
                              length: 224
                          children: []
                          pos: 74937
                          length: 226
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String name = n.getString();
                          children: []
                          pos: 75174
                          length: 28
                        - type: local_variable_declaration
                          fields:
                            text: Scope scope = t.getScope();
                          children: []
                          pos: 75211
                          length: 27
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(name);
                          children: []
                          pos: 75247
                          length: 29
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 75289
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 75296
                                      length: 4
                                  children: []
                                  pos: 75289
                                  length: 11
                              children: []
                              pos: 75288
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Scope ownerScope = var.getScope();
                              children: []
                              pos: 75314
                              length: 34
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: ownerScope.isLocal()
                                      children: []
                                      pos: 75363
                                      length: 20
                                  children: []
                                  pos: 75362
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordAssignedName(name);
                                  children: []
                                  pos: 75399
                                  length: 60
                                pos: 75385
                                length: 86
                              pos: 75359
                              length: 112
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: scope
                                              children: []
                                              pos: 75487
                                              length: 5
                                            right:
                                              type: identifier
                                              fields:
                                                text: ownerScope
                                              children: []
                                              pos: 75496
                                              length: 10
                                          children: []
                                          pos: 75487
                                          length: 19
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerScope.isLocal()
                                          children: []
                                          pos: 75510
                                          length: 20
                                      children: []
                                      pos: 75487
                                      length: 43
                                  children: []
                                  pos: 75486
                                  length: 45
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordEscapedVarName(name);
                                  children: []
                                  pos: 75546
                                  length: 62
                                pos: 75532
                                length: 88
                              pos: 75483
                              length: 137
                            pos: 75302
                            length: 328
                          pos: 75285
                          length: 345
                        pos: 75164
                        length: 474
                      pos: 74934
                      length: 1216
                    pos: 74295
                    length: 1861
                children: []
                pos: 74229
                length: 1927
              pos: 73376
              length: 2784
          children: []
          pos: 73376
          length: 2784
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFunctionAnalysisResults
              children: []
              pos: 76192
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node n"
                children: []
                pos: 76219
                length: 16
              pos: 76164
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: "n"
                            children: []
                            pos: 76247
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 76252
                            length: 4
                        children: []
                        pos: 76247
                        length: 9
                    children: []
                    pos: 76246
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 76266
                    length: 12
                  pos: 76258
                  length: 26
                pos: 76243
                length: 41
              - type: return_statement
                fields:
                  text: return functionAnalysisResults.get(n);
                children: []
                pos: 76409
                length: 38
              pos: 76237
              length: 214
          children: []
          pos: 76164
          length: 287
        pos: 5075
        length: 71378
    children: []
    pos: 5075
    length: 71378
  pos: 0
  length: 76454
text_diff: "--- before\n+++ after\n@@ -1993,7 +1993,7 @@\n         data.get(t.getScopeRoot()).recordNonEmptyReturn();\n
  \      }\n \n-      if (t.getScopeDepth() <= 1) {\n+      if (t.getScopeDepth()
  <= 2) {\n         // The first-order function analyzer looks at two types of variables:\n
  \        //\n         // 1) Local variables that are assigned in inner scopes (\"escaped
  vars\")\n"
tree_diff: |+
  New cluster:
  UPDATE from 1 to 2
  ------------
  ===
  update-node
  ---
  decimal_integer_literal: 1 [74507,74508]
  replace 1 by 2

...
