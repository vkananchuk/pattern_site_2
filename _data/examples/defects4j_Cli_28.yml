---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Parser
        children: []
        pos: 1306
        length: 6
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected CommandLine cmd;
          children: []
          pos: 1380
          length: 26
        - type: field_declaration
          fields:
            text: private Options options;
          children: []
          pos: 1439
          length: 24
        - type: field_declaration
          fields:
            text: private List requiredOptions;
          children: []
          pos: 1513
          length: 29
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setOptions
              children: []
              pos: 1563
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Options options
                children: []
                pos: 1574
                length: 21
              pos: 1548
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 1611
                length: 23
              - type: expression_statement
                fields:
                  text: this.requiredOptions = new ArrayList(options.getRequiredOptions());
                children: []
                pos: 1643
                length: 67
              pos: 1601
              length: 115
          children: []
          pos: 1548
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOptions
              children: []
              pos: 1740
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1722
              length: 66
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return options;
                children: []
                pos: 1767
                length: 15
              pos: 1757
              length: 31
          children: []
          pos: 1722
          length: 66
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRequiredOptions
              children: []
              pos: 1809
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1794
              length: 79
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return requiredOptions;
                children: []
                pos: 1844
                length: 23
              pos: 1834
              length: 39
          children: []
          pos: 1794
          length: 79
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: flatten
              children: []
              pos: 2355
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options opts
                children: []
                pos: 2363
                length: 12
              pos: 2327
              length: 117
          children: []
          pos: 2327
          length: 117
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2815
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2821
                length: 15
              pos: 2796
              length: 150
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, false);
                children: []
                pos: 2894
                length: 46
              pos: 2884
              length: 62
          children: []
          pos: 2796
          length: 150
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3453
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3459
                length: 15
              pos: 3434
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 3555
                length: 52
              pos: 3545
              length: 68
          children: []
          pos: 3434
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4262
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 4268
                length: 15
              pos: 4243
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 4366
                length: 56
              pos: 4356
              length: 72
          children: []
          pos: 4243
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 5200
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 5206
                length: 15
              pos: 5181
              length: 2765
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator it = options.helpOptions().iterator(); it.hasNext();)
                            {
                                Option opt = (Option) it.next();
                                opt.clearValues();
                            }
                children: []
                pos: 5419
                length: 163
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator it = options.getOptionGroups().iterator(); it.hasNext();)
                            {
                                OptionGroup group = (OptionGroup) it.next();
                                group.setSelected(null);
                            }
                children: []
                pos: 5642
                length: 185
              - type: expression_statement
                fields:
                  text: setOptions(options);
                children: []
                pos: 5875
                length: 20
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 5905
                length: 24
              - type: local_variable_declaration
                fields:
                  text: boolean eatTheRest = false;
                children: []
                pos: 5939
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 5980
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5993
                            length: 4
                        children: []
                        pos: 5980
                        length: 17
                    children: []
                    pos: 5979
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: arguments = new String[0];
                    children: []
                    pos: 6021
                    length: 26
                  pos: 6007
                  length: 50
                pos: 5976
                length: 81
              - type: local_variable_declaration
                fields:
                  text: List tokenList = Arrays.asList(flatten(getOptions(), arguments,
                    stopAtNonOption));
                children: []
                pos: 6067
                length: 82
              - type: local_variable_declaration
                fields:
                  text: ListIterator iterator = tokenList.listIterator();
                children: []
                pos: 6159
                length: 49
              - type: while_statement
                fields:
                  text: |-
                    while (iterator.hasNext())
                            {
                                String t = (String) iterator.next();

                                // the value is the double-dash
                                if ("--".equals(t))
                                {
                                    eatTheRest = true;
                                }

                                // the value is a single dash
                                else if ("-".equals(t))
                                {
                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                    else
                                    {
                                        cmd.addArg(t);
                                    }
                                }

                                // the value is an option
                                else if (t.startsWith("-"))
                                {
                                    if (stopAtNonOption && !getOptions().hasOption(t))
                                    {
                                        eatTheRest = true;
                                        cmd.addArg(t);
                                    }
                                    else
                                    {
                                        processOption(t, iterator);
                                    }
                                }

                                // the value is an argument
                                else
                                {
                                    cmd.addArg(t);

                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                }

                                // eat the remaining tokens
                                if (eatTheRest)
                                {
                                    while (iterator.hasNext())
                                    {
                                        String str = (String) iterator.next();

                                        // ensure only one double-dash is added
                                        if (!"--".equals(str))
                                        {
                                            cmd.addArg(str);
                                        }
                                    }
                                }
                            }
                children: []
                pos: 6258
                length: 1589
              - type: expression_statement
                fields:
                  text: processProperties(properties);
                children: []
                pos: 7857
                length: 30
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 7896
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 7929
                length: 11
              pos: 5329
              length: 2617
          children: []
          pos: 5181
          length: 2765
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processProperties
              children: []
              pos: 8132
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 8150
                length: 21
              pos: 8117
              length: 1473
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 8191
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8205
                            length: 4
                        children: []
                        pos: 8191
                        length: 18
                    children: []
                    pos: 8190
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 8233
                    length: 7
                  pos: 8219
                  length: 31
                pos: 8187
                length: 63
              - type: for_statement
                fields:
                  text: |-
                    for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
                            {
                                String option = e.nextElement().toString();

                                if (!cmd.hasOption(option))
                                {
                                    Option opt = getOptions().getOption(option);

                                    // get the value from the properties instance
                                    String value = properties.getProperty(option);

                                    if (opt.hasArg())
                                    {
                                        if (opt.getValues() == null || opt.getValues().length == 0)
                                        {
                                            try
                                            {
                                                opt.addValueForProcessing(value);
                                            }
                                            catch (RuntimeException exp)
                                            {
                                                // if we cannot add the value don't worry about it
                                            }
                                        }
                                    }
                                    else if (!("yes".equalsIgnoreCase(value)
                                            || "true".equalsIgnoreCase(value)
                                            || "1".equalsIgnoreCase(value)))
                                    {
                                        // if the value is not yes, true or 1 then don't add the
                                        // option to the CommandLine
                                        continue;
                                    }

                                    cmd.addOption(opt);
                                }
                            }
                children: []
                pos: 8260
                length: 1324
              pos: 8177
              length: 1413
          children: []
          pos: 8117
          length: 1473
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 9829
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9814
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!getRequiredOptions().isEmpty()"
                        children: []
                        pos: 9971
                        length: 31
                    children: []
                    pos: 9970
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(getRequiredOptions());
                    children: []
                    pos: 10026
                    length: 55
                  pos: 10012
                  length: 79
                pos: 9967
                length: 124
              pos: 9886
              length: 211
          children: []
          pos: 9814
          length: 283
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processArgs
              children: []
              pos: 10530
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option opt
                children: []
                pos: 10542
                length: 10
              pos: 10518
              length: 847
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (iter.hasNext())
                            {
                                String str = (String) iter.next();

                                // found an Option, not an argument
                                if (getOptions().hasOption(str) && str.startsWith("-"))
                                {
                                    iter.previous();
                                    break;
                                }

                                // found a value
                                try
                                {
                                    opt.addValueForProcessing(Util.stripLeadingAndTrailingQuotes(str));
                                }
                                catch (RuntimeException exp)
                                {
                                    iter.previous();
                                    break;
                                }
                            }
                children: []
                pos: 10650
                length: 573
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: opt.getValues()
                                children: []
                                pos: 11237
                                length: 15
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 11256
                                length: 4
                            children: []
                            pos: 11237
                            length: 23
                          right:
                            type: unary_expression
                            fields:
                              text: "!opt.hasOptionalArg()"
                            children: []
                            pos: 11264
                            length: 21
                        children: []
                        pos: 11237
                        length: 48
                    children: []
                    pos: 11236
                    length: 50
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingArgumentException(opt);
                    children: []
                    pos: 11309
                    length: 40
                  pos: 11295
                  length: 64
                pos: 11233
                length: 126
              pos: 10599
              length: 766
          children: []
          pos: 10518
          length: 847
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processOption
              children: []
              pos: 11764
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String arg
                children: []
                pos: 11778
                length: 10
              pos: 11749
              length: 1285
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasOption = getOptions().hasOption(arg);
                children: []
                pos: 11845
                length: 48
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!hasOption"
                        children: []
                        pos: 11977
                        length: 10
                    children: []
                    pos: 11976
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new UnrecognizedOptionException("Unrecognized option:
                        " + arg, arg);'
                    children: []
                    pos: 12011
                    length: 74
                  pos: 11997
                  length: 98
                pos: 11973
                length: 122
              - type: local_variable_declaration
                fields:
                  text: Option opt = (Option) getOptions().getOption(arg).clone();
                children: []
                pos: 12150
                length: 58
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.isRequired()
                        children: []
                        pos: 12327
                        length: 16
                    children: []
                    pos: 12326
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: getRequiredOptions().remove(opt.getKey());
                    children: []
                    pos: 12367
                    length: 42
                  pos: 12353
                  length: 66
                pos: 12323
                length: 96
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: getOptions().getOptionGroup(opt)
                            children: []
                            pos: 12540
                            length: 32
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12576
                            length: 4
                        children: []
                        pos: 12540
                        length: 40
                    children: []
                    pos: 12539
                    length: 42
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = getOptions().getOptionGroup(opt);
                    children: []
                    pos: 12604
                    length: 53
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 12675
                            length: 18
                        children: []
                        pos: 12674
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: getRequiredOptions().remove(group);
                        children: []
                        pos: 12725
                        length: 35
                      pos: 12707
                      length: 67
                    pos: 12671
                    length: 103
                  - type: expression_statement
                    fields:
                      text: group.setSelected(opt);
                    children: []
                    pos: 12788
                    length: 23
                  pos: 12590
                  length: 231
                pos: 12536
                length: 285
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.hasArg()
                        children: []
                        pos: 12884
                        length: 12
                    children: []
                    pos: 12883
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: processArgs(opt, iter);
                    children: []
                    pos: 12920
                    length: 23
                  pos: 12906
                  length: 47
                pos: 12880
                length: 73
              - type: expression_statement
                fields:
                  text: cmd.addOption(opt);
                children: []
                pos: 13009
                length: 19
              pos: 11835
              length: 1199
          children: []
          pos: 11749
          length: 1285
        pos: 1284
        length: 11752
    children: []
    pos: 1284
    length: 11752
  pos: 0
  length: 13037
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Parser
        children: []
        pos: 1306
        length: 6
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected CommandLine cmd;
          children: []
          pos: 1380
          length: 26
        - type: field_declaration
          fields:
            text: private Options options;
          children: []
          pos: 1439
          length: 24
        - type: field_declaration
          fields:
            text: private List requiredOptions;
          children: []
          pos: 1513
          length: 29
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setOptions
              children: []
              pos: 1563
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Options options
                children: []
                pos: 1574
                length: 21
              pos: 1548
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 1611
                length: 23
              - type: expression_statement
                fields:
                  text: this.requiredOptions = new ArrayList(options.getRequiredOptions());
                children: []
                pos: 1643
                length: 67
              pos: 1601
              length: 115
          children: []
          pos: 1548
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOptions
              children: []
              pos: 1740
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1722
              length: 66
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return options;
                children: []
                pos: 1767
                length: 15
              pos: 1757
              length: 31
          children: []
          pos: 1722
          length: 66
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRequiredOptions
              children: []
              pos: 1809
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1794
              length: 79
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return requiredOptions;
                children: []
                pos: 1844
                length: 23
              pos: 1834
              length: 39
          children: []
          pos: 1794
          length: 79
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: flatten
              children: []
              pos: 2355
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options opts
                children: []
                pos: 2363
                length: 12
              pos: 2327
              length: 117
          children: []
          pos: 2327
          length: 117
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2815
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2821
                length: 15
              pos: 2796
              length: 150
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, false);
                children: []
                pos: 2894
                length: 46
              pos: 2884
              length: 62
          children: []
          pos: 2796
          length: 150
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3453
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3459
                length: 15
              pos: 3434
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 3555
                length: 52
              pos: 3545
              length: 68
          children: []
          pos: 3434
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4262
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 4268
                length: 15
              pos: 4243
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 4366
                length: 56
              pos: 4356
              length: 72
          children: []
          pos: 4243
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 5200
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 5206
                length: 15
              pos: 5181
              length: 2765
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator it = options.helpOptions().iterator(); it.hasNext();)
                            {
                                Option opt = (Option) it.next();
                                opt.clearValues();
                            }
                children: []
                pos: 5419
                length: 163
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator it = options.getOptionGroups().iterator(); it.hasNext();)
                            {
                                OptionGroup group = (OptionGroup) it.next();
                                group.setSelected(null);
                            }
                children: []
                pos: 5642
                length: 185
              - type: expression_statement
                fields:
                  text: setOptions(options);
                children: []
                pos: 5875
                length: 20
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 5905
                length: 24
              - type: local_variable_declaration
                fields:
                  text: boolean eatTheRest = false;
                children: []
                pos: 5939
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 5980
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5993
                            length: 4
                        children: []
                        pos: 5980
                        length: 17
                    children: []
                    pos: 5979
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: arguments = new String[0];
                    children: []
                    pos: 6021
                    length: 26
                  pos: 6007
                  length: 50
                pos: 5976
                length: 81
              - type: local_variable_declaration
                fields:
                  text: List tokenList = Arrays.asList(flatten(getOptions(), arguments,
                    stopAtNonOption));
                children: []
                pos: 6067
                length: 82
              - type: local_variable_declaration
                fields:
                  text: ListIterator iterator = tokenList.listIterator();
                children: []
                pos: 6159
                length: 49
              - type: while_statement
                fields:
                  text: |-
                    while (iterator.hasNext())
                            {
                                String t = (String) iterator.next();

                                // the value is the double-dash
                                if ("--".equals(t))
                                {
                                    eatTheRest = true;
                                }

                                // the value is a single dash
                                else if ("-".equals(t))
                                {
                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                    else
                                    {
                                        cmd.addArg(t);
                                    }
                                }

                                // the value is an option
                                else if (t.startsWith("-"))
                                {
                                    if (stopAtNonOption && !getOptions().hasOption(t))
                                    {
                                        eatTheRest = true;
                                        cmd.addArg(t);
                                    }
                                    else
                                    {
                                        processOption(t, iterator);
                                    }
                                }

                                // the value is an argument
                                else
                                {
                                    cmd.addArg(t);

                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                }

                                // eat the remaining tokens
                                if (eatTheRest)
                                {
                                    while (iterator.hasNext())
                                    {
                                        String str = (String) iterator.next();

                                        // ensure only one double-dash is added
                                        if (!"--".equals(str))
                                        {
                                            cmd.addArg(str);
                                        }
                                    }
                                }
                            }
                children: []
                pos: 6258
                length: 1589
              - type: expression_statement
                fields:
                  text: processProperties(properties);
                children: []
                pos: 7857
                length: 30
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 7896
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 7929
                length: 11
              pos: 5329
              length: 2617
          children: []
          pos: 5181
          length: 2765
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processProperties
              children: []
              pos: 8132
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 8150
                length: 21
              pos: 8117
              length: 1470
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 8191
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8205
                            length: 4
                        children: []
                        pos: 8191
                        length: 18
                    children: []
                    pos: 8190
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 8233
                    length: 7
                  pos: 8219
                  length: 31
                pos: 8187
                length: 63
              - type: for_statement
                fields:
                  text: |-
                    for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
                            {
                                String option = e.nextElement().toString();

                                if (!cmd.hasOption(option))
                                {
                                    Option opt = getOptions().getOption(option);

                                    // get the value from the properties instance
                                    String value = properties.getProperty(option);

                                    if (opt.hasArg())
                                    {
                                        if (opt.getValues() == null || opt.getValues().length == 0)
                                        {
                                            try
                                            {
                                                opt.addValueForProcessing(value);
                                            }
                                            catch (RuntimeException exp)
                                            {
                                                // if we cannot add the value don't worry about it
                                            }
                                        }
                                    }
                                    else if (!("yes".equalsIgnoreCase(value)
                                            || "true".equalsIgnoreCase(value)
                                            || "1".equalsIgnoreCase(value)))
                                    {
                                        // if the value is not yes, true or 1 then don't add the
                                        // option to the CommandLine
                                        break;
                                    }

                                    cmd.addOption(opt);
                                }
                            }
                children: []
                pos: 8260
                length: 1321
              pos: 8177
              length: 1410
          children: []
          pos: 8117
          length: 1470
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 9826
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9811
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!getRequiredOptions().isEmpty()"
                        children: []
                        pos: 9968
                        length: 31
                    children: []
                    pos: 9967
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(getRequiredOptions());
                    children: []
                    pos: 10023
                    length: 55
                  pos: 10009
                  length: 79
                pos: 9964
                length: 124
              pos: 9883
              length: 211
          children: []
          pos: 9811
          length: 283
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processArgs
              children: []
              pos: 10527
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option opt
                children: []
                pos: 10539
                length: 10
              pos: 10515
              length: 847
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (iter.hasNext())
                            {
                                String str = (String) iter.next();

                                // found an Option, not an argument
                                if (getOptions().hasOption(str) && str.startsWith("-"))
                                {
                                    iter.previous();
                                    break;
                                }

                                // found a value
                                try
                                {
                                    opt.addValueForProcessing(Util.stripLeadingAndTrailingQuotes(str));
                                }
                                catch (RuntimeException exp)
                                {
                                    iter.previous();
                                    break;
                                }
                            }
                children: []
                pos: 10647
                length: 573
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: opt.getValues()
                                children: []
                                pos: 11234
                                length: 15
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 11253
                                length: 4
                            children: []
                            pos: 11234
                            length: 23
                          right:
                            type: unary_expression
                            fields:
                              text: "!opt.hasOptionalArg()"
                            children: []
                            pos: 11261
                            length: 21
                        children: []
                        pos: 11234
                        length: 48
                    children: []
                    pos: 11233
                    length: 50
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingArgumentException(opt);
                    children: []
                    pos: 11306
                    length: 40
                  pos: 11292
                  length: 64
                pos: 11230
                length: 126
              pos: 10596
              length: 766
          children: []
          pos: 10515
          length: 847
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processOption
              children: []
              pos: 11761
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String arg
                children: []
                pos: 11775
                length: 10
              pos: 11746
              length: 1285
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasOption = getOptions().hasOption(arg);
                children: []
                pos: 11842
                length: 48
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!hasOption"
                        children: []
                        pos: 11974
                        length: 10
                    children: []
                    pos: 11973
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new UnrecognizedOptionException("Unrecognized option:
                        " + arg, arg);'
                    children: []
                    pos: 12008
                    length: 74
                  pos: 11994
                  length: 98
                pos: 11970
                length: 122
              - type: local_variable_declaration
                fields:
                  text: Option opt = (Option) getOptions().getOption(arg).clone();
                children: []
                pos: 12147
                length: 58
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.isRequired()
                        children: []
                        pos: 12324
                        length: 16
                    children: []
                    pos: 12323
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: getRequiredOptions().remove(opt.getKey());
                    children: []
                    pos: 12364
                    length: 42
                  pos: 12350
                  length: 66
                pos: 12320
                length: 96
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: getOptions().getOptionGroup(opt)
                            children: []
                            pos: 12537
                            length: 32
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12573
                            length: 4
                        children: []
                        pos: 12537
                        length: 40
                    children: []
                    pos: 12536
                    length: 42
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = getOptions().getOptionGroup(opt);
                    children: []
                    pos: 12601
                    length: 53
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 12672
                            length: 18
                        children: []
                        pos: 12671
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: getRequiredOptions().remove(group);
                        children: []
                        pos: 12722
                        length: 35
                      pos: 12704
                      length: 67
                    pos: 12668
                    length: 103
                  - type: expression_statement
                    fields:
                      text: group.setSelected(opt);
                    children: []
                    pos: 12785
                    length: 23
                  pos: 12587
                  length: 231
                pos: 12533
                length: 285
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.hasArg()
                        children: []
                        pos: 12881
                        length: 12
                    children: []
                    pos: 12880
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: processArgs(opt, iter);
                    children: []
                    pos: 12917
                    length: 23
                  pos: 12903
                  length: 47
                pos: 12877
                length: 73
              - type: expression_statement
                fields:
                  text: cmd.addOption(opt);
                children: []
                pos: 13006
                length: 19
              pos: 11832
              length: 1199
          children: []
          pos: 11746
          length: 1285
        pos: 1284
        length: 11749
    children: []
    pos: 1284
    length: 11749
  pos: 0
  length: 13034
text_diff: "--- before\n+++ after\n@@ -287,7 +287,7 @@\n                 {\n                     //
  if the value is not yes, true or 1 then don't add the\n                     // option
  to the CommandLine\n-                    continue;\n+                    break;\n
  \                }\n \n                 cmd.addOption(opt);\n"
tree_diff: |+
  New cluster:
  UPDATE from for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
          {
              String option = e.nextElement().toString();

              if (!cmd.hasOption(option))
              {
                  Option opt = getOptions().getOption(option);

                  // get the value from the properties instance
                  String value = properties.getProperty(option);

                  if (opt.hasArg())
                  {
                      if (opt.getValues() == null || opt.getValues().length == 0)
                      {
                          try
                          {
                              opt.addValueForProcessing(value);
                          }
                          catch (RuntimeException exp)
                          {
                              // if we cannot add the value don't worry about it
                          }
                      }
                  }
                  else if (!("yes".equalsIgnoreCase(value)
                          || "true".equalsIgnoreCase(value)
                          || "1".equalsIgnoreCase(value)))
                  {
                      // if the value is not yes, true or 1 then don't add the
                      // option to the CommandLine
                      continue;
                  }

                  cmd.addOption(opt);
              }
          } to for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
          {
              String option = e.nextElement().toString();

              if (!cmd.hasOption(option))
              {
                  Option opt = getOptions().getOption(option);

                  // get the value from the properties instance
                  String value = properties.getProperty(option);

                  if (opt.hasArg())
                  {
                      if (opt.getValues() == null || opt.getValues().length == 0)
                      {
                          try
                          {
                              opt.addValueForProcessing(value);
                          }
                          catch (RuntimeException exp)
                          {
                              // if we cannot add the value don't worry about it
                          }
                      }
                  }
                  else if (!("yes".equalsIgnoreCase(value)
                          || "true".equalsIgnoreCase(value)
                          || "1".equalsIgnoreCase(value)))
                  {
                      // if the value is not yes, true or 1 then don't add the
                      // option to the CommandLine
                      break;
                  }

                  cmd.addOption(opt);
              }
          }
  ------------
  ===
  update-node
  ---
  for_statement: for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
          {
              String option = e.nextElement().toString();

              if (!cmd.hasOption(option))
              {
                  Option opt = getOptions().getOption(option);

                  // get the value from the properties instance
                  String value = properties.getProperty(option);

                  if (opt.hasArg())
                  {
                      if (opt.getValues() == null || opt.getValues().length == 0)
                      {
                          try
                          {
                              opt.addValueForProcessing(value);
                          }
                          catch (RuntimeException exp)
                          {
                              // if we cannot add the value don't worry about it
                          }
                      }
                  }
                  else if (!("yes".equalsIgnoreCase(value)
                          || "true".equalsIgnoreCase(value)
                          || "1".equalsIgnoreCase(value)))
                  {
                      // if the value is not yes, true or 1 then don't add the
                      // option to the CommandLine
                      continue;
                  }

                  cmd.addOption(opt);
              }
          } [8260,9584]
  replace for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
          {
              String option = e.nextElement().toString();

              if (!cmd.hasOption(option))
              {
                  Option opt = getOptions().getOption(option);

                  // get the value from the properties instance
                  String value = properties.getProperty(option);

                  if (opt.hasArg())
                  {
                      if (opt.getValues() == null || opt.getValues().length == 0)
                      {
                          try
                          {
                              opt.addValueForProcessing(value);
                          }
                          catch (RuntimeException exp)
                          {
                              // if we cannot add the value don't worry about it
                          }
                      }
                  }
                  else if (!("yes".equalsIgnoreCase(value)
                          || "true".equalsIgnoreCase(value)
                          || "1".equalsIgnoreCase(value)))
                  {
                      // if the value is not yes, true or 1 then don't add the
                      // option to the CommandLine
                      continue;
                  }

                  cmd.addOption(opt);
              }
          } by for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)
          {
              String option = e.nextElement().toString();

              if (!cmd.hasOption(option))
              {
                  Option opt = getOptions().getOption(option);

                  // get the value from the properties instance
                  String value = properties.getProperty(option);

                  if (opt.hasArg())
                  {
                      if (opt.getValues() == null || opt.getValues().length == 0)
                      {
                          try
                          {
                              opt.addValueForProcessing(value);
                          }
                          catch (RuntimeException exp)
                          {
                              // if we cannot add the value don't worry about it
                          }
                      }
                  }
                  else if (!("yes".equalsIgnoreCase(value)
                          || "true".equalsIgnoreCase(value)
                          || "1".equalsIgnoreCase(value)))
                  {
                      // if the value is not yes, true or 1 then don't add the
                      // option to the CommandLine
                      break;
                  }

                  cmd.addOption(opt);
              }
          }

...
