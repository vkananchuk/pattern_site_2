---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: CoreOperationCompare
        children: []
        pos: 1371
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: constructor_declaration
          fields:
            text: |-
              public CoreOperationCompare(Expression arg1, Expression arg2) {
                      super(new Expression[] { arg1, arg2 });
                  }
          children: []
          pos: 1421
          length: 117
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equal
              children: []
              pos: 1605
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 1620
                length: 19
              pos: 1587
              length: 1377
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object l = left.compute(context);
                children: []
                pos: 1707
                length: 33
              - type: local_variable_declaration
                fields:
                  text: Object r = right.compute(context);
                children: []
                pos: 1749
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: l instanceof InitialContext
                        children: []
                        pos: 1973
                        length: 27
                    children: []
                    pos: 1972
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: "((EvalContext) l).reset();"
                    children: []
                    pos: 2016
                    length: 26
                  pos: 2002
                  length: 50
                pos: 1969
                length: 83
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: l instanceof SelfContext
                        children: []
                        pos: 2066
                        length: 24
                    children: []
                    pos: 2065
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: l = ((EvalContext) l).getSingleNodePointer();
                    children: []
                    pos: 2106
                    length: 45
                  pos: 2092
                  length: 69
                pos: 2062
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: r instanceof InitialContext
                        children: []
                        pos: 2175
                        length: 27
                    children: []
                    pos: 2174
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: "((EvalContext) r).reset();"
                    children: []
                    pos: 2218
                    length: 26
                  pos: 2204
                  length: 50
                pos: 2171
                length: 83
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: r instanceof SelfContext
                        children: []
                        pos: 2268
                        length: 24
                    children: []
                    pos: 2267
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: r = ((EvalContext) r).getSingleNodePointer();
                    children: []
                    pos: 2308
                    length: 45
                  pos: 2294
                  length: 69
                pos: 2264
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: l instanceof Collection
                        children: []
                        pos: 2377
                        length: 23
                    children: []
                    pos: 2376
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: l = ((Collection) l).iterator();
                    children: []
                    pos: 2416
                    length: 32
                  pos: 2402
                  length: 56
                pos: 2373
                length: 85
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: r instanceof Collection
                        children: []
                        pos: 2472
                        length: 23
                    children: []
                    pos: 2471
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: r = ((Collection) r).iterator();
                    children: []
                    pos: 2511
                    length: 32
                  pos: 2497
                  length: 56
                pos: 2468
                length: 85
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: instanceof_expression
                                fields:
                                  text: l instanceof Iterator
                                children: []
                                pos: 2568
                                length: 21
                            children: []
                            pos: 2567
                            length: 23
                          right:
                            type: unary_expression
                            fields:
                              text: "!(r instanceof Iterator)"
                            children: []
                            pos: 2594
                            length: 24
                        children: []
                        pos: 2567
                        length: 51
                    children: []
                    pos: 2566
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return contains((Iterator) l, r);
                    children: []
                    pos: 2634
                    length: 33
                  pos: 2620
                  length: 57
                pos: 2563
                length: 114
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!(l instanceof Iterator)"
                            children: []
                            pos: 2690
                            length: 24
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: instanceof_expression
                                fields:
                                  text: r instanceof Iterator
                                children: []
                                pos: 2719
                                length: 21
                            children: []
                            pos: 2718
                            length: 23
                        children: []
                        pos: 2690
                        length: 51
                    children: []
                    pos: 2689
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return contains((Iterator) r, l);
                    children: []
                    pos: 2757
                    length: 33
                  pos: 2743
                  length: 57
                pos: 2686
                length: 114
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Iterator
                            children: []
                            pos: 2813
                            length: 21
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Iterator
                            children: []
                            pos: 2838
                            length: 21
                        children: []
                        pos: 2813
                        length: 46
                    children: []
                    pos: 2812
                    length: 48
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return findMatch((Iterator) l, (Iterator) r);
                    children: []
                    pos: 2875
                    length: 45
                  pos: 2861
                  length: 69
                pos: 2809
                length: 121
              - type: return_statement
                fields:
                  text: return equal(l, r);
                children: []
                pos: 2939
                length: 19
              pos: 1697
              length: 1267
          children: []
          pos: 1587
          length: 1377
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: contains
              children: []
              pos: 2988
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator it
                children: []
                pos: 2997
                length: 11
              pos: 2970
              length: 248
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (it.hasNext()) {
                                Object element = it.next();
                                if (equal(element, value)) {
                                    return true;
                                }
                            }
                children: []
                pos: 3034
                length: 156
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3199
                length: 13
              pos: 3024
              length: 194
          children: []
          pos: 2970
          length: 248
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: findMatch
              children: []
              pos: 3242
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator lit
                children: []
                pos: 3252
                length: 12
              pos: 3224
              length: 341
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: HashSet left = new HashSet();
                children: []
                pos: 3290
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (lit.hasNext()) {
                                left.add(lit.next());
                            }
                children: []
                pos: 3328
                length: 67
              - type: while_statement
                fields:
                  text: |-
                    while (rit.hasNext()) {
                                if (contains(left.iterator(), rit.next())) {
                                    return true;
                                }
                            }
                children: []
                pos: 3404
                length: 133
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3546
                length: 13
              pos: 3280
              length: 285
          children: []
          pos: 3224
          length: 341
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equal
              children: []
              pos: 3589
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object l
                children: []
                pos: 3595
                length: 8
              pos: 3571
              length: 1006
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Pointer
                            children: []
                            pos: 3629
                            length: 20
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Pointer
                            children: []
                            pos: 3653
                            length: 20
                        children: []
                        pos: 3629
                        length: 44
                    children: []
                    pos: 3628
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: l.equals(r)
                            children: []
                            pos: 3693
                            length: 11
                        children: []
                        pos: 3692
                        length: 13
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 3724
                        length: 12
                      pos: 3706
                      length: 44
                    pos: 3689
                    length: 61
                  pos: 3675
                  length: 85
                pos: 3625
                length: 135
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: l instanceof Pointer
                        children: []
                        pos: 3774
                        length: 20
                    children: []
                    pos: 3773
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: l = ((Pointer) l).getValue();
                    children: []
                    pos: 3810
                    length: 29
                  pos: 3796
                  length: 53
                pos: 3770
                length: 79
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: r instanceof Pointer
                        children: []
                        pos: 3863
                        length: 20
                    children: []
                    pos: 3862
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: r = ((Pointer) r).getValue();
                    children: []
                    pos: 3899
                    length: 29
                  pos: 3885
                  length: 53
                pos: 3859
                length: 79
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: l
                            children: []
                            pos: 3952
                            length: 1
                          right:
                            type: identifier
                            fields:
                              text: r
                            children: []
                            pos: 3957
                            length: 1
                        children: []
                        pos: 3952
                        length: 6
                    children: []
                    pos: 3951
                    length: 8
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 3974
                    length: 12
                  pos: 3960
                  length: 36
                pos: 3948
                length: 48
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Boolean
                            children: []
                            pos: 4076
                            length: 20
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Boolean
                            children: []
                            pos: 4100
                            length: 20
                        children: []
                        pos: 4076
                        length: 44
                    children: []
                    pos: 4075
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return (InfoSetUtil.booleanValue(l) == InfoSetUtil.booleanValue(r));
                    children: []
                    pos: 4136
                    length: 68
                  pos: 4122
                  length: 92
                pos: 4072
                length: 142
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Number
                            children: []
                            pos: 4227
                            length: 19
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Number
                            children: []
                            pos: 4250
                            length: 19
                        children: []
                        pos: 4227
                        length: 42
                    children: []
                    pos: 4226
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return (InfoSetUtil.doubleValue(l) == InfoSetUtil.doubleValue(r));
                    children: []
                    pos: 4285
                    length: 66
                  pos: 4271
                  length: 90
                pos: 4223
                length: 138
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof String
                            children: []
                            pos: 4374
                            length: 19
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof String
                            children: []
                            pos: 4397
                            length: 19
                        children: []
                        pos: 4374
                        length: 42
                    children: []
                    pos: 4373
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return (
                                        InfoSetUtil.stringValue(l).equals(InfoSetUtil.stringValue(r)));
                    children: []
                    pos: 4432
                    length: 88
                  pos: 4418
                  length: 112
                pos: 4370
                length: 160
              - type: return_statement
                fields:
                  text: return l != null && l.equals(r);
                children: []
                pos: 4539
                length: 32
              pos: 3615
              length: 962
          children: []
          pos: 3571
          length: 1006
        pos: 1349
        length: 3231
    children: []
    pos: 1349
    length: 3231
  pos: 0
  length: 4581
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: CoreOperationCompare
        children: []
        pos: 1371
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: constructor_declaration
          fields:
            text: |-
              public CoreOperationCompare(Expression arg1, Expression arg2) {
                      super(new Expression[] { arg1, arg2 });
                  }
          children: []
          pos: 1421
          length: 117
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equal
              children: []
              pos: 1605
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 1620
                length: 19
              pos: 1587
              length: 1253
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Object l = left.compute(context);
                children: []
                pos: 1707
                length: 33
              - type: local_variable_declaration
                fields:
                  text: Object r = right.compute(context);
                children: []
                pos: 1749
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof InitialContext
                            children: []
                            pos: 1973
                            length: 27
                          right:
                            type: instanceof_expression
                            fields:
                              text: l instanceof SelfContext
                            children: []
                            pos: 2004
                            length: 24
                        children: []
                        pos: 1973
                        length: 55
                    children: []
                    pos: 1972
                    length: 57
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: l = ((EvalContext) l).getSingleNodePointer();
                    children: []
                    pos: 2044
                    length: 45
                  pos: 2030
                  length: 69
                pos: 1969
                length: 130
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: r instanceof InitialContext
                            children: []
                            pos: 2113
                            length: 27
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof SelfContext
                            children: []
                            pos: 2144
                            length: 24
                        children: []
                        pos: 2113
                        length: 55
                    children: []
                    pos: 2112
                    length: 57
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: r = ((EvalContext) r).getSingleNodePointer();
                    children: []
                    pos: 2184
                    length: 45
                  pos: 2170
                  length: 69
                pos: 2109
                length: 130
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: l instanceof Collection
                        children: []
                        pos: 2253
                        length: 23
                    children: []
                    pos: 2252
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: l = ((Collection) l).iterator();
                    children: []
                    pos: 2292
                    length: 32
                  pos: 2278
                  length: 56
                pos: 2249
                length: 85
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: r instanceof Collection
                        children: []
                        pos: 2348
                        length: 23
                    children: []
                    pos: 2347
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: r = ((Collection) r).iterator();
                    children: []
                    pos: 2387
                    length: 32
                  pos: 2373
                  length: 56
                pos: 2344
                length: 85
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: instanceof_expression
                                fields:
                                  text: l instanceof Iterator
                                children: []
                                pos: 2444
                                length: 21
                            children: []
                            pos: 2443
                            length: 23
                          right:
                            type: unary_expression
                            fields:
                              text: "!(r instanceof Iterator)"
                            children: []
                            pos: 2470
                            length: 24
                        children: []
                        pos: 2443
                        length: 51
                    children: []
                    pos: 2442
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return contains((Iterator) l, r);
                    children: []
                    pos: 2510
                    length: 33
                  pos: 2496
                  length: 57
                pos: 2439
                length: 114
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!(l instanceof Iterator)"
                            children: []
                            pos: 2566
                            length: 24
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: instanceof_expression
                                fields:
                                  text: r instanceof Iterator
                                children: []
                                pos: 2595
                                length: 21
                            children: []
                            pos: 2594
                            length: 23
                        children: []
                        pos: 2566
                        length: 51
                    children: []
                    pos: 2565
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return contains((Iterator) r, l);
                    children: []
                    pos: 2633
                    length: 33
                  pos: 2619
                  length: 57
                pos: 2562
                length: 114
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Iterator
                            children: []
                            pos: 2689
                            length: 21
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Iterator
                            children: []
                            pos: 2714
                            length: 21
                        children: []
                        pos: 2689
                        length: 46
                    children: []
                    pos: 2688
                    length: 48
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return findMatch((Iterator) l, (Iterator) r);
                    children: []
                    pos: 2751
                    length: 45
                  pos: 2737
                  length: 69
                pos: 2685
                length: 121
              - type: return_statement
                fields:
                  text: return equal(l, r);
                children: []
                pos: 2815
                length: 19
              pos: 1697
              length: 1143
          children: []
          pos: 1587
          length: 1253
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: contains
              children: []
              pos: 2864
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator it
                children: []
                pos: 2873
                length: 11
              pos: 2846
              length: 248
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (it.hasNext()) {
                                Object element = it.next();
                                if (equal(element, value)) {
                                    return true;
                                }
                            }
                children: []
                pos: 2910
                length: 156
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3075
                length: 13
              pos: 2900
              length: 194
          children: []
          pos: 2846
          length: 248
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: findMatch
              children: []
              pos: 3118
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator lit
                children: []
                pos: 3128
                length: 12
              pos: 3100
              length: 341
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: HashSet left = new HashSet();
                children: []
                pos: 3166
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (lit.hasNext()) {
                                left.add(lit.next());
                            }
                children: []
                pos: 3204
                length: 67
              - type: while_statement
                fields:
                  text: |-
                    while (rit.hasNext()) {
                                if (contains(left.iterator(), rit.next())) {
                                    return true;
                                }
                            }
                children: []
                pos: 3280
                length: 133
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3422
                length: 13
              pos: 3156
              length: 285
          children: []
          pos: 3100
          length: 341
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equal
              children: []
              pos: 3465
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object l
                children: []
                pos: 3471
                length: 8
              pos: 3447
              length: 1006
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Pointer
                            children: []
                            pos: 3505
                            length: 20
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Pointer
                            children: []
                            pos: 3529
                            length: 20
                        children: []
                        pos: 3505
                        length: 44
                    children: []
                    pos: 3504
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: l.equals(r)
                            children: []
                            pos: 3569
                            length: 11
                        children: []
                        pos: 3568
                        length: 13
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 3600
                        length: 12
                      pos: 3582
                      length: 44
                    pos: 3565
                    length: 61
                  pos: 3551
                  length: 85
                pos: 3501
                length: 135
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: l instanceof Pointer
                        children: []
                        pos: 3650
                        length: 20
                    children: []
                    pos: 3649
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: l = ((Pointer) l).getValue();
                    children: []
                    pos: 3686
                    length: 29
                  pos: 3672
                  length: 53
                pos: 3646
                length: 79
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: r instanceof Pointer
                        children: []
                        pos: 3739
                        length: 20
                    children: []
                    pos: 3738
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: r = ((Pointer) r).getValue();
                    children: []
                    pos: 3775
                    length: 29
                  pos: 3761
                  length: 53
                pos: 3735
                length: 79
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: l
                            children: []
                            pos: 3828
                            length: 1
                          right:
                            type: identifier
                            fields:
                              text: r
                            children: []
                            pos: 3833
                            length: 1
                        children: []
                        pos: 3828
                        length: 6
                    children: []
                    pos: 3827
                    length: 8
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 3850
                    length: 12
                  pos: 3836
                  length: 36
                pos: 3824
                length: 48
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Boolean
                            children: []
                            pos: 3952
                            length: 20
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Boolean
                            children: []
                            pos: 3976
                            length: 20
                        children: []
                        pos: 3952
                        length: 44
                    children: []
                    pos: 3951
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return (InfoSetUtil.booleanValue(l) == InfoSetUtil.booleanValue(r));
                    children: []
                    pos: 4012
                    length: 68
                  pos: 3998
                  length: 92
                pos: 3948
                length: 142
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof Number
                            children: []
                            pos: 4103
                            length: 19
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof Number
                            children: []
                            pos: 4126
                            length: 19
                        children: []
                        pos: 4103
                        length: 42
                    children: []
                    pos: 4102
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return (InfoSetUtil.doubleValue(l) == InfoSetUtil.doubleValue(r));
                    children: []
                    pos: 4161
                    length: 66
                  pos: 4147
                  length: 90
                pos: 4099
                length: 138
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: l instanceof String
                            children: []
                            pos: 4250
                            length: 19
                          right:
                            type: instanceof_expression
                            fields:
                              text: r instanceof String
                            children: []
                            pos: 4273
                            length: 19
                        children: []
                        pos: 4250
                        length: 42
                    children: []
                    pos: 4249
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: |-
                        return (
                                        InfoSetUtil.stringValue(l).equals(InfoSetUtil.stringValue(r)));
                    children: []
                    pos: 4308
                    length: 88
                  pos: 4294
                  length: 112
                pos: 4246
                length: 160
              - type: return_statement
                fields:
                  text: return l != null && l.equals(r);
                children: []
                pos: 4415
                length: 32
              pos: 3491
              length: 962
          children: []
          pos: 3447
          length: 1006
        pos: 1349
        length: 3107
    children: []
    pos: 1349
    length: 3107
  pos: 0
  length: 4457
text_diff: "--- before\n+++ after\n@@ -54,19 +54,11 @@\n //            (l == null
  ? \"null\" : l.getClass().getName()) + \" \" +\n //            (r == null ? \"null\"
  : r.getClass().getName()));\n \n-        if (l instanceof InitialContext) {\n-            ((EvalContext)
  l).reset();\n-        }\n-\n-        if (l instanceof SelfContext) {\n+        if
  (l instanceof InitialContext || l instanceof SelfContext) {\n             l = ((EvalContext)
  l).getSingleNodePointer();\n         }\n \n-        if (r instanceof InitialContext)
  {\n-            ((EvalContext) r).reset();\n-        }\n-\n-        if (r instanceof
  SelfContext) {\n+        if (r instanceof InitialContext || r instanceof SelfContext)
  {\n             r = ((EvalContext) r).getSingleNodePointer();\n         }\n \n"
tree_diff: |+
  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  or [1973,2028]
      instanceof_expression: l instanceof InitialContext [1973,2000]
      instanceof_expression: l instanceof SelfContext [2004,2028]
  to
  parenthesized_expression [2065,2091]
  at 0

  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  or [2113,2168]
      instanceof_expression: r instanceof InitialContext [2113,2140]
      instanceof_expression: r instanceof SelfContext [2144,2168]
  to
  parenthesized_expression [2267,2293]
  at 0

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [1969,2052]
      parenthesized_expression [1972,2001]
          instanceof_expression: l instanceof InitialContext [1973,2000]
      block [2002,2052]
          expression_statement: ((EvalContext) l).reset(); [2016,2042]

  New cluster:
  ===
  delete-node
  ---
  instanceof_expression: l instanceof SelfContext [2066,2090]
  ===
  ------------
  ===
  delete-node
  ---
  instanceof_expression: l instanceof SelfContext [2066,2090]
  ===

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [2171,2254]
      parenthesized_expression [2174,2203]
          instanceof_expression: r instanceof InitialContext [2175,2202]
      block [2204,2254]
          expression_statement: ((EvalContext) r).reset(); [2218,2244]

  New cluster:
  ===
  delete-node
  ---
  instanceof_expression: r instanceof SelfContext [2268,2292]
  ===
  ------------
  ===
  delete-node
  ---
  instanceof_expression: r instanceof SelfContext [2268,2292]
  ===

...
