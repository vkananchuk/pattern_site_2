---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DateTimeParserBucket
        children: []
        pos: 2172
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final Chronology iChrono;
          children: []
          pos: 2246
          length: 33
        - type: field_declaration
          fields:
            text: private final long iMillis;
          children: []
          pos: 2284
          length: 27
        - type: field_declaration
          fields:
            text: private DateTimeZone iZone;
          children: []
          pos: 2389
          length: 27
        - type: field_declaration
          fields:
            text: private int iOffset;
          children: []
          pos: 2421
          length: 20
        - type: field_declaration
          fields:
            text: private Locale iLocale;
          children: []
          pos: 2488
          length: 23
        - type: field_declaration
          fields:
            text: private Integer iPivotYear;
          children: []
          pos: 2561
          length: 27
        - type: field_declaration
          fields:
            text: private int iDefaultYear;
          children: []
          pos: 2645
          length: 25
        - type: field_declaration
          fields:
            text: private SavedField[] iSavedFields = new SavedField[8];
          children: []
          pos: 2676
          length: 54
        - type: field_declaration
          fields:
            text: private int iSavedFieldsCount;
          children: []
          pos: 2735
          length: 30
        - type: field_declaration
          fields:
            text: private boolean iSavedFieldsShared;
          children: []
          pos: 2770
          length: 35
        - type: field_declaration
          fields:
            text: private Object iSavedState;
          children: []
          pos: 2815
          length: 27
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated
                  public DateTimeParserBucket(long instantLocal, Chronology chrono, Locale locale) {
                      this(instantLocal, chrono, locale, null, 2000);
                  }
          children: []
          pos: 3110
          length: 160
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated
                  public DateTimeParserBucket(long instantLocal, Chronology chrono, Locale locale, Integer pivotYear) {
                      this(instantLocal, chrono, locale, pivotYear, 2000);
                  }
          children: []
          pos: 3711
          length: 184
        - type: constructor_declaration
          fields:
            text: |-
              public DateTimeParserBucket(long instantLocal, Chronology chrono,
                          Locale locale, Integer pivotYear, int defaultYear) {
                      super();
                      chrono = DateTimeUtils.getChronology(chrono);
                      iMillis = instantLocal;
                      iChrono = chrono.withUTC();
                      iLocale = (locale == null ? Locale.getDefault() : locale);
                      setZone(chrono.getZone());
                      iPivotYear = pivotYear;
                      iDefaultYear = defaultYear;
                  }
          children: []
          pos: 4294
          length: 445
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getChronology
              children: []
              pos: 4939
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4921
              length: 65
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iChrono;
                children: []
                pos: 4965
                length: 15
              pos: 4955
              length: 31
          children: []
          pos: 4921
          length: 65
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocale
              children: []
              pos: 5194
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5180
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iLocale;
                children: []
                pos: 5216
                length: 15
              pos: 5206
              length: 31
          children: []
          pos: 5180
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getZone
              children: []
              pos: 5454
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5434
              length: 59
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iZone;
                children: []
                pos: 5474
                length: 13
              pos: 5464
              length: 29
          children: []
          pos: 5434
          length: 59
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setZone
              children: []
              pos: 5719
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeZone zone
                children: []
                pos: 5727
                length: 17
              pos: 5707
              length: 151
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: iSavedState = null;
                children: []
                pos: 5756
                length: 19
              - type: expression_statement
                fields:
                  text: 'iZone = zone == DateTimeZone.UTC ? null : zone;'
                children: []
                pos: 5784
                length: 47
              - type: expression_statement
                fields:
                  text: iOffset = 0;
                children: []
                pos: 5840
                length: 12
              pos: 5746
              length: 112
          children: []
          pos: 5707
          length: 151
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOffset
              children: []
              pos: 6091
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6080
              length: 54
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iOffset;
                children: []
                pos: 6113
                length: 15
              pos: 6103
              length: 31
          children: []
          pos: 6080
          length: 54
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setOffset
              children: []
              pos: 6281
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int offset
                children: []
                pos: 6291
                length: 10
              pos: 6269
              length: 117
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: iSavedState = null;
                children: []
                pos: 6313
                length: 19
              - type: expression_statement
                fields:
                  text: iOffset = offset;
                children: []
                pos: 6341
                length: 17
              - type: expression_statement
                fields:
                  text: iZone = null;
                children: []
                pos: 6367
                length: 13
              pos: 6303
              length: 83
          children: []
          pos: 6269
          length: 117
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPivotYear
              children: []
              pos: 6965
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6950
              length: 64
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iPivotYear;
                children: []
                pos: 6990
                length: 18
              pos: 6980
              length: 34
          children: []
          pos: 6950
          length: 64
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setPivotYear
              children: []
              pos: 7296
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Integer pivotYear
                children: []
                pos: 7309
                length: 17
              pos: 7284
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: iPivotYear = pivotYear;
                children: []
                pos: 7338
                length: 23
              pos: 7328
              length: 39
          children: []
          pos: 7284
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 7635
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeField field
                children: []
                pos: 7645
                length: 19
              pos: 7623
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: saveField(new SavedField(field, value));
                children: []
                pos: 7687
                length: 40
              pos: 7677
              length: 56
          children: []
          pos: 7623
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 7887
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeFieldType fieldType
                children: []
                pos: 7897
                length: 27
              pos: 7875
              length: 140
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: saveField(new SavedField(fieldType.getField(iChrono), value));
                children: []
                pos: 7947
                length: 62
              pos: 7937
              length: 78
          children: []
          pos: 7875
          length: 140
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 8218
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeFieldType fieldType
                children: []
                pos: 8228
                length: 27
              pos: 8206
              length: 164
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: saveField(new SavedField(fieldType.getField(iChrono), text,
                    locale));
                children: []
                pos: 8295
                length: 69
              pos: 8285
              length: 85
          children: []
          pos: 8206
          length: 164
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 8393
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SavedField field
                children: []
                pos: 8403
                length: 16
              pos: 8380
              length: 771
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: SavedField[] savedFields = iSavedFields;
                children: []
                pos: 8431
                length: 40
              - type: local_variable_declaration
                fields:
                  text: int savedFieldsCount = iSavedFieldsCount;
                children: []
                pos: 8480
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: savedFieldsCount
                                children: []
                                pos: 8543
                                length: 16
                              right:
                                type: field_access
                                fields:
                                  text: savedFields.length
                                children: []
                                pos: 8563
                                length: 18
                            children: []
                            pos: 8543
                            length: 38
                          right:
                            type: identifier
                            fields:
                              text: iSavedFieldsShared
                            children: []
                            pos: 8585
                            length: 18
                        children: []
                        pos: 8543
                        length: 60
                    children: []
                    pos: 8542
                    length: 62
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: |-
                        SavedField[] newArray = new SavedField
                                        [savedFieldsCount == savedFields.length ? savedFieldsCount * 2 : savedFields.length];
                    children: []
                    pos: 8693
                    length: 140
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(savedFields, 0, newArray, 0, savedFieldsCount);
                    children: []
                    pos: 8846
                    length: 64
                  - type: expression_statement
                    fields:
                      text: iSavedFields = savedFields = newArray;
                    children: []
                    pos: 8923
                    length: 38
                  - type: expression_statement
                    fields:
                      text: iSavedFieldsShared = false;
                    children: []
                    pos: 8974
                    length: 27
                  pos: 8605
                  length: 406
                pos: 8539
                length: 472
              - type: expression_statement
                fields:
                  text: iSavedState = null;
                children: []
                pos: 9029
                length: 19
              - type: expression_statement
                fields:
                  text: savedFields[savedFieldsCount] = field;
                children: []
                pos: 9057
                length: 38
              - type: expression_statement
                fields:
                  text: iSavedFieldsCount = savedFieldsCount + 1;
                children: []
                pos: 9104
                length: 41
              pos: 8421
              length: 730
          children: []
          pos: 8380
          length: 771
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveState
              children: []
              pos: 9470
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9456
              length: 150
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: iSavedState
                            children: []
                            pos: 9496
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9511
                            length: 4
                        children: []
                        pos: 9496
                        length: 19
                    children: []
                    pos: 9495
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: iSavedState = new SavedState();
                    children: []
                    pos: 9531
                    length: 31
                  pos: 9517
                  length: 55
                pos: 9492
                length: 80
              - type: return_statement
                fields:
                  text: return iSavedState;
                children: []
                pos: 9581
                length: 19
              pos: 9482
              length: 124
          children: []
          pos: 9456
          length: 150
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: restoreState
              children: []
              pos: 9985
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object savedState
                children: []
                pos: 9998
                length: 17
              pos: 9970
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: savedState instanceof SavedState
                        children: []
                        pos: 10031
                        length: 32
                    children: []
                    pos: 10030
                    length: 34
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: "((SavedState) savedState).restoreState(this)"
                            children: []
                            pos: 10083
                            length: 44
                        children: []
                        pos: 10082
                        length: 46
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: iSavedState = savedState;
                        children: []
                        pos: 10147
                        length: 25
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 10189
                        length: 12
                      pos: 10129
                      length: 86
                    pos: 10079
                    length: 136
                  pos: 10065
                  length: 160
                pos: 10027
                length: 198
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 10234
                length: 13
              pos: 10017
              length: 236
          children: []
          pos: 9970
          length: 283
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeMillis
              children: []
              pos: 10548
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10536
              length: 78
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return computeMillis(false, null);
                children: []
                pos: 10574
                length: 34
              pos: 10564
              length: 50
          children: []
          pos: 10536
          length: 78
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeMillis
              children: []
              pos: 11001
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean resetFields
                children: []
                pos: 11015
                length: 19
              pos: 10989
              length: 103
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return computeMillis(resetFields, null);
                children: []
                pos: 11046
                length: 40
              pos: 11036
              length: 56
          children: []
          pos: 10989
          length: 103
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeMillis
              children: []
              pos: 11576
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean resetFields
                children: []
                pos: 11590
                length: 19
              pos: 11564
              length: 2070
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: SavedField[] savedFields = iSavedFields;
                children: []
                pos: 11634
                length: 40
              - type: local_variable_declaration
                fields:
                  text: int count = iSavedFieldsCount;
                children: []
                pos: 11683
                length: 30
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: iSavedFieldsShared
                        children: []
                        pos: 11726
                        length: 18
                    children: []
                    pos: 11725
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: iSavedFields = savedFields = (SavedField[])iSavedFields.clone();
                    children: []
                    pos: 11760
                    length: 64
                  - type: expression_statement
                    fields:
                      text: iSavedFieldsShared = false;
                    children: []
                    pos: 11837
                    length: 27
                  pos: 11746
                  length: 128
                pos: 11722
                length: 152
              - type: expression_statement
                fields:
                  text: sort(savedFields, count);
                children: []
                pos: 11883
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: count
                            children: []
                            pos: 11921
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11929
                            length: 1
                        children: []
                        pos: 11921
                        length: 9
                    children: []
                    pos: 11920
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: DurationField months = DurationFieldType.months().getField(iChrono);
                    children: []
                    pos: 12020
                    length: 68
                  - type: local_variable_declaration
                    fields:
                      text: DurationField days = DurationFieldType.days().getField(iChrono);
                    children: []
                    pos: 12101
                    length: 64
                  - type: local_variable_declaration
                    fields:
                      text: DurationField first = savedFields[0].iField.getDurationField();
                    children: []
                    pos: 12178
                    length: 63
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: greater_or_equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: compareReverse(first, months)
                                    children: []
                                    pos: 12258
                                    length: 29
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '0'
                                    children: []
                                    pos: 12291
                                    length: 1
                                children: []
                                pos: 12258
                                length: 34
                              right:
                                type: less_or_equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: compareReverse(first, days)
                                    children: []
                                    pos: 12296
                                    length: 27
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '0'
                                    children: []
                                    pos: 12327
                                    length: 1
                                children: []
                                pos: 12296
                                length: 32
                            children: []
                            pos: 12258
                            length: 70
                        children: []
                        pos: 12257
                        length: 72
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: saveField(DateTimeFieldType.year(), iDefaultYear);
                        children: []
                        pos: 12348
                        length: 50
                      - type: return_statement
                        fields:
                          text: return computeMillis(resetFields, text);
                        children: []
                        pos: 12415
                        length: 40
                      pos: 12330
                      length: 139
                    pos: 12254
                    length: 215
                  pos: 11932
                  length: 547
                pos: 11917
                length: 562
              - type: local_variable_declaration
                fields:
                  text: long millis = iMillis;
                children: []
                pos: 12489
                length: 22
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (int i = 0; i < count; i++) {
                                          millis = savedFields[i].set(millis, resetFields);
                                      }
                      children: []
                      pos: 12538
                      length: 113
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: resetFields
                              children: []
                              pos: 12668
                              length: 11
                          children: []
                          pos: 12667
                          length: 13
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: for_statement
                          fields:
                            text: |-
                              for (int i = 0; i < count; i++) {
                                                  millis = savedFields[i].set(millis, i == (count - 1));
                                              }
                          children: []
                          pos: 12699
                          length: 126
                        pos: 12681
                        length: 158
                      pos: 12664
                      length: 175
                    pos: 12524
                    length: 325
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IllegalFieldValueException e) {
                                      if (text != null) {
                                          e.prependMessage("Cannot parse \"" + text + '"');
                                      }
                                      throw e;
                                  }
                      children: []
                      pos: 12850
                      length: 181
                    pos: 12520
                    length: 511
                children: []
                pos: 12520
                length: 511
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: iZone
                            children: []
                            pos: 13053
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 13062
                            length: 4
                        children: []
                        pos: 13053
                        length: 13
                    children: []
                    pos: 13052
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: millis -= iOffset;
                    children: []
                    pos: 13082
                    length: 18
                  pos: 13068
                  length: 42
                pos: 13049
                length: 547
              - type: return_statement
                fields:
                  text: return millis;
                children: []
                pos: 13614
                length: 14
              pos: 11624
              length: 2010
          children: []
          pos: 11564
          length: 2070
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: sort
              children: []
              pos: 14705
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SavedField[] array
                children: []
                pos: 14710
                length: 18
              pos: 14685
              length: 432
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: high
                            children: []
                            pos: 14754
                            length: 4
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '10'
                            children: []
                            pos: 14761
                            length: 2
                        children: []
                        pos: 14754
                        length: 9
                    children: []
                    pos: 14753
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: Arrays.sort(array, 0, high);
                    children: []
                    pos: 14779
                    length: 28
                  pos: 14765
                  length: 52
                pos: 14750
                length: 361
              pos: 14740
              length: 377
          children: []
          pos: 14685
          length: 432
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: SavedState
              children: []
              pos: 15129
              length: 10
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final DateTimeZone iZone;
                children: []
                pos: 15150
                length: 25
              - type: field_declaration
                fields:
                  text: final int iOffset;
                children: []
                pos: 15184
                length: 18
              - type: field_declaration
                fields:
                  text: final SavedField[] iSavedFields;
                children: []
                pos: 15211
                length: 32
              - type: field_declaration
                fields:
                  text: final int iSavedFieldsCount;
                children: []
                pos: 15252
                length: 28
              - type: constructor_declaration
                fields:
                  text: |-
                    SavedState() {
                                this.iZone = DateTimeParserBucket.this.iZone;
                                this.iOffset = DateTimeParserBucket.this.iOffset;
                                this.iSavedFields = DateTimeParserBucket.this.iSavedFields;
                                this.iSavedFieldsCount = DateTimeParserBucket.this.iSavedFieldsCount;
                            }
                children: []
                pos: 15298
                length: 298
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: restoreState
                    children: []
                    pos: 15622
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DateTimeParserBucket enclosing
                      children: []
                      pos: 15635
                      length: 30
                    pos: 15614
                    length: 836
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enclosing
                                  children: []
                                  pos: 15685
                                  length: 9
                                right:
                                  type: field_access
                                  fields:
                                    text: DateTimeParserBucket.this
                                  children: []
                                  pos: 15698
                                  length: 25
                              children: []
                              pos: 15685
                              length: 38
                          children: []
                          pos: 15684
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 15743
                          length: 13
                        pos: 15725
                        length: 45
                      pos: 15681
                      length: 89
                    - type: expression_statement
                      fields:
                        text: enclosing.iZone = this.iZone;
                      children: []
                      pos: 15783
                      length: 29
                    - type: expression_statement
                      fields:
                        text: enclosing.iOffset = this.iOffset;
                      children: []
                      pos: 15825
                      length: 33
                    - type: expression_statement
                      fields:
                        text: enclosing.iSavedFields = this.iSavedFields;
                      children: []
                      pos: 15871
                      length: 43
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_than
                              fields:
                                left:
                                  type: field_access
                                  fields:
                                    text: this.iSavedFieldsCount
                                  children: []
                                  pos: 15931
                                  length: 22
                                right:
                                  type: field_access
                                  fields:
                                    text: enclosing.iSavedFieldsCount
                                  children: []
                                  pos: 15956
                                  length: 27
                              children: []
                              pos: 15931
                              length: 52
                          children: []
                          pos: 15930
                          length: 54
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: enclosing.iSavedFieldsShared = true;
                          children: []
                          pos: 16299
                          length: 36
                        pos: 15985
                        length: 364
                      pos: 15927
                      length: 422
                    - type: expression_statement
                      fields:
                        text: enclosing.iSavedFieldsCount = this.iSavedFieldsCount;
                      children: []
                      pos: 16362
                      length: 53
                    - type: return_statement
                      fields:
                        text: return true;
                      children: []
                      pos: 16428
                      length: 12
                    pos: 15667
                    length: 783
                children: []
                pos: 15614
                length: 836
              pos: 15123
              length: 1333
          children: []
          pos: 15123
          length: 1333
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: SavedField
              children: []
              pos: 16479
              length: 10
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final DateTimeField iField;
                children: []
                pos: 16534
                length: 27
              - type: field_declaration
                fields:
                  text: final int iValue;
                children: []
                pos: 16570
                length: 17
              - type: field_declaration
                fields:
                  text: final String iText;
                children: []
                pos: 16596
                length: 19
              - type: field_declaration
                fields:
                  text: final Locale iLocale;
                children: []
                pos: 16624
                length: 21
              - type: constructor_declaration
                fields:
                  text: |-
                    SavedField(DateTimeField field, int value) {
                                iField = field;
                                iValue = value;
                                iText = null;
                                iLocale = null;
                            }
                children: []
                pos: 16663
                length: 164
              - type: constructor_declaration
                fields:
                  text: |-
                    SavedField(DateTimeField field, String text, Locale locale) {
                                iField = field;
                                iValue = 0;
                                iText = text;
                                iLocale = locale;
                            }
                children: []
                pos: 16845
                length: 179
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: set
                    children: []
                    pos: 17047
                    length: 3
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: long millis
                      children: []
                      pos: 17051
                      length: 11
                    pos: 17042
                    length: 348
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: iText
                                  children: []
                                  pos: 17097
                                  length: 5
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 17106
                                  length: 4
                              children: []
                              pos: 17097
                              length: 13
                          children: []
                          pos: 17096
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: millis = iField.set(millis, iValue);
                          children: []
                          pos: 17130
                          length: 36
                        pos: 17112
                        length: 68
                      pos: 17093
                      length: 169
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: reset
                              children: []
                              pos: 17279
                              length: 5
                          children: []
                          pos: 17278
                          length: 7
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: millis = iField.roundFloor(millis);
                          children: []
                          pos: 17304
                          length: 35
                        pos: 17286
                        length: 67
                      pos: 17275
                      length: 78
                    - type: return_statement
                      fields:
                        text: return millis;
                      children: []
                      pos: 17366
                      length: 14
                    pos: 17079
                    length: 311
                children: []
                pos: 17042
                length: 348
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: compareTo
                    children: []
                    pos: 17649
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: SavedField obj
                      children: []
                      pos: 17659
                      length: 14
                    pos: 17638
                    length: 396
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: DateTimeField other = obj.iField;
                      children: []
                      pos: 17689
                      length: 33
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          int result = compareReverse
                                          (iField.getRangeDurationField(), other.getRangeDurationField());
                      children: []
                      pos: 17735
                      length: 108
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: result
                                  children: []
                                  pos: 17860
                                  length: 6
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '0'
                                  children: []
                                  pos: 17870
                                  length: 1
                              children: []
                              pos: 17860
                              length: 11
                          children: []
                          pos: 17859
                          length: 13
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return result;
                          children: []
                          pos: 17891
                          length: 14
                        pos: 17873
                        length: 46
                      pos: 17856
                      length: 63
                    - type: return_statement
                      fields:
                        text: |-
                          return compareReverse
                                          (iField.getDurationField(), other.getDurationField());
                      children: []
                      pos: 17932
                      length: 92
                    pos: 17675
                    length: 359
                children: []
                pos: 17638
                length: 396
              pos: 16466
              length: 1574
          children: []
          pos: 16466
          length: 1574
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareReverse
              children: []
              pos: 18057
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DurationField a
                children: []
                pos: 18072
                length: 15
              pos: 18046
              length: 343
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: a
                                children: []
                                pos: 18120
                                length: 1
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 18125
                                length: 4
                            children: []
                            pos: 18120
                            length: 9
                          right:
                            type: unary_expression
                            fields:
                              text: "!a.isSupported()"
                            children: []
                            pos: 18133
                            length: 16
                        children: []
                        pos: 18120
                        length: 29
                    children: []
                    pos: 18119
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: b
                                    children: []
                                    pos: 18169
                                    length: 1
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 18174
                                    length: 4
                                children: []
                                pos: 18169
                                length: 9
                              right:
                                type: unary_expression
                                fields:
                                  text: "!b.isSupported()"
                                children: []
                                pos: 18182
                                length: 16
                            children: []
                            pos: 18169
                            length: 29
                        children: []
                        pos: 18168
                        length: 31
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return 0;
                        children: []
                        pos: 18218
                        length: 9
                      pos: 18200
                      length: 41
                    pos: 18165
                    length: 76
                  - type: return_statement
                    fields:
                      text: return -1;
                    children: []
                    pos: 18254
                    length: 10
                  pos: 18151
                  length: 123
                pos: 18116
                length: 158
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: b
                                children: []
                                pos: 18287
                                length: 1
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 18292
                                length: 4
                            children: []
                            pos: 18287
                            length: 9
                          right:
                            type: unary_expression
                            fields:
                              text: "!b.isSupported()"
                            children: []
                            pos: 18300
                            length: 16
                        children: []
                        pos: 18287
                        length: 29
                    children: []
                    pos: 18286
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 1;
                    children: []
                    pos: 18332
                    length: 9
                  pos: 18318
                  length: 33
                pos: 18283
                length: 68
              - type: return_statement
                fields:
                  text: return -a.compareTo(b);
                children: []
                pos: 18360
                length: 23
              pos: 18106
              length: 283
          children: []
          pos: 18046
          length: 343
        pos: 2159
        length: 16232
    children: []
    pos: 2159
    length: 16232
  pos: 0
  length: 18392
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DateTimeParserBucket
        children: []
        pos: 2172
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final Chronology iChrono;
          children: []
          pos: 2246
          length: 33
        - type: field_declaration
          fields:
            text: private final long iMillis;
          children: []
          pos: 2284
          length: 27
        - type: field_declaration
          fields:
            text: private DateTimeZone iZone;
          children: []
          pos: 2389
          length: 27
        - type: field_declaration
          fields:
            text: private int iOffset;
          children: []
          pos: 2421
          length: 20
        - type: field_declaration
          fields:
            text: private Locale iLocale;
          children: []
          pos: 2488
          length: 23
        - type: field_declaration
          fields:
            text: private Integer iPivotYear;
          children: []
          pos: 2561
          length: 27
        - type: field_declaration
          fields:
            text: private int iDefaultYear;
          children: []
          pos: 2645
          length: 25
        - type: field_declaration
          fields:
            text: private SavedField[] iSavedFields = new SavedField[8];
          children: []
          pos: 2676
          length: 54
        - type: field_declaration
          fields:
            text: private int iSavedFieldsCount;
          children: []
          pos: 2735
          length: 30
        - type: field_declaration
          fields:
            text: private boolean iSavedFieldsShared;
          children: []
          pos: 2770
          length: 35
        - type: field_declaration
          fields:
            text: private Object iSavedState;
          children: []
          pos: 2815
          length: 27
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated
                  public DateTimeParserBucket(long instantLocal, Chronology chrono, Locale locale) {
                      this(instantLocal, chrono, locale, null, 2000);
                  }
          children: []
          pos: 3110
          length: 160
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated
                  public DateTimeParserBucket(long instantLocal, Chronology chrono, Locale locale, Integer pivotYear) {
                      this(instantLocal, chrono, locale, pivotYear, 2000);
                  }
          children: []
          pos: 3711
          length: 184
        - type: constructor_declaration
          fields:
            text: |-
              public DateTimeParserBucket(long instantLocal, Chronology chrono,
                          Locale locale, Integer pivotYear, int defaultYear) {
                      super();
                      chrono = DateTimeUtils.getChronology(chrono);
                      iMillis = instantLocal;
                      iChrono = chrono.withUTC();
                      iLocale = (locale == null ? Locale.getDefault() : locale);
                      setZone(chrono.getZone());
                      iPivotYear = pivotYear;
                      iDefaultYear = defaultYear;
                  }
          children: []
          pos: 4294
          length: 445
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getChronology
              children: []
              pos: 4939
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4921
              length: 65
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iChrono;
                children: []
                pos: 4965
                length: 15
              pos: 4955
              length: 31
          children: []
          pos: 4921
          length: 65
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocale
              children: []
              pos: 5194
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5180
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iLocale;
                children: []
                pos: 5216
                length: 15
              pos: 5206
              length: 31
          children: []
          pos: 5180
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getZone
              children: []
              pos: 5454
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5434
              length: 59
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iZone;
                children: []
                pos: 5474
                length: 13
              pos: 5464
              length: 29
          children: []
          pos: 5434
          length: 59
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setZone
              children: []
              pos: 5719
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeZone zone
                children: []
                pos: 5727
                length: 17
              pos: 5707
              length: 151
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: iSavedState = null;
                children: []
                pos: 5756
                length: 19
              - type: expression_statement
                fields:
                  text: 'iZone = zone == DateTimeZone.UTC ? null : zone;'
                children: []
                pos: 5784
                length: 47
              - type: expression_statement
                fields:
                  text: iOffset = 0;
                children: []
                pos: 5840
                length: 12
              pos: 5746
              length: 112
          children: []
          pos: 5707
          length: 151
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOffset
              children: []
              pos: 6091
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6080
              length: 54
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iOffset;
                children: []
                pos: 6113
                length: 15
              pos: 6103
              length: 31
          children: []
          pos: 6080
          length: 54
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setOffset
              children: []
              pos: 6281
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int offset
                children: []
                pos: 6291
                length: 10
              pos: 6269
              length: 117
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: iSavedState = null;
                children: []
                pos: 6313
                length: 19
              - type: expression_statement
                fields:
                  text: iOffset = offset;
                children: []
                pos: 6341
                length: 17
              - type: expression_statement
                fields:
                  text: iZone = null;
                children: []
                pos: 6367
                length: 13
              pos: 6303
              length: 83
          children: []
          pos: 6269
          length: 117
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPivotYear
              children: []
              pos: 6965
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6950
              length: 64
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return iPivotYear;
                children: []
                pos: 6990
                length: 18
              pos: 6980
              length: 34
          children: []
          pos: 6950
          length: 64
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setPivotYear
              children: []
              pos: 7296
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Integer pivotYear
                children: []
                pos: 7309
                length: 17
              pos: 7284
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: iPivotYear = pivotYear;
                children: []
                pos: 7338
                length: 23
              pos: 7328
              length: 39
          children: []
          pos: 7284
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 7635
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeField field
                children: []
                pos: 7645
                length: 19
              pos: 7623
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: saveField(new SavedField(field, value));
                children: []
                pos: 7687
                length: 40
              pos: 7677
              length: 56
          children: []
          pos: 7623
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 7887
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeFieldType fieldType
                children: []
                pos: 7897
                length: 27
              pos: 7875
              length: 140
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: saveField(new SavedField(fieldType.getField(iChrono), value));
                children: []
                pos: 7947
                length: 62
              pos: 7937
              length: 78
          children: []
          pos: 7875
          length: 140
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 8218
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DateTimeFieldType fieldType
                children: []
                pos: 8228
                length: 27
              pos: 8206
              length: 164
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: saveField(new SavedField(fieldType.getField(iChrono), text,
                    locale));
                children: []
                pos: 8295
                length: 69
              pos: 8285
              length: 85
          children: []
          pos: 8206
          length: 164
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveField
              children: []
              pos: 8393
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SavedField field
                children: []
                pos: 8403
                length: 16
              pos: 8380
              length: 771
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: SavedField[] savedFields = iSavedFields;
                children: []
                pos: 8431
                length: 40
              - type: local_variable_declaration
                fields:
                  text: int savedFieldsCount = iSavedFieldsCount;
                children: []
                pos: 8480
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: savedFieldsCount
                                children: []
                                pos: 8543
                                length: 16
                              right:
                                type: field_access
                                fields:
                                  text: savedFields.length
                                children: []
                                pos: 8563
                                length: 18
                            children: []
                            pos: 8543
                            length: 38
                          right:
                            type: identifier
                            fields:
                              text: iSavedFieldsShared
                            children: []
                            pos: 8585
                            length: 18
                        children: []
                        pos: 8543
                        length: 60
                    children: []
                    pos: 8542
                    length: 62
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: |-
                        SavedField[] newArray = new SavedField
                                        [savedFieldsCount == savedFields.length ? savedFieldsCount * 2 : savedFields.length];
                    children: []
                    pos: 8693
                    length: 140
                  - type: expression_statement
                    fields:
                      text: System.arraycopy(savedFields, 0, newArray, 0, savedFieldsCount);
                    children: []
                    pos: 8846
                    length: 64
                  - type: expression_statement
                    fields:
                      text: iSavedFields = savedFields = newArray;
                    children: []
                    pos: 8923
                    length: 38
                  - type: expression_statement
                    fields:
                      text: iSavedFieldsShared = false;
                    children: []
                    pos: 8974
                    length: 27
                  pos: 8605
                  length: 406
                pos: 8539
                length: 472
              - type: expression_statement
                fields:
                  text: iSavedState = null;
                children: []
                pos: 9029
                length: 19
              - type: expression_statement
                fields:
                  text: savedFields[savedFieldsCount] = field;
                children: []
                pos: 9057
                length: 38
              - type: expression_statement
                fields:
                  text: iSavedFieldsCount = savedFieldsCount + 1;
                children: []
                pos: 9104
                length: 41
              pos: 8421
              length: 730
          children: []
          pos: 8380
          length: 771
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: saveState
              children: []
              pos: 9470
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9456
              length: 150
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: iSavedState
                            children: []
                            pos: 9496
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9511
                            length: 4
                        children: []
                        pos: 9496
                        length: 19
                    children: []
                    pos: 9495
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: iSavedState = new SavedState();
                    children: []
                    pos: 9531
                    length: 31
                  pos: 9517
                  length: 55
                pos: 9492
                length: 80
              - type: return_statement
                fields:
                  text: return iSavedState;
                children: []
                pos: 9581
                length: 19
              pos: 9482
              length: 124
          children: []
          pos: 9456
          length: 150
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: restoreState
              children: []
              pos: 9985
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object savedState
                children: []
                pos: 9998
                length: 17
              pos: 9970
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: savedState instanceof SavedState
                        children: []
                        pos: 10031
                        length: 32
                    children: []
                    pos: 10030
                    length: 34
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: "((SavedState) savedState).restoreState(this)"
                            children: []
                            pos: 10083
                            length: 44
                        children: []
                        pos: 10082
                        length: 46
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: iSavedState = savedState;
                        children: []
                        pos: 10147
                        length: 25
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 10189
                        length: 12
                      pos: 10129
                      length: 86
                    pos: 10079
                    length: 136
                  pos: 10065
                  length: 160
                pos: 10027
                length: 198
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 10234
                length: 13
              pos: 10017
              length: 236
          children: []
          pos: 9970
          length: 283
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeMillis
              children: []
              pos: 10548
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10536
              length: 78
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return computeMillis(false, null);
                children: []
                pos: 10574
                length: 34
              pos: 10564
              length: 50
          children: []
          pos: 10536
          length: 78
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeMillis
              children: []
              pos: 11001
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean resetFields
                children: []
                pos: 11015
                length: 19
              pos: 10989
              length: 103
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return computeMillis(resetFields, null);
                children: []
                pos: 11046
                length: 40
              pos: 11036
              length: 56
          children: []
          pos: 10989
          length: 103
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeMillis
              children: []
              pos: 11576
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean resetFields
                children: []
                pos: 11590
                length: 19
              pos: 11564
              length: 1882
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: SavedField[] savedFields = iSavedFields;
                children: []
                pos: 11634
                length: 40
              - type: local_variable_declaration
                fields:
                  text: int count = iSavedFieldsCount;
                children: []
                pos: 11683
                length: 30
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: iSavedFieldsShared
                        children: []
                        pos: 11726
                        length: 18
                    children: []
                    pos: 11725
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: iSavedFields = savedFields = (SavedField[])iSavedFields.clone();
                    children: []
                    pos: 11760
                    length: 64
                  - type: expression_statement
                    fields:
                      text: iSavedFieldsShared = false;
                    children: []
                    pos: 11837
                    length: 27
                  pos: 11746
                  length: 128
                pos: 11722
                length: 152
              - type: expression_statement
                fields:
                  text: sort(savedFields, count);
                children: []
                pos: 11883
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: count
                            children: []
                            pos: 11921
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11929
                            length: 1
                        children: []
                        pos: 11921
                        length: 9
                    children: []
                    pos: 11920
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: DurationField months = DurationFieldType.months().getField(iChrono);
                    children: []
                    pos: 12020
                    length: 68
                  - type: local_variable_declaration
                    fields:
                      text: DurationField days = DurationFieldType.days().getField(iChrono);
                    children: []
                    pos: 12101
                    length: 64
                  - type: local_variable_declaration
                    fields:
                      text: DurationField first = savedFields[0].iField.getDurationField();
                    children: []
                    pos: 12178
                    length: 63
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: greater_or_equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: compareReverse(first, months)
                                    children: []
                                    pos: 12258
                                    length: 29
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '0'
                                    children: []
                                    pos: 12291
                                    length: 1
                                children: []
                                pos: 12258
                                length: 34
                              right:
                                type: less_or_equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: compareReverse(first, days)
                                    children: []
                                    pos: 12296
                                    length: 27
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '0'
                                    children: []
                                    pos: 12327
                                    length: 1
                                children: []
                                pos: 12296
                                length: 32
                            children: []
                            pos: 12258
                            length: 70
                        children: []
                        pos: 12257
                        length: 72
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: saveField(DateTimeFieldType.year(), iDefaultYear);
                        children: []
                        pos: 12348
                        length: 50
                      - type: return_statement
                        fields:
                          text: return computeMillis(resetFields, text);
                        children: []
                        pos: 12415
                        length: 40
                      pos: 12330
                      length: 139
                    pos: 12254
                    length: 215
                  pos: 11932
                  length: 547
                pos: 11917
                length: 562
              - type: local_variable_declaration
                fields:
                  text: long millis = iMillis;
                children: []
                pos: 12489
                length: 22
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (int i = 0; i < count; i++) {
                                          millis = savedFields[i].set(millis, resetFields);
                                      }
                      children: []
                      pos: 12538
                      length: 113
                    pos: 12524
                    length: 137
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IllegalFieldValueException e) {
                                      if (text != null) {
                                          e.prependMessage("Cannot parse \"" + text + '"');
                                      }
                                      throw e;
                                  }
                      children: []
                      pos: 12662
                      length: 181
                    pos: 12520
                    length: 323
                children: []
                pos: 12520
                length: 323
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: iZone
                            children: []
                            pos: 12865
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12874
                            length: 4
                        children: []
                        pos: 12865
                        length: 13
                    children: []
                    pos: 12864
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: millis -= iOffset;
                    children: []
                    pos: 12894
                    length: 18
                  pos: 12880
                  length: 42
                pos: 12861
                length: 547
              - type: return_statement
                fields:
                  text: return millis;
                children: []
                pos: 13426
                length: 14
              pos: 11624
              length: 1822
          children: []
          pos: 11564
          length: 1882
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: sort
              children: []
              pos: 14517
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SavedField[] array
                children: []
                pos: 14522
                length: 18
              pos: 14497
              length: 432
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: high
                            children: []
                            pos: 14566
                            length: 4
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '10'
                            children: []
                            pos: 14573
                            length: 2
                        children: []
                        pos: 14566
                        length: 9
                    children: []
                    pos: 14565
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: Arrays.sort(array, 0, high);
                    children: []
                    pos: 14591
                    length: 28
                  pos: 14577
                  length: 52
                pos: 14562
                length: 361
              pos: 14552
              length: 377
          children: []
          pos: 14497
          length: 432
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: SavedState
              children: []
              pos: 14941
              length: 10
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final DateTimeZone iZone;
                children: []
                pos: 14962
                length: 25
              - type: field_declaration
                fields:
                  text: final int iOffset;
                children: []
                pos: 14996
                length: 18
              - type: field_declaration
                fields:
                  text: final SavedField[] iSavedFields;
                children: []
                pos: 15023
                length: 32
              - type: field_declaration
                fields:
                  text: final int iSavedFieldsCount;
                children: []
                pos: 15064
                length: 28
              - type: constructor_declaration
                fields:
                  text: |-
                    SavedState() {
                                this.iZone = DateTimeParserBucket.this.iZone;
                                this.iOffset = DateTimeParserBucket.this.iOffset;
                                this.iSavedFields = DateTimeParserBucket.this.iSavedFields;
                                this.iSavedFieldsCount = DateTimeParserBucket.this.iSavedFieldsCount;
                            }
                children: []
                pos: 15110
                length: 298
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: restoreState
                    children: []
                    pos: 15434
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DateTimeParserBucket enclosing
                      children: []
                      pos: 15447
                      length: 30
                    pos: 15426
                    length: 836
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enclosing
                                  children: []
                                  pos: 15497
                                  length: 9
                                right:
                                  type: field_access
                                  fields:
                                    text: DateTimeParserBucket.this
                                  children: []
                                  pos: 15510
                                  length: 25
                              children: []
                              pos: 15497
                              length: 38
                          children: []
                          pos: 15496
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 15555
                          length: 13
                        pos: 15537
                        length: 45
                      pos: 15493
                      length: 89
                    - type: expression_statement
                      fields:
                        text: enclosing.iZone = this.iZone;
                      children: []
                      pos: 15595
                      length: 29
                    - type: expression_statement
                      fields:
                        text: enclosing.iOffset = this.iOffset;
                      children: []
                      pos: 15637
                      length: 33
                    - type: expression_statement
                      fields:
                        text: enclosing.iSavedFields = this.iSavedFields;
                      children: []
                      pos: 15683
                      length: 43
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_than
                              fields:
                                left:
                                  type: field_access
                                  fields:
                                    text: this.iSavedFieldsCount
                                  children: []
                                  pos: 15743
                                  length: 22
                                right:
                                  type: field_access
                                  fields:
                                    text: enclosing.iSavedFieldsCount
                                  children: []
                                  pos: 15768
                                  length: 27
                              children: []
                              pos: 15743
                              length: 52
                          children: []
                          pos: 15742
                          length: 54
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: enclosing.iSavedFieldsShared = true;
                          children: []
                          pos: 16111
                          length: 36
                        pos: 15797
                        length: 364
                      pos: 15739
                      length: 422
                    - type: expression_statement
                      fields:
                        text: enclosing.iSavedFieldsCount = this.iSavedFieldsCount;
                      children: []
                      pos: 16174
                      length: 53
                    - type: return_statement
                      fields:
                        text: return true;
                      children: []
                      pos: 16240
                      length: 12
                    pos: 15479
                    length: 783
                children: []
                pos: 15426
                length: 836
              pos: 14935
              length: 1333
          children: []
          pos: 14935
          length: 1333
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: SavedField
              children: []
              pos: 16291
              length: 10
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final DateTimeField iField;
                children: []
                pos: 16346
                length: 27
              - type: field_declaration
                fields:
                  text: final int iValue;
                children: []
                pos: 16382
                length: 17
              - type: field_declaration
                fields:
                  text: final String iText;
                children: []
                pos: 16408
                length: 19
              - type: field_declaration
                fields:
                  text: final Locale iLocale;
                children: []
                pos: 16436
                length: 21
              - type: constructor_declaration
                fields:
                  text: |-
                    SavedField(DateTimeField field, int value) {
                                iField = field;
                                iValue = value;
                                iText = null;
                                iLocale = null;
                            }
                children: []
                pos: 16475
                length: 164
              - type: constructor_declaration
                fields:
                  text: |-
                    SavedField(DateTimeField field, String text, Locale locale) {
                                iField = field;
                                iValue = 0;
                                iText = text;
                                iLocale = locale;
                            }
                children: []
                pos: 16657
                length: 179
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: set
                    children: []
                    pos: 16859
                    length: 3
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: long millis
                      children: []
                      pos: 16863
                      length: 11
                    pos: 16854
                    length: 348
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: iText
                                  children: []
                                  pos: 16909
                                  length: 5
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 16918
                                  length: 4
                              children: []
                              pos: 16909
                              length: 13
                          children: []
                          pos: 16908
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: millis = iField.set(millis, iValue);
                          children: []
                          pos: 16942
                          length: 36
                        pos: 16924
                        length: 68
                      pos: 16905
                      length: 169
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: reset
                              children: []
                              pos: 17091
                              length: 5
                          children: []
                          pos: 17090
                          length: 7
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: millis = iField.roundFloor(millis);
                          children: []
                          pos: 17116
                          length: 35
                        pos: 17098
                        length: 67
                      pos: 17087
                      length: 78
                    - type: return_statement
                      fields:
                        text: return millis;
                      children: []
                      pos: 17178
                      length: 14
                    pos: 16891
                    length: 311
                children: []
                pos: 16854
                length: 348
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: compareTo
                    children: []
                    pos: 17461
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: SavedField obj
                      children: []
                      pos: 17471
                      length: 14
                    pos: 17450
                    length: 396
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: DateTimeField other = obj.iField;
                      children: []
                      pos: 17501
                      length: 33
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          int result = compareReverse
                                          (iField.getRangeDurationField(), other.getRangeDurationField());
                      children: []
                      pos: 17547
                      length: 108
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: result
                                  children: []
                                  pos: 17672
                                  length: 6
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '0'
                                  children: []
                                  pos: 17682
                                  length: 1
                              children: []
                              pos: 17672
                              length: 11
                          children: []
                          pos: 17671
                          length: 13
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return result;
                          children: []
                          pos: 17703
                          length: 14
                        pos: 17685
                        length: 46
                      pos: 17668
                      length: 63
                    - type: return_statement
                      fields:
                        text: |-
                          return compareReverse
                                          (iField.getDurationField(), other.getDurationField());
                      children: []
                      pos: 17744
                      length: 92
                    pos: 17487
                    length: 359
                children: []
                pos: 17450
                length: 396
              pos: 16278
              length: 1574
          children: []
          pos: 16278
          length: 1574
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareReverse
              children: []
              pos: 17869
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DurationField a
                children: []
                pos: 17884
                length: 15
              pos: 17858
              length: 343
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: a
                                children: []
                                pos: 17932
                                length: 1
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 17937
                                length: 4
                            children: []
                            pos: 17932
                            length: 9
                          right:
                            type: unary_expression
                            fields:
                              text: "!a.isSupported()"
                            children: []
                            pos: 17945
                            length: 16
                        children: []
                        pos: 17932
                        length: 29
                    children: []
                    pos: 17931
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: b
                                    children: []
                                    pos: 17981
                                    length: 1
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 17986
                                    length: 4
                                children: []
                                pos: 17981
                                length: 9
                              right:
                                type: unary_expression
                                fields:
                                  text: "!b.isSupported()"
                                children: []
                                pos: 17994
                                length: 16
                            children: []
                            pos: 17981
                            length: 29
                        children: []
                        pos: 17980
                        length: 31
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return 0;
                        children: []
                        pos: 18030
                        length: 9
                      pos: 18012
                      length: 41
                    pos: 17977
                    length: 76
                  - type: return_statement
                    fields:
                      text: return -1;
                    children: []
                    pos: 18066
                    length: 10
                  pos: 17963
                  length: 123
                pos: 17928
                length: 158
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: b
                                children: []
                                pos: 18099
                                length: 1
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 18104
                                length: 4
                            children: []
                            pos: 18099
                            length: 9
                          right:
                            type: unary_expression
                            fields:
                              text: "!b.isSupported()"
                            children: []
                            pos: 18112
                            length: 16
                        children: []
                        pos: 18099
                        length: 29
                    children: []
                    pos: 18098
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 1;
                    children: []
                    pos: 18144
                    length: 9
                  pos: 18130
                  length: 33
                pos: 18095
                length: 68
              - type: return_statement
                fields:
                  text: return -a.compareTo(b);
                children: []
                pos: 18172
                length: 23
              pos: 17918
              length: 283
          children: []
          pos: 17858
          length: 343
        pos: 2159
        length: 16044
    children: []
    pos: 2159
    length: 16044
  pos: 0
  length: 18204
text_diff: |
  --- before
  +++ after
  @@ -352,11 +352,6 @@
               for (int i = 0; i < count; i++) {
                   millis = savedFields[i].set(millis, resetFields);
               }
  -            if (resetFields) {
  -                for (int i = 0; i < count; i++) {
  -                    millis = savedFields[i].set(millis, i == (count - 1));
  -                }
  -            }
           } catch (IllegalFieldValueException e) {
               if (text != null) {
                   e.prependMessage("Cannot parse \"" + text + '"');
tree_diff: |+
  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [12664,12839]
      parenthesized_expression [12667,12680]
          identifier: resetFields [12668,12679]
      block [12681,12839]
          for_statement: for (int i = 0; i < count; i++) {
                      millis = savedFields[i].set(millis, i == (count - 1));
                  } [12699,12825]

...
