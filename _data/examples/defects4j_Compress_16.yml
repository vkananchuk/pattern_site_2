---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ArchiveStreamFactory
        children: []
        pos: 3043
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: public static final String AR = "ar";
          children: []
          pos: 3178
          length: 37
        - type: field_declaration
          fields:
            text: public static final String CPIO = "cpio";
          children: []
          pos: 3329
          length: 41
        - type: field_declaration
          fields:
            text: public static final String DUMP = "dump";
          children: []
          pos: 3489
          length: 41
        - type: field_declaration
          fields:
            text: public static final String JAR = "jar";
          children: []
          pos: 3643
          length: 39
        - type: field_declaration
          fields:
            text: public static final String TAR = "tar";
          children: []
          pos: 3795
          length: 39
        - type: field_declaration
          fields:
            text: public static final String ZIP = "zip";
          children: []
          pos: 3947
          length: 39
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveInputStream
              children: []
              pos: 4436
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String archiverName
                children: []
                pos: 4474
                length: 25
              pos: 4410
              length: 1148
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: archiverName
                            children: []
                            pos: 4574
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4590
                            length: 4
                        children: []
                        pos: 4574
                        length: 20
                    children: []
                    pos: 4573
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Archivername must
                        not be null.");
                    children: []
                    pos: 4610
                    length: 69
                  pos: 4596
                  length: 93
                pos: 4570
                length: 119
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: in
                            children: []
                            pos: 4703
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4709
                            length: 4
                        children: []
                        pos: 4703
                        length: 10
                    children: []
                    pos: 4702
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("InputStream must not
                        be null.");
                    children: []
                    pos: 4729
                    length: 68
                  pos: 4715
                  length: 92
                pos: 4699
                length: 108
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: AR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 4821
                        length: 33
                    children: []
                    pos: 4820
                    length: 35
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ArArchiveInputStream(in);
                    children: []
                    pos: 4870
                    length: 36
                  pos: 4856
                  length: 60
                pos: 4817
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: ZIP.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 4929
                        length: 34
                    children: []
                    pos: 4928
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ZipArchiveInputStream(in);
                    children: []
                    pos: 4979
                    length: 37
                  pos: 4965
                  length: 61
                pos: 4925
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: TAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5039
                        length: 34
                    children: []
                    pos: 5038
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new TarArchiveInputStream(in);
                    children: []
                    pos: 5089
                    length: 37
                  pos: 5075
                  length: 61
                pos: 5035
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: JAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5149
                        length: 34
                    children: []
                    pos: 5148
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new JarArchiveInputStream(in);
                    children: []
                    pos: 5199
                    length: 37
                  pos: 5185
                  length: 61
                pos: 5145
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: CPIO.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5259
                        length: 35
                    children: []
                    pos: 5258
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new CpioArchiveInputStream(in);
                    children: []
                    pos: 5310
                    length: 38
                  pos: 5296
                  length: 62
                pos: 5255
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: DUMP.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5371
                        length: 35
                    children: []
                    pos: 5370
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new DumpArchiveInputStream(in);
                    children: []
                    pos: 5422
                    length: 38
                  pos: 5408
                  length: 62
                pos: 5367
                length: 103
              - type: throw_statement
                fields:
                  text: 'throw new ArchiveException("Archiver: " + archiverName +
                    " not found.");'
                children: []
                pos: 5480
                length: 72
              pos: 4559
              length: 999
          children: []
          pos: 4410
          length: 1148
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveOutputStream
              children: []
              pos: 6005
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String archiverName
                children: []
                pos: 6044
                length: 25
              pos: 5978
              length: 1049
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: archiverName
                            children: []
                            pos: 6145
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6161
                            length: 4
                        children: []
                        pos: 6145
                        length: 20
                    children: []
                    pos: 6144
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Archivername must
                        not be null.");
                    children: []
                    pos: 6181
                    length: 69
                  pos: 6167
                  length: 93
                pos: 6141
                length: 119
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: out
                            children: []
                            pos: 6273
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6280
                            length: 4
                        children: []
                        pos: 6273
                        length: 11
                    children: []
                    pos: 6272
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("OutputStream must
                        not be null.");
                    children: []
                    pos: 6300
                    length: 69
                  pos: 6286
                  length: 93
                pos: 6269
                length: 110
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: AR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6393
                        length: 33
                    children: []
                    pos: 6392
                    length: 35
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ArArchiveOutputStream(out);
                    children: []
                    pos: 6442
                    length: 38
                  pos: 6428
                  length: 62
                pos: 6389
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: ZIP.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6503
                        length: 34
                    children: []
                    pos: 6502
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ZipArchiveOutputStream(out);
                    children: []
                    pos: 6553
                    length: 39
                  pos: 6539
                  length: 63
                pos: 6499
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: TAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6615
                        length: 34
                    children: []
                    pos: 6614
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new TarArchiveOutputStream(out);
                    children: []
                    pos: 6665
                    length: 39
                  pos: 6651
                  length: 63
                pos: 6611
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: JAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6727
                        length: 34
                    children: []
                    pos: 6726
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new JarArchiveOutputStream(out);
                    children: []
                    pos: 6777
                    length: 39
                  pos: 6763
                  length: 63
                pos: 6723
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: CPIO.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6839
                        length: 35
                    children: []
                    pos: 6838
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new CpioArchiveOutputStream(out);
                    children: []
                    pos: 6890
                    length: 40
                  pos: 6876
                  length: 64
                pos: 6835
                length: 105
              - type: throw_statement
                fields:
                  text: 'throw new ArchiveException("Archiver: " + archiverName +
                    " not found.");'
                children: []
                pos: 6949
                length: 72
              pos: 6131
              length: 896
          children: []
          pos: 5978
          length: 1049
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveInputStream
              children: []
              pos: 7517
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final InputStream in
                children: []
                pos: 7542
                length: 20
              pos: 7491
              length: 2789
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: in
                            children: []
                            pos: 7614
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7620
                            length: 4
                        children: []
                        pos: 7614
                        length: 10
                    children: []
                    pos: 7613
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Stream must not be
                        null.");
                    children: []
                    pos: 7640
                    length: 63
                  pos: 7626
                  length: 87
                pos: 7610
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!in.markSupported()"
                        children: []
                        pos: 7727
                        length: 19
                    children: []
                    pos: 7726
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Mark is not supported.");
                    children: []
                    pos: 7762
                    length: 61
                  pos: 7748
                  length: 85
                pos: 7723
                length: 110
              - type: local_variable_declaration
                fields:
                  text: final byte[] signature = new byte[12];
                children: []
                pos: 7843
                length: 38
              - type: expression_statement
                fields:
                  text: in.mark(signature.length);
                children: []
                pos: 7890
                length: 26
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: int signatureLength = in.read(signature);
                      children: []
                      pos: 7943
                      length: 41
                    - type: expression_statement
                      fields:
                        text: in.reset();
                      children: []
                      pos: 7997
                      length: 11
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: ZipArchiveInputStream.matches(signature, signatureLength)
                              children: []
                              pos: 8025
                              length: 57
                          children: []
                          pos: 8024
                          length: 59
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return new ZipArchiveInputStream(in);
                          children: []
                          pos: 8102
                          length: 37
                        pos: 8084
                        length: 69
                      pos: 8021
                      length: 546
                    - type: local_variable_declaration
                      fields:
                        text: final byte[] dumpsig = new byte[32];
                      children: []
                      pos: 8647
                      length: 36
                    - type: expression_statement
                      fields:
                        text: in.mark(dumpsig.length);
                      children: []
                      pos: 8696
                      length: 24
                    - type: expression_statement
                      fields:
                        text: signatureLength = in.read(dumpsig);
                      children: []
                      pos: 8733
                      length: 35
                    - type: expression_statement
                      fields:
                        text: in.reset();
                      children: []
                      pos: 8781
                      length: 11
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: DumpArchiveInputStream.matches(dumpsig, signatureLength)
                              children: []
                              pos: 8809
                              length: 56
                          children: []
                          pos: 8808
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return new DumpArchiveInputStream(in);
                          children: []
                          pos: 8885
                          length: 38
                        pos: 8867
                        length: 70
                      pos: 8805
                      length: 132
                    - type: local_variable_declaration
                      fields:
                        text: final byte[] tarheader = new byte[512];
                      children: []
                      pos: 9043
                      length: 39
                    - type: expression_statement
                      fields:
                        text: in.mark(tarheader.length);
                      children: []
                      pos: 9095
                      length: 26
                    - type: expression_statement
                      fields:
                        text: signatureLength = in.read(tarheader);
                      children: []
                      pos: 9134
                      length: 37
                    - type: expression_statement
                      fields:
                        text: in.reset();
                      children: []
                      pos: 9184
                      length: 11
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: TarArchiveInputStream.matches(tarheader, signatureLength)
                              children: []
                              pos: 9212
                              length: 57
                          children: []
                          pos: 9211
                          length: 59
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return new TarArchiveInputStream(in);
                          children: []
                          pos: 9289
                          length: 37
                        pos: 9271
                        length: 69
                      pos: 9208
                      length: 132
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: greater_or_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: signatureLength
                                  children: []
                                  pos: 9412
                                  length: 15
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '512'
                                  children: []
                                  pos: 9431
                                  length: 3
                              children: []
                              pos: 9412
                              length: 22
                          children: []
                          pos: 9411
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: try_statement
                          fields:
                            body:
                              type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: TarArchiveInputStream tais = new TarArchiveInputStream(new
                                    ByteArrayInputStream(tarheader));
                                children: []
                                pos: 9480
                                length: 92
                              - type: if_statement
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: tais.getNextTarEntry().isCheckSumOK()
                                        children: []
                                        pos: 9662
                                        length: 37
                                    children: []
                                    pos: 9661
                                    length: 39
                                children:
                                - type: block
                                  fields: {}
                                  children:
                                  - type: return_statement
                                    fields:
                                      text: return new TarArchiveInputStream(in);
                                    children: []
                                    pos: 9727
                                    length: 37
                                  pos: 9701
                                  length: 85
                                pos: 9658
                                length: 128
                              pos: 9458
                              length: 346
                            excepts:
                              type: excepts
                              fields: {}
                              children:
                              - type: catch_clause
                                fields:
                                  text: |-
                                    catch (Exception e) { // NOPMD
                                                        // can generate IllegalArgumentException as well
                                                        // as IOException
                                                        // autodetection, simply not a TAR
                                                        // ignored
                                                    }
                                children: []
                                pos: 9805
                                length: 241
                              pos: 9454
                              length: 592
                          children: []
                          pos: 9454
                          length: 592
                        pos: 9436
                        length: 624
                      pos: 9408
                      length: 652
                    pos: 7929
                    length: 2141
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IOException e) {
                                      throw new ArchiveException("Could not use reset and mark operations.", e);
                                  }
                      children: []
                      pos: 10071
                      length: 120
                    pos: 7925
                    length: 2266
                children: []
                pos: 7925
                length: 2266
              - type: throw_statement
                fields:
                  text: throw new ArchiveException("No Archiver found for the stream
                    signature");
                children: []
                pos: 10201
                length: 73
              pos: 7600
              length: 2680
          children: []
          pos: 7491
          length: 2789
        pos: 3030
        length: 7252
    children: []
    pos: 3030
    length: 7252
  pos: 0
  length: 10283
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ArchiveStreamFactory
        children: []
        pos: 3043
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: public static final String AR = "ar";
          children: []
          pos: 3178
          length: 37
        - type: field_declaration
          fields:
            text: public static final String CPIO = "cpio";
          children: []
          pos: 3329
          length: 41
        - type: field_declaration
          fields:
            text: public static final String DUMP = "dump";
          children: []
          pos: 3489
          length: 41
        - type: field_declaration
          fields:
            text: public static final String JAR = "jar";
          children: []
          pos: 3643
          length: 39
        - type: field_declaration
          fields:
            text: public static final String TAR = "tar";
          children: []
          pos: 3795
          length: 39
        - type: field_declaration
          fields:
            text: public static final String ZIP = "zip";
          children: []
          pos: 3947
          length: 39
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveInputStream
              children: []
              pos: 4436
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String archiverName
                children: []
                pos: 4474
                length: 25
              pos: 4410
              length: 1148
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: archiverName
                            children: []
                            pos: 4574
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4590
                            length: 4
                        children: []
                        pos: 4574
                        length: 20
                    children: []
                    pos: 4573
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Archivername must
                        not be null.");
                    children: []
                    pos: 4610
                    length: 69
                  pos: 4596
                  length: 93
                pos: 4570
                length: 119
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: in
                            children: []
                            pos: 4703
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4709
                            length: 4
                        children: []
                        pos: 4703
                        length: 10
                    children: []
                    pos: 4702
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("InputStream must not
                        be null.");
                    children: []
                    pos: 4729
                    length: 68
                  pos: 4715
                  length: 92
                pos: 4699
                length: 108
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: AR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 4821
                        length: 33
                    children: []
                    pos: 4820
                    length: 35
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ArArchiveInputStream(in);
                    children: []
                    pos: 4870
                    length: 36
                  pos: 4856
                  length: 60
                pos: 4817
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: ZIP.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 4929
                        length: 34
                    children: []
                    pos: 4928
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ZipArchiveInputStream(in);
                    children: []
                    pos: 4979
                    length: 37
                  pos: 4965
                  length: 61
                pos: 4925
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: TAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5039
                        length: 34
                    children: []
                    pos: 5038
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new TarArchiveInputStream(in);
                    children: []
                    pos: 5089
                    length: 37
                  pos: 5075
                  length: 61
                pos: 5035
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: JAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5149
                        length: 34
                    children: []
                    pos: 5148
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new JarArchiveInputStream(in);
                    children: []
                    pos: 5199
                    length: 37
                  pos: 5185
                  length: 61
                pos: 5145
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: CPIO.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5259
                        length: 35
                    children: []
                    pos: 5258
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new CpioArchiveInputStream(in);
                    children: []
                    pos: 5310
                    length: 38
                  pos: 5296
                  length: 62
                pos: 5255
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: DUMP.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 5371
                        length: 35
                    children: []
                    pos: 5370
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new DumpArchiveInputStream(in);
                    children: []
                    pos: 5422
                    length: 38
                  pos: 5408
                  length: 62
                pos: 5367
                length: 103
              - type: throw_statement
                fields:
                  text: 'throw new ArchiveException("Archiver: " + archiverName +
                    " not found.");'
                children: []
                pos: 5480
                length: 72
              pos: 4559
              length: 999
          children: []
          pos: 4410
          length: 1148
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveOutputStream
              children: []
              pos: 6005
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String archiverName
                children: []
                pos: 6044
                length: 25
              pos: 5978
              length: 1049
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: archiverName
                            children: []
                            pos: 6145
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6161
                            length: 4
                        children: []
                        pos: 6145
                        length: 20
                    children: []
                    pos: 6144
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Archivername must
                        not be null.");
                    children: []
                    pos: 6181
                    length: 69
                  pos: 6167
                  length: 93
                pos: 6141
                length: 119
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: out
                            children: []
                            pos: 6273
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6280
                            length: 4
                        children: []
                        pos: 6273
                        length: 11
                    children: []
                    pos: 6272
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("OutputStream must
                        not be null.");
                    children: []
                    pos: 6300
                    length: 69
                  pos: 6286
                  length: 93
                pos: 6269
                length: 110
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: AR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6393
                        length: 33
                    children: []
                    pos: 6392
                    length: 35
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ArArchiveOutputStream(out);
                    children: []
                    pos: 6442
                    length: 38
                  pos: 6428
                  length: 62
                pos: 6389
                length: 101
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: ZIP.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6503
                        length: 34
                    children: []
                    pos: 6502
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new ZipArchiveOutputStream(out);
                    children: []
                    pos: 6553
                    length: 39
                  pos: 6539
                  length: 63
                pos: 6499
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: TAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6615
                        length: 34
                    children: []
                    pos: 6614
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new TarArchiveOutputStream(out);
                    children: []
                    pos: 6665
                    length: 39
                  pos: 6651
                  length: 63
                pos: 6611
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: JAR.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6727
                        length: 34
                    children: []
                    pos: 6726
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new JarArchiveOutputStream(out);
                    children: []
                    pos: 6777
                    length: 39
                  pos: 6763
                  length: 63
                pos: 6723
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: CPIO.equalsIgnoreCase(archiverName)
                        children: []
                        pos: 6839
                        length: 35
                    children: []
                    pos: 6838
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return new CpioArchiveOutputStream(out);
                    children: []
                    pos: 6890
                    length: 40
                  pos: 6876
                  length: 64
                pos: 6835
                length: 105
              - type: throw_statement
                fields:
                  text: 'throw new ArchiveException("Archiver: " + archiverName +
                    " not found.");'
                children: []
                pos: 6949
                length: 72
              pos: 6131
              length: 896
          children: []
          pos: 5978
          length: 1049
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveInputStream
              children: []
              pos: 7517
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final InputStream in
                children: []
                pos: 7542
                length: 20
              pos: 7491
              length: 2743
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: in
                            children: []
                            pos: 7614
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7620
                            length: 4
                        children: []
                        pos: 7614
                        length: 10
                    children: []
                    pos: 7613
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Stream must not be
                        null.");
                    children: []
                    pos: 7640
                    length: 63
                  pos: 7626
                  length: 87
                pos: 7610
                length: 103
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!in.markSupported()"
                        children: []
                        pos: 7727
                        length: 19
                    children: []
                    pos: 7726
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Mark is not supported.");
                    children: []
                    pos: 7762
                    length: 61
                  pos: 7748
                  length: 85
                pos: 7723
                length: 110
              - type: local_variable_declaration
                fields:
                  text: final byte[] signature = new byte[12];
                children: []
                pos: 7843
                length: 38
              - type: expression_statement
                fields:
                  text: in.mark(signature.length);
                children: []
                pos: 7890
                length: 26
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: int signatureLength = in.read(signature);
                      children: []
                      pos: 7943
                      length: 41
                    - type: expression_statement
                      fields:
                        text: in.reset();
                      children: []
                      pos: 7997
                      length: 11
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: ZipArchiveInputStream.matches(signature, signatureLength)
                              children: []
                              pos: 8025
                              length: 57
                          children: []
                          pos: 8024
                          length: 59
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return new ZipArchiveInputStream(in);
                          children: []
                          pos: 8102
                          length: 37
                        pos: 8084
                        length: 69
                      pos: 8021
                      length: 546
                    - type: local_variable_declaration
                      fields:
                        text: final byte[] dumpsig = new byte[32];
                      children: []
                      pos: 8647
                      length: 36
                    - type: expression_statement
                      fields:
                        text: in.mark(dumpsig.length);
                      children: []
                      pos: 8696
                      length: 24
                    - type: expression_statement
                      fields:
                        text: signatureLength = in.read(dumpsig);
                      children: []
                      pos: 8733
                      length: 35
                    - type: expression_statement
                      fields:
                        text: in.reset();
                      children: []
                      pos: 8781
                      length: 11
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: DumpArchiveInputStream.matches(dumpsig, signatureLength)
                              children: []
                              pos: 8809
                              length: 56
                          children: []
                          pos: 8808
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return new DumpArchiveInputStream(in);
                          children: []
                          pos: 8885
                          length: 38
                        pos: 8867
                        length: 70
                      pos: 8805
                      length: 132
                    - type: local_variable_declaration
                      fields:
                        text: final byte[] tarheader = new byte[512];
                      children: []
                      pos: 9043
                      length: 39
                    - type: expression_statement
                      fields:
                        text: in.mark(tarheader.length);
                      children: []
                      pos: 9095
                      length: 26
                    - type: expression_statement
                      fields:
                        text: signatureLength = in.read(tarheader);
                      children: []
                      pos: 9134
                      length: 37
                    - type: expression_statement
                      fields:
                        text: in.reset();
                      children: []
                      pos: 9184
                      length: 11
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: TarArchiveInputStream.matches(tarheader, signatureLength)
                              children: []
                              pos: 9212
                              length: 57
                          children: []
                          pos: 9211
                          length: 59
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return new TarArchiveInputStream(in);
                          children: []
                          pos: 9289
                          length: 37
                        pos: 9271
                        length: 69
                      pos: 9208
                      length: 132
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: greater_or_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: signatureLength
                                  children: []
                                  pos: 9412
                                  length: 15
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '512'
                                  children: []
                                  pos: 9431
                                  length: 3
                              children: []
                              pos: 9412
                              length: 22
                          children: []
                          pos: 9411
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: try_statement
                          fields:
                            body:
                              type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: TarArchiveInputStream tais = new TarArchiveInputStream(new
                                    ByteArrayInputStream(tarheader));
                                children: []
                                pos: 9480
                                length: 92
                              - type: expression_statement
                                fields:
                                  text: tais.getNextEntry();
                                children: []
                                pos: 9658
                                length: 20
                              - type: return_statement
                                fields:
                                  text: return new TarArchiveInputStream(in);
                                children: []
                                pos: 9703
                                length: 37
                              pos: 9458
                              length: 300
                            excepts:
                              type: excepts
                              fields: {}
                              children:
                              - type: catch_clause
                                fields:
                                  text: |-
                                    catch (Exception e) { // NOPMD
                                                        // can generate IllegalArgumentException as well
                                                        // as IOException
                                                        // autodetection, simply not a TAR
                                                        // ignored
                                                    }
                                children: []
                                pos: 9759
                                length: 241
                              pos: 9454
                              length: 546
                          children: []
                          pos: 9454
                          length: 546
                        pos: 9436
                        length: 578
                      pos: 9408
                      length: 606
                    pos: 7929
                    length: 2095
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IOException e) {
                                      throw new ArchiveException("Could not use reset and mark operations.", e);
                                  }
                      children: []
                      pos: 10025
                      length: 120
                    pos: 7925
                    length: 2220
                children: []
                pos: 7925
                length: 2220
              - type: throw_statement
                fields:
                  text: throw new ArchiveException("No Archiver found for the stream
                    signature");
                children: []
                pos: 10155
                length: 73
              pos: 7600
              length: 2634
          children: []
          pos: 7491
          length: 2743
        pos: 3030
        length: 7206
    children: []
    pos: 3030
    length: 7206
  pos: 0
  length: 10237
text_diff: |
  --- before
  +++ after
  @@ -241,9 +241,8 @@
                   try {
                       TarArchiveInputStream tais = new TarArchiveInputStream(new ByteArrayInputStream(tarheader));
                       // COMPRESS-191 - verify the header checksum
  -                    if (tais.getNextTarEntry().isCheckSumOK()) {
  +                    tais.getNextEntry();
                           return new TarArchiveInputStream(in);
  -                    }
                   } catch (Exception e) { // NOPMD
                       // can generate IllegalArgumentException as well
                       // as IOException
tree_diff: |+
  New cluster:
  ===
  insert-node
  ---
  expression_statement: tais.getNextEntry(); [9658,9678]
  to
  block [9458,9804]
  at 1
  ------------
  ===
  insert-node
  ---
  expression_statement: tais.getNextEntry(); [9658,9678]
  to
  block [9458,9804]
  at 1

  New cluster:
  ===
  insert-node
  ---
  return_statement: return new TarArchiveInputStream(in); [9703,9740]
  to
  block [9458,9804]
  at 2
  ------------
  ===
  insert-node
  ---
  return_statement: return new TarArchiveInputStream(in); [9703,9740]
  to
  block [9458,9804]
  at 2

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [9658,9786]
      parenthesized_expression [9661,9700]
          method_invocation: tais.getNextTarEntry().isCheckSumOK() [9662,9699]
      block [9701,9786]
          return_statement: return new TarArchiveInputStream(in); [9727,9764]

...
