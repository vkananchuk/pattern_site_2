---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ProperFractionFormat
        children: []
        pos: 1245
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -6337346779577272307L;
          children: []
          pos: 1346
          length: 67
        - type: field_declaration
          fields:
            text: private NumberFormat wholeFormat;
          children: []
          pos: 1475
          length: 33
        - type: constructor_declaration
          fields:
            text: "public ProperFractionFormat() {\r\n        this(getDefaultNumberFormat());\r\n
              \   }"
          children: []
          pos: 1662
          length: 79
        - type: constructor_declaration
          fields:
            text: "public ProperFractionFormat(NumberFormat format) {\r\n        this(format,
              (NumberFormat)format.clone(), (NumberFormat)format.clone());\r\n    }"
          children: []
          pos: 1992
          length: 140
        - type: constructor_declaration
          fields:
            text: "public ProperFractionFormat(NumberFormat wholeFormat,\r\n            NumberFormat
              numeratorFormat,\r\n            NumberFormat denominatorFormat)\r\n
              \   {\r\n        super(numeratorFormat, denominatorFormat);\r\n        setWholeFormat(wholeFormat);\r\n
              \   }"
          children: []
          pos: 2493
          length: 245
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 3191
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Fraction fraction
                children: []
                pos: 3198
                length: 17
              pos: 3171
              length: 720
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: pos.setBeginIndex(0);
                children: []
                pos: 3295
                length: 21
              - type: expression_statement
                fields:
                  text: pos.setEndIndex(0);
                children: []
                pos: 3326
                length: 19
              - type: local_variable_declaration
                fields:
                  text: int num = fraction.getNumerator();
                children: []
                pos: 3357
                length: 34
              - type: local_variable_declaration
                fields:
                  text: int den = fraction.getDenominator();
                children: []
                pos: 3401
                length: 36
              - type: local_variable_declaration
                fields:
                  text: int whole = num / den;
                children: []
                pos: 3447
                length: 22
              - type: expression_statement
                fields:
                  text: num = num % den;
                children: []
                pos: 3479
                length: 16
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: whole
                            children: []
                            pos: 3519
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3528
                            length: 1
                        children: []
                        pos: 3519
                        length: 10
                    children: []
                    pos: 3518
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: getWholeFormat().format(whole, toAppendTo, pos);
                    children: []
                    pos: 3546
                    length: 48
                  - type: expression_statement
                    fields:
                      text: toAppendTo.append(' ');
                    children: []
                    pos: 3608
                    length: 23
                  - type: expression_statement
                    fields:
                      text: num = Math.abs(num);
                    children: []
                    pos: 3645
                    length: 20
                  pos: 3531
                  length: 145
                pos: 3515
                length: 161
              - type: expression_statement
                fields:
                  text: getNumeratorFormat().format(num, toAppendTo, pos);
                children: []
                pos: 3686
                length: 50
              - type: expression_statement
                fields:
                  text: toAppendTo.append(" / ");
                children: []
                pos: 3746
                length: 25
              - type: expression_statement
                fields:
                  text: "getDenominatorFormat().format(den, toAppendTo,\r\n            pos);"
                children: []
                pos: 3781
                length: 65
              - type: return_statement
                fields:
                  text: return toAppendTo;
                children: []
                pos: 3866
                length: 18
              pos: 3274
              length: 617
          children: []
          pos: 3171
          length: 720
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getWholeFormat
              children: []
              pos: 4004
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3984
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return wholeFormat;
                children: []
                pos: 4032
                length: 19
              pos: 4021
              length: 37
          children: []
          pos: 3984
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4611
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String source
                children: []
                pos: 4617
                length: 13
              pos: 4595
              length: 2768
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Fraction ret = super.parse(source, pos);
                children: []
                pos: 4705
                length: 40
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: ret
                            children: []
                            pos: 4759
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4766
                            length: 4
                        children: []
                        pos: 4759
                        length: 11
                    children: []
                    pos: 4758
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return ret;
                    children: []
                    pos: 4787
                    length: 11
                  pos: 4772
                  length: 37
                pos: 4755
                length: 54
              - type: local_variable_declaration
                fields:
                  text: int initialIndex = pos.getIndex();
                children: []
                pos: 4829
                length: 34
              - type: expression_statement
                fields:
                  text: parseAndIgnoreWhitespace(source, pos);
                children: []
                pos: 4904
                length: 38
              - type: local_variable_declaration
                fields:
                  text: Number whole = getWholeFormat().parse(source, pos);
                children: []
                pos: 4978
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: whole
                            children: []
                            pos: 5043
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5052
                            length: 4
                        children: []
                        pos: 5043
                        length: 13
                    children: []
                    pos: 5042
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 5225
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 5266
                    length: 12
                  pos: 5058
                  length: 231
                pos: 5039
                length: 250
              - type: expression_statement
                fields:
                  text: parseAndIgnoreWhitespace(source, pos);
                children: []
                pos: 5330
                length: 38
              - type: local_variable_declaration
                fields:
                  text: Number num = getNumeratorFormat().parse(source, pos);
                children: []
                pos: 5416
                length: 53
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: num
                            children: []
                            pos: 5483
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5490
                            length: 4
                        children: []
                        pos: 5483
                        length: 11
                    children: []
                    pos: 5482
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 5663
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 5704
                    length: 12
                  pos: 5496
                  length: 231
                pos: 5479
                length: 248
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: num.intValue()
                            children: []
                            pos: 5751
                            length: 14
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 5768
                            length: 1
                        children: []
                        pos: 5751
                        length: 18
                    children: []
                    pos: 5750
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 5852
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 5893
                    length: 12
                  pos: 5771
                  length: 145
                pos: 5747
                length: 169
              - type: local_variable_declaration
                fields:
                  text: int startIndex = pos.getIndex();
                children: []
                pos: 5950
                length: 32
              - type: local_variable_declaration
                fields:
                  text: char c = parseNextCharacter(source, pos);
                children: []
                pos: 5992
                length: 41
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: c
                        children: []
                        pos: 6051
                        length: 1
                    children: []
                    pos: 6050
                    length: 3
                  body:
                    type: switch_block
                    fields:
                      text: "{\r\n        case 0 :\r\n            // no '/'\r\n            //
                        return num as a fraction\r\n            return new Fraction(num.intValue(),
                        1);\r\n        case '/' :\r\n            // found '/', continue
                        parsing denominator\r\n            break;\r\n        default
                        :\r\n            // invalid '/'\r\n            // set index
                        back to initial, error index should be the last\r\n            //
                        character examined.\r\n            pos.setIndex(initialIndex);\r\n
                        \           pos.setErrorIndex(startIndex);\r\n            return
                        null;\r\n        }"
                    children: []
                    pos: 6054
                    length: 511
                children: []
                pos: 6043
                length: 522
              - type: expression_statement
                fields:
                  text: parseAndIgnoreWhitespace(source, pos);
                children: []
                pos: 6606
                length: 38
              - type: local_variable_declaration
                fields:
                  text: Number den = getDenominatorFormat().parse(source, pos);
                children: []
                pos: 6686
                length: 55
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: den
                            children: []
                            pos: 6755
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6762
                            length: 4
                        children: []
                        pos: 6755
                        length: 11
                    children: []
                    pos: 6754
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 6935
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 6976
                    length: 12
                  pos: 6768
                  length: 231
                pos: 6751
                length: 248
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: den.intValue()
                            children: []
                            pos: 7023
                            length: 14
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7040
                            length: 1
                        children: []
                        pos: 7023
                        length: 18
                    children: []
                    pos: 7022
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 7111
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 7152
                    length: 12
                  pos: 7043
                  length: 132
                pos: 7019
                length: 156
              - type: local_variable_declaration
                fields:
                  text: int w = whole.intValue();
                children: []
                pos: 7187
                length: 25
              - type: local_variable_declaration
                fields:
                  text: int n = num.intValue();
                children: []
                pos: 7222
                length: 23
              - type: local_variable_declaration
                fields:
                  text: int d = den.intValue();
                children: []
                pos: 7255
                length: 23
              - type: return_statement
                fields:
                  text: return new Fraction(((Math.abs(w) * d) + n) * MathUtils.sign(w),
                    d);
                children: []
                pos: 7288
                length: 68
              pos: 4651
              length: 2712
          children: []
          pos: 4595
          length: 2768
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setWholeFormat
              children: []
              pos: 7590
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NumberFormat format
                children: []
                pos: 7605
                length: 19
              pos: 7578
              length: 234
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: format
                            children: []
                            pos: 7641
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7651
                            length: 4
                        children: []
                        pos: 7641
                        length: 14
                    children: []
                    pos: 7640
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: "throw new IllegalArgumentException(\r\n                \"whole
                        format can not be null.\");"
                    children: []
                    pos: 7672
                    length: 86
                  pos: 7657
                  length: 112
                pos: 7637
                length: 132
              - type: expression_statement
                fields:
                  text: this.wholeFormat = format;
                children: []
                pos: 7779
                length: 26
              pos: 7626
              length: 186
          children: []
          pos: 7578
          length: 234
        pos: 1232
        length: 6583
    children: []
    pos: 1232
    length: 6583
  pos: 0
  length: 7817
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ProperFractionFormat
        children: []
        pos: 1245
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -6337346779577272307L;
          children: []
          pos: 1346
          length: 67
        - type: field_declaration
          fields:
            text: private NumberFormat wholeFormat;
          children: []
          pos: 1475
          length: 33
        - type: constructor_declaration
          fields:
            text: "public ProperFractionFormat() {\r\n        this(getDefaultNumberFormat());\r\n
              \   }"
          children: []
          pos: 1662
          length: 79
        - type: constructor_declaration
          fields:
            text: "public ProperFractionFormat(NumberFormat format) {\r\n        this(format,
              (NumberFormat)format.clone(), (NumberFormat)format.clone());\r\n    }"
          children: []
          pos: 1992
          length: 140
        - type: constructor_declaration
          fields:
            text: "public ProperFractionFormat(NumberFormat wholeFormat,\r\n            NumberFormat
              numeratorFormat,\r\n            NumberFormat denominatorFormat)\r\n
              \   {\r\n        super(numeratorFormat, denominatorFormat);\r\n        setWholeFormat(wholeFormat);\r\n
              \   }"
          children: []
          pos: 2493
          length: 245
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 3191
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Fraction fraction
                children: []
                pos: 3198
                length: 17
              pos: 3171
              length: 720
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: pos.setBeginIndex(0);
                children: []
                pos: 3295
                length: 21
              - type: expression_statement
                fields:
                  text: pos.setEndIndex(0);
                children: []
                pos: 3326
                length: 19
              - type: local_variable_declaration
                fields:
                  text: int num = fraction.getNumerator();
                children: []
                pos: 3357
                length: 34
              - type: local_variable_declaration
                fields:
                  text: int den = fraction.getDenominator();
                children: []
                pos: 3401
                length: 36
              - type: local_variable_declaration
                fields:
                  text: int whole = num / den;
                children: []
                pos: 3447
                length: 22
              - type: expression_statement
                fields:
                  text: num = num % den;
                children: []
                pos: 3479
                length: 16
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: whole
                            children: []
                            pos: 3519
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3528
                            length: 1
                        children: []
                        pos: 3519
                        length: 10
                    children: []
                    pos: 3518
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: getWholeFormat().format(whole, toAppendTo, pos);
                    children: []
                    pos: 3546
                    length: 48
                  - type: expression_statement
                    fields:
                      text: toAppendTo.append(' ');
                    children: []
                    pos: 3608
                    length: 23
                  - type: expression_statement
                    fields:
                      text: num = Math.abs(num);
                    children: []
                    pos: 3645
                    length: 20
                  pos: 3531
                  length: 145
                pos: 3515
                length: 161
              - type: expression_statement
                fields:
                  text: getNumeratorFormat().format(num, toAppendTo, pos);
                children: []
                pos: 3686
                length: 50
              - type: expression_statement
                fields:
                  text: toAppendTo.append(" / ");
                children: []
                pos: 3746
                length: 25
              - type: expression_statement
                fields:
                  text: "getDenominatorFormat().format(den, toAppendTo,\r\n            pos);"
                children: []
                pos: 3781
                length: 65
              - type: return_statement
                fields:
                  text: return toAppendTo;
                children: []
                pos: 3866
                length: 18
              pos: 3274
              length: 617
          children: []
          pos: 3171
          length: 720
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getWholeFormat
              children: []
              pos: 4004
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3984
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return wholeFormat;
                children: []
                pos: 4032
                length: 19
              pos: 4021
              length: 37
          children: []
          pos: 3984
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4611
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String source
                children: []
                pos: 4617
                length: 13
              pos: 4595
              length: 2542
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Fraction ret = super.parse(source, pos);
                children: []
                pos: 4705
                length: 40
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: ret
                            children: []
                            pos: 4759
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4766
                            length: 4
                        children: []
                        pos: 4759
                        length: 11
                    children: []
                    pos: 4758
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return ret;
                    children: []
                    pos: 4787
                    length: 11
                  pos: 4772
                  length: 37
                pos: 4755
                length: 54
              - type: local_variable_declaration
                fields:
                  text: int initialIndex = pos.getIndex();
                children: []
                pos: 4829
                length: 34
              - type: expression_statement
                fields:
                  text: parseAndIgnoreWhitespace(source, pos);
                children: []
                pos: 4904
                length: 38
              - type: local_variable_declaration
                fields:
                  text: Number whole = getWholeFormat().parse(source, pos);
                children: []
                pos: 4978
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: whole
                            children: []
                            pos: 5043
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5052
                            length: 4
                        children: []
                        pos: 5043
                        length: 13
                    children: []
                    pos: 5042
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 5225
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 5266
                    length: 12
                  pos: 5058
                  length: 231
                pos: 5039
                length: 250
              - type: expression_statement
                fields:
                  text: parseAndIgnoreWhitespace(source, pos);
                children: []
                pos: 5330
                length: 38
              - type: local_variable_declaration
                fields:
                  text: Number num = getNumeratorFormat().parse(source, pos);
                children: []
                pos: 5416
                length: 53
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: num
                            children: []
                            pos: 5483
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5490
                            length: 4
                        children: []
                        pos: 5483
                        length: 11
                    children: []
                    pos: 5482
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 5663
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 5704
                    length: 12
                  pos: 5496
                  length: 231
                pos: 5479
                length: 248
              - type: local_variable_declaration
                fields:
                  text: int startIndex = pos.getIndex();
                children: []
                pos: 5837
                length: 32
              - type: local_variable_declaration
                fields:
                  text: char c = parseNextCharacter(source, pos);
                children: []
                pos: 5879
                length: 41
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: c
                        children: []
                        pos: 5938
                        length: 1
                    children: []
                    pos: 5937
                    length: 3
                  body:
                    type: switch_block
                    fields:
                      text: "{\r\n        case 0 :\r\n            // no '/'\r\n            //
                        return num as a fraction\r\n            return new Fraction(num.intValue(),
                        1);\r\n        case '/' :\r\n            // found '/', continue
                        parsing denominator\r\n            break;\r\n        default
                        :\r\n            // invalid '/'\r\n            // set index
                        back to initial, error index should be the last\r\n            //
                        character examined.\r\n            pos.setIndex(initialIndex);\r\n
                        \           pos.setErrorIndex(startIndex);\r\n            return
                        null;\r\n        }"
                    children: []
                    pos: 5941
                    length: 511
                children: []
                pos: 5930
                length: 522
              - type: expression_statement
                fields:
                  text: parseAndIgnoreWhitespace(source, pos);
                children: []
                pos: 6493
                length: 38
              - type: local_variable_declaration
                fields:
                  text: Number den = getDenominatorFormat().parse(source, pos);
                children: []
                pos: 6573
                length: 55
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: den
                            children: []
                            pos: 6642
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6649
                            length: 4
                        children: []
                        pos: 6642
                        length: 11
                    children: []
                    pos: 6641
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pos.setIndex(initialIndex);
                    children: []
                    pos: 6822
                    length: 27
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 6863
                    length: 12
                  pos: 6655
                  length: 231
                pos: 6638
                length: 248
              - type: local_variable_declaration
                fields:
                  text: int w = whole.intValue();
                children: []
                pos: 6961
                length: 25
              - type: local_variable_declaration
                fields:
                  text: int n = num.intValue();
                children: []
                pos: 6996
                length: 23
              - type: local_variable_declaration
                fields:
                  text: int d = den.intValue();
                children: []
                pos: 7029
                length: 23
              - type: return_statement
                fields:
                  text: return new Fraction(((Math.abs(w) * d) + n) * MathUtils.sign(w),
                    d);
                children: []
                pos: 7062
                length: 68
              pos: 4651
              length: 2486
          children: []
          pos: 4595
          length: 2542
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setWholeFormat
              children: []
              pos: 7364
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NumberFormat format
                children: []
                pos: 7379
                length: 19
              pos: 7352
              length: 234
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: format
                            children: []
                            pos: 7415
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7425
                            length: 4
                        children: []
                        pos: 7415
                        length: 14
                    children: []
                    pos: 7414
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: "throw new IllegalArgumentException(\r\n                \"whole
                        format can not be null.\");"
                    children: []
                    pos: 7446
                    length: 86
                  pos: 7431
                  length: 112
                pos: 7411
                length: 132
              - type: expression_statement
                fields:
                  text: this.wholeFormat = format;
                children: []
                pos: 7553
                length: 26
              pos: 7400
              length: 186
          children: []
          pos: 7352
          length: 234
        pos: 1232
        length: 6357
    children: []
    pos: 1232
    length: 6357
  pos: 0
  length: 7591
text_diff: "--- before\n+++ after\n@@ -162,11 +162,7 @@\n             return null;\r\n
  \        }\r\n         \r\n-        if (num.intValue() < 0) {\r\n             //
  minus signs should be leading, invalid expression\r\n-            pos.setIndex(initialIndex);\r\n-
  \           return null;\r\n-        }\r\n \r\n         // parse '/'\r\n         int
  startIndex = pos.getIndex();\r\n@@ -201,11 +197,7 @@\n             return null;\r\n
  \        }\r\n         \r\n-        if (den.intValue() < 0) {\r\n             //
  minus signs must be leading, invalid\r\n-            pos.setIndex(initialIndex);\r\n-
  \           return null;\r\n-        }\r\n \r\n         int w = whole.intValue();\r\n
  \        int n = num.intValue();\r\n"
tree_diff: |+
  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [5747,5916]
      parenthesized_expression [5750,5770]
          less_than [5751,5769]
              method_invocation: num.intValue() [5751,5765]
              decimal_integer_literal: 0 [5768,5769]
      block [5771,5916]
          expression_statement: pos.setIndex(initialIndex); [5852,5879]
          return_statement: return null; [5893,5905]

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [7019,7175]
      parenthesized_expression [7022,7042]
          less_than [7023,7041]
              method_invocation: den.intValue() [7023,7037]
              decimal_integer_literal: 0 [7040,7041]
      block [7043,7175]
          expression_statement: pos.setIndex(initialIndex); [7111,7138]
          return_statement: return null; [7152,7164]

...
