---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 5329
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 5458
          length: 91
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5553
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5734
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5925
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 6113
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 6302
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 6485
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6659
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6853
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6896
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6952
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6993
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 7044
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 7089
          length: 78
        - type: field_declaration
          fields:
            text: |-
              private final Map<String, String> delegateCallingConventions =
                    Maps.newHashMap();
          children: []
          pos: 7170
          length: 87
        - type: field_declaration
          fields:
            text: |-
              private final Map<Node, AstFunctionContents> functionAnalysisResults =
                    Maps.newHashMap();
          children: []
          pos: 7310
          length: 95
        - type: field_declaration
          fields:
            text: private final ObjectType unknownType;
          children: []
          pos: 7430
          length: 37
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 7628
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 7650
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 7671
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 7695
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 8043
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 8051
                      length: 11
                    pos: 8038
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 8072
                      length: 62
                    pos: 8064
                    length: 76
                children: []
                pos: 8038
                length: 102
              pos: 7614
              length: 530
          children: []
          pos: 7614
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 8148
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                  this.unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                }
          children: []
          pos: 8254
          length: 409
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 8829
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8841
                length: 9
              pos: 8804
              length: 2310
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 9061
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 9088
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 9138
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9148
                            length: 4
                        children: []
                        pos: 9138
                        length: 14
                    children: []
                    pos: 9137
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: |-
                        JSType globalThis =
                                  typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
                    children: []
                    pos: 9162
                    length: 89
                  - type: expression_statement
                    fields:
                      text: root.setJSType(globalThis);
                    children: []
                    pos: 9359
                    length: 27
                  - type: expression_statement
                    fields:
                      text: root.getFirstChild().setJSType(globalThis);
                    children: []
                    pos: 9393
                    length: 43
                  - type: expression_statement
                    fields:
                      text: root.getLastChild().setJSType(globalThis);
                    children: []
                    pos: 9443
                    length: 42
                  - type: expression_statement
                    fields:
                      text: |-
                        (new FirstOrderFunctionAnalyzer(compiler, functionAnalysisResults))
                                  .process(root.getFirstChild(), root.getLastChild());
                    children: []
                    pos: 9551
                    length: 130
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 9740
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 9784
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 9864
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 9905
                    length: 53
                  pos: 9154
                  length: 810
                pos: 9134
                length: 1035
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 10175
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type.isFunctionType()) {
                            FunctionType fnType = type.toMaybeFunctionType();
                            JSType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 10382
                length: 468
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 10860
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10870
                            length: 4
                        children: []
                        pos: 10860
                        length: 14
                    children: []
                    pos: 10859
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes,
                                  delegateCallingConventions);
                    children: []
                    pos: 10884
                    length: 154
                  pos: 10876
                  length: 168
                pos: 10856
                length: 188
              - type: expression_statement
                fields:
                  text: newScope.setTypeResolver(scopeBuilder);
                children: []
                pos: 11050
                length: 39
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 11094
                length: 16
              pos: 8866
              length: 2248
          children: []
          pos: 8804
          length: 2310
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: patchGlobalScope
              children: []
              pos: 11408
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope globalScope
                children: []
                pos: 11425
                length: 17
              pos: 11403
              length: 1683
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(scriptRoot.isScript());
                children: []
                pos: 11616
                length: 48
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(globalScope);
                children: []
                pos: 11669
                length: 40
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(globalScope.isGlobal());
                children: []
                pos: 11714
                length: 49
              - type: local_variable_declaration
                fields:
                  text: String scriptName = NodeUtil.getSourceName(scriptRoot);
                children: []
                pos: 11769
                length: 55
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(scriptName);
                children: []
                pos: 11829
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {
                          if (scriptName.equals(NodeUtil.getSourceName(node))) {
                            functionAnalysisResults.remove(node);
                          }
                        }
                children: []
                pos: 11873
                length: 195
              - type: expression_statement
                fields:
                  text: |-
                    (new FirstOrderFunctionAnalyzer(
                            compiler, functionAnalysisResults)).process(null, scriptRoot);
                children: []
                pos: 12074
                length: 103
              - type: local_variable_declaration
                fields:
                  text: Iterator<Var> varIter = globalScope.getVars();
                children: []
                pos: 12480
                length: 46
              - type: local_variable_declaration
                fields:
                  text: List<Var> varsToRemove = Lists.newArrayList();
                children: []
                pos: 12531
                length: 46
              - type: while_statement
                fields:
                  text: |-
                    while (varIter.hasNext()) {
                          Var oldVar = varIter.next();
                          if (scriptName.equals(oldVar.getInputName())) {
                            varsToRemove.add(oldVar);
                          }
                        }
                children: []
                pos: 12582
                length: 164
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Var var : varsToRemove) {
                          globalScope.undeclare(var);
                          globalScope.getTypeOfThis().toObjectType().removeProperty(var.getName());
                        }
                children: []
                pos: 12751
                length: 150
              - type: local_variable_declaration
                fields:
                  text: GlobalScopeBuilder scopeBuilder = new GlobalScopeBuilder(globalScope);
                children: []
                pos: 12948
                length: 70
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, scriptRoot, scopeBuilder);
                children: []
                pos: 13023
                length: 59
              pos: 11461
              length: 1625
          children: []
          pos: 11403
          length: 1683
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 13245
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 13264
                length: 9
              pos: 13218
              length: 1385
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 13282
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = Scope.createGlobalScope(root);
                children: []
                pos: 13380
                length: 40
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 13425
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13480
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 13544
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 13598
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13653
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 13713
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13771
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13834
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13890
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13951
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 14016
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 14072
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 14135
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 14197
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 14257
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 14316
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", FUNCTION_INSTANCE_TYPE);
                children: []
                pos: 14517
                length: 67
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 14590
                length: 9
              pos: 13275
              length: 1328
          children: []
          pos: 13218
          length: 1385
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 14620
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14646
                length: 11
              pos: 14607
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 14683
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 14745
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 14818
                length: 89
              pos: 14677
              length: 234
          children: []
          pos: 14607
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 14928
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14951
                length: 11
              pos: 14915
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 15007
                length: 64
              pos: 15001
              length: 74
          children: []
          pos: 14915
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 15099
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 15117
                length: 11
              pos: 15079
              length: 126
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 15159
                length: 42
              pos: 15153
              length: 52
          children: []
          pos: 15079
          length: 126
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 15230
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 15308
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 15352
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 15473
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 15479
                      length: 15
                    pos: 15447
                    length: 725
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 15536
                              length: 14
                          children: []
                          pos: 15535
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, NodeUtil.getBestJSDocInfo(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.isAssign()) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 15552
                          length: 614
                      children: []
                      pos: 15528
                      length: 638
                    pos: 15520
                    length: 652
                children: []
                pos: 15447
                length: 725
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 16191
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 16217
                      length: 13
                    pos: 16178
                    length: 416
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 16260
                              length: 26
                          children: []
                          pos: 16259
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 16302
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 16310
                                      length: 4
                                  children: []
                                  pos: 16302
                                  length: 12
                              children: []
                              pos: 16301
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 16332
                                      length: 27
                                  children: []
                                  pos: 16331
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 16375
                                  length: 62
                                pos: 16361
                                length: 88
                              pos: 16328
                              length: 242
                            pos: 16316
                            length: 264
                          pos: 16298
                          length: 282
                        pos: 16288
                        length: 300
                      pos: 16256
                      length: 332
                    pos: 16248
                    length: 346
                children: []
                pos: 16178
                length: 416
              pos: 15209
              length: 1389
          children: []
          pos: 15209
          length: 1389
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 16617
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 16631
                length: 23
              pos: 16602
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 16662
                length: 46
              pos: 16656
              length: 56
          children: []
          pos: 16602
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 16739
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 16881
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 16905
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 17082
                length: 67
              - type: field_declaration
                fields:
                  text: private List<Node> lentObjectLiterals = null;
                children: []
                pos: 17566
                length: 45
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 17787
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 17939
                length: 33
              - type: field_declaration
                fields:
                  text: private InputId inputId;
                children: []
                pos: 18034
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 18064
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 18150
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 18166
                      length: 9
                    pos: 18145
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 18198
                      length: 54
                    pos: 18190
                    length: 68
                children: []
                pos: 18145
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 18290
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 18264
                    length: 521
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 18362
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 18517
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 18561
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 18739
                      length: 40
                    pos: 18305
                    length: 480
                children: []
                pos: 18264
                length: 521
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 18826
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18841
                      length: 15
                    pos: 18791
                    length: 1032
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 18887
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isFunction()
                                  children: []
                                  pos: 18923
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: n.isScript()
                                  children: []
                                  pos: 18951
                                  length: 12
                              children: []
                              pos: 18923
                              length: 40
                          children: []
                          pos: 18922
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(inputId);
                          children: []
                          pos: 18975
                          length: 36
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 19020
                          length: 39
                        pos: 18965
                        length: 102
                      pos: 18919
                      length: 148
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || !parent.isFunction() ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 19199
                      length: 131
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 19342
                              length: 7
                          children: []
                          pos: 19341
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 19491
                                  length: 29
                              children: []
                              pos: 19490
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child);
                                              }
                                            }
                              children: []
                              pos: 19534
                              length: 242
                            pos: 19522
                            length: 264
                          pos: 19487
                          length: 299
                        pos: 19351
                        length: 443
                      pos: 19338
                      length: 456
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 19802
                      length: 15
                    pos: 18879
                    length: 944
                children: []
                pos: 18791
                length: 1032
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 19855
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19861
                      length: 15
                    pos: 19829
                    length: 1730
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 19907
                      length: 25
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(n);
                      children: []
                      pos: 19939
                      length: 22
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 19977
                              length: 11
                          children: []
                          pos: 19976
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n);
                                        checkForCallingConventionDefiningCalls(n, delegateCallingConventions);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.isGetProp() &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n);
                                        break;

                                      case Token.VAR:
                                        defineVar(n);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.isExprResult() &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 19990
                          length: 1255
                      children: []
                      pos: 19969
                      length: 1276
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getParent()
                                          children: []
                                          pos: 21320
                                          length: 13
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 21337
                                          length: 4
                                      children: []
                                      pos: 21320
                                      length: 21
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isStatement(n)
                                      children: []
                                      pos: 21345
                                      length: 23
                                  children: []
                                  pos: 21320
                                  length: 48
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lentObjectLiterals
                                      children: []
                                      pos: 21382
                                      length: 18
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 21404
                                      length: 4
                                  children: []
                                  pos: 21382
                                  length: 26
                              children: []
                              pos: 21320
                              length: 88
                          children: []
                          pos: 21319
                          length: 90
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node objLit : lentObjectLiterals) {
                                        defineObjectLiteral(objLit);
                                      }
                          children: []
                          pos: 21420
                          length: 89
                        - type: expression_statement
                          fields:
                            text: lentObjectLiterals.clear();
                          children: []
                          pos: 21518
                          length: 27
                        pos: 21410
                        length: 143
                      pos: 21316
                      length: 237
                    pos: 19899
                    length: 1660
                children: []
                pos: 19829
                length: 1730
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 21578
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 21597
                      length: 6
                    pos: 21565
                    length: 1188
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 21621
                              length: 11
                          children: []
                          pos: 21620
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        n.setJSType(getNativeType(STRING_TYPE));
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        JSDocInfo info = n.getJSDocInfo();
                                        if (info != null &&
                                            info.getLendsName() != null) {
                                          if (lentObjectLiterals == null) {
                                            lentObjectLiterals = Lists.newArrayList();
                                          }
                                          lentObjectLiterals.add(n);
                                        } else {
                                          defineObjectLiteral(n);
                                        }
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 21634
                          length: 1113
                      children: []
                      pos: 21613
                      length: 1134
                    pos: 21605
                    length: 1148
                children: []
                pos: 21565
                length: 1188
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 22772
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objectLit
                      children: []
                      pos: 22792
                      length: 14
                    pos: 22759
                    length: 1639
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 22855
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 22881
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 22934
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22942
                                      length: 4
                                  children: []
                                  pos: 22934
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 22950
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22973
                                      length: 4
                                  children: []
                                  pos: 22950
                                  length: 27
                              children: []
                              pos: 22934
                              length: 43
                          children: []
                          pos: 22933
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 22989
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 23037
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 23089
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23101
                                      length: 4
                                  children: []
                                  pos: 23089
                                  length: 16
                              children: []
                              pos: 23088
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 23119
                              length: 94
                            pos: 23107
                            length: 116
                          pos: 23085
                          length: 587
                        pos: 22979
                        length: 701
                      pos: 22930
                      length: 750
                    - type: expression_statement
                      fields:
                        text: info = NodeUtil.getBestJSDocInfo(objectLit);
                      children: []
                      pos: 23688
                      length: 44
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(objectLit);
                      children: []
                      pos: 23739
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 23794
                      length: 55
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 23856
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 23899
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23907
                                      length: 4
                                  children: []
                                  pos: 23899
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 23915
                                  length: 27
                              children: []
                              pos: 23899
                              length: 43
                          children: []
                          pos: 23898
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 23954
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 24031
                          length: 23
                        pos: 23944
                        length: 118
                      pos: 23895
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 24074
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 24082
                                  length: 4
                              children: []
                              pos: 24074
                              length: 12
                          children: []
                          pos: 24073
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType(info);
                          children: []
                          pos: 24098
                          length: 52
                        pos: 24088
                        length: 70
                      pos: 24070
                      length: 88
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 24166
                      length: 33
                    - type: expression_statement
                      fields:
                        text: |-
                          processObjectLitProperties(
                                    objectLit, ObjectType.cast(objectLit.getJSType()), !createdEnumType);
                      children: []
                      pos: 24285
                      length: 107
                    pos: 22808
                    length: 1590
                children: []
                pos: 22759
                length: 1639
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 24795
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objLit
                      children: []
                      pos: 24831
                      length: 11
                    pos: 24790
                    length: 1287
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType = getDeclaredType(info, keyNode, value);
                                  JSType keyType =  objLitType.isEnumType() ?
                                      objLitType.toMaybeEnumType().getElementsType() :
                                      NodeUtil.getObjectLitKeyTypeFromValueType(keyNode, valueType);

                                  // Try to declare this property in the current scope if it
                                  // has an authoritative name.
                                  String qualifiedName = NodeUtil.getBestLValueName(keyNode);
                                  if (qualifiedName != null) {
                                    boolean inferred = keyType == null;
                                    defineSlot(keyNode, objLit, qualifiedName, keyType, inferred);
                                  } else if (keyType != null) {
                                    setDeferredType(keyNode, keyType);
                                  }

                                  if (keyType != null && objLitType != null && declareOnOwner) {
                                    // Declare this property on its object literal.
                                    objLitType.defineDeclaredProperty(memberName, keyType, keyNode);
                                  }
                                }
                      children: []
                      pos: 24907
                      length: 1164
                    pos: 24899
                    length: 1178
                children: []
                pos: 24790
                length: 1287
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 26328
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 26356
                      length: 9
                    pos: 26313
                    length: 1358
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 26391
                      length: 21
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 26423
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26431
                                  length: 4
                              children: []
                              pos: 26423
                              length: 12
                          children: []
                          pos: 26422
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 26451
                                  length: 14
                              children: []
                              pos: 26450
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ImmutableList<TemplateType> ownerTypeKeys =
                                  ImmutableList.of();
                              children: []
                              pos: 26480
                              length: 63
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(node);
                              children: []
                              pos: 26554
                              length: 51
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 26616
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 26684
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 26727
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 26740
                                          length: 4
                                      children: []
                                      pos: 26727
                                      length: 17
                                  children: []
                                  pos: 26726
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: Var ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 26760
                                  length: 39
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 26816
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 26828
                                              length: 4
                                          children: []
                                          pos: 26816
                                          length: 16
                                      children: []
                                      pos: 26815
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: |-
                                          ownerType = getPrototypeOwnerType(
                                                            ObjectType.cast(ownerVar.getType()));
                                      children: []
                                      pos: 26850
                                      length: 90
                                    - type: if_statement
                                      fields:
                                        condition:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 26959
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 26972
                                                  length: 4
                                              children: []
                                              pos: 26959
                                              length: 17
                                          children: []
                                          pos: 26958
                                          length: 19
                                      children:
                                      - type: block
                                        fields: {}
                                        children:
                                        - type: expression_statement
                                          fields:
                                            text: |-
                                              ownerTypeKeys =
                                                                  ownerType.getTemplateTypeMap().getTemplateKeys();
                                          children: []
                                          pos: 26996
                                          length: 85
                                        pos: 26978
                                        length: 119
                                      pos: 26955
                                      length: 142
                                    pos: 26834
                                    length: 277
                                  pos: 26812
                                  length: 299
                                pos: 26746
                                length: 377
                              pos: 26723
                              length: 400
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!ownerTypeKeys.isEmpty()"
                                      children: []
                                      pos: 27139
                                      length: 24
                                  children: []
                                  pos: 27138
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: typeRegistry.setTemplateTypeNames(ownerTypeKeys);
                                  children: []
                                  pos: 27179
                                  length: 49
                                pos: 27165
                                length: 75
                              pos: 27135
                              length: 105
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 27252
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!ownerTypeKeys.isEmpty()"
                                      children: []
                                      pos: 27322
                                      length: 24
                                  children: []
                                  pos: 27321
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: typeRegistry.clearTemplateTypeNames();
                                  children: []
                                  pos: 27362
                                  length: 38
                                pos: 27348
                                length: 64
                              pos: 27318
                              length: 94
                            pos: 26467
                            length: 955
                          pos: 26447
                          length: 1189
                        pos: 26437
                        length: 1207
                      pos: 26419
                      length: 1225
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 27651
                      length: 14
                    pos: 26383
                    length: 1288
                children: []
                pos: 26313
                length: 1358
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 27826
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27847
                      length: 6
                    pos: 27821
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 27873
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 27925
                      length: 46
                    pos: 27865
                    length: 112
                children: []
                pos: 27821
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 28038
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 28050
                      length: 6
                    pos: 28033
                    length: 235
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 28066
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 28110
                      length: 35
                    - type: expression_statement
                      fields:
                        text: |-
                          defineSlot(catchName, n,
                                    getDeclaredType(
                                        catchName.getJSDocInfo(), catchName, null));
                      children: []
                      pos: 28152
                      length: 110
                    pos: 28058
                    length: 210
                children: []
                pos: 28033
                length: 235
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 28332
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 28342
                      length: 6
                    pos: 28327
                    length: 532
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 28358
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 28400
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 28445
                              length: 23
                          children: []
                          pos: 28444
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 28484
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 28492
                                      length: 4
                                  children: []
                                  pos: 28484
                                  length: 12
                              children: []
                              pos: 28483
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 28541
                              length: 63
                            pos: 28498
                            length: 116
                          pos: 28480
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 28623
                          length: 94
                        pos: 28470
                        length: 255
                      pos: 28441
                      length: 412
                    pos: 28350
                    length: 509
                children: []
                pos: 28327
                length: 532
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 28921
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 28943
                      length: 6
                    pos: 28916
                    length: 837
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 28959
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(n);
                      children: []
                      pos: 29114
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = NodeUtil.getBestJSDocInfo(n);
                      children: []
                      pos: 29161
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 29214
                      length: 57
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 29278
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 29441
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 29647
                              length: 33
                          children: []
                          pos: 29646
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 29692
                          length: 47
                        pos: 29682
                        length: 65
                      pos: 29643
                      length: 104
                    pos: 28951
                    length: 802
                children: []
                pos: 28916
                length: 837
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 30113
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 30124
                      length: 9
                    pos: 30100
                    length: 367
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 30169
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(info, name, value);
                      children: []
                      pos: 30236
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 30296
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 30304
                                  length: 4
                              children: []
                              pos: 30296
                              length: 12
                          children: []
                          pos: 30295
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: 'type = name.isFromExterns() ? unknownType : null;'
                          children: []
                          pos: 30369
                          length: 49
                        pos: 30310
                        length: 116
                      pos: 30292
                      length: 134
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 30433
                      length: 28
                    pos: 30161
                    length: 306
                children: []
                pos: 30100
                length: 367
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 30813
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 30851
                      length: 17
                    pos: 30797
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 30911
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 30919
                                  length: 4
                              children: []
                              pos: 30911
                              length: 12
                          children: []
                          pos: 30910
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 30935
                          length: 12
                        pos: 30925
                        length: 30
                      pos: 30907
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 30966
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 30976
                                      length: 4
                                  children: []
                                  pos: 30966
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue)
                                  children: []
                                  pos: 30994
                                  length: 31
                              children: []
                              pos: 30966
                              length: 59
                          children: []
                          pos: 30965
                          length: 61
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 31037
                          length: 13
                        pos: 31027
                        length: 31
                      pos: 30962
                      length: 96
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 31065
                      length: 56
                    pos: 30899
                    length: 228
                children: []
                pos: 30797
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 32175
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 32212
                      length: 21
                    pos: 32154
                    length: 4563
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 32344
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 32463
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 32473
                                          length: 4
                                      children: []
                                      pos: 32463
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 32481
                                      length: 24
                                  children: []
                                  pos: 32463
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 32509
                                  length: 16
                              children: []
                              pos: 32463
                              length: 62
                          children: []
                          pos: 32462
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 32537
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 32600
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 32607
                                              length: 4
                                          children: []
                                          pos: 32600
                                          length: 11
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: var.getType()
                                              children: []
                                              pos: 32615
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 32632
                                              length: 4
                                          children: []
                                          pos: 32615
                                          length: 21
                                      children: []
                                      pos: 32600
                                      length: 36
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: var.getType().isFunctionType()
                                      children: []
                                      pos: 32652
                                      length: 30
                                  children: []
                                  pos: 32600
                                  length: 82
                              children: []
                              pos: 32599
                              length: 84
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = var.getType().toMaybeFunctionType();
                              children: []
                              pos: 32696
                              length: 64
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 32776
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 32807
                                                  length: 25
                                              children: []
                                              pos: 32776
                                              length: 56
                                          children: []
                                          pos: 32775
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 32851
                                          length: 33
                                      children: []
                                      pos: 32775
                                      length: 109
                                  children: []
                                  pos: 32774
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 32900
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 32945
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 32953
                                                  length: 4
                                              children: []
                                              pos: 32945
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 32961
                                              length: 16
                                          children: []
                                          pos: 32945
                                          length: 32
                                      children: []
                                      pos: 32944
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 32995
                                      length: 63
                                    pos: 32979
                                    length: 93
                                  pos: 32941
                                  length: 131
                                pos: 32886
                                length: 198
                              pos: 32771
                              length: 313
                            pos: 32684
                            length: 410
                          pos: 32596
                          length: 498
                        pos: 32527
                        length: 575
                      pos: 32459
                      length: 643
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 33114
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 33130
                                  length: 4
                              children: []
                              pos: 33114
                              length: 20
                          children: []
                          pos: 33113
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 33146
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.isFunction();
                          children: []
                          pos: 33209
                          length: 72
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 33290
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 33341
                          length: 88
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 33443
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 33451
                                          length: 4
                                      children: []
                                      pos: 33443
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 33459
                                      length: 14
                                  children: []
                                  pos: 33443
                                  length: 30
                              children: []
                              pos: 33442
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 33487
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 33632
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 33690
                                      length: 21
                                  children: []
                                  pos: 33689
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = type.toMaybeFunctionType();
                                  children: []
                                  pos: 33727
                                  length: 42
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 33782
                                  length: 32
                                pos: 33713
                                length: 113
                              pos: 33686
                              length: 140
                            pos: 33475
                            length: 361
                          pos: 33439
                          length: 397
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 33850
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 33866
                                      length: 4
                                  children: []
                                  pos: 33850
                                  length: 20
                              children: []
                              pos: 33849
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(lvalueNode);
                              children: []
                              pos: 33939
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 34007
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: Var ownerVar = null;
                              children: []
                              pos: 34075
                              length: 20
                            - type: local_variable_declaration
                              fields:
                                text: String propName = null;
                              children: []
                              pos: 34106
                              length: 23
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 34140
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 34183
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 34196
                                          length: 4
                                      children: []
                                      pos: 34183
                                      length: 17
                                  children: []
                                  pos: 34182
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 34216
                                  length: 35
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 34268
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34280
                                              length: 4
                                          children: []
                                          pos: 34268
                                          length: 16
                                      children: []
                                      pos: 34267
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: ownerType = ObjectType.cast(ownerVar.getType());
                                      children: []
                                      pos: 34302
                                      length: 48
                                    pos: 34286
                                    length: 78
                                  pos: 34264
                                  length: 100
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: name
                                              children: []
                                              pos: 34381
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34389
                                              length: 4
                                          children: []
                                          pos: 34381
                                          length: 12
                                      children: []
                                      pos: 34380
                                      length: 14
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: propName = name.substring(ownerName.length()
                                          + 1);
                                      children: []
                                      pos: 34411
                                      length: 50
                                    pos: 34395
                                    length: 80
                                  pos: 34377
                                  length: 98
                                pos: 34202
                                length: 285
                              pos: 34179
                              length: 308
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType prototypeOwner = getPrototypeOwnerType(ownerType);
                              children: []
                              pos: 34499
                              length: 61
                            - type: local_variable_declaration
                              fields:
                                text: TemplateTypeMap prototypeOwnerTypeMap = null;
                              children: []
                              pos: 34571
                              length: 45
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: prototypeOwner
                                              children: []
                                              pos: 34631
                                              length: 14
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34649
                                              length: 4
                                          children: []
                                          pos: 34631
                                          length: 22
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: prototypeOwner.getTypeOfThis()
                                              children: []
                                              pos: 34671
                                              length: 30
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34705
                                              length: 4
                                          children: []
                                          pos: 34671
                                          length: 38
                                      children: []
                                      pos: 34631
                                      length: 78
                                  children: []
                                  pos: 34630
                                  length: 80
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      prototypeOwnerTypeMap =
                                                        prototypeOwner.getTypeOfThis().getTemplateTypeMap();
                                  children: []
                                  pos: 34727
                                  length: 94
                                pos: 34711
                                length: 122
                              pos: 34627
                              length: 206
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenType = null;
                              children: []
                              pos: 34845
                              length: 35
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 34895
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34908
                                              length: 4
                                          children: []
                                          pos: 34895
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: propName
                                              children: []
                                              pos: 34916
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34928
                                              length: 4
                                          children: []
                                          pos: 34916
                                          length: 16
                                      children: []
                                      pos: 34895
                                      length: 37
                                  children: []
                                  pos: 34894
                                  length: 39
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      overriddenType = findOverriddenFunction(
                                                      ownerType, propName, prototypeOwnerTypeMap);
                                  children: []
                                  pos: 34948
                                  length: 101
                                pos: 34934
                                length: 127
                              pos: 34891
                              length: 170
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setContents(getFunctionAnalysisResults(fnRoot))
                                                .inferFromOverriddenFunction(overriddenType, parametersNode)
                                                .inferTemplateTypeName(info, prototypeOwner)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 35073
                              length: 404
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 35526
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 35577
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 35590
                                                  length: 4
                                              children: []
                                              pos: 35577
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: ownerType.isFunctionPrototypeType()
                                              children: []
                                              pos: 35598
                                              length: 35
                                          children: []
                                          pos: 35577
                                          length: 56
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerType.getOwnerFunction().hasInstanceType()
                                          children: []
                                          pos: 35651
                                          length: 46
                                      children: []
                                      pos: 35577
                                      length: 120
                                  children: []
                                  pos: 35576
                                  length: 122
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      builder.inferThisType(
                                                      info, ownerType.getOwnerFunction().getInstanceType());
                                  children: []
                                  pos: 35713
                                  length: 93
                                - type: expression_statement
                                  fields:
                                    text: searchedForThisType = true;
                                  children: []
                                  pos: 35819
                                  length: 27
                                pos: 35699
                                length: 159
                              pos: 35573
                              length: 856
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 36445
                                      length: 20
                                  children: []
                                  pos: 36444
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info);
                                  children: []
                                  pos: 36481
                                  length: 28
                                pos: 36467
                                length: 54
                              pos: 36441
                              length: 80
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .buildAndRegister();
                              children: []
                              pos: 36533
                              length: 114
                            pos: 33872
                            length: 2785
                          pos: 33846
                          length: 2811
                        pos: 33136
                        length: 3529
                      pos: 33110
                      length: 3555
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 36691
                      length: 20
                    pos: 32335
                    length: 4382
                children: []
                pos: 32154
                length: 4563
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getPrototypeOwnerType
                    children: []
                    pos: 36742
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 36764
                      length: 20
                    pos: 36723
                    length: 212
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 36798
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 36811
                                      length: 4
                                  children: []
                                  pos: 36798
                                  length: 17
                                right:
                                  type: method_invocation
                                  fields:
                                    text: ownerType.isFunctionPrototypeType()
                                  children: []
                                  pos: 36819
                                  length: 35
                              children: []
                              pos: 36798
                              length: 56
                          children: []
                          pos: 36797
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return ownerType.getOwnerFunction();
                          children: []
                          pos: 36866
                          length: 36
                        pos: 36856
                        length: 54
                      pos: 36794
                      length: 116
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 36917
                      length: 12
                    pos: 36786
                    length: 149
                children: []
                pos: 36723
                length: 212
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 37049
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 37081
                      length: 20
                    pos: 37028
                    length: 1075
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType result = null;
                      children: []
                      pos: 37153
                      length: 27
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 37274
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: propType
                                      children: []
                                      pos: 37339
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 37351
                                      length: 4
                                  children: []
                                  pos: 37339
                                  length: 16
                                right:
                                  type: method_invocation
                                  fields:
                                    text: propType.isFunctionType()
                                  children: []
                                  pos: 37359
                                  length: 25
                              children: []
                              pos: 37339
                              length: 45
                          children: []
                          pos: 37338
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: result =  propType.toMaybeFunctionType();
                          children: []
                          pos: 37396
                          length: 41
                        pos: 37386
                        length: 59
                      pos: 37335
                      length: 531
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: result
                                          children: []
                                          pos: 37878
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37888
                                          length: 4
                                      children: []
                                      pos: 37878
                                      length: 14
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: typeMap
                                          children: []
                                          pos: 37896
                                          length: 7
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37907
                                          length: 4
                                      children: []
                                      pos: 37896
                                      length: 15
                                  children: []
                                  pos: 37878
                                  length: 33
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!typeMap.isEmpty()"
                                  children: []
                                  pos: 37915
                                  length: 18
                              children: []
                              pos: 37878
                              length: 55
                          children: []
                          pos: 37877
                          length: 57
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              result = result.visit(
                                          new TemplateTypeMapReplacer(typeRegistry, typeMap))
                                          .toMaybeFunctionType();
                          children: []
                          pos: 37945
                          length: 122
                        pos: 37935
                        length: 140
                      pos: 37874
                      length: 201
                    - type: return_statement
                      fields:
                        text: return result;
                      children: []
                      pos: 38083
                      length: 14
                    pos: 37145
                    length: 958
                children: []
                pos: 37028
                length: 1075
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 38810
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 38834
                      length: 11
                    pos: 38793
                    length: 1636
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 38909
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 38949
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 39011
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 39047
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 39057
                                      length: 4
                                  children: []
                                  pos: 39047
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 39065
                                  length: 24
                              children: []
                              pos: 39047
                              length: 42
                          children: []
                          pos: 39046
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 39136
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 39199
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 39206
                                          length: 4
                                      children: []
                                      pos: 39199
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 39214
                                      length: 33
                                  children: []
                                  pos: 39199
                                  length: 48
                              children: []
                              pos: 39198
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 39261
                              length: 36
                            pos: 39249
                            length: 58
                          pos: 39195
                          length: 112
                        pos: 39091
                        length: 224
                      pos: 39043
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 39327
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 39339
                                  length: 4
                              children: []
                              pos: 39327
                              length: 16
                          children: []
                          pos: 39326
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 39355
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, rValue,
                              elementsType);
                          children: []
                          pos: 39456
                          length: 67
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 39537
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 39547
                                          length: 4
                                      children: []
                                      pos: 39537
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isObjectLit()
                                      children: []
                                      pos: 39555
                                      length: 20
                                  children: []
                                  pos: 39537
                                  length: 38
                              children: []
                              pos: 39536
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 39624
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 39669
                              length: 589
                            pos: 39577
                            length: 691
                          pos: 39533
                          length: 735
                        pos: 39345
                        length: 931
                      pos: 39323
                      length: 953
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 40288
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 40296
                                      length: 4
                                  children: []
                                  pos: 40288
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 40304
                                  length: 16
                              children: []
                              pos: 40288
                              length: 32
                          children: []
                          pos: 40287
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 40332
                          length: 59
                        pos: 40322
                        length: 77
                      pos: 40284
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 40407
                      length: 16
                    pos: 38901
                    length: 1528
                children: []
                pos: 38793
                length: 1636
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 40852
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 40863
                      length: 9
                    pos: 40839
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 40908
                      length: 45
                    pos: 40900
                    length: 59
                children: []
                pos: 40839
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 41453
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 41464
                      length: 6
                    pos: 41448
                    length: 695
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 41524
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.isName()
                              children: []
                              pos: 41727
                              length: 10
                          children: []
                          pos: 41726
                          length: 12
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.isFunction() ||
                                          parent.isVar() ||
                                          parent.isParamList() ||
                                          parent.isCatch());
                          children: []
                          pos: 41749
                          length: 160
                        pos: 41739
                        length: 178
                      pos: 41723
                      length: 347
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 42077
                      length: 60
                    pos: 41516
                    length: 627
                children: []
                pos: 41448
                length: 695
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 42584
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 42595
                      length: 6
                    pos: 42579
                    length: 3843
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 42684
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.isName() && scope.isGlobal();
                      children: []
                      pos: 42745
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.isVar() ||
                                     parent.isFunction());
                      children: []
                      pos: 42805
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 43135
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isGetProp()
                                      children: []
                                      pos: 43177
                                      length: 13
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 43194
                                      length: 17
                                  children: []
                                  pos: 43177
                                  length: 34
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 43225
                                  length: 29
                              children: []
                              pos: 43177
                              length: 77
                          children: []
                          pos: 43176
                          length: 79
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 43266
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 43436
                                  length: 44
                              children: []
                              pos: 43435
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 43494
                              length: 42
                            pos: 43482
                            length: 64
                          pos: 43432
                          length: 114
                        pos: 43256
                        length: 298
                      pos: 43173
                      length: 381
                    - type: local_variable_declaration
                      fields:
                        text: Var newVar = null;
                      children: []
                      pos: 43679
                      length: 18
                    - type: local_variable_declaration
                      fields:
                        text: CompilerInput input = compiler.getInput(inputId);
                      children: []
                      pos: 43741
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 43801
                              length: 48
                          children: []
                          pos: 43800
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 43861
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              newVar = validator.expectUndeclaredVariable(
                                          sourceName, input, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 43921
                          length: 115
                        pos: 43851
                        length: 193
                      pos: 43797
                      length: 806
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType fnType = JSType.toMaybeFunctionType(type);
                      children: []
                      pos: 44688
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: fnType
                                      children: []
                                      pos: 44754
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 44764
                                      length: 4
                                  children: []
                                  pos: 44754
                                  length: 14
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!type.isEmptyType()"
                                  children: []
                                  pos: 44842
                                  length: 19
                              children: []
                              pos: 44754
                              length: 107
                          children: []
                          pos: 44753
                          length: 109
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isConstructor()
                                              children: []
                                              pos: 45214
                                              length: 22
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isInterface()
                                              children: []
                                              pos: 45240
                                              length: 20
                                          children: []
                                          pos: 45214
                                          length: 46
                                      children: []
                                      pos: 45213
                                      length: 48
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: variableName.equals(fnType.getReferenceName())
                                      children: []
                                      pos: 45277
                                      length: 46
                                  children: []
                                  pos: 45213
                                  length: 110
                              children: []
                              pos: 45212
                              length: 112
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  finishConstructorDefinition(n, variableName, fnType, scopeToDeclareIn,
                                                                        input, newVar);
                              children: []
                              pos: 45337
                              length: 124
                            pos: 45325
                            length: 146
                          pos: 45209
                          length: 262
                        pos: 44863
                        length: 616
                      pos: 44750
                      length: 729
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: shouldDeclareOnGlobalThis
                              children: []
                              pos: 45491
                              length: 25
                          children: []
                          pos: 45490
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType globalThis =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS);
                          children: []
                          pos: 45528
                          length: 82
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: identifier
                                  fields:
                                    text: inferred
                                  children: []
                                  pos: 45623
                                  length: 8
                              children: []
                              pos: 45622
                              length: 10
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  globalThis.defineInferredProperty(variableName,
                                                type == null ?
                                                getNativeType(JSTypeNative.NO_TYPE) :
                                                type,
                                                n);
                              children: []
                              pos: 45645
                              length: 166
                            pos: 45633
                            length: 188
                          pos: 45619
                          length: 287
                        pos: 45518
                        length: 396
                      pos: 45487
                      length: 427
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: isGlobalVar
                                              children: []
                                              pos: 45926
                                              length: 11
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: '"Window".equals(variableName)'
                                              children: []
                                              pos: 45941
                                              length: 29
                                          children: []
                                          pos: 45926
                                          length: 44
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 45984
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 45992
                                              length: 4
                                          children: []
                                          pos: 45984
                                          length: 12
                                      children: []
                                      pos: 45926
                                      length: 70
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 46010
                                      length: 21
                                  children: []
                                  pos: 45926
                                  length: 105
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 46045
                                  length: 20
                              children: []
                              pos: 45926
                              length: 139
                          children: []
                          pos: 45925
                          length: 141
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 46077
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 46191
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 46253
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn((type.toMaybeFunctionType()).getInstanceType());
                          children: []
                          pos: 46312
                          length: 96
                        pos: 46067
                        length: 349
                      pos: 45922
                      length: 494
                    pos: 42676
                    length: 3746
                children: []
                pos: 42579
                length: 3843
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: finishConstructorDefinition
                    children: []
                    pos: 46441
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46478
                      length: 6
                    pos: 46428
                    length: 1934
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType superClassCtor = fnType.getSuperClassConstructor();
                      children: []
                      pos: 46652
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: Property prototypeSlot = fnType.getSlot("prototype");
                      children: []
                      pos: 46723
                      length: 53
                    - type: expression_statement
                      fields:
                        text: prototypeSlot.setNode(n);
                      children: []
                      pos: 47201
                      length: 25
                    - type: local_variable_declaration
                      fields:
                        text: String prototypeName = variableName + ".prototype";
                      children: []
                      pos: 47234
                      length: 51
                    - type: local_variable_declaration
                      fields:
                        text: Var prototypeVar = scopeToDeclareIn.getVar(prototypeName);
                      children: []
                      pos: 47501
                      length: 58
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: prototypeVar
                                      children: []
                                      pos: 47570
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47586
                                      length: 4
                                  children: []
                                  pos: 47570
                                  length: 20
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: field_access
                                      fields:
                                        text: prototypeVar.scope
                                      children: []
                                      pos: 47594
                                      length: 18
                                    right:
                                      type: identifier
                                      fields:
                                        text: scopeToDeclareIn
                                      children: []
                                      pos: 47616
                                      length: 16
                                  children: []
                                  pos: 47594
                                  length: 38
                              children: []
                              pos: 47570
                              length: 62
                          children: []
                          pos: 47569
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: scopeToDeclareIn.undeclare(prototypeVar);
                          children: []
                          pos: 47644
                          length: 41
                        pos: 47634
                        length: 59
                      pos: 47566
                      length: 127
                    - type: expression_statement
                      fields:
                        text: |-
                          scopeToDeclareIn.declare(prototypeName,
                                    n, prototypeSlot.getType(), input,
                                    /* declared iff there's an explicit supertype */
                                    superClassCtor == null ||
                                    superClassCtor.getInstanceType().isEquivalentTo(
                                        getNativeType(OBJECT_TYPE)));
                      children: []
                      pos: 47701
                      length: 282
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: newVar.getInitialValue()
                                      children: []
                                      pos: 48089
                                      length: 24
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 48117
                                      length: 4
                                  children: []
                                  pos: 48089
                                  length: 32
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!n.isFromExterns()"
                                  children: []
                                  pos: 48135
                                  length: 18
                              children: []
                              pos: 48089
                              length: 64
                          children: []
                          pos: 48088
                          length: 66
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(sourceName, n,
                                              fnType.isConstructor() ?
                                              CTOR_INITIALIZER : IFACE_INITIALIZER,
                                              variableName));
                          children: []
                          pos: 48165
                          length: 183
                        pos: 48155
                        length: 201
                      pos: 48085
                      length: 271
                    pos: 46593
                    length: 1769
                children: []
                pos: 46428
                length: 1934
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 48476
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 48503
                      length: 6
                    pos: 48460
                    length: 148
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Scope scope = getQnameRootScope(n);
                      children: []
                      pos: 48519
                      length: 35
                    - type: return_statement
                      fields:
                        text: return scope != null && scope.isGlobal();
                      children: []
                      pos: 48561
                      length: 41
                    pos: 48511
                    length: 97
                children: []
                pos: 48460
                length: 148
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getQnameRootScope
                    children: []
                    pos: 48700
                    length: 17
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 48718
                      length: 6
                    pos: 48686
                    length: 275
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 48734
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: root.isName()
                              children: []
                              pos: 48792
                              length: 13
                          children: []
                          pos: 48791
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 48817
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 48871
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 48878
                                      length: 4
                                  children: []
                                  pos: 48871
                                  length: 11
                              children: []
                              pos: 48870
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.getScope();
                              children: []
                              pos: 48896
                              length: 22
                            pos: 48884
                            length: 44
                          pos: 48867
                          length: 61
                        pos: 48807
                        length: 129
                      pos: 48788
                      length: 148
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 48943
                      length: 12
                    pos: 48726
                    length: 235
                children: []
                pos: 48686
                length: 275
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 49324
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: JSDocInfo info
                      children: []
                      pos: 49340
                      length: 14
                    pos: 49309
                    length: 2343
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 49412
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 49420
                                      length: 4
                                  children: []
                                  pos: 49412
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 49428
                                  length: 14
                              children: []
                              pos: 49412
                              length: 30
                          children: []
                          pos: 49411
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(lValue, info);
                          children: []
                          pos: 49454
                          length: 49
                        pos: 49444
                        length: 67
                      pos: 49408
                      length: 812
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: isConstantSymbol(info, lValue)
                              children: []
                              pos: 50296
                              length: 30
                          children: []
                          pos: 50295
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 50342
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 50352
                                      length: 4
                                  children: []
                                  pos: 50342
                                  length: 14
                              children: []
                              pos: 50341
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSDocInfo rValueInfo = rValue.getJSDocInfo();
                              children: []
                              pos: 50370
                              length: 45
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: rValueInfo
                                              children: []
                                              pos: 50430
                                              length: 10
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 50444
                                              length: 4
                                          children: []
                                          pos: 50430
                                          length: 18
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rValueInfo.hasType()
                                          children: []
                                          pos: 50452
                                          length: 20
                                      children: []
                                      pos: 50430
                                      length: 42
                                  children: []
                                  pos: 50429
                                  length: 44
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: return_statement
                                  fields:
                                    text: return rValueInfo.getType().evaluate(scope,
                                      typeRegistry);
                                  children: []
                                  pos: 50564
                                  length: 58
                                pos: 50474
                                length: 160
                              pos: 50426
                              length: 1145
                            pos: 50358
                            length: 1223
                          pos: 50338
                          length: 1243
                        pos: 50328
                        length: 1261
                      pos: 50292
                      length: 1297
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(lValue, info);
                      children: []
                      pos: 51597
                      length: 49
                    pos: 49400
                    length: 2252
                children: []
                pos: 49309
                length: 2343
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 51679
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Var v"
                      children: []
                      pos: 51695
                      length: 15
                    pos: 51658
                    length: 211
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: 'JSType t = v == null ? null : v.getType();'
                      children: []
                      pos: 51720
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: 'ObjectType o = t == null ? null : t.dereference();'
                      children: []
                      pos: 51769
                      length: 50
                    - type: return_statement
                      fields:
                        text: return JSType.toMaybeFunctionType(o);
                      children: []
                      pos: 51826
                      length: 37
                    pos: 51712
                    length: 157
                children: []
                pos: 51658
                length: 211
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForCallingConventionDefiningCalls
                    children: []
                    pos: 51975
                    length: 38
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 52023
                      length: 6
                    pos: 51962
                    length: 228
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: |-
                          codingConvention.checkForCallingConventionDefiningCalls(n,
                                    delegateCallingConventions);
                      children: []
                      pos: 52087
                      length: 97
                    pos: 52079
                    length: 111
                children: []
                pos: 51962
                length: 228
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 52406
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 52433
                      length: 15
                    pos: 52393
                    length: 3009
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 52466
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 52567
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52583
                                  length: 4
                              children: []
                              pos: 52567
                              length: 20
                          children: []
                          pos: 52566
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType superCtor = getFunctionType(
                                          scope.getVar(relationship.superclassName));
                          children: []
                          pos: 52599
                          length: 97
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType subCtor = getFunctionType(
                                          scope.getVar(relationship.subclassName));
                          children: []
                          pos: 52705
                          length: 93
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: superCtor
                                                  children: []
                                                  pos: 52811
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 52824
                                                  length: 4
                                              children: []
                                              pos: 52811
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: superCtor.isConstructor()
                                              children: []
                                              pos: 52832
                                              length: 25
                                          children: []
                                          pos: 52811
                                          length: 46
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 52873
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 52884
                                              length: 4
                                          children: []
                                          pos: 52873
                                          length: 15
                                      children: []
                                      pos: 52811
                                      length: 77
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: subCtor.isConstructor()
                                      children: []
                                      pos: 52892
                                      length: 23
                                  children: []
                                  pos: 52811
                                  length: 104
                              children: []
                              pos: 52810
                              length: 106
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType superClass = superCtor.getInstanceType();
                              children: []
                              pos: 52929
                              length: 52
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType subClass = subCtor.getInstanceType();
                              children: []
                              pos: 52992
                              length: 48
                            - type: expression_statement
                              fields:
                                text: superCtor = superClass.getConstructor();
                              children: []
                              pos: 53238
                              length: 40
                            - type: expression_statement
                              fields:
                                text: subCtor = subClass.getConstructor();
                              children: []
                              pos: 53289
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: field_access
                                                  fields:
                                                    text: relationship.type
                                                  children: []
                                                  pos: 53341
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: SubclassType.INHERITS
                                                  children: []
                                                  pos: 53362
                                                  length: 21
                                              children: []
                                              pos: 53341
                                              length: 42
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!superClass.isEmptyType()"
                                              children: []
                                              pos: 53401
                                              length: 25
                                          children: []
                                          pos: 53341
                                          length: 85
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!subClass.isEmptyType()"
                                          children: []
                                          pos: 53430
                                          length: 23
                                      children: []
                                      pos: 53341
                                      length: 112
                                  children: []
                                  pos: 53340
                                  length: 114
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 53469
                                  length: 54
                                pos: 53455
                                length: 80
                              pos: 53337
                              length: 198
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 53551
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53564
                                              length: 4
                                          children: []
                                          pos: 53551
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 53572
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53583
                                              length: 4
                                          children: []
                                          pos: 53572
                                          length: 15
                                      children: []
                                      pos: 53551
                                      length: 36
                                  children: []
                                  pos: 53550
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 53603
                                  length: 99
                                pos: 53589
                                length: 125
                              pos: 53547
                              length: 167
                            pos: 52917
                            length: 807
                          pos: 52807
                          length: 917
                        pos: 52589
                        length: 1143
                      pos: 52563
                      length: 1169
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 53740
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 53843
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 53871
                                  length: 4
                              children: []
                              pos: 53843
                              length: 32
                          children: []
                          pos: 53842
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 53887
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 54001
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54015
                                      length: 4
                                  children: []
                                  pos: 54001
                                  length: 18
                              children: []
                              pos: 54000
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 54033
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 54105
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54121
                                          length: 4
                                      children: []
                                      pos: 54105
                                      length: 20
                                  children: []
                                  pos: 54104
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 54141
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 54240
                                  length: 92
                                pos: 54127
                                length: 217
                              pos: 54101
                              length: 243
                            pos: 54021
                            length: 333
                          pos: 53997
                          length: 357
                        pos: 53877
                        length: 485
                      pos: 53839
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 54370
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 54479
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54503
                                  length: 4
                              children: []
                              pos: 54479
                              length: 28
                          children: []
                          pos: 54478
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 54519
                          length: 48
                        pos: 54509
                        length: 66
                      pos: 54475
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(n);
                      children: []
                      pos: 54583
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 54683
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54704
                                  length: 4
                              children: []
                              pos: 54683
                              length: 25
                          children: []
                          pos: 54682
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: field_access
                                      fields:
                                        text: objectLiteralCast.diagnosticType
                                      children: []
                                      pos: 54724
                                      length: 32
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54760
                                      length: 4
                                  children: []
                                  pos: 54724
                                  length: 40
                              children: []
                              pos: 54723
                              length: 42
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  ObjectType type = ObjectType.cast(
                                                typeRegistry.getType(objectLiteralCast.typeName));
                              children: []
                              pos: 54778
                              length: 99
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 54892
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54900
                                              length: 4
                                          children: []
                                          pos: 54892
                                          length: 12
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: type.getConstructor()
                                              children: []
                                              pos: 54908
                                              length: 21
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54933
                                              length: 4
                                          children: []
                                          pos: 54908
                                          length: 29
                                      children: []
                                      pos: 54892
                                      length: 45
                                  children: []
                                  pos: 54891
                                  length: 47
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: setDeferredType(objectLiteralCast.objectNode,
                                      type);
                                  children: []
                                  pos: 54953
                                  length: 52
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      objectLiteralCast.objectNode.putBooleanProp(
                                                      Node.REFLECTED_OBJECT, true);
                                  children: []
                                  pos: 55018
                                  length: 90
                                pos: 54939
                                length: 181
                              pos: 54888
                              length: 358
                            pos: 54766
                            length: 490
                          pos: 54720
                          length: 668
                        pos: 54710
                        length: 686
                      pos: 54679
                      length: 717
                    pos: 52458
                    length: 2944
                children: []
                pos: 52393
                length: 3009
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 55499
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 55534
                      length: 41
                    pos: 55486
                    length: 1839
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 55585
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 55702
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 55825
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 55964
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 55983
                                          length: 4
                                      children: []
                                      pos: 55964
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 56001
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 56023
                                          length: 4
                                      children: []
                                      pos: 56001
                                      length: 26
                                  children: []
                                  pos: 55964
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 56041
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 56064
                                      length: 4
                                  children: []
                                  pos: 56041
                                  length: 27
                              children: []
                              pos: 55964
                              length: 104
                          children: []
                          pos: 55963
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 56080
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 56151
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 56228
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 56312
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 56329
                                              length: 4
                                          children: []
                                          pos: 56312
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 56337
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 56357
                                              length: 4
                                          children: []
                                          pos: 56337
                                          length: 24
                                      children: []
                                      pos: 56312
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 56377
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 56398
                                          length: 4
                                      children: []
                                      pos: 56377
                                      length: 25
                                  children: []
                                  pos: 56312
                                  length: 90
                              children: []
                              pos: 56311
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 56416
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 56524
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 56626
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null, null);
                              children: []
                              pos: 56816
                              length: 180
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 57007
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 57073
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 57243
                              length: 58
                            pos: 56404
                            length: 907
                          pos: 56308
                          length: 1003
                        pos: 56070
                        length: 1249
                      pos: 55960
                      length: 1359
                    pos: 55577
                    length: 1748
                children: []
                pos: 55486
                length: 1839
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 57759
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 57785
                      length: 15
                    pos: 57754
                    length: 4651
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 57870
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 57912
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 57967
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 58010
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 58064
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(info, n, rhsValue);
                      children: []
                      pos: 58785
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 58850
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 58863
                                      length: 4
                                  children: []
                                  pos: 58850
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 58871
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 58883
                                      length: 4
                                  children: []
                                  pos: 58871
                                  length: 16
                              children: []
                              pos: 58850
                              length: 37
                          children: []
                          pos: 58849
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 58934
                          length: 33
                        pos: 58889
                        length: 86
                      pos: 58846
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 59222
                              length: 28
                          children: []
                          pos: 59221
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 59262
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 59306
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 59314
                                      length: 4
                                  children: []
                                  pos: 59306
                                  length: 12
                              children: []
                              pos: 59305
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType qVarType = ObjectType.cast(qVar.getType());
                              children: []
                              pos: 59649
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: qVarType
                                                  children: []
                                                  pos: 59718
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 59730
                                                  length: 4
                                              children: []
                                              pos: 59718
                                              length: 16
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: rhsValue
                                                  children: []
                                                  pos: 59752
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 59764
                                                  length: 4
                                              children: []
                                              pos: 59752
                                              length: 16
                                          children: []
                                          pos: 59718
                                          length: 50
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rhsValue.isObjectLit()
                                          children: []
                                          pos: 59786
                                          length: 22
                                      children: []
                                      pos: 59718
                                      length: 90
                                  children: []
                                  pos: 59717
                                  length: 92
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      typeRegistry.resetImplicitPrototype(
                                                      rhsValue.getJSType(), qVarType.getImplicitPrototype());
                                  children: []
                                  pos: 59824
                                  length: 108
                                pos: 59810
                                length: 134
                              pos: 59714
                              length: 652
                            - type: expression_statement
                              fields:
                                text: qVar.getScope().undeclare(qVar);
                              children: []
                              pos: 60378
                              length: 32
                            pos: 59320
                            length: 1100
                          pos: 59302
                          length: 1118
                        pos: 59252
                        length: 1176
                      pos: 59218
                      length: 1210
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 60440
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60453
                                  length: 4
                              children: []
                              pos: 60440
                              length: 17
                          children: []
                          pos: 60439
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: parent.isExprResult()
                                  children: []
                                  pos: 60473
                                  length: 21
                              children: []
                              pos: 60472
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 60508
                              length: 148
                            pos: 60496
                            length: 170
                          pos: 60469
                          length: 197
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 60676
                          length: 7
                        pos: 60459
                        length: 232
                      pos: 60436
                      length: 255
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean inferred = isQualifiedNameInferred(
                                    qName, n, info, rhsValue, valueType);
                      children: []
                      pos: 60699
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 60801
                              length: 9
                          children: []
                          pos: 60800
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 60822
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 60883
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 60896
                                      length: 4
                                  children: []
                                  pos: 60883
                                  length: 17
                              children: []
                              pos: 60882
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 61015
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 61098
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 61152
                                                  length: 42
                                              children: []
                                              pos: 61098
                                              length: 96
                                          children: []
                                          pos: 61097
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 61215
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 61227
                                                          length: 31
                                                      children: []
                                                      pos: 61215
                                                      length: 43
                                                  children: []
                                                  pos: 61214
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 61278
                                                  length: 27
                                              children: []
                                              pos: 61214
                                              length: 91
                                          children: []
                                          pos: 61213
                                          length: 93
                                      children: []
                                      pos: 61097
                                      length: 209
                                  children: []
                                  pos: 61096
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, n);
                                  children: []
                                  pos: 61396
                                  length: 57
                                pos: 61308
                                length: 157
                              pos: 61093
                              length: 372
                            pos: 60902
                            length: 573
                          pos: 60879
                          length: 596
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 61617
                          length: 43
                        pos: 60812
                        length: 856
                      pos: 60797
                      length: 1602
                    pos: 57862
                    length: 4543
                children: []
                pos: 57754
                length: 4651
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQualifiedNameInferred
                    children: []
                    pos: 63454
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String qName
                      children: []
                      pos: 63487
                      length: 12
                    pos: 63438
                    length: 1998
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 63578
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 63591
                                  length: 4
                              children: []
                              pos: 63578
                              length: 17
                          children: []
                          pos: 63577
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 63607
                          length: 12
                        pos: 63597
                        length: 30
                      pos: 63574
                      length: 53
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qName
                                      children: []
                                      pos: 63711
                                      length: 5
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 63720
                                      length: 4
                                  children: []
                                  pos: 63711
                                  length: 13
                                right:
                                  type: method_invocation
                                  fields:
                                    text: qName.endsWith(".prototype")
                                  children: []
                                  pos: 63728
                                  length: 28
                              children: []
                              pos: 63711
                              length: 45
                          children: []
                          pos: 63710
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String className = qName.substring(0, qName.lastIndexOf(".prototype"));
                          children: []
                          pos: 63768
                          length: 71
                        - type: local_variable_declaration
                          fields:
                            text: Var slot = scope.getSlot(className);
                          children: []
                          pos: 63848
                          length: 36
                        - type: local_variable_declaration
                          fields:
                            text: 'JSType classType = slot == null ? null : slot.getType();'
                          children: []
                          pos: 63893
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: classType
                                          children: []
                                          pos: 63962
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 63975
                                          length: 4
                                      children: []
                                      pos: 63962
                                      length: 17
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: classType.isConstructor()
                                              children: []
                                              pos: 63996
                                              length: 25
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: classType.isInterface()
                                              children: []
                                              pos: 64025
                                              length: 23
                                          children: []
                                          pos: 63996
                                          length: 52
                                      children: []
                                      pos: 63995
                                      length: 54
                                  children: []
                                  pos: 63962
                                  length: 87
                              children: []
                              pos: 63961
                              length: 89
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return false;
                              children: []
                              pos: 64063
                              length: 13
                            pos: 64051
                            length: 35
                          pos: 63958
                          length: 128
                        pos: 63758
                        length: 336
                      pos: 63707
                      length: 387
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 64102
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 64137
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 64145
                                  length: 4
                              children: []
                              pos: 64137
                              length: 12
                          children: []
                          pos: 64136
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (isConstantSymbol(info, n) && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 64161
                          length: 249
                        pos: 64151
                        length: 267
                      pos: 64133
                      length: 285
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: inferred
                                      children: []
                                      pos: 64430
                                      length: 8
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rhsValue
                                          children: []
                                          pos: 64442
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 64454
                                          length: 4
                                      children: []
                                      pos: 64442
                                      length: 16
                                  children: []
                                  pos: 64430
                                  length: 28
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rhsValue.isFunction()
                                  children: []
                                  pos: 64462
                                  length: 21
                              children: []
                              pos: 64430
                              length: 53
                          children: []
                          pos: 64429
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 64499
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 64507
                                      length: 4
                                  children: []
                                  pos: 64499
                                  length: 12
                              children: []
                              pos: 64498
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return false;
                              children: []
                              pos: 64525
                              length: 13
                            pos: 64513
                            length: 35
                          pos: 64495
                          length: 904
                        pos: 64485
                        length: 922
                      pos: 64426
                      length: 981
                    - type: return_statement
                      fields:
                        text: return inferred;
                      children: []
                      pos: 65414
                      length: 16
                    pos: 63566
                    length: 1870
                children: []
                pos: 63438
                length: 1998
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isConstantSymbol
                    children: []
                    pos: 65458
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: JSDocInfo info
                      children: []
                      pos: 65475
                      length: 14
                    pos: 65442
                    length: 528
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 65514
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 65522
                                      length: 4
                                  children: []
                                  pos: 65514
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.isConstant()
                                  children: []
                                  pos: 65530
                                  length: 17
                              children: []
                              pos: 65514
                              length: 33
                          children: []
                          pos: 65513
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 65559
                          length: 12
                        pos: 65549
                        length: 30
                      pos: 65510
                      length: 69
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 65595
                              length: 14
                          children: []
                          pos: 65594
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NAME:
                                        return NodeUtil.isConstantByConvention(
                                            compiler.getCodingConvention(), node, node.getParent());
                                      case Token.GETPROP:
                                        return node.isQualifiedName() && NodeUtil.isConstantByConvention(
                                            compiler.getCodingConvention(), node.getLastChild(), node);
                                    }
                          children: []
                          pos: 65611
                          length: 333
                      children: []
                      pos: 65587
                      length: 357
                    - type: return_statement
                      fields:
                        text: return false;
                      children: []
                      pos: 65951
                      length: 13
                    pos: 65502
                    length: 468
                children: []
                pos: 65442
                length: 528
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 66215
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 66229
                      length: 15
                    pos: 66196
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 66254
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 66303
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 66315
                                  length: 4
                              children: []
                              pos: 66303
                              length: 16
                          children: []
                          pos: 66302
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 66331
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 66381
                          length: 110
                        pos: 66321
                        length: 178
                      pos: 66299
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 66506
                      length: 12
                    pos: 66246
                    length: 278
                children: []
                pos: 66196
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 66666
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 66661
                    length: 1101
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 66700
                      length: 1056
                    pos: 66692
                    length: 1070
                children: []
                pos: 66661
                length: 1101
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 67914
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final JSType thisType;
                      children: []
                      pos: 67989
                      length: 30
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(JSType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 68027
                      length: 78
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 68141
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 68147
                            length: 15
                          pos: 68113
                          length: 477
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: method_invocation
                                    fields:
                                      text: n.isExprResult()
                                    children: []
                                    pos: 68199
                                    length: 16
                                children: []
                                pos: 68198
                                length: 18
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 68229
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 68279
                                        length: 15
                                    children: []
                                    pos: 68278
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 68296
                                    length: 276
                                children: []
                                pos: 68271
                                length: 301
                              pos: 68217
                              length: 365
                            pos: 68195
                            length: 387
                          pos: 68185
                          length: 405
                      children: []
                      pos: 68113
                      length: 477
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 68611
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: Node member
                            children: []
                            pos: 68630
                            length: 11
                          pos: 68598
                          length: 1449
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 68709
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 68959
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 68967
                                                length: 4
                                            children: []
                                            pos: 68959
                                            length: 12
                                          right:
                                            type: unary_expression
                                            fields:
                                              text: "!member.isGetProp()"
                                            children: []
                                            pos: 68987
                                            length: 19
                                        children: []
                                        pos: 68959
                                        length: 47
                                      right:
                                        type: unary_expression
                                        fields:
                                          text: "!member.getFirstChild().isThis()"
                                        children: []
                                        pos: 69022
                                        length: 32
                                    children: []
                                    pos: 68959
                                    length: 95
                                children: []
                                pos: 68958
                                length: 97
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 69068
                                length: 7
                              pos: 69056
                              length: 29
                            pos: 68955
                            length: 130
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 69095
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType thisObjectType = thisType.toObjectType();
                            children: []
                            pos: 69301
                            length: 48
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: thisObjectType
                                        children: []
                                        pos: 69362
                                        length: 14
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 69380
                                        length: 4
                                    children: []
                                    pos: 69362
                                    length: 22
                                children: []
                                pos: 69361
                                length: 24
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: |-
                                    ImmutableList<TemplateType> keys =
                                                  thisObjectType.getTemplateTypeMap().getTemplateKeys();
                                children: []
                                pos: 69398
                                length: 103
                              - type: expression_statement
                                fields:
                                  text: typeRegistry.setTemplateTypeNames(keys);
                                children: []
                                pos: 69512
                                length: 40
                              pos: 69386
                              length: 176
                            pos: 69358
                            length: 204
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(info, member,
                                value);
                            children: []
                            pos: 69572
                            length: 53
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: thisObjectType
                                        children: []
                                        pos: 69639
                                        length: 14
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 69657
                                        length: 4
                                    children: []
                                    pos: 69639
                                    length: 22
                                children: []
                                pos: 69638
                                length: 24
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: typeRegistry.clearTemplateTypeNames();
                                children: []
                                pos: 69675
                                length: 38
                              pos: 69663
                              length: 60
                            pos: 69635
                            length: 88
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 69733
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: and
                                        fields:
                                          left:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: jsType
                                                children: []
                                                pos: 69780
                                                length: 6
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 69790
                                                length: 4
                                            children: []
                                            pos: 69780
                                            length: 14
                                          right:
                                            type: parenthesized_expression
                                            fields:
                                              expression:
                                                type: or
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.isName()
                                                    children: []
                                                    pos: 69811
                                                    length: 13
                                                  right:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.isString()
                                                    children: []
                                                    pos: 69828
                                                    length: 15
                                                children: []
                                                pos: 69811
                                                length: 32
                                            children: []
                                            pos: 69810
                                            length: 34
                                        children: []
                                        pos: 69780
                                        length: 64
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: thisType.toObjectType()
                                            children: []
                                            pos: 69860
                                            length: 23
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 69887
                                            length: 4
                                        children: []
                                        pos: 69860
                                        length: 31
                                    children: []
                                    pos: 69780
                                    length: 111
                                children: []
                                pos: 69779
                                length: 113
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.toObjectType().defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  member);
                                children: []
                                pos: 69905
                                length: 124
                              pos: 69893
                              length: 146
                            pos: 69776
                            length: 263
                          pos: 68699
                          length: 1348
                      children: []
                      pos: 68598
                      length: 1449
                    pos: 67894
                    length: 2159
                children: []
                pos: 67894
                length: 2159
              pos: 16716
              length: 53366
          children: []
          pos: 16716
          length: 53366
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 70179
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 70201
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 70230
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 70266
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 70303
                length: 168
              pos: 70152
              length: 323
          children: []
          pos: 70152
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 70610
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 70665
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 71004
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71010
                      length: 15
                    pos: 70982
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 71056
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 71098
                              length: 11
                          children: []
                          pos: 71097
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 71111
                          length: 195
                      children: []
                      pos: 71090
                      length: 216
                    pos: 71048
                    length: 264
                children: []
                pos: 70982
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 71337
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71372
                      length: 15
                    pos: 71318
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 71457
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 71492
                      length: 62
                    pos: 71449
                    length: 111
                children: []
                pos: 71318
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 71740
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71765
                      length: 15
                    pos: 71727
                    length: 944
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 71826
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 71834
                                      length: 4
                                  children: []
                                  pos: 71826
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 71842
                                  length: 22
                              children: []
                              pos: 71826
                              length: 38
                          children: []
                          pos: 71825
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71876
                          length: 7
                        pos: 71866
                        length: 25
                      pos: 71822
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 71899
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 71956
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 71967
                                  length: 4
                              children: []
                              pos: 71956
                              length: 15
                          children: []
                          pos: 71955
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71983
                          length: 7
                        pos: 71973
                        length: 25
                      pos: 71952
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, unknownType);
                      children: []
                      pos: 72173
                      length: 47
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 72228
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 72309
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 72321
                                  length: 4
                              children: []
                              pos: 72309
                              length: 16
                          children: []
                          pos: 72308
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 72337
                          length: 118
                        pos: 72327
                        length: 136
                      pos: 72305
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 72471
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: candidate.isGetProp()
                              children: []
                              pos: 72536
                              length: 21
                          children: []
                          pos: 72535
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 72569
                          length: 88
                        pos: 72559
                        length: 106
                      pos: 72532
                      length: 133
                    pos: 71814
                    length: 857
                children: []
                pos: 71727
                length: 944
              pos: 70590
              length: 2085
          children: []
          pos: 70590
          length: 2085
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 72827
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 72947
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 73085
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 73080
                    length: 744
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 73101
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          AstFunctionContents contents =
                                    getFunctionAnalysisResults(scope.getRootNode());
                      children: []
                      pos: 73169
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: contents
                                  children: []
                                  pos: 73269
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 73281
                                  length: 4
                              children: []
                              pos: 73269
                              length: 16
                          children: []
                          pos: 73268
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (String varName : contents.getEscapedVarNames()) {
                                        Var v = scope.getVar(varName);
                                        Preconditions.checkState(v.getScope() == scope);
                                        v.markEscaped();
                                      }
                          children: []
                          pos: 73297
                          length: 191
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Multiset.Entry<String> entry :
                                               contents.getAssignedNameCounts().entrySet()) {
                                        Var v = scope.getVar(entry.getElement());
                                        Preconditions.checkState(v.getScope() == scope);
                                        if (entry.getCount() == 1) {
                                          v.markAssignedExactlyOnce();
                                        }
                                      }
                          children: []
                          pos: 73498
                          length: 312
                        pos: 73287
                        length: 531
                      pos: 73265
                      length: 553
                    pos: 73093
                    length: 731
                children: []
                pos: 73080
                length: 744
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 74110
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 74116
                      length: 15
                    pos: 74088
                    length: 293
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 74166
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 74171
                                  length: 19
                              children: []
                              pos: 74166
                              length: 24
                          children: []
                          pos: 74165
                          length: 26
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74202
                          length: 7
                        pos: 74192
                        length: 25
                      pos: 74162
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isParamList()
                                  children: []
                                  pos: 74228
                                  length: 15
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 74247
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 74257
                                      length: 19
                                  children: []
                                  pos: 74247
                                  length: 29
                              children: []
                              pos: 74228
                              length: 48
                          children: []
                          pos: 74227
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 74288
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74326
                          length: 7
                        pos: 74278
                        length: 63
                      pos: 74224
                      length: 117
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 74349
                      length: 26
                    pos: 74154
                    length: 227
                children: []
                pos: 74088
                length: 293
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 74462
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 74483
                      length: 11
                    pos: 74449
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 74540
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 74588
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 74638
                              length: 17
                          children: []
                          pos: 74637
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 74667
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 74719
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 74728
                                          length: 4
                                      children: []
                                      pos: 74719
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 74913
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 74936
                                                  length: 4
                                              children: []
                                              pos: 74913
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 75089
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 75116
                                                  length: 6
                                              children: []
                                              pos: 75089
                                              length: 33
                                          children: []
                                          pos: 74913
                                          length: 209
                                      children: []
                                      pos: 74912
                                      length: 211
                                  children: []
                                  pos: 74719
                                  length: 404
                              children: []
                              pos: 74718
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 75137
                              length: 58
                            pos: 75125
                            length: 80
                          pos: 74715
                          length: 490
                        pos: 74657
                        length: 556
                      pos: 74634
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 75221
                      length: 25
                    pos: 74496
                    length: 756
                children: []
                pos: 74449
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 75334
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 75351
                      length: 17
                    pos: 75321
                    length: 1710
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 75378
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node iifeArgumentNode = null;
                      children: []
                      pos: 75445
                      length: 29
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isCallOrNewTarget(functionNode)
                              children: []
                              pos: 75486
                              length: 40
                          children: []
                          pos: 75485
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: iifeArgumentNode = functionNode.getNext();
                          children: []
                          pos: 75538
                          length: 42
                        pos: 75528
                        length: 60
                      pos: 75482
                      length: 106
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    JSType.toMaybeFunctionType(functionNode.getJSType());
                      children: []
                      pos: 75596
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 75698
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 75714
                                  length: 4
                              children: []
                              pos: 75698
                              length: 20
                          children: []
                          pos: 75697
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 75730
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 75799
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 75818
                                      length: 4
                                  children: []
                                  pos: 75799
                                  length: 23
                              children: []
                              pos: 75798
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 75836
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              JSType paramType = jsDocParameter == null ?
                                                  unknownType : jsDocParameter.getJSType();
                                              boolean inferred = paramType == null || paramType == unknownType;

                                              if (iifeArgumentNode != null && inferred) {
                                                String argumentName = iifeArgumentNode.getQualifiedName();
                                                Var argumentVar =
                                                    argumentName == null || scope.getParent() == null
                                                    ? null : scope.getParent().getVar(argumentName);
                                                if (argumentVar != null && !argumentVar.isTypeInferred()) {
                                                  paramType = argumentVar.getType();
                                                }
                                              }

                                              if (paramType == null) {
                                                paramType = unknownType;
                                              }

                                              defineSlot(astParameter, functionNode, paramType, inferred);

                                              if (jsDocParameter != null) {
                                                jsDocParameter = jsDocParameter.getNext();
                                              }
                                              if (iifeArgumentNode != null) {
                                                iifeArgumentNode = iifeArgumentNode.getNext();
                                              }
                                            }
                              children: []
                              pos: 75901
                              length: 1106
                            pos: 75824
                            length: 1193
                          pos: 75795
                          length: 1222
                        pos: 75720
                        length: 1305
                      pos: 75694
                      length: 1331
                    pos: 75370
                    length: 1661
                children: []
                pos: 75321
                length: 1710
              pos: 72807
              length: 4252
          children: []
          pos: 72807
          length: 4252
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: FirstOrderFunctionAnalyzer
              children: []
              pos: 77262
              length: 26
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final AbstractCompiler compiler;
                children: []
                pos: 77356
                length: 40
              - type: field_declaration
                fields:
                  text: private final Map<Node, AstFunctionContents> data;
                children: []
                pos: 77401
                length: 50
              - type: constructor_declaration
                fields:
                  text: |-
                    FirstOrderFunctionAnalyzer(
                            AbstractCompiler compiler, Map<Node, AstFunctionContents> outParam) {
                          this.compiler = compiler;
                          this.data = outParam;
                        }
                children: []
                pos: 77457
                length: 171
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: process
                    children: []
                    pos: 77656
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node externs
                      children: []
                      pos: 77664
                      length: 12
                    pos: 77634
                    length: 267
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: externs
                                  children: []
                                  pos: 77701
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 77712
                                  length: 4
                              children: []
                              pos: 77701
                              length: 15
                          children: []
                          pos: 77700
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: NodeTraversal.traverse(compiler, root, this);
                          children: []
                          pos: 77728
                          length: 45
                        pos: 77718
                        length: 63
                      pos: 77697
                      length: 198
                    pos: 77689
                    length: 212
                children: []
                pos: 77634
                length: 267
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: enterScope
                    children: []
                    pos: 77929
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 77940
                      length: 15
                    pos: 77907
                    length: 181
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!t.inGlobalScope()"
                              children: []
                              pos: 77969
                              length: 18
                          children: []
                          pos: 77968
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node n = t.getScopeRoot();
                          children: []
                          pos: 77999
                          length: 26
                        - type: expression_statement
                          fields:
                            text: data.put(n, new AstFunctionContents(n));
                          children: []
                          pos: 78034
                          length: 40
                        pos: 77989
                        length: 93
                      pos: 77965
                      length: 117
                    pos: 77957
                    length: 131
                children: []
                pos: 77907
                length: 181
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 78116
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 78122
                      length: 15
                    pos: 78094
                    length: 1927
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: t.inGlobalScope()
                              children: []
                              pos: 78172
                              length: 17
                          children: []
                          pos: 78171
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 78201
                          length: 7
                        pos: 78191
                        length: 25
                      pos: 78168
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isReturn()
                                  children: []
                                  pos: 78228
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getFirstChild()
                                      children: []
                                      pos: 78244
                                      length: 17
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 78265
                                      length: 4
                                  children: []
                                  pos: 78244
                                  length: 25
                              children: []
                              pos: 78228
                              length: 41
                          children: []
                          pos: 78227
                          length: 43
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: data.get(t.getScopeRoot()).recordNonEmptyReturn();
                          children: []
                          pos: 78281
                          length: 50
                        pos: 78271
                        length: 68
                      pos: 78224
                      length: 115
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_or_equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: t.getScopeDepth()
                                  children: []
                                  pos: 78351
                                  length: 17
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '1'
                                  children: []
                                  pos: 78372
                                  length: 1
                              children: []
                              pos: 78351
                              length: 22
                          children: []
                          pos: 78350
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 78776
                          length: 7
                        pos: 78375
                        length: 416
                      pos: 78347
                      length: 444
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isName()
                                      children: []
                                      pos: 78803
                                      length: 10
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isLValue(n)
                                      children: []
                                      pos: 78817
                                      length: 20
                                  children: []
                                  pos: 78803
                                  length: 34
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!NodeUtil.isBleedingFunctionName(n)"
                                  children: []
                                  pos: 78992
                                  length: 35
                              children: []
                              pos: 78803
                              length: 224
                          children: []
                          pos: 78802
                          length: 226
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String name = n.getString();
                          children: []
                          pos: 79039
                          length: 28
                        - type: local_variable_declaration
                          fields:
                            text: Scope scope = t.getScope();
                          children: []
                          pos: 79076
                          length: 27
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(name);
                          children: []
                          pos: 79112
                          length: 29
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 79154
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 79161
                                      length: 4
                                  children: []
                                  pos: 79154
                                  length: 11
                              children: []
                              pos: 79153
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Scope ownerScope = var.getScope();
                              children: []
                              pos: 79179
                              length: 34
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: ownerScope.isLocal()
                                      children: []
                                      pos: 79228
                                      length: 20
                                  children: []
                                  pos: 79227
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordAssignedName(name);
                                  children: []
                                  pos: 79264
                                  length: 60
                                pos: 79250
                                length: 86
                              pos: 79224
                              length: 112
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: scope
                                              children: []
                                              pos: 79352
                                              length: 5
                                            right:
                                              type: identifier
                                              fields:
                                                text: ownerScope
                                              children: []
                                              pos: 79361
                                              length: 10
                                          children: []
                                          pos: 79352
                                          length: 19
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerScope.isLocal()
                                          children: []
                                          pos: 79375
                                          length: 20
                                      children: []
                                      pos: 79352
                                      length: 43
                                  children: []
                                  pos: 79351
                                  length: 45
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordEscapedVarName(name);
                                  children: []
                                  pos: 79411
                                  length: 62
                                pos: 79397
                                length: 88
                              pos: 79348
                              length: 137
                            pos: 79167
                            length: 328
                          pos: 79150
                          length: 345
                        pos: 79029
                        length: 474
                      pos: 78799
                      length: 1216
                    pos: 78160
                    length: 1861
                children: []
                pos: 78094
                length: 1927
              pos: 77241
              length: 2784
          children: []
          pos: 77241
          length: 2784
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFunctionAnalysisResults
              children: []
              pos: 80057
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node n"
                children: []
                pos: 80084
                length: 16
              pos: 80029
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: "n"
                            children: []
                            pos: 80112
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 80117
                            length: 4
                        children: []
                        pos: 80112
                        length: 9
                    children: []
                    pos: 80111
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 80131
                    length: 12
                  pos: 80123
                  length: 26
                pos: 80108
                length: 41
              - type: return_statement
                fields:
                  text: return functionAnalysisResults.get(n);
                children: []
                pos: 80274
                length: 38
              pos: 80102
              length: 214
          children: []
          pos: 80029
          length: 287
        pos: 5317
        length: 75001
    children: []
    pos: 5317
    length: 75001
  pos: 0
  length: 80319
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 5329
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 5458
          length: 91
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5553
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5734
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5925
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 6113
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 6302
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 6485
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6659
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6853
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6896
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6952
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6993
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 7044
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 7089
          length: 78
        - type: field_declaration
          fields:
            text: |-
              private final Map<String, String> delegateCallingConventions =
                    Maps.newHashMap();
          children: []
          pos: 7170
          length: 87
        - type: field_declaration
          fields:
            text: |-
              private final Map<Node, AstFunctionContents> functionAnalysisResults =
                    Maps.newHashMap();
          children: []
          pos: 7310
          length: 95
        - type: field_declaration
          fields:
            text: private final ObjectType unknownType;
          children: []
          pos: 7430
          length: 37
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 7628
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 7650
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 7671
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 7695
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 8043
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 8051
                      length: 11
                    pos: 8038
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 8072
                      length: 62
                    pos: 8064
                    length: 76
                children: []
                pos: 8038
                length: 102
              pos: 7614
              length: 530
          children: []
          pos: 7614
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 8148
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                  this.unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                }
          children: []
          pos: 8254
          length: 409
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 8829
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8841
                length: 9
              pos: 8804
              length: 2310
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 9061
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 9088
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 9138
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9148
                            length: 4
                        children: []
                        pos: 9138
                        length: 14
                    children: []
                    pos: 9137
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: |-
                        JSType globalThis =
                                  typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
                    children: []
                    pos: 9162
                    length: 89
                  - type: expression_statement
                    fields:
                      text: root.setJSType(globalThis);
                    children: []
                    pos: 9359
                    length: 27
                  - type: expression_statement
                    fields:
                      text: root.getFirstChild().setJSType(globalThis);
                    children: []
                    pos: 9393
                    length: 43
                  - type: expression_statement
                    fields:
                      text: root.getLastChild().setJSType(globalThis);
                    children: []
                    pos: 9443
                    length: 42
                  - type: expression_statement
                    fields:
                      text: |-
                        (new FirstOrderFunctionAnalyzer(compiler, functionAnalysisResults))
                                  .process(root.getFirstChild(), root.getLastChild());
                    children: []
                    pos: 9551
                    length: 130
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 9740
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 9784
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 9864
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 9905
                    length: 53
                  pos: 9154
                  length: 810
                pos: 9134
                length: 1035
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 10175
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type.isFunctionType()) {
                            FunctionType fnType = type.toMaybeFunctionType();
                            JSType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 10382
                length: 468
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 10860
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10870
                            length: 4
                        children: []
                        pos: 10860
                        length: 14
                    children: []
                    pos: 10859
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes,
                                  delegateCallingConventions);
                    children: []
                    pos: 10884
                    length: 154
                  pos: 10876
                  length: 168
                pos: 10856
                length: 188
              - type: expression_statement
                fields:
                  text: newScope.setTypeResolver(scopeBuilder);
                children: []
                pos: 11050
                length: 39
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 11094
                length: 16
              pos: 8866
              length: 2248
          children: []
          pos: 8804
          length: 2310
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: patchGlobalScope
              children: []
              pos: 11408
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope globalScope
                children: []
                pos: 11425
                length: 17
              pos: 11403
              length: 1683
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(scriptRoot.isScript());
                children: []
                pos: 11616
                length: 48
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(globalScope);
                children: []
                pos: 11669
                length: 40
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(globalScope.isGlobal());
                children: []
                pos: 11714
                length: 49
              - type: local_variable_declaration
                fields:
                  text: String scriptName = NodeUtil.getSourceName(scriptRoot);
                children: []
                pos: 11769
                length: 55
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(scriptName);
                children: []
                pos: 11829
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {
                          if (scriptName.equals(NodeUtil.getSourceName(node))) {
                            functionAnalysisResults.remove(node);
                          }
                        }
                children: []
                pos: 11873
                length: 195
              - type: expression_statement
                fields:
                  text: |-
                    (new FirstOrderFunctionAnalyzer(
                            compiler, functionAnalysisResults)).process(null, scriptRoot);
                children: []
                pos: 12074
                length: 103
              - type: local_variable_declaration
                fields:
                  text: Iterator<Var> varIter = globalScope.getVars();
                children: []
                pos: 12480
                length: 46
              - type: local_variable_declaration
                fields:
                  text: List<Var> varsToRemove = Lists.newArrayList();
                children: []
                pos: 12531
                length: 46
              - type: while_statement
                fields:
                  text: |-
                    while (varIter.hasNext()) {
                          Var oldVar = varIter.next();
                          if (scriptName.equals(oldVar.getInputName())) {
                            varsToRemove.add(oldVar);
                          }
                        }
                children: []
                pos: 12582
                length: 164
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Var var : varsToRemove) {
                          globalScope.undeclare(var);
                          globalScope.getTypeOfThis().toObjectType().removeProperty(var.getName());
                        }
                children: []
                pos: 12751
                length: 150
              - type: local_variable_declaration
                fields:
                  text: GlobalScopeBuilder scopeBuilder = new GlobalScopeBuilder(globalScope);
                children: []
                pos: 12948
                length: 70
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, scriptRoot, scopeBuilder);
                children: []
                pos: 13023
                length: 59
              pos: 11461
              length: 1625
          children: []
          pos: 11403
          length: 1683
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 13245
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 13264
                length: 9
              pos: 13218
              length: 1385
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 13282
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = Scope.createGlobalScope(root);
                children: []
                pos: 13380
                length: 40
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 13425
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13480
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 13544
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 13598
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13653
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 13713
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13771
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13834
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13890
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13951
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 14016
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 14072
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 14135
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 14197
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 14257
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 14316
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", FUNCTION_INSTANCE_TYPE);
                children: []
                pos: 14517
                length: 67
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 14590
                length: 9
              pos: 13275
              length: 1328
          children: []
          pos: 13218
          length: 1385
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 14620
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14646
                length: 11
              pos: 14607
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 14683
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 14745
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 14818
                length: 89
              pos: 14677
              length: 234
          children: []
          pos: 14607
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 14928
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14951
                length: 11
              pos: 14915
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 15007
                length: 64
              pos: 15001
              length: 74
          children: []
          pos: 14915
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 15099
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 15117
                length: 11
              pos: 15079
              length: 126
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 15159
                length: 42
              pos: 15153
              length: 52
          children: []
          pos: 15079
          length: 126
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 15230
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 15308
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 15352
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 15473
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 15479
                      length: 15
                    pos: 15447
                    length: 725
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 15536
                              length: 14
                          children: []
                          pos: 15535
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, NodeUtil.getBestJSDocInfo(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.isAssign()) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 15552
                          length: 614
                      children: []
                      pos: 15528
                      length: 638
                    pos: 15520
                    length: 652
                children: []
                pos: 15447
                length: 725
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 16191
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 16217
                      length: 13
                    pos: 16178
                    length: 416
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 16260
                              length: 26
                          children: []
                          pos: 16259
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 16302
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 16310
                                      length: 4
                                  children: []
                                  pos: 16302
                                  length: 12
                              children: []
                              pos: 16301
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 16332
                                      length: 27
                                  children: []
                                  pos: 16331
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 16375
                                  length: 62
                                pos: 16361
                                length: 88
                              pos: 16328
                              length: 242
                            pos: 16316
                            length: 264
                          pos: 16298
                          length: 282
                        pos: 16288
                        length: 300
                      pos: 16256
                      length: 332
                    pos: 16248
                    length: 346
                children: []
                pos: 16178
                length: 416
              pos: 15209
              length: 1389
          children: []
          pos: 15209
          length: 1389
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 16617
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 16631
                length: 23
              pos: 16602
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 16662
                length: 46
              pos: 16656
              length: 56
          children: []
          pos: 16602
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 16739
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 16881
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 16905
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 17082
                length: 67
              - type: field_declaration
                fields:
                  text: private List<Node> lentObjectLiterals = null;
                children: []
                pos: 17566
                length: 45
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 17787
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 17939
                length: 33
              - type: field_declaration
                fields:
                  text: private InputId inputId;
                children: []
                pos: 18034
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 18064
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 18150
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 18166
                      length: 9
                    pos: 18145
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 18198
                      length: 54
                    pos: 18190
                    length: 68
                children: []
                pos: 18145
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 18290
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 18264
                    length: 521
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 18362
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 18517
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 18561
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 18739
                      length: 40
                    pos: 18305
                    length: 480
                children: []
                pos: 18264
                length: 521
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 18826
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18841
                      length: 15
                    pos: 18791
                    length: 1032
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 18887
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isFunction()
                                  children: []
                                  pos: 18923
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: n.isScript()
                                  children: []
                                  pos: 18951
                                  length: 12
                              children: []
                              pos: 18923
                              length: 40
                          children: []
                          pos: 18922
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(inputId);
                          children: []
                          pos: 18975
                          length: 36
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 19020
                          length: 39
                        pos: 18965
                        length: 102
                      pos: 18919
                      length: 148
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || !parent.isFunction() ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 19199
                      length: 131
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 19342
                              length: 7
                          children: []
                          pos: 19341
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 19491
                                  length: 29
                              children: []
                              pos: 19490
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child);
                                              }
                                            }
                              children: []
                              pos: 19534
                              length: 242
                            pos: 19522
                            length: 264
                          pos: 19487
                          length: 299
                        pos: 19351
                        length: 443
                      pos: 19338
                      length: 456
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 19802
                      length: 15
                    pos: 18879
                    length: 944
                children: []
                pos: 18791
                length: 1032
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 19855
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19861
                      length: 15
                    pos: 19829
                    length: 1730
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 19907
                      length: 25
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(n);
                      children: []
                      pos: 19939
                      length: 22
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 19977
                              length: 11
                          children: []
                          pos: 19976
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n);
                                        checkForCallingConventionDefiningCalls(n, delegateCallingConventions);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.isGetProp() &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n);
                                        break;

                                      case Token.VAR:
                                        defineVar(n);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.isExprResult() &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 19990
                          length: 1255
                      children: []
                      pos: 19969
                      length: 1276
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getParent()
                                          children: []
                                          pos: 21320
                                          length: 13
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 21337
                                          length: 4
                                      children: []
                                      pos: 21320
                                      length: 21
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isStatement(n)
                                      children: []
                                      pos: 21345
                                      length: 23
                                  children: []
                                  pos: 21320
                                  length: 48
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lentObjectLiterals
                                      children: []
                                      pos: 21382
                                      length: 18
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 21404
                                      length: 4
                                  children: []
                                  pos: 21382
                                  length: 26
                              children: []
                              pos: 21320
                              length: 88
                          children: []
                          pos: 21319
                          length: 90
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node objLit : lentObjectLiterals) {
                                        defineObjectLiteral(objLit);
                                      }
                          children: []
                          pos: 21420
                          length: 89
                        - type: expression_statement
                          fields:
                            text: lentObjectLiterals.clear();
                          children: []
                          pos: 21518
                          length: 27
                        pos: 21410
                        length: 143
                      pos: 21316
                      length: 237
                    pos: 19899
                    length: 1660
                children: []
                pos: 19829
                length: 1730
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 21578
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 21597
                      length: 6
                    pos: 21565
                    length: 1188
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 21621
                              length: 11
                          children: []
                          pos: 21620
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        n.setJSType(getNativeType(STRING_TYPE));
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        JSDocInfo info = n.getJSDocInfo();
                                        if (info != null &&
                                            info.getLendsName() != null) {
                                          if (lentObjectLiterals == null) {
                                            lentObjectLiterals = Lists.newArrayList();
                                          }
                                          lentObjectLiterals.add(n);
                                        } else {
                                          defineObjectLiteral(n);
                                        }
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 21634
                          length: 1113
                      children: []
                      pos: 21613
                      length: 1134
                    pos: 21605
                    length: 1148
                children: []
                pos: 21565
                length: 1188
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 22772
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objectLit
                      children: []
                      pos: 22792
                      length: 14
                    pos: 22759
                    length: 1639
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 22855
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 22881
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 22934
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22942
                                      length: 4
                                  children: []
                                  pos: 22934
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 22950
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22973
                                      length: 4
                                  children: []
                                  pos: 22950
                                  length: 27
                              children: []
                              pos: 22934
                              length: 43
                          children: []
                          pos: 22933
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 22989
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 23037
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 23089
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23101
                                      length: 4
                                  children: []
                                  pos: 23089
                                  length: 16
                              children: []
                              pos: 23088
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 23119
                              length: 94
                            pos: 23107
                            length: 116
                          pos: 23085
                          length: 587
                        pos: 22979
                        length: 701
                      pos: 22930
                      length: 750
                    - type: expression_statement
                      fields:
                        text: info = NodeUtil.getBestJSDocInfo(objectLit);
                      children: []
                      pos: 23688
                      length: 44
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(objectLit);
                      children: []
                      pos: 23739
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 23794
                      length: 55
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 23856
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 23899
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23907
                                      length: 4
                                  children: []
                                  pos: 23899
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 23915
                                  length: 27
                              children: []
                              pos: 23899
                              length: 43
                          children: []
                          pos: 23898
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 23954
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 24031
                          length: 23
                        pos: 23944
                        length: 118
                      pos: 23895
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 24074
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 24082
                                  length: 4
                              children: []
                              pos: 24074
                              length: 12
                          children: []
                          pos: 24073
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType(info);
                          children: []
                          pos: 24098
                          length: 52
                        pos: 24088
                        length: 70
                      pos: 24070
                      length: 88
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 24166
                      length: 33
                    - type: expression_statement
                      fields:
                        text: |-
                          processObjectLitProperties(
                                    objectLit, ObjectType.cast(objectLit.getJSType()), !createdEnumType);
                      children: []
                      pos: 24285
                      length: 107
                    pos: 22808
                    length: 1590
                children: []
                pos: 22759
                length: 1639
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 24795
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objLit
                      children: []
                      pos: 24831
                      length: 11
                    pos: 24790
                    length: 1287
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType = getDeclaredType(info, keyNode, value);
                                  JSType keyType =  objLitType.isEnumType() ?
                                      objLitType.toMaybeEnumType().getElementsType() :
                                      NodeUtil.getObjectLitKeyTypeFromValueType(keyNode, valueType);

                                  // Try to declare this property in the current scope if it
                                  // has an authoritative name.
                                  String qualifiedName = NodeUtil.getBestLValueName(keyNode);
                                  if (qualifiedName != null) {
                                    boolean inferred = keyType == null;
                                    defineSlot(keyNode, objLit, qualifiedName, keyType, inferred);
                                  } else if (keyType != null) {
                                    setDeferredType(keyNode, keyType);
                                  }

                                  if (keyType != null && objLitType != null && declareOnOwner) {
                                    // Declare this property on its object literal.
                                    objLitType.defineDeclaredProperty(memberName, keyType, keyNode);
                                  }
                                }
                      children: []
                      pos: 24907
                      length: 1164
                    pos: 24899
                    length: 1178
                children: []
                pos: 24790
                length: 1287
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 26328
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 26356
                      length: 9
                    pos: 26313
                    length: 1358
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 26391
                      length: 21
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 26423
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26431
                                  length: 4
                              children: []
                              pos: 26423
                              length: 12
                          children: []
                          pos: 26422
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 26451
                                  length: 14
                              children: []
                              pos: 26450
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ImmutableList<TemplateType> ownerTypeKeys =
                                  ImmutableList.of();
                              children: []
                              pos: 26480
                              length: 63
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(node);
                              children: []
                              pos: 26554
                              length: 51
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 26616
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 26684
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 26727
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 26740
                                          length: 4
                                      children: []
                                      pos: 26727
                                      length: 17
                                  children: []
                                  pos: 26726
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: Var ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 26760
                                  length: 39
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 26816
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 26828
                                              length: 4
                                          children: []
                                          pos: 26816
                                          length: 16
                                      children: []
                                      pos: 26815
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: |-
                                          ownerType = getPrototypeOwnerType(
                                                            ObjectType.cast(ownerVar.getType()));
                                      children: []
                                      pos: 26850
                                      length: 90
                                    - type: if_statement
                                      fields:
                                        condition:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 26959
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 26972
                                                  length: 4
                                              children: []
                                              pos: 26959
                                              length: 17
                                          children: []
                                          pos: 26958
                                          length: 19
                                      children:
                                      - type: block
                                        fields: {}
                                        children:
                                        - type: expression_statement
                                          fields:
                                            text: |-
                                              ownerTypeKeys =
                                                                  ownerType.getTemplateTypeMap().getTemplateKeys();
                                          children: []
                                          pos: 26996
                                          length: 85
                                        pos: 26978
                                        length: 119
                                      pos: 26955
                                      length: 142
                                    pos: 26834
                                    length: 277
                                  pos: 26812
                                  length: 299
                                pos: 26746
                                length: 377
                              pos: 26723
                              length: 400
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!ownerTypeKeys.isEmpty()"
                                      children: []
                                      pos: 27139
                                      length: 24
                                  children: []
                                  pos: 27138
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: typeRegistry.setTemplateTypeNames(ownerTypeKeys);
                                  children: []
                                  pos: 27179
                                  length: 49
                                pos: 27165
                                length: 75
                              pos: 27135
                              length: 105
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 27252
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!ownerTypeKeys.isEmpty()"
                                      children: []
                                      pos: 27322
                                      length: 24
                                  children: []
                                  pos: 27321
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: typeRegistry.clearTemplateTypeNames();
                                  children: []
                                  pos: 27362
                                  length: 38
                                pos: 27348
                                length: 64
                              pos: 27318
                              length: 94
                            pos: 26467
                            length: 955
                          pos: 26447
                          length: 1189
                        pos: 26437
                        length: 1207
                      pos: 26419
                      length: 1225
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 27651
                      length: 14
                    pos: 26383
                    length: 1288
                children: []
                pos: 26313
                length: 1358
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 27826
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27847
                      length: 6
                    pos: 27821
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 27873
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 27925
                      length: 46
                    pos: 27865
                    length: 112
                children: []
                pos: 27821
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 28038
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 28050
                      length: 6
                    pos: 28033
                    length: 235
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 28066
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 28110
                      length: 35
                    - type: expression_statement
                      fields:
                        text: |-
                          defineSlot(catchName, n,
                                    getDeclaredType(
                                        catchName.getJSDocInfo(), catchName, null));
                      children: []
                      pos: 28152
                      length: 110
                    pos: 28058
                    length: 210
                children: []
                pos: 28033
                length: 235
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 28332
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 28342
                      length: 6
                    pos: 28327
                    length: 532
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 28358
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 28400
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 28445
                              length: 23
                          children: []
                          pos: 28444
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 28484
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 28492
                                      length: 4
                                  children: []
                                  pos: 28484
                                  length: 12
                              children: []
                              pos: 28483
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 28541
                              length: 63
                            pos: 28498
                            length: 116
                          pos: 28480
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 28623
                          length: 94
                        pos: 28470
                        length: 255
                      pos: 28441
                      length: 412
                    pos: 28350
                    length: 509
                children: []
                pos: 28327
                length: 532
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 28921
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 28943
                      length: 6
                    pos: 28916
                    length: 837
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 28959
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(n);
                      children: []
                      pos: 29114
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = NodeUtil.getBestJSDocInfo(n);
                      children: []
                      pos: 29161
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 29214
                      length: 57
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 29278
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 29441
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 29647
                              length: 33
                          children: []
                          pos: 29646
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 29692
                          length: 47
                        pos: 29682
                        length: 65
                      pos: 29643
                      length: 104
                    pos: 28951
                    length: 802
                children: []
                pos: 28916
                length: 837
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 30113
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 30124
                      length: 9
                    pos: 30100
                    length: 367
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 30169
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(info, name, value);
                      children: []
                      pos: 30236
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 30296
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 30304
                                  length: 4
                              children: []
                              pos: 30296
                              length: 12
                          children: []
                          pos: 30295
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: 'type = name.isFromExterns() ? unknownType : null;'
                          children: []
                          pos: 30369
                          length: 49
                        pos: 30310
                        length: 116
                      pos: 30292
                      length: 134
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 30433
                      length: 28
                    pos: 30161
                    length: 306
                children: []
                pos: 30100
                length: 367
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 30813
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 30851
                      length: 17
                    pos: 30797
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 30911
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 30919
                                  length: 4
                              children: []
                              pos: 30911
                              length: 12
                          children: []
                          pos: 30910
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 30935
                          length: 12
                        pos: 30925
                        length: 30
                      pos: 30907
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 30966
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 30976
                                      length: 4
                                  children: []
                                  pos: 30966
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue)
                                  children: []
                                  pos: 30994
                                  length: 31
                              children: []
                              pos: 30966
                              length: 59
                          children: []
                          pos: 30965
                          length: 61
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 31037
                          length: 13
                        pos: 31027
                        length: 31
                      pos: 30962
                      length: 96
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 31065
                      length: 56
                    pos: 30899
                    length: 228
                children: []
                pos: 30797
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 32175
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 32212
                      length: 21
                    pos: 32154
                    length: 4563
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 32344
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 32463
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 32473
                                          length: 4
                                      children: []
                                      pos: 32463
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 32481
                                      length: 24
                                  children: []
                                  pos: 32463
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 32509
                                  length: 16
                              children: []
                              pos: 32463
                              length: 62
                          children: []
                          pos: 32462
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 32537
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 32600
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 32607
                                              length: 4
                                          children: []
                                          pos: 32600
                                          length: 11
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: var.getType()
                                              children: []
                                              pos: 32615
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 32632
                                              length: 4
                                          children: []
                                          pos: 32615
                                          length: 21
                                      children: []
                                      pos: 32600
                                      length: 36
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: var.getType().isFunctionType()
                                      children: []
                                      pos: 32652
                                      length: 30
                                  children: []
                                  pos: 32600
                                  length: 82
                              children: []
                              pos: 32599
                              length: 84
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = var.getType().toMaybeFunctionType();
                              children: []
                              pos: 32696
                              length: 64
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 32776
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 32807
                                                  length: 25
                                              children: []
                                              pos: 32776
                                              length: 56
                                          children: []
                                          pos: 32775
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 32851
                                          length: 33
                                      children: []
                                      pos: 32775
                                      length: 109
                                  children: []
                                  pos: 32774
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 32900
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 32945
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 32953
                                                  length: 4
                                              children: []
                                              pos: 32945
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 32961
                                              length: 16
                                          children: []
                                          pos: 32945
                                          length: 32
                                      children: []
                                      pos: 32944
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 32995
                                      length: 63
                                    pos: 32979
                                    length: 93
                                  pos: 32941
                                  length: 131
                                pos: 32886
                                length: 198
                              pos: 32771
                              length: 313
                            pos: 32684
                            length: 410
                          pos: 32596
                          length: 498
                        pos: 32527
                        length: 575
                      pos: 32459
                      length: 643
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 33114
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 33130
                                  length: 4
                              children: []
                              pos: 33114
                              length: 20
                          children: []
                          pos: 33113
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 33146
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.isFunction();
                          children: []
                          pos: 33209
                          length: 72
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 33290
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 33341
                          length: 88
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 33443
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 33451
                                          length: 4
                                      children: []
                                      pos: 33443
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 33459
                                      length: 14
                                  children: []
                                  pos: 33443
                                  length: 30
                              children: []
                              pos: 33442
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 33487
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 33632
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 33690
                                      length: 21
                                  children: []
                                  pos: 33689
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = type.toMaybeFunctionType();
                                  children: []
                                  pos: 33727
                                  length: 42
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 33782
                                  length: 32
                                pos: 33713
                                length: 113
                              pos: 33686
                              length: 140
                            pos: 33475
                            length: 361
                          pos: 33439
                          length: 397
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 33850
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 33866
                                      length: 4
                                  children: []
                                  pos: 33850
                                  length: 20
                              children: []
                              pos: 33849
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(lvalueNode);
                              children: []
                              pos: 33939
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 34007
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: Var ownerVar = null;
                              children: []
                              pos: 34075
                              length: 20
                            - type: local_variable_declaration
                              fields:
                                text: String propName = null;
                              children: []
                              pos: 34106
                              length: 23
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 34140
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 34183
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 34196
                                          length: 4
                                      children: []
                                      pos: 34183
                                      length: 17
                                  children: []
                                  pos: 34182
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 34216
                                  length: 35
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 34268
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34280
                                              length: 4
                                          children: []
                                          pos: 34268
                                          length: 16
                                      children: []
                                      pos: 34267
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: ownerType = ObjectType.cast(ownerVar.getType());
                                      children: []
                                      pos: 34302
                                      length: 48
                                    pos: 34286
                                    length: 78
                                  pos: 34264
                                  length: 100
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: name
                                              children: []
                                              pos: 34381
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34389
                                              length: 4
                                          children: []
                                          pos: 34381
                                          length: 12
                                      children: []
                                      pos: 34380
                                      length: 14
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: propName = name.substring(ownerName.length()
                                          + 1);
                                      children: []
                                      pos: 34411
                                      length: 50
                                    pos: 34395
                                    length: 80
                                  pos: 34377
                                  length: 98
                                pos: 34202
                                length: 285
                              pos: 34179
                              length: 308
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType prototypeOwner = getPrototypeOwnerType(ownerType);
                              children: []
                              pos: 34499
                              length: 61
                            - type: local_variable_declaration
                              fields:
                                text: TemplateTypeMap prototypeOwnerTypeMap = null;
                              children: []
                              pos: 34571
                              length: 45
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: prototypeOwner
                                              children: []
                                              pos: 34631
                                              length: 14
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34649
                                              length: 4
                                          children: []
                                          pos: 34631
                                          length: 22
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: prototypeOwner.getTypeOfThis()
                                              children: []
                                              pos: 34671
                                              length: 30
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34705
                                              length: 4
                                          children: []
                                          pos: 34671
                                          length: 38
                                      children: []
                                      pos: 34631
                                      length: 78
                                  children: []
                                  pos: 34630
                                  length: 80
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      prototypeOwnerTypeMap =
                                                        prototypeOwner.getTypeOfThis().getTemplateTypeMap();
                                  children: []
                                  pos: 34727
                                  length: 94
                                pos: 34711
                                length: 122
                              pos: 34627
                              length: 206
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenType = null;
                              children: []
                              pos: 34845
                              length: 35
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 34895
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34908
                                              length: 4
                                          children: []
                                          pos: 34895
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: propName
                                              children: []
                                              pos: 34916
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34928
                                              length: 4
                                          children: []
                                          pos: 34916
                                          length: 16
                                      children: []
                                      pos: 34895
                                      length: 37
                                  children: []
                                  pos: 34894
                                  length: 39
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      overriddenType = findOverriddenFunction(
                                                      ownerType, propName, prototypeOwnerTypeMap);
                                  children: []
                                  pos: 34948
                                  length: 101
                                pos: 34934
                                length: 127
                              pos: 34891
                              length: 170
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setContents(getFunctionAnalysisResults(fnRoot))
                                                .inferFromOverriddenFunction(overriddenType, parametersNode)
                                                .inferTemplateTypeName(info, prototypeOwner)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 35073
                              length: 404
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 35526
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 35577
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 35590
                                                  length: 4
                                              children: []
                                              pos: 35577
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: ownerType.isFunctionPrototypeType()
                                              children: []
                                              pos: 35598
                                              length: 35
                                          children: []
                                          pos: 35577
                                          length: 56
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerType.getOwnerFunction().hasInstanceType()
                                          children: []
                                          pos: 35651
                                          length: 46
                                      children: []
                                      pos: 35577
                                      length: 120
                                  children: []
                                  pos: 35576
                                  length: 122
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      builder.inferThisType(
                                                      info, ownerType.getOwnerFunction().getInstanceType());
                                  children: []
                                  pos: 35713
                                  length: 93
                                - type: expression_statement
                                  fields:
                                    text: searchedForThisType = true;
                                  children: []
                                  pos: 35819
                                  length: 27
                                pos: 35699
                                length: 159
                              pos: 35573
                              length: 856
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 36445
                                      length: 20
                                  children: []
                                  pos: 36444
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info);
                                  children: []
                                  pos: 36481
                                  length: 28
                                pos: 36467
                                length: 54
                              pos: 36441
                              length: 80
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .buildAndRegister();
                              children: []
                              pos: 36533
                              length: 114
                            pos: 33872
                            length: 2785
                          pos: 33846
                          length: 2811
                        pos: 33136
                        length: 3529
                      pos: 33110
                      length: 3555
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 36691
                      length: 20
                    pos: 32335
                    length: 4382
                children: []
                pos: 32154
                length: 4563
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getPrototypeOwnerType
                    children: []
                    pos: 36742
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 36764
                      length: 20
                    pos: 36723
                    length: 212
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 36798
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 36811
                                      length: 4
                                  children: []
                                  pos: 36798
                                  length: 17
                                right:
                                  type: method_invocation
                                  fields:
                                    text: ownerType.isFunctionPrototypeType()
                                  children: []
                                  pos: 36819
                                  length: 35
                              children: []
                              pos: 36798
                              length: 56
                          children: []
                          pos: 36797
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return ownerType.getOwnerFunction();
                          children: []
                          pos: 36866
                          length: 36
                        pos: 36856
                        length: 54
                      pos: 36794
                      length: 116
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 36917
                      length: 12
                    pos: 36786
                    length: 149
                children: []
                pos: 36723
                length: 212
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 37049
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 37081
                      length: 20
                    pos: 37028
                    length: 1075
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType result = null;
                      children: []
                      pos: 37153
                      length: 27
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 37274
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: propType
                                      children: []
                                      pos: 37339
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 37351
                                      length: 4
                                  children: []
                                  pos: 37339
                                  length: 16
                                right:
                                  type: method_invocation
                                  fields:
                                    text: propType.isFunctionType()
                                  children: []
                                  pos: 37359
                                  length: 25
                              children: []
                              pos: 37339
                              length: 45
                          children: []
                          pos: 37338
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: result =  propType.toMaybeFunctionType();
                          children: []
                          pos: 37396
                          length: 41
                        pos: 37386
                        length: 59
                      pos: 37335
                      length: 531
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: result
                                          children: []
                                          pos: 37878
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37888
                                          length: 4
                                      children: []
                                      pos: 37878
                                      length: 14
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: typeMap
                                          children: []
                                          pos: 37896
                                          length: 7
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37907
                                          length: 4
                                      children: []
                                      pos: 37896
                                      length: 15
                                  children: []
                                  pos: 37878
                                  length: 33
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!typeMap.isEmpty()"
                                  children: []
                                  pos: 37915
                                  length: 18
                              children: []
                              pos: 37878
                              length: 55
                          children: []
                          pos: 37877
                          length: 57
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              result = result.visit(
                                          new TemplateTypeMapReplacer(typeRegistry, typeMap))
                                          .toMaybeFunctionType();
                          children: []
                          pos: 37945
                          length: 122
                        pos: 37935
                        length: 140
                      pos: 37874
                      length: 201
                    - type: return_statement
                      fields:
                        text: return result;
                      children: []
                      pos: 38083
                      length: 14
                    pos: 37145
                    length: 958
                children: []
                pos: 37028
                length: 1075
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 38810
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 38834
                      length: 11
                    pos: 38793
                    length: 1636
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 38909
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 38949
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 39011
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 39047
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 39057
                                      length: 4
                                  children: []
                                  pos: 39047
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 39065
                                  length: 24
                              children: []
                              pos: 39047
                              length: 42
                          children: []
                          pos: 39046
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 39136
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 39199
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 39206
                                          length: 4
                                      children: []
                                      pos: 39199
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 39214
                                      length: 33
                                  children: []
                                  pos: 39199
                                  length: 48
                              children: []
                              pos: 39198
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 39261
                              length: 36
                            pos: 39249
                            length: 58
                          pos: 39195
                          length: 112
                        pos: 39091
                        length: 224
                      pos: 39043
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 39327
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 39339
                                  length: 4
                              children: []
                              pos: 39327
                              length: 16
                          children: []
                          pos: 39326
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 39355
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, rValue,
                              elementsType);
                          children: []
                          pos: 39456
                          length: 67
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 39537
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 39547
                                          length: 4
                                      children: []
                                      pos: 39537
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isObjectLit()
                                      children: []
                                      pos: 39555
                                      length: 20
                                  children: []
                                  pos: 39537
                                  length: 38
                              children: []
                              pos: 39536
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 39624
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 39669
                              length: 589
                            pos: 39577
                            length: 691
                          pos: 39533
                          length: 735
                        pos: 39345
                        length: 931
                      pos: 39323
                      length: 953
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 40288
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 40296
                                      length: 4
                                  children: []
                                  pos: 40288
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 40304
                                  length: 16
                              children: []
                              pos: 40288
                              length: 32
                          children: []
                          pos: 40287
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 40332
                          length: 59
                        pos: 40322
                        length: 77
                      pos: 40284
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 40407
                      length: 16
                    pos: 38901
                    length: 1528
                children: []
                pos: 38793
                length: 1636
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 40852
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 40863
                      length: 9
                    pos: 40839
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 40908
                      length: 45
                    pos: 40900
                    length: 59
                children: []
                pos: 40839
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 41453
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 41464
                      length: 6
                    pos: 41448
                    length: 695
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 41524
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.isName()
                              children: []
                              pos: 41727
                              length: 10
                          children: []
                          pos: 41726
                          length: 12
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.isFunction() ||
                                          parent.isVar() ||
                                          parent.isParamList() ||
                                          parent.isCatch());
                          children: []
                          pos: 41749
                          length: 160
                        pos: 41739
                        length: 178
                      pos: 41723
                      length: 347
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 42077
                      length: 60
                    pos: 41516
                    length: 627
                children: []
                pos: 41448
                length: 695
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 42584
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 42595
                      length: 6
                    pos: 42579
                    length: 3843
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 42684
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.isName() && scope.isGlobal();
                      children: []
                      pos: 42745
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.isVar() ||
                                     parent.isFunction());
                      children: []
                      pos: 42805
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 43135
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isGetProp()
                                      children: []
                                      pos: 43177
                                      length: 13
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 43194
                                      length: 17
                                  children: []
                                  pos: 43177
                                  length: 34
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 43225
                                  length: 29
                              children: []
                              pos: 43177
                              length: 77
                          children: []
                          pos: 43176
                          length: 79
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 43266
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 43436
                                  length: 44
                              children: []
                              pos: 43435
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 43494
                              length: 42
                            pos: 43482
                            length: 64
                          pos: 43432
                          length: 114
                        pos: 43256
                        length: 298
                      pos: 43173
                      length: 381
                    - type: local_variable_declaration
                      fields:
                        text: Var newVar = null;
                      children: []
                      pos: 43679
                      length: 18
                    - type: local_variable_declaration
                      fields:
                        text: CompilerInput input = compiler.getInput(inputId);
                      children: []
                      pos: 43741
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 43801
                              length: 48
                          children: []
                          pos: 43800
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 43861
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              newVar = validator.expectUndeclaredVariable(
                                          sourceName, input, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 43921
                          length: 115
                        pos: 43851
                        length: 193
                      pos: 43797
                      length: 806
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType fnType = JSType.toMaybeFunctionType(type);
                      children: []
                      pos: 44688
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: fnType
                                      children: []
                                      pos: 44754
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 44764
                                      length: 4
                                  children: []
                                  pos: 44754
                                  length: 14
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!type.isEmptyType()"
                                  children: []
                                  pos: 44842
                                  length: 19
                              children: []
                              pos: 44754
                              length: 107
                          children: []
                          pos: 44753
                          length: 109
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isConstructor()
                                              children: []
                                              pos: 45214
                                              length: 22
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isInterface()
                                              children: []
                                              pos: 45240
                                              length: 20
                                          children: []
                                          pos: 45214
                                          length: 46
                                      children: []
                                      pos: 45213
                                      length: 48
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: variableName.equals(fnType.getReferenceName())
                                      children: []
                                      pos: 45277
                                      length: 46
                                  children: []
                                  pos: 45213
                                  length: 110
                              children: []
                              pos: 45212
                              length: 112
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  finishConstructorDefinition(n, variableName, fnType, scopeToDeclareIn,
                                                                        input, newVar);
                              children: []
                              pos: 45337
                              length: 124
                            pos: 45325
                            length: 146
                          pos: 45209
                          length: 262
                        pos: 44863
                        length: 616
                      pos: 44750
                      length: 729
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: shouldDeclareOnGlobalThis
                              children: []
                              pos: 45491
                              length: 25
                          children: []
                          pos: 45490
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType globalThis =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS);
                          children: []
                          pos: 45528
                          length: 82
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: identifier
                                  fields:
                                    text: inferred
                                  children: []
                                  pos: 45623
                                  length: 8
                              children: []
                              pos: 45622
                              length: 10
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  globalThis.defineInferredProperty(variableName,
                                                type == null ?
                                                getNativeType(JSTypeNative.NO_TYPE) :
                                                type,
                                                n);
                              children: []
                              pos: 45645
                              length: 166
                            pos: 45633
                            length: 188
                          pos: 45619
                          length: 287
                        pos: 45518
                        length: 396
                      pos: 45487
                      length: 427
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: isGlobalVar
                                              children: []
                                              pos: 45926
                                              length: 11
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: '"Window".equals(variableName)'
                                              children: []
                                              pos: 45941
                                              length: 29
                                          children: []
                                          pos: 45926
                                          length: 44
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 45984
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 45992
                                              length: 4
                                          children: []
                                          pos: 45984
                                          length: 12
                                      children: []
                                      pos: 45926
                                      length: 70
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 46010
                                      length: 21
                                  children: []
                                  pos: 45926
                                  length: 105
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 46045
                                  length: 20
                              children: []
                              pos: 45926
                              length: 139
                          children: []
                          pos: 45925
                          length: 141
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 46077
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 46191
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 46253
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn((type.toMaybeFunctionType()).getInstanceType());
                          children: []
                          pos: 46312
                          length: 96
                        pos: 46067
                        length: 349
                      pos: 45922
                      length: 494
                    pos: 42676
                    length: 3746
                children: []
                pos: 42579
                length: 3843
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: finishConstructorDefinition
                    children: []
                    pos: 46441
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46478
                      length: 6
                    pos: 46428
                    length: 1934
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType superClassCtor = fnType.getSuperClassConstructor();
                      children: []
                      pos: 46652
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: Property prototypeSlot = fnType.getSlot("prototype");
                      children: []
                      pos: 46723
                      length: 53
                    - type: expression_statement
                      fields:
                        text: prototypeSlot.setNode(n);
                      children: []
                      pos: 47201
                      length: 25
                    - type: local_variable_declaration
                      fields:
                        text: String prototypeName = variableName + ".prototype";
                      children: []
                      pos: 47234
                      length: 51
                    - type: local_variable_declaration
                      fields:
                        text: Var prototypeVar = scopeToDeclareIn.getVar(prototypeName);
                      children: []
                      pos: 47501
                      length: 58
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: prototypeVar
                                      children: []
                                      pos: 47570
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47586
                                      length: 4
                                  children: []
                                  pos: 47570
                                  length: 20
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: field_access
                                      fields:
                                        text: prototypeVar.scope
                                      children: []
                                      pos: 47594
                                      length: 18
                                    right:
                                      type: identifier
                                      fields:
                                        text: scopeToDeclareIn
                                      children: []
                                      pos: 47616
                                      length: 16
                                  children: []
                                  pos: 47594
                                  length: 38
                              children: []
                              pos: 47570
                              length: 62
                          children: []
                          pos: 47569
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: scopeToDeclareIn.undeclare(prototypeVar);
                          children: []
                          pos: 47644
                          length: 41
                        pos: 47634
                        length: 59
                      pos: 47566
                      length: 127
                    - type: expression_statement
                      fields:
                        text: |-
                          scopeToDeclareIn.declare(prototypeName,
                                    n, prototypeSlot.getType(), input,
                                    /* declared iff there's an explicit supertype */
                                    superClassCtor == null ||
                                    superClassCtor.getInstanceType().isEquivalentTo(
                                        getNativeType(OBJECT_TYPE)));
                      children: []
                      pos: 47701
                      length: 282
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: newVar.getInitialValue()
                                      children: []
                                      pos: 48089
                                      length: 24
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 48117
                                      length: 4
                                  children: []
                                  pos: 48089
                                  length: 32
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!n.isFromExterns()"
                                  children: []
                                  pos: 48135
                                  length: 18
                              children: []
                              pos: 48089
                              length: 64
                          children: []
                          pos: 48088
                          length: 66
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(sourceName, n,
                                              fnType.isConstructor() ?
                                              CTOR_INITIALIZER : IFACE_INITIALIZER,
                                              variableName));
                          children: []
                          pos: 48165
                          length: 183
                        pos: 48155
                        length: 201
                      pos: 48085
                      length: 271
                    pos: 46593
                    length: 1769
                children: []
                pos: 46428
                length: 1934
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 48476
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 48503
                      length: 6
                    pos: 48460
                    length: 148
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Scope scope = getQnameRootScope(n);
                      children: []
                      pos: 48519
                      length: 35
                    - type: return_statement
                      fields:
                        text: return scope != null && scope.isGlobal();
                      children: []
                      pos: 48561
                      length: 41
                    pos: 48511
                    length: 97
                children: []
                pos: 48460
                length: 148
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getQnameRootScope
                    children: []
                    pos: 48700
                    length: 17
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 48718
                      length: 6
                    pos: 48686
                    length: 275
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 48734
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: root.isName()
                              children: []
                              pos: 48792
                              length: 13
                          children: []
                          pos: 48791
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 48817
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 48871
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 48878
                                      length: 4
                                  children: []
                                  pos: 48871
                                  length: 11
                              children: []
                              pos: 48870
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.getScope();
                              children: []
                              pos: 48896
                              length: 22
                            pos: 48884
                            length: 44
                          pos: 48867
                          length: 61
                        pos: 48807
                        length: 129
                      pos: 48788
                      length: 148
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 48943
                      length: 12
                    pos: 48726
                    length: 235
                children: []
                pos: 48686
                length: 275
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 49324
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: JSDocInfo info
                      children: []
                      pos: 49340
                      length: 14
                    pos: 49309
                    length: 2343
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 49412
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 49420
                                      length: 4
                                  children: []
                                  pos: 49412
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 49428
                                  length: 14
                              children: []
                              pos: 49412
                              length: 30
                          children: []
                          pos: 49411
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(lValue, info);
                          children: []
                          pos: 49454
                          length: 49
                        pos: 49444
                        length: 67
                      pos: 49408
                      length: 812
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: isConstantSymbol(info, lValue)
                              children: []
                              pos: 50296
                              length: 30
                          children: []
                          pos: 50295
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 50342
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 50352
                                      length: 4
                                  children: []
                                  pos: 50342
                                  length: 14
                              children: []
                              pos: 50341
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSDocInfo rValueInfo = rValue.getJSDocInfo();
                              children: []
                              pos: 50370
                              length: 45
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: rValueInfo
                                              children: []
                                              pos: 50430
                                              length: 10
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 50444
                                              length: 4
                                          children: []
                                          pos: 50430
                                          length: 18
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rValueInfo.hasType()
                                          children: []
                                          pos: 50452
                                          length: 20
                                      children: []
                                      pos: 50430
                                      length: 42
                                  children: []
                                  pos: 50429
                                  length: 44
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: return_statement
                                  fields:
                                    text: return rValueInfo.getType().evaluate(scope,
                                      typeRegistry);
                                  children: []
                                  pos: 50564
                                  length: 58
                                pos: 50474
                                length: 160
                              pos: 50426
                              length: 1145
                            pos: 50358
                            length: 1223
                          pos: 50338
                          length: 1243
                        pos: 50328
                        length: 1261
                      pos: 50292
                      length: 1297
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(lValue, info);
                      children: []
                      pos: 51597
                      length: 49
                    pos: 49400
                    length: 2252
                children: []
                pos: 49309
                length: 2343
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 51679
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Var v"
                      children: []
                      pos: 51695
                      length: 15
                    pos: 51658
                    length: 211
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: 'JSType t = v == null ? null : v.getType();'
                      children: []
                      pos: 51720
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: 'ObjectType o = t == null ? null : t.dereference();'
                      children: []
                      pos: 51769
                      length: 50
                    - type: return_statement
                      fields:
                        text: return JSType.toMaybeFunctionType(o);
                      children: []
                      pos: 51826
                      length: 37
                    pos: 51712
                    length: 157
                children: []
                pos: 51658
                length: 211
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForCallingConventionDefiningCalls
                    children: []
                    pos: 51975
                    length: 38
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 52023
                      length: 6
                    pos: 51962
                    length: 228
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: |-
                          codingConvention.checkForCallingConventionDefiningCalls(n,
                                    delegateCallingConventions);
                      children: []
                      pos: 52087
                      length: 97
                    pos: 52079
                    length: 111
                children: []
                pos: 51962
                length: 228
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 52406
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 52433
                      length: 15
                    pos: 52393
                    length: 3009
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 52466
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 52567
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52583
                                  length: 4
                              children: []
                              pos: 52567
                              length: 20
                          children: []
                          pos: 52566
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType superCtor = getFunctionType(
                                          scope.getVar(relationship.superclassName));
                          children: []
                          pos: 52599
                          length: 97
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType subCtor = getFunctionType(
                                          scope.getVar(relationship.subclassName));
                          children: []
                          pos: 52705
                          length: 93
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: superCtor
                                                  children: []
                                                  pos: 52811
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 52824
                                                  length: 4
                                              children: []
                                              pos: 52811
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: superCtor.isConstructor()
                                              children: []
                                              pos: 52832
                                              length: 25
                                          children: []
                                          pos: 52811
                                          length: 46
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 52873
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 52884
                                              length: 4
                                          children: []
                                          pos: 52873
                                          length: 15
                                      children: []
                                      pos: 52811
                                      length: 77
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: subCtor.isConstructor()
                                      children: []
                                      pos: 52892
                                      length: 23
                                  children: []
                                  pos: 52811
                                  length: 104
                              children: []
                              pos: 52810
                              length: 106
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType superClass = superCtor.getInstanceType();
                              children: []
                              pos: 52929
                              length: 52
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType subClass = subCtor.getInstanceType();
                              children: []
                              pos: 52992
                              length: 48
                            - type: expression_statement
                              fields:
                                text: superCtor = superClass.getConstructor();
                              children: []
                              pos: 53238
                              length: 40
                            - type: expression_statement
                              fields:
                                text: subCtor = subClass.getConstructor();
                              children: []
                              pos: 53289
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: field_access
                                                  fields:
                                                    text: relationship.type
                                                  children: []
                                                  pos: 53341
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: SubclassType.INHERITS
                                                  children: []
                                                  pos: 53362
                                                  length: 21
                                              children: []
                                              pos: 53341
                                              length: 42
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!superClass.isEmptyType()"
                                              children: []
                                              pos: 53401
                                              length: 25
                                          children: []
                                          pos: 53341
                                          length: 85
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!subClass.isEmptyType()"
                                          children: []
                                          pos: 53430
                                          length: 23
                                      children: []
                                      pos: 53341
                                      length: 112
                                  children: []
                                  pos: 53340
                                  length: 114
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 53469
                                  length: 54
                                pos: 53455
                                length: 80
                              pos: 53337
                              length: 198
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 53551
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53564
                                              length: 4
                                          children: []
                                          pos: 53551
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 53572
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53583
                                              length: 4
                                          children: []
                                          pos: 53572
                                          length: 15
                                      children: []
                                      pos: 53551
                                      length: 36
                                  children: []
                                  pos: 53550
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 53603
                                  length: 99
                                pos: 53589
                                length: 125
                              pos: 53547
                              length: 167
                            pos: 52917
                            length: 807
                          pos: 52807
                          length: 917
                        pos: 52589
                        length: 1143
                      pos: 52563
                      length: 1169
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 53740
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 53843
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 53871
                                  length: 4
                              children: []
                              pos: 53843
                              length: 32
                          children: []
                          pos: 53842
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 53887
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 54001
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54015
                                      length: 4
                                  children: []
                                  pos: 54001
                                  length: 18
                              children: []
                              pos: 54000
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 54033
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 54105
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 54121
                                          length: 4
                                      children: []
                                      pos: 54105
                                      length: 20
                                  children: []
                                  pos: 54104
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 54141
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 54240
                                  length: 92
                                pos: 54127
                                length: 217
                              pos: 54101
                              length: 243
                            pos: 54021
                            length: 333
                          pos: 53997
                          length: 357
                        pos: 53877
                        length: 485
                      pos: 53839
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 54370
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 54479
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54503
                                  length: 4
                              children: []
                              pos: 54479
                              length: 28
                          children: []
                          pos: 54478
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 54519
                          length: 48
                        pos: 54509
                        length: 66
                      pos: 54475
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(n);
                      children: []
                      pos: 54583
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 54683
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54704
                                  length: 4
                              children: []
                              pos: 54683
                              length: 25
                          children: []
                          pos: 54682
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: field_access
                                      fields:
                                        text: objectLiteralCast.diagnosticType
                                      children: []
                                      pos: 54724
                                      length: 32
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 54760
                                      length: 4
                                  children: []
                                  pos: 54724
                                  length: 40
                              children: []
                              pos: 54723
                              length: 42
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  ObjectType type = ObjectType.cast(
                                                typeRegistry.getType(objectLiteralCast.typeName));
                              children: []
                              pos: 54778
                              length: 99
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 54892
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54900
                                              length: 4
                                          children: []
                                          pos: 54892
                                          length: 12
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: type.getConstructor()
                                              children: []
                                              pos: 54908
                                              length: 21
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 54933
                                              length: 4
                                          children: []
                                          pos: 54908
                                          length: 29
                                      children: []
                                      pos: 54892
                                      length: 45
                                  children: []
                                  pos: 54891
                                  length: 47
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: setDeferredType(objectLiteralCast.objectNode,
                                      type);
                                  children: []
                                  pos: 54953
                                  length: 52
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      objectLiteralCast.objectNode.putBooleanProp(
                                                      Node.REFLECTED_OBJECT, true);
                                  children: []
                                  pos: 55018
                                  length: 90
                                pos: 54939
                                length: 181
                              pos: 54888
                              length: 358
                            pos: 54766
                            length: 490
                          pos: 54720
                          length: 668
                        pos: 54710
                        length: 686
                      pos: 54679
                      length: 717
                    pos: 52458
                    length: 2944
                children: []
                pos: 52393
                length: 3009
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 55499
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 55534
                      length: 41
                    pos: 55486
                    length: 1839
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 55585
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 55702
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 55825
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 55964
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 55983
                                          length: 4
                                      children: []
                                      pos: 55964
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 56001
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 56023
                                          length: 4
                                      children: []
                                      pos: 56001
                                      length: 26
                                  children: []
                                  pos: 55964
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 56041
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 56064
                                      length: 4
                                  children: []
                                  pos: 56041
                                  length: 27
                              children: []
                              pos: 55964
                              length: 104
                          children: []
                          pos: 55963
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 56080
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 56151
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 56228
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 56312
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 56329
                                              length: 4
                                          children: []
                                          pos: 56312
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 56337
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 56357
                                              length: 4
                                          children: []
                                          pos: 56337
                                          length: 24
                                      children: []
                                      pos: 56312
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 56377
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 56398
                                          length: 4
                                      children: []
                                      pos: 56377
                                      length: 25
                                  children: []
                                  pos: 56312
                                  length: 90
                              children: []
                              pos: 56311
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 56416
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 56524
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 56626
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null, null);
                              children: []
                              pos: 56816
                              length: 180
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 57007
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 57073
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 57243
                              length: 58
                            pos: 56404
                            length: 907
                          pos: 56308
                          length: 1003
                        pos: 56070
                        length: 1249
                      pos: 55960
                      length: 1359
                    pos: 55577
                    length: 1748
                children: []
                pos: 55486
                length: 1839
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 57759
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 57785
                      length: 15
                    pos: 57754
                    length: 4651
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 57870
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 57912
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 57967
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 58010
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 58064
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(info, n, rhsValue);
                      children: []
                      pos: 58785
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 58850
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 58863
                                      length: 4
                                  children: []
                                  pos: 58850
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 58871
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 58883
                                      length: 4
                                  children: []
                                  pos: 58871
                                  length: 16
                              children: []
                              pos: 58850
                              length: 37
                          children: []
                          pos: 58849
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 58934
                          length: 33
                        pos: 58889
                        length: 86
                      pos: 58846
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 59222
                              length: 28
                          children: []
                          pos: 59221
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 59262
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 59306
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 59314
                                      length: 4
                                  children: []
                                  pos: 59306
                                  length: 12
                              children: []
                              pos: 59305
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType qVarType = ObjectType.cast(qVar.getType());
                              children: []
                              pos: 59649
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: qVarType
                                                  children: []
                                                  pos: 59718
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 59730
                                                  length: 4
                                              children: []
                                              pos: 59718
                                              length: 16
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: rhsValue
                                                  children: []
                                                  pos: 59752
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 59764
                                                  length: 4
                                              children: []
                                              pos: 59752
                                              length: 16
                                          children: []
                                          pos: 59718
                                          length: 50
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rhsValue.isObjectLit()
                                          children: []
                                          pos: 59786
                                          length: 22
                                      children: []
                                      pos: 59718
                                      length: 90
                                  children: []
                                  pos: 59717
                                  length: 92
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      typeRegistry.resetImplicitPrototype(
                                                      rhsValue.getJSType(), qVarType.getImplicitPrototype());
                                  children: []
                                  pos: 59824
                                  length: 108
                                pos: 59810
                                length: 134
                              pos: 59714
                              length: 652
                            - type: expression_statement
                              fields:
                                text: qVar.getScope().undeclare(qVar);
                              children: []
                              pos: 60378
                              length: 32
                            pos: 59320
                            length: 1100
                          pos: 59302
                          length: 1118
                        pos: 59252
                        length: 1176
                      pos: 59218
                      length: 1210
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 60440
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60453
                                  length: 4
                              children: []
                              pos: 60440
                              length: 17
                          children: []
                          pos: 60439
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: parent.isExprResult()
                                  children: []
                                  pos: 60473
                                  length: 21
                              children: []
                              pos: 60472
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 60508
                              length: 148
                            pos: 60496
                            length: 170
                          pos: 60469
                          length: 197
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 60676
                          length: 7
                        pos: 60459
                        length: 232
                      pos: 60436
                      length: 255
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean inferred = isQualifiedNameInferred(
                                    qName, n, info, rhsValue, valueType);
                      children: []
                      pos: 60699
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 60801
                              length: 9
                          children: []
                          pos: 60800
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 60822
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 60883
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 60896
                                      length: 4
                                  children: []
                                  pos: 60883
                                  length: 17
                              children: []
                              pos: 60882
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 61015
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 61098
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 61152
                                                  length: 42
                                              children: []
                                              pos: 61098
                                              length: 96
                                          children: []
                                          pos: 61097
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 61215
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 61227
                                                          length: 31
                                                      children: []
                                                      pos: 61215
                                                      length: 43
                                                  children: []
                                                  pos: 61214
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 61278
                                                  length: 27
                                              children: []
                                              pos: 61214
                                              length: 91
                                          children: []
                                          pos: 61213
                                          length: 93
                                      children: []
                                      pos: 61097
                                      length: 209
                                  children: []
                                  pos: 61096
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, n);
                                  children: []
                                  pos: 61396
                                  length: 57
                                pos: 61308
                                length: 157
                              pos: 61093
                              length: 372
                            pos: 60902
                            length: 573
                          pos: 60879
                          length: 596
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 61617
                          length: 43
                        pos: 60812
                        length: 856
                      pos: 60797
                      length: 1602
                    pos: 57862
                    length: 4543
                children: []
                pos: 57754
                length: 4651
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQualifiedNameInferred
                    children: []
                    pos: 63454
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String qName
                      children: []
                      pos: 63487
                      length: 12
                    pos: 63438
                    length: 1695
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 63578
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 63591
                                  length: 4
                              children: []
                              pos: 63578
                              length: 17
                          children: []
                          pos: 63577
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 63607
                          length: 12
                        pos: 63597
                        length: 30
                      pos: 63574
                      length: 53
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qName
                                      children: []
                                      pos: 63711
                                      length: 5
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 63720
                                      length: 4
                                  children: []
                                  pos: 63711
                                  length: 13
                                right:
                                  type: method_invocation
                                  fields:
                                    text: qName.endsWith(".prototype")
                                  children: []
                                  pos: 63728
                                  length: 28
                              children: []
                              pos: 63711
                              length: 45
                          children: []
                          pos: 63710
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 63770
                          length: 13
                        pos: 63758
                        length: 33
                      pos: 63707
                      length: 84
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 63799
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 63834
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 63842
                                  length: 4
                              children: []
                              pos: 63834
                              length: 12
                          children: []
                          pos: 63833
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (isConstantSymbol(info, n) && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 63858
                          length: 249
                        pos: 63848
                        length: 267
                      pos: 63830
                      length: 285
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: inferred
                                      children: []
                                      pos: 64127
                                      length: 8
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rhsValue
                                          children: []
                                          pos: 64139
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 64151
                                          length: 4
                                      children: []
                                      pos: 64139
                                      length: 16
                                  children: []
                                  pos: 64127
                                  length: 28
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rhsValue.isFunction()
                                  children: []
                                  pos: 64159
                                  length: 21
                              children: []
                              pos: 64127
                              length: 53
                          children: []
                          pos: 64126
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 64196
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 64204
                                      length: 4
                                  children: []
                                  pos: 64196
                                  length: 12
                              children: []
                              pos: 64195
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return false;
                              children: []
                              pos: 64222
                              length: 13
                            pos: 64210
                            length: 35
                          pos: 64192
                          length: 904
                        pos: 64182
                        length: 922
                      pos: 64123
                      length: 981
                    - type: return_statement
                      fields:
                        text: return inferred;
                      children: []
                      pos: 65111
                      length: 16
                    pos: 63566
                    length: 1567
                children: []
                pos: 63438
                length: 1695
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isConstantSymbol
                    children: []
                    pos: 65155
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: JSDocInfo info
                      children: []
                      pos: 65172
                      length: 14
                    pos: 65139
                    length: 528
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 65211
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 65219
                                      length: 4
                                  children: []
                                  pos: 65211
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.isConstant()
                                  children: []
                                  pos: 65227
                                  length: 17
                              children: []
                              pos: 65211
                              length: 33
                          children: []
                          pos: 65210
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 65256
                          length: 12
                        pos: 65246
                        length: 30
                      pos: 65207
                      length: 69
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 65292
                              length: 14
                          children: []
                          pos: 65291
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NAME:
                                        return NodeUtil.isConstantByConvention(
                                            compiler.getCodingConvention(), node, node.getParent());
                                      case Token.GETPROP:
                                        return node.isQualifiedName() && NodeUtil.isConstantByConvention(
                                            compiler.getCodingConvention(), node.getLastChild(), node);
                                    }
                          children: []
                          pos: 65308
                          length: 333
                      children: []
                      pos: 65284
                      length: 357
                    - type: return_statement
                      fields:
                        text: return false;
                      children: []
                      pos: 65648
                      length: 13
                    pos: 65199
                    length: 468
                children: []
                pos: 65139
                length: 528
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 65912
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 65926
                      length: 15
                    pos: 65893
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 65951
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 66000
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 66012
                                  length: 4
                              children: []
                              pos: 66000
                              length: 16
                          children: []
                          pos: 65999
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 66028
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 66078
                          length: 110
                        pos: 66018
                        length: 178
                      pos: 65996
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 66203
                      length: 12
                    pos: 65943
                    length: 278
                children: []
                pos: 65893
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 66363
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 66358
                    length: 1101
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 66397
                      length: 1056
                    pos: 66389
                    length: 1070
                children: []
                pos: 66358
                length: 1101
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 67611
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final JSType thisType;
                      children: []
                      pos: 67686
                      length: 30
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(JSType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 67724
                      length: 78
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 67838
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 67844
                            length: 15
                          pos: 67810
                          length: 477
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: method_invocation
                                    fields:
                                      text: n.isExprResult()
                                    children: []
                                    pos: 67896
                                    length: 16
                                children: []
                                pos: 67895
                                length: 18
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 67926
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 67976
                                        length: 15
                                    children: []
                                    pos: 67975
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 67993
                                    length: 276
                                children: []
                                pos: 67968
                                length: 301
                              pos: 67914
                              length: 365
                            pos: 67892
                            length: 387
                          pos: 67882
                          length: 405
                      children: []
                      pos: 67810
                      length: 477
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 68308
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: Node member
                            children: []
                            pos: 68327
                            length: 11
                          pos: 68295
                          length: 1449
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 68406
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 68656
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 68664
                                                length: 4
                                            children: []
                                            pos: 68656
                                            length: 12
                                          right:
                                            type: unary_expression
                                            fields:
                                              text: "!member.isGetProp()"
                                            children: []
                                            pos: 68684
                                            length: 19
                                        children: []
                                        pos: 68656
                                        length: 47
                                      right:
                                        type: unary_expression
                                        fields:
                                          text: "!member.getFirstChild().isThis()"
                                        children: []
                                        pos: 68719
                                        length: 32
                                    children: []
                                    pos: 68656
                                    length: 95
                                children: []
                                pos: 68655
                                length: 97
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 68765
                                length: 7
                              pos: 68753
                              length: 29
                            pos: 68652
                            length: 130
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 68792
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType thisObjectType = thisType.toObjectType();
                            children: []
                            pos: 68998
                            length: 48
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: thisObjectType
                                        children: []
                                        pos: 69059
                                        length: 14
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 69077
                                        length: 4
                                    children: []
                                    pos: 69059
                                    length: 22
                                children: []
                                pos: 69058
                                length: 24
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: |-
                                    ImmutableList<TemplateType> keys =
                                                  thisObjectType.getTemplateTypeMap().getTemplateKeys();
                                children: []
                                pos: 69095
                                length: 103
                              - type: expression_statement
                                fields:
                                  text: typeRegistry.setTemplateTypeNames(keys);
                                children: []
                                pos: 69209
                                length: 40
                              pos: 69083
                              length: 176
                            pos: 69055
                            length: 204
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(info, member,
                                value);
                            children: []
                            pos: 69269
                            length: 53
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: not_equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: thisObjectType
                                        children: []
                                        pos: 69336
                                        length: 14
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 69354
                                        length: 4
                                    children: []
                                    pos: 69336
                                    length: 22
                                children: []
                                pos: 69335
                                length: 24
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: typeRegistry.clearTemplateTypeNames();
                                children: []
                                pos: 69372
                                length: 38
                              pos: 69360
                              length: 60
                            pos: 69332
                            length: 88
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 69430
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: and
                                        fields:
                                          left:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: jsType
                                                children: []
                                                pos: 69477
                                                length: 6
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 69487
                                                length: 4
                                            children: []
                                            pos: 69477
                                            length: 14
                                          right:
                                            type: parenthesized_expression
                                            fields:
                                              expression:
                                                type: or
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.isName()
                                                    children: []
                                                    pos: 69508
                                                    length: 13
                                                  right:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.isString()
                                                    children: []
                                                    pos: 69525
                                                    length: 15
                                                children: []
                                                pos: 69508
                                                length: 32
                                            children: []
                                            pos: 69507
                                            length: 34
                                        children: []
                                        pos: 69477
                                        length: 64
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: thisType.toObjectType()
                                            children: []
                                            pos: 69557
                                            length: 23
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 69584
                                            length: 4
                                        children: []
                                        pos: 69557
                                        length: 31
                                    children: []
                                    pos: 69477
                                    length: 111
                                children: []
                                pos: 69476
                                length: 113
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.toObjectType().defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  member);
                                children: []
                                pos: 69602
                                length: 124
                              pos: 69590
                              length: 146
                            pos: 69473
                            length: 263
                          pos: 68396
                          length: 1348
                      children: []
                      pos: 68295
                      length: 1449
                    pos: 67591
                    length: 2159
                children: []
                pos: 67591
                length: 2159
              pos: 16716
              length: 53063
          children: []
          pos: 16716
          length: 53063
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 69876
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 69898
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 69927
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 69963
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 70000
                length: 168
              pos: 69849
              length: 323
          children: []
          pos: 69849
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 70307
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 70362
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 70701
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 70707
                      length: 15
                    pos: 70679
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 70753
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 70795
                              length: 11
                          children: []
                          pos: 70794
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 70808
                          length: 195
                      children: []
                      pos: 70787
                      length: 216
                    pos: 70745
                    length: 264
                children: []
                pos: 70679
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 71034
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71069
                      length: 15
                    pos: 71015
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 71154
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 71189
                      length: 62
                    pos: 71146
                    length: 111
                children: []
                pos: 71015
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 71437
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71462
                      length: 15
                    pos: 71424
                    length: 944
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 71523
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 71531
                                      length: 4
                                  children: []
                                  pos: 71523
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 71539
                                  length: 22
                              children: []
                              pos: 71523
                              length: 38
                          children: []
                          pos: 71522
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71573
                          length: 7
                        pos: 71563
                        length: 25
                      pos: 71519
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 71596
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 71653
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 71664
                                  length: 4
                              children: []
                              pos: 71653
                              length: 15
                          children: []
                          pos: 71652
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71680
                          length: 7
                        pos: 71670
                        length: 25
                      pos: 71649
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, unknownType);
                      children: []
                      pos: 71870
                      length: 47
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 71925
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 72006
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 72018
                                  length: 4
                              children: []
                              pos: 72006
                              length: 16
                          children: []
                          pos: 72005
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 72034
                          length: 118
                        pos: 72024
                        length: 136
                      pos: 72002
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 72168
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: candidate.isGetProp()
                              children: []
                              pos: 72233
                              length: 21
                          children: []
                          pos: 72232
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 72266
                          length: 88
                        pos: 72256
                        length: 106
                      pos: 72229
                      length: 133
                    pos: 71511
                    length: 857
                children: []
                pos: 71424
                length: 944
              pos: 70287
              length: 2085
          children: []
          pos: 70287
          length: 2085
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 72524
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 72644
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 72782
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 72777
                    length: 744
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 72798
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          AstFunctionContents contents =
                                    getFunctionAnalysisResults(scope.getRootNode());
                      children: []
                      pos: 72866
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: contents
                                  children: []
                                  pos: 72966
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 72978
                                  length: 4
                              children: []
                              pos: 72966
                              length: 16
                          children: []
                          pos: 72965
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (String varName : contents.getEscapedVarNames()) {
                                        Var v = scope.getVar(varName);
                                        Preconditions.checkState(v.getScope() == scope);
                                        v.markEscaped();
                                      }
                          children: []
                          pos: 72994
                          length: 191
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Multiset.Entry<String> entry :
                                               contents.getAssignedNameCounts().entrySet()) {
                                        Var v = scope.getVar(entry.getElement());
                                        Preconditions.checkState(v.getScope() == scope);
                                        if (entry.getCount() == 1) {
                                          v.markAssignedExactlyOnce();
                                        }
                                      }
                          children: []
                          pos: 73195
                          length: 312
                        pos: 72984
                        length: 531
                      pos: 72962
                      length: 553
                    pos: 72790
                    length: 731
                children: []
                pos: 72777
                length: 744
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 73807
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 73813
                      length: 15
                    pos: 73785
                    length: 293
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 73863
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 73868
                                  length: 19
                              children: []
                              pos: 73863
                              length: 24
                          children: []
                          pos: 73862
                          length: 26
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 73899
                          length: 7
                        pos: 73889
                        length: 25
                      pos: 73859
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isParamList()
                                  children: []
                                  pos: 73925
                                  length: 15
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 73944
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 73954
                                      length: 19
                                  children: []
                                  pos: 73944
                                  length: 29
                              children: []
                              pos: 73925
                              length: 48
                          children: []
                          pos: 73924
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 73985
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 74023
                          length: 7
                        pos: 73975
                        length: 63
                      pos: 73921
                      length: 117
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 74046
                      length: 26
                    pos: 73851
                    length: 227
                children: []
                pos: 73785
                length: 293
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 74159
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 74180
                      length: 11
                    pos: 74146
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 74237
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 74285
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 74335
                              length: 17
                          children: []
                          pos: 74334
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 74364
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 74416
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 74425
                                          length: 4
                                      children: []
                                      pos: 74416
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 74610
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 74633
                                                  length: 4
                                              children: []
                                              pos: 74610
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 74786
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 74813
                                                  length: 6
                                              children: []
                                              pos: 74786
                                              length: 33
                                          children: []
                                          pos: 74610
                                          length: 209
                                      children: []
                                      pos: 74609
                                      length: 211
                                  children: []
                                  pos: 74416
                                  length: 404
                              children: []
                              pos: 74415
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 74834
                              length: 58
                            pos: 74822
                            length: 80
                          pos: 74412
                          length: 490
                        pos: 74354
                        length: 556
                      pos: 74331
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 74918
                      length: 25
                    pos: 74193
                    length: 756
                children: []
                pos: 74146
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 75031
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 75048
                      length: 17
                    pos: 75018
                    length: 1710
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 75075
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node iifeArgumentNode = null;
                      children: []
                      pos: 75142
                      length: 29
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isCallOrNewTarget(functionNode)
                              children: []
                              pos: 75183
                              length: 40
                          children: []
                          pos: 75182
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: iifeArgumentNode = functionNode.getNext();
                          children: []
                          pos: 75235
                          length: 42
                        pos: 75225
                        length: 60
                      pos: 75179
                      length: 106
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    JSType.toMaybeFunctionType(functionNode.getJSType());
                      children: []
                      pos: 75293
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 75395
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 75411
                                  length: 4
                              children: []
                              pos: 75395
                              length: 20
                          children: []
                          pos: 75394
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 75427
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 75496
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 75515
                                      length: 4
                                  children: []
                                  pos: 75496
                                  length: 23
                              children: []
                              pos: 75495
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 75533
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              JSType paramType = jsDocParameter == null ?
                                                  unknownType : jsDocParameter.getJSType();
                                              boolean inferred = paramType == null || paramType == unknownType;

                                              if (iifeArgumentNode != null && inferred) {
                                                String argumentName = iifeArgumentNode.getQualifiedName();
                                                Var argumentVar =
                                                    argumentName == null || scope.getParent() == null
                                                    ? null : scope.getParent().getVar(argumentName);
                                                if (argumentVar != null && !argumentVar.isTypeInferred()) {
                                                  paramType = argumentVar.getType();
                                                }
                                              }

                                              if (paramType == null) {
                                                paramType = unknownType;
                                              }

                                              defineSlot(astParameter, functionNode, paramType, inferred);

                                              if (jsDocParameter != null) {
                                                jsDocParameter = jsDocParameter.getNext();
                                              }
                                              if (iifeArgumentNode != null) {
                                                iifeArgumentNode = iifeArgumentNode.getNext();
                                              }
                                            }
                              children: []
                              pos: 75598
                              length: 1106
                            pos: 75521
                            length: 1193
                          pos: 75492
                          length: 1222
                        pos: 75417
                        length: 1305
                      pos: 75391
                      length: 1331
                    pos: 75067
                    length: 1661
                children: []
                pos: 75018
                length: 1710
              pos: 72504
              length: 4252
          children: []
          pos: 72504
          length: 4252
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: FirstOrderFunctionAnalyzer
              children: []
              pos: 76959
              length: 26
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final AbstractCompiler compiler;
                children: []
                pos: 77053
                length: 40
              - type: field_declaration
                fields:
                  text: private final Map<Node, AstFunctionContents> data;
                children: []
                pos: 77098
                length: 50
              - type: constructor_declaration
                fields:
                  text: |-
                    FirstOrderFunctionAnalyzer(
                            AbstractCompiler compiler, Map<Node, AstFunctionContents> outParam) {
                          this.compiler = compiler;
                          this.data = outParam;
                        }
                children: []
                pos: 77154
                length: 171
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: process
                    children: []
                    pos: 77353
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node externs
                      children: []
                      pos: 77361
                      length: 12
                    pos: 77331
                    length: 267
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: externs
                                  children: []
                                  pos: 77398
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 77409
                                  length: 4
                              children: []
                              pos: 77398
                              length: 15
                          children: []
                          pos: 77397
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: NodeTraversal.traverse(compiler, root, this);
                          children: []
                          pos: 77425
                          length: 45
                        pos: 77415
                        length: 63
                      pos: 77394
                      length: 198
                    pos: 77386
                    length: 212
                children: []
                pos: 77331
                length: 267
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: enterScope
                    children: []
                    pos: 77626
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 77637
                      length: 15
                    pos: 77604
                    length: 181
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!t.inGlobalScope()"
                              children: []
                              pos: 77666
                              length: 18
                          children: []
                          pos: 77665
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node n = t.getScopeRoot();
                          children: []
                          pos: 77696
                          length: 26
                        - type: expression_statement
                          fields:
                            text: data.put(n, new AstFunctionContents(n));
                          children: []
                          pos: 77731
                          length: 40
                        pos: 77686
                        length: 93
                      pos: 77662
                      length: 117
                    pos: 77654
                    length: 131
                children: []
                pos: 77604
                length: 181
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 77813
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 77819
                      length: 15
                    pos: 77791
                    length: 1927
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: t.inGlobalScope()
                              children: []
                              pos: 77869
                              length: 17
                          children: []
                          pos: 77868
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 77898
                          length: 7
                        pos: 77888
                        length: 25
                      pos: 77865
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isReturn()
                                  children: []
                                  pos: 77925
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getFirstChild()
                                      children: []
                                      pos: 77941
                                      length: 17
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 77962
                                      length: 4
                                  children: []
                                  pos: 77941
                                  length: 25
                              children: []
                              pos: 77925
                              length: 41
                          children: []
                          pos: 77924
                          length: 43
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: data.get(t.getScopeRoot()).recordNonEmptyReturn();
                          children: []
                          pos: 77978
                          length: 50
                        pos: 77968
                        length: 68
                      pos: 77921
                      length: 115
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_or_equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: t.getScopeDepth()
                                  children: []
                                  pos: 78048
                                  length: 17
                                right:
                                  type: decimal_integer_literal
                                  fields:
                                    text: '1'
                                  children: []
                                  pos: 78069
                                  length: 1
                              children: []
                              pos: 78048
                              length: 22
                          children: []
                          pos: 78047
                          length: 24
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 78473
                          length: 7
                        pos: 78072
                        length: 416
                      pos: 78044
                      length: 444
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isName()
                                      children: []
                                      pos: 78500
                                      length: 10
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isLValue(n)
                                      children: []
                                      pos: 78514
                                      length: 20
                                  children: []
                                  pos: 78500
                                  length: 34
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!NodeUtil.isBleedingFunctionName(n)"
                                  children: []
                                  pos: 78689
                                  length: 35
                              children: []
                              pos: 78500
                              length: 224
                          children: []
                          pos: 78499
                          length: 226
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String name = n.getString();
                          children: []
                          pos: 78736
                          length: 28
                        - type: local_variable_declaration
                          fields:
                            text: Scope scope = t.getScope();
                          children: []
                          pos: 78773
                          length: 27
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(name);
                          children: []
                          pos: 78809
                          length: 29
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 78851
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 78858
                                      length: 4
                                  children: []
                                  pos: 78851
                                  length: 11
                              children: []
                              pos: 78850
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Scope ownerScope = var.getScope();
                              children: []
                              pos: 78876
                              length: 34
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: ownerScope.isLocal()
                                      children: []
                                      pos: 78925
                                      length: 20
                                  children: []
                                  pos: 78924
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordAssignedName(name);
                                  children: []
                                  pos: 78961
                                  length: 60
                                pos: 78947
                                length: 86
                              pos: 78921
                              length: 112
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: scope
                                              children: []
                                              pos: 79049
                                              length: 5
                                            right:
                                              type: identifier
                                              fields:
                                                text: ownerScope
                                              children: []
                                              pos: 79058
                                              length: 10
                                          children: []
                                          pos: 79049
                                          length: 19
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerScope.isLocal()
                                          children: []
                                          pos: 79072
                                          length: 20
                                      children: []
                                      pos: 79049
                                      length: 43
                                  children: []
                                  pos: 79048
                                  length: 45
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: data.get(ownerScope.getRootNode()).recordEscapedVarName(name);
                                  children: []
                                  pos: 79108
                                  length: 62
                                pos: 79094
                                length: 88
                              pos: 79045
                              length: 137
                            pos: 78864
                            length: 328
                          pos: 78847
                          length: 345
                        pos: 78726
                        length: 474
                      pos: 78496
                      length: 1216
                    pos: 77857
                    length: 1861
                children: []
                pos: 77791
                length: 1927
              pos: 76938
              length: 2784
          children: []
          pos: 76938
          length: 2784
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFunctionAnalysisResults
              children: []
              pos: 79754
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node n"
                children: []
                pos: 79781
                length: 16
              pos: 79726
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: "n"
                            children: []
                            pos: 79809
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 79814
                            length: 4
                        children: []
                        pos: 79809
                        length: 9
                    children: []
                    pos: 79808
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 79828
                    length: 12
                  pos: 79820
                  length: 26
                pos: 79805
                length: 41
              - type: return_statement
                fields:
                  text: return functionAnalysisResults.get(n);
                children: []
                pos: 79971
                length: 38
              pos: 79799
              length: 214
          children: []
          pos: 79726
          length: 287
        pos: 5317
        length: 74698
    children: []
    pos: 5317
    length: 74698
  pos: 0
  length: 80016
text_diff: "--- before\n+++ after\n@@ -1667,13 +1667,7 @@\n \n       // Prototypes
  of constructors and interfaces are always declared.\n       if (qName != null &&
  qName.endsWith(\".prototype\")) {\n-        String className = qName.substring(0,
  qName.lastIndexOf(\".prototype\"));\n-        Var slot = scope.getSlot(className);\n-
  \       JSType classType = slot == null ? null : slot.getType();\n-        if (classType
  != null\n-            && (classType.isConstructor() || classType.isInterface()))
  {\n           return false;\n-        }\n       }\n \n       boolean inferred =
  true;\n"
tree_diff: |+
  New cluster:
  MOVE from if_statement [63707,64094]
  ------------
  ===
  move-tree
  ---
  block [64051,64086]
      return_statement: return false; [64063,64076]
  to
  if_statement [63707,64094]
  at 1

  New cluster:
  ===
  delete-node
  ---
  block [63758,64094]
  ===
  ------------
  ===
  delete-node
  ---
  local_variable_declaration: JSType classType = slot == null ? null : slot.getType(); [63893,63949]
  ===
  ===
  delete-node
  ---
  if_statement [63958,64086]
  ===
  ===
  delete-node
  ---
  local_variable_declaration: Var slot = scope.getSlot(className); [63848,63884]
  ===
  ===
  delete-node
  ---
  block [63758,64094]
  ===
  ===
  delete-node
  ---
  local_variable_declaration: String className = qName.substring(0, qName.lastIndexOf(".prototype")); [63768,63839]
  ===

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  parenthesized_expression [63961,64050]
      and [63962,64049]
          not_equals [63962,63979]
              identifier: classType [63962,63971]
              null_literal [63975,63979]
          parenthesized_expression [63995,64049]
              or [63996,64048]
                  method_invocation: classType.isConstructor() [63996,64021]
                  method_invocation: classType.isInterface() [64025,64048]

...
