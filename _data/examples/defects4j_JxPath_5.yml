---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: NodePointer
        children: []
        pos: 1823
        length: 11
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: public static final int WHOLE_COLLECTION = Integer.MIN_VALUE;
          children: []
          pos: 1861
          length: 61
        - type: field_declaration
          fields:
            text: protected int index = WHOLE_COLLECTION;
          children: []
          pos: 1927
          length: 39
        - type: field_declaration
          fields:
            text: public static final String UNKNOWN_NAMESPACE = "<<unknown namespace>>";
          children: []
          pos: 1971
          length: 71
        - type: field_declaration
          fields:
            text: private boolean attribute = false;
          children: []
          pos: 2047
          length: 34
        - type: field_declaration
          fields:
            text: private transient Object rootNode;
          children: []
          pos: 2086
          length: 34
        - type: field_declaration
          fields:
            text: private NamespaceResolver namespaceResolver;
          children: []
          pos: 2125
          length: 44
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: newNodePointer
              children: []
              pos: 2375
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: QName name
                children: []
                pos: 2399
                length: 10
              pos: 2349
              length: 740
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer pointer = null;
                children: []
                pos: 2470
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: bean
                            children: []
                            pos: 2510
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2518
                            length: 4
                        children: []
                        pos: 2510
                        length: 12
                    children: []
                    pos: 2509
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pointer = new NullPointer(name, locale);
                    children: []
                    pos: 2538
                    length: 40
                  - type: return_statement
                    fields:
                      text: return pointer;
                    children: []
                    pos: 2591
                    length: 15
                  pos: 2524
                  length: 92
                pos: 2506
                length: 110
              - type: local_variable_declaration
                fields:
                  text: |-
                    NodePointerFactory[] factories =
                                JXPathContextReferenceImpl.getNodePointerFactories();
                children: []
                pos: 2634
                length: 98
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < factories.length; i++) {
                                pointer = factories[i].createNodePointer(name, bean, locale);
                                if (pointer != null) {
                                    return pointer;
                                }
                            }
                children: []
                pos: 2741
                length: 209
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException(
                                "Could not allocate a NodePointer for object of "
                                    + bean.getClass());
                children: []
                pos: 2959
                length: 124
              pos: 2460
              length: 629
          children: []
          pos: 2349
          length: 740
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: newChildNodePointer
              children: []
              pos: 3288
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer parent
                children: []
                pos: 3317
                length: 18
              pos: 3262
              length: 614
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: |-
                    NodePointerFactory[] factories =
                                JXPathContextReferenceImpl.getNodePointerFactories();
                children: []
                pos: 3393
                length: 98
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < factories.length; i++) {
                                NodePointer pointer =
                                    factories[i].createNodePointer(parent, name, bean);
                                if (pointer != null) {
                                    return pointer;
                                }
                            }
                children: []
                pos: 3500
                length: 237
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException(
                                "Could not allocate a NodePointer for object of "
                                    + bean.getClass());
                children: []
                pos: 3746
                length: 124
              pos: 3383
              length: 493
          children: []
          pos: 3262
          length: 614
        - type: field_declaration
          fields:
            text: protected NodePointer parent;
          children: []
          pos: 3882
          length: 29
        - type: field_declaration
          fields:
            text: protected Locale locale;
          children: []
          pos: 3916
          length: 24
        - type: constructor_declaration
          fields:
            text: |-
              protected NodePointer(NodePointer parent) {
                      this.parent = parent;
                  }
          children: []
          pos: 3995
          length: 79
        - type: constructor_declaration
          fields:
            text: |-
              protected NodePointer(NodePointer parent, Locale locale) {
                      this.parent = parent;
                      this.locale = locale;
                  }
          children: []
          pos: 4080
          length: 124
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceResolver
              children: []
              pos: 4235
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4210
              length: 221
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: namespaceResolver
                                children: []
                                pos: 4272
                                length: 17
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4293
                                length: 4
                            children: []
                            pos: 4272
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 4301
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4311
                                length: 4
                            children: []
                            pos: 4301
                            length: 14
                        children: []
                        pos: 4272
                        length: 43
                    children: []
                    pos: 4271
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: namespaceResolver = parent.getNamespaceResolver();
                    children: []
                    pos: 4331
                    length: 50
                  pos: 4317
                  length: 74
                pos: 4268
                length: 123
              - type: return_statement
                fields:
                  text: return namespaceResolver;
                children: []
                pos: 4400
                length: 25
              pos: 4258
              length: 173
          children: []
          pos: 4210
          length: 221
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setNamespaceResolver
              children: []
              pos: 4453
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NamespaceResolver namespaceResolver
                children: []
                pos: 4474
                length: 35
              pos: 4441
              length: 129
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.namespaceResolver = namespaceResolver;
                children: []
                pos: 4521
                length: 43
              pos: 4511
              length: 59
          children: []
          pos: 4441
          length: 129
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getParent
              children: []
              pos: 4599
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4580
              length: 228
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer pointer = parent;
                children: []
                pos: 4621
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (pointer != null && pointer.isContainer()) {
                                pointer = pointer.getImmediateParentPointer();
                            }
                children: []
                pos: 4659
                length: 119
              - type: return_statement
                fields:
                  text: return pointer;
                children: []
                pos: 4787
                length: 15
              pos: 4611
              length: 197
          children: []
          pos: 4580
          length: 228
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateParentPointer
              children: []
              pos: 4837
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4818
              length: 77
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parent;
                children: []
                pos: 4875
                length: 14
              pos: 4865
              length: 30
          children: []
          pos: 4818
          length: 77
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setAttribute
              children: []
              pos: 4998
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean attribute
                children: []
                pos: 5011
                length: 17
              pos: 4986
              length: 87
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.attribute = attribute;
                children: []
                pos: 5040
                length: 27
              pos: 5030
              length: 43
          children: []
          pos: 4986
          length: 87
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isAttribute
              children: []
              pos: 5180
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5165
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return attribute;
                children: []
                pos: 5204
                length: 17
              pos: 5194
              length: 33
          children: []
          pos: 5165
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isRoot
              children: []
              pos: 5315
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5300
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parent == null;
                children: []
                pos: 5334
                length: 22
              pos: 5324
              length: 38
          children: []
          pos: 5300
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLeaf
              children: []
              pos: 5457
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5433
              length: 33
          children: []
          pos: 5433
          length: 33
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isNode
              children: []
              pos: 5548
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5533
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !isContainer();
                children: []
                pos: 5567
                length: 22
              pos: 5557
              length: 38
          children: []
          pos: 5533
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContainer
              children: []
              pos: 5748
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5733
              length: 58
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 5772
                length: 13
              pos: 5762
              length: 29
          children: []
          pos: 5733
          length: 58
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getIndex
              children: []
              pos: 6136
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6125
              length: 51
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return index;
                children: []
                pos: 6157
                length: 13
              pos: 6147
              length: 29
          children: []
          pos: 6125
          length: 51
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setIndex
              children: []
              pos: 6194
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int index
                children: []
                pos: 6203
                length: 9
              pos: 6182
              length: 67
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.index = index;
                children: []
                pos: 6224
                length: 19
              pos: 6214
              length: 35
          children: []
          pos: 6182
          length: 67
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCollection
              children: []
              pos: 6392
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6368
              length: 39
          children: []
          pos: 6368
          length: 39
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLength
              children: []
              pos: 6621
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6601
              length: 32
          children: []
          pos: 6601
          length: 32
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValue
              children: []
              pos: 6847
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6833
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer valuePointer = getValuePointer();
                children: []
                pos: 6868
                length: 45
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: valuePointer
                            children: []
                            pos: 6926
                            length: 12
                          right:
                            type: this
                            fields: {}
                            children: []
                            pos: 6942
                            length: 4
                        children: []
                        pos: 6926
                        length: 20
                    children: []
                    pos: 6925
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return valuePointer.getValue();
                    children: []
                    pos: 6962
                    length: 31
                  pos: 6948
                  length: 55
                pos: 6922
                length: 81
              - type: return_statement
                fields:
                  text: return getNode();
                children: []
                pos: 7076
                length: 17
              pos: 6858
              length: 241
          children: []
          pos: 6833
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValuePointer
              children: []
              pos: 8086
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8067
              length: 157
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer ivp = getImmediateValuePointer();
                children: []
                pos: 8114
                length: 45
              - type: return_statement
                fields:
                  text: 'return ivp == this ? this : ivp.getValuePointer();'
                children: []
                pos: 8168
                length: 50
              pos: 8104
              length: 120
          children: []
          pos: 8067
          length: 157
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateValuePointer
              children: []
              pos: 8418
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8399
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 8455
                length: 12
              pos: 8445
              length: 28
          children: []
          pos: 8399
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActual
              children: []
              pos: 9169
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9154
              length: 112
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return index == WHOLE_COLLECTION || index >= 0 && index <
                    getLength();
                children: []
                pos: 9190
                length: 70
              pos: 9180
              length: 86
          children: []
          pos: 9154
          length: 112
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getName
              children: []
              pos: 9361
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9339
              length: 32
          children: []
          pos: 9339
          length: 32
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBaseValue
              children: []
              pos: 9597
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9574
              length: 38
          children: []
          pos: 9574
          length: 38
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNodeValue
              children: []
              pos: 9798
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9784
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNode();
                children: []
                pos: 9823
                length: 17
              pos: 9813
              length: 33
          children: []
          pos: 9784
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNode
              children: []
              pos: 10056
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10042
              length: 84
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getValuePointer().getImmediateNode();
                children: []
                pos: 10076
                length: 44
              pos: 10066
              length: 60
          children: []
          pos: 10042
          length: 84
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRootNode
              children: []
              pos: 10150
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10136
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: rootNode
                            children: []
                            pos: 10178
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10190
                            length: 4
                        children: []
                        pos: 10178
                        length: 16
                    children: []
                    pos: 10177
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: 'rootNode = parent == null ? getImmediateNode() : parent.getRootNode();'
                    children: []
                    pos: 10210
                    length: 70
                  pos: 10196
                  length: 94
                pos: 10174
                length: 116
              - type: return_statement
                fields:
                  text: return rootNode;
                children: []
                pos: 10299
                length: 16
              pos: 10164
              length: 157
          children: []
          pos: 10136
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateNode
              children: []
              pos: 10469
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10446
              length: 42
          children: []
          pos: 10446
          length: 42
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setValue
              children: []
              pos: 10637
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object value
                children: []
                pos: 10646
                length: 12
              pos: 10616
              length: 44
          children: []
          pos: 10616
          length: 44
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareChildNodePointers
              children: []
              pos: 10845
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer pointer1
                children: []
                pos: 10883
                length: 20
              pos: 10825
              length: 102
          children: []
          pos: 10825
          length: 102
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: testNode
              children: []
              pos: 11025
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 11034
                length: 13
              pos: 11010
              length: 1190
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: test
                            children: []
                            pos: 11063
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 11071
                            length: 4
                        children: []
                        pos: 11063
                        length: 12
                    children: []
                    pos: 11062
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 11091
                    length: 12
                  pos: 11077
                  length: 36
                pos: 11059
                length: 54
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof NodeNameTest
                        children: []
                        pos: 11126
                        length: 28
                    children: []
                    pos: 11125
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: isContainer()
                            children: []
                            pos: 11174
                            length: 13
                        children: []
                        pos: 11173
                        length: 15
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return false;
                        children: []
                        pos: 11207
                        length: 13
                      pos: 11189
                      length: 45
                    pos: 11170
                    length: 64
                  - type: local_variable_declaration
                    fields:
                      text: NodeNameTest nodeNameTest = (NodeNameTest) test;
                    children: []
                    pos: 11247
                    length: 48
                  - type: local_variable_declaration
                    fields:
                      text: QName testName = nodeNameTest.getNodeName();
                    children: []
                    pos: 11308
                    length: 44
                  - type: local_variable_declaration
                    fields:
                      text: QName nodeName = getName();
                    children: []
                    pos: 11365
                    length: 27
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: nodeName
                                children: []
                                pos: 11409
                                length: 8
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 11421
                                length: 4
                            children: []
                            pos: 11409
                            length: 16
                        children: []
                        pos: 11408
                        length: 18
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return false;
                        children: []
                        pos: 11445
                        length: 13
                      pos: 11427
                      length: 45
                    pos: 11405
                    length: 67
                  - type: local_variable_declaration
                    fields:
                      text: String testPrefix = testName.getPrefix();
                    children: []
                    pos: 11498
                    length: 41
                  - type: local_variable_declaration
                    fields:
                      text: String nodePrefix = nodeName.getPrefix();
                    children: []
                    pos: 11552
                    length: 41
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: unary_expression
                            fields:
                              text: "!equalStrings(testPrefix, nodePrefix)"
                            children: []
                            pos: 11610
                            length: 37
                        children: []
                        pos: 11609
                        length: 39
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String testNS = getNamespaceURI(testPrefix);
                        children: []
                        pos: 11667
                        length: 44
                      - type: local_variable_declaration
                        fields:
                          text: String nodeNS = getNamespaceURI(nodePrefix);
                        children: []
                        pos: 11728
                        length: 44
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: unary_expression
                                fields:
                                  text: "!equalStrings(testNS, nodeNS)"
                                children: []
                                pos: 11793
                                length: 29
                            children: []
                            pos: 11792
                            length: 31
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return false;
                            children: []
                            pos: 11846
                            length: 13
                          pos: 11824
                          length: 53
                        pos: 11789
                        length: 88
                      pos: 11649
                      length: 242
                    pos: 11606
                    length: 285
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: nodeNameTest.isWildcard()
                            children: []
                            pos: 11908
                            length: 25
                        children: []
                        pos: 11907
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 11953
                        length: 12
                      pos: 11935
                      length: 44
                    pos: 11904
                    length: 75
                  - type: return_statement
                    fields:
                      text: return testName.getName().equals(nodeName.getName());
                    children: []
                    pos: 11992
                    length: 53
                  pos: 11156
                  length: 899
                pos: 11122
                length: 933
              - type: return_statement
                fields:
                  text: |-
                    return test instanceof NodeTypeTest
                                    && ((NodeTypeTest) test).getNodeType() == Compiler.NODE_TYPE_NODE && isNode();
                children: []
                pos: 12064
                length: 130
              pos: 11049
              length: 1151
          children: []
          pos: 11010
          length: 1190
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equalStrings
              children: []
              pos: 12229
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String s1
                children: []
                pos: 12242
                length: 9
              pos: 12206
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return s1 == s2 || s1 != null && s1.equals(s2);
                children: []
                pos: 12274
                length: 47
              pos: 12264
              length: 63
          children: []
          pos: 12206
          length: 121
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 12450
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 12461
                length: 21
              pos: 12431
              length: 120
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: setValue(value);
                children: []
                pos: 12508
                length: 16
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 12533
                length: 12
              pos: 12498
              length: 53
          children: []
          pos: 12431
          length: 120
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: remove
              children: []
              pos: 12652
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 12640
              length: 159
            body:
              type: block
              fields: {}
              children: []
              pos: 12661
              length: 138
          children: []
          pos: 12640
          length: 159
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 13041
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13052
                length: 21
              pos: 13022
              length: 81
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 13085
                length: 12
              pos: 13075
              length: 28
          children: []
          pos: 13022
          length: 81
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 13388
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13409
                length: 21
              pos: 13369
              length: 343
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException("Cannot create an object for path "
                                    + asPath() + "/" + name + "[" + (index + 1) + "]"
                                    + ", operation is not allowed for this type of node");
                children: []
                pos: 13508
                length: 198
              pos: 13498
              length: 214
          children: []
          pos: 13369
          length: 343
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 14017
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 14029
                length: 21
              pos: 13998
              length: 295
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException("Cannot create an object for path "
                                    + asPath() + "/" + name + "[" + (index + 1) + "]"
                                    + ", operation is not allowed for this type of node");
                children: []
                pos: 14089
                length: 198
              pos: 14079
              length: 214
          children: []
          pos: 13998
          length: 295
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createAttribute
              children: []
              pos: 14387
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 14403
                length: 21
              pos: 14368
              length: 262
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException("Cannot create an attribute for path "
                                    + asPath() + "/@" + name
                                    + ", operation is not allowed for this type of node");
                children: []
                pos: 14448
                length: 176
              pos: 14438
              length: 192
          children: []
          pos: 14368
          length: 262
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocale
              children: []
              pos: 14808
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14794
              length: 189
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: locale
                            children: []
                            pos: 14834
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14844
                            length: 4
                        children: []
                        pos: 14834
                        length: 14
                    children: []
                    pos: 14833
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 14868
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 14878
                                length: 4
                            children: []
                            pos: 14868
                            length: 14
                        children: []
                        pos: 14867
                        length: 16
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: locale = parent.getLocale();
                        children: []
                        pos: 14902
                        length: 28
                      pos: 14884
                      length: 60
                    pos: 14864
                    length: 80
                  pos: 14850
                  length: 104
                pos: 14830
                length: 124
              - type: return_statement
                fields:
                  text: return locale;
                children: []
                pos: 14963
                length: 14
              pos: 14820
              length: 163
          children: []
          pos: 14794
          length: 189
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLanguage
              children: []
              pos: 15139
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String lang
                children: []
                pos: 15150
                length: 11
              pos: 15124
              length: 202
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Locale loc = getLocale();
                children: []
                pos: 15173
                length: 25
              - type: local_variable_declaration
                fields:
                  text: String name = loc.toString().replace('_', '-');
                children: []
                pos: 15207
                length: 47
              - type: return_statement
                fields:
                  text: return name.toUpperCase().startsWith(lang.toUpperCase());
                children: []
                pos: 15263
                length: 57
              pos: 15163
              length: 163
          children: []
          pos: 15124
          length: 202
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: childIterator
              children: []
              pos: 16225
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 16248
                length: 13
              pos: 16205
              length: 319
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer valuePointer = getValuePointer();
                children: []
                pos: 16334
                length: 45
              - type: return_statement
                fields:
                  text: |-
                    return valuePointer == null || valuePointer == this ? null
                                    : valuePointer.childIterator(test, reverse, startWith);
                children: []
                pos: 16388
                length: 130
              pos: 16324
              length: 200
          children: []
          pos: 16205
          length: 319
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: attributeIterator
              children: []
              pos: 16784
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: QName qname
                children: []
                pos: 16802
                length: 11
              pos: 16764
              length: 236
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer valuePointer = getValuePointer();
                children: []
                pos: 16825
                length: 45
              - type: return_statement
                fields:
                  text: |-
                    return valuePointer == null || valuePointer == this ? null
                                    : valuePointer.attributeIterator(qname);
                children: []
                pos: 16879
                length: 115
              pos: 16815
              length: 185
          children: []
          pos: 16764
          length: 236
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespaceIterator
              children: []
              pos: 17218
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17198
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17248
                length: 12
              pos: 17238
              length: 28
          children: []
          pos: 17198
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespacePointer
              children: []
              pos: 17490
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String namespace
                children: []
                pos: 17507
                length: 16
              pos: 17471
              length: 82
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17535
                length: 12
              pos: 17525
              length: 28
          children: []
          pos: 17471
          length: 82
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 17649
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 17665
                length: 13
              pos: 17635
              length: 73
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17690
                length: 12
              pos: 17680
              length: 28
          children: []
          pos: 17635
          length: 73
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 17807
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17793
              length: 60
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17835
                length: 12
              pos: 17825
              length: 28
          children: []
          pos: 17793
          length: 60
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isDefaultNamespace
              children: []
              pos: 18012
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 18031
                length: 13
              pos: 17994
              length: 257
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: prefix
                            children: []
                            pos: 18060
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18070
                            length: 4
                        children: []
                        pos: 18060
                        length: 14
                    children: []
                    pos: 18059
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 18090
                    length: 12
                  pos: 18076
                  length: 36
                pos: 18056
                length: 56
              - type: local_variable_declaration
                fields:
                  text: String namespace = getNamespaceURI(prefix);
                children: []
                pos: 18122
                length: 43
              - type: return_statement
                fields:
                  text: return namespace != null && namespace.equals(getDefaultNamespaceURI());
                children: []
                pos: 18174
                length: 71
              pos: 18046
              length: 205
          children: []
          pos: 17994
          length: 257
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getDefaultNamespaceURI
              children: []
              pos: 18274
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18257
              length: 70
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 18309
                length: 12
              pos: 18299
              length: 28
          children: []
          pos: 18257
          length: 70
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPointerByID
              children: []
              pos: 18393
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 18408
                length: 21
              pos: 18378
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return context.getPointerByID(id);
                children: []
                pos: 18452
                length: 34
              pos: 18442
              length: 50
          children: []
          pos: 18378
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPointerByKey
              children: []
              pos: 18569
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 18594
                length: 21
              pos: 18554
              length: 169
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return context.getPointerByKey(key, value);
                children: []
                pos: 18674
                length: 43
              pos: 18664
              length: 59
          children: []
          pos: 18554
          length: 169
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asPath
              children: []
              pos: 18810
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18796
              length: 794
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 18959
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 18969
                                length: 4
                            children: []
                            pos: 18959
                            length: 14
                          right:
                            type: method_invocation
                            fields:
                              text: parent.isContainer()
                            children: []
                            pos: 18977
                            length: 20
                        children: []
                        pos: 18959
                        length: 38
                    children: []
                    pos: 18958
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return parent.asPath();
                    children: []
                    pos: 19013
                    length: 23
                  pos: 18999
                  length: 47
                pos: 18955
                length: 91
              - type: local_variable_declaration
                fields:
                  text: StringBuffer buffer = new StringBuffer();
                children: []
                pos: 19056
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 19110
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 19120
                            length: 4
                        children: []
                        pos: 19110
                        length: 14
                    children: []
                    pos: 19109
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append(parent.asPath());
                    children: []
                    pos: 19140
                    length: 31
                  pos: 19126
                  length: 55
                pos: 19106
                length: 75
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: buffer.length()
                                children: []
                                pos: 19195
                                length: 15
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 19214
                                length: 1
                            children: []
                            pos: 19195
                            length: 20
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: buffer.charAt(buffer.length() - 1)
                                children: []
                                pos: 19231
                                length: 34
                              right:
                                type: character_literal
                                fields:
                                  text: "'/'"
                                children: []
                                pos: 19269
                                length: 3
                            children: []
                            pos: 19231
                            length: 41
                        children: []
                        pos: 19195
                        length: 77
                    children: []
                    pos: 19194
                    length: 79
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append('/');
                    children: []
                    pos: 19288
                    length: 19
                  pos: 19274
                  length: 43
                pos: 19191
                length: 126
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: attribute
                        children: []
                        pos: 19330
                        length: 9
                    children: []
                    pos: 19329
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append('@');
                    children: []
                    pos: 19355
                    length: 19
                  pos: 19341
                  length: 43
                pos: 19326
                length: 58
              - type: expression_statement
                fields:
                  text: buffer.append(getName());
                children: []
                pos: 19393
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: index
                                children: []
                                pos: 19432
                                length: 5
                              right:
                                type: identifier
                                fields:
                                  text: WHOLE_COLLECTION
                                children: []
                                pos: 19441
                                length: 16
                            children: []
                            pos: 19432
                            length: 25
                          right:
                            type: method_invocation
                            fields:
                              text: isCollection()
                            children: []
                            pos: 19461
                            length: 14
                        children: []
                        pos: 19432
                        length: 43
                    children: []
                    pos: 19431
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append('[').append(index + 1).append(']');
                    children: []
                    pos: 19491
                    length: 49
                  pos: 19477
                  length: 73
                pos: 19428
                length: 122
              - type: return_statement
                fields:
                  text: return buffer.toString();
                children: []
                pos: 19559
                length: 25
              pos: 18819
              length: 771
          children: []
          pos: 18796
          length: 794
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: clone
              children: []
              pos: 19610
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 19596
              length: 397
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: NodePointer ptr = (NodePointer) super.clone();
                      children: []
                      pos: 19646
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: parent
                                  children: []
                                  pos: 19709
                                  length: 6
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 19719
                                  length: 4
                              children: []
                              pos: 19709
                              length: 14
                          children: []
                          pos: 19708
                          length: 16
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: ptr.parent = (NodePointer) parent.clone();
                          children: []
                          pos: 19743
                          length: 42
                        pos: 19725
                        length: 74
                      pos: 19705
                      length: 94
                    - type: return_statement
                      fields:
                        text: return ptr;
                      children: []
                      pos: 19812
                      length: 11
                    pos: 19632
                    length: 201
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (CloneNotSupportedException ex) {
                                      // Of course it is supported
                                      ex.printStackTrace();
                                  }
                      children: []
                      pos: 19842
                      length: 124
                    pos: 19628
                    length: 338
                children: []
                pos: 19628
                length: 338
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 19975
                length: 12
              pos: 19618
              length: 375
          children: []
          pos: 19596
          length: 397
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 20013
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 19999
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return asPath();
                children: []
                pos: 20034
                length: 16
              pos: 20024
              length: 32
          children: []
          pos: 19999
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareTo
              children: []
              pos: 20073
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object object
                children: []
                pos: 20083
                length: 13
              pos: 20062
              length: 679
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer pointer = (NodePointer) object;
                children: []
                pos: 20153
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 20209
                            length: 6
                          right:
                            type: field_access
                            fields:
                              text: pointer.parent
                            children: []
                            pos: 20219
                            length: 14
                        children: []
                        pos: 20209
                        length: 24
                    children: []
                    pos: 20208
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: 'return parent == null ? 0 : parent.compareChildNodePointers(this,
                        pointer);'
                    children: []
                    pos: 20249
                    length: 75
                  pos: 20235
                  length: 99
                pos: 20205
                length: 129
              - type: local_variable_declaration
                fields:
                  text: int depth1 = 0;
                children: []
                pos: 20386
                length: 15
              - type: local_variable_declaration
                fields:
                  text: NodePointer p1 = this;
                children: []
                pos: 20410
                length: 22
              - type: while_statement
                fields:
                  text: |-
                    while (p1 != null) {
                                depth1++;
                                p1 = p1.parent;
                            }
                children: []
                pos: 20441
                length: 80
              - type: local_variable_declaration
                fields:
                  text: int depth2 = 0;
                children: []
                pos: 20530
                length: 15
              - type: local_variable_declaration
                fields:
                  text: NodePointer p2 = pointer;
                children: []
                pos: 20554
                length: 25
              - type: while_statement
                fields:
                  text: |-
                    while (p2 != null) {
                                depth2++;
                                p2 = p2.parent;
                            }
                children: []
                pos: 20588
                length: 80
              - type: return_statement
                fields:
                  text: return compareNodePointers(this, depth1, pointer, depth2);
                children: []
                pos: 20677
                length: 58
              pos: 20098
              length: 643
          children: []
          pos: 20062
          length: 679
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareNodePointers
              children: []
              pos: 20759
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer p1
                children: []
                pos: 20788
                length: 14
              pos: 20747
              length: 843
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: depth1
                            children: []
                            pos: 20887
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: depth2
                            children: []
                            pos: 20896
                            length: 6
                        children: []
                        pos: 20887
                        length: 15
                    children: []
                    pos: 20886
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int r = compareNodePointers(p1, depth1, p2.parent, depth2
                        - 1);
                    children: []
                    pos: 20918
                    length: 63
                  - type: return_statement
                    fields:
                      text: 'return r == 0 ? -1 : r;'
                    children: []
                    pos: 20994
                    length: 23
                  pos: 20904
                  length: 123
                pos: 20883
                length: 144
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: depth1
                            children: []
                            pos: 21040
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: depth2
                            children: []
                            pos: 21049
                            length: 6
                        children: []
                        pos: 21040
                        length: 15
                    children: []
                    pos: 21039
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int r = compareNodePointers(p1.parent, depth1 - 1, p2,
                        depth2);
                    children: []
                    pos: 21071
                    length: 63
                  - type: return_statement
                    fields:
                      text: 'return r == 0 ? 1 : r;'
                    children: []
                    pos: 21147
                    length: 22
                  pos: 21057
                  length: 122
                pos: 21036
                length: 143
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: p1
                                children: []
                                pos: 21192
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21198
                                length: 4
                            children: []
                            pos: 21192
                            length: 10
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: p2
                                children: []
                                pos: 21206
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21212
                                length: 4
                            children: []
                            pos: 21206
                            length: 10
                        children: []
                        pos: 21192
                        length: 24
                    children: []
                    pos: 21191
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 21232
                    length: 9
                  pos: 21218
                  length: 33
                pos: 21188
                length: 63
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: p1
                                children: []
                                pos: 21265
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21271
                                length: 4
                            children: []
                            pos: 21265
                            length: 10
                          right:
                            type: method_invocation
                            fields:
                              text: p1.equals(p2)
                            children: []
                            pos: 21279
                            length: 13
                        children: []
                        pos: 21265
                        length: 27
                    children: []
                    pos: 21264
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 21308
                    length: 9
                  pos: 21294
                  length: 33
                pos: 21261
                length: 66
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: depth1
                            children: []
                            pos: 21341
                            length: 6
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '1'
                            children: []
                            pos: 21351
                            length: 1
                        children: []
                        pos: 21341
                        length: 11
                    children: []
                    pos: 21340
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 21368
                    length: 9
                  pos: 21354
                  length: 33
                pos: 21337
                length: 50
              - type: local_variable_declaration
                fields:
                  text: int r = compareNodePointers(p1.parent, depth1 - 1, p2.parent,
                    depth2 - 1);
                children: []
                pos: 21396
                length: 74
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: r
                            children: []
                            pos: 21483
                            length: 1
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 21488
                            length: 1
                        children: []
                        pos: 21483
                        length: 6
                    children: []
                    pos: 21482
                    length: 8
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return r;
                    children: []
                    pos: 21505
                    length: 9
                  pos: 21491
                  length: 33
                pos: 21479
                length: 45
              - type: return_statement
                fields:
                  text: return p1.parent.compareChildNodePointers(p1, p2);
                children: []
                pos: 21534
                length: 50
              pos: 20873
              length: 717
          children: []
          pos: 20747
          length: 843
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: printPointerChain
              children: []
              pos: 21683
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 21671
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: printDeep(this, "");
                children: []
                pos: 21713
                length: 20
              pos: 21703
              length: 36
          children: []
          pos: 21671
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: printDeep
              children: []
              pos: 21765
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer pointer
                children: []
                pos: 21775
                length: 19
              pos: 21745
              length: 702
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: indent.length()
                            children: []
                            pos: 21825
                            length: 15
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 21844
                            length: 1
                        children: []
                        pos: 21825
                        length: 20
                    children: []
                    pos: 21824
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        System.err.println(
                                        "POINTER: "
                                            + pointer
                                            + "("
                                            + pointer.getClass().getName()
                                            + ")");
                    children: []
                    pos: 21861
                    length: 182
                  pos: 21847
                  length: 206
                pos: 21821
                length: 476
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: pointer.getImmediateParentPointer()
                            children: []
                            pos: 22310
                            length: 35
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 22349
                            length: 4
                        children: []
                        pos: 22310
                        length: 43
                    children: []
                    pos: 22309
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: printDeep(pointer.getImmediateParentPointer(), indent
                        + "  ");
                    children: []
                    pos: 22369
                    length: 62
                  pos: 22355
                  length: 86
                pos: 22306
                length: 135
              pos: 21811
              length: 636
          children: []
          pos: 21745
          length: 702
        pos: 1801
        length: 20648
    children: []
    pos: 1801
    length: 20648
  pos: 0
  length: 22449
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: NodePointer
        children: []
        pos: 1823
        length: 11
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: public static final int WHOLE_COLLECTION = Integer.MIN_VALUE;
          children: []
          pos: 1861
          length: 61
        - type: field_declaration
          fields:
            text: protected int index = WHOLE_COLLECTION;
          children: []
          pos: 1927
          length: 39
        - type: field_declaration
          fields:
            text: public static final String UNKNOWN_NAMESPACE = "<<unknown namespace>>";
          children: []
          pos: 1971
          length: 71
        - type: field_declaration
          fields:
            text: private boolean attribute = false;
          children: []
          pos: 2047
          length: 34
        - type: field_declaration
          fields:
            text: private transient Object rootNode;
          children: []
          pos: 2086
          length: 34
        - type: field_declaration
          fields:
            text: private NamespaceResolver namespaceResolver;
          children: []
          pos: 2125
          length: 44
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: newNodePointer
              children: []
              pos: 2375
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: QName name
                children: []
                pos: 2399
                length: 10
              pos: 2349
              length: 740
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer pointer = null;
                children: []
                pos: 2470
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: bean
                            children: []
                            pos: 2510
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2518
                            length: 4
                        children: []
                        pos: 2510
                        length: 12
                    children: []
                    pos: 2509
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: pointer = new NullPointer(name, locale);
                    children: []
                    pos: 2538
                    length: 40
                  - type: return_statement
                    fields:
                      text: return pointer;
                    children: []
                    pos: 2591
                    length: 15
                  pos: 2524
                  length: 92
                pos: 2506
                length: 110
              - type: local_variable_declaration
                fields:
                  text: |-
                    NodePointerFactory[] factories =
                                JXPathContextReferenceImpl.getNodePointerFactories();
                children: []
                pos: 2634
                length: 98
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < factories.length; i++) {
                                pointer = factories[i].createNodePointer(name, bean, locale);
                                if (pointer != null) {
                                    return pointer;
                                }
                            }
                children: []
                pos: 2741
                length: 209
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException(
                                "Could not allocate a NodePointer for object of "
                                    + bean.getClass());
                children: []
                pos: 2959
                length: 124
              pos: 2460
              length: 629
          children: []
          pos: 2349
          length: 740
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: newChildNodePointer
              children: []
              pos: 3288
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer parent
                children: []
                pos: 3317
                length: 18
              pos: 3262
              length: 614
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: |-
                    NodePointerFactory[] factories =
                                JXPathContextReferenceImpl.getNodePointerFactories();
                children: []
                pos: 3393
                length: 98
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < factories.length; i++) {
                                NodePointer pointer =
                                    factories[i].createNodePointer(parent, name, bean);
                                if (pointer != null) {
                                    return pointer;
                                }
                            }
                children: []
                pos: 3500
                length: 237
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException(
                                "Could not allocate a NodePointer for object of "
                                    + bean.getClass());
                children: []
                pos: 3746
                length: 124
              pos: 3383
              length: 493
          children: []
          pos: 3262
          length: 614
        - type: field_declaration
          fields:
            text: protected NodePointer parent;
          children: []
          pos: 3882
          length: 29
        - type: field_declaration
          fields:
            text: protected Locale locale;
          children: []
          pos: 3916
          length: 24
        - type: constructor_declaration
          fields:
            text: |-
              protected NodePointer(NodePointer parent) {
                      this.parent = parent;
                  }
          children: []
          pos: 3995
          length: 79
        - type: constructor_declaration
          fields:
            text: |-
              protected NodePointer(NodePointer parent, Locale locale) {
                      this.parent = parent;
                      this.locale = locale;
                  }
          children: []
          pos: 4080
          length: 124
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceResolver
              children: []
              pos: 4235
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4210
              length: 221
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: namespaceResolver
                                children: []
                                pos: 4272
                                length: 17
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4293
                                length: 4
                            children: []
                            pos: 4272
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 4301
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4311
                                length: 4
                            children: []
                            pos: 4301
                            length: 14
                        children: []
                        pos: 4272
                        length: 43
                    children: []
                    pos: 4271
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: namespaceResolver = parent.getNamespaceResolver();
                    children: []
                    pos: 4331
                    length: 50
                  pos: 4317
                  length: 74
                pos: 4268
                length: 123
              - type: return_statement
                fields:
                  text: return namespaceResolver;
                children: []
                pos: 4400
                length: 25
              pos: 4258
              length: 173
          children: []
          pos: 4210
          length: 221
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setNamespaceResolver
              children: []
              pos: 4453
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NamespaceResolver namespaceResolver
                children: []
                pos: 4474
                length: 35
              pos: 4441
              length: 129
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.namespaceResolver = namespaceResolver;
                children: []
                pos: 4521
                length: 43
              pos: 4511
              length: 59
          children: []
          pos: 4441
          length: 129
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getParent
              children: []
              pos: 4599
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4580
              length: 228
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer pointer = parent;
                children: []
                pos: 4621
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (pointer != null && pointer.isContainer()) {
                                pointer = pointer.getImmediateParentPointer();
                            }
                children: []
                pos: 4659
                length: 119
              - type: return_statement
                fields:
                  text: return pointer;
                children: []
                pos: 4787
                length: 15
              pos: 4611
              length: 197
          children: []
          pos: 4580
          length: 228
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateParentPointer
              children: []
              pos: 4837
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4818
              length: 77
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parent;
                children: []
                pos: 4875
                length: 14
              pos: 4865
              length: 30
          children: []
          pos: 4818
          length: 77
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setAttribute
              children: []
              pos: 4998
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: boolean attribute
                children: []
                pos: 5011
                length: 17
              pos: 4986
              length: 87
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.attribute = attribute;
                children: []
                pos: 5040
                length: 27
              pos: 5030
              length: 43
          children: []
          pos: 4986
          length: 87
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isAttribute
              children: []
              pos: 5180
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5165
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return attribute;
                children: []
                pos: 5204
                length: 17
              pos: 5194
              length: 33
          children: []
          pos: 5165
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isRoot
              children: []
              pos: 5315
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5300
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parent == null;
                children: []
                pos: 5334
                length: 22
              pos: 5324
              length: 38
          children: []
          pos: 5300
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLeaf
              children: []
              pos: 5457
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5433
              length: 33
          children: []
          pos: 5433
          length: 33
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isNode
              children: []
              pos: 5548
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5533
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !isContainer();
                children: []
                pos: 5567
                length: 22
              pos: 5557
              length: 38
          children: []
          pos: 5533
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContainer
              children: []
              pos: 5748
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5733
              length: 58
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 5772
                length: 13
              pos: 5762
              length: 29
          children: []
          pos: 5733
          length: 58
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getIndex
              children: []
              pos: 6136
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6125
              length: 51
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return index;
                children: []
                pos: 6157
                length: 13
              pos: 6147
              length: 29
          children: []
          pos: 6125
          length: 51
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setIndex
              children: []
              pos: 6194
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int index
                children: []
                pos: 6203
                length: 9
              pos: 6182
              length: 67
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.index = index;
                children: []
                pos: 6224
                length: 19
              pos: 6214
              length: 35
          children: []
          pos: 6182
          length: 67
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCollection
              children: []
              pos: 6392
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6368
              length: 39
          children: []
          pos: 6368
          length: 39
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLength
              children: []
              pos: 6621
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6601
              length: 32
          children: []
          pos: 6601
          length: 32
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValue
              children: []
              pos: 6847
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6833
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer valuePointer = getValuePointer();
                children: []
                pos: 6868
                length: 45
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: valuePointer
                            children: []
                            pos: 6926
                            length: 12
                          right:
                            type: this
                            fields: {}
                            children: []
                            pos: 6942
                            length: 4
                        children: []
                        pos: 6926
                        length: 20
                    children: []
                    pos: 6925
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return valuePointer.getValue();
                    children: []
                    pos: 6962
                    length: 31
                  pos: 6948
                  length: 55
                pos: 6922
                length: 81
              - type: return_statement
                fields:
                  text: return getNode();
                children: []
                pos: 7076
                length: 17
              pos: 6858
              length: 241
          children: []
          pos: 6833
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValuePointer
              children: []
              pos: 8086
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8067
              length: 157
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer ivp = getImmediateValuePointer();
                children: []
                pos: 8114
                length: 45
              - type: return_statement
                fields:
                  text: 'return ivp == this ? this : ivp.getValuePointer();'
                children: []
                pos: 8168
                length: 50
              pos: 8104
              length: 120
          children: []
          pos: 8067
          length: 157
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateValuePointer
              children: []
              pos: 8418
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8399
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 8455
                length: 12
              pos: 8445
              length: 28
          children: []
          pos: 8399
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActual
              children: []
              pos: 9169
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9154
              length: 112
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return index == WHOLE_COLLECTION || index >= 0 && index <
                    getLength();
                children: []
                pos: 9190
                length: 70
              pos: 9180
              length: 86
          children: []
          pos: 9154
          length: 112
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getName
              children: []
              pos: 9361
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9339
              length: 32
          children: []
          pos: 9339
          length: 32
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBaseValue
              children: []
              pos: 9597
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9574
              length: 38
          children: []
          pos: 9574
          length: 38
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNodeValue
              children: []
              pos: 9798
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9784
              length: 62
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNode();
                children: []
                pos: 9823
                length: 17
              pos: 9813
              length: 33
          children: []
          pos: 9784
          length: 62
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNode
              children: []
              pos: 10056
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10042
              length: 84
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getValuePointer().getImmediateNode();
                children: []
                pos: 10076
                length: 44
              pos: 10066
              length: 60
          children: []
          pos: 10042
          length: 84
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRootNode
              children: []
              pos: 10150
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10136
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: rootNode
                            children: []
                            pos: 10178
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10190
                            length: 4
                        children: []
                        pos: 10178
                        length: 16
                    children: []
                    pos: 10177
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: 'rootNode = parent == null ? getImmediateNode() : parent.getRootNode();'
                    children: []
                    pos: 10210
                    length: 70
                  pos: 10196
                  length: 94
                pos: 10174
                length: 116
              - type: return_statement
                fields:
                  text: return rootNode;
                children: []
                pos: 10299
                length: 16
              pos: 10164
              length: 157
          children: []
          pos: 10136
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateNode
              children: []
              pos: 10469
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10446
              length: 42
          children: []
          pos: 10446
          length: 42
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setValue
              children: []
              pos: 10637
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object value
                children: []
                pos: 10646
                length: 12
              pos: 10616
              length: 44
          children: []
          pos: 10616
          length: 44
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareChildNodePointers
              children: []
              pos: 10845
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer pointer1
                children: []
                pos: 10883
                length: 20
              pos: 10825
              length: 102
          children: []
          pos: 10825
          length: 102
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: testNode
              children: []
              pos: 11025
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 11034
                length: 13
              pos: 11010
              length: 1190
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: test
                            children: []
                            pos: 11063
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 11071
                            length: 4
                        children: []
                        pos: 11063
                        length: 12
                    children: []
                    pos: 11062
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 11091
                    length: 12
                  pos: 11077
                  length: 36
                pos: 11059
                length: 54
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof NodeNameTest
                        children: []
                        pos: 11126
                        length: 28
                    children: []
                    pos: 11125
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: isContainer()
                            children: []
                            pos: 11174
                            length: 13
                        children: []
                        pos: 11173
                        length: 15
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return false;
                        children: []
                        pos: 11207
                        length: 13
                      pos: 11189
                      length: 45
                    pos: 11170
                    length: 64
                  - type: local_variable_declaration
                    fields:
                      text: NodeNameTest nodeNameTest = (NodeNameTest) test;
                    children: []
                    pos: 11247
                    length: 48
                  - type: local_variable_declaration
                    fields:
                      text: QName testName = nodeNameTest.getNodeName();
                    children: []
                    pos: 11308
                    length: 44
                  - type: local_variable_declaration
                    fields:
                      text: QName nodeName = getName();
                    children: []
                    pos: 11365
                    length: 27
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: nodeName
                                children: []
                                pos: 11409
                                length: 8
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 11421
                                length: 4
                            children: []
                            pos: 11409
                            length: 16
                        children: []
                        pos: 11408
                        length: 18
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return false;
                        children: []
                        pos: 11445
                        length: 13
                      pos: 11427
                      length: 45
                    pos: 11405
                    length: 67
                  - type: local_variable_declaration
                    fields:
                      text: String testPrefix = testName.getPrefix();
                    children: []
                    pos: 11498
                    length: 41
                  - type: local_variable_declaration
                    fields:
                      text: String nodePrefix = nodeName.getPrefix();
                    children: []
                    pos: 11552
                    length: 41
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: unary_expression
                            fields:
                              text: "!equalStrings(testPrefix, nodePrefix)"
                            children: []
                            pos: 11610
                            length: 37
                        children: []
                        pos: 11609
                        length: 39
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String testNS = getNamespaceURI(testPrefix);
                        children: []
                        pos: 11667
                        length: 44
                      - type: local_variable_declaration
                        fields:
                          text: String nodeNS = getNamespaceURI(nodePrefix);
                        children: []
                        pos: 11728
                        length: 44
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: unary_expression
                                fields:
                                  text: "!equalStrings(testNS, nodeNS)"
                                children: []
                                pos: 11793
                                length: 29
                            children: []
                            pos: 11792
                            length: 31
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return false;
                            children: []
                            pos: 11846
                            length: 13
                          pos: 11824
                          length: 53
                        pos: 11789
                        length: 88
                      pos: 11649
                      length: 242
                    pos: 11606
                    length: 285
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: nodeNameTest.isWildcard()
                            children: []
                            pos: 11908
                            length: 25
                        children: []
                        pos: 11907
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 11953
                        length: 12
                      pos: 11935
                      length: 44
                    pos: 11904
                    length: 75
                  - type: return_statement
                    fields:
                      text: return testName.getName().equals(nodeName.getName());
                    children: []
                    pos: 11992
                    length: 53
                  pos: 11156
                  length: 899
                pos: 11122
                length: 933
              - type: return_statement
                fields:
                  text: |-
                    return test instanceof NodeTypeTest
                                    && ((NodeTypeTest) test).getNodeType() == Compiler.NODE_TYPE_NODE && isNode();
                children: []
                pos: 12064
                length: 130
              pos: 11049
              length: 1151
          children: []
          pos: 11010
          length: 1190
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equalStrings
              children: []
              pos: 12229
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String s1
                children: []
                pos: 12242
                length: 9
              pos: 12206
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return s1 == s2 || s1 != null && s1.equals(s2);
                children: []
                pos: 12274
                length: 47
              pos: 12264
              length: 63
          children: []
          pos: 12206
          length: 121
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 12450
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 12461
                length: 21
              pos: 12431
              length: 120
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: setValue(value);
                children: []
                pos: 12508
                length: 16
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 12533
                length: 12
              pos: 12498
              length: 53
          children: []
          pos: 12431
          length: 120
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: remove
              children: []
              pos: 12652
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 12640
              length: 159
            body:
              type: block
              fields: {}
              children: []
              pos: 12661
              length: 138
          children: []
          pos: 12640
          length: 159
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 13041
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13052
                length: 21
              pos: 13022
              length: 81
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 13085
                length: 12
              pos: 13075
              length: 28
          children: []
          pos: 13022
          length: 81
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 13388
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13409
                length: 21
              pos: 13369
              length: 343
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException("Cannot create an object for path "
                                    + asPath() + "/" + name + "[" + (index + 1) + "]"
                                    + ", operation is not allowed for this type of node");
                children: []
                pos: 13508
                length: 198
              pos: 13498
              length: 214
          children: []
          pos: 13369
          length: 343
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 14017
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 14029
                length: 21
              pos: 13998
              length: 295
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException("Cannot create an object for path "
                                    + asPath() + "/" + name + "[" + (index + 1) + "]"
                                    + ", operation is not allowed for this type of node");
                children: []
                pos: 14089
                length: 198
              pos: 14079
              length: 214
          children: []
          pos: 13998
          length: 295
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createAttribute
              children: []
              pos: 14387
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 14403
                length: 21
              pos: 14368
              length: 262
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathException("Cannot create an attribute for path "
                                    + asPath() + "/@" + name
                                    + ", operation is not allowed for this type of node");
                children: []
                pos: 14448
                length: 176
              pos: 14438
              length: 192
          children: []
          pos: 14368
          length: 262
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocale
              children: []
              pos: 14808
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14794
              length: 189
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: locale
                            children: []
                            pos: 14834
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14844
                            length: 4
                        children: []
                        pos: 14834
                        length: 14
                    children: []
                    pos: 14833
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 14868
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 14878
                                length: 4
                            children: []
                            pos: 14868
                            length: 14
                        children: []
                        pos: 14867
                        length: 16
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: locale = parent.getLocale();
                        children: []
                        pos: 14902
                        length: 28
                      pos: 14884
                      length: 60
                    pos: 14864
                    length: 80
                  pos: 14850
                  length: 104
                pos: 14830
                length: 124
              - type: return_statement
                fields:
                  text: return locale;
                children: []
                pos: 14963
                length: 14
              pos: 14820
              length: 163
          children: []
          pos: 14794
          length: 189
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLanguage
              children: []
              pos: 15139
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String lang
                children: []
                pos: 15150
                length: 11
              pos: 15124
              length: 202
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Locale loc = getLocale();
                children: []
                pos: 15173
                length: 25
              - type: local_variable_declaration
                fields:
                  text: String name = loc.toString().replace('_', '-');
                children: []
                pos: 15207
                length: 47
              - type: return_statement
                fields:
                  text: return name.toUpperCase().startsWith(lang.toUpperCase());
                children: []
                pos: 15263
                length: 57
              pos: 15163
              length: 163
          children: []
          pos: 15124
          length: 202
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: childIterator
              children: []
              pos: 16225
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 16248
                length: 13
              pos: 16205
              length: 319
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer valuePointer = getValuePointer();
                children: []
                pos: 16334
                length: 45
              - type: return_statement
                fields:
                  text: |-
                    return valuePointer == null || valuePointer == this ? null
                                    : valuePointer.childIterator(test, reverse, startWith);
                children: []
                pos: 16388
                length: 130
              pos: 16324
              length: 200
          children: []
          pos: 16205
          length: 319
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: attributeIterator
              children: []
              pos: 16784
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: QName qname
                children: []
                pos: 16802
                length: 11
              pos: 16764
              length: 236
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer valuePointer = getValuePointer();
                children: []
                pos: 16825
                length: 45
              - type: return_statement
                fields:
                  text: |-
                    return valuePointer == null || valuePointer == this ? null
                                    : valuePointer.attributeIterator(qname);
                children: []
                pos: 16879
                length: 115
              pos: 16815
              length: 185
          children: []
          pos: 16764
          length: 236
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespaceIterator
              children: []
              pos: 17218
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17198
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17248
                length: 12
              pos: 17238
              length: 28
          children: []
          pos: 17198
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespacePointer
              children: []
              pos: 17490
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String namespace
                children: []
                pos: 17507
                length: 16
              pos: 17471
              length: 82
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17535
                length: 12
              pos: 17525
              length: 28
          children: []
          pos: 17471
          length: 82
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 17649
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 17665
                length: 13
              pos: 17635
              length: 73
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17690
                length: 12
              pos: 17680
              length: 28
          children: []
          pos: 17635
          length: 73
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 17807
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17793
              length: 60
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 17835
                length: 12
              pos: 17825
              length: 28
          children: []
          pos: 17793
          length: 60
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isDefaultNamespace
              children: []
              pos: 18012
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 18031
                length: 13
              pos: 17994
              length: 257
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: prefix
                            children: []
                            pos: 18060
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18070
                            length: 4
                        children: []
                        pos: 18060
                        length: 14
                    children: []
                    pos: 18059
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 18090
                    length: 12
                  pos: 18076
                  length: 36
                pos: 18056
                length: 56
              - type: local_variable_declaration
                fields:
                  text: String namespace = getNamespaceURI(prefix);
                children: []
                pos: 18122
                length: 43
              - type: return_statement
                fields:
                  text: return namespace != null && namespace.equals(getDefaultNamespaceURI());
                children: []
                pos: 18174
                length: 71
              pos: 18046
              length: 205
          children: []
          pos: 17994
          length: 257
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getDefaultNamespaceURI
              children: []
              pos: 18274
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18257
              length: 70
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 18309
                length: 12
              pos: 18299
              length: 28
          children: []
          pos: 18257
          length: 70
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPointerByID
              children: []
              pos: 18393
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 18408
                length: 21
              pos: 18378
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return context.getPointerByID(id);
                children: []
                pos: 18452
                length: 34
              pos: 18442
              length: 50
          children: []
          pos: 18378
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPointerByKey
              children: []
              pos: 18569
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 18594
                length: 21
              pos: 18554
              length: 169
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return context.getPointerByKey(key, value);
                children: []
                pos: 18674
                length: 43
              pos: 18664
              length: 59
          children: []
          pos: 18554
          length: 169
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asPath
              children: []
              pos: 18810
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18796
              length: 794
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 18959
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 18969
                                length: 4
                            children: []
                            pos: 18959
                            length: 14
                          right:
                            type: method_invocation
                            fields:
                              text: parent.isContainer()
                            children: []
                            pos: 18977
                            length: 20
                        children: []
                        pos: 18959
                        length: 38
                    children: []
                    pos: 18958
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return parent.asPath();
                    children: []
                    pos: 19013
                    length: 23
                  pos: 18999
                  length: 47
                pos: 18955
                length: 91
              - type: local_variable_declaration
                fields:
                  text: StringBuffer buffer = new StringBuffer();
                children: []
                pos: 19056
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 19110
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 19120
                            length: 4
                        children: []
                        pos: 19110
                        length: 14
                    children: []
                    pos: 19109
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append(parent.asPath());
                    children: []
                    pos: 19140
                    length: 31
                  pos: 19126
                  length: 55
                pos: 19106
                length: 75
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: buffer.length()
                                children: []
                                pos: 19195
                                length: 15
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 19214
                                length: 1
                            children: []
                            pos: 19195
                            length: 20
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: buffer.charAt(buffer.length() - 1)
                                children: []
                                pos: 19231
                                length: 34
                              right:
                                type: character_literal
                                fields:
                                  text: "'/'"
                                children: []
                                pos: 19269
                                length: 3
                            children: []
                            pos: 19231
                            length: 41
                        children: []
                        pos: 19195
                        length: 77
                    children: []
                    pos: 19194
                    length: 79
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append('/');
                    children: []
                    pos: 19288
                    length: 19
                  pos: 19274
                  length: 43
                pos: 19191
                length: 126
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: attribute
                        children: []
                        pos: 19330
                        length: 9
                    children: []
                    pos: 19329
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append('@');
                    children: []
                    pos: 19355
                    length: 19
                  pos: 19341
                  length: 43
                pos: 19326
                length: 58
              - type: expression_statement
                fields:
                  text: buffer.append(getName());
                children: []
                pos: 19393
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: index
                                children: []
                                pos: 19432
                                length: 5
                              right:
                                type: identifier
                                fields:
                                  text: WHOLE_COLLECTION
                                children: []
                                pos: 19441
                                length: 16
                            children: []
                            pos: 19432
                            length: 25
                          right:
                            type: method_invocation
                            fields:
                              text: isCollection()
                            children: []
                            pos: 19461
                            length: 14
                        children: []
                        pos: 19432
                        length: 43
                    children: []
                    pos: 19431
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append('[').append(index + 1).append(']');
                    children: []
                    pos: 19491
                    length: 49
                  pos: 19477
                  length: 73
                pos: 19428
                length: 122
              - type: return_statement
                fields:
                  text: return buffer.toString();
                children: []
                pos: 19559
                length: 25
              pos: 18819
              length: 771
          children: []
          pos: 18796
          length: 794
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: clone
              children: []
              pos: 19610
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 19596
              length: 397
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: NodePointer ptr = (NodePointer) super.clone();
                      children: []
                      pos: 19646
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: parent
                                  children: []
                                  pos: 19709
                                  length: 6
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 19719
                                  length: 4
                              children: []
                              pos: 19709
                              length: 14
                          children: []
                          pos: 19708
                          length: 16
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: ptr.parent = (NodePointer) parent.clone();
                          children: []
                          pos: 19743
                          length: 42
                        pos: 19725
                        length: 74
                      pos: 19705
                      length: 94
                    - type: return_statement
                      fields:
                        text: return ptr;
                      children: []
                      pos: 19812
                      length: 11
                    pos: 19632
                    length: 201
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (CloneNotSupportedException ex) {
                                      // Of course it is supported
                                      ex.printStackTrace();
                                  }
                      children: []
                      pos: 19842
                      length: 124
                    pos: 19628
                    length: 338
                children: []
                pos: 19628
                length: 338
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 19975
                length: 12
              pos: 19618
              length: 375
          children: []
          pos: 19596
          length: 397
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 20013
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 19999
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return asPath();
                children: []
                pos: 20034
                length: 16
              pos: 20024
              length: 32
          children: []
          pos: 19999
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareTo
              children: []
              pos: 20073
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object object
                children: []
                pos: 20083
                length: 13
              pos: 20062
              length: 679
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer pointer = (NodePointer) object;
                children: []
                pos: 20153
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 20209
                            length: 6
                          right:
                            type: field_access
                            fields:
                              text: pointer.parent
                            children: []
                            pos: 20219
                            length: 14
                        children: []
                        pos: 20209
                        length: 24
                    children: []
                    pos: 20208
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: 'return parent == null ? 0 : parent.compareChildNodePointers(this,
                        pointer);'
                    children: []
                    pos: 20249
                    length: 75
                  pos: 20235
                  length: 99
                pos: 20205
                length: 129
              - type: local_variable_declaration
                fields:
                  text: int depth1 = 0;
                children: []
                pos: 20386
                length: 15
              - type: local_variable_declaration
                fields:
                  text: NodePointer p1 = this;
                children: []
                pos: 20410
                length: 22
              - type: while_statement
                fields:
                  text: |-
                    while (p1 != null) {
                                depth1++;
                                p1 = p1.parent;
                            }
                children: []
                pos: 20441
                length: 80
              - type: local_variable_declaration
                fields:
                  text: int depth2 = 0;
                children: []
                pos: 20530
                length: 15
              - type: local_variable_declaration
                fields:
                  text: NodePointer p2 = pointer;
                children: []
                pos: 20554
                length: 25
              - type: while_statement
                fields:
                  text: |-
                    while (p2 != null) {
                                depth2++;
                                p2 = p2.parent;
                            }
                children: []
                pos: 20588
                length: 80
              - type: return_statement
                fields:
                  text: return compareNodePointers(this, depth1, pointer, depth2);
                children: []
                pos: 20677
                length: 58
              pos: 20098
              length: 643
          children: []
          pos: 20062
          length: 679
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareNodePointers
              children: []
              pos: 20759
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer p1
                children: []
                pos: 20788
                length: 14
              pos: 20747
              length: 1003
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: depth1
                            children: []
                            pos: 20887
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: depth2
                            children: []
                            pos: 20896
                            length: 6
                        children: []
                        pos: 20887
                        length: 15
                    children: []
                    pos: 20886
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int r = compareNodePointers(p1, depth1, p2.parent, depth2
                        - 1);
                    children: []
                    pos: 20918
                    length: 63
                  - type: return_statement
                    fields:
                      text: 'return r == 0 ? -1 : r;'
                    children: []
                    pos: 20994
                    length: 23
                  pos: 20904
                  length: 123
                pos: 20883
                length: 144
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: depth1
                            children: []
                            pos: 21040
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: depth2
                            children: []
                            pos: 21049
                            length: 6
                        children: []
                        pos: 21040
                        length: 15
                    children: []
                    pos: 21039
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int r = compareNodePointers(p1.parent, depth1 - 1, p2,
                        depth2);
                    children: []
                    pos: 21071
                    length: 63
                  - type: return_statement
                    fields:
                      text: 'return r == 0 ? 1 : r;'
                    children: []
                    pos: 21147
                    length: 22
                  pos: 21057
                  length: 122
                pos: 21036
                length: 143
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: p1
                                children: []
                                pos: 21192
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21198
                                length: 4
                            children: []
                            pos: 21192
                            length: 10
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: p2
                                children: []
                                pos: 21206
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21212
                                length: 4
                            children: []
                            pos: 21206
                            length: 10
                        children: []
                        pos: 21192
                        length: 24
                    children: []
                    pos: 21191
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 21232
                    length: 9
                  pos: 21218
                  length: 33
                pos: 21188
                length: 63
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: p1
                                children: []
                                pos: 21265
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 21271
                                length: 4
                            children: []
                            pos: 21265
                            length: 10
                          right:
                            type: method_invocation
                            fields:
                              text: p1.equals(p2)
                            children: []
                            pos: 21279
                            length: 13
                        children: []
                        pos: 21265
                        length: 27
                    children: []
                    pos: 21264
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 21308
                    length: 9
                  pos: 21294
                  length: 33
                pos: 21261
                length: 66
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: depth1
                            children: []
                            pos: 21341
                            length: 6
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '1'
                            children: []
                            pos: 21351
                            length: 1
                        children: []
                        pos: 21341
                        length: 11
                    children: []
                    pos: 21340
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new JXPathException(
                                            "Cannot compare pointers that do not belong to the same tree: '"
                                                    + p1 + "' and '" + p2 + "'");
                    children: []
                    pos: 21368
                    length: 169
                  pos: 21354
                  length: 193
                pos: 21337
                length: 210
              - type: local_variable_declaration
                fields:
                  text: int r = compareNodePointers(p1.parent, depth1 - 1, p2.parent,
                    depth2 - 1);
                children: []
                pos: 21556
                length: 74
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: r
                            children: []
                            pos: 21643
                            length: 1
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 21648
                            length: 1
                        children: []
                        pos: 21643
                        length: 6
                    children: []
                    pos: 21642
                    length: 8
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return r;
                    children: []
                    pos: 21665
                    length: 9
                  pos: 21651
                  length: 33
                pos: 21639
                length: 45
              - type: return_statement
                fields:
                  text: return p1.parent.compareChildNodePointers(p1, p2);
                children: []
                pos: 21694
                length: 50
              pos: 20873
              length: 877
          children: []
          pos: 20747
          length: 1003
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: printPointerChain
              children: []
              pos: 21843
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 21831
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: printDeep(this, "");
                children: []
                pos: 21873
                length: 20
              pos: 21863
              length: 36
          children: []
          pos: 21831
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: printDeep
              children: []
              pos: 21925
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer pointer
                children: []
                pos: 21935
                length: 19
              pos: 21905
              length: 702
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: indent.length()
                            children: []
                            pos: 21985
                            length: 15
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 22004
                            length: 1
                        children: []
                        pos: 21985
                        length: 20
                    children: []
                    pos: 21984
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        System.err.println(
                                        "POINTER: "
                                            + pointer
                                            + "("
                                            + pointer.getClass().getName()
                                            + ")");
                    children: []
                    pos: 22021
                    length: 182
                  pos: 22007
                  length: 206
                pos: 21981
                length: 476
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: pointer.getImmediateParentPointer()
                            children: []
                            pos: 22470
                            length: 35
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 22509
                            length: 4
                        children: []
                        pos: 22470
                        length: 43
                    children: []
                    pos: 22469
                    length: 45
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: printDeep(pointer.getImmediateParentPointer(), indent
                        + "  ");
                    children: []
                    pos: 22529
                    length: 62
                  pos: 22515
                  length: 86
                pos: 22466
                length: 135
              pos: 21971
              length: 636
          children: []
          pos: 21905
          length: 702
        pos: 1801
        length: 20808
    children: []
    pos: 1801
    length: 20808
  pos: 0
  length: 22609
text_diff: "--- before\n+++ after\n@@ -662,7 +662,9 @@\n         }\n \n         if
  (depth1 == 1) {\n-            return 0;\n+            throw new JXPathException(\n+
  \                   \"Cannot compare pointers that do not belong to the same tree:
  '\"\n+                            + p1 + \"' and '\" + p2 + \"'\");\n         }\n
  \        int r = compareNodePointers(p1.parent, depth1 - 1, p2.parent, depth2 -
  1);\n         if (r != 0) {\n"
tree_diff: |+
  New cluster:
  ===
  insert-node
  ---
  throw_statement: throw new JXPathException(
                      "Cannot compare pointers that do not belong to the same tree: '"
                              + p1 + "' and '" + p2 + "'"); [21368,21537]
  to
  block [21354,21387]
  at 0
  ------------
  ===
  insert-node
  ---
  throw_statement: throw new JXPathException(
                      "Cannot compare pointers that do not belong to the same tree: '"
                              + p1 + "' and '" + p2 + "'"); [21368,21537]
  to
  block [21354,21387]
  at 0

  New cluster:
  ===
  delete-node
  ---
  return_statement: return 0; [21368,21377]
  ===
  ------------
  ===
  delete-node
  ---
  return_statement: return 0; [21368,21377]
  ===

...
