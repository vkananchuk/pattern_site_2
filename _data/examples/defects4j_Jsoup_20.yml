---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DataUtil
        children: []
        pos: 341
        length: 8
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final Pattern charsetPattern = Pattern.compile("(?i)\\bcharset=\\s*\"?([^\\s;\"]*)");
          children: []
          pos: 356
          length: 100
        - type: field_declaration
          fields:
            text: static final String defaultCharset = "UTF-8";
          children: []
          pos: 461
          length: 45
        - type: field_declaration
          fields:
            text: private static final int bufferSize = 0x20000;
          children: []
          pos: 558
          length: 46
        - type: constructor_declaration
          fields:
            text: private DataUtil() {}
          children: []
          pos: 620
          length: 21
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: load
              children: []
              pos: 941
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: File in
                children: []
                pos: 946
                length: 7
              pos: 918
              length: 449
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FileInputStream inStream = null;
                children: []
                pos: 1020
                length: 32
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inStream = new FileInputStream(in);
                      children: []
                      pos: 1079
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: ByteBuffer byteData = readToByteBuffer(inStream);
                      children: []
                      pos: 1127
                      length: 49
                    - type: return_statement
                      fields:
                        text: return parseByteData(byteData, charsetName, baseUri,
                          Parser.htmlParser());
                      children: []
                      pos: 1189
                      length: 74
                    pos: 1065
                    length: 208
                  excepts:
                    type: excepts
                    fields: {}
                    children: []
                    pos: 1061
                    length: 300
                children: []
                pos: 1061
                length: 300
              pos: 1010
              length: 357
          children: []
          pos: 918
          length: 449
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: load
              children: []
              pos: 1715
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: InputStream in
                children: []
                pos: 1720
                length: 14
              pos: 1692
              length: 241
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: ByteBuffer byteData = readToByteBuffer(in);
                children: []
                pos: 1801
                length: 43
              - type: return_statement
                fields:
                  text: return parseByteData(byteData, charsetName, baseUri, Parser.htmlParser());
                children: []
                pos: 1853
                length: 74
              pos: 1791
              length: 142
          children: []
          pos: 1692
          length: 241
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: load
              children: []
              pos: 2381
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: InputStream in
                children: []
                pos: 2386
                length: 14
              pos: 2358
              length: 243
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: ByteBuffer byteData = readToByteBuffer(in);
                children: []
                pos: 2482
                length: 43
              - type: return_statement
                fields:
                  text: return parseByteData(byteData, charsetName, baseUri, parser);
                children: []
                pos: 2534
                length: 61
              pos: 2472
              length: 129
          children: []
          pos: 2358
          length: 243
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseByteData
              children: []
              pos: 2819
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: ByteBuffer byteData
                children: []
                pos: 2833
                length: 19
              pos: 2803
              length: 2036
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String docData;
                children: []
                pos: 2915
                length: 15
              - type: local_variable_declaration
                fields:
                  text: Document doc = null;
                children: []
                pos: 2939
                length: 20
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: charsetName
                            children: []
                            pos: 2972
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2987
                            length: 4
                        children: []
                        pos: 2972
                        length: 19
                    children: []
                    pos: 2971
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: docData = Charset.forName(defaultCharset).decode(byteData).toString();
                    children: []
                    pos: 3176
                    length: 70
                  - type: expression_statement
                    fields:
                      text: doc = parser.parseInput(docData, baseUri);
                    children: []
                    pos: 3259
                    length: 42
                  - type: local_variable_declaration
                    fields:
                      text: Element meta = doc.select("meta[http-equiv=content-type],
                        meta[charset]").first();
                    children: []
                    pos: 3314
                    length: 82
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: meta
                                children: []
                                pos: 3413
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 3421
                                length: 4
                            children: []
                            pos: 3413
                            length: 12
                        children: []
                        pos: 3412
                        length: 14
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: 'String foundCharset = meta.hasAttr("http-equiv")
                            ? getCharsetFromContentType(meta.attr("content")) : meta.attr("charset");'
                        children: []
                        pos: 3494
                        length: 122
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: foundCharset
                                            children: []
                                            pos: 3637
                                            length: 12
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 3653
                                            length: 4
                                        children: []
                                        pos: 3637
                                        length: 20
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: foundCharset.length()
                                            children: []
                                            pos: 3661
                                            length: 21
                                          right:
                                            type: decimal_integer_literal
                                            fields:
                                              text: '0'
                                            children: []
                                            pos: 3686
                                            length: 1
                                        children: []
                                        pos: 3661
                                        length: 26
                                    children: []
                                    pos: 3637
                                    length: 50
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!foundCharset.equals(defaultCharset)"
                                    children: []
                                    pos: 3691
                                    length: 36
                                children: []
                                pos: 3637
                                length: 90
                            children: []
                            pos: 3636
                            length: 92
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: charsetName = foundCharset;
                            children: []
                            pos: 3772
                            length: 27
                          - type: expression_statement
                            fields:
                              text: byteData.rewind();
                            children: []
                            pos: 3820
                            length: 18
                          - type: expression_statement
                            fields:
                              text: docData = Charset.forName(foundCharset).decode(byteData).toString();
                            children: []
                            pos: 3859
                            length: 68
                          - type: expression_statement
                            fields:
                              text: doc = null;
                            children: []
                            pos: 3948
                            length: 11
                          pos: 3729
                          length: 248
                        pos: 3633
                        length: 344
                      pos: 3427
                      length: 564
                    pos: 3409
                    length: 582
                  pos: 2993
                  length: 1008
                pos: 2968
                length: 1338
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: doc
                            children: []
                            pos: 4319
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4326
                            length: 4
                        children: []
                        pos: 4319
                        length: 11
                    children: []
                    pos: 4318
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: docData.charAt(0)
                                children: []
                                pos: 4617
                                length: 17
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '65279'
                                children: []
                                pos: 4638
                                length: 5
                            children: []
                            pos: 4617
                            length: 26
                        children: []
                        pos: 4616
                        length: 28
                    children:
                    - type: expression_statement
                      fields:
                        text: docData = docData.substring(1);
                      children: []
                      pos: 4661
                      length: 31
                    pos: 4613
                    length: 79
                  - type: expression_statement
                    fields:
                      text: doc = parser.parseInput(docData, baseUri);
                    children: []
                    pos: 4706
                    length: 42
                  - type: expression_statement
                    fields:
                      text: doc.outputSettings().charset(charsetName);
                    children: []
                    pos: 4761
                    length: 42
                  pos: 4332
                  length: 481
                pos: 4315
                length: 498
              - type: return_statement
                fields:
                  text: return doc;
                children: []
                pos: 4822
                length: 11
              pos: 2905
              length: 1934
          children: []
          pos: 2803
          length: 2036
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: readToByteBuffer
              children: []
              pos: 4863
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: InputStream inStream
                children: []
                pos: 4880
                length: 20
              pos: 4845
              length: 481
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: byte[] buffer = new byte[bufferSize];
                children: []
                pos: 4931
                length: 37
              - type: local_variable_declaration
                fields:
                  text: ByteArrayOutputStream outStream = new ByteArrayOutputStream(bufferSize);
                children: []
                pos: 4977
                length: 72
              - type: local_variable_declaration
                fields:
                  text: int read;
                children: []
                pos: 5058
                length: 9
              - type: while_statement
                fields:
                  text: |-
                    while(true) {
                                read  = inStream.read(buffer);
                                if (read == -1) break;
                                outStream.write(buffer, 0, read);
                            }
                children: []
                pos: 5076
                length: 147
              - type: local_variable_declaration
                fields:
                  text: ByteBuffer byteData = ByteBuffer.wrap(outStream.toByteArray());
                children: []
                pos: 5232
                length: 63
              - type: return_statement
                fields:
                  text: return byteData;
                children: []
                pos: 5304
                length: 16
              pos: 4921
              length: 405
          children: []
          pos: 4845
          length: 481
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getCharsetFromContentType
              children: []
              pos: 5558
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String contentType
                children: []
                pos: 5584
                length: 18
              pos: 5544
              length: 277
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: contentType
                            children: []
                            pos: 5618
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5633
                            length: 4
                        children: []
                        pos: 5618
                        length: 19
                    children: []
                    pos: 5617
                    length: 21
                children:
                - type: return_statement
                  fields:
                    text: return null;
                  children: []
                  pos: 5639
                  length: 12
                pos: 5614
                length: 37
              - type: local_variable_declaration
                fields:
                  text: Matcher m = charsetPattern.matcher(contentType);
                children: []
                pos: 5660
                length: 48
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: m.find()
                        children: []
                        pos: 5721
                        length: 8
                    children: []
                    pos: 5720
                    length: 10
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return m.group(1).trim().toUpperCase();
                    children: []
                    pos: 5745
                    length: 39
                  pos: 5731
                  length: 63
                pos: 5717
                length: 77
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 5803
                length: 12
              pos: 5604
              length: 217
          children: []
          pos: 5544
          length: 277
        pos: 328
        length: 5505
    children: []
    pos: 328
    length: 5505
  pos: 0
  length: 5834
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DataUtil
        children: []
        pos: 341
        length: 8
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final Pattern charsetPattern = Pattern.compile("(?i)\\bcharset=\\s*\"?([^\\s;\"]*)");
          children: []
          pos: 356
          length: 100
        - type: field_declaration
          fields:
            text: static final String defaultCharset = "UTF-8";
          children: []
          pos: 461
          length: 45
        - type: field_declaration
          fields:
            text: private static final int bufferSize = 0x20000;
          children: []
          pos: 558
          length: 46
        - type: constructor_declaration
          fields:
            text: private DataUtil() {}
          children: []
          pos: 620
          length: 21
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: load
              children: []
              pos: 941
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: File in
                children: []
                pos: 946
                length: 7
              pos: 918
              length: 449
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FileInputStream inStream = null;
                children: []
                pos: 1020
                length: 32
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inStream = new FileInputStream(in);
                      children: []
                      pos: 1079
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: ByteBuffer byteData = readToByteBuffer(inStream);
                      children: []
                      pos: 1127
                      length: 49
                    - type: return_statement
                      fields:
                        text: return parseByteData(byteData, charsetName, baseUri,
                          Parser.htmlParser());
                      children: []
                      pos: 1189
                      length: 74
                    pos: 1065
                    length: 208
                  excepts:
                    type: excepts
                    fields: {}
                    children: []
                    pos: 1061
                    length: 300
                children: []
                pos: 1061
                length: 300
              pos: 1010
              length: 357
          children: []
          pos: 918
          length: 449
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: load
              children: []
              pos: 1715
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: InputStream in
                children: []
                pos: 1720
                length: 14
              pos: 1692
              length: 241
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: ByteBuffer byteData = readToByteBuffer(in);
                children: []
                pos: 1801
                length: 43
              - type: return_statement
                fields:
                  text: return parseByteData(byteData, charsetName, baseUri, Parser.htmlParser());
                children: []
                pos: 1853
                length: 74
              pos: 1791
              length: 142
          children: []
          pos: 1692
          length: 241
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: load
              children: []
              pos: 2381
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: InputStream in
                children: []
                pos: 2386
                length: 14
              pos: 2358
              length: 243
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: ByteBuffer byteData = readToByteBuffer(in);
                children: []
                pos: 2482
                length: 43
              - type: return_statement
                fields:
                  text: return parseByteData(byteData, charsetName, baseUri, parser);
                children: []
                pos: 2534
                length: 61
              pos: 2472
              length: 129
          children: []
          pos: 2358
          length: 243
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseByteData
              children: []
              pos: 2819
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: ByteBuffer byteData
                children: []
                pos: 2833
                length: 19
              pos: 2803
              length: 1944
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String docData;
                children: []
                pos: 2915
                length: 15
              - type: local_variable_declaration
                fields:
                  text: Document doc = null;
                children: []
                pos: 2939
                length: 20
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: charsetName
                            children: []
                            pos: 2972
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2987
                            length: 4
                        children: []
                        pos: 2972
                        length: 19
                    children: []
                    pos: 2971
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: docData = Charset.forName(defaultCharset).decode(byteData).toString();
                    children: []
                    pos: 3176
                    length: 70
                  - type: expression_statement
                    fields:
                      text: doc = parser.parseInput(docData, baseUri);
                    children: []
                    pos: 3259
                    length: 42
                  - type: local_variable_declaration
                    fields:
                      text: Element meta = doc.select("meta[http-equiv=content-type],
                        meta[charset]").first();
                    children: []
                    pos: 3314
                    length: 82
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: meta
                                children: []
                                pos: 3413
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 3421
                                length: 4
                            children: []
                            pos: 3413
                            length: 12
                        children: []
                        pos: 3412
                        length: 14
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: 'String foundCharset = meta.hasAttr("http-equiv")
                            ? getCharsetFromContentType(meta.attr("content")) : meta.attr("charset");'
                        children: []
                        pos: 3494
                        length: 122
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: foundCharset
                                            children: []
                                            pos: 3637
                                            length: 12
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 3653
                                            length: 4
                                        children: []
                                        pos: 3637
                                        length: 20
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: foundCharset.length()
                                            children: []
                                            pos: 3661
                                            length: 21
                                          right:
                                            type: decimal_integer_literal
                                            fields:
                                              text: '0'
                                            children: []
                                            pos: 3686
                                            length: 1
                                        children: []
                                        pos: 3661
                                        length: 26
                                    children: []
                                    pos: 3637
                                    length: 50
                                  right:
                                    type: unary_expression
                                    fields:
                                      text: "!foundCharset.equals(defaultCharset)"
                                    children: []
                                    pos: 3691
                                    length: 36
                                children: []
                                pos: 3637
                                length: 90
                            children: []
                            pos: 3636
                            length: 92
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: charsetName = foundCharset;
                            children: []
                            pos: 3772
                            length: 27
                          - type: expression_statement
                            fields:
                              text: byteData.rewind();
                            children: []
                            pos: 3820
                            length: 18
                          - type: expression_statement
                            fields:
                              text: docData = Charset.forName(foundCharset).decode(byteData).toString();
                            children: []
                            pos: 3859
                            length: 68
                          - type: expression_statement
                            fields:
                              text: doc = null;
                            children: []
                            pos: 3948
                            length: 11
                          pos: 3729
                          length: 248
                        pos: 3633
                        length: 344
                      pos: 3427
                      length: 564
                    pos: 3409
                    length: 582
                  pos: 2993
                  length: 1008
                pos: 2968
                length: 1338
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: doc
                            children: []
                            pos: 4319
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4326
                            length: 4
                        children: []
                        pos: 4319
                        length: 11
                    children: []
                    pos: 4318
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: doc = parser.parseInput(docData, baseUri);
                    children: []
                    pos: 4614
                    length: 42
                  - type: expression_statement
                    fields:
                      text: doc.outputSettings().charset(charsetName);
                    children: []
                    pos: 4669
                    length: 42
                  pos: 4332
                  length: 389
                pos: 4315
                length: 406
              - type: return_statement
                fields:
                  text: return doc;
                children: []
                pos: 4730
                length: 11
              pos: 2905
              length: 1842
          children: []
          pos: 2803
          length: 1944
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: readToByteBuffer
              children: []
              pos: 4771
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: InputStream inStream
                children: []
                pos: 4788
                length: 20
              pos: 4753
              length: 481
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: byte[] buffer = new byte[bufferSize];
                children: []
                pos: 4839
                length: 37
              - type: local_variable_declaration
                fields:
                  text: ByteArrayOutputStream outStream = new ByteArrayOutputStream(bufferSize);
                children: []
                pos: 4885
                length: 72
              - type: local_variable_declaration
                fields:
                  text: int read;
                children: []
                pos: 4966
                length: 9
              - type: while_statement
                fields:
                  text: |-
                    while(true) {
                                read  = inStream.read(buffer);
                                if (read == -1) break;
                                outStream.write(buffer, 0, read);
                            }
                children: []
                pos: 4984
                length: 147
              - type: local_variable_declaration
                fields:
                  text: ByteBuffer byteData = ByteBuffer.wrap(outStream.toByteArray());
                children: []
                pos: 5140
                length: 63
              - type: return_statement
                fields:
                  text: return byteData;
                children: []
                pos: 5212
                length: 16
              pos: 4829
              length: 405
          children: []
          pos: 4753
          length: 481
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getCharsetFromContentType
              children: []
              pos: 5466
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String contentType
                children: []
                pos: 5492
                length: 18
              pos: 5452
              length: 277
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: contentType
                            children: []
                            pos: 5526
                            length: 11
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5541
                            length: 4
                        children: []
                        pos: 5526
                        length: 19
                    children: []
                    pos: 5525
                    length: 21
                children:
                - type: return_statement
                  fields:
                    text: return null;
                  children: []
                  pos: 5547
                  length: 12
                pos: 5522
                length: 37
              - type: local_variable_declaration
                fields:
                  text: Matcher m = charsetPattern.matcher(contentType);
                children: []
                pos: 5568
                length: 48
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: m.find()
                        children: []
                        pos: 5629
                        length: 8
                    children: []
                    pos: 5628
                    length: 10
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return m.group(1).trim().toUpperCase();
                    children: []
                    pos: 5653
                    length: 39
                  pos: 5639
                  length: 63
                pos: 5625
                length: 77
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 5711
                length: 12
              pos: 5512
              length: 217
          children: []
          pos: 5452
          length: 277
        pos: 328
        length: 5413
    children: []
    pos: 328
    length: 5413
  pos: 0
  length: 5742
text_diff: "--- before\n+++ after\n@@ -95,8 +95,6 @@\n             // there are times
  where there is a spurious byte-order-mark at the start of the text. Shouldn't be
  present\n             // in utf-8. If after decoding, there is a BOM, strip it;
  otherwise will cause the parser to go straight\n             // into head mode\n-
  \           if (docData.charAt(0) == 65279)\n-                docData = docData.substring(1);\n
  \n             doc = parser.parseInput(docData, baseUri);\n             doc.outputSettings().charset(charsetName);\n"
tree_diff: |+
  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [4613,4692]
      parenthesized_expression [4616,4644]
          equals [4617,4643]
              method_invocation: docData.charAt(0) [4617,4634]
              decimal_integer_literal: 65279 [4638,4643]
      expression_statement: docData = docData.substring(1); [4661,4692]

...
