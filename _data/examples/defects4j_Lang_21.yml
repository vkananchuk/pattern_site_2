---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DateUtils
        children: []
        pos: 2209
        length: 9
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: public static final TimeZone UTC_TIME_ZONE = TimeZone.getTimeZone("GMT");
          children: []
          pos: 2300
          length: 73
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_SECOND = 1000;
          children: []
          pos: 2464
          length: 50
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_MINUTE = 60 * MILLIS_PER_SECOND;
          children: []
          pos: 2605
          length: 68
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_HOUR = 60 * MILLIS_PER_MINUTE;
          children: []
          pos: 2762
          length: 66
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_DAY = 24 * MILLIS_PER_HOUR;
          children: []
          pos: 2916
          length: 63
        - type: field_declaration
          fields:
            text: public final static int SEMI_MONTH = 1001;
          children: []
          pos: 3114
          length: 42
        - type: field_declaration
          fields:
            text: "private static final int[][] fields = {\n            {Calendar.MILLISECOND},\n
              \           {Calendar.SECOND},\n            {Calendar.MINUTE},\n            {Calendar.HOUR_OF_DAY,
              Calendar.HOUR},\n            {Calendar.DATE, Calendar.DAY_OF_MONTH,
              Calendar.AM_PM \n                /* Calendar.DAY_OF_YEAR, Calendar.DAY_OF_WEEK,
              Calendar.DAY_OF_WEEK_IN_MONTH */\n            },\n            {Calendar.MONTH,
              DateUtils.SEMI_MONTH},\n            {Calendar.YEAR},\n            {Calendar.ERA}};"
          children: []
          pos: 3162
          length: 476
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_SUNDAY = 1;
          children: []
          pos: 3701
          length: 46
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_MONDAY = 2;
          children: []
          pos: 3810
          length: 46
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_RELATIVE = 3;
          children: []
          pos: 3928
          length: 48
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_CENTER = 4;
          children: []
          pos: 4052
          length: 46
        - type: field_declaration
          fields:
            text: public final static int RANGE_MONTH_SUNDAY = 5;
          children: []
          pos: 4171
          length: 47
        - type: field_declaration
          fields:
            text: public final static int RANGE_MONTH_MONDAY = 6;
          children: []
          pos: 4291
          length: 47
        - type: field_declaration
          fields:
            text: public final static int MODIFY_TRUNCATE = 0;
          children: []
          pos: 4421
          length: 44
        - type: field_declaration
          fields:
            text: public final static int MODIFY_ROUND = 1;
          children: []
          pos: 4541
          length: 41
        - type: field_declaration
          fields:
            text: public final static int MODIFY_CEILING= 2;
          children: []
          pos: 4661
          length: 42
        - type: constructor_declaration
          fields:
            text: |-
              public DateUtils() {
                      super();
                  }
          children: []
          pos: 5031
          length: 43
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameDay
              children: []
              pos: 5699
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 5709
                length: 10
              pos: 5677
              length: 388
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date1
                                children: []
                                pos: 5747
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5756
                                length: 4
                            children: []
                            pos: 5747
                            length: 13
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date2
                                children: []
                                pos: 5764
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5773
                                length: 4
                            children: []
                            pos: 5764
                            length: 13
                        children: []
                        pos: 5747
                        length: 30
                    children: []
                    pos: 5746
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 5793
                    length: 64
                  pos: 5779
                  length: 88
                pos: 5743
                length: 124
              - type: local_variable_declaration
                fields:
                  text: Calendar cal1 = Calendar.getInstance();
                children: []
                pos: 5876
                length: 39
              - type: expression_statement
                fields:
                  text: cal1.setTime(date1);
                children: []
                pos: 5924
                length: 20
              - type: local_variable_declaration
                fields:
                  text: Calendar cal2 = Calendar.getInstance();
                children: []
                pos: 5953
                length: 39
              - type: expression_statement
                fields:
                  text: cal2.setTime(date2);
                children: []
                pos: 6001
                length: 20
              - type: return_statement
                fields:
                  text: return isSameDay(cal1, cal2);
                children: []
                pos: 6030
                length: 29
              pos: 5733
              length: 332
          children: []
          pos: 5677
          length: 388
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameDay
              children: []
              pos: 6626
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 6636
                length: 13
              pos: 6604
              length: 421
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal1
                                children: []
                                pos: 6680
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 6688
                                length: 4
                            children: []
                            pos: 6680
                            length: 12
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal2
                                children: []
                                pos: 6696
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 6704
                                length: 4
                            children: []
                            pos: 6696
                            length: 12
                        children: []
                        pos: 6680
                        length: 28
                    children: []
                    pos: 6679
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 6724
                    length: 64
                  pos: 6710
                  length: 88
                pos: 6676
                length: 122
              - type: return_statement
                fields:
                  text: |-
                    return (cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                                    cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR));
                children: []
                pos: 6807
                length: 212
              pos: 6666
              length: 359
          children: []
          pos: 6604
          length: 421
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameInstant
              children: []
              pos: 7600
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 7614
                length: 10
              pos: 7578
              length: 251
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date1
                                children: []
                                pos: 7652
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7661
                                length: 4
                            children: []
                            pos: 7652
                            length: 13
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date2
                                children: []
                                pos: 7669
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7678
                                length: 4
                            children: []
                            pos: 7669
                            length: 13
                        children: []
                        pos: 7652
                        length: 30
                    children: []
                    pos: 7651
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 7698
                    length: 64
                  pos: 7684
                  length: 88
                pos: 7648
                length: 124
              - type: return_statement
                fields:
                  text: return date1.getTime() == date2.getTime();
                children: []
                pos: 7781
                length: 42
              pos: 7638
              length: 191
          children: []
          pos: 7578
          length: 251
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameInstant
              children: []
              pos: 8336
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 8350
                length: 13
              pos: 8314
              length: 273
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal1
                                children: []
                                pos: 8394
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8402
                                length: 4
                            children: []
                            pos: 8394
                            length: 12
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal2
                                children: []
                                pos: 8410
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8418
                                length: 4
                            children: []
                            pos: 8410
                            length: 12
                        children: []
                        pos: 8394
                        length: 28
                    children: []
                    pos: 8393
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 8438
                    length: 64
                  pos: 8424
                  length: 88
                pos: 8390
                length: 122
              - type: return_statement
                fields:
                  text: return cal1.getTime().getTime() == cal2.getTime().getTime();
                children: []
                pos: 8521
                length: 60
              pos: 8380
              length: 207
          children: []
          pos: 8314
          length: 273
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameLocalTime
              children: []
              pos: 9236
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 9252
                length: 13
              pos: 9214
              length: 797
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal1
                                children: []
                                pos: 9296
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9304
                                length: 4
                            children: []
                            pos: 9296
                            length: 12
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal2
                                children: []
                                pos: 9312
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9320
                                length: 4
                            children: []
                            pos: 9312
                            length: 12
                        children: []
                        pos: 9296
                        length: 28
                    children: []
                    pos: 9295
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 9340
                    length: 64
                  pos: 9326
                  length: 88
                pos: 9292
                length: 122
              - type: return_statement
                fields:
                  text: |-
                    return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                                    cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                                    cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                                    cal1.get(Calendar.HOUR_OF_DAY) == cal2.get(Calendar.HOUR_OF_DAY) &&
                                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                                    cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                                    cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                                    cal1.getClass() == cal2.getClass());
                children: []
                pos: 9423
                length: 582
              pos: 9282
              length: 729
          children: []
          pos: 9214
          length: 797
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseDate
              children: []
              pos: 10854
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String str
                children: []
                pos: 10864
                length: 10
              pos: 10835
              length: 159
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parseDateWithLeniency(str, parsePatterns, true);
                children: []
                pos: 10933
                length: 55
              pos: 10923
              length: 71
          children: []
          pos: 10835
          length: 159
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseDateStrictly
              children: []
              pos: 11873
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String str
                children: []
                pos: 11891
                length: 10
              pos: 11854
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parseDateWithLeniency(str, parsePatterns, false);
                children: []
                pos: 11960
                length: 56
              pos: 11950
              length: 72
          children: []
          pos: 11854
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseDateWithLeniency
              children: []
              pos: 12833
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String str
                children: []
                pos: 12855
                length: 10
              pos: 12813
              length: 1391
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: str
                                children: []
                                pos: 12956
                                length: 3
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 12963
                                length: 4
                            children: []
                            pos: 12956
                            length: 11
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parsePatterns
                                children: []
                                pos: 12971
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 12988
                                length: 4
                            children: []
                            pos: 12971
                            length: 21
                        children: []
                        pos: 12956
                        length: 36
                    children: []
                    pos: 12955
                    length: 38
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Date and Patterns
                        must not be null");
                    children: []
                    pos: 13008
                    length: 73
                  pos: 12994
                  length: 97
                pos: 12952
                length: 139
              - type: local_variable_declaration
                fields:
                  text: SimpleDateFormat parser = new SimpleDateFormat();
                children: []
                pos: 13109
                length: 49
              - type: expression_statement
                fields:
                  text: parser.setLenient(lenient);
                children: []
                pos: 13167
                length: 27
              - type: local_variable_declaration
                fields:
                  text: ParsePosition pos = new ParsePosition(0);
                children: []
                pos: 13203
                length: 41
              - type: for_statement
                fields:
                  text: "for (int i = 0; i < parsePatterns.length; i++) {\n\n            String
                    pattern = parsePatterns[i];\n\n            // LANG-530 - need
                    to make sure 'ZZ' output doesn't get passed to SimpleDateFormat\n
                    \           if (parsePatterns[i].endsWith(\"ZZ\")) {\n                pattern
                    = pattern.substring(0, pattern.length() - 1);\n            }\n
                    \           \n            parser.applyPattern(pattern);\n            pos.setIndex(0);\n\n
                    \           String str2 = str;\n            // LANG-530 - need
                    to make sure 'ZZ' output doesn't hit SimpleDateFormat as it will
                    ParseException\n            if (parsePatterns[i].endsWith(\"ZZ\"))
                    {\n                str2 = str.replaceAll(\"([-+][0-9][0-9]):([0-9][0-9])$\",
                    \"$1$2\"); \n            }\n\n            Date date = parser.parse(str2,
                    pos);\n            if (date != null && pos.getIndex() == str2.length())
                    {\n                return date;\n            }\n        }"
                children: []
                pos: 13253
                length: 871
              - type: throw_statement
                fields:
                  text: 'throw new ParseException("Unable to parse the date: " + str,
                    -1);'
                children: []
                pos: 14133
                length: 65
              pos: 12942
              length: 1262
          children: []
          pos: 12813
          length: 1391
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addYears
              children: []
              pos: 14653
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 14662
                length: 9
              pos: 14634
              length: 107
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.YEAR, amount);
                children: []
                pos: 14695
                length: 40
              pos: 14685
              length: 56
          children: []
          pos: 14634
          length: 107
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addMonths
              children: []
              pos: 15191
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 15201
                length: 9
              pos: 15172
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.MONTH, amount);
                children: []
                pos: 15234
                length: 41
              pos: 15224
              length: 57
          children: []
          pos: 15172
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addWeeks
              children: []
              pos: 15730
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 15739
                length: 9
              pos: 15711
              length: 115
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.WEEK_OF_YEAR, amount);
                children: []
                pos: 15772
                length: 48
              pos: 15762
              length: 64
          children: []
          pos: 15711
          length: 115
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addDays
              children: []
              pos: 16274
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 16282
                length: 9
              pos: 16255
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.DAY_OF_MONTH, amount);
                children: []
                pos: 16315
                length: 48
              pos: 16305
              length: 64
          children: []
          pos: 16255
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addHours
              children: []
              pos: 16818
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 16827
                length: 9
              pos: 16799
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.HOUR_OF_DAY, amount);
                children: []
                pos: 16860
                length: 47
              pos: 16850
              length: 63
          children: []
          pos: 16799
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addMinutes
              children: []
              pos: 17364
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 17375
                length: 9
              pos: 17345
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.MINUTE, amount);
                children: []
                pos: 17408
                length: 42
              pos: 17398
              length: 58
          children: []
          pos: 17345
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addSeconds
              children: []
              pos: 17907
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 17918
                length: 9
              pos: 17888
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.SECOND, amount);
                children: []
                pos: 17951
                length: 42
              pos: 17941
              length: 58
          children: []
          pos: 17888
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addMilliseconds
              children: []
              pos: 18455
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 18471
                length: 9
              pos: 18436
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.MILLISECOND, amount);
                children: []
                pos: 18504
                length: 47
              pos: 18494
              length: 63
          children: []
          pos: 18436
          length: 121
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: add
              children: []
              pos: 19047
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 19051
                length: 9
              pos: 19027
              length: 324
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 19107
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 19115
                            length: 4
                        children: []
                        pos: 19107
                        length: 12
                    children: []
                    pos: 19106
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 19135
                    length: 64
                  pos: 19121
                  length: 88
                pos: 19103
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar c = Calendar.getInstance();
                children: []
                pos: 19218
                length: 36
              - type: expression_statement
                fields:
                  text: c.setTime(date);
                children: []
                pos: 19263
                length: 16
              - type: expression_statement
                fields:
                  text: c.add(calendarField, amount);
                children: []
                pos: 19288
                length: 29
              - type: return_statement
                fields:
                  text: return c.getTime();
                children: []
                pos: 19326
                length: 19
              pos: 19093
              length: 258
          children: []
          pos: 19027
          length: 324
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setYears
              children: []
              pos: 19807
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 19816
                length: 9
              pos: 19788
              length: 107
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.YEAR, amount);
                children: []
                pos: 19849
                length: 40
              pos: 19839
              length: 56
          children: []
          pos: 19788
          length: 107
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setMonths
              children: []
              pos: 20348
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 20358
                length: 9
              pos: 20329
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.MONTH, amount);
                children: []
                pos: 20391
                length: 41
              pos: 20381
              length: 57
          children: []
          pos: 20329
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setDays
              children: []
              pos: 20897
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 20905
                length: 9
              pos: 20878
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.DAY_OF_MONTH, amount);
                children: []
                pos: 20938
                length: 48
              pos: 20928
              length: 64
          children: []
          pos: 20878
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setHours
              children: []
              pos: 21477
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 21486
                length: 9
              pos: 21458
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.HOUR_OF_DAY, amount);
                children: []
                pos: 21519
                length: 47
              pos: 21509
              length: 63
          children: []
          pos: 21458
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setMinutes
              children: []
              pos: 22025
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 22036
                length: 9
              pos: 22006
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.MINUTE, amount);
                children: []
                pos: 22069
                length: 42
              pos: 22059
              length: 58
          children: []
          pos: 22006
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setSeconds
              children: []
              pos: 22575
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 22586
                length: 9
              pos: 22556
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.SECOND, amount);
                children: []
                pos: 22619
                length: 42
              pos: 22609
              length: 58
          children: []
          pos: 22556
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setMilliseconds
              children: []
              pos: 23125
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 23141
                length: 9
              pos: 23106
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.MILLISECOND, amount);
                children: []
                pos: 23174
                length: 47
              pos: 23164
              length: 63
          children: []
          pos: 23106
          length: 121
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: set
              children: []
              pos: 23805
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 23809
                length: 9
              pos: 23785
              length: 431
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 23865
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 23873
                            length: 4
                        children: []
                        pos: 23865
                        length: 12
                    children: []
                    pos: 23864
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 23893
                    length: 64
                  pos: 23879
                  length: 88
                pos: 23861
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar c = Calendar.getInstance();
                children: []
                pos: 24054
                length: 36
              - type: expression_statement
                fields:
                  text: c.setLenient(false);
                children: []
                pos: 24099
                length: 20
              - type: expression_statement
                fields:
                  text: c.setTime(date);
                children: []
                pos: 24128
                length: 16
              - type: expression_statement
                fields:
                  text: c.set(calendarField, amount);
                children: []
                pos: 24153
                length: 29
              - type: return_statement
                fields:
                  text: return c.getTime();
                children: []
                pos: 24191
                length: 19
              pos: 23851
              length: 365
          children: []
          pos: 23785
          length: 431
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toCalendar
              children: []
              pos: 24561
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 24572
                length: 9
              pos: 24538
              length: 140
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Calendar c = Calendar.getInstance();
                children: []
                pos: 24593
                length: 36
              - type: expression_statement
                fields:
                  text: c.setTime(date);
                children: []
                pos: 24638
                length: 16
              - type: return_statement
                fields:
                  text: return c;
                children: []
                pos: 24663
                length: 9
              pos: 24583
              length: 95
          children: []
          pos: 24538
          length: 140
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: round
              children: []
              pos: 26079
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 26085
                length: 9
              pos: 26060
              length: 319
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 26121
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 26129
                            length: 4
                        children: []
                        pos: 26121
                        length: 12
                    children: []
                    pos: 26120
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 26149
                    length: 64
                  pos: 26135
                  length: 88
                pos: 26117
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 26232
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(date);
                children: []
                pos: 26280
                length: 19
              - type: expression_statement
                fields:
                  text: modify(gval, field, MODIFY_ROUND);
                children: []
                pos: 26308
                length: 34
              - type: return_statement
                fields:
                  text: return gval.getTime();
                children: []
                pos: 26351
                length: 22
              pos: 26107
              length: 272
          children: []
          pos: 26060
          length: 319
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: round
              children: []
              pos: 27723
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar date
                children: []
                pos: 27729
                length: 13
              pos: 27700
              length: 299
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 27769
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 27777
                            length: 4
                        children: []
                        pos: 27769
                        length: 12
                    children: []
                    pos: 27768
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 27797
                    length: 64
                  pos: 27783
                  length: 88
                pos: 27765
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar rounded = (Calendar) date.clone();
                children: []
                pos: 27880
                length: 43
              - type: expression_statement
                fields:
                  text: modify(rounded, field, MODIFY_ROUND);
                children: []
                pos: 27932
                length: 37
              - type: return_statement
                fields:
                  text: return rounded;
                children: []
                pos: 27978
                length: 15
              pos: 27755
              length: 244
          children: []
          pos: 27700
          length: 299
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: round
              children: []
              pos: 29456
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object date
                children: []
                pos: 29462
                length: 11
              pos: 29437
              length: 456
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 29500
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 29508
                            length: 4
                        children: []
                        pos: 29500
                        length: 12
                    children: []
                    pos: 29499
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 29528
                    length: 64
                  pos: 29514
                  length: 88
                pos: 29496
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: date instanceof Date
                        children: []
                        pos: 29615
                        length: 20
                    children: []
                    pos: 29614
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return round((Date) date, field);
                    children: []
                    pos: 29651
                    length: 33
                  pos: 29637
                  length: 57
                pos: 29611
                length: 276
              pos: 29486
              length: 407
          children: []
          pos: 29437
          length: 456
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncate
              children: []
              pos: 30674
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 30683
                length: 9
              pos: 30655
              length: 325
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 30719
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 30727
                            length: 4
                        children: []
                        pos: 30719
                        length: 12
                    children: []
                    pos: 30718
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 30747
                    length: 64
                  pos: 30733
                  length: 88
                pos: 30715
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 30830
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(date);
                children: []
                pos: 30878
                length: 19
              - type: expression_statement
                fields:
                  text: modify(gval, field, MODIFY_TRUNCATE);
                children: []
                pos: 30906
                length: 37
              - type: return_statement
                fields:
                  text: return gval.getTime();
                children: []
                pos: 30952
                length: 22
              pos: 30705
              length: 275
          children: []
          pos: 30655
          length: 325
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncate
              children: []
              pos: 31708
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar date
                children: []
                pos: 31717
                length: 13
              pos: 31685
              length: 311
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 31757
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 31765
                            length: 4
                        children: []
                        pos: 31757
                        length: 12
                    children: []
                    pos: 31756
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 31785
                    length: 64
                  pos: 31771
                  length: 88
                pos: 31753
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar truncated = (Calendar) date.clone();
                children: []
                pos: 31868
                length: 45
              - type: expression_statement
                fields:
                  text: modify(truncated, field, MODIFY_TRUNCATE);
                children: []
                pos: 31922
                length: 42
              - type: return_statement
                fields:
                  text: return truncated;
                children: []
                pos: 31973
                length: 17
              pos: 31743
              length: 253
          children: []
          pos: 31685
          length: 311
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncate
              children: []
              pos: 32879
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object date
                children: []
                pos: 32888
                length: 11
              pos: 32860
              length: 468
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 32926
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 32934
                            length: 4
                        children: []
                        pos: 32926
                        length: 12
                    children: []
                    pos: 32925
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 32954
                    length: 64
                  pos: 32940
                  length: 88
                pos: 32922
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: date instanceof Date
                        children: []
                        pos: 33041
                        length: 20
                    children: []
                    pos: 33040
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return truncate((Date) date, field);
                    children: []
                    pos: 33077
                    length: 36
                  pos: 33063
                  length: 60
                pos: 33037
                length: 285
              pos: 32912
              length: 416
          children: []
          pos: 32860
          length: 468
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ceiling
              children: []
              pos: 34125
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 34133
                length: 9
              pos: 34106
              length: 323
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 34169
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 34177
                            length: 4
                        children: []
                        pos: 34169
                        length: 12
                    children: []
                    pos: 34168
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 34197
                    length: 64
                  pos: 34183
                  length: 88
                pos: 34165
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 34280
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(date);
                children: []
                pos: 34328
                length: 19
              - type: expression_statement
                fields:
                  text: modify(gval, field, MODIFY_CEILING);
                children: []
                pos: 34356
                length: 36
              - type: return_statement
                fields:
                  text: return gval.getTime();
                children: []
                pos: 34401
                length: 22
              pos: 34155
              length: 274
          children: []
          pos: 34106
          length: 323
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ceiling
              children: []
              pos: 35171
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar date
                children: []
                pos: 35179
                length: 13
              pos: 35148
              length: 300
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 35219
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 35227
                            length: 4
                        children: []
                        pos: 35219
                        length: 12
                    children: []
                    pos: 35218
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 35247
                    length: 64
                  pos: 35233
                  length: 88
                pos: 35215
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar ceiled = (Calendar) date.clone();
                children: []
                pos: 35330
                length: 42
              - type: expression_statement
                fields:
                  text: modify(ceiled, field, MODIFY_CEILING);
                children: []
                pos: 35381
                length: 38
              - type: return_statement
                fields:
                  text: return ceiled;
                children: []
                pos: 35428
                length: 14
              pos: 35205
              length: 243
          children: []
          pos: 35148
          length: 300
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ceiling
              children: []
              pos: 36345
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object date
                children: []
                pos: 36353
                length: 11
              pos: 36326
              length: 493
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 36391
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 36399
                            length: 4
                        children: []
                        pos: 36391
                        length: 12
                    children: []
                    pos: 36390
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 36419
                    length: 64
                  pos: 36405
                  length: 88
                pos: 36387
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: date instanceof Date
                        children: []
                        pos: 36506
                        length: 20
                    children: []
                    pos: 36505
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return ceiling((Date) date, field);
                    children: []
                    pos: 36542
                    length: 35
                  pos: 36528
                  length: 59
                pos: 36502
                length: 311
              pos: 36377
              length: 442
          children: []
          pos: 36326
          length: 493
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: modify
              children: []
              pos: 37187
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar val
                children: []
                pos: 37194
                length: 12
              pos: 37167
              length: 6070
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: val.get(Calendar.YEAR)
                            children: []
                            pos: 37246
                            length: 22
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '280000000'
                            children: []
                            pos: 37271
                            length: 9
                        children: []
                        pos: 37246
                        length: 34
                    children: []
                    pos: 37245
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new ArithmeticException("Calendar value too large
                        for accurate calculations");
                    children: []
                    pos: 37296
                    length: 84
                  pos: 37282
                  length: 108
                pos: 37242
                length: 148
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: field
                            children: []
                            pos: 37412
                            length: 5
                          right:
                            type: field_access
                            fields:
                              text: Calendar.MILLISECOND
                            children: []
                            pos: 37421
                            length: 20
                        children: []
                        pos: 37412
                        length: 29
                    children: []
                    pos: 37411
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 37457
                    length: 7
                  pos: 37443
                  length: 31
                pos: 37408
                length: 66
              - type: local_variable_declaration
                fields:
                  text: Date date = val.getTime();
                children: []
                pos: 37757
                length: 26
              - type: local_variable_declaration
                fields:
                  text: long time = date.getTime();
                children: []
                pos: 37792
                length: 27
              - type: local_variable_declaration
                fields:
                  text: boolean done = false;
                children: []
                pos: 37828
                length: 21
              - type: local_variable_declaration
                fields:
                  text: int millisecs = val.get(Calendar.MILLISECOND);
                children: []
                pos: 37892
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: MODIFY_TRUNCATE
                                children: []
                                pos: 37951
                                length: 15
                              right:
                                type: identifier
                                fields:
                                  text: modType
                                children: []
                                pos: 37970
                                length: 7
                            children: []
                            pos: 37951
                            length: 26
                          right:
                            type: less_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: millisecs
                                children: []
                                pos: 37981
                                length: 9
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '500'
                                children: []
                                pos: 37993
                                length: 3
                            children: []
                            pos: 37981
                            length: 15
                        children: []
                        pos: 37951
                        length: 45
                    children: []
                    pos: 37950
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: time = time - millisecs;
                    children: []
                    pos: 38012
                    length: 24
                  pos: 37998
                  length: 48
                pos: 37947
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: field
                            children: []
                            pos: 38059
                            length: 5
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SECOND
                            children: []
                            pos: 38068
                            length: 15
                        children: []
                        pos: 38059
                        length: 24
                    children: []
                    pos: 38058
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: done = true;
                    children: []
                    pos: 38099
                    length: 12
                  pos: 38085
                  length: 36
                pos: 38055
                length: 66
              - type: local_variable_declaration
                fields:
                  text: int seconds = val.get(Calendar.SECOND);
                children: []
                pos: 38159
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!done"
                            children: []
                            pos: 38211
                            length: 5
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: MODIFY_TRUNCATE
                                        children: []
                                        pos: 38221
                                        length: 15
                                      right:
                                        type: identifier
                                        fields:
                                          text: modType
                                        children: []
                                        pos: 38240
                                        length: 7
                                    children: []
                                    pos: 38221
                                    length: 26
                                  right:
                                    type: less_than
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: seconds
                                        children: []
                                        pos: 38251
                                        length: 7
                                      right:
                                        type: decimal_integer_literal
                                        fields:
                                          text: '30'
                                        children: []
                                        pos: 38261
                                        length: 2
                                    children: []
                                    pos: 38251
                                    length: 12
                                children: []
                                pos: 38221
                                length: 42
                            children: []
                            pos: 38220
                            length: 44
                        children: []
                        pos: 38211
                        length: 53
                    children: []
                    pos: 38210
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: time = time - (seconds * 1000L);
                    children: []
                    pos: 38280
                    length: 32
                  pos: 38266
                  length: 56
                pos: 38207
                length: 115
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: field
                            children: []
                            pos: 38335
                            length: 5
                          right:
                            type: field_access
                            fields:
                              text: Calendar.MINUTE
                            children: []
                            pos: 38344
                            length: 15
                        children: []
                        pos: 38335
                        length: 24
                    children: []
                    pos: 38334
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: done = true;
                    children: []
                    pos: 38375
                    length: 12
                  pos: 38361
                  length: 36
                pos: 38331
                length: 66
              - type: local_variable_declaration
                fields:
                  text: int minutes = val.get(Calendar.MINUTE);
                children: []
                pos: 38435
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!done"
                            children: []
                            pos: 38487
                            length: 5
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: MODIFY_TRUNCATE
                                        children: []
                                        pos: 38497
                                        length: 15
                                      right:
                                        type: identifier
                                        fields:
                                          text: modType
                                        children: []
                                        pos: 38516
                                        length: 7
                                    children: []
                                    pos: 38497
                                    length: 26
                                  right:
                                    type: less_than
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: minutes
                                        children: []
                                        pos: 38527
                                        length: 7
                                      right:
                                        type: decimal_integer_literal
                                        fields:
                                          text: '30'
                                        children: []
                                        pos: 38537
                                        length: 2
                                    children: []
                                    pos: 38527
                                    length: 12
                                children: []
                                pos: 38497
                                length: 42
                            children: []
                            pos: 38496
                            length: 44
                        children: []
                        pos: 38487
                        length: 53
                    children: []
                    pos: 38486
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: time = time - (minutes * 60000L);
                    children: []
                    pos: 38556
                    length: 33
                  pos: 38542
                  length: 57
                pos: 38483
                length: 116
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: date.getTime()
                            children: []
                            pos: 38635
                            length: 14
                          right:
                            type: identifier
                            fields:
                              text: time
                            children: []
                            pos: 38653
                            length: 4
                        children: []
                        pos: 38635
                        length: 22
                    children: []
                    pos: 38634
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: date.setTime(time);
                    children: []
                    pos: 38673
                    length: 19
                  - type: expression_statement
                    fields:
                      text: val.setTime(date);
                    children: []
                    pos: 38705
                    length: 18
                  pos: 38659
                  length: 74
                pos: 38631
                length: 102
              - type: local_variable_declaration
                fields:
                  text: boolean roundUp = false;
                children: []
                pos: 38833
                length: 24
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < fields.length; i++) {
                                for (int j = 0; j < fields[i].length; j++) {
                                    if (fields[i][j] == field) {
                                        //This is our field... we stop looping
                                        if (modType == MODIFY_CEILING || (modType == MODIFY_ROUND && roundUp)) {
                                            if (field == DateUtils.SEMI_MONTH) {
                                                //This is a special case that's hard to generalize
                                                //If the date is 1, we round up to 16, otherwise
                                                //  we subtract 15 days and add 1 month
                                                if (val.get(Calendar.DATE) == 1) {
                                                    val.add(Calendar.DATE, 15);
                                                } else {
                                                    val.add(Calendar.DATE, -15);
                                                    val.add(Calendar.MONTH, 1);
                                                }
                    // ----------------- Fix for LANG-440 ---------------------- START ---------------
                                            } else if (field == Calendar.AM_PM) {
                                                // This is a special case
                                                // If the time is 0, we round up to 12, otherwise
                                                //  we subtract 12 hours and add 1 day
                                                if (val.get(Calendar.HOUR_OF_DAY) == 0) {
                                                    val.add(Calendar.HOUR_OF_DAY, 12);
                                                } else {
                                                    val.add(Calendar.HOUR_OF_DAY, -12);
                                                    val.add(Calendar.DATE, 1);
                                                }
                    // ----------------- Fix for LANG-440 ---------------------- END ---------------
                                            } else {
                                                //We need at add one to this field since the
                                                //  last number causes us to round up
                                                val.add(fields[i][0], 1);
                                            }
                                        }
                                        return;
                                    }
                                }
                                //We have various fields that are not easy roundings
                                int offset = 0;
                                boolean offsetSet = false;
                                //These are special types of fields that require different rounding rules
                                switch (field) {
                                    case DateUtils.SEMI_MONTH:
                                        if (fields[i][0] == Calendar.DATE) {
                                            //If we're going to drop the DATE field's value,
                                            //  we want to do this our own way.
                                            //We need to subtrace 1 since the date has a minimum of 1
                                            offset = val.get(Calendar.DATE) - 1;
                                            //If we're above 15 days adjustment, that means we're in the
                                            //  bottom half of the month and should stay accordingly.
                                            if (offset >= 15) {
                                                offset -= 15;
                                            }
                                            //Record whether we're in the top or bottom half of that range
                                            roundUp = offset > 7;
                                            offsetSet = true;
                                        }
                                        break;
                                    case Calendar.AM_PM:
                                        if (fields[i][0] == Calendar.HOUR_OF_DAY) {
                                            //If we're going to drop the HOUR field's value,
                                            //  we want to do this our own way.
                                            offset = val.get(Calendar.HOUR_OF_DAY);
                                            if (offset >= 12) {
                                                offset -= 12;
                                            }
                                            roundUp = offset >= 6;
                                            offsetSet = true;
                                        }
                                        break;
                                }
                                if (!offsetSet) {
                                    int min = val.getActualMinimum(fields[i][0]);
                                    int max = val.getActualMaximum(fields[i][0]);
                                    //Calculate the offset from the minimum allowed value
                                    offset = val.get(fields[i][0]) - min;
                                    //Set roundUp if this is more than half way between the minimum and maximum
                                    roundUp = offset > ((max - min) / 2);
                                }
                                //We need to remove this field
                                if (offset != 0) {
                                    val.set(fields[i][0], val.get(fields[i][0]) - offset);
                                }
                            }
                children: []
                pos: 38866
                length: 4276
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("The field " + field +
                    " is not supported");
                children: []
                pos: 43151
                length: 79
              pos: 37232
              length: 6005
          children: []
          pos: 37167
          length: 6070
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 44567
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date focus
                children: []
                pos: 44576
                length: 10
              pos: 44534
              length: 313
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: focus
                            children: []
                            pos: 44618
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 44627
                            length: 4
                        children: []
                        pos: 44618
                        length: 13
                    children: []
                    pos: 44617
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 44647
                    length: 64
                  pos: 44633
                  length: 88
                pos: 44614
                length: 107
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 44730
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(focus);
                children: []
                pos: 44778
                length: 20
              - type: return_statement
                fields:
                  text: return iterator(gval, rangeStyle);
                children: []
                pos: 44807
                length: 34
              pos: 44604
              length: 243
          children: []
          pos: 44534
          length: 313
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 46048
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar focus
                children: []
                pos: 46057
                length: 14
              pos: 46015
              length: 2874
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: focus
                            children: []
                            pos: 46103
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 46112
                            length: 4
                        children: []
                        pos: 46103
                        length: 13
                    children: []
                    pos: 46102
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 46132
                    length: 64
                  pos: 46118
                  length: 88
                pos: 46099
                length: 107
              - type: local_variable_declaration
                fields:
                  text: Calendar start = null;
                children: []
                pos: 46215
                length: 22
              - type: local_variable_declaration
                fields:
                  text: Calendar end = null;
                children: []
                pos: 46246
                length: 20
              - type: local_variable_declaration
                fields:
                  text: int startCutoff = Calendar.SUNDAY;
                children: []
                pos: 46275
                length: 34
              - type: local_variable_declaration
                fields:
                  text: int endCutoff = Calendar.SATURDAY;
                children: []
                pos: 46318
                length: 34
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: rangeStyle
                        children: []
                        pos: 46369
                        length: 10
                    children: []
                    pos: 46368
                    length: 12
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case RANGE_MONTH_SUNDAY:
                                    case RANGE_MONTH_MONDAY:
                                        //Set start to the first of the month
                                        start = truncate(focus, Calendar.MONTH);
                                        //Set end to the last of the month
                                        end = (Calendar) start.clone();
                                        end.add(Calendar.MONTH, 1);
                                        end.add(Calendar.DATE, -1);
                                        //Loop start back to the previous sunday or monday
                                        if (rangeStyle == RANGE_MONTH_MONDAY) {
                                            startCutoff = Calendar.MONDAY;
                                            endCutoff = Calendar.SUNDAY;
                                        }
                                        break;
                                    case RANGE_WEEK_SUNDAY:
                                    case RANGE_WEEK_MONDAY:
                                    case RANGE_WEEK_RELATIVE:
                                    case RANGE_WEEK_CENTER:
                                        //Set start and end to the current date
                                        start = truncate(focus, Calendar.DATE);
                                        end = truncate(focus, Calendar.DATE);
                                        switch (rangeStyle) {
                                            case RANGE_WEEK_SUNDAY:
                                                //already set by default
                                                break;
                                            case RANGE_WEEK_MONDAY:
                                                startCutoff = Calendar.MONDAY;
                                                endCutoff = Calendar.SUNDAY;
                                                break;
                                            case RANGE_WEEK_RELATIVE:
                                                startCutoff = focus.get(Calendar.DAY_OF_WEEK);
                                                endCutoff = startCutoff - 1;
                                                break;
                                            case RANGE_WEEK_CENTER:
                                                startCutoff = focus.get(Calendar.DAY_OF_WEEK) - 3;
                                                endCutoff = focus.get(Calendar.DAY_OF_WEEK) + 3;
                                                break;
                                        }
                                        break;
                                    default:
                                        throw new IllegalArgumentException("The range style " + rangeStyle + " is not valid.");
                                }
                    children: []
                    pos: 46381
                    length: 1894
                children: []
                pos: 46361
                length: 1914
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: startCutoff
                            children: []
                            pos: 48288
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SUNDAY
                            children: []
                            pos: 48302
                            length: 15
                        children: []
                        pos: 48288
                        length: 29
                    children: []
                    pos: 48287
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: startCutoff += 7;
                    children: []
                    pos: 48333
                    length: 17
                  pos: 48319
                  length: 41
                pos: 48284
                length: 76
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: startCutoff
                            children: []
                            pos: 48373
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SATURDAY
                            children: []
                            pos: 48387
                            length: 17
                        children: []
                        pos: 48373
                        length: 31
                    children: []
                    pos: 48372
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: startCutoff -= 7;
                    children: []
                    pos: 48420
                    length: 17
                  pos: 48406
                  length: 41
                pos: 48369
                length: 78
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: endCutoff
                            children: []
                            pos: 48460
                            length: 9
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SUNDAY
                            children: []
                            pos: 48472
                            length: 15
                        children: []
                        pos: 48460
                        length: 27
                    children: []
                    pos: 48459
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: endCutoff += 7;
                    children: []
                    pos: 48503
                    length: 15
                  pos: 48489
                  length: 39
                pos: 48456
                length: 72
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: endCutoff
                            children: []
                            pos: 48541
                            length: 9
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SATURDAY
                            children: []
                            pos: 48553
                            length: 17
                        children: []
                        pos: 48541
                        length: 29
                    children: []
                    pos: 48540
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: endCutoff -= 7;
                    children: []
                    pos: 48586
                    length: 15
                  pos: 48572
                  length: 39
                pos: 48537
                length: 74
              - type: while_statement
                fields:
                  text: |-
                    while (start.get(Calendar.DAY_OF_WEEK) != startCutoff) {
                                start.add(Calendar.DATE, -1);
                            }
                children: []
                pos: 48620
                length: 108
              - type: while_statement
                fields:
                  text: |-
                    while (end.get(Calendar.DAY_OF_WEEK) != endCutoff) {
                                end.add(Calendar.DATE, 1);
                            }
                children: []
                pos: 48737
                length: 101
              - type: return_statement
                fields:
                  text: return new DateIterator(start, end);
                children: []
                pos: 48847
                length: 36
              pos: 46089
              length: 2800
          children: []
          pos: 46015
          length: 2874
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 49852
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object focus
                children: []
                pos: 49861
                length: 12
              pos: 49826
              length: 495
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: focus
                            children: []
                            pos: 49905
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 49914
                            length: 4
                        children: []
                        pos: 49905
                        length: 13
                    children: []
                    pos: 49904
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 49934
                    length: 64
                  pos: 49920
                  length: 88
                pos: 49901
                length: 107
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: focus instanceof Date
                        children: []
                        pos: 50021
                        length: 21
                    children: []
                    pos: 50020
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return iterator((Date) focus, rangeStyle);
                    children: []
                    pos: 50058
                    length: 42
                  pos: 50044
                  length: 66
                pos: 50017
                length: 298
              pos: 49891
              length: 430
          children: []
          pos: 49826
          length: 495
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMilliseconds
              children: []
              pos: 52112
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 52138
                length: 9
              pos: 52093
              length: 147
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.MILLISECOND);
                children: []
                pos: 52173
                length: 57
              pos: 52163
              length: 77
          children: []
          pos: 52093
          length: 147
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInSeconds
              children: []
              pos: 54107
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 54128
                length: 9
              pos: 54088
              length: 133
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.SECOND);
                children: []
                pos: 54163
                length: 52
              pos: 54153
              length: 68
          children: []
          pos: 54088
          length: 133
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMinutes
              children: []
              pos: 56141
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 56162
                length: 9
              pos: 56122
              length: 133
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.MINUTE);
                children: []
                pos: 56197
                length: 52
              pos: 56187
              length: 68
          children: []
          pos: 56122
          length: 133
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInHours
              children: []
              pos: 58136
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 58155
                length: 9
              pos: 58117
              length: 136
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.HOUR_OF_DAY);
                children: []
                pos: 58190
                length: 57
              pos: 58180
              length: 73
          children: []
          pos: 58117
          length: 136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInDays
              children: []
              pos: 60048
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 60066
                length: 9
              pos: 60029
              length: 135
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.DAY_OF_YEAR);
                children: []
                pos: 60101
                length: 57
              pos: 60091
              length: 73
          children: []
          pos: 60029
          length: 135
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMilliseconds
              children: []
              pos: 62088
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 62114
                length: 17
              pos: 62069
              length: 149
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.MILLISECOND);
                children: []
                pos: 62153
                length: 61
              pos: 62147
              length: 71
          children: []
          pos: 62069
          length: 149
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInSeconds
              children: []
              pos: 64095
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 64116
                length: 17
              pos: 64076
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.SECOND);
                children: []
                pos: 64159
                length: 56
              pos: 64149
              length: 72
          children: []
          pos: 64076
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMinutes
              children: []
              pos: 66157
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 66178
                length: 17
              pos: 66138
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.MINUTE);
                children: []
                pos: 66221
                length: 56
              pos: 66211
              length: 72
          children: []
          pos: 66138
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInHours
              children: []
              pos: 68194
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 68213
                length: 17
              pos: 68175
              length: 148
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.HOUR_OF_DAY);
                children: []
                pos: 68256
                length: 61
              pos: 68246
              length: 77
          children: []
          pos: 68175
          length: 148
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInDays
              children: []
              pos: 70270
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 70288
                length: 17
              pos: 70251
              length: 147
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.DAY_OF_YEAR);
                children: []
                pos: 70331
                length: 61
              pos: 70321
              length: 77
          children: []
          pos: 70251
          length: 147
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragment
              children: []
              pos: 70872
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 70884
                length: 9
              pos: 70852
              length: 327
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 70932
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 70940
                            length: 4
                        children: []
                        pos: 70932
                        length: 12
                    children: []
                    pos: 70931
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw  new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 70960
                    length: 65
                  pos: 70946
                  length: 89
                pos: 70929
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar calendar = Calendar.getInstance();
                children: []
                pos: 71044
                length: 43
              - type: expression_statement
                fields:
                  text: calendar.setTime(date);
                children: []
                pos: 71096
                length: 23
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, unit);
                children: []
                pos: 71128
                length: 45
              pos: 70919
              length: 260
          children: []
          pos: 70852
          length: 327
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragment
              children: []
              pos: 71669
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 71681
                length: 17
              pos: 71649
              length: 1791
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: calendar
                            children: []
                            pos: 71737
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 71749
                            length: 4
                        children: []
                        pos: 71737
                        length: 16
                    children: []
                    pos: 71736
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw  new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 71769
                    length: 65
                  pos: 71755
                  length: 90
                pos: 71734
                length: 111
              - type: local_variable_declaration
                fields:
                  text: long millisPerUnit = getMillisPerUnit(unit);
                children: []
                pos: 71854
                length: 44
              - type: local_variable_declaration
                fields:
                  text: long result = 0;
                children: []
                pos: 71907
                length: 16
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: fragment
                        children: []
                        pos: 72016
                        length: 8
                    children: []
                    pos: 72015
                    length: 10
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case Calendar.YEAR:
                                        result += (calendar.get(Calendar.DAY_OF_YEAR) * MILLIS_PER_DAY) / millisPerUnit;
                                        break;
                                    case Calendar.MONTH:
                                        result += (calendar.get(Calendar.DAY_OF_MONTH) * MILLIS_PER_DAY) / millisPerUnit;
                                        break;
                                }
                    children: []
                    pos: 72026
                    length: 317
                children: []
                pos: 72008
                length: 335
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: fragment
                        children: []
                        pos: 72361
                        length: 8
                    children: []
                    pos: 72360
                    length: 10
                  body:
                    type: switch_block
                    fields:
                      text: "{\n            // Number of days already calculated for
                        these cases\n            case Calendar.YEAR:\n            case
                        Calendar.MONTH:\n            \n            // The rest of
                        the valid cases\n            case Calendar.DAY_OF_YEAR:\n
                        \           case Calendar.DATE:\n                result +=
                        (calendar.get(Calendar.HOUR_OF_DAY) * MILLIS_PER_HOUR) / millisPerUnit;\n
                        \               //$FALL-THROUGH$\n            case Calendar.HOUR_OF_DAY:\n
                        \               result += (calendar.get(Calendar.MINUTE) *
                        MILLIS_PER_MINUTE) / millisPerUnit;\n                //$FALL-THROUGH$\n
                        \           case Calendar.MINUTE:\n                result
                        += (calendar.get(Calendar.SECOND) * MILLIS_PER_SECOND) / millisPerUnit;\n
                        \               //$FALL-THROUGH$\n            case Calendar.SECOND:\n
                        \               result += (calendar.get(Calendar.MILLISECOND)
                        * 1) / millisPerUnit;\n                break;\n            case
                        Calendar.MILLISECOND: break;//never useful\n                default:
                        throw new IllegalArgumentException(\"The fragment \" + fragment
                        + \" is not supported\");\n        }"
                    children: []
                    pos: 72371
                    length: 1040
                children: []
                pos: 72353
                length: 1058
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 73420
                length: 14
              pos: 71724
              length: 1716
          children: []
          pos: 71649
          length: 1791
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedEquals
              children: []
              pos: 74036
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 74052
                length: 13
              pos: 74014
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return truncatedCompareTo(cal1, cal2, field) == 0;
                children: []
                pos: 74103
                length: 50
              pos: 74093
              length: 66
          children: []
          pos: 74014
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedEquals
              children: []
              pos: 74745
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 74761
                length: 10
              pos: 74723
              length: 141
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return truncatedCompareTo(date1, date2, field) == 0;
                children: []
                pos: 74806
                length: 52
              pos: 74796
              length: 68
          children: []
          pos: 74723
          length: 141
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedCompareTo
              children: []
              pos: 75527
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 75546
                length: 13
              pos: 75509
              length: 252
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Calendar truncatedCal1 = truncate(cal1, field);
                children: []
                pos: 75597
                length: 47
              - type: local_variable_declaration
                fields:
                  text: Calendar truncatedCal2 = truncate(cal2, field);
                children: []
                pos: 75653
                length: 47
              - type: return_statement
                fields:
                  text: return truncatedCal1.compareTo(truncatedCal2);
                children: []
                pos: 75709
                length: 46
              pos: 75587
              length: 174
          children: []
          pos: 75509
          length: 252
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedCompareTo
              children: []
              pos: 76410
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 76429
                length: 10
              pos: 76392
              length: 244
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Date truncatedDate1 = truncate(date1, field);
                children: []
                pos: 76474
                length: 45
              - type: local_variable_declaration
                fields:
                  text: Date truncatedDate2 = truncate(date2, field);
                children: []
                pos: 76528
                length: 45
              - type: return_statement
                fields:
                  text: return truncatedDate1.compareTo(truncatedDate2);
                children: []
                pos: 76582
                length: 48
              pos: 76464
              length: 172
          children: []
          pos: 76392
          length: 244
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMillisPerUnit
              children: []
              pos: 76980
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int unit
                children: []
                pos: 76997
                length: 8
              pos: 76960
              length: 800
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: long result = Long.MAX_VALUE;
                children: []
                pos: 77017
                length: 29
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: unit
                        children: []
                        pos: 77063
                        length: 4
                    children: []
                    pos: 77062
                    length: 6
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case Calendar.DAY_OF_YEAR:
                                    case Calendar.DATE:
                                        result = MILLIS_PER_DAY;
                                        break;
                                    case Calendar.HOUR_OF_DAY:
                                        result = MILLIS_PER_HOUR;
                                        break;
                                    case Calendar.MINUTE:
                                        result = MILLIS_PER_MINUTE;
                                        break;
                                    case Calendar.SECOND:
                                        result = MILLIS_PER_SECOND;
                                        break;
                                    case Calendar.MILLISECOND:
                                        result = 1;
                                        break;
                                    default: throw new IllegalArgumentException("The unit " + unit + " cannot be represented is milleseconds");
                                }
                    children: []
                    pos: 77069
                    length: 662
                children: []
                pos: 77055
                length: 676
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 77740
                length: 14
              pos: 77007
              length: 753
          children: []
          pos: 76960
          length: 800
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DateIterator
              children: []
              pos: 77824
              length: 12
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Calendar endFinal;
                children: []
                pos: 77877
                length: 32
              - type: field_declaration
                fields:
                  text: private final Calendar spot;
                children: []
                pos: 77918
                length: 28
              - type: constructor_declaration
                fields:
                  text: |-
                    DateIterator(Calendar startFinal, Calendar endFinal) {
                                super();
                                this.endFinal = endFinal;
                                spot = startFinal;
                                spot.add(Calendar.DATE, -1);
                            }
                children: []
                pos: 78179
                length: 195
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hasNext
                    children: []
                    pos: 78575
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 78560
                    length: 78
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return spot.before(endFinal);
                      children: []
                      pos: 78599
                      length: 29
                    pos: 78585
                    length: 53
                children: []
                pos: 78560
                length: 78
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: next
                    children: []
                    pos: 78805
                    length: 4
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 78789
                    length: 225
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: spot.equals(endFinal)
                              children: []
                              pos: 78830
                              length: 21
                          children: []
                          pos: 78829
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: throw_statement
                          fields:
                            text: throw new NoSuchElementException();
                          children: []
                          pos: 78871
                          length: 35
                        pos: 78853
                        length: 67
                      pos: 78826
                      length: 94
                    - type: expression_statement
                      fields:
                        text: spot.add(Calendar.DATE, 1);
                      children: []
                      pos: 78933
                      length: 27
                    - type: return_statement
                      fields:
                        text: return (Calendar) spot.clone();
                      children: []
                      pos: 78973
                      length: 31
                    pos: 78812
                    length: 202
                children: []
                pos: 78789
                length: 225
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: remove
                    children: []
                    pos: 79221
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 79209
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: throw_statement
                      fields:
                        text: throw new UnsupportedOperationException();
                      children: []
                      pos: 79244
                      length: 42
                    pos: 79230
                    length: 66
                children: []
                pos: 79209
                length: 87
              pos: 77811
              length: 1491
          children: []
          pos: 77811
          length: 1491
        pos: 2196
        length: 77113
    children: []
    pos: 2196
    length: 77113
  pos: 0
  length: 79310
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DateUtils
        children: []
        pos: 2209
        length: 9
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: public static final TimeZone UTC_TIME_ZONE = TimeZone.getTimeZone("GMT");
          children: []
          pos: 2300
          length: 73
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_SECOND = 1000;
          children: []
          pos: 2464
          length: 50
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_MINUTE = 60 * MILLIS_PER_SECOND;
          children: []
          pos: 2605
          length: 68
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_HOUR = 60 * MILLIS_PER_MINUTE;
          children: []
          pos: 2762
          length: 66
        - type: field_declaration
          fields:
            text: public static final long MILLIS_PER_DAY = 24 * MILLIS_PER_HOUR;
          children: []
          pos: 2916
          length: 63
        - type: field_declaration
          fields:
            text: public final static int SEMI_MONTH = 1001;
          children: []
          pos: 3114
          length: 42
        - type: field_declaration
          fields:
            text: "private static final int[][] fields = {\n            {Calendar.MILLISECOND},\n
              \           {Calendar.SECOND},\n            {Calendar.MINUTE},\n            {Calendar.HOUR_OF_DAY,
              Calendar.HOUR},\n            {Calendar.DATE, Calendar.DAY_OF_MONTH,
              Calendar.AM_PM \n                /* Calendar.DAY_OF_YEAR, Calendar.DAY_OF_WEEK,
              Calendar.DAY_OF_WEEK_IN_MONTH */\n            },\n            {Calendar.MONTH,
              DateUtils.SEMI_MONTH},\n            {Calendar.YEAR},\n            {Calendar.ERA}};"
          children: []
          pos: 3162
          length: 476
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_SUNDAY = 1;
          children: []
          pos: 3701
          length: 46
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_MONDAY = 2;
          children: []
          pos: 3810
          length: 46
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_RELATIVE = 3;
          children: []
          pos: 3928
          length: 48
        - type: field_declaration
          fields:
            text: public final static int RANGE_WEEK_CENTER = 4;
          children: []
          pos: 4052
          length: 46
        - type: field_declaration
          fields:
            text: public final static int RANGE_MONTH_SUNDAY = 5;
          children: []
          pos: 4171
          length: 47
        - type: field_declaration
          fields:
            text: public final static int RANGE_MONTH_MONDAY = 6;
          children: []
          pos: 4291
          length: 47
        - type: field_declaration
          fields:
            text: public final static int MODIFY_TRUNCATE = 0;
          children: []
          pos: 4421
          length: 44
        - type: field_declaration
          fields:
            text: public final static int MODIFY_ROUND = 1;
          children: []
          pos: 4541
          length: 41
        - type: field_declaration
          fields:
            text: public final static int MODIFY_CEILING= 2;
          children: []
          pos: 4661
          length: 42
        - type: constructor_declaration
          fields:
            text: |-
              public DateUtils() {
                      super();
                  }
          children: []
          pos: 5031
          length: 43
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameDay
              children: []
              pos: 5699
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 5709
                length: 10
              pos: 5677
              length: 388
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date1
                                children: []
                                pos: 5747
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5756
                                length: 4
                            children: []
                            pos: 5747
                            length: 13
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date2
                                children: []
                                pos: 5764
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5773
                                length: 4
                            children: []
                            pos: 5764
                            length: 13
                        children: []
                        pos: 5747
                        length: 30
                    children: []
                    pos: 5746
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 5793
                    length: 64
                  pos: 5779
                  length: 88
                pos: 5743
                length: 124
              - type: local_variable_declaration
                fields:
                  text: Calendar cal1 = Calendar.getInstance();
                children: []
                pos: 5876
                length: 39
              - type: expression_statement
                fields:
                  text: cal1.setTime(date1);
                children: []
                pos: 5924
                length: 20
              - type: local_variable_declaration
                fields:
                  text: Calendar cal2 = Calendar.getInstance();
                children: []
                pos: 5953
                length: 39
              - type: expression_statement
                fields:
                  text: cal2.setTime(date2);
                children: []
                pos: 6001
                length: 20
              - type: return_statement
                fields:
                  text: return isSameDay(cal1, cal2);
                children: []
                pos: 6030
                length: 29
              pos: 5733
              length: 332
          children: []
          pos: 5677
          length: 388
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameDay
              children: []
              pos: 6626
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 6636
                length: 13
              pos: 6604
              length: 421
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal1
                                children: []
                                pos: 6680
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 6688
                                length: 4
                            children: []
                            pos: 6680
                            length: 12
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal2
                                children: []
                                pos: 6696
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 6704
                                length: 4
                            children: []
                            pos: 6696
                            length: 12
                        children: []
                        pos: 6680
                        length: 28
                    children: []
                    pos: 6679
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 6724
                    length: 64
                  pos: 6710
                  length: 88
                pos: 6676
                length: 122
              - type: return_statement
                fields:
                  text: |-
                    return (cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                                    cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR));
                children: []
                pos: 6807
                length: 212
              pos: 6666
              length: 359
          children: []
          pos: 6604
          length: 421
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameInstant
              children: []
              pos: 7600
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 7614
                length: 10
              pos: 7578
              length: 251
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date1
                                children: []
                                pos: 7652
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7661
                                length: 4
                            children: []
                            pos: 7652
                            length: 13
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: date2
                                children: []
                                pos: 7669
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7678
                                length: 4
                            children: []
                            pos: 7669
                            length: 13
                        children: []
                        pos: 7652
                        length: 30
                    children: []
                    pos: 7651
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 7698
                    length: 64
                  pos: 7684
                  length: 88
                pos: 7648
                length: 124
              - type: return_statement
                fields:
                  text: return date1.getTime() == date2.getTime();
                children: []
                pos: 7781
                length: 42
              pos: 7638
              length: 191
          children: []
          pos: 7578
          length: 251
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameInstant
              children: []
              pos: 8336
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 8350
                length: 13
              pos: 8314
              length: 273
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal1
                                children: []
                                pos: 8394
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8402
                                length: 4
                            children: []
                            pos: 8394
                            length: 12
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal2
                                children: []
                                pos: 8410
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8418
                                length: 4
                            children: []
                            pos: 8410
                            length: 12
                        children: []
                        pos: 8394
                        length: 28
                    children: []
                    pos: 8393
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 8438
                    length: 64
                  pos: 8424
                  length: 88
                pos: 8390
                length: 122
              - type: return_statement
                fields:
                  text: return cal1.getTime().getTime() == cal2.getTime().getTime();
                children: []
                pos: 8521
                length: 60
              pos: 8380
              length: 207
          children: []
          pos: 8314
          length: 273
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSameLocalTime
              children: []
              pos: 9236
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 9252
                length: 13
              pos: 9214
              length: 783
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal1
                                children: []
                                pos: 9296
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9304
                                length: 4
                            children: []
                            pos: 9296
                            length: 12
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: cal2
                                children: []
                                pos: 9312
                                length: 4
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 9320
                                length: 4
                            children: []
                            pos: 9312
                            length: 12
                        children: []
                        pos: 9296
                        length: 28
                    children: []
                    pos: 9295
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 9340
                    length: 64
                  pos: 9326
                  length: 88
                pos: 9292
                length: 122
              - type: return_statement
                fields:
                  text: |-
                    return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                                    cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                                    cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                                    cal1.get(Calendar.HOUR) == cal2.get(Calendar.HOUR) &&
                                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                                    cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                                    cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                                    cal1.getClass() == cal2.getClass());
                children: []
                pos: 9423
                length: 568
              pos: 9282
              length: 715
          children: []
          pos: 9214
          length: 783
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseDate
              children: []
              pos: 10840
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String str
                children: []
                pos: 10850
                length: 10
              pos: 10821
              length: 159
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parseDateWithLeniency(str, parsePatterns, true);
                children: []
                pos: 10919
                length: 55
              pos: 10909
              length: 71
          children: []
          pos: 10821
          length: 159
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseDateStrictly
              children: []
              pos: 11859
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String str
                children: []
                pos: 11877
                length: 10
              pos: 11840
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parseDateWithLeniency(str, parsePatterns, false);
                children: []
                pos: 11946
                length: 56
              pos: 11936
              length: 72
          children: []
          pos: 11840
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseDateWithLeniency
              children: []
              pos: 12819
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String str
                children: []
                pos: 12841
                length: 10
              pos: 12799
              length: 1391
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: str
                                children: []
                                pos: 12942
                                length: 3
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 12949
                                length: 4
                            children: []
                            pos: 12942
                            length: 11
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parsePatterns
                                children: []
                                pos: 12957
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 12974
                                length: 4
                            children: []
                            pos: 12957
                            length: 21
                        children: []
                        pos: 12942
                        length: 36
                    children: []
                    pos: 12941
                    length: 38
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("Date and Patterns
                        must not be null");
                    children: []
                    pos: 12994
                    length: 73
                  pos: 12980
                  length: 97
                pos: 12938
                length: 139
              - type: local_variable_declaration
                fields:
                  text: SimpleDateFormat parser = new SimpleDateFormat();
                children: []
                pos: 13095
                length: 49
              - type: expression_statement
                fields:
                  text: parser.setLenient(lenient);
                children: []
                pos: 13153
                length: 27
              - type: local_variable_declaration
                fields:
                  text: ParsePosition pos = new ParsePosition(0);
                children: []
                pos: 13189
                length: 41
              - type: for_statement
                fields:
                  text: "for (int i = 0; i < parsePatterns.length; i++) {\n\n            String
                    pattern = parsePatterns[i];\n\n            // LANG-530 - need
                    to make sure 'ZZ' output doesn't get passed to SimpleDateFormat\n
                    \           if (parsePatterns[i].endsWith(\"ZZ\")) {\n                pattern
                    = pattern.substring(0, pattern.length() - 1);\n            }\n
                    \           \n            parser.applyPattern(pattern);\n            pos.setIndex(0);\n\n
                    \           String str2 = str;\n            // LANG-530 - need
                    to make sure 'ZZ' output doesn't hit SimpleDateFormat as it will
                    ParseException\n            if (parsePatterns[i].endsWith(\"ZZ\"))
                    {\n                str2 = str.replaceAll(\"([-+][0-9][0-9]):([0-9][0-9])$\",
                    \"$1$2\"); \n            }\n\n            Date date = parser.parse(str2,
                    pos);\n            if (date != null && pos.getIndex() == str2.length())
                    {\n                return date;\n            }\n        }"
                children: []
                pos: 13239
                length: 871
              - type: throw_statement
                fields:
                  text: 'throw new ParseException("Unable to parse the date: " + str,
                    -1);'
                children: []
                pos: 14119
                length: 65
              pos: 12928
              length: 1262
          children: []
          pos: 12799
          length: 1391
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addYears
              children: []
              pos: 14639
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 14648
                length: 9
              pos: 14620
              length: 107
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.YEAR, amount);
                children: []
                pos: 14681
                length: 40
              pos: 14671
              length: 56
          children: []
          pos: 14620
          length: 107
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addMonths
              children: []
              pos: 15177
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 15187
                length: 9
              pos: 15158
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.MONTH, amount);
                children: []
                pos: 15220
                length: 41
              pos: 15210
              length: 57
          children: []
          pos: 15158
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addWeeks
              children: []
              pos: 15716
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 15725
                length: 9
              pos: 15697
              length: 115
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.WEEK_OF_YEAR, amount);
                children: []
                pos: 15758
                length: 48
              pos: 15748
              length: 64
          children: []
          pos: 15697
          length: 115
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addDays
              children: []
              pos: 16260
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 16268
                length: 9
              pos: 16241
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.DAY_OF_MONTH, amount);
                children: []
                pos: 16301
                length: 48
              pos: 16291
              length: 64
          children: []
          pos: 16241
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addHours
              children: []
              pos: 16804
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 16813
                length: 9
              pos: 16785
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.HOUR_OF_DAY, amount);
                children: []
                pos: 16846
                length: 47
              pos: 16836
              length: 63
          children: []
          pos: 16785
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addMinutes
              children: []
              pos: 17350
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 17361
                length: 9
              pos: 17331
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.MINUTE, amount);
                children: []
                pos: 17394
                length: 42
              pos: 17384
              length: 58
          children: []
          pos: 17331
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addSeconds
              children: []
              pos: 17893
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 17904
                length: 9
              pos: 17874
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.SECOND, amount);
                children: []
                pos: 17937
                length: 42
              pos: 17927
              length: 58
          children: []
          pos: 17874
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addMilliseconds
              children: []
              pos: 18441
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 18457
                length: 9
              pos: 18422
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return add(date, Calendar.MILLISECOND, amount);
                children: []
                pos: 18490
                length: 47
              pos: 18480
              length: 63
          children: []
          pos: 18422
          length: 121
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: add
              children: []
              pos: 19033
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 19037
                length: 9
              pos: 19013
              length: 324
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 19093
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 19101
                            length: 4
                        children: []
                        pos: 19093
                        length: 12
                    children: []
                    pos: 19092
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 19121
                    length: 64
                  pos: 19107
                  length: 88
                pos: 19089
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar c = Calendar.getInstance();
                children: []
                pos: 19204
                length: 36
              - type: expression_statement
                fields:
                  text: c.setTime(date);
                children: []
                pos: 19249
                length: 16
              - type: expression_statement
                fields:
                  text: c.add(calendarField, amount);
                children: []
                pos: 19274
                length: 29
              - type: return_statement
                fields:
                  text: return c.getTime();
                children: []
                pos: 19312
                length: 19
              pos: 19079
              length: 258
          children: []
          pos: 19013
          length: 324
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setYears
              children: []
              pos: 19793
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 19802
                length: 9
              pos: 19774
              length: 107
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.YEAR, amount);
                children: []
                pos: 19835
                length: 40
              pos: 19825
              length: 56
          children: []
          pos: 19774
          length: 107
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setMonths
              children: []
              pos: 20334
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 20344
                length: 9
              pos: 20315
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.MONTH, amount);
                children: []
                pos: 20377
                length: 41
              pos: 20367
              length: 57
          children: []
          pos: 20315
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setDays
              children: []
              pos: 20883
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 20891
                length: 9
              pos: 20864
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.DAY_OF_MONTH, amount);
                children: []
                pos: 20924
                length: 48
              pos: 20914
              length: 64
          children: []
          pos: 20864
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setHours
              children: []
              pos: 21463
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 21472
                length: 9
              pos: 21444
              length: 114
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.HOUR_OF_DAY, amount);
                children: []
                pos: 21505
                length: 47
              pos: 21495
              length: 63
          children: []
          pos: 21444
          length: 114
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setMinutes
              children: []
              pos: 22011
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 22022
                length: 9
              pos: 21992
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.MINUTE, amount);
                children: []
                pos: 22055
                length: 42
              pos: 22045
              length: 58
          children: []
          pos: 21992
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setSeconds
              children: []
              pos: 22561
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 22572
                length: 9
              pos: 22542
              length: 111
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.SECOND, amount);
                children: []
                pos: 22605
                length: 42
              pos: 22595
              length: 58
          children: []
          pos: 22542
          length: 111
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setMilliseconds
              children: []
              pos: 23111
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 23127
                length: 9
              pos: 23092
              length: 121
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return set(date, Calendar.MILLISECOND, amount);
                children: []
                pos: 23160
                length: 47
              pos: 23150
              length: 63
          children: []
          pos: 23092
          length: 121
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: set
              children: []
              pos: 23791
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 23795
                length: 9
              pos: 23771
              length: 431
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 23851
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 23859
                            length: 4
                        children: []
                        pos: 23851
                        length: 12
                    children: []
                    pos: 23850
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 23879
                    length: 64
                  pos: 23865
                  length: 88
                pos: 23847
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar c = Calendar.getInstance();
                children: []
                pos: 24040
                length: 36
              - type: expression_statement
                fields:
                  text: c.setLenient(false);
                children: []
                pos: 24085
                length: 20
              - type: expression_statement
                fields:
                  text: c.setTime(date);
                children: []
                pos: 24114
                length: 16
              - type: expression_statement
                fields:
                  text: c.set(calendarField, amount);
                children: []
                pos: 24139
                length: 29
              - type: return_statement
                fields:
                  text: return c.getTime();
                children: []
                pos: 24177
                length: 19
              pos: 23837
              length: 365
          children: []
          pos: 23771
          length: 431
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toCalendar
              children: []
              pos: 24547
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 24558
                length: 9
              pos: 24524
              length: 140
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Calendar c = Calendar.getInstance();
                children: []
                pos: 24579
                length: 36
              - type: expression_statement
                fields:
                  text: c.setTime(date);
                children: []
                pos: 24624
                length: 16
              - type: return_statement
                fields:
                  text: return c;
                children: []
                pos: 24649
                length: 9
              pos: 24569
              length: 95
          children: []
          pos: 24524
          length: 140
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: round
              children: []
              pos: 26065
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 26071
                length: 9
              pos: 26046
              length: 319
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 26107
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 26115
                            length: 4
                        children: []
                        pos: 26107
                        length: 12
                    children: []
                    pos: 26106
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 26135
                    length: 64
                  pos: 26121
                  length: 88
                pos: 26103
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 26218
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(date);
                children: []
                pos: 26266
                length: 19
              - type: expression_statement
                fields:
                  text: modify(gval, field, MODIFY_ROUND);
                children: []
                pos: 26294
                length: 34
              - type: return_statement
                fields:
                  text: return gval.getTime();
                children: []
                pos: 26337
                length: 22
              pos: 26093
              length: 272
          children: []
          pos: 26046
          length: 319
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: round
              children: []
              pos: 27709
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar date
                children: []
                pos: 27715
                length: 13
              pos: 27686
              length: 299
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 27755
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 27763
                            length: 4
                        children: []
                        pos: 27755
                        length: 12
                    children: []
                    pos: 27754
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 27783
                    length: 64
                  pos: 27769
                  length: 88
                pos: 27751
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar rounded = (Calendar) date.clone();
                children: []
                pos: 27866
                length: 43
              - type: expression_statement
                fields:
                  text: modify(rounded, field, MODIFY_ROUND);
                children: []
                pos: 27918
                length: 37
              - type: return_statement
                fields:
                  text: return rounded;
                children: []
                pos: 27964
                length: 15
              pos: 27741
              length: 244
          children: []
          pos: 27686
          length: 299
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: round
              children: []
              pos: 29442
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object date
                children: []
                pos: 29448
                length: 11
              pos: 29423
              length: 456
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 29486
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 29494
                            length: 4
                        children: []
                        pos: 29486
                        length: 12
                    children: []
                    pos: 29485
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 29514
                    length: 64
                  pos: 29500
                  length: 88
                pos: 29482
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: date instanceof Date
                        children: []
                        pos: 29601
                        length: 20
                    children: []
                    pos: 29600
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return round((Date) date, field);
                    children: []
                    pos: 29637
                    length: 33
                  pos: 29623
                  length: 57
                pos: 29597
                length: 276
              pos: 29472
              length: 407
          children: []
          pos: 29423
          length: 456
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncate
              children: []
              pos: 30660
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 30669
                length: 9
              pos: 30641
              length: 325
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 30705
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 30713
                            length: 4
                        children: []
                        pos: 30705
                        length: 12
                    children: []
                    pos: 30704
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 30733
                    length: 64
                  pos: 30719
                  length: 88
                pos: 30701
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 30816
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(date);
                children: []
                pos: 30864
                length: 19
              - type: expression_statement
                fields:
                  text: modify(gval, field, MODIFY_TRUNCATE);
                children: []
                pos: 30892
                length: 37
              - type: return_statement
                fields:
                  text: return gval.getTime();
                children: []
                pos: 30938
                length: 22
              pos: 30691
              length: 275
          children: []
          pos: 30641
          length: 325
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncate
              children: []
              pos: 31694
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar date
                children: []
                pos: 31703
                length: 13
              pos: 31671
              length: 311
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 31743
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 31751
                            length: 4
                        children: []
                        pos: 31743
                        length: 12
                    children: []
                    pos: 31742
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 31771
                    length: 64
                  pos: 31757
                  length: 88
                pos: 31739
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar truncated = (Calendar) date.clone();
                children: []
                pos: 31854
                length: 45
              - type: expression_statement
                fields:
                  text: modify(truncated, field, MODIFY_TRUNCATE);
                children: []
                pos: 31908
                length: 42
              - type: return_statement
                fields:
                  text: return truncated;
                children: []
                pos: 31959
                length: 17
              pos: 31729
              length: 253
          children: []
          pos: 31671
          length: 311
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncate
              children: []
              pos: 32865
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object date
                children: []
                pos: 32874
                length: 11
              pos: 32846
              length: 468
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 32912
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 32920
                            length: 4
                        children: []
                        pos: 32912
                        length: 12
                    children: []
                    pos: 32911
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 32940
                    length: 64
                  pos: 32926
                  length: 88
                pos: 32908
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: date instanceof Date
                        children: []
                        pos: 33027
                        length: 20
                    children: []
                    pos: 33026
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return truncate((Date) date, field);
                    children: []
                    pos: 33063
                    length: 36
                  pos: 33049
                  length: 60
                pos: 33023
                length: 285
              pos: 32898
              length: 416
          children: []
          pos: 32846
          length: 468
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ceiling
              children: []
              pos: 34111
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 34119
                length: 9
              pos: 34092
              length: 323
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 34155
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 34163
                            length: 4
                        children: []
                        pos: 34155
                        length: 12
                    children: []
                    pos: 34154
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 34183
                    length: 64
                  pos: 34169
                  length: 88
                pos: 34151
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 34266
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(date);
                children: []
                pos: 34314
                length: 19
              - type: expression_statement
                fields:
                  text: modify(gval, field, MODIFY_CEILING);
                children: []
                pos: 34342
                length: 36
              - type: return_statement
                fields:
                  text: return gval.getTime();
                children: []
                pos: 34387
                length: 22
              pos: 34141
              length: 274
          children: []
          pos: 34092
          length: 323
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ceiling
              children: []
              pos: 35157
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar date
                children: []
                pos: 35165
                length: 13
              pos: 35134
              length: 300
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 35205
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 35213
                            length: 4
                        children: []
                        pos: 35205
                        length: 12
                    children: []
                    pos: 35204
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 35233
                    length: 64
                  pos: 35219
                  length: 88
                pos: 35201
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar ceiled = (Calendar) date.clone();
                children: []
                pos: 35316
                length: 42
              - type: expression_statement
                fields:
                  text: modify(ceiled, field, MODIFY_CEILING);
                children: []
                pos: 35367
                length: 38
              - type: return_statement
                fields:
                  text: return ceiled;
                children: []
                pos: 35414
                length: 14
              pos: 35191
              length: 243
          children: []
          pos: 35134
          length: 300
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: ceiling
              children: []
              pos: 36331
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object date
                children: []
                pos: 36339
                length: 11
              pos: 36312
              length: 493
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 36377
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 36385
                            length: 4
                        children: []
                        pos: 36377
                        length: 12
                    children: []
                    pos: 36376
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 36405
                    length: 64
                  pos: 36391
                  length: 88
                pos: 36373
                length: 106
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: date instanceof Date
                        children: []
                        pos: 36492
                        length: 20
                    children: []
                    pos: 36491
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return ceiling((Date) date, field);
                    children: []
                    pos: 36528
                    length: 35
                  pos: 36514
                  length: 59
                pos: 36488
                length: 311
              pos: 36363
              length: 442
          children: []
          pos: 36312
          length: 493
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: modify
              children: []
              pos: 37173
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar val
                children: []
                pos: 37180
                length: 12
              pos: 37153
              length: 6070
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: val.get(Calendar.YEAR)
                            children: []
                            pos: 37232
                            length: 22
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '280000000'
                            children: []
                            pos: 37257
                            length: 9
                        children: []
                        pos: 37232
                        length: 34
                    children: []
                    pos: 37231
                    length: 36
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new ArithmeticException("Calendar value too large
                        for accurate calculations");
                    children: []
                    pos: 37282
                    length: 84
                  pos: 37268
                  length: 108
                pos: 37228
                length: 148
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: field
                            children: []
                            pos: 37398
                            length: 5
                          right:
                            type: field_access
                            fields:
                              text: Calendar.MILLISECOND
                            children: []
                            pos: 37407
                            length: 20
                        children: []
                        pos: 37398
                        length: 29
                    children: []
                    pos: 37397
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 37443
                    length: 7
                  pos: 37429
                  length: 31
                pos: 37394
                length: 66
              - type: local_variable_declaration
                fields:
                  text: Date date = val.getTime();
                children: []
                pos: 37743
                length: 26
              - type: local_variable_declaration
                fields:
                  text: long time = date.getTime();
                children: []
                pos: 37778
                length: 27
              - type: local_variable_declaration
                fields:
                  text: boolean done = false;
                children: []
                pos: 37814
                length: 21
              - type: local_variable_declaration
                fields:
                  text: int millisecs = val.get(Calendar.MILLISECOND);
                children: []
                pos: 37878
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: MODIFY_TRUNCATE
                                children: []
                                pos: 37937
                                length: 15
                              right:
                                type: identifier
                                fields:
                                  text: modType
                                children: []
                                pos: 37956
                                length: 7
                            children: []
                            pos: 37937
                            length: 26
                          right:
                            type: less_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: millisecs
                                children: []
                                pos: 37967
                                length: 9
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '500'
                                children: []
                                pos: 37979
                                length: 3
                            children: []
                            pos: 37967
                            length: 15
                        children: []
                        pos: 37937
                        length: 45
                    children: []
                    pos: 37936
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: time = time - millisecs;
                    children: []
                    pos: 37998
                    length: 24
                  pos: 37984
                  length: 48
                pos: 37933
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: field
                            children: []
                            pos: 38045
                            length: 5
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SECOND
                            children: []
                            pos: 38054
                            length: 15
                        children: []
                        pos: 38045
                        length: 24
                    children: []
                    pos: 38044
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: done = true;
                    children: []
                    pos: 38085
                    length: 12
                  pos: 38071
                  length: 36
                pos: 38041
                length: 66
              - type: local_variable_declaration
                fields:
                  text: int seconds = val.get(Calendar.SECOND);
                children: []
                pos: 38145
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!done"
                            children: []
                            pos: 38197
                            length: 5
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: MODIFY_TRUNCATE
                                        children: []
                                        pos: 38207
                                        length: 15
                                      right:
                                        type: identifier
                                        fields:
                                          text: modType
                                        children: []
                                        pos: 38226
                                        length: 7
                                    children: []
                                    pos: 38207
                                    length: 26
                                  right:
                                    type: less_than
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: seconds
                                        children: []
                                        pos: 38237
                                        length: 7
                                      right:
                                        type: decimal_integer_literal
                                        fields:
                                          text: '30'
                                        children: []
                                        pos: 38247
                                        length: 2
                                    children: []
                                    pos: 38237
                                    length: 12
                                children: []
                                pos: 38207
                                length: 42
                            children: []
                            pos: 38206
                            length: 44
                        children: []
                        pos: 38197
                        length: 53
                    children: []
                    pos: 38196
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: time = time - (seconds * 1000L);
                    children: []
                    pos: 38266
                    length: 32
                  pos: 38252
                  length: 56
                pos: 38193
                length: 115
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: field
                            children: []
                            pos: 38321
                            length: 5
                          right:
                            type: field_access
                            fields:
                              text: Calendar.MINUTE
                            children: []
                            pos: 38330
                            length: 15
                        children: []
                        pos: 38321
                        length: 24
                    children: []
                    pos: 38320
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: done = true;
                    children: []
                    pos: 38361
                    length: 12
                  pos: 38347
                  length: 36
                pos: 38317
                length: 66
              - type: local_variable_declaration
                fields:
                  text: int minutes = val.get(Calendar.MINUTE);
                children: []
                pos: 38421
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: "!done"
                            children: []
                            pos: 38473
                            length: 5
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: or
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: MODIFY_TRUNCATE
                                        children: []
                                        pos: 38483
                                        length: 15
                                      right:
                                        type: identifier
                                        fields:
                                          text: modType
                                        children: []
                                        pos: 38502
                                        length: 7
                                    children: []
                                    pos: 38483
                                    length: 26
                                  right:
                                    type: less_than
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: minutes
                                        children: []
                                        pos: 38513
                                        length: 7
                                      right:
                                        type: decimal_integer_literal
                                        fields:
                                          text: '30'
                                        children: []
                                        pos: 38523
                                        length: 2
                                    children: []
                                    pos: 38513
                                    length: 12
                                children: []
                                pos: 38483
                                length: 42
                            children: []
                            pos: 38482
                            length: 44
                        children: []
                        pos: 38473
                        length: 53
                    children: []
                    pos: 38472
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: time = time - (minutes * 60000L);
                    children: []
                    pos: 38542
                    length: 33
                  pos: 38528
                  length: 57
                pos: 38469
                length: 116
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: date.getTime()
                            children: []
                            pos: 38621
                            length: 14
                          right:
                            type: identifier
                            fields:
                              text: time
                            children: []
                            pos: 38639
                            length: 4
                        children: []
                        pos: 38621
                        length: 22
                    children: []
                    pos: 38620
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: date.setTime(time);
                    children: []
                    pos: 38659
                    length: 19
                  - type: expression_statement
                    fields:
                      text: val.setTime(date);
                    children: []
                    pos: 38691
                    length: 18
                  pos: 38645
                  length: 74
                pos: 38617
                length: 102
              - type: local_variable_declaration
                fields:
                  text: boolean roundUp = false;
                children: []
                pos: 38819
                length: 24
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < fields.length; i++) {
                                for (int j = 0; j < fields[i].length; j++) {
                                    if (fields[i][j] == field) {
                                        //This is our field... we stop looping
                                        if (modType == MODIFY_CEILING || (modType == MODIFY_ROUND && roundUp)) {
                                            if (field == DateUtils.SEMI_MONTH) {
                                                //This is a special case that's hard to generalize
                                                //If the date is 1, we round up to 16, otherwise
                                                //  we subtract 15 days and add 1 month
                                                if (val.get(Calendar.DATE) == 1) {
                                                    val.add(Calendar.DATE, 15);
                                                } else {
                                                    val.add(Calendar.DATE, -15);
                                                    val.add(Calendar.MONTH, 1);
                                                }
                    // ----------------- Fix for LANG-440 ---------------------- START ---------------
                                            } else if (field == Calendar.AM_PM) {
                                                // This is a special case
                                                // If the time is 0, we round up to 12, otherwise
                                                //  we subtract 12 hours and add 1 day
                                                if (val.get(Calendar.HOUR_OF_DAY) == 0) {
                                                    val.add(Calendar.HOUR_OF_DAY, 12);
                                                } else {
                                                    val.add(Calendar.HOUR_OF_DAY, -12);
                                                    val.add(Calendar.DATE, 1);
                                                }
                    // ----------------- Fix for LANG-440 ---------------------- END ---------------
                                            } else {
                                                //We need at add one to this field since the
                                                //  last number causes us to round up
                                                val.add(fields[i][0], 1);
                                            }
                                        }
                                        return;
                                    }
                                }
                                //We have various fields that are not easy roundings
                                int offset = 0;
                                boolean offsetSet = false;
                                //These are special types of fields that require different rounding rules
                                switch (field) {
                                    case DateUtils.SEMI_MONTH:
                                        if (fields[i][0] == Calendar.DATE) {
                                            //If we're going to drop the DATE field's value,
                                            //  we want to do this our own way.
                                            //We need to subtrace 1 since the date has a minimum of 1
                                            offset = val.get(Calendar.DATE) - 1;
                                            //If we're above 15 days adjustment, that means we're in the
                                            //  bottom half of the month and should stay accordingly.
                                            if (offset >= 15) {
                                                offset -= 15;
                                            }
                                            //Record whether we're in the top or bottom half of that range
                                            roundUp = offset > 7;
                                            offsetSet = true;
                                        }
                                        break;
                                    case Calendar.AM_PM:
                                        if (fields[i][0] == Calendar.HOUR_OF_DAY) {
                                            //If we're going to drop the HOUR field's value,
                                            //  we want to do this our own way.
                                            offset = val.get(Calendar.HOUR_OF_DAY);
                                            if (offset >= 12) {
                                                offset -= 12;
                                            }
                                            roundUp = offset >= 6;
                                            offsetSet = true;
                                        }
                                        break;
                                }
                                if (!offsetSet) {
                                    int min = val.getActualMinimum(fields[i][0]);
                                    int max = val.getActualMaximum(fields[i][0]);
                                    //Calculate the offset from the minimum allowed value
                                    offset = val.get(fields[i][0]) - min;
                                    //Set roundUp if this is more than half way between the minimum and maximum
                                    roundUp = offset > ((max - min) / 2);
                                }
                                //We need to remove this field
                                if (offset != 0) {
                                    val.set(fields[i][0], val.get(fields[i][0]) - offset);
                                }
                            }
                children: []
                pos: 38852
                length: 4276
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("The field " + field +
                    " is not supported");
                children: []
                pos: 43137
                length: 79
              pos: 37218
              length: 6005
          children: []
          pos: 37153
          length: 6070
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 44553
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date focus
                children: []
                pos: 44562
                length: 10
              pos: 44520
              length: 313
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: focus
                            children: []
                            pos: 44604
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 44613
                            length: 4
                        children: []
                        pos: 44604
                        length: 13
                    children: []
                    pos: 44603
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 44633
                    length: 64
                  pos: 44619
                  length: 88
                pos: 44600
                length: 107
              - type: local_variable_declaration
                fields:
                  text: Calendar gval = Calendar.getInstance();
                children: []
                pos: 44716
                length: 39
              - type: expression_statement
                fields:
                  text: gval.setTime(focus);
                children: []
                pos: 44764
                length: 20
              - type: return_statement
                fields:
                  text: return iterator(gval, rangeStyle);
                children: []
                pos: 44793
                length: 34
              pos: 44590
              length: 243
          children: []
          pos: 44520
          length: 313
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 46034
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar focus
                children: []
                pos: 46043
                length: 14
              pos: 46001
              length: 2874
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: focus
                            children: []
                            pos: 46089
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 46098
                            length: 4
                        children: []
                        pos: 46089
                        length: 13
                    children: []
                    pos: 46088
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 46118
                    length: 64
                  pos: 46104
                  length: 88
                pos: 46085
                length: 107
              - type: local_variable_declaration
                fields:
                  text: Calendar start = null;
                children: []
                pos: 46201
                length: 22
              - type: local_variable_declaration
                fields:
                  text: Calendar end = null;
                children: []
                pos: 46232
                length: 20
              - type: local_variable_declaration
                fields:
                  text: int startCutoff = Calendar.SUNDAY;
                children: []
                pos: 46261
                length: 34
              - type: local_variable_declaration
                fields:
                  text: int endCutoff = Calendar.SATURDAY;
                children: []
                pos: 46304
                length: 34
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: rangeStyle
                        children: []
                        pos: 46355
                        length: 10
                    children: []
                    pos: 46354
                    length: 12
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case RANGE_MONTH_SUNDAY:
                                    case RANGE_MONTH_MONDAY:
                                        //Set start to the first of the month
                                        start = truncate(focus, Calendar.MONTH);
                                        //Set end to the last of the month
                                        end = (Calendar) start.clone();
                                        end.add(Calendar.MONTH, 1);
                                        end.add(Calendar.DATE, -1);
                                        //Loop start back to the previous sunday or monday
                                        if (rangeStyle == RANGE_MONTH_MONDAY) {
                                            startCutoff = Calendar.MONDAY;
                                            endCutoff = Calendar.SUNDAY;
                                        }
                                        break;
                                    case RANGE_WEEK_SUNDAY:
                                    case RANGE_WEEK_MONDAY:
                                    case RANGE_WEEK_RELATIVE:
                                    case RANGE_WEEK_CENTER:
                                        //Set start and end to the current date
                                        start = truncate(focus, Calendar.DATE);
                                        end = truncate(focus, Calendar.DATE);
                                        switch (rangeStyle) {
                                            case RANGE_WEEK_SUNDAY:
                                                //already set by default
                                                break;
                                            case RANGE_WEEK_MONDAY:
                                                startCutoff = Calendar.MONDAY;
                                                endCutoff = Calendar.SUNDAY;
                                                break;
                                            case RANGE_WEEK_RELATIVE:
                                                startCutoff = focus.get(Calendar.DAY_OF_WEEK);
                                                endCutoff = startCutoff - 1;
                                                break;
                                            case RANGE_WEEK_CENTER:
                                                startCutoff = focus.get(Calendar.DAY_OF_WEEK) - 3;
                                                endCutoff = focus.get(Calendar.DAY_OF_WEEK) + 3;
                                                break;
                                        }
                                        break;
                                    default:
                                        throw new IllegalArgumentException("The range style " + rangeStyle + " is not valid.");
                                }
                    children: []
                    pos: 46367
                    length: 1894
                children: []
                pos: 46347
                length: 1914
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: startCutoff
                            children: []
                            pos: 48274
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SUNDAY
                            children: []
                            pos: 48288
                            length: 15
                        children: []
                        pos: 48274
                        length: 29
                    children: []
                    pos: 48273
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: startCutoff += 7;
                    children: []
                    pos: 48319
                    length: 17
                  pos: 48305
                  length: 41
                pos: 48270
                length: 76
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: startCutoff
                            children: []
                            pos: 48359
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SATURDAY
                            children: []
                            pos: 48373
                            length: 17
                        children: []
                        pos: 48359
                        length: 31
                    children: []
                    pos: 48358
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: startCutoff -= 7;
                    children: []
                    pos: 48406
                    length: 17
                  pos: 48392
                  length: 41
                pos: 48355
                length: 78
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: endCutoff
                            children: []
                            pos: 48446
                            length: 9
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SUNDAY
                            children: []
                            pos: 48458
                            length: 15
                        children: []
                        pos: 48446
                        length: 27
                    children: []
                    pos: 48445
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: endCutoff += 7;
                    children: []
                    pos: 48489
                    length: 15
                  pos: 48475
                  length: 39
                pos: 48442
                length: 72
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: endCutoff
                            children: []
                            pos: 48527
                            length: 9
                          right:
                            type: field_access
                            fields:
                              text: Calendar.SATURDAY
                            children: []
                            pos: 48539
                            length: 17
                        children: []
                        pos: 48527
                        length: 29
                    children: []
                    pos: 48526
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: endCutoff -= 7;
                    children: []
                    pos: 48572
                    length: 15
                  pos: 48558
                  length: 39
                pos: 48523
                length: 74
              - type: while_statement
                fields:
                  text: |-
                    while (start.get(Calendar.DAY_OF_WEEK) != startCutoff) {
                                start.add(Calendar.DATE, -1);
                            }
                children: []
                pos: 48606
                length: 108
              - type: while_statement
                fields:
                  text: |-
                    while (end.get(Calendar.DAY_OF_WEEK) != endCutoff) {
                                end.add(Calendar.DATE, 1);
                            }
                children: []
                pos: 48723
                length: 101
              - type: return_statement
                fields:
                  text: return new DateIterator(start, end);
                children: []
                pos: 48833
                length: 36
              pos: 46075
              length: 2800
          children: []
          pos: 46001
          length: 2874
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 49838
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object focus
                children: []
                pos: 49847
                length: 12
              pos: 49812
              length: 495
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: focus
                            children: []
                            pos: 49891
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 49900
                            length: 4
                        children: []
                        pos: 49891
                        length: 13
                    children: []
                    pos: 49890
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 49920
                    length: 64
                  pos: 49906
                  length: 88
                pos: 49887
                length: 107
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: focus instanceof Date
                        children: []
                        pos: 50007
                        length: 21
                    children: []
                    pos: 50006
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return iterator((Date) focus, rangeStyle);
                    children: []
                    pos: 50044
                    length: 42
                  pos: 50030
                  length: 66
                pos: 50003
                length: 298
              pos: 49877
              length: 430
          children: []
          pos: 49812
          length: 495
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMilliseconds
              children: []
              pos: 52098
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 52124
                length: 9
              pos: 52079
              length: 147
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.MILLISECOND);
                children: []
                pos: 52159
                length: 57
              pos: 52149
              length: 77
          children: []
          pos: 52079
          length: 147
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInSeconds
              children: []
              pos: 54093
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 54114
                length: 9
              pos: 54074
              length: 133
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.SECOND);
                children: []
                pos: 54149
                length: 52
              pos: 54139
              length: 68
          children: []
          pos: 54074
          length: 133
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMinutes
              children: []
              pos: 56127
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 56148
                length: 9
              pos: 56108
              length: 133
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.MINUTE);
                children: []
                pos: 56183
                length: 52
              pos: 56173
              length: 68
          children: []
          pos: 56108
          length: 133
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInHours
              children: []
              pos: 58122
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 58141
                length: 9
              pos: 58103
              length: 136
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.HOUR_OF_DAY);
                children: []
                pos: 58176
                length: 57
              pos: 58166
              length: 73
          children: []
          pos: 58103
          length: 136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInDays
              children: []
              pos: 60034
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 60052
                length: 9
              pos: 60015
              length: 135
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(date, fragment, Calendar.DAY_OF_YEAR);
                children: []
                pos: 60087
                length: 57
              pos: 60077
              length: 73
          children: []
          pos: 60015
          length: 135
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMilliseconds
              children: []
              pos: 62074
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 62100
                length: 17
              pos: 62055
              length: 149
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.MILLISECOND);
                children: []
                pos: 62139
                length: 61
              pos: 62133
              length: 71
          children: []
          pos: 62055
          length: 149
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInSeconds
              children: []
              pos: 64081
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 64102
                length: 17
              pos: 64062
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.SECOND);
                children: []
                pos: 64145
                length: 56
              pos: 64135
              length: 72
          children: []
          pos: 64062
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInMinutes
              children: []
              pos: 66143
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 66164
                length: 17
              pos: 66124
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.MINUTE);
                children: []
                pos: 66207
                length: 56
              pos: 66197
              length: 72
          children: []
          pos: 66124
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInHours
              children: []
              pos: 68180
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 68199
                length: 17
              pos: 68161
              length: 148
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.HOUR_OF_DAY);
                children: []
                pos: 68242
                length: 61
              pos: 68232
              length: 77
          children: []
          pos: 68161
          length: 148
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragmentInDays
              children: []
              pos: 70256
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 70274
                length: 17
              pos: 70237
              length: 147
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, Calendar.DAY_OF_YEAR);
                children: []
                pos: 70317
                length: 61
              pos: 70307
              length: 77
          children: []
          pos: 70237
          length: 147
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragment
              children: []
              pos: 70858
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 70870
                length: 9
              pos: 70838
              length: 327
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: date
                            children: []
                            pos: 70918
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 70926
                            length: 4
                        children: []
                        pos: 70918
                        length: 12
                    children: []
                    pos: 70917
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw  new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 70946
                    length: 65
                  pos: 70932
                  length: 89
                pos: 70915
                length: 106
              - type: local_variable_declaration
                fields:
                  text: Calendar calendar = Calendar.getInstance();
                children: []
                pos: 71030
                length: 43
              - type: expression_statement
                fields:
                  text: calendar.setTime(date);
                children: []
                pos: 71082
                length: 23
              - type: return_statement
                fields:
                  text: return getFragment(calendar, fragment, unit);
                children: []
                pos: 71114
                length: 45
              pos: 70905
              length: 260
          children: []
          pos: 70838
          length: 327
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFragment
              children: []
              pos: 71655
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar calendar
                children: []
                pos: 71667
                length: 17
              pos: 71635
              length: 1791
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: calendar
                            children: []
                            pos: 71723
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 71735
                            length: 4
                        children: []
                        pos: 71723
                        length: 16
                    children: []
                    pos: 71722
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw  new IllegalArgumentException("The date must not
                        be null");
                    children: []
                    pos: 71755
                    length: 65
                  pos: 71741
                  length: 90
                pos: 71720
                length: 111
              - type: local_variable_declaration
                fields:
                  text: long millisPerUnit = getMillisPerUnit(unit);
                children: []
                pos: 71840
                length: 44
              - type: local_variable_declaration
                fields:
                  text: long result = 0;
                children: []
                pos: 71893
                length: 16
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: fragment
                        children: []
                        pos: 72002
                        length: 8
                    children: []
                    pos: 72001
                    length: 10
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case Calendar.YEAR:
                                        result += (calendar.get(Calendar.DAY_OF_YEAR) * MILLIS_PER_DAY) / millisPerUnit;
                                        break;
                                    case Calendar.MONTH:
                                        result += (calendar.get(Calendar.DAY_OF_MONTH) * MILLIS_PER_DAY) / millisPerUnit;
                                        break;
                                }
                    children: []
                    pos: 72012
                    length: 317
                children: []
                pos: 71994
                length: 335
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: fragment
                        children: []
                        pos: 72347
                        length: 8
                    children: []
                    pos: 72346
                    length: 10
                  body:
                    type: switch_block
                    fields:
                      text: "{\n            // Number of days already calculated for
                        these cases\n            case Calendar.YEAR:\n            case
                        Calendar.MONTH:\n            \n            // The rest of
                        the valid cases\n            case Calendar.DAY_OF_YEAR:\n
                        \           case Calendar.DATE:\n                result +=
                        (calendar.get(Calendar.HOUR_OF_DAY) * MILLIS_PER_HOUR) / millisPerUnit;\n
                        \               //$FALL-THROUGH$\n            case Calendar.HOUR_OF_DAY:\n
                        \               result += (calendar.get(Calendar.MINUTE) *
                        MILLIS_PER_MINUTE) / millisPerUnit;\n                //$FALL-THROUGH$\n
                        \           case Calendar.MINUTE:\n                result
                        += (calendar.get(Calendar.SECOND) * MILLIS_PER_SECOND) / millisPerUnit;\n
                        \               //$FALL-THROUGH$\n            case Calendar.SECOND:\n
                        \               result += (calendar.get(Calendar.MILLISECOND)
                        * 1) / millisPerUnit;\n                break;\n            case
                        Calendar.MILLISECOND: break;//never useful\n                default:
                        throw new IllegalArgumentException(\"The fragment \" + fragment
                        + \" is not supported\");\n        }"
                    children: []
                    pos: 72357
                    length: 1040
                children: []
                pos: 72339
                length: 1058
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 73406
                length: 14
              pos: 71710
              length: 1716
          children: []
          pos: 71635
          length: 1791
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedEquals
              children: []
              pos: 74022
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 74038
                length: 13
              pos: 74000
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return truncatedCompareTo(cal1, cal2, field) == 0;
                children: []
                pos: 74089
                length: 50
              pos: 74079
              length: 66
          children: []
          pos: 74000
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedEquals
              children: []
              pos: 74731
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 74747
                length: 10
              pos: 74709
              length: 141
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return truncatedCompareTo(date1, date2, field) == 0;
                children: []
                pos: 74792
                length: 52
              pos: 74782
              length: 68
          children: []
          pos: 74709
          length: 141
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedCompareTo
              children: []
              pos: 75513
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Calendar cal1
                children: []
                pos: 75532
                length: 13
              pos: 75495
              length: 252
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Calendar truncatedCal1 = truncate(cal1, field);
                children: []
                pos: 75583
                length: 47
              - type: local_variable_declaration
                fields:
                  text: Calendar truncatedCal2 = truncate(cal2, field);
                children: []
                pos: 75639
                length: 47
              - type: return_statement
                fields:
                  text: return truncatedCal1.compareTo(truncatedCal2);
                children: []
                pos: 75695
                length: 46
              pos: 75573
              length: 174
          children: []
          pos: 75495
          length: 252
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: truncatedCompareTo
              children: []
              pos: 76396
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date1
                children: []
                pos: 76415
                length: 10
              pos: 76378
              length: 244
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Date truncatedDate1 = truncate(date1, field);
                children: []
                pos: 76460
                length: 45
              - type: local_variable_declaration
                fields:
                  text: Date truncatedDate2 = truncate(date2, field);
                children: []
                pos: 76514
                length: 45
              - type: return_statement
                fields:
                  text: return truncatedDate1.compareTo(truncatedDate2);
                children: []
                pos: 76568
                length: 48
              pos: 76450
              length: 172
          children: []
          pos: 76378
          length: 244
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMillisPerUnit
              children: []
              pos: 76966
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int unit
                children: []
                pos: 76983
                length: 8
              pos: 76946
              length: 800
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: long result = Long.MAX_VALUE;
                children: []
                pos: 77003
                length: 29
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: unit
                        children: []
                        pos: 77049
                        length: 4
                    children: []
                    pos: 77048
                    length: 6
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case Calendar.DAY_OF_YEAR:
                                    case Calendar.DATE:
                                        result = MILLIS_PER_DAY;
                                        break;
                                    case Calendar.HOUR_OF_DAY:
                                        result = MILLIS_PER_HOUR;
                                        break;
                                    case Calendar.MINUTE:
                                        result = MILLIS_PER_MINUTE;
                                        break;
                                    case Calendar.SECOND:
                                        result = MILLIS_PER_SECOND;
                                        break;
                                    case Calendar.MILLISECOND:
                                        result = 1;
                                        break;
                                    default: throw new IllegalArgumentException("The unit " + unit + " cannot be represented is milleseconds");
                                }
                    children: []
                    pos: 77055
                    length: 662
                children: []
                pos: 77041
                length: 676
              - type: return_statement
                fields:
                  text: return result;
                children: []
                pos: 77726
                length: 14
              pos: 76993
              length: 753
          children: []
          pos: 76946
          length: 800
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DateIterator
              children: []
              pos: 77810
              length: 12
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Calendar endFinal;
                children: []
                pos: 77863
                length: 32
              - type: field_declaration
                fields:
                  text: private final Calendar spot;
                children: []
                pos: 77904
                length: 28
              - type: constructor_declaration
                fields:
                  text: |-
                    DateIterator(Calendar startFinal, Calendar endFinal) {
                                super();
                                this.endFinal = endFinal;
                                spot = startFinal;
                                spot.add(Calendar.DATE, -1);
                            }
                children: []
                pos: 78165
                length: 195
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: hasNext
                    children: []
                    pos: 78561
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 78546
                    length: 78
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return spot.before(endFinal);
                      children: []
                      pos: 78585
                      length: 29
                    pos: 78571
                    length: 53
                children: []
                pos: 78546
                length: 78
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: next
                    children: []
                    pos: 78791
                    length: 4
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 78775
                    length: 225
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: spot.equals(endFinal)
                              children: []
                              pos: 78816
                              length: 21
                          children: []
                          pos: 78815
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: throw_statement
                          fields:
                            text: throw new NoSuchElementException();
                          children: []
                          pos: 78857
                          length: 35
                        pos: 78839
                        length: 67
                      pos: 78812
                      length: 94
                    - type: expression_statement
                      fields:
                        text: spot.add(Calendar.DATE, 1);
                      children: []
                      pos: 78919
                      length: 27
                    - type: return_statement
                      fields:
                        text: return (Calendar) spot.clone();
                      children: []
                      pos: 78959
                      length: 31
                    pos: 78798
                    length: 202
                children: []
                pos: 78775
                length: 225
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: remove
                    children: []
                    pos: 79207
                    length: 6
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 79195
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: throw_statement
                      fields:
                        text: throw new UnsupportedOperationException();
                      children: []
                      pos: 79230
                      length: 42
                    pos: 79216
                    length: 66
                children: []
                pos: 79195
                length: 87
              pos: 77797
              length: 1491
          children: []
          pos: 77797
          length: 1491
        pos: 2196
        length: 77099
    children: []
    pos: 2196
    length: 77099
  pos: 0
  length: 79296
text_diff: |
  --- before
  +++ after
  @@ -262,7 +262,7 @@
           return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                   cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                   cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
  -                cal1.get(Calendar.HOUR_OF_DAY) == cal2.get(Calendar.HOUR_OF_DAY) &&
  +                cal1.get(Calendar.HOUR) == cal2.get(Calendar.HOUR) &&
                   cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                   cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                   cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
tree_diff: |+
  New cluster:
  UPDATE from return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                  cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                  cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                  cal1.get(Calendar.HOUR_OF_DAY) == cal2.get(Calendar.HOUR_OF_DAY) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                  cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                  cal1.getClass() == cal2.getClass()); to return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                  cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                  cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                  cal1.get(Calendar.HOUR) == cal2.get(Calendar.HOUR) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                  cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                  cal1.getClass() == cal2.getClass());
  ------------
  ===
  update-node
  ---
  return_statement: return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                  cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                  cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                  cal1.get(Calendar.HOUR_OF_DAY) == cal2.get(Calendar.HOUR_OF_DAY) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                  cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                  cal1.getClass() == cal2.getClass()); [9423,10005]
  replace return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                  cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                  cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                  cal1.get(Calendar.HOUR_OF_DAY) == cal2.get(Calendar.HOUR_OF_DAY) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                  cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                  cal1.getClass() == cal2.getClass()); by return (cal1.get(Calendar.MILLISECOND) == cal2.get(Calendar.MILLISECOND) &&
                  cal1.get(Calendar.SECOND) == cal2.get(Calendar.SECOND) &&
                  cal1.get(Calendar.MINUTE) == cal2.get(Calendar.MINUTE) &&
                  cal1.get(Calendar.HOUR) == cal2.get(Calendar.HOUR) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &&
                  cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.ERA) == cal2.get(Calendar.ERA) &&
                  cal1.getClass() == cal2.getClass());

...
