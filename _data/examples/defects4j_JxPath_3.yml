---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: NullPropertyPointer
        children: []
        pos: 1257
        length: 19
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private String propertyName = "*";
          children: []
          pos: 1308
          length: 34
        - type: field_declaration
          fields:
            text: private boolean byNameAttribute = false;
          children: []
          pos: 1347
          length: 40
        - type: constructor_declaration
          fields:
            text: |-
              public NullPropertyPointer(NodePointer parent) {
                      super(parent);
                  }
          children: []
          pos: 1409
          length: 77
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getName
              children: []
              pos: 1505
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1492
              length: 70
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new QName(propertyName);
                children: []
                pos: 1525
                length: 31
              pos: 1515
              length: 47
          children: []
          pos: 1492
          length: 70
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setPropertyIndex
              children: []
              pos: 1580
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int index
                children: []
                pos: 1597
                length: 9
              pos: 1568
              length: 47
            body:
              type: block
              fields: {}
              children: []
              pos: 1608
              length: 7
          children: []
          pos: 1568
          length: 47
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLength
              children: []
              pos: 1632
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1621
              length: 48
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 0;
                children: []
                pos: 1654
                length: 9
              pos: 1644
              length: 25
          children: []
          pos: 1621
          length: 48
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBaseValue
              children: []
              pos: 1689
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1675
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 1714
                length: 12
              pos: 1704
              length: 28
          children: []
          pos: 1675
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateNode
              children: []
              pos: 1752
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1738
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 1781
                length: 12
              pos: 1771
              length: 28
          children: []
          pos: 1738
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLeaf
              children: []
              pos: 1820
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1805
              length: 52
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 1839
                length: 12
              pos: 1829
              length: 28
          children: []
          pos: 1805
          length: 52
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValuePointer
              children: []
              pos: 1886
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1867
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new NullPointer(this,  new QName(getPropertyName()));
                children: []
                pos: 1914
                length: 60
              pos: 1904
              length: 76
          children: []
          pos: 1867
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActualProperty
              children: []
              pos: 2004
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1986
              length: 66
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 2033
                length: 13
              pos: 2023
              length: 29
          children: []
          pos: 1986
          length: 66
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActual
              children: []
              pos: 2073
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2058
              length: 55
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 2094
                length: 13
              pos: 2084
              length: 29
          children: []
          pos: 2058
          length: 55
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContainer
              children: []
              pos: 2134
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2119
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 2158
                length: 12
              pos: 2148
              length: 28
          children: []
          pos: 2119
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setValue
              children: []
              pos: 2194
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object value
                children: []
                pos: 2203
                length: 12
              pos: 2182
              length: 1009
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 2231
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 2241
                                length: 4
                            children: []
                            pos: 2231
                            length: 14
                          right:
                            type: method_invocation
                            fields:
                              text: parent.isContainer()
                            children: []
                            pos: 2249
                            length: 20
                        children: []
                        pos: 2231
                        length: 38
                    children: []
                    pos: 2230
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new JXPathInvalidAccessException(
                                        "Cannot set property "
                                            + asPath()
                                            + ", the target object is null");
                    children: []
                    pos: 2285
                    length: 163
                  pos: 2271
                  length: 187
                pos: 2227
                length: 958
              pos: 2217
              length: 974
          children: []
          pos: 2182
          length: 1009
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 3216
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 3227
                length: 21
              pos: 3197
              length: 1579
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer newParent = parent.createPath(context);
                children: []
                pos: 3260
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: isAttribute()
                        children: []
                        pos: 3324
                        length: 13
                    children: []
                    pos: 3323
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return newParent.createAttribute(context, getName());
                    children: []
                    pos: 3353
                    length: 53
                  pos: 3339
                  length: 77
                pos: 3320
                length: 1450
              pos: 3250
              length: 1526
          children: []
          pos: 3197
          length: 1579
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 4801
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 4812
                length: 21
              pos: 4782
              length: 788
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer newParent = parent.createPath(context);
                children: []
                pos: 4859
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: isAttribute()
                        children: []
                        pos: 4923
                        length: 13
                    children: []
                    pos: 4922
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: NodePointer pointer = newParent.createAttribute(context,
                        getName());
                    children: []
                    pos: 4952
                    length: 68
                  - type: expression_statement
                    fields:
                      text: pointer.setValue(value);
                    children: []
                    pos: 5033
                    length: 24
                  - type: return_statement
                    fields:
                      text: return pointer;
                    children: []
                    pos: 5070
                    length: 15
                  pos: 4938
                  length: 157
                pos: 4919
                length: 645
              pos: 4849
              length: 721
          children: []
          pos: 4782
          length: 788
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 5599
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 5624
                length: 21
              pos: 5580
              length: 196
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return createPath(context).createChild(context, name, index);
                children: []
                pos: 5709
                length: 61
              pos: 5699
              length: 77
          children: []
          pos: 5580
          length: 196
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 5809
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 5834
                length: 21
              pos: 5790
              length: 230
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return createPath(context).createChild(context, name, index,
                    value);
                children: []
                pos: 5946
                length: 68
              pos: 5936
              length: 84
          children: []
          pos: 5790
          length: 230
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPropertyName
              children: []
              pos: 6040
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6026
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return propertyName;
                children: []
                pos: 6068
                length: 20
              pos: 6058
              length: 36
          children: []
          pos: 6026
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setPropertyName
              children: []
              pos: 6112
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String propertyName
                children: []
                pos: 6128
                length: 19
              pos: 6100
              length: 98
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.propertyName = propertyName;
                children: []
                pos: 6159
                length: 33
              pos: 6149
              length: 49
          children: []
          pos: 6100
          length: 98
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setNameAttributeValue
              children: []
              pos: 6216
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String attributeValue
                children: []
                pos: 6238
                length: 21
              pos: 6204
              length: 140
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.propertyName = attributeValue;
                children: []
                pos: 6271
                length: 35
              - type: expression_statement
                fields:
                  text: byNameAttribute = true;
                children: []
                pos: 6315
                length: 23
              pos: 6261
              length: 83
          children: []
          pos: 6204
          length: 140
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCollection
              children: []
              pos: 6365
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6350
              length: 84
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getIndex() != WHOLE_COLLECTION;
                children: []
                pos: 6390
                length: 38
              pos: 6380
              length: 54
          children: []
          pos: 6350
          length: 84
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPropertyCount
              children: []
              pos: 6451
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6440
              length: 55
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 0;
                children: []
                pos: 6480
                length: 9
              pos: 6470
              length: 25
          children: []
          pos: 6440
          length: 55
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPropertyNames
              children: []
              pos: 6517
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6501
              length: 72
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new String[0];
                children: []
                pos: 6546
                length: 21
              pos: 6536
              length: 37
          children: []
          pos: 6501
          length: 72
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asPath
              children: []
              pos: 6593
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6579
              length: 540
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!byNameAttribute"
                        children: []
                        pos: 6616
                        length: 16
                    children: []
                    pos: 6615
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.asPath();
                    children: []
                    pos: 6648
                    length: 22
                  pos: 6634
                  length: 46
                pos: 6612
                length: 501
              pos: 6602
              length: 517
          children: []
          pos: 6579
          length: 540
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: escape
              children: []
              pos: 7140
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String string
                children: []
                pos: 7147
                length: 13
              pos: 7125
              length: 603
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int index = string.indexOf('\'');
                children: []
                pos: 7172
                length: 33
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&apos;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\'');
                            }
                children: []
                pos: 7214
                length: 219
              - type: expression_statement
                fields:
                  text: index = string.indexOf('\"');
                children: []
                pos: 7442
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&quot;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\"');
                            }
                children: []
                pos: 7480
                length: 219
              - type: return_statement
                fields:
                  text: return string;
                children: []
                pos: 7708
                length: 14
              pos: 7162
              length: 566
          children: []
          pos: 7125
          length: 603
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createBadFactoryException
              children: []
              pos: 7773
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: AbstractFactory factory
                children: []
                pos: 7799
                length: 23
              pos: 7734
              length: 327
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return new JXPathAbstractFactoryException("Factory " + factory
                                    + " reported success creating object for path: " + asPath()
                                    + " but object was null.  Terminating to avoid stack recursion.");
                children: []
                pos: 7834
                length: 221
              pos: 7824
              length: 237
          children: []
          pos: 7734
          length: 327
        pos: 1244
        length: 6819
    children: []
    pos: 1244
    length: 6819
  pos: 0
  length: 8063
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: NullPropertyPointer
        children: []
        pos: 1142
        length: 19
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private String propertyName = "*";
          children: []
          pos: 1193
          length: 34
        - type: field_declaration
          fields:
            text: private boolean byNameAttribute = false;
          children: []
          pos: 1232
          length: 40
        - type: constructor_declaration
          fields:
            text: |-
              public NullPropertyPointer(NodePointer parent) {
                      super(parent);
                  }
          children: []
          pos: 1294
          length: 77
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getName
              children: []
              pos: 1390
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1377
              length: 70
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new QName(propertyName);
                children: []
                pos: 1410
                length: 31
              pos: 1400
              length: 47
          children: []
          pos: 1377
          length: 70
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setPropertyIndex
              children: []
              pos: 1465
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int index
                children: []
                pos: 1482
                length: 9
              pos: 1453
              length: 47
            body:
              type: block
              fields: {}
              children: []
              pos: 1493
              length: 7
          children: []
          pos: 1453
          length: 47
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLength
              children: []
              pos: 1517
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1506
              length: 48
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 0;
                children: []
                pos: 1539
                length: 9
              pos: 1529
              length: 25
          children: []
          pos: 1506
          length: 48
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBaseValue
              children: []
              pos: 1574
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1560
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 1599
                length: 12
              pos: 1589
              length: 28
          children: []
          pos: 1560
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateNode
              children: []
              pos: 1637
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1623
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 1666
                length: 12
              pos: 1656
              length: 28
          children: []
          pos: 1623
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLeaf
              children: []
              pos: 1705
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1690
              length: 52
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 1724
                length: 12
              pos: 1714
              length: 28
          children: []
          pos: 1690
          length: 52
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValuePointer
              children: []
              pos: 1771
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1752
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new NullPointer(this,  new QName(getPropertyName()));
                children: []
                pos: 1799
                length: 60
              pos: 1789
              length: 76
          children: []
          pos: 1752
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActualProperty
              children: []
              pos: 1889
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1871
              length: 66
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 1918
                length: 13
              pos: 1908
              length: 29
          children: []
          pos: 1871
          length: 66
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActual
              children: []
              pos: 1958
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1943
              length: 55
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 1979
                length: 13
              pos: 1969
              length: 29
          children: []
          pos: 1943
          length: 55
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContainer
              children: []
              pos: 2019
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2004
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 2043
                length: 12
              pos: 2033
              length: 28
          children: []
          pos: 2004
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setValue
              children: []
              pos: 2079
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object value
                children: []
                pos: 2088
                length: 12
              pos: 2067
              length: 1009
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parent
                                children: []
                                pos: 2116
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 2126
                                length: 4
                            children: []
                            pos: 2116
                            length: 14
                          right:
                            type: method_invocation
                            fields:
                              text: parent.isContainer()
                            children: []
                            pos: 2134
                            length: 20
                        children: []
                        pos: 2116
                        length: 38
                    children: []
                    pos: 2115
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new JXPathInvalidAccessException(
                                        "Cannot set property "
                                            + asPath()
                                            + ", the target object is null");
                    children: []
                    pos: 2170
                    length: 163
                  pos: 2156
                  length: 187
                pos: 2112
                length: 958
              pos: 2102
              length: 974
          children: []
          pos: 2067
          length: 1009
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 3101
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 3112
                length: 21
              pos: 3082
              length: 1417
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer newParent = parent.createPath(context);
                children: []
                pos: 3145
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: isAttribute()
                        children: []
                        pos: 3209
                        length: 13
                    children: []
                    pos: 3208
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return newParent.createAttribute(context, getName());
                    children: []
                    pos: 3238
                    length: 53
                  pos: 3224
                  length: 77
                pos: 3205
                length: 1288
              pos: 3135
              length: 1364
          children: []
          pos: 3082
          length: 1417
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createPath
              children: []
              pos: 4524
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 4535
                length: 21
              pos: 4505
              length: 626
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer newParent = parent.createPath(context);
                children: []
                pos: 4582
                length: 51
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: isAttribute()
                        children: []
                        pos: 4646
                        length: 13
                    children: []
                    pos: 4645
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: NodePointer pointer = newParent.createAttribute(context,
                        getName());
                    children: []
                    pos: 4675
                    length: 68
                  - type: expression_statement
                    fields:
                      text: pointer.setValue(value);
                    children: []
                    pos: 4756
                    length: 24
                  - type: return_statement
                    fields:
                      text: return pointer;
                    children: []
                    pos: 4793
                    length: 15
                  pos: 4661
                  length: 157
                pos: 4642
                length: 483
              pos: 4572
              length: 559
          children: []
          pos: 4505
          length: 626
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 5160
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 5185
                length: 21
              pos: 5141
              length: 196
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return createPath(context).createChild(context, name, index);
                children: []
                pos: 5270
                length: 61
              pos: 5260
              length: 77
          children: []
          pos: 5141
          length: 196
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 5370
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 5395
                length: 21
              pos: 5351
              length: 230
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return createPath(context).createChild(context, name, index,
                    value);
                children: []
                pos: 5507
                length: 68
              pos: 5497
              length: 84
          children: []
          pos: 5351
          length: 230
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPropertyName
              children: []
              pos: 5601
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5587
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return propertyName;
                children: []
                pos: 5629
                length: 20
              pos: 5619
              length: 36
          children: []
          pos: 5587
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setPropertyName
              children: []
              pos: 5673
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String propertyName
                children: []
                pos: 5689
                length: 19
              pos: 5661
              length: 98
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.propertyName = propertyName;
                children: []
                pos: 5720
                length: 33
              pos: 5710
              length: 49
          children: []
          pos: 5661
          length: 98
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setNameAttributeValue
              children: []
              pos: 5777
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String attributeValue
                children: []
                pos: 5799
                length: 21
              pos: 5765
              length: 140
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.propertyName = attributeValue;
                children: []
                pos: 5832
                length: 35
              - type: expression_statement
                fields:
                  text: byNameAttribute = true;
                children: []
                pos: 5876
                length: 23
              pos: 5822
              length: 83
          children: []
          pos: 5765
          length: 140
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCollection
              children: []
              pos: 5926
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5911
              length: 84
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getIndex() != WHOLE_COLLECTION;
                children: []
                pos: 5951
                length: 38
              pos: 5941
              length: 54
          children: []
          pos: 5911
          length: 84
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPropertyCount
              children: []
              pos: 6012
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6001
              length: 55
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 0;
                children: []
                pos: 6041
                length: 9
              pos: 6031
              length: 25
          children: []
          pos: 6001
          length: 55
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPropertyNames
              children: []
              pos: 6078
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6062
              length: 72
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new String[0];
                children: []
                pos: 6107
                length: 21
              pos: 6097
              length: 37
          children: []
          pos: 6062
          length: 72
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asPath
              children: []
              pos: 6154
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6140
              length: 540
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!byNameAttribute"
                        children: []
                        pos: 6177
                        length: 16
                    children: []
                    pos: 6176
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.asPath();
                    children: []
                    pos: 6209
                    length: 22
                  pos: 6195
                  length: 46
                pos: 6173
                length: 501
              pos: 6163
              length: 517
          children: []
          pos: 6140
          length: 540
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: escape
              children: []
              pos: 6701
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String string
                children: []
                pos: 6708
                length: 13
              pos: 6686
              length: 603
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int index = string.indexOf('\'');
                children: []
                pos: 6733
                length: 33
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&apos;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\'');
                            }
                children: []
                pos: 6775
                length: 219
              - type: expression_statement
                fields:
                  text: index = string.indexOf('\"');
                children: []
                pos: 7003
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&quot;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\"');
                            }
                children: []
                pos: 7041
                length: 219
              - type: return_statement
                fields:
                  text: return string;
                children: []
                pos: 7269
                length: 14
              pos: 6723
              length: 566
          children: []
          pos: 6686
          length: 603
        pos: 1129
        length: 6162
    children: []
    pos: 1129
    length: 6162
  pos: 0
  length: 7292
text_diff: "--- before\n+++ after\n@@ -16,8 +16,6 @@\n  */\n package org.apache.commons.jxpath.ri.model.beans;\n
  \n-import org.apache.commons.jxpath.AbstractFactory;\n-import org.apache.commons.jxpath.JXPathAbstractFactoryException;\n
  import org.apache.commons.jxpath.JXPathContext;\n import org.apache.commons.jxpath.JXPathInvalidAccessException;\n
  import org.apache.commons.jxpath.ri.QName;\n@@ -108,9 +106,6 @@\n             return
  newParent.createAttribute(context, getName());\n         }\n         else {\n-            if
  (parent instanceof NullPointer && parent.equals(newParent)) {\n-                throw
  createBadFactoryException(context.getFactory());\n-            }\n             //
  Consider these two use cases:\n             // 1. The parent pointer of NullPropertyPointer
  is \n             //    a PropertyOwnerPointer other than NullPointer. When we call
  \n@@ -140,9 +135,6 @@\n             return pointer;\n         }\n         else {\n-
  \           if (parent instanceof NullPointer && parent.equals(newParent)) {\n-
  \               throw createBadFactoryException(context.getFactory());\n-            }\n
  \            if (newParent instanceof PropertyOwnerPointer) {\n                 PropertyOwnerPointer
  pop = (PropertyOwnerPointer) newParent;\n                 newParent = pop.getPropertyPointer();\n@@
  -229,10 +221,4 @@\n         }\n         return string;\n     }\n-\n-    private
  JXPathAbstractFactoryException createBadFactoryException(AbstractFactory factory)
  {\n-        return new JXPathAbstractFactoryException(\"Factory \" + factory\n-
  \               + \" reported success creating object for path: \" + asPath()\n-
  \               + \" but object was null.  Terminating to avoid stack recursion.\");\n-
  \   }\n-}\n\\ No newline at end of file\n+}\n"
tree_diff: |+
  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  method_declaration [7734,8061]
      identifier: createBadFactoryException [7773,7798]
      method_parameters [7734,8061]
          formal_parameter: AbstractFactory factory [7799,7822]
      block [7824,8061]
          return_statement: return new JXPathAbstractFactoryException("Factory " + factory
                  + " reported success creating object for path: " + asPath()
                  + " but object was null.  Terminating to avoid stack recursion."); [7834,8055]

...
