---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: WriteableCommandLineImpl
        children: []
        pos: 1496
        length: 24
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final Map optionToProperties = new HashMap();
          children: []
          pos: 1587
          length: 53
        - type: field_declaration
          fields:
            text: private final List options = new ArrayList();
          children: []
          pos: 1707
          length: 45
        - type: field_declaration
          fields:
            text: private final Map nameToOption = new HashMap();
          children: []
          pos: 1757
          length: 47
        - type: field_declaration
          fields:
            text: private final Map values = new HashMap();
          children: []
          pos: 1809
          length: 41
        - type: field_declaration
          fields:
            text: private final Map switches = new HashMap();
          children: []
          pos: 1855
          length: 43
        - type: field_declaration
          fields:
            text: private final Map defaultValues = new HashMap();
          children: []
          pos: 1903
          length: 48
        - type: field_declaration
          fields:
            text: private final Map defaultSwitches = new HashMap();
          children: []
          pos: 1956
          length: 50
        - type: field_declaration
          fields:
            text: private final List normalised;
          children: []
          pos: 2011
          length: 30
        - type: field_declaration
          fields:
            text: private final Set prefixes;
          children: []
          pos: 2046
          length: 27
        - type: constructor_declaration
          fields:
            text: |-
              public WriteableCommandLineImpl(final Option rootOption,
                                                  final List arguments) {
                      this.prefixes = rootOption.getPrefixes();
                      this.normalised = arguments;
                  }
          children: []
          pos: 2338
          length: 209
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addOption
              children: []
              pos: 2565
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 2575
                length: 13
              pos: 2553
              length: 268
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: options.add(option);
                children: []
                pos: 2600
                length: 20
              - type: expression_statement
                fields:
                  text: nameToOption.put(option.getPreferredName(), option);
                children: []
                pos: 2629
                length: 52
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator i = option.getTriggers().iterator(); i.hasNext();) {
                                nameToOption.put(i.next(), option);
                            }
                children: []
                pos: 2691
                length: 124
              pos: 2590
              length: 231
          children: []
          pos: 2553
          length: 268
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addValue
              children: []
              pos: 2839
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 2848
                length: 19
              pos: 2827
              length: 389
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: option instanceof Argument
                        children: []
                        pos: 2928
                        length: 26
                    children: []
                    pos: 2927
                    length: 28
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: addOption(option);
                    children: []
                    pos: 2970
                    length: 18
                  pos: 2956
                  length: 42
                pos: 2924
                length: 74
              - type: local_variable_declaration
                fields:
                  text: List valueList = (List) values.get(option);
                children: []
                pos: 3008
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: valueList
                            children: []
                            pos: 3065
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3078
                            length: 4
                        children: []
                        pos: 3065
                        length: 17
                    children: []
                    pos: 3064
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: valueList = new ArrayList();
                    children: []
                    pos: 3098
                    length: 28
                  - type: expression_statement
                    fields:
                      text: values.put(option, valueList);
                    children: []
                    pos: 3139
                    length: 30
                  pos: 3084
                  length: 95
                pos: 3061
                length: 118
              - type: expression_statement
                fields:
                  text: valueList.add(value);
                children: []
                pos: 3189
                length: 21
              pos: 2914
              length: 302
          children: []
          pos: 2827
          length: 389
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addSwitch
              children: []
              pos: 3234
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 3244
                length: 19
              pos: 3222
              length: 398
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: addOption(option);
                children: []
                pos: 3322
                length: 18
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: switches.containsKey(option)
                        children: []
                        pos: 3354
                        length: 28
                    children: []
                    pos: 3353
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalStateException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_ALREADY_SET));
                    children: []
                    pos: 3398
                    length: 117
                  pos: 3384
                  length: 141
                pos: 3350
                length: 264
              pos: 3312
              length: 308
          children: []
          pos: 3222
          length: 398
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasOption
              children: []
              pos: 3641
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 3651
                length: 19
              pos: 3626
              length: 136
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final boolean present = options.contains(option);
                children: []
                pos: 3682
                length: 49
              - type: return_statement
                fields:
                  text: return present;
                children: []
                pos: 3741
                length: 15
              pos: 3672
              length: 90
          children: []
          pos: 3626
          length: 136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOption
              children: []
              pos: 3782
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String trigger
                children: []
                pos: 3792
                length: 20
              pos: 3768
              length: 104
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return (Option) nameToOption.get(trigger);
                children: []
                pos: 3824
                length: 42
              pos: 3814
              length: 58
          children: []
          pos: 3768
          length: 104
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValues
              children: []
              pos: 3890
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 3900
                length: 19
              pos: 3878
              length: 1169
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List valueList = (List) values.get(option);
                children: []
                pos: 4015
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: defaultValues
                                children: []
                                pos: 4115
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4132
                                length: 4
                            children: []
                            pos: 4115
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: defaultValues.isEmpty()
                            children: []
                            pos: 4140
                            length: 23
                        children: []
                        pos: 4115
                        length: 48
                    children: []
                    pos: 4114
                    length: 50
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultValues = (List) this.defaultValues.get(option);
                    children: []
                    pos: 4179
                    length: 54
                  pos: 4165
                  length: 78
                pos: 4111
                length: 132
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: defaultValues
                                children: []
                                pos: 4309
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4326
                                length: 4
                            children: []
                            pos: 4309
                            length: 21
                          right:
                            type: unary_expression
                            fields:
                              text: "!defaultValues.isEmpty()"
                            children: []
                            pos: 4334
                            length: 24
                        children: []
                        pos: 4309
                        length: 49
                    children: []
                    pos: 4308
                    length: 51
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: valueList
                                    children: []
                                    pos: 4378
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 4391
                                    length: 4
                                children: []
                                pos: 4378
                                length: 17
                              right:
                                type: method_invocation
                                fields:
                                  text: valueList.isEmpty()
                                children: []
                                pos: 4399
                                length: 19
                            children: []
                            pos: 4378
                            length: 40
                        children: []
                        pos: 4377
                        length: 42
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: valueList = defaultValues;
                        children: []
                        pos: 4438
                        length: 26
                      pos: 4420
                      length: 58
                    pos: 4374
                    length: 577
                  pos: 4360
                  length: 601
                pos: 4305
                length: 656
              - type: return_statement
                fields:
                  text: 'return valueList == null ? Collections.EMPTY_LIST : valueList;'
                children: []
                pos: 4979
                length: 62
              pos: 3967
              length: 1080
          children: []
          pos: 3878
          length: 1169
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getUndefaultedValues
              children: []
              pos: 5065
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 5086
                length: 13
              pos: 5053
              length: 293
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List valueList = (List) values.get(option);
                children: []
                pos: 5153
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: valueList
                            children: []
                            pos: 5243
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5256
                            length: 4
                        children: []
                        pos: 5243
                        length: 17
                    children: []
                    pos: 5242
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: valueList = Collections.EMPTY_LIST;
                    children: []
                    pos: 5272
                    length: 35
                  pos: 5262
                  length: 53
                pos: 5239
                length: 76
              - type: return_statement
                fields:
                  text: return valueList;
                children: []
                pos: 5323
                length: 17
              pos: 5101
              length: 245
          children: []
          pos: 5053
          length: 293
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSwitch
              children: []
              pos: 5367
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 5377
                length: 19
              pos: 5352
              length: 518
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Boolean bool = (Boolean) switches.get(option);
                children: []
                pos: 5511
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: bool
                            children: []
                            pos: 5631
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5639
                            length: 4
                        children: []
                        pos: 5631
                        length: 12
                    children: []
                    pos: 5630
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: bool = defaultValue;
                    children: []
                    pos: 5659
                    length: 20
                  pos: 5645
                  length: 44
                pos: 5627
                length: 62
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: bool
                            children: []
                            pos: 5754
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5762
                            length: 4
                        children: []
                        pos: 5754
                        length: 12
                    children: []
                    pos: 5753
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: bool = (Boolean) this.defaultSwitches.get(option);
                    children: []
                    pos: 5782
                    length: 50
                  pos: 5768
                  length: 74
                pos: 5750
                length: 92
              - type: return_statement
                fields:
                  text: return bool;
                children: []
                pos: 5852
                length: 12
              pos: 5455
              length: 415
          children: []
          pos: 5352
          length: 518
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperty
              children: []
              pos: 5890
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String property
                children: []
                pos: 5902
                length: 21
              pos: 5876
              length: 116
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getProperty(new PropertyOption(), property);
                children: []
                pos: 5935
                length: 51
              pos: 5925
              length: 67
          children: []
          pos: 5876
          length: 116
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addProperty
              children: []
              pos: 6010
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 6022
                length: 19
              pos: 5998
              length: 420
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Properties properties = (Properties) optionToProperties.get(option);
                children: []
                pos: 6152
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 6233
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6247
                            length: 4
                        children: []
                        pos: 6233
                        length: 18
                    children: []
                    pos: 6232
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: properties = new Properties();
                    children: []
                    pos: 6267
                    length: 30
                  - type: expression_statement
                    fields:
                      text: optionToProperties.put(option, properties);
                    children: []
                    pos: 6310
                    length: 43
                  pos: 6253
                  length: 110
                pos: 6229
                length: 134
              - type: expression_statement
                fields:
                  text: properties.setProperty(property, value);
                children: []
                pos: 6372
                length: 40
              pos: 6142
              length: 276
          children: []
          pos: 5998
          length: 420
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addProperty
              children: []
              pos: 6436
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String property
                children: []
                pos: 6448
                length: 21
              pos: 6424
              length: 134
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: addProperty(new PropertyOption(), property, value);
                children: []
                pos: 6501
                length: 51
              pos: 6491
              length: 67
          children: []
          pos: 6424
          length: 134
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperty
              children: []
              pos: 6578
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 6590
                length: 19
              pos: 6564
              length: 381
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Properties properties = (Properties) optionToProperties.get(option);
                children: []
                pos: 6731
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 6812
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6826
                            length: 4
                        children: []
                        pos: 6812
                        length: 18
                    children: []
                    pos: 6811
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return defaultValue;
                    children: []
                    pos: 6846
                    length: 20
                  pos: 6832
                  length: 44
                pos: 6808
                length: 68
              - type: return_statement
                fields:
                  text: return properties.getProperty(property, defaultValue);
                children: []
                pos: 6885
                length: 54
              pos: 6721
              length: 224
          children: []
          pos: 6564
          length: 381
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperties
              children: []
              pos: 6962
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 6976
                length: 19
              pos: 6951
              length: 281
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Properties properties = (Properties) optionToProperties.get(option);
                children: []
                pos: 7007
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 7088
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7102
                            length: 4
                        children: []
                        pos: 7088
                        length: 18
                    children: []
                    pos: 7087
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.EMPTY_SET;
                    children: []
                    pos: 7122
                    length: 29
                  pos: 7108
                  length: 53
                pos: 7084
                length: 77
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableSet(properties.keySet());
                children: []
                pos: 7170
                length: 56
              pos: 6997
              length: 235
          children: []
          pos: 6951
          length: 281
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperties
              children: []
              pos: 7249
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7238
              length: 86
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getProperties(new PropertyOption());
                children: []
                pos: 7275
                length: 43
              pos: 7265
              length: 59
          children: []
          pos: 7238
          length: 86
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: looksLikeOption
              children: []
              pos: 7345
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String trigger
                children: []
                pos: 7361
                length: 20
              pos: 7330
              length: 305
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (final Iterator i = prefixes.iterator(); i.hasNext();) {
                                final String prefix = (String) i.next();

                                if (trigger.startsWith(prefix)) {
                                    return true;
                                }
                            }
                children: []
                pos: 7393
                length: 213
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 7616
                length: 13
              pos: 7383
              length: 252
          children: []
          pos: 7330
          length: 305
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 7655
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7641
              length: 548
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final StringBuffer buffer = new StringBuffer();
                children: []
                pos: 7676
                length: 47
              - type: for_statement
                fields:
                  text: |-
                    for (final Iterator i = normalised.iterator(); i.hasNext();) {
                                final String arg = (String) i.next();

                                if (arg.indexOf(' ') >= 0) {
                                    buffer.append("\"").append(arg).append("\"");
                                } else {
                                    buffer.append(arg);
                                }

                                if (i.hasNext()) {
                                    buffer.append(' ');
                                }
                            }
                children: []
                pos: 7769
                length: 379
              - type: return_statement
                fields:
                  text: return buffer.toString();
                children: []
                pos: 8158
                length: 25
              pos: 7666
              length: 523
          children: []
          pos: 7641
          length: 548
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOptions
              children: []
              pos: 8207
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8195
              length: 86
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(options);
                children: []
                pos: 8230
                length: 45
              pos: 8220
              length: 61
          children: []
          pos: 8195
          length: 86
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOptionTriggers
              children: []
              pos: 8298
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8287
              length: 105
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableSet(nameToOption.keySet());
                children: []
                pos: 8328
                length: 58
              pos: 8318
              length: 74
          children: []
          pos: 8287
          length: 105
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setDefaultValues
              children: []
              pos: 8410
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 8427
                length: 19
              pos: 8398
              length: 261
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaults
                            children: []
                            pos: 8516
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8528
                            length: 4
                        children: []
                        pos: 8516
                        length: 16
                    children: []
                    pos: 8515
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultValues.remove(option);
                    children: []
                    pos: 8548
                    length: 29
                  pos: 8534
                  length: 53
                pos: 8512
                length: 141
              pos: 8502
              length: 157
          children: []
          pos: 8398
          length: 261
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setDefaultSwitch
              children: []
              pos: 8677
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 8694
                length: 19
              pos: 8665
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaultSwitch
                            children: []
                            pos: 8791
                            length: 13
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8808
                            length: 4
                        children: []
                        pos: 8791
                        length: 21
                    children: []
                    pos: 8790
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultSwitches.remove(option);
                    children: []
                    pos: 8828
                    length: 31
                  pos: 8814
                  length: 55
                pos: 8787
                length: 155
              pos: 8777
              length: 171
          children: []
          pos: 8665
          length: 283
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNormalised
              children: []
              pos: 8966
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8954
              length: 92
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(normalised);
                children: []
                pos: 8992
                length: 48
              pos: 8982
              length: 64
          children: []
          pos: 8954
          length: 92
        pos: 1483
        length: 7565
    children: []
    pos: 1483
    length: 7565
  pos: 0
  length: 9049
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: WriteableCommandLineImpl
        children: []
        pos: 1496
        length: 24
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final Map optionToProperties = new HashMap();
          children: []
          pos: 1587
          length: 53
        - type: field_declaration
          fields:
            text: private final List options = new ArrayList();
          children: []
          pos: 1707
          length: 45
        - type: field_declaration
          fields:
            text: private final Map nameToOption = new HashMap();
          children: []
          pos: 1757
          length: 47
        - type: field_declaration
          fields:
            text: private final Map values = new HashMap();
          children: []
          pos: 1809
          length: 41
        - type: field_declaration
          fields:
            text: private final Map switches = new HashMap();
          children: []
          pos: 1855
          length: 43
        - type: field_declaration
          fields:
            text: private final Map defaultValues = new HashMap();
          children: []
          pos: 1903
          length: 48
        - type: field_declaration
          fields:
            text: private final Map defaultSwitches = new HashMap();
          children: []
          pos: 1956
          length: 50
        - type: field_declaration
          fields:
            text: private final List normalised;
          children: []
          pos: 2011
          length: 30
        - type: field_declaration
          fields:
            text: private final Set prefixes;
          children: []
          pos: 2046
          length: 27
        - type: constructor_declaration
          fields:
            text: |-
              public WriteableCommandLineImpl(final Option rootOption,
                                                  final List arguments) {
                      this.prefixes = rootOption.getPrefixes();
                      this.normalised = arguments;
                  }
          children: []
          pos: 2338
          length: 209
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addOption
              children: []
              pos: 2565
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 2575
                length: 13
              pos: 2553
              length: 268
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: options.add(option);
                children: []
                pos: 2600
                length: 20
              - type: expression_statement
                fields:
                  text: nameToOption.put(option.getPreferredName(), option);
                children: []
                pos: 2629
                length: 52
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator i = option.getTriggers().iterator(); i.hasNext();) {
                                nameToOption.put(i.next(), option);
                            }
                children: []
                pos: 2691
                length: 124
              pos: 2590
              length: 231
          children: []
          pos: 2553
          length: 268
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addValue
              children: []
              pos: 2839
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 2848
                length: 19
              pos: 2827
              length: 389
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: option instanceof Argument
                        children: []
                        pos: 2928
                        length: 26
                    children: []
                    pos: 2927
                    length: 28
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: addOption(option);
                    children: []
                    pos: 2970
                    length: 18
                  pos: 2956
                  length: 42
                pos: 2924
                length: 74
              - type: local_variable_declaration
                fields:
                  text: List valueList = (List) values.get(option);
                children: []
                pos: 3008
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: valueList
                            children: []
                            pos: 3065
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3078
                            length: 4
                        children: []
                        pos: 3065
                        length: 17
                    children: []
                    pos: 3064
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: valueList = new ArrayList();
                    children: []
                    pos: 3098
                    length: 28
                  - type: expression_statement
                    fields:
                      text: values.put(option, valueList);
                    children: []
                    pos: 3139
                    length: 30
                  pos: 3084
                  length: 95
                pos: 3061
                length: 118
              - type: expression_statement
                fields:
                  text: valueList.add(value);
                children: []
                pos: 3189
                length: 21
              pos: 2914
              length: 302
          children: []
          pos: 2827
          length: 389
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addSwitch
              children: []
              pos: 3234
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 3244
                length: 19
              pos: 3222
              length: 398
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: addOption(option);
                children: []
                pos: 3322
                length: 18
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: switches.containsKey(option)
                        children: []
                        pos: 3354
                        length: 28
                    children: []
                    pos: 3353
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalStateException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_ALREADY_SET));
                    children: []
                    pos: 3398
                    length: 117
                  pos: 3384
                  length: 141
                pos: 3350
                length: 264
              pos: 3312
              length: 308
          children: []
          pos: 3222
          length: 398
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasOption
              children: []
              pos: 3641
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 3651
                length: 19
              pos: 3626
              length: 136
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final boolean present = options.contains(option);
                children: []
                pos: 3682
                length: 49
              - type: return_statement
                fields:
                  text: return present;
                children: []
                pos: 3741
                length: 15
              pos: 3672
              length: 90
          children: []
          pos: 3626
          length: 136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOption
              children: []
              pos: 3782
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String trigger
                children: []
                pos: 3792
                length: 20
              pos: 3768
              length: 104
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return (Option) nameToOption.get(trigger);
                children: []
                pos: 3824
                length: 42
              pos: 3814
              length: 58
          children: []
          pos: 3768
          length: 104
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValues
              children: []
              pos: 3890
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 3900
                length: 19
              pos: 3878
              length: 751
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List valueList = (List) values.get(option);
                children: []
                pos: 4015
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: valueList
                                    children: []
                                    pos: 4116
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 4129
                                    length: 4
                                children: []
                                pos: 4116
                                length: 17
                            children: []
                            pos: 4115
                            length: 19
                          right:
                            type: method_invocation
                            fields:
                              text: valueList.isEmpty()
                            children: []
                            pos: 4138
                            length: 19
                        children: []
                        pos: 4115
                        length: 42
                    children: []
                    pos: 4114
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: valueList = defaultValues;
                    children: []
                    pos: 4173
                    length: 26
                  pos: 4159
                  length: 50
                pos: 4111
                length: 98
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: valueList
                                    children: []
                                    pos: 4276
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 4289
                                    length: 4
                                children: []
                                pos: 4276
                                length: 17
                            children: []
                            pos: 4275
                            length: 19
                          right:
                            type: method_invocation
                            fields:
                              text: valueList.isEmpty()
                            children: []
                            pos: 4298
                            length: 19
                        children: []
                        pos: 4275
                        length: 42
                    children: []
                    pos: 4274
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: valueList = (List) this.defaultValues.get(option);
                    children: []
                    pos: 4333
                    length: 50
                  pos: 4319
                  length: 74
                pos: 4271
                length: 122
              - type: return_statement
                fields:
                  text: 'return valueList == null ? Collections.EMPTY_LIST : valueList;'
                children: []
                pos: 4561
                length: 62
              pos: 3967
              length: 662
          children: []
          pos: 3878
          length: 751
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getUndefaultedValues
              children: []
              pos: 4647
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 4668
                length: 13
              pos: 4635
              length: 293
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List valueList = (List) values.get(option);
                children: []
                pos: 4735
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: valueList
                            children: []
                            pos: 4825
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4838
                            length: 4
                        children: []
                        pos: 4825
                        length: 17
                    children: []
                    pos: 4824
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: valueList = Collections.EMPTY_LIST;
                    children: []
                    pos: 4854
                    length: 35
                  pos: 4844
                  length: 53
                pos: 4821
                length: 76
              - type: return_statement
                fields:
                  text: return valueList;
                children: []
                pos: 4905
                length: 17
              pos: 4683
              length: 245
          children: []
          pos: 4635
          length: 293
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSwitch
              children: []
              pos: 4949
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 4959
                length: 19
              pos: 4934
              length: 518
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Boolean bool = (Boolean) switches.get(option);
                children: []
                pos: 5093
                length: 46
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: bool
                            children: []
                            pos: 5213
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5221
                            length: 4
                        children: []
                        pos: 5213
                        length: 12
                    children: []
                    pos: 5212
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: bool = defaultValue;
                    children: []
                    pos: 5241
                    length: 20
                  pos: 5227
                  length: 44
                pos: 5209
                length: 62
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: bool
                            children: []
                            pos: 5336
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5344
                            length: 4
                        children: []
                        pos: 5336
                        length: 12
                    children: []
                    pos: 5335
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: bool = (Boolean) this.defaultSwitches.get(option);
                    children: []
                    pos: 5364
                    length: 50
                  pos: 5350
                  length: 74
                pos: 5332
                length: 92
              - type: return_statement
                fields:
                  text: return bool;
                children: []
                pos: 5434
                length: 12
              pos: 5037
              length: 415
          children: []
          pos: 4934
          length: 518
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperty
              children: []
              pos: 5472
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String property
                children: []
                pos: 5484
                length: 21
              pos: 5458
              length: 116
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getProperty(new PropertyOption(), property);
                children: []
                pos: 5517
                length: 51
              pos: 5507
              length: 67
          children: []
          pos: 5458
          length: 116
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addProperty
              children: []
              pos: 5592
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 5604
                length: 19
              pos: 5580
              length: 420
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Properties properties = (Properties) optionToProperties.get(option);
                children: []
                pos: 5734
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 5815
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5829
                            length: 4
                        children: []
                        pos: 5815
                        length: 18
                    children: []
                    pos: 5814
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: properties = new Properties();
                    children: []
                    pos: 5849
                    length: 30
                  - type: expression_statement
                    fields:
                      text: optionToProperties.put(option, properties);
                    children: []
                    pos: 5892
                    length: 43
                  pos: 5835
                  length: 110
                pos: 5811
                length: 134
              - type: expression_statement
                fields:
                  text: properties.setProperty(property, value);
                children: []
                pos: 5954
                length: 40
              pos: 5724
              length: 276
          children: []
          pos: 5580
          length: 420
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addProperty
              children: []
              pos: 6018
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String property
                children: []
                pos: 6030
                length: 21
              pos: 6006
              length: 134
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: addProperty(new PropertyOption(), property, value);
                children: []
                pos: 6083
                length: 51
              pos: 6073
              length: 67
          children: []
          pos: 6006
          length: 134
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperty
              children: []
              pos: 6160
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 6172
                length: 19
              pos: 6146
              length: 381
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Properties properties = (Properties) optionToProperties.get(option);
                children: []
                pos: 6313
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 6394
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6408
                            length: 4
                        children: []
                        pos: 6394
                        length: 18
                    children: []
                    pos: 6393
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return defaultValue;
                    children: []
                    pos: 6428
                    length: 20
                  pos: 6414
                  length: 44
                pos: 6390
                length: 68
              - type: return_statement
                fields:
                  text: return properties.getProperty(property, defaultValue);
                children: []
                pos: 6467
                length: 54
              pos: 6303
              length: 224
          children: []
          pos: 6146
          length: 381
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperties
              children: []
              pos: 6544
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 6558
                length: 19
              pos: 6533
              length: 281
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Properties properties = (Properties) optionToProperties.get(option);
                children: []
                pos: 6589
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 6670
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6684
                            length: 4
                        children: []
                        pos: 6670
                        length: 18
                    children: []
                    pos: 6669
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.EMPTY_SET;
                    children: []
                    pos: 6704
                    length: 29
                  pos: 6690
                  length: 53
                pos: 6666
                length: 77
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableSet(properties.keySet());
                children: []
                pos: 6752
                length: 56
              pos: 6579
              length: 235
          children: []
          pos: 6533
          length: 281
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProperties
              children: []
              pos: 6831
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6820
              length: 86
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getProperties(new PropertyOption());
                children: []
                pos: 6857
                length: 43
              pos: 6847
              length: 59
          children: []
          pos: 6820
          length: 86
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: looksLikeOption
              children: []
              pos: 6927
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String trigger
                children: []
                pos: 6943
                length: 20
              pos: 6912
              length: 305
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (final Iterator i = prefixes.iterator(); i.hasNext();) {
                                final String prefix = (String) i.next();

                                if (trigger.startsWith(prefix)) {
                                    return true;
                                }
                            }
                children: []
                pos: 6975
                length: 213
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 7198
                length: 13
              pos: 6965
              length: 252
          children: []
          pos: 6912
          length: 305
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 7237
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7223
              length: 548
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final StringBuffer buffer = new StringBuffer();
                children: []
                pos: 7258
                length: 47
              - type: for_statement
                fields:
                  text: |-
                    for (final Iterator i = normalised.iterator(); i.hasNext();) {
                                final String arg = (String) i.next();

                                if (arg.indexOf(' ') >= 0) {
                                    buffer.append("\"").append(arg).append("\"");
                                } else {
                                    buffer.append(arg);
                                }

                                if (i.hasNext()) {
                                    buffer.append(' ');
                                }
                            }
                children: []
                pos: 7351
                length: 379
              - type: return_statement
                fields:
                  text: return buffer.toString();
                children: []
                pos: 7740
                length: 25
              pos: 7248
              length: 523
          children: []
          pos: 7223
          length: 548
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOptions
              children: []
              pos: 7789
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7777
              length: 86
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(options);
                children: []
                pos: 7812
                length: 45
              pos: 7802
              length: 61
          children: []
          pos: 7777
          length: 86
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getOptionTriggers
              children: []
              pos: 7880
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7869
              length: 105
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableSet(nameToOption.keySet());
                children: []
                pos: 7910
                length: 58
              pos: 7900
              length: 74
          children: []
          pos: 7869
          length: 105
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setDefaultValues
              children: []
              pos: 7992
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 8009
                length: 19
              pos: 7980
              length: 261
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaults
                            children: []
                            pos: 8098
                            length: 8
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8110
                            length: 4
                        children: []
                        pos: 8098
                        length: 16
                    children: []
                    pos: 8097
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultValues.remove(option);
                    children: []
                    pos: 8130
                    length: 29
                  pos: 8116
                  length: 53
                pos: 8094
                length: 141
              pos: 8084
              length: 157
          children: []
          pos: 7980
          length: 261
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setDefaultSwitch
              children: []
              pos: 8259
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final Option option
                children: []
                pos: 8276
                length: 19
              pos: 8247
              length: 283
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaultSwitch
                            children: []
                            pos: 8373
                            length: 13
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8390
                            length: 4
                        children: []
                        pos: 8373
                        length: 21
                    children: []
                    pos: 8372
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultSwitches.remove(option);
                    children: []
                    pos: 8410
                    length: 31
                  pos: 8396
                  length: 55
                pos: 8369
                length: 155
              pos: 8359
              length: 171
          children: []
          pos: 8247
          length: 283
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNormalised
              children: []
              pos: 8548
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8536
              length: 92
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(normalised);
                children: []
                pos: 8574
                length: 48
              pos: 8564
              length: 64
          children: []
          pos: 8536
          length: 92
        pos: 1483
        length: 7147
    children: []
    pos: 1483
    length: 7147
  pos: 0
  length: 8631
text_diff: "--- before\n+++ after\n@@ -114,26 +114,17 @@\n         List valueList
  = (List) values.get(option);\n \n         // grab the correct default values\n-
  \       if (defaultValues == null || defaultValues.isEmpty()) {\n-            defaultValues
  = (List) this.defaultValues.get(option);\n+        if ((valueList == null) || valueList.isEmpty())
  {\n+            valueList = defaultValues;\n         }\n \n         // augment the
  list with the default values\n-        if (defaultValues != null && !defaultValues.isEmpty())
  {\n-            if (valueList == null || valueList.isEmpty()) {\n-                valueList
  = defaultValues;\n-            } else {\n+        if ((valueList == null) || valueList.isEmpty())
  {\n+            valueList = (List) this.defaultValues.get(option);\n+        }\n
  \                // if there are more default values as specified, add them to\n
  \                // the list.\n-                if (defaultValues.size() > valueList.size())
  {\n                     // copy the list first\n-                    valueList =
  new ArrayList(valueList);\n-                    for (int i=valueList.size(); i<defaultValues.size();
  i++) {\n-                        valueList.add(defaultValues.get(i));\n-                    }\n-
  \               }\n-            }\n-        }\n         \n         return valueList
  == null ? Collections.EMPTY_LIST : valueList;\n     }\n"
tree_diff: |+
  New cluster:
  MOVE from method_declaration [3878,5047]
  ------------
  ===
  move-tree
  ---
  block [4360,4961]
      if_statement [4374,4951]
          parenthesized_expression [4377,4419]
              or [4378,4418]
                  equals [4378,4395]
                      identifier: valueList [4378,4387]
                      null_literal [4391,4395]
                  method_invocation: valueList.isEmpty() [4399,4418]
          block [4420,4478]
              expression_statement: valueList = defaultValues; [4438,4464]
  to
  method_declaration [3878,5047]
  at 2

  New cluster:
  ===
  insert-node
  ---
  local_variable_declaration: List valueList = (List) values.get(option); [4015,4058]
  to
  block [4360,4961]
  at 0
  ------------
  ===
  insert-node
  ---
  local_variable_declaration: List valueList = (List) values.get(option); [4015,4058]
  to
  block [4360,4961]
  at 0

  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  if_statement [4271,4393]
      parenthesized_expression [4274,4318]
          or [4275,4317]
              parenthesized_expression [4275,4294]
                  equals [4276,4293]
                      identifier: valueList [4276,4285]
                      null_literal [4289,4293]
              method_invocation: valueList.isEmpty() [4298,4317]
      block [4319,4393]
          expression_statement: valueList = (List) this.defaultValues.get(option); [4333,4383]
  to
  block [4360,4961]
  at 2

  New cluster:
  ===
  insert-node
  ---
  return_statement: return valueList == null ? Collections.EMPTY_LIST : valueList; [4561,4623]
  to
  block [4360,4961]
  at 3
  ------------
  ===
  insert-node
  ---
  return_statement: return valueList == null ? Collections.EMPTY_LIST : valueList; [4561,4623]
  to
  block [4360,4961]
  at 3

  New cluster:
  ===
  insert-node
  ---
  parenthesized_expression [4115,4134]
  to
  or [4378,4418]
  at 0
  ------------
  ===
  insert-node
  ---
  parenthesized_expression [4115,4134]
  to
  or [4378,4418]
  at 0

  New cluster:
  MOVE from parenthesized_expression [4115,4134]
  ------------
  ===
  move-tree
  ---
  equals [4378,4395]
      identifier: valueList [4378,4387]
      null_literal [4391,4395]
  to
  parenthesized_expression [4115,4134]
  at 0

  New cluster:
  ===
  delete-node
  ---
  block [3967,5047]
  ===
  ------------
  ===
  delete-node
  ---
  local_variable_declaration: List valueList = (List) values.get(option); [4015,4058]
  ===
  ===
  delete-node
  ---
  block [3967,5047]
  ===
  ===
  delete-node
  ---
  if_statement [4305,4961]
  ===
  ===
  delete-node
  ---
  return_statement: return valueList == null ? Collections.EMPTY_LIST : valueList; [4979,5041]
  ===

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [4111,4243]
      parenthesized_expression [4114,4164]
          or [4115,4163]
              equals [4115,4136]
                  identifier: defaultValues [4115,4128]
                  null_literal [4132,4136]
              method_invocation: defaultValues.isEmpty() [4140,4163]
      block [4165,4243]
          expression_statement: defaultValues = (List) this.defaultValues.get(option); [4179,4233]

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  parenthesized_expression [4308,4359]
      and [4309,4358]
          not_equals [4309,4330]
              identifier: defaultValues [4309,4322]
              null_literal [4326,4330]
          unary_expression: !defaultValues.isEmpty() [4334,4358]

...
