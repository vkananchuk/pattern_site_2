---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 4753
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 4882
          length: 91
        - type: field_declaration
          fields:
            text: private static final String LEGACY_TYPEDEF = "goog.typedef";
          children: []
          pos: 4977
          length: 60
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5041
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5222
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5413
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 5601
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 5790
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 5973
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6147
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6341
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6384
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6440
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6481
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 6532
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 6577
          length: 78
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 6816
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 6838
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 6859
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 6883
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 7231
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 7239
                      length: 11
                    pos: 7226
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 7260
                      length: 62
                    pos: 7252
                    length: 76
                children: []
                pos: 7226
                length: 102
              pos: 6802
              length: 530
          children: []
          pos: 6802
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 7336
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 7442
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 7934
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 7946
                length: 9
              pos: 7921
              length: 1725
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 8166
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 8193
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8243
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8253
                            length: 4
                        children: []
                        pos: 8243
                        length: 14
                    children: []
                    pos: 8242
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 8318
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 8362
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 8442
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 8483
                    length: 53
                  pos: 8259
                  length: 283
                pos: 8239
                length: 508
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 8753
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 8797
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type instanceof FunctionType) {
                            FunctionType fnType = (FunctionType) type;
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 8993
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 9475
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9485
                            length: 4
                        children: []
                        pos: 9475
                        length: 14
                    children: []
                    pos: 9474
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes);
                    children: []
                    pos: 9499
                    length: 116
                  pos: 9491
                  length: 130
                pos: 9471
                length: 150
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 9626
                length: 16
              pos: 7971
              length: 1675
          children: []
          pos: 7921
          length: 1725
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 9805
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 9824
                length: 9
              pos: 9778
              length: 1636
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 9842
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 9940
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 9981
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10036
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 10100
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 10154
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10209
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 10269
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10327
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10390
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10446
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10507
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 10572
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10628
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10691
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10753
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10813
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 10872
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, LEGACY_TYPEDEF, NO_TYPE);
                children: []
                pos: 11107
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 11336
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 11401
                length: 9
              pos: 9835
              length: 1579
          children: []
          pos: 9778
          length: 1636
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 11431
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 11457
                length: 11
              pos: 11418
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 11494
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 11556
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 11629
                length: 89
              pos: 11488
              length: 234
          children: []
          pos: 11418
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 11739
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 11762
                length: 11
              pos: 11726
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 11818
                length: 64
              pos: 11812
              length: 74
          children: []
          pos: 11726
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 11903
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 11921
                length: 11
              pos: 11890
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 11963
                length: 42
              pos: 11957
              length: 52
          children: []
          pos: 11890
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 12034
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 12112
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 12156
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 12277
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 12283
                      length: 15
                    pos: 12251
                    length: 858
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 12332
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 12368
                              length: 14
                          children: []
                          pos: 12367
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, child.getFirstChild(),
                                              NodeUtil.getInfoForNameNode(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.getType() == Token.ASSIGN) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getLastChild(),
                                              firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, null, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 12384
                          length: 719
                      children: []
                      pos: 12360
                      length: 743
                    pos: 12324
                    length: 785
                children: []
                pos: 12251
                length: 858
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 13128
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 13154
                      length: 13
                    pos: 13115
                    length: 616
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 13213
                              length: 26
                          children: []
                          pos: 13212
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 13255
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 13263
                                      length: 4
                                  children: []
                                  pos: 13255
                                  length: 12
                              children: []
                              pos: 13254
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 13285
                                      length: 27
                                  children: []
                                  pos: 13284
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 13328
                                  length: 62
                                pos: 13314
                                length: 88
                              pos: 13281
                              length: 242
                            pos: 13269
                            length: 264
                          pos: 13251
                          length: 282
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: valueNode
                                          children: []
                                          pos: 13547
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 13560
                                          length: 4
                                      children: []
                                      pos: 13547
                                      length: 17
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: LEGACY_TYPEDEF.equals(valueNode.getQualifiedName())
                                      children: []
                                      pos: 13580
                                      length: 51
                                  children: []
                                  pos: 13547
                                  length: 84
                              children: []
                              pos: 13546
                              length: 86
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                              children: []
                              pos: 13645
                              length: 62
                            pos: 13633
                            length: 84
                          pos: 13543
                          length: 174
                        pos: 13241
                        length: 484
                      pos: 13209
                      length: 516
                    pos: 13201
                    length: 530
                children: []
                pos: 13115
                length: 616
              pos: 12013
              length: 1722
          children: []
          pos: 12013
          length: 1722
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrototypePropertyOwner
              children: []
              pos: 13966
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 13992
                length: 6
              pos: 13946
              length: 432
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: n.getType()
                            children: []
                            pos: 14010
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Token.GETPROP
                            children: []
                            pos: 14025
                            length: 13
                        children: []
                        pos: 14010
                        length: 28
                    children: []
                    pos: 14009
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node firstChild = n.getFirstChild();
                    children: []
                    pos: 14048
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: firstChild.getType()
                                    children: []
                                    pos: 14095
                                    length: 20
                                  right:
                                    type: field_access
                                    fields:
                                      text: Token.GETPROP
                                    children: []
                                    pos: 14119
                                    length: 13
                                children: []
                                pos: 14095
                                length: 37
                              right:
                                type: method_invocation
                                fields:
                                  text: firstChild.getLastChild().getString().equals("prototype")
                                children: []
                                pos: 14146
                                length: 57
                            children: []
                            pos: 14095
                            length: 108
                        children: []
                        pos: 14094
                        length: 110
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: Node maybeOwner = firstChild.getFirstChild();
                        children: []
                        pos: 14215
                        length: 45
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: method_invocation
                                fields:
                                  text: maybeOwner.isQualifiedName()
                                children: []
                                pos: 14273
                                length: 28
                            children: []
                            pos: 14272
                            length: 30
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return maybeOwner;
                            children: []
                            pos: 14315
                            length: 18
                          pos: 14303
                          length: 40
                        pos: 14269
                        length: 74
                      pos: 14205
                      length: 146
                    pos: 14091
                    length: 260
                  pos: 14040
                  length: 317
                pos: 14006
                length: 351
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 14362
                length: 12
              pos: 14000
              length: 378
          children: []
          pos: 13946
          length: 432
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 14397
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 14411
                length: 23
              pos: 14382
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 14442
                length: 46
              pos: 14436
              length: 56
          children: []
          pos: 14382
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 14519
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 14641
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 14665
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 14842
                length: 67
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 15085
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 15237
                length: 33
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 15276
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 15362
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 15378
                      length: 9
                    pos: 15357
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 15410
                      length: 54
                    pos: 15402
                    length: 68
                children: []
                pos: 15357
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 15481
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 15476
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 15553
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 15708
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 15752
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 15930
                      length: 40
                    pos: 15496
                    length: 480
                children: []
                pos: 15476
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 16017
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal nodeTraversal
                      children: []
                      pos: 16032
                      length: 27
                    pos: 15982
                    length: 1022
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 16102
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 16117
                                      length: 14
                                  children: []
                                  pos: 16102
                                  length: 29
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 16145
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.SCRIPT
                                      children: []
                                      pos: 16160
                                      length: 12
                                  children: []
                                  pos: 16145
                                  length: 27
                              children: []
                              pos: 16102
                              length: 70
                          children: []
                          pos: 16101
                          length: 72
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 16184
                          length: 39
                        pos: 16174
                        length: 57
                      pos: 16098
                      length: 133
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || parent.getType() != Token.FUNCTION ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 16363
                      length: 145
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 16520
                              length: 7
                          children: []
                          pos: 16519
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 16669
                                  length: 29
                              children: []
                              pos: 16668
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child, n);
                                              }
                                            }
                              children: []
                              pos: 16712
                              length: 245
                            pos: 16700
                            length: 267
                          pos: 16665
                          length: 302
                        pos: 16529
                        length: 446
                      pos: 16516
                      length: 459
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 16983
                      length: 15
                    pos: 16090
                    length: 914
                children: []
                pos: 15982
                length: 1022
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 17036
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 17042
                      length: 15
                    pos: 17010
                    length: 1375
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(t, n);
                      children: []
                      pos: 17088
                      length: 25
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 17129
                              length: 11
                          children: []
                          pos: 17128
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n, parent);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.getType() == Token.GETPROP &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.getType() == Token.EXPR_RESULT &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 17142
                          length: 1237
                      children: []
                      pos: 17121
                      length: 1258
                    pos: 17080
                    length: 1305
                children: []
                pos: 17010
                length: 1375
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 18404
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18423
                      length: 15
                    pos: 18391
                    length: 1127
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 18464
                              length: 11
                          children: []
                          pos: 18463
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        // Defer keys to the Token.OBJECTLIT case
                                        if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
                                          n.setJSType(getNativeType(STRING_TYPE));
                                        }
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.REF_SPECIAL:
                                        n.setJSType(getNativeType(UNKNOWN_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        defineObjectLiteral(t, n);
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 18477
                          length: 1035
                      children: []
                      pos: 18456
                      length: 1056
                    pos: 18448
                    length: 1070
                children: []
                pos: 18391
                length: 1127
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 19537
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19557
                      length: 15
                    pos: 19524
                    length: 1691
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 19637
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 19663
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 19716
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 19724
                                      length: 4
                                  children: []
                                  pos: 19716
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 19742
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 19765
                                      length: 4
                                  children: []
                                  pos: 19742
                                  length: 27
                              children: []
                              pos: 19716
                              length: 53
                          children: []
                          pos: 19715
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 19781
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 19829
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 19881
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 19893
                                      length: 4
                                  children: []
                                  pos: 19881
                                  length: 16
                              children: []
                              pos: 19880
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 19911
                              length: 94
                            pos: 19899
                            length: 116
                          pos: 19877
                          length: 616
                        pos: 19771
                        length: 730
                      pos: 19712
                      length: 789
                    - type: expression_statement
                      fields:
                        text: info = getBestJSDocInfo(objectLit);
                      children: []
                      pos: 20509
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = getBestLValue(objectLit);
                      children: []
                      pos: 20551
                      length: 39
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = getBestLValueName(lValue);
                      children: []
                      pos: 20597
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 20650
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 20693
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20701
                                      length: 4
                                  children: []
                                  pos: 20693
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 20709
                                  length: 27
                              children: []
                              pos: 20693
                              length: 43
                          children: []
                          pos: 20692
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 20748
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 20825
                          length: 23
                        pos: 20738
                        length: 118
                      pos: 20689
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 20868
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 20876
                                  length: 4
                              children: []
                              pos: 20868
                              length: 12
                          children: []
                          pos: 20867
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType();
                          children: []
                          pos: 20892
                          length: 48
                        pos: 20882
                        length: 66
                      pos: 20864
                      length: 84
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 20956
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!createdEnumType"
                              children: []
                              pos: 21079
                              length: 16
                          children: []
                          pos: 21078
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              processObjectLitProperties(
                                          t, objectLit, ObjectType.cast(objectLit.getJSType()));
                          children: []
                          pos: 21107
                          length: 94
                        pos: 21097
                        length: 112
                      pos: 21075
                      length: 134
                    pos: 19590
                    length: 1625
                children: []
                pos: 19524
                length: 1691
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 21470
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 21506
                      length: 15
                    pos: 21465
                    length: 1272
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType = getDeclaredType(
                                      t.getSourceName(), info, keyNode, value);
                                  JSType keyType = NodeUtil.getObjectLitKeyTypeFromValueType(
                                      keyNode, valueType);
                                  if (keyType != null) {
                                    // Try to declare this property in the current scope if it
                                    // has an authoritative name.
                                    String qualifiedName = getBestLValueName(keyNode);
                                    if (qualifiedName != null) {
                                      defineSlot(keyNode, objLit, qualifiedName, keyType, false);
                                    } else {
                                      setDeferredType(keyNode, keyType);
                                    }

                                    if (objLitType != null) {
                                      // Declare this property on its object literal.
                                      boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                                      objLitType.defineDeclaredProperty(
                                          memberName, keyType, isExtern, keyNode);
                                    }
                                  }
                                }
                      children: []
                      pos: 21567
                      length: 1164
                    pos: 21559
                    length: 1178
                children: []
                pos: 21465
                length: 1272
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 22988
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 23016
                      length: 17
                    pos: 22973
                    length: 689
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 23078
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode =
                                    node.getType() == Token.GETPROP ? node.getFirstChild() :
                                    NodeUtil.isObjectLitKey(node, node.getParent()) ? node.getParent() :
                                    null;
                      children: []
                      pos: 23106
                      length: 176
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 23293
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 23301
                                  length: 4
                              children: []
                              pos: 23293
                              length: 12
                          children: []
                          pos: 23292
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 23321
                                  length: 14
                              children: []
                              pos: 23320
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 23349
                              length: 54
                            pos: 23337
                            length: 76
                          pos: 23317
                          length: 310
                        pos: 23307
                        length: 328
                      pos: 23289
                      length: 346
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 23642
                      length: 14
                    pos: 23070
                    length: 592
                children: []
                pos: 22973
                length: 689
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 23817
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 23838
                      length: 6
                    pos: 23812
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 23864
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 23916
                      length: 46
                    pos: 23856
                    length: 112
                children: []
                pos: 23812
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 24029
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 24041
                      length: 6
                    pos: 24024
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 24070
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 24114
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 24156
                      length: 31
                    pos: 24062
                    length: 131
                children: []
                pos: 24024
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 24257
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 24267
                      length: 6
                    pos: 24252
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 24296
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 24338
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 24383
                              length: 23
                          children: []
                          pos: 24382
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 24422
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 24430
                                      length: 4
                                  children: []
                                  pos: 24422
                                  length: 12
                              children: []
                              pos: 24421
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 24479
                              length: 63
                            pos: 24436
                            length: 116
                          pos: 24418
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 24561
                          length: 102
                        pos: 24408
                        length: 263
                      pos: 24379
                      length: 440
                    pos: 24288
                    length: 537
                children: []
                pos: 24252
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 24887
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 24909
                      length: 6
                    pos: 24882
                    length: 822
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 24938
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = getBestLValue(n);
                      children: []
                      pos: 25092
                      length: 31
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = getBestJSDocInfo(n);
                      children: []
                      pos: 25130
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = getBestLValueName(lValue);
                      children: []
                      pos: 25174
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 25229
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 25392
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 25598
                              length: 33
                          children: []
                          pos: 25597
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 25643
                          length: 47
                        pos: 25633
                        length: 65
                      pos: 25594
                      length: 104
                    pos: 24930
                    length: 774
                children: []
                pos: 24882
                length: 822
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 26107
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 26118
                      length: 9
                    pos: 26094
                    length: 532
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 26176
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(sourceName, info, name,
                          value);
                      children: []
                      pos: 26243
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 26315
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26323
                                  length: 4
                              children: []
                              pos: 26315
                              length: 12
                          children: []
                          pos: 26314
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: CompilerInput input = compiler.getInput(sourceName);
                          children: []
                          pos: 26388
                          length: 52
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(input, sourceName);
                          children: []
                          pos: 26449
                          length: 46
                        - type: expression_statement
                          fields:
                            text: |-
                              type = input.isExtern() ?
                                          getNativeType(UNKNOWN_TYPE) : null;
                          children: []
                          pos: 26504
                          length: 73
                        pos: 26329
                        length: 256
                      pos: 26311
                      length: 274
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 26592
                      length: 28
                    pos: 26168
                    length: 458
                children: []
                pos: 26094
                length: 532
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 26972
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 27010
                      length: 17
                    pos: 26956
                    length: 350
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 27070
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 27078
                                  length: 4
                              children: []
                              pos: 27070
                              length: 12
                          children: []
                          pos: 27069
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 27094
                          length: 12
                        pos: 27084
                        length: 30
                      pos: 27066
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 27125
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 27135
                                      length: 4
                                  children: []
                                  pos: 27125
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                                  children: []
                                  pos: 27153
                                  length: 51
                              children: []
                              pos: 27125
                              length: 79
                          children: []
                          pos: 27124
                          length: 81
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 27216
                          length: 13
                        pos: 27206
                        length: 31
                      pos: 27121
                      length: 116
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 27244
                      length: 56
                    pos: 27058
                    length: 248
                children: []
                pos: 26956
                length: 350
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 28354
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 28391
                      length: 21
                    pos: 28333
                    length: 3854
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 28523
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 28642
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 28652
                                          length: 4
                                      children: []
                                      pos: 28642
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 28660
                                      length: 24
                                  children: []
                                  pos: 28642
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 28688
                                  length: 16
                              children: []
                              pos: 28642
                              length: 62
                          children: []
                          pos: 28641
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 28716
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 28779
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 28786
                                          length: 4
                                      children: []
                                      pos: 28779
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof FunctionType
                                      children: []
                                      pos: 28794
                                      length: 37
                                  children: []
                                  pos: 28779
                                  length: 52
                              children: []
                              pos: 28778
                              length: 54
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = (FunctionType) var.getType();
                              children: []
                              pos: 28845
                              length: 57
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 28918
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 28949
                                                  length: 25
                                              children: []
                                              pos: 28918
                                              length: 56
                                          children: []
                                          pos: 28917
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 28993
                                          length: 33
                                      children: []
                                      pos: 28917
                                      length: 109
                                  children: []
                                  pos: 28916
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 29042
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 29087
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 29095
                                                  length: 4
                                              children: []
                                              pos: 29087
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 29103
                                              length: 16
                                          children: []
                                          pos: 29087
                                          length: 32
                                      children: []
                                      pos: 29086
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 29137
                                      length: 63
                                    pos: 29121
                                    length: 93
                                  pos: 29083
                                  length: 131
                                pos: 29028
                                length: 198
                              pos: 28913
                              length: 313
                            pos: 28833
                            length: 403
                          pos: 28775
                          length: 461
                        pos: 28706
                        length: 538
                      pos: 28638
                      length: 606
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 29256
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29272
                                  length: 4
                              children: []
                              pos: 29256
                              length: 20
                          children: []
                          pos: 29255
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 29288
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.getType() == Token.FUNCTION;
                          children: []
                          pos: 29351
                          length: 87
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 29447
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 29498
                          length: 88
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                              : null;'
                          children: []
                          pos: 29595
                          length: 61
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 29670
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 29678
                                          length: 4
                                      children: []
                                      pos: 29670
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 29686
                                      length: 14
                                  children: []
                                  pos: 29670
                                  length: 30
                              children: []
                              pos: 29669
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 29714
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 29859
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 29917
                                      length: 21
                                  children: []
                                  pos: 29916
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = (FunctionType) type;
                                  children: []
                                  pos: 29954
                                  length: 35
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 30002
                                  length: 32
                                pos: 29940
                                length: 106
                              pos: 29913
                              length: 133
                            pos: 29702
                            length: 354
                          pos: 29666
                          length: 390
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 30070
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 30086
                                      length: 4
                                  children: []
                                  pos: 30070
                                  length: 20
                              children: []
                              pos: 30069
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenPropType = null;
                              children: []
                              pos: 30159
                              length: 39
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: lvalueNode
                                                  children: []
                                                  pos: 30213
                                                  length: 10
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 30227
                                                  length: 4
                                              children: []
                                              pos: 30213
                                              length: 18
                                            right:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: lvalueNode.getType()
                                                  children: []
                                                  pos: 30249
                                                  length: 20
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: Token.GETPROP
                                                  children: []
                                                  pos: 30273
                                                  length: 13
                                              children: []
                                              pos: 30249
                                              length: 37
                                          children: []
                                          pos: 30213
                                          length: 73
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: lvalueNode.isQualifiedName()
                                          children: []
                                          pos: 30304
                                          length: 28
                                      children: []
                                      pos: 30213
                                      length: 119
                                  children: []
                                  pos: 30212
                                  length: 121
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      Var var = scope.getVar(
                                                      lvalueNode.getFirstChild().getQualifiedName());
                                  children: []
                                  pos: 30348
                                  length: 87
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 30452
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 30459
                                              length: 4
                                          children: []
                                          pos: 30452
                                          length: 11
                                      children: []
                                      pos: 30451
                                      length: 13
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: local_variable_declaration
                                      fields:
                                        text: ObjectType ownerType = ObjectType.cast(var.getType());
                                      children: []
                                      pos: 30481
                                      length: 54
                                    - type: if_statement
                                      fields:
                                        condition:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 30554
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 30567
                                                  length: 4
                                              children: []
                                              pos: 30554
                                              length: 17
                                          children: []
                                          pos: 30553
                                          length: 19
                                      children:
                                      - type: block
                                        fields: {}
                                        children:
                                        - type: local_variable_declaration
                                          fields:
                                            text: String propName = lvalueNode.getLastChild().getString();
                                          children: []
                                          pos: 30591
                                          length: 56
                                        - type: expression_statement
                                          fields:
                                            text: |-
                                              overriddenPropType =
                                                                  findOverriddenFunction(ownerType, propName);
                                          children: []
                                          pos: 30664
                                          length: 85
                                        pos: 30573
                                        length: 192
                                      pos: 30550
                                      length: 215
                                    pos: 30465
                                    length: 314
                                  pos: 30448
                                  length: 331
                                pos: 30334
                                length: 457
                              pos: 30209
                              length: 582
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setSourceNode(fnRoot)
                                                .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                                .inferTemplateTypeName(info)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 30803
                              length: 366
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 31218
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: lvalueNode
                                              children: []
                                              pos: 31269
                                              length: 10
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31283
                                              length: 4
                                          children: []
                                          pos: 31269
                                          length: 18
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: lvalueNode.getType()
                                              children: []
                                              pos: 31305
                                              length: 20
                                            right:
                                              type: field_access
                                              fields:
                                                text: Token.GETPROP
                                              children: []
                                              pos: 31329
                                              length: 13
                                          children: []
                                          pos: 31305
                                          length: 37
                                      children: []
                                      pos: 31269
                                      length: 73
                                  children: []
                                  pos: 31268
                                  length: 75
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: Node objNode = lvalueNode.getFirstChild();
                                  children: []
                                  pos: 31358
                                  length: 42
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: objNode.getType()
                                                  children: []
                                                  pos: 31417
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: Token.GETPROP
                                                  children: []
                                                  pos: 31438
                                                  length: 13
                                              children: []
                                              pos: 31417
                                              length: 34
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: objNode.getLastChild().getString().equals("prototype")
                                              children: []
                                              pos: 31471
                                              length: 54
                                          children: []
                                          pos: 31417
                                          length: 108
                                      children: []
                                      pos: 31416
                                      length: 110
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: builder.inferThisType(info, objNode.getFirstChild());
                                      children: []
                                      pos: 31543
                                      length: 53
                                    - type: expression_statement
                                      fields:
                                        text: searchedForThisType = true;
                                      children: []
                                      pos: 31611
                                      length: 27
                                    pos: 31527
                                    length: 125
                                  pos: 31413
                                  length: 403
                                pos: 31344
                                length: 484
                              pos: 31265
                              length: 563
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 31844
                                      length: 20
                                  children: []
                                  pos: 31843
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info, (Node) null);
                                  children: []
                                  pos: 31880
                                  length: 41
                                pos: 31866
                                length: 67
                              pos: 31840
                              length: 93
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .inferReturnStatementsAsLastResort(fnBlock)
                                                .buildAndRegister();
                              children: []
                              pos: 31945
                              length: 172
                            pos: 30092
                            length: 2035
                          pos: 30066
                          length: 2061
                        pos: 29278
                        length: 2857
                      pos: 29252
                      length: 2883
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 32161
                      length: 20
                    pos: 28514
                    length: 3673
                children: []
                pos: 28333
                length: 3854
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 32301
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 32333
                      length: 20
                    pos: 32280
                    length: 740
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 32466
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: propType instanceof FunctionType
                              children: []
                              pos: 32531
                              length: 32
                          children: []
                          pos: 32530
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return (FunctionType) propType;
                          children: []
                          pos: 32575
                          length: 31
                        pos: 32565
                        length: 49
                      pos: 32527
                      length: 467
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 33002
                      length: 12
                    pos: 32372
                    length: 648
                children: []
                pos: 32280
                length: 740
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 33727
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 33751
                      length: 11
                    pos: 33710
                    length: 1783
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 33826
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 33866
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 33928
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 33964
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 33974
                                      length: 4
                                  children: []
                                  pos: 33964
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 33982
                                  length: 24
                              children: []
                              pos: 33964
                              length: 42
                          children: []
                          pos: 33963
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 34053
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 34116
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 34123
                                          length: 4
                                      children: []
                                      pos: 34116
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 34131
                                      length: 33
                                  children: []
                                  pos: 34116
                                  length: 48
                              children: []
                              pos: 34115
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 34178
                              length: 36
                            pos: 34166
                            length: 58
                          pos: 34112
                          length: 112
                        pos: 34008
                        length: 224
                      pos: 33960
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 34244
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 34256
                                  length: 4
                              children: []
                              pos: 34244
                              length: 16
                          children: []
                          pos: 34243
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 34272
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, elementsType);
                          children: []
                          pos: 34373
                          length: 59
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 34446
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 34456
                                          length: 4
                                      children: []
                                      pos: 34446
                                      length: 14
                                    right:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: rValue.getType()
                                          children: []
                                          pos: 34464
                                          length: 16
                                        right:
                                          type: field_access
                                          fields:
                                            text: Token.OBJECTLIT
                                          children: []
                                          pos: 34484
                                          length: 15
                                      children: []
                                      pos: 34464
                                      length: 35
                                  children: []
                                  pos: 34446
                                  length: 53
                              children: []
                              pos: 34445
                              length: 55
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 34548
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (enumType.hasOwnProperty(keyName)) {
                                                compiler.report(JSError.make(sourceName, key, ENUM_DUP, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 34593
                              length: 729
                            pos: 34501
                            length: 831
                          pos: 34442
                          length: 890
                        pos: 34262
                        length: 1078
                      pos: 34240
                      length: 1100
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 35352
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35360
                                      length: 4
                                  children: []
                                  pos: 35352
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 35368
                                  length: 16
                              children: []
                              pos: 35352
                              length: 32
                          children: []
                          pos: 35351
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 35396
                          length: 59
                        pos: 35386
                        length: 77
                      pos: 35348
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 35471
                      length: 16
                    pos: 33818
                    length: 1675
                children: []
                pos: 33710
                length: 1783
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 35916
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 35927
                      length: 9
                    pos: 35903
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 35972
                      length: 45
                    pos: 35964
                    length: 59
                children: []
                pos: 35903
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 36517
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 36528
                      length: 6
                    pos: 36512
                    length: 808
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 36588
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.getType()
                                  children: []
                                  pos: 36790
                                  length: 11
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.NAME
                                  children: []
                                  pos: 36805
                                  length: 10
                              children: []
                              pos: 36790
                              length: 25
                          children: []
                          pos: 36789
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.getType() == Token.FUNCTION ||
                                          parent.getType() == Token.VAR ||
                                          parent.getType() == Token.LP ||
                                          parent.getType() == Token.CATCH);
                          children: []
                          pos: 36827
                          length: 213
                        pos: 36817
                        length: 231
                      pos: 36786
                      length: 461
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 37254
                      length: 60
                    pos: 36580
                    length: 740
                children: []
                pos: 36512
                length: 808
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 37761
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 37772
                      length: 6
                    pos: 37756
                    length: 4784
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 37861
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.getType() == Token.NAME && scope.isGlobal();
                      children: []
                      pos: 37922
                      length: 68
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.getType() == Token.VAR ||
                                     parent.getType() == Token.FUNCTION);
                      children: []
                      pos: 37997
                      length: 152
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 38357
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getType()
                                          children: []
                                          pos: 38399
                                          length: 11
                                        right:
                                          type: field_access
                                          fields:
                                            text: Token.GETPROP
                                          children: []
                                          pos: 38414
                                          length: 13
                                      children: []
                                      pos: 38399
                                      length: 28
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 38431
                                      length: 17
                                  children: []
                                  pos: 38399
                                  length: 49
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 38462
                                  length: 29
                              children: []
                              pos: 38399
                              length: 92
                          children: []
                          pos: 38398
                          length: 94
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 38503
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 38673
                                  length: 44
                              children: []
                              pos: 38672
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 38731
                              length: 42
                            pos: 38719
                            length: 64
                          pos: 38669
                          length: 114
                        pos: 38493
                        length: 298
                      pos: 38395
                      length: 396
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 38839
                              length: 48
                          children: []
                          pos: 38838
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 38899
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              validator.expectUndeclaredVariable(
                                          sourceName, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 38959
                          length: 99
                        pos: 38889
                        length: 177
                      pos: 38835
                      length: 3223
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: isGlobalVar
                                          children: []
                                          pos: 42070
                                          length: 11
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: '"Window".equals(variableName)'
                                          children: []
                                          pos: 42085
                                          length: 29
                                      children: []
                                      pos: 42070
                                      length: 44
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: type instanceof FunctionType
                                      children: []
                                      pos: 42128
                                      length: 28
                                  children: []
                                  pos: 42070
                                  length: 86
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 42170
                                  length: 20
                              children: []
                              pos: 42070
                              length: 120
                          children: []
                          pos: 42069
                          length: 122
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 42202
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 42316
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 42378
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn(((FunctionType) type).getInstanceType());
                          children: []
                          pos: 42437
                          length: 89
                        pos: 42192
                        length: 342
                      pos: 42066
                      length: 468
                    pos: 37853
                    length: 4687
                children: []
                pos: 37756
                length: 4784
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 42654
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 42681
                      length: 6
                    pos: 42638
                    length: 302
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 42697
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: root.getType()
                                  children: []
                                  pos: 42755
                                  length: 14
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.NAME
                                  children: []
                                  pos: 42773
                                  length: 10
                              children: []
                              pos: 42755
                              length: 28
                          children: []
                          pos: 42754
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 42795
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 42849
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42856
                                      length: 4
                                  children: []
                                  pos: 42849
                                  length: 11
                              children: []
                              pos: 42848
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.isGlobal();
                              children: []
                              pos: 42874
                              length: 22
                            pos: 42862
                            length: 44
                          pos: 42845
                          length: 61
                        pos: 42785
                        length: 129
                      pos: 42751
                      length: 163
                    - type: return_statement
                      fields:
                        text: return false;
                      children: []
                      pos: 42921
                      length: 13
                    pos: 42689
                    length: 251
                children: []
                pos: 42638
                length: 302
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 43310
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 43326
                      length: 17
                    pos: 43295
                    length: 2190
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 43417
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 43425
                                      length: 4
                                  children: []
                                  pos: 43417
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 43433
                                  length: 14
                              children: []
                              pos: 43417
                              length: 30
                          children: []
                          pos: 43416
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                              info);
                          children: []
                          pos: 43459
                          length: 61
                        pos: 43449
                        length: 79
                      pos: 43413
                      length: 1997
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                          info);
                      children: []
                      pos: 45418
                      length: 61
                    pos: 43405
                    length: 2080
                children: []
                pos: 43295
                length: 2190
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 45701
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 45737
                      length: 15
                    pos: 45688
                    length: 2312
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 45783
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 45884
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 45900
                                  length: 4
                              children: []
                              pos: 45884
                              length: 20
                          children: []
                          pos: 45883
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType superClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.superclassName));
                          children: []
                          pos: 45916
                          length: 104
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType subClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.subclassName));
                          children: []
                          pos: 46029
                          length: 100
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: superClass
                                          children: []
                                          pos: 46142
                                          length: 10
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 46156
                                          length: 4
                                      children: []
                                      pos: 46142
                                      length: 18
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: subClass
                                          children: []
                                          pos: 46164
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 46176
                                          length: 4
                                      children: []
                                      pos: 46164
                                      length: 16
                                  children: []
                                  pos: 46142
                                  length: 38
                              children: []
                              pos: 46141
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superCtor = superClass.getConstructor();
                              children: []
                              pos: 46194
                              length: 53
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType subCtor = subClass.getConstructor();
                              children: []
                              pos: 46258
                              length: 49
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: field_access
                                          fields:
                                            text: relationship.type
                                          children: []
                                          pos: 46323
                                          length: 17
                                        right:
                                          type: field_access
                                          fields:
                                            text: SubclassType.INHERITS
                                          children: []
                                          pos: 46344
                                          length: 21
                                      children: []
                                      pos: 46323
                                      length: 42
                                  children: []
                                  pos: 46322
                                  length: 44
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 46381
                                  length: 54
                                pos: 46367
                                length: 80
                              pos: 46319
                              length: 128
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 46463
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 46476
                                              length: 4
                                          children: []
                                          pos: 46463
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 46484
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 46495
                                              length: 4
                                          children: []
                                          pos: 46484
                                          length: 15
                                      children: []
                                      pos: 46463
                                      length: 36
                                  children: []
                                  pos: 46462
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 46515
                                  length: 99
                                pos: 46501
                                length: 125
                              pos: 46459
                              length: 167
                            pos: 46182
                            length: 454
                          pos: 46138
                          length: 498
                        pos: 45906
                        length: 738
                      pos: 45880
                      length: 764
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 46652
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 46755
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 46783
                                  length: 4
                              children: []
                              pos: 46755
                              length: 32
                          children: []
                          pos: 46754
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 46799
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 46913
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 46927
                                      length: 4
                                  children: []
                                  pos: 46913
                                  length: 18
                              children: []
                              pos: 46912
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 46945
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 47017
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 47033
                                          length: 4
                                      children: []
                                      pos: 47017
                                      length: 20
                                  children: []
                                  pos: 47016
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 47053
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 47152
                                  length: 92
                                pos: 47039
                                length: 217
                              pos: 47013
                              length: 243
                            pos: 46933
                            length: 333
                          pos: 46909
                          length: 357
                        pos: 46789
                        length: 485
                      pos: 46751
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 47282
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 47391
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 47415
                                  length: 4
                              children: []
                              pos: 47391
                              length: 28
                          children: []
                          pos: 47390
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 47431
                          length: 48
                        pos: 47421
                        length: 66
                      pos: 47387
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(t, n);
                      children: []
                      pos: 47495
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 47598
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 47619
                                  length: 4
                              children: []
                              pos: 47598
                              length: 25
                          children: []
                          pos: 47597
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType type = ObjectType.cast(
                                          typeRegistry.getType(objectLiteralCast.typeName));
                          children: []
                          pos: 47635
                          length: 97
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: type
                                          children: []
                                          pos: 47745
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 47753
                                          length: 4
                                      children: []
                                      pos: 47745
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: type.getConstructor()
                                          children: []
                                          pos: 47761
                                          length: 21
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 47786
                                          length: 4
                                      children: []
                                      pos: 47761
                                      length: 29
                                  children: []
                                  pos: 47745
                                  length: 45
                              children: []
                              pos: 47744
                              length: 47
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: setDeferredType(objectLiteralCast.objectNode,
                                  type);
                              children: []
                              pos: 47804
                              length: 52
                            pos: 47792
                            length: 74
                          pos: 47741
                          length: 245
                        pos: 47625
                        length: 369
                      pos: 47594
                      length: 400
                    pos: 45775
                    length: 2225
                children: []
                pos: 45688
                length: 2312
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 48097
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 48132
                      length: 41
                    pos: 48084
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 48183
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 48300
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 48423
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 48562
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 48581
                                          length: 4
                                      children: []
                                      pos: 48562
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 48599
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 48621
                                          length: 4
                                      children: []
                                      pos: 48599
                                      length: 26
                                  children: []
                                  pos: 48562
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 48639
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 48662
                                      length: 4
                                  children: []
                                  pos: 48639
                                  length: 27
                              children: []
                              pos: 48562
                              length: 104
                          children: []
                          pos: 48561
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 48678
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 48749
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 48826
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 48910
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 48927
                                              length: 4
                                          children: []
                                          pos: 48910
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 48935
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 48955
                                              length: 4
                                          children: []
                                          pos: 48935
                                          length: 24
                                      children: []
                                      pos: 48910
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 48975
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 48996
                                          length: 4
                                      children: []
                                      pos: 48975
                                      length: 25
                                  children: []
                                  pos: 48910
                                  length: 90
                              children: []
                              pos: 48909
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 49014
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 49122
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 49224
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 49414
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 49599
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 49665
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 49835
                              length: 58
                            pos: 49002
                            length: 901
                          pos: 48906
                          length: 997
                        pos: 48668
                        length: 1243
                      pos: 48558
                      length: 1353
                    pos: 48175
                    length: 1742
                children: []
                pos: 48084
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 50351
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50377
                      length: 15
                    pos: 50346
                    length: 4293
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 50462
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 50504
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 50559
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 50602
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 50656
                      length: 64
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 50967
                              length: 28
                          children: []
                          pos: 50966
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 51007
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 51051
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 51059
                                      length: 4
                                  children: []
                                  pos: 51051
                                  length: 12
                              children: []
                              pos: 51050
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!qVar.isTypeInferred()"
                                      children: []
                                      pos: 51081
                                      length: 22
                                  children: []
                                  pos: 51080
                                  length: 24
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: return_statement
                                  fields:
                                    text: return;
                                  children: []
                                  pos: 51178
                                  length: 7
                                pos: 51105
                                length: 92
                              pos: 51077
                              length: 120
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: qVar.getScope()
                                          children: []
                                          pos: 51212
                                          length: 15
                                        right:
                                          type: identifier
                                          fields:
                                            text: scope
                                          children: []
                                          pos: 51231
                                          length: 5
                                      children: []
                                      pos: 51212
                                      length: 24
                                  children: []
                                  pos: 51211
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scope.undeclare(qVar);
                                  children: []
                                  pos: 51252
                                  length: 22
                                pos: 51238
                                length: 48
                              pos: 51208
                              length: 78
                            pos: 51065
                            length: 231
                          pos: 51047
                          length: 249
                        pos: 50997
                        length: 307
                      pos: 50963
                      length: 341
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(t.getSourceName(),
                          info, n, rhsValue);
                      children: []
                      pos: 51949
                      length: 73
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 52033
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52046
                                      length: 4
                                  children: []
                                  pos: 52033
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 52054
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52066
                                      length: 4
                                  children: []
                                  pos: 52054
                                  length: 16
                              children: []
                              pos: 52033
                              length: 37
                          children: []
                          pos: 52032
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 52117
                          length: 33
                        pos: 52072
                        length: 86
                      pos: 52029
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 52170
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52183
                                  length: 4
                              children: []
                              pos: 52170
                              length: 17
                          children: []
                          pos: 52169
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: parent.getType()
                                      children: []
                                      pos: 52203
                                      length: 16
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.EXPR_RESULT
                                      children: []
                                      pos: 52223
                                      length: 17
                                  children: []
                                  pos: 52203
                                  length: 37
                              children: []
                              pos: 52202
                              length: 39
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 52254
                              length: 148
                            pos: 52242
                            length: 170
                          pos: 52199
                          length: 213
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 52422
                          length: 7
                        pos: 52189
                        length: 248
                      pos: 52166
                      length: 271
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 52445
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 52480
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52488
                                  length: 4
                              children: []
                              pos: 52480
                              length: 12
                          children: []
                          pos: 52479
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (info.isConstant() && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 52556
                          length: 241
                        pos: 52494
                        length: 311
                      pos: 52476
                      length: 329
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: inferred
                              children: []
                              pos: 52817
                              length: 8
                          children: []
                          pos: 52816
                          length: 10
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(rhsValue != null &&
                                          rhsValue.getType() == Token.FUNCTION &&
                                          !scope.isDeclared(qName, false));
                          children: []
                          pos: 52879
                          length: 130
                        pos: 52827
                        length: 190
                      pos: 52813
                      length: 204
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 53029
                              length: 9
                          children: []
                          pos: 53028
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 53050
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 53111
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 53124
                                      length: 4
                                  children: []
                                  pos: 53111
                                  length: 17
                              children: []
                              pos: 53110
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 53243
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 53326
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 53380
                                                  length: 42
                                              children: []
                                              pos: 53326
                                              length: 96
                                          children: []
                                          pos: 53325
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 53443
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 53455
                                                          length: 31
                                                      children: []
                                                      pos: 53443
                                                      length: 43
                                                  children: []
                                                  pos: 53442
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 53506
                                                  length: 27
                                              children: []
                                              pos: 53442
                                              length: 91
                                          children: []
                                          pos: 53441
                                          length: 93
                                      children: []
                                      pos: 53325
                                      length: 209
                                  children: []
                                  pos: 53324
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, isExtern, n);
                                  children: []
                                  pos: 53624
                                  length: 67
                                pos: 53536
                                length: 167
                              pos: 53321
                              length: 382
                            pos: 53130
                            length: 583
                          pos: 53107
                          length: 606
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 53855
                          length: 43
                        pos: 53040
                        length: 866
                      pos: 53025
                      length: 1608
                    pos: 50454
                    length: 4185
                children: []
                pos: 50346
                length: 4293
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 54884
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 54898
                      length: 15
                    pos: 54865
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 54923
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 54972
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54984
                                  length: 4
                              children: []
                              pos: 54972
                              length: 16
                          children: []
                          pos: 54971
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 55000
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 55050
                          length: 110
                        pos: 54990
                        length: 178
                      pos: 54968
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 55175
                      length: 12
                    pos: 54915
                    length: 278
                children: []
                pos: 54865
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 55335
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 55330
                    length: 1192
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, isExtern, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 55369
                      length: 1147
                    pos: 55361
                    length: 1161
                children: []
                pos: 55330
                length: 1192
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 56674
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 56749
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 56791
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 56893
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 56899
                            length: 15
                          pos: 56881
                          length: 483
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: n.getType()
                                        children: []
                                        pos: 56951
                                        length: 11
                                      right:
                                        type: field_access
                                        fields:
                                          text: Token.EXPR_RESULT
                                        children: []
                                        pos: 56966
                                        length: 17
                                    children: []
                                    pos: 56951
                                    length: 32
                                children: []
                                pos: 56950
                                length: 34
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 56997
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 57047
                                        length: 15
                                    children: []
                                    pos: 57046
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 57064
                                    length: 282
                                children: []
                                pos: 57039
                                length: 307
                              pos: 56985
                              length: 371
                            pos: 56947
                            length: 409
                          pos: 56937
                          length: 427
                      children: []
                      pos: 56881
                      length: 483
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 57385
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 57404
                            length: 15
                          pos: 57372
                          length: 1034
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 57500
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 57750
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 57758
                                                length: 4
                                            children: []
                                            pos: 57750
                                            length: 12
                                          right:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: member.getType()
                                                children: []
                                                pos: 57778
                                                length: 16
                                              right:
                                                type: field_access
                                                fields:
                                                  text: Token.GETPROP
                                                children: []
                                                pos: 57798
                                                length: 13
                                            children: []
                                            pos: 57778
                                            length: 33
                                        children: []
                                        pos: 57750
                                        length: 61
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: member.getFirstChild().getType()
                                            children: []
                                            pos: 57827
                                            length: 32
                                          right:
                                            type: field_access
                                            fields:
                                              text: Token.THIS
                                            children: []
                                            pos: 57863
                                            length: 10
                                        children: []
                                        pos: 57827
                                        length: 46
                                    children: []
                                    pos: 57750
                                    length: 123
                                children: []
                                pos: 57749
                                length: 125
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 57887
                                length: 7
                              pos: 57875
                              length: 29
                            pos: 57746
                            length: 158
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 57914
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(t.getSourceName(),
                                info, member, value);
                            children: []
                            pos: 57966
                            length: 72
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 58047
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 58094
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 58104
                                            length: 4
                                        children: []
                                        pos: 58094
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 58125
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.NAME
                                                    children: []
                                                    pos: 58143
                                                    length: 10
                                                children: []
                                                pos: 58125
                                                length: 28
                                              right:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 58157
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.STRING
                                                    children: []
                                                    pos: 58175
                                                    length: 12
                                                children: []
                                                pos: 58157
                                                length: 30
                                            children: []
                                            pos: 58125
                                            length: 62
                                        children: []
                                        pos: 58124
                                        length: 64
                                    children: []
                                    pos: 58094
                                    length: 94
                                children: []
                                pos: 58093
                                length: 96
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  false /* functions with implementations are not in externs */,
                                                  member);
                                children: []
                                pos: 58202
                                length: 186
                              pos: 58190
                              length: 208
                            pos: 58090
                            length: 308
                          pos: 57490
                          length: 916
                      children: []
                      pos: 57372
                      length: 1034
                    pos: 56654
                    length: 1758
                children: []
                pos: 56654
                length: 1758
              pos: 14496
              length: 43945
          children: []
          pos: 14496
          length: 43945
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 58538
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 58560
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 58589
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 58625
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 58662
                length: 168
              pos: 58511
              length: 323
          children: []
          pos: 58511
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 58969
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 59024
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 59363
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 59369
                      length: 15
                    pos: 59341
                    length: 489
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 59415
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 59457
                              length: 11
                          children: []
                          pos: 59456
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.ASSIGN:
                                        // Handle typedefs.
                                        checkForOldStyleTypedef(t, n);
                                        break;

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForOldStyleTypedef(t, n);
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 59470
                          length: 354
                      children: []
                      pos: 59449
                      length: 375
                    pos: 59407
                    length: 423
                children: []
                pos: 59341
                length: 489
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 59855
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 59890
                      length: 15
                    pos: 59836
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 59975
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 60010
                      length: 62
                    pos: 59967
                    length: 111
                children: []
                pos: 59836
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 60258
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 60283
                      length: 15
                    pos: 60245
                    length: 974
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 60344
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 60352
                                      length: 4
                                  children: []
                                  pos: 60344
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 60360
                                  length: 22
                              children: []
                              pos: 60344
                              length: 38
                          children: []
                          pos: 60343
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 60394
                          length: 7
                        pos: 60384
                        length: 25
                      pos: 60340
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 60417
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 60474
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60485
                                  length: 4
                              children: []
                              pos: 60474
                              length: 15
                          children: []
                          pos: 60473
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 60501
                          length: 7
                        pos: 60491
                        length: 25
                      pos: 60470
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                      children: []
                      pos: 60690
                      length: 63
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 60761
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 60842
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60854
                                  length: 4
                              children: []
                              pos: 60842
                              length: 16
                          children: []
                          pos: 60841
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 60870
                          length: 118
                        pos: 60860
                        length: 136
                      pos: 60838
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 61004
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: candidate.getType()
                                  children: []
                                  pos: 61069
                                  length: 19
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.GETPROP
                                  children: []
                                  pos: 61092
                                  length: 13
                              children: []
                              pos: 61069
                              length: 36
                          children: []
                          pos: 61068
                          length: 38
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 61117
                          length: 88
                        pos: 61107
                        length: 106
                      pos: 61065
                      length: 148
                    pos: 60332
                    length: 887
                children: []
                pos: 60245
                length: 974
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForOldStyleTypedef
                    children: []
                    pos: 61400
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 61424
                      length: 15
                    pos: 61387
                    length: 1020
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = codingConvention.identifyTypeDefAssign(candidate);
                      children: []
                      pos: 61493
                      length: 67
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 61571
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61582
                                  length: 4
                              children: []
                              pos: 61571
                              length: 15
                          children: []
                          pos: 61570
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                          children: []
                          pos: 61770
                          length: 63
                        - type: local_variable_declaration
                          fields:
                            text: JSDocInfo info = candidate.getJSDocInfo();
                          children: []
                          pos: 61843
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: JSType realType = null;
                          children: []
                          pos: 61894
                          length: 23
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 61930
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 61938
                                          length: 4
                                      children: []
                                      pos: 61930
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: info.getType()
                                          children: []
                                          pos: 61946
                                          length: 14
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 61964
                                          length: 4
                                      children: []
                                      pos: 61946
                                      length: 22
                                  children: []
                                  pos: 61930
                                  length: 38
                              children: []
                              pos: 61929
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: realType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 61982
                              length: 56
                            pos: 61970
                            length: 78
                          pos: 61926
                          length: 122
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: realType
                                      children: []
                                      pos: 62062
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 62074
                                      length: 4
                                  children: []
                                  pos: 62062
                                  length: 16
                              children: []
                              pos: 62061
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(
                                                    t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                              children: []
                              pos: 62092
                              length: 122
                            pos: 62080
                            length: 144
                          pos: 62058
                          length: 166
                        - type: expression_statement
                          fields:
                            text: typeRegistry.overwriteDeclaredType(typedef, realType);
                          children: []
                          pos: 62234
                          length: 54
                        pos: 61588
                        length: 813
                      pos: 61567
                      length: 834
                    pos: 61457
                    length: 950
                children: []
                pos: 61387
                length: 1020
              pos: 58949
              length: 3462
          children: []
          pos: 58949
          length: 3462
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 62563
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 62683
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 62821
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 62816
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 62837
                      length: 60
                    pos: 62829
                    length: 74
                children: []
                pos: 62816
                length: 87
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 63189
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 63195
                      length: 15
                    pos: 63167
                    length: 284
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 63245
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 63250
                                  length: 19
                              children: []
                              pos: 63245
                              length: 24
                          children: []
                          pos: 63244
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 63271
                        length: 7
                      pos: 63241
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 63290
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.LP
                                      children: []
                                      pos: 63305
                                      length: 8
                                  children: []
                                  pos: 63290
                                  length: 23
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 63317
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 63327
                                      length: 19
                                  children: []
                                  pos: 63317
                                  length: 29
                              children: []
                              pos: 63290
                              length: 56
                          children: []
                          pos: 63289
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 63358
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 63396
                          length: 7
                        pos: 63348
                        length: 63
                      pos: 63286
                      length: 125
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 63419
                      length: 26
                    pos: 63233
                    length: 218
                children: []
                pos: 63167
                length: 284
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 63532
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 63553
                      length: 11
                    pos: 63519
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 63610
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 63658
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 63708
                              length: 17
                          children: []
                          pos: 63707
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 63737
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 63789
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 63798
                                          length: 4
                                      children: []
                                      pos: 63789
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 63983
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 64006
                                                  length: 4
                                              children: []
                                              pos: 63983
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 64159
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 64186
                                                  length: 6
                                              children: []
                                              pos: 64159
                                              length: 33
                                          children: []
                                          pos: 63983
                                          length: 209
                                      children: []
                                      pos: 63982
                                      length: 211
                                  children: []
                                  pos: 63789
                                  length: 404
                              children: []
                              pos: 63788
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 64207
                              length: 58
                            pos: 64195
                            length: 80
                          pos: 63785
                          length: 490
                        pos: 63727
                        length: 556
                      pos: 63704
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 64291
                      length: 25
                    pos: 63566
                    length: 756
                children: []
                pos: 63519
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 64404
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 64421
                      length: 17
                    pos: 64391
                    length: 844
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 64448
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 64515
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = (FunctionType) functionNode.getJSType();
                      children: []
                      pos: 64558
                      length: 68
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 64637
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 64653
                                  length: 4
                              children: []
                              pos: 64637
                              length: 20
                          children: []
                          pos: 64636
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 64669
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 64738
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 64757
                                      length: 4
                                  children: []
                                  pos: 64738
                                  length: 23
                              children: []
                              pos: 64737
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 64775
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), false);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 64840
                              length: 371
                            pos: 64763
                            length: 458
                          pos: 64734
                          length: 487
                        pos: 64659
                        length: 570
                      pos: 64633
                      length: 596
                    pos: 64440
                    length: 795
                children: []
                pos: 64391
                length: 844
              pos: 62543
              length: 2720
          children: []
          pos: 62543
          length: 2720
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBestJSDocInfo
              children: []
              pos: 65359
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 65376
                length: 6
              pos: 65342
              length: 614
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSDocInfo info = n.getJSDocInfo();
                children: []
                pos: 65390
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: info
                            children: []
                            pos: 65433
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 65441
                            length: 4
                        children: []
                        pos: 65433
                        length: 12
                    children: []
                    pos: 65432
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node parent = n.getParent();
                    children: []
                    pos: 65455
                    length: 28
                  - type: local_variable_declaration
                    fields:
                      text: int parentType = parent.getType();
                    children: []
                    pos: 65490
                    length: 34
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parentType
                                children: []
                                pos: 65535
                                length: 10
                              right:
                                type: field_access
                                fields:
                                  text: Token.NAME
                                children: []
                                pos: 65549
                                length: 10
                            children: []
                            pos: 65535
                            length: 24
                        children: []
                        pos: 65534
                        length: 26
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: info = parent.getJSDocInfo();
                        children: []
                        pos: 65571
                        length: 29
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: info
                                        children: []
                                        pos: 65613
                                        length: 4
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 65621
                                        length: 4
                                    children: []
                                    pos: 65613
                                    length: 12
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: parent.getParent().hasOneChild()
                                    children: []
                                    pos: 65629
                                    length: 32
                                children: []
                                pos: 65613
                                length: 48
                            children: []
                            pos: 65612
                            length: 50
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: info = parent.getParent().getJSDocInfo();
                            children: []
                            pos: 65675
                            length: 41
                          pos: 65663
                          length: 63
                        pos: 65609
                        length: 117
                      pos: 65561
                      length: 173
                    pos: 65531
                    length: 398
                  pos: 65447
                  length: 488
                pos: 65429
                length: 506
              - type: return_statement
                fields:
                  text: return info;
                children: []
                pos: 65940
                length: 12
              pos: 65384
              length: 572
          children: []
          pos: 65342
          length: 614
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBestLValue
              children: []
              pos: 66051
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 66065
                length: 6
              pos: 66031
              length: 515
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Node parent = n.getParent();
                children: []
                pos: 66079
                length: 28
              - type: local_variable_declaration
                fields:
                  text: int parentType = parent.getType();
                children: []
                pos: 66112
                length: 34
              - type: local_variable_declaration
                fields:
                  text: boolean isFunctionDeclaration = NodeUtil.isFunctionDeclaration(n);
                children: []
                pos: 66151
                length: 66
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: isFunctionDeclaration
                        children: []
                        pos: 66226
                        length: 21
                    children: []
                    pos: 66225
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return n.getFirstChild();
                    children: []
                    pos: 66257
                    length: 25
                  pos: 66249
                  length: 39
                pos: 66222
                length: 303
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 66530
                length: 12
              pos: 66073
              length: 473
          children: []
          pos: 66031
          length: 515
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBestLValueName
              children: []
              pos: 66621
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node lValue"
                children: []
                pos: 66639
                length: 21
              pos: 66599
              length: 533
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: lValue
                                children: []
                                pos: 66672
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 66682
                                length: 4
                            children: []
                            pos: 66672
                            length: 14
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: lValue.getParent()
                                children: []
                                pos: 66690
                                length: 18
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 66712
                                length: 4
                            children: []
                            pos: 66690
                            length: 26
                        children: []
                        pos: 66672
                        length: 44
                    children: []
                    pos: 66671
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 66726
                    length: 12
                  pos: 66718
                  length: 26
                pos: 66668
                length: 76
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                        children: []
                        pos: 66753
                        length: 51
                    children: []
                    pos: 66752
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node owner = getBestLValue(lValue.getParent());
                    children: []
                    pos: 66814
                    length: 47
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: owner
                                children: []
                                pos: 66872
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 66881
                                length: 4
                            children: []
                            pos: 66872
                            length: 13
                        children: []
                        pos: 66871
                        length: 15
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String ownerName = getBestLValueName(owner);
                        children: []
                        pos: 66897
                        length: 44
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: ownerName
                                    children: []
                                    pos: 66954
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 66967
                                    length: 4
                                children: []
                                pos: 66954
                                length: 17
                            children: []
                            pos: 66953
                            length: 19
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return ownerName + "." + NodeUtil.getObjectLitKeyName(lValue);
                            children: []
                            pos: 66985
                            length: 62
                          pos: 66973
                          length: 84
                        pos: 66950
                        length: 107
                      pos: 66887
                      length: 178
                    pos: 66868
                    length: 197
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 67072
                    length: 12
                  pos: 66806
                  length: 284
                pos: 66749
                length: 341
              - type: return_statement
                fields:
                  text: return lValue.getQualifiedName();
                children: []
                pos: 67095
                length: 33
              pos: 66662
              length: 470
          children: []
          pos: 66599
          length: 533
        pos: 4741
        length: 62393
    children: []
    pos: 4741
    length: 62393
  pos: 0
  length: 67135
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 4753
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 4882
          length: 91
        - type: field_declaration
          fields:
            text: private static final String LEGACY_TYPEDEF = "goog.typedef";
          children: []
          pos: 4977
          length: 60
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5041
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5222
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5413
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 5601
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 5790
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 5973
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6147
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6341
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6384
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6440
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6481
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 6532
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 6577
          length: 78
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 6816
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 6838
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 6859
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 6883
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 7231
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 7239
                      length: 11
                    pos: 7226
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 7260
                      length: 62
                    pos: 7252
                    length: 76
                children: []
                pos: 7226
                length: 102
              pos: 6802
              length: 530
          children: []
          pos: 6802
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 7336
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 7442
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 7934
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 7946
                length: 9
              pos: 7921
              length: 1725
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 8166
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 8193
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8243
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8253
                            length: 4
                        children: []
                        pos: 8243
                        length: 14
                    children: []
                    pos: 8242
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 8318
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 8362
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 8442
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 8483
                    length: 53
                  pos: 8259
                  length: 283
                pos: 8239
                length: 508
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 8753
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 8797
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type instanceof FunctionType) {
                            FunctionType fnType = (FunctionType) type;
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 8993
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 9475
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 9485
                            length: 4
                        children: []
                        pos: 9475
                        length: 14
                    children: []
                    pos: 9474
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes);
                    children: []
                    pos: 9499
                    length: 116
                  pos: 9491
                  length: 130
                pos: 9471
                length: 150
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 9626
                length: 16
              pos: 7971
              length: 1675
          children: []
          pos: 7921
          length: 1725
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 9805
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 9824
                length: 9
              pos: 9778
              length: 1636
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 9842
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 9940
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 9981
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10036
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 10100
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 10154
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10209
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 10269
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10327
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10390
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10446
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10507
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 10572
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 10628
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10691
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10753
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 10813
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 10872
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, LEGACY_TYPEDEF, NO_TYPE);
                children: []
                pos: 11107
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 11336
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 11401
                length: 9
              pos: 9835
              length: 1579
          children: []
          pos: 9778
          length: 1636
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 11431
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 11457
                length: 11
              pos: 11418
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 11494
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 11556
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 11629
                length: 89
              pos: 11488
              length: 234
          children: []
          pos: 11418
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 11739
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 11762
                length: 11
              pos: 11726
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 11818
                length: 64
              pos: 11812
              length: 74
          children: []
          pos: 11726
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 11903
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 11921
                length: 11
              pos: 11890
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 11963
                length: 42
              pos: 11957
              length: 52
          children: []
          pos: 11890
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 12034
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 12112
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 12156
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 12277
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 12283
                      length: 15
                    pos: 12251
                    length: 858
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 12332
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 12368
                              length: 14
                          children: []
                          pos: 12367
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, child.getFirstChild(),
                                              NodeUtil.getInfoForNameNode(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.getType() == Token.ASSIGN) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getLastChild(),
                                              firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, null, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 12384
                          length: 719
                      children: []
                      pos: 12360
                      length: 743
                    pos: 12324
                    length: 785
                children: []
                pos: 12251
                length: 858
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 13128
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 13154
                      length: 13
                    pos: 13115
                    length: 616
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 13213
                              length: 26
                          children: []
                          pos: 13212
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 13255
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 13263
                                      length: 4
                                  children: []
                                  pos: 13255
                                  length: 12
                              children: []
                              pos: 13254
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 13285
                                      length: 27
                                  children: []
                                  pos: 13284
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 13328
                                  length: 62
                                pos: 13314
                                length: 88
                              pos: 13281
                              length: 242
                            pos: 13269
                            length: 264
                          pos: 13251
                          length: 282
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: valueNode
                                          children: []
                                          pos: 13547
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 13560
                                          length: 4
                                      children: []
                                      pos: 13547
                                      length: 17
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: LEGACY_TYPEDEF.equals(valueNode.getQualifiedName())
                                      children: []
                                      pos: 13580
                                      length: 51
                                  children: []
                                  pos: 13547
                                  length: 84
                              children: []
                              pos: 13546
                              length: 86
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                              children: []
                              pos: 13645
                              length: 62
                            pos: 13633
                            length: 84
                          pos: 13543
                          length: 174
                        pos: 13241
                        length: 484
                      pos: 13209
                      length: 516
                    pos: 13201
                    length: 530
                children: []
                pos: 13115
                length: 616
              pos: 12013
              length: 1722
          children: []
          pos: 12013
          length: 1722
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrototypePropertyOwner
              children: []
              pos: 13966
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 13992
                length: 6
              pos: 13946
              length: 432
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: n.getType()
                            children: []
                            pos: 14010
                            length: 11
                          right:
                            type: field_access
                            fields:
                              text: Token.GETPROP
                            children: []
                            pos: 14025
                            length: 13
                        children: []
                        pos: 14010
                        length: 28
                    children: []
                    pos: 14009
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node firstChild = n.getFirstChild();
                    children: []
                    pos: 14048
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: firstChild.getType()
                                    children: []
                                    pos: 14095
                                    length: 20
                                  right:
                                    type: field_access
                                    fields:
                                      text: Token.GETPROP
                                    children: []
                                    pos: 14119
                                    length: 13
                                children: []
                                pos: 14095
                                length: 37
                              right:
                                type: method_invocation
                                fields:
                                  text: firstChild.getLastChild().getString().equals("prototype")
                                children: []
                                pos: 14146
                                length: 57
                            children: []
                            pos: 14095
                            length: 108
                        children: []
                        pos: 14094
                        length: 110
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: Node maybeOwner = firstChild.getFirstChild();
                        children: []
                        pos: 14215
                        length: 45
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: method_invocation
                                fields:
                                  text: maybeOwner.isQualifiedName()
                                children: []
                                pos: 14273
                                length: 28
                            children: []
                            pos: 14272
                            length: 30
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return maybeOwner;
                            children: []
                            pos: 14315
                            length: 18
                          pos: 14303
                          length: 40
                        pos: 14269
                        length: 74
                      pos: 14205
                      length: 146
                    pos: 14091
                    length: 260
                  pos: 14040
                  length: 317
                pos: 14006
                length: 351
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 14362
                length: 12
              pos: 14000
              length: 378
          children: []
          pos: 13946
          length: 432
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 14397
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 14411
                length: 23
              pos: 14382
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 14442
                length: 46
              pos: 14436
              length: 56
          children: []
          pos: 14382
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 14519
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 14641
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 14665
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 14842
                length: 67
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 15085
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 15237
                length: 33
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 15276
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 15362
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 15378
                      length: 9
                    pos: 15357
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 15410
                      length: 54
                    pos: 15402
                    length: 68
                children: []
                pos: 15357
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 15481
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 15476
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 15553
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 15708
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 15752
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 15930
                      length: 40
                    pos: 15496
                    length: 480
                children: []
                pos: 15476
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 16017
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal nodeTraversal
                      children: []
                      pos: 16032
                      length: 27
                    pos: 15982
                    length: 1022
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 16102
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.FUNCTION
                                      children: []
                                      pos: 16117
                                      length: 14
                                  children: []
                                  pos: 16102
                                  length: 29
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 16145
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.SCRIPT
                                      children: []
                                      pos: 16160
                                      length: 12
                                  children: []
                                  pos: 16145
                                  length: 27
                              children: []
                              pos: 16102
                              length: 70
                          children: []
                          pos: 16101
                          length: 72
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 16184
                          length: 39
                        pos: 16174
                        length: 57
                      pos: 16098
                      length: 133
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || parent.getType() != Token.FUNCTION ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 16363
                      length: 145
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 16520
                              length: 7
                          children: []
                          pos: 16519
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 16669
                                  length: 29
                              children: []
                              pos: 16668
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child, n);
                                              }
                                            }
                              children: []
                              pos: 16712
                              length: 245
                            pos: 16700
                            length: 267
                          pos: 16665
                          length: 302
                        pos: 16529
                        length: 446
                      pos: 16516
                      length: 459
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 16983
                      length: 15
                    pos: 16090
                    length: 914
                children: []
                pos: 15982
                length: 1022
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 17036
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 17042
                      length: 15
                    pos: 17010
                    length: 1375
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(t, n);
                      children: []
                      pos: 17088
                      length: 25
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 17129
                              length: 11
                          children: []
                          pos: 17128
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n, parent);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.getType() == Token.GETPROP &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.getType() == Token.EXPR_RESULT &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 17142
                          length: 1237
                      children: []
                      pos: 17121
                      length: 1258
                    pos: 17080
                    length: 1305
                children: []
                pos: 17010
                length: 1375
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 18404
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18423
                      length: 15
                    pos: 18391
                    length: 1127
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 18464
                              length: 11
                          children: []
                          pos: 18463
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        // Defer keys to the Token.OBJECTLIT case
                                        if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
                                          n.setJSType(getNativeType(STRING_TYPE));
                                        }
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.REF_SPECIAL:
                                        n.setJSType(getNativeType(UNKNOWN_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        defineObjectLiteral(t, n);
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 18477
                          length: 1035
                      children: []
                      pos: 18456
                      length: 1056
                    pos: 18448
                    length: 1070
                children: []
                pos: 18391
                length: 1127
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 19537
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19557
                      length: 15
                    pos: 19524
                    length: 1691
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 19637
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 19663
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 19716
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 19724
                                      length: 4
                                  children: []
                                  pos: 19716
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 19742
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 19765
                                      length: 4
                                  children: []
                                  pos: 19742
                                  length: 27
                              children: []
                              pos: 19716
                              length: 53
                          children: []
                          pos: 19715
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 19781
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 19829
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 19881
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 19893
                                      length: 4
                                  children: []
                                  pos: 19881
                                  length: 16
                              children: []
                              pos: 19880
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 19911
                              length: 94
                            pos: 19899
                            length: 116
                          pos: 19877
                          length: 616
                        pos: 19771
                        length: 730
                      pos: 19712
                      length: 789
                    - type: expression_statement
                      fields:
                        text: info = getBestJSDocInfo(objectLit);
                      children: []
                      pos: 20509
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = getBestLValue(objectLit);
                      children: []
                      pos: 20551
                      length: 39
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = getBestLValueName(lValue);
                      children: []
                      pos: 20597
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 20650
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 20693
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20701
                                      length: 4
                                  children: []
                                  pos: 20693
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 20709
                                  length: 27
                              children: []
                              pos: 20693
                              length: 43
                          children: []
                          pos: 20692
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 20748
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 20825
                          length: 23
                        pos: 20738
                        length: 118
                      pos: 20689
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 20868
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 20876
                                  length: 4
                              children: []
                              pos: 20868
                              length: 12
                          children: []
                          pos: 20867
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType();
                          children: []
                          pos: 20892
                          length: 48
                        pos: 20882
                        length: 66
                      pos: 20864
                      length: 84
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 20956
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!createdEnumType"
                              children: []
                              pos: 21079
                              length: 16
                          children: []
                          pos: 21078
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              processObjectLitProperties(
                                          t, objectLit, ObjectType.cast(objectLit.getJSType()));
                          children: []
                          pos: 21107
                          length: 94
                        pos: 21097
                        length: 112
                      pos: 21075
                      length: 134
                    pos: 19590
                    length: 1625
                children: []
                pos: 19524
                length: 1691
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 21470
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 21506
                      length: 15
                    pos: 21465
                    length: 1272
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType = getDeclaredType(
                                      t.getSourceName(), info, keyNode, value);
                                  JSType keyType = NodeUtil.getObjectLitKeyTypeFromValueType(
                                      keyNode, valueType);
                                  if (keyType != null) {
                                    // Try to declare this property in the current scope if it
                                    // has an authoritative name.
                                    String qualifiedName = getBestLValueName(keyNode);
                                    if (qualifiedName != null) {
                                      defineSlot(keyNode, objLit, qualifiedName, keyType, false);
                                    } else {
                                      setDeferredType(keyNode, keyType);
                                    }

                                    if (objLitType != null) {
                                      // Declare this property on its object literal.
                                      boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                                      objLitType.defineDeclaredProperty(
                                          memberName, keyType, isExtern, keyNode);
                                    }
                                  }
                                }
                      children: []
                      pos: 21567
                      length: 1164
                    pos: 21559
                    length: 1178
                children: []
                pos: 21465
                length: 1272
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 22988
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 23016
                      length: 17
                    pos: 22973
                    length: 689
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 23078
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode =
                                    node.getType() == Token.GETPROP ? node.getFirstChild() :
                                    NodeUtil.isObjectLitKey(node, node.getParent()) ? node.getParent() :
                                    null;
                      children: []
                      pos: 23106
                      length: 176
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 23293
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 23301
                                  length: 4
                              children: []
                              pos: 23293
                              length: 12
                          children: []
                          pos: 23292
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 23321
                                  length: 14
                              children: []
                              pos: 23320
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 23349
                              length: 54
                            pos: 23337
                            length: 76
                          pos: 23317
                          length: 310
                        pos: 23307
                        length: 328
                      pos: 23289
                      length: 346
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 23642
                      length: 14
                    pos: 23070
                    length: 592
                children: []
                pos: 22973
                length: 689
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 23817
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 23838
                      length: 6
                    pos: 23812
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 23864
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 23916
                      length: 46
                    pos: 23856
                    length: 112
                children: []
                pos: 23812
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 24029
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 24041
                      length: 6
                    pos: 24024
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 24070
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 24114
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 24156
                      length: 31
                    pos: 24062
                    length: 131
                children: []
                pos: 24024
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 24257
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 24267
                      length: 6
                    pos: 24252
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 24296
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 24338
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 24383
                              length: 23
                          children: []
                          pos: 24382
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 24422
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 24430
                                      length: 4
                                  children: []
                                  pos: 24422
                                  length: 12
                              children: []
                              pos: 24421
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 24479
                              length: 63
                            pos: 24436
                            length: 116
                          pos: 24418
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 24561
                          length: 102
                        pos: 24408
                        length: 263
                      pos: 24379
                      length: 440
                    pos: 24288
                    length: 537
                children: []
                pos: 24252
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 24887
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 24909
                      length: 6
                    pos: 24882
                    length: 822
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 24938
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = getBestLValue(n);
                      children: []
                      pos: 25092
                      length: 31
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = getBestJSDocInfo(n);
                      children: []
                      pos: 25130
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = getBestLValueName(lValue);
                      children: []
                      pos: 25174
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 25229
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 25392
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 25598
                              length: 33
                          children: []
                          pos: 25597
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 25643
                          length: 47
                        pos: 25633
                        length: 65
                      pos: 25594
                      length: 104
                    pos: 24930
                    length: 774
                children: []
                pos: 24882
                length: 822
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 26107
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 26118
                      length: 9
                    pos: 26094
                    length: 532
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 26176
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(sourceName, info, name,
                          value);
                      children: []
                      pos: 26243
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 26315
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26323
                                  length: 4
                              children: []
                              pos: 26315
                              length: 12
                          children: []
                          pos: 26314
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: CompilerInput input = compiler.getInput(sourceName);
                          children: []
                          pos: 26388
                          length: 52
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(input, sourceName);
                          children: []
                          pos: 26449
                          length: 46
                        - type: expression_statement
                          fields:
                            text: |-
                              type = input.isExtern() ?
                                          getNativeType(UNKNOWN_TYPE) : null;
                          children: []
                          pos: 26504
                          length: 73
                        pos: 26329
                        length: 256
                      pos: 26311
                      length: 274
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 26592
                      length: 28
                    pos: 26168
                    length: 458
                children: []
                pos: 26094
                length: 532
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 26972
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 27010
                      length: 17
                    pos: 26956
                    length: 350
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 27070
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 27078
                                  length: 4
                              children: []
                              pos: 27070
                              length: 12
                          children: []
                          pos: 27069
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 27094
                          length: 12
                        pos: 27084
                        length: 30
                      pos: 27066
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 27125
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 27135
                                      length: 4
                                  children: []
                                  pos: 27125
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                                  children: []
                                  pos: 27153
                                  length: 51
                              children: []
                              pos: 27125
                              length: 79
                          children: []
                          pos: 27124
                          length: 81
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 27216
                          length: 13
                        pos: 27206
                        length: 31
                      pos: 27121
                      length: 116
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 27244
                      length: 56
                    pos: 27058
                    length: 248
                children: []
                pos: 26956
                length: 350
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 28354
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 28391
                      length: 21
                    pos: 28333
                    length: 3854
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 28523
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 28642
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 28652
                                          length: 4
                                      children: []
                                      pos: 28642
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 28660
                                      length: 24
                                  children: []
                                  pos: 28642
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 28688
                                  length: 16
                              children: []
                              pos: 28642
                              length: 62
                          children: []
                          pos: 28641
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 28716
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 28779
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 28786
                                          length: 4
                                      children: []
                                      pos: 28779
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof FunctionType
                                      children: []
                                      pos: 28794
                                      length: 37
                                  children: []
                                  pos: 28779
                                  length: 52
                              children: []
                              pos: 28778
                              length: 54
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = (FunctionType) var.getType();
                              children: []
                              pos: 28845
                              length: 57
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 28918
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 28949
                                                  length: 25
                                              children: []
                                              pos: 28918
                                              length: 56
                                          children: []
                                          pos: 28917
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 28993
                                          length: 33
                                      children: []
                                      pos: 28917
                                      length: 109
                                  children: []
                                  pos: 28916
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 29042
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 29087
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 29095
                                                  length: 4
                                              children: []
                                              pos: 29087
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 29103
                                              length: 16
                                          children: []
                                          pos: 29087
                                          length: 32
                                      children: []
                                      pos: 29086
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 29137
                                      length: 63
                                    pos: 29121
                                    length: 93
                                  pos: 29083
                                  length: 131
                                pos: 29028
                                length: 198
                              pos: 28913
                              length: 313
                            pos: 28833
                            length: 403
                          pos: 28775
                          length: 461
                        pos: 28706
                        length: 538
                      pos: 28638
                      length: 606
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 29256
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29272
                                  length: 4
                              children: []
                              pos: 29256
                              length: 20
                          children: []
                          pos: 29255
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 29288
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.getType() == Token.FUNCTION;
                          children: []
                          pos: 29351
                          length: 87
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 29447
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 29498
                          length: 88
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                              : null;'
                          children: []
                          pos: 29595
                          length: 61
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 29670
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 29678
                                          length: 4
                                      children: []
                                      pos: 29670
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 29686
                                      length: 14
                                  children: []
                                  pos: 29670
                                  length: 30
                              children: []
                              pos: 29669
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 29714
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 29859
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 29917
                                      length: 21
                                  children: []
                                  pos: 29916
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = (FunctionType) type;
                                  children: []
                                  pos: 29954
                                  length: 35
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 30002
                                  length: 32
                                pos: 29940
                                length: 106
                              pos: 29913
                              length: 133
                            pos: 29702
                            length: 354
                          pos: 29666
                          length: 390
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 30070
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 30086
                                      length: 4
                                  children: []
                                  pos: 30070
                                  length: 20
                              children: []
                              pos: 30069
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenPropType = null;
                              children: []
                              pos: 30159
                              length: 39
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: lvalueNode
                                                  children: []
                                                  pos: 30213
                                                  length: 10
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 30227
                                                  length: 4
                                              children: []
                                              pos: 30213
                                              length: 18
                                            right:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: lvalueNode.getType()
                                                  children: []
                                                  pos: 30249
                                                  length: 20
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: Token.GETPROP
                                                  children: []
                                                  pos: 30273
                                                  length: 13
                                              children: []
                                              pos: 30249
                                              length: 37
                                          children: []
                                          pos: 30213
                                          length: 73
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: lvalueNode.isQualifiedName()
                                          children: []
                                          pos: 30304
                                          length: 28
                                      children: []
                                      pos: 30213
                                      length: 119
                                  children: []
                                  pos: 30212
                                  length: 121
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      Var var = scope.getVar(
                                                      lvalueNode.getFirstChild().getQualifiedName());
                                  children: []
                                  pos: 30348
                                  length: 87
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 30452
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 30459
                                              length: 4
                                          children: []
                                          pos: 30452
                                          length: 11
                                      children: []
                                      pos: 30451
                                      length: 13
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: local_variable_declaration
                                      fields:
                                        text: ObjectType ownerType = ObjectType.cast(var.getType());
                                      children: []
                                      pos: 30481
                                      length: 54
                                    - type: if_statement
                                      fields:
                                        condition:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: ownerType
                                                  children: []
                                                  pos: 30554
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 30567
                                                  length: 4
                                              children: []
                                              pos: 30554
                                              length: 17
                                          children: []
                                          pos: 30553
                                          length: 19
                                      children:
                                      - type: block
                                        fields: {}
                                        children:
                                        - type: local_variable_declaration
                                          fields:
                                            text: String propName = lvalueNode.getLastChild().getString();
                                          children: []
                                          pos: 30591
                                          length: 56
                                        - type: expression_statement
                                          fields:
                                            text: |-
                                              overriddenPropType =
                                                                  findOverriddenFunction(ownerType, propName);
                                          children: []
                                          pos: 30664
                                          length: 85
                                        pos: 30573
                                        length: 192
                                      pos: 30550
                                      length: 215
                                    pos: 30465
                                    length: 314
                                  pos: 30448
                                  length: 331
                                pos: 30334
                                length: 457
                              pos: 30209
                              length: 582
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setSourceNode(fnRoot)
                                                .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                                .inferTemplateTypeName(info)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 30803
                              length: 366
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 31218
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: lvalueNode
                                              children: []
                                              pos: 31269
                                              length: 10
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31283
                                              length: 4
                                          children: []
                                          pos: 31269
                                          length: 18
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: lvalueNode.getType()
                                              children: []
                                              pos: 31305
                                              length: 20
                                            right:
                                              type: field_access
                                              fields:
                                                text: Token.GETPROP
                                              children: []
                                              pos: 31329
                                              length: 13
                                          children: []
                                          pos: 31305
                                          length: 37
                                      children: []
                                      pos: 31269
                                      length: 73
                                  children: []
                                  pos: 31268
                                  length: 75
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: Node objNode = lvalueNode.getFirstChild();
                                  children: []
                                  pos: 31358
                                  length: 42
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: objNode.getType()
                                                  children: []
                                                  pos: 31417
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: Token.GETPROP
                                                  children: []
                                                  pos: 31438
                                                  length: 13
                                              children: []
                                              pos: 31417
                                              length: 34
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: objNode.getLastChild().getString().equals("prototype")
                                              children: []
                                              pos: 31471
                                              length: 54
                                          children: []
                                          pos: 31417
                                          length: 108
                                      children: []
                                      pos: 31416
                                      length: 110
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: builder.inferThisType(info, objNode.getFirstChild());
                                      children: []
                                      pos: 31543
                                      length: 53
                                    - type: expression_statement
                                      fields:
                                        text: searchedForThisType = true;
                                      children: []
                                      pos: 31611
                                      length: 27
                                    pos: 31527
                                    length: 125
                                  pos: 31413
                                  length: 403
                                pos: 31344
                                length: 484
                              pos: 31265
                              length: 563
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 31844
                                      length: 20
                                  children: []
                                  pos: 31843
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info, (Node) null);
                                  children: []
                                  pos: 31880
                                  length: 41
                                pos: 31866
                                length: 67
                              pos: 31840
                              length: 93
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .inferReturnStatementsAsLastResort(fnBlock)
                                                .buildAndRegister();
                              children: []
                              pos: 31945
                              length: 172
                            pos: 30092
                            length: 2035
                          pos: 30066
                          length: 2061
                        pos: 29278
                        length: 2857
                      pos: 29252
                      length: 2883
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 32161
                      length: 20
                    pos: 28514
                    length: 3673
                children: []
                pos: 28333
                length: 3854
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 32301
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 32333
                      length: 20
                    pos: 32280
                    length: 740
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 32466
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: instanceof_expression
                              fields:
                                text: propType instanceof FunctionType
                              children: []
                              pos: 32531
                              length: 32
                          children: []
                          pos: 32530
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return (FunctionType) propType;
                          children: []
                          pos: 32575
                          length: 31
                        pos: 32565
                        length: 49
                      pos: 32527
                      length: 467
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 33002
                      length: 12
                    pos: 32372
                    length: 648
                children: []
                pos: 32280
                length: 740
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 33727
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 33751
                      length: 11
                    pos: 33710
                    length: 1783
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 33826
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 33866
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 33928
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 33964
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 33974
                                      length: 4
                                  children: []
                                  pos: 33964
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 33982
                                  length: 24
                              children: []
                              pos: 33964
                              length: 42
                          children: []
                          pos: 33963
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 34053
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 34116
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 34123
                                          length: 4
                                      children: []
                                      pos: 34116
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 34131
                                      length: 33
                                  children: []
                                  pos: 34116
                                  length: 48
                              children: []
                              pos: 34115
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 34178
                              length: 36
                            pos: 34166
                            length: 58
                          pos: 34112
                          length: 112
                        pos: 34008
                        length: 224
                      pos: 33960
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 34244
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 34256
                                  length: 4
                              children: []
                              pos: 34244
                              length: 16
                          children: []
                          pos: 34243
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 34272
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, elementsType);
                          children: []
                          pos: 34373
                          length: 59
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 34446
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 34456
                                          length: 4
                                      children: []
                                      pos: 34446
                                      length: 14
                                    right:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: rValue.getType()
                                          children: []
                                          pos: 34464
                                          length: 16
                                        right:
                                          type: field_access
                                          fields:
                                            text: Token.OBJECTLIT
                                          children: []
                                          pos: 34484
                                          length: 15
                                      children: []
                                      pos: 34464
                                      length: 35
                                  children: []
                                  pos: 34446
                                  length: 53
                              children: []
                              pos: 34445
                              length: 55
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 34548
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (enumType.hasOwnProperty(keyName)) {
                                                compiler.report(JSError.make(sourceName, key, ENUM_DUP, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 34593
                              length: 729
                            pos: 34501
                            length: 831
                          pos: 34442
                          length: 890
                        pos: 34262
                        length: 1078
                      pos: 34240
                      length: 1100
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 35352
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35360
                                      length: 4
                                  children: []
                                  pos: 35352
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 35368
                                  length: 16
                              children: []
                              pos: 35352
                              length: 32
                          children: []
                          pos: 35351
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 35396
                          length: 59
                        pos: 35386
                        length: 77
                      pos: 35348
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 35471
                      length: 16
                    pos: 33818
                    length: 1675
                children: []
                pos: 33710
                length: 1783
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 35916
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 35927
                      length: 9
                    pos: 35903
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 35972
                      length: 45
                    pos: 35964
                    length: 59
                children: []
                pos: 35903
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 36517
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 36528
                      length: 6
                    pos: 36512
                    length: 808
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 36588
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.getType()
                                  children: []
                                  pos: 36790
                                  length: 11
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.NAME
                                  children: []
                                  pos: 36805
                                  length: 10
                              children: []
                              pos: 36790
                              length: 25
                          children: []
                          pos: 36789
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.getType() == Token.FUNCTION ||
                                          parent.getType() == Token.VAR ||
                                          parent.getType() == Token.LP ||
                                          parent.getType() == Token.CATCH);
                          children: []
                          pos: 36827
                          length: 213
                        pos: 36817
                        length: 231
                      pos: 36786
                      length: 461
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 37254
                      length: 60
                    pos: 36580
                    length: 740
                children: []
                pos: 36512
                length: 808
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 37761
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 37772
                      length: 6
                    pos: 37756
                    length: 4784
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 37861
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.getType() == Token.NAME && scope.isGlobal();
                      children: []
                      pos: 37922
                      length: 68
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.getType() == Token.VAR ||
                                     parent.getType() == Token.FUNCTION);
                      children: []
                      pos: 37997
                      length: 152
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 38357
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getType()
                                          children: []
                                          pos: 38399
                                          length: 11
                                        right:
                                          type: field_access
                                          fields:
                                            text: Token.GETPROP
                                          children: []
                                          pos: 38414
                                          length: 13
                                      children: []
                                      pos: 38399
                                      length: 28
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 38431
                                      length: 17
                                  children: []
                                  pos: 38399
                                  length: 49
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 38462
                                  length: 29
                              children: []
                              pos: 38399
                              length: 92
                          children: []
                          pos: 38398
                          length: 94
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 38503
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 38673
                                  length: 44
                              children: []
                              pos: 38672
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 38731
                              length: 42
                            pos: 38719
                            length: 64
                          pos: 38669
                          length: 114
                        pos: 38493
                        length: 298
                      pos: 38395
                      length: 396
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 38839
                              length: 48
                          children: []
                          pos: 38838
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 38899
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              validator.expectUndeclaredVariable(
                                          sourceName, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 38959
                          length: 99
                        pos: 38889
                        length: 177
                      pos: 38835
                      length: 3223
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: isGlobalVar
                                          children: []
                                          pos: 42070
                                          length: 11
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: '"Window".equals(variableName)'
                                          children: []
                                          pos: 42085
                                          length: 29
                                      children: []
                                      pos: 42070
                                      length: 44
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: type instanceof FunctionType
                                      children: []
                                      pos: 42128
                                      length: 28
                                  children: []
                                  pos: 42070
                                  length: 86
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 42170
                                  length: 20
                              children: []
                              pos: 42070
                              length: 120
                          children: []
                          pos: 42069
                          length: 122
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 42202
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 42316
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 42378
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn(((FunctionType) type).getInstanceType());
                          children: []
                          pos: 42437
                          length: 89
                        pos: 42192
                        length: 342
                      pos: 42066
                      length: 468
                    pos: 37853
                    length: 4687
                children: []
                pos: 37756
                length: 4784
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 42654
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 42681
                      length: 6
                    pos: 42638
                    length: 302
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 42697
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: root.getType()
                                  children: []
                                  pos: 42755
                                  length: 14
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.NAME
                                  children: []
                                  pos: 42773
                                  length: 10
                              children: []
                              pos: 42755
                              length: 28
                          children: []
                          pos: 42754
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 42795
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 42849
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42856
                                      length: 4
                                  children: []
                                  pos: 42849
                                  length: 11
                              children: []
                              pos: 42848
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.isGlobal();
                              children: []
                              pos: 42874
                              length: 22
                            pos: 42862
                            length: 44
                          pos: 42845
                          length: 61
                        pos: 42785
                        length: 129
                      pos: 42751
                      length: 163
                    - type: return_statement
                      fields:
                        text: return false;
                      children: []
                      pos: 42921
                      length: 13
                    pos: 42689
                    length: 251
                children: []
                pos: 42638
                length: 302
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 43310
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 43326
                      length: 17
                    pos: 43295
                    length: 2190
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 43417
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 43425
                                      length: 4
                                  children: []
                                  pos: 43417
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 43433
                                  length: 14
                              children: []
                              pos: 43417
                              length: 30
                          children: []
                          pos: 43416
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                              info);
                          children: []
                          pos: 43459
                          length: 61
                        pos: 43449
                        length: 79
                      pos: 43413
                      length: 1997
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                          info);
                      children: []
                      pos: 45418
                      length: 61
                    pos: 43405
                    length: 2080
                children: []
                pos: 43295
                length: 2190
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 45701
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 45737
                      length: 15
                    pos: 45688
                    length: 2312
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 45783
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 45884
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 45900
                                  length: 4
                              children: []
                              pos: 45884
                              length: 20
                          children: []
                          pos: 45883
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType superClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.superclassName));
                          children: []
                          pos: 45916
                          length: 104
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType subClass = ObjectType.cast(
                                          typeRegistry.getType(relationship.subclassName));
                          children: []
                          pos: 46029
                          length: 100
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: superClass
                                          children: []
                                          pos: 46142
                                          length: 10
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 46156
                                          length: 4
                                      children: []
                                      pos: 46142
                                      length: 18
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: subClass
                                          children: []
                                          pos: 46164
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 46176
                                          length: 4
                                      children: []
                                      pos: 46164
                                      length: 16
                                  children: []
                                  pos: 46142
                                  length: 38
                              children: []
                              pos: 46141
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superCtor = superClass.getConstructor();
                              children: []
                              pos: 46194
                              length: 53
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType subCtor = subClass.getConstructor();
                              children: []
                              pos: 46258
                              length: 49
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: field_access
                                          fields:
                                            text: relationship.type
                                          children: []
                                          pos: 46323
                                          length: 17
                                        right:
                                          type: field_access
                                          fields:
                                            text: SubclassType.INHERITS
                                          children: []
                                          pos: 46344
                                          length: 21
                                      children: []
                                      pos: 46323
                                      length: 42
                                  children: []
                                  pos: 46322
                                  length: 44
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 46381
                                  length: 54
                                pos: 46367
                                length: 80
                              pos: 46319
                              length: 128
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 46463
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 46476
                                              length: 4
                                          children: []
                                          pos: 46463
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 46484
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 46495
                                              length: 4
                                          children: []
                                          pos: 46484
                                          length: 15
                                      children: []
                                      pos: 46463
                                      length: 36
                                  children: []
                                  pos: 46462
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 46515
                                  length: 99
                                pos: 46501
                                length: 125
                              pos: 46459
                              length: 167
                            pos: 46182
                            length: 454
                          pos: 46138
                          length: 498
                        pos: 45906
                        length: 738
                      pos: 45880
                      length: 764
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 46652
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 46755
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 46783
                                  length: 4
                              children: []
                              pos: 46755
                              length: 32
                          children: []
                          pos: 46754
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 46799
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 46913
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 46927
                                      length: 4
                                  children: []
                                  pos: 46913
                                  length: 18
                              children: []
                              pos: 46912
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 46945
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 47017
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 47033
                                          length: 4
                                      children: []
                                      pos: 47017
                                      length: 20
                                  children: []
                                  pos: 47016
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 47053
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 47152
                                  length: 92
                                pos: 47039
                                length: 217
                              pos: 47013
                              length: 243
                            pos: 46933
                            length: 333
                          pos: 46909
                          length: 357
                        pos: 46789
                        length: 485
                      pos: 46751
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 47282
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 47391
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 47415
                                  length: 4
                              children: []
                              pos: 47391
                              length: 28
                          children: []
                          pos: 47390
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 47431
                          length: 48
                        pos: 47421
                        length: 66
                      pos: 47387
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(t, n);
                      children: []
                      pos: 47495
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 47598
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 47619
                                  length: 4
                              children: []
                              pos: 47598
                              length: 25
                          children: []
                          pos: 47597
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType type = ObjectType.cast(
                                          typeRegistry.getType(objectLiteralCast.typeName));
                          children: []
                          pos: 47635
                          length: 97
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: type
                                          children: []
                                          pos: 47745
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 47753
                                          length: 4
                                      children: []
                                      pos: 47745
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: type.getConstructor()
                                          children: []
                                          pos: 47761
                                          length: 21
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 47786
                                          length: 4
                                      children: []
                                      pos: 47761
                                      length: 29
                                  children: []
                                  pos: 47745
                                  length: 45
                              children: []
                              pos: 47744
                              length: 47
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: setDeferredType(objectLiteralCast.objectNode,
                                  type);
                              children: []
                              pos: 47804
                              length: 52
                            pos: 47792
                            length: 74
                          pos: 47741
                          length: 245
                        pos: 47625
                        length: 369
                      pos: 47594
                      length: 400
                    pos: 45775
                    length: 2225
                children: []
                pos: 45688
                length: 2312
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 48097
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 48132
                      length: 41
                    pos: 48084
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 48183
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 48300
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 48423
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 48562
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 48581
                                          length: 4
                                      children: []
                                      pos: 48562
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 48599
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 48621
                                          length: 4
                                      children: []
                                      pos: 48599
                                      length: 26
                                  children: []
                                  pos: 48562
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 48639
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 48662
                                      length: 4
                                  children: []
                                  pos: 48639
                                  length: 27
                              children: []
                              pos: 48562
                              length: 104
                          children: []
                          pos: 48561
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 48678
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 48749
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 48826
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 48910
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 48927
                                              length: 4
                                          children: []
                                          pos: 48910
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 48935
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 48955
                                              length: 4
                                          children: []
                                          pos: 48935
                                          length: 24
                                      children: []
                                      pos: 48910
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 48975
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 48996
                                          length: 4
                                      children: []
                                      pos: 48975
                                      length: 25
                                  children: []
                                  pos: 48910
                                  length: 90
                              children: []
                              pos: 48909
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 49014
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 49122
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 49224
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 49414
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 49599
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 49665
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 49835
                              length: 58
                            pos: 49002
                            length: 901
                          pos: 48906
                          length: 997
                        pos: 48668
                        length: 1243
                      pos: 48558
                      length: 1353
                    pos: 48175
                    length: 1742
                children: []
                pos: 48084
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 50351
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50377
                      length: 15
                    pos: 50346
                    length: 4293
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 50462
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 50504
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 50559
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 50602
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 50656
                      length: 64
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 50967
                              length: 28
                          children: []
                          pos: 50966
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 51007
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 51051
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 51059
                                      length: 4
                                  children: []
                                  pos: 51051
                                  length: 12
                              children: []
                              pos: 51050
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!qVar.isTypeInferred()"
                                      children: []
                                      pos: 51081
                                      length: 22
                                  children: []
                                  pos: 51080
                                  length: 24
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: return_statement
                                  fields:
                                    text: return;
                                  children: []
                                  pos: 51178
                                  length: 7
                                pos: 51105
                                length: 92
                              pos: 51077
                              length: 120
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: qVar.getScope()
                                          children: []
                                          pos: 51212
                                          length: 15
                                        right:
                                          type: identifier
                                          fields:
                                            text: scope
                                          children: []
                                          pos: 51231
                                          length: 5
                                      children: []
                                      pos: 51212
                                      length: 24
                                  children: []
                                  pos: 51211
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scope.undeclare(qVar);
                                  children: []
                                  pos: 51252
                                  length: 22
                                pos: 51238
                                length: 48
                              pos: 51208
                              length: 78
                            pos: 51065
                            length: 231
                          pos: 51047
                          length: 249
                        pos: 50997
                        length: 307
                      pos: 50963
                      length: 341
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(t.getSourceName(),
                          info, n, rhsValue);
                      children: []
                      pos: 51949
                      length: 73
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 52033
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52046
                                      length: 4
                                  children: []
                                  pos: 52033
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 52054
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52066
                                      length: 4
                                  children: []
                                  pos: 52054
                                  length: 16
                              children: []
                              pos: 52033
                              length: 37
                          children: []
                          pos: 52032
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 52117
                          length: 33
                        pos: 52072
                        length: 86
                      pos: 52029
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 52170
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52183
                                  length: 4
                              children: []
                              pos: 52170
                              length: 17
                          children: []
                          pos: 52169
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: parent.getType()
                                      children: []
                                      pos: 52203
                                      length: 16
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.EXPR_RESULT
                                      children: []
                                      pos: 52223
                                      length: 17
                                  children: []
                                  pos: 52203
                                  length: 37
                              children: []
                              pos: 52202
                              length: 39
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 52254
                              length: 148
                            pos: 52242
                            length: 170
                          pos: 52199
                          length: 213
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 52422
                          length: 7
                        pos: 52189
                        length: 248
                      pos: 52166
                      length: 271
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 52445
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 52480
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52488
                                  length: 4
                              children: []
                              pos: 52480
                              length: 12
                          children: []
                          pos: 52479
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (info.isConstant() && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 52556
                          length: 241
                        pos: 52494
                        length: 311
                      pos: 52476
                      length: 329
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: inferred
                              children: []
                              pos: 52817
                              length: 8
                          children: []
                          pos: 52816
                          length: 10
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(rhsValue != null &&
                                          rhsValue.getType() == Token.FUNCTION &&
                                          !scope.isDeclared(qName, false));
                          children: []
                          pos: 52879
                          length: 130
                        pos: 52827
                        length: 190
                      pos: 52813
                      length: 204
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 53029
                              length: 9
                          children: []
                          pos: 53028
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 53050
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 53111
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 53124
                                      length: 4
                                  children: []
                                  pos: 53111
                                  length: 17
                              children: []
                              pos: 53110
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 53243
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 53326
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 53380
                                                  length: 42
                                              children: []
                                              pos: 53326
                                              length: 96
                                          children: []
                                          pos: 53325
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 53443
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 53455
                                                          length: 31
                                                      children: []
                                                      pos: 53443
                                                      length: 43
                                                  children: []
                                                  pos: 53442
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 53506
                                                  length: 27
                                              children: []
                                              pos: 53442
                                              length: 91
                                          children: []
                                          pos: 53441
                                          length: 93
                                      children: []
                                      pos: 53325
                                      length: 209
                                  children: []
                                  pos: 53324
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, isExtern, n);
                                  children: []
                                  pos: 53624
                                  length: 67
                                pos: 53536
                                length: 167
                              pos: 53321
                              length: 382
                            pos: 53130
                            length: 583
                          pos: 53107
                          length: 606
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 53855
                          length: 43
                        pos: 53040
                        length: 866
                      pos: 53025
                      length: 1608
                    pos: 50454
                    length: 4185
                children: []
                pos: 50346
                length: 4293
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 54884
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 54898
                      length: 15
                    pos: 54865
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 54923
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 54972
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 54984
                                  length: 4
                              children: []
                              pos: 54972
                              length: 16
                          children: []
                          pos: 54971
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 55000
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 55050
                          length: 110
                        pos: 54990
                        length: 178
                      pos: 54968
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 55175
                      length: 12
                    pos: 54915
                    length: 278
                children: []
                pos: 54865
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 55335
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 55330
                    length: 1192
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, isExtern, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 55369
                      length: 1147
                    pos: 55361
                    length: 1161
                children: []
                pos: 55330
                length: 1192
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 56674
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 56749
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 56791
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 56893
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 56899
                            length: 15
                          pos: 56881
                          length: 483
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: equals
                                    fields:
                                      left:
                                        type: method_invocation
                                        fields:
                                          text: n.getType()
                                        children: []
                                        pos: 56951
                                        length: 11
                                      right:
                                        type: field_access
                                        fields:
                                          text: Token.EXPR_RESULT
                                        children: []
                                        pos: 56966
                                        length: 17
                                    children: []
                                    pos: 56951
                                    length: 32
                                children: []
                                pos: 56950
                                length: 34
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 56997
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 57047
                                        length: 15
                                    children: []
                                    pos: 57046
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 57064
                                    length: 282
                                children: []
                                pos: 57039
                                length: 307
                              pos: 56985
                              length: 371
                            pos: 56947
                            length: 409
                          pos: 56937
                          length: 427
                      children: []
                      pos: 56881
                      length: 483
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 57385
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 57404
                            length: 15
                          pos: 57372
                          length: 1034
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 57500
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 57750
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 57758
                                                length: 4
                                            children: []
                                            pos: 57750
                                            length: 12
                                          right:
                                            type: not_equals
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: member.getType()
                                                children: []
                                                pos: 57778
                                                length: 16
                                              right:
                                                type: field_access
                                                fields:
                                                  text: Token.GETPROP
                                                children: []
                                                pos: 57798
                                                length: 13
                                            children: []
                                            pos: 57778
                                            length: 33
                                        children: []
                                        pos: 57750
                                        length: 61
                                      right:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: method_invocation
                                            fields:
                                              text: member.getFirstChild().getType()
                                            children: []
                                            pos: 57827
                                            length: 32
                                          right:
                                            type: field_access
                                            fields:
                                              text: Token.THIS
                                            children: []
                                            pos: 57863
                                            length: 10
                                        children: []
                                        pos: 57827
                                        length: 46
                                    children: []
                                    pos: 57750
                                    length: 123
                                children: []
                                pos: 57749
                                length: 125
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 57887
                                length: 7
                              pos: 57875
                              length: 29
                            pos: 57746
                            length: 158
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 57914
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(t.getSourceName(),
                                info, member, value);
                            children: []
                            pos: 57966
                            length: 72
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 58047
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 58094
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 58104
                                            length: 4
                                        children: []
                                        pos: 58094
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 58125
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.NAME
                                                    children: []
                                                    pos: 58143
                                                    length: 10
                                                children: []
                                                pos: 58125
                                                length: 28
                                              right:
                                                type: equals
                                                fields:
                                                  left:
                                                    type: method_invocation
                                                    fields:
                                                      text: name.getType()
                                                    children: []
                                                    pos: 58157
                                                    length: 14
                                                  right:
                                                    type: field_access
                                                    fields:
                                                      text: Token.STRING
                                                    children: []
                                                    pos: 58175
                                                    length: 12
                                                children: []
                                                pos: 58157
                                                length: 30
                                            children: []
                                            pos: 58125
                                            length: 62
                                        children: []
                                        pos: 58124
                                        length: 64
                                    children: []
                                    pos: 58094
                                    length: 94
                                children: []
                                pos: 58093
                                length: 96
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  false /* functions with implementations are not in externs */,
                                                  member);
                                children: []
                                pos: 58202
                                length: 186
                              pos: 58190
                              length: 208
                            pos: 58090
                            length: 308
                          pos: 57490
                          length: 916
                      children: []
                      pos: 57372
                      length: 1034
                    pos: 56654
                    length: 1758
                children: []
                pos: 56654
                length: 1758
              pos: 14496
              length: 43945
          children: []
          pos: 14496
          length: 43945
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 58538
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 58560
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 58589
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 58625
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 58662
                length: 168
              pos: 58511
              length: 323
          children: []
          pos: 58511
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 58969
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 59024
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 59363
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 59369
                      length: 15
                    pos: 59341
                    length: 489
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 59415
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 59457
                              length: 11
                          children: []
                          pos: 59456
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.ASSIGN:
                                        // Handle typedefs.
                                        checkForOldStyleTypedef(t, n);
                                        break;

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForOldStyleTypedef(t, n);
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 59470
                          length: 354
                      children: []
                      pos: 59449
                      length: 375
                    pos: 59407
                    length: 423
                children: []
                pos: 59341
                length: 489
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 59855
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 59890
                      length: 15
                    pos: 59836
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 59975
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 60010
                      length: 62
                    pos: 59967
                    length: 111
                children: []
                pos: 59836
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 60258
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 60283
                      length: 15
                    pos: 60245
                    length: 974
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 60344
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 60352
                                      length: 4
                                  children: []
                                  pos: 60344
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 60360
                                  length: 22
                              children: []
                              pos: 60344
                              length: 38
                          children: []
                          pos: 60343
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 60394
                          length: 7
                        pos: 60384
                        length: 25
                      pos: 60340
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 60417
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 60474
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60485
                                  length: 4
                              children: []
                              pos: 60474
                              length: 15
                          children: []
                          pos: 60473
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 60501
                          length: 7
                        pos: 60491
                        length: 25
                      pos: 60470
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                      children: []
                      pos: 60690
                      length: 63
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 60761
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 60842
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60854
                                  length: 4
                              children: []
                              pos: 60842
                              length: 16
                          children: []
                          pos: 60841
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 60870
                          length: 118
                        pos: 60860
                        length: 136
                      pos: 60838
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 61004
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: candidate.getType()
                                  children: []
                                  pos: 61069
                                  length: 19
                                right:
                                  type: field_access
                                  fields:
                                    text: Token.GETPROP
                                  children: []
                                  pos: 61092
                                  length: 13
                              children: []
                              pos: 61069
                              length: 36
                          children: []
                          pos: 61068
                          length: 38
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 61117
                          length: 88
                        pos: 61107
                        length: 106
                      pos: 61065
                      length: 148
                    pos: 60332
                    length: 887
                children: []
                pos: 60245
                length: 974
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForOldStyleTypedef
                    children: []
                    pos: 61400
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 61424
                      length: 15
                    pos: 61387
                    length: 1020
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = codingConvention.identifyTypeDefAssign(candidate);
                      children: []
                      pos: 61493
                      length: 67
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 61571
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61582
                                  length: 4
                              children: []
                              pos: 61571
                              length: 15
                          children: []
                          pos: 61570
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                          children: []
                          pos: 61770
                          length: 63
                        - type: local_variable_declaration
                          fields:
                            text: JSDocInfo info = candidate.getJSDocInfo();
                          children: []
                          pos: 61843
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: JSType realType = null;
                          children: []
                          pos: 61894
                          length: 23
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 61930
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 61938
                                          length: 4
                                      children: []
                                      pos: 61930
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: info.getType()
                                          children: []
                                          pos: 61946
                                          length: 14
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 61964
                                          length: 4
                                      children: []
                                      pos: 61946
                                      length: 22
                                  children: []
                                  pos: 61930
                                  length: 38
                              children: []
                              pos: 61929
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: realType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 61982
                              length: 56
                            pos: 61970
                            length: 78
                          pos: 61926
                          length: 122
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: realType
                                      children: []
                                      pos: 62062
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 62074
                                      length: 4
                                  children: []
                                  pos: 62062
                                  length: 16
                              children: []
                              pos: 62061
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(
                                                    t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                              children: []
                              pos: 62092
                              length: 122
                            pos: 62080
                            length: 144
                          pos: 62058
                          length: 166
                        - type: expression_statement
                          fields:
                            text: typeRegistry.overwriteDeclaredType(typedef, realType);
                          children: []
                          pos: 62234
                          length: 54
                        pos: 61588
                        length: 813
                      pos: 61567
                      length: 834
                    pos: 61457
                    length: 950
                children: []
                pos: 61387
                length: 1020
              pos: 58949
              length: 3462
          children: []
          pos: 58949
          length: 3462
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 62563
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 62683
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 62821
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 62816
                    length: 87
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 62837
                      length: 60
                    pos: 62829
                    length: 74
                children: []
                pos: 62816
                length: 87
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 63189
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 63195
                      length: 15
                    pos: 63167
                    length: 284
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 63245
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 63250
                                  length: 19
                              children: []
                              pos: 63245
                              length: 24
                          children: []
                          pos: 63244
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 63271
                        length: 7
                      pos: 63241
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getType()
                                      children: []
                                      pos: 63290
                                      length: 11
                                    right:
                                      type: field_access
                                      fields:
                                        text: Token.LP
                                      children: []
                                      pos: 63305
                                      length: 8
                                  children: []
                                  pos: 63290
                                  length: 23
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 63317
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 63327
                                      length: 19
                                  children: []
                                  pos: 63317
                                  length: 29
                              children: []
                              pos: 63290
                              length: 56
                          children: []
                          pos: 63289
                          length: 58
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 63358
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 63396
                          length: 7
                        pos: 63348
                        length: 63
                      pos: 63286
                      length: 125
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 63419
                      length: 26
                    pos: 63233
                    length: 218
                children: []
                pos: 63167
                length: 284
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 63532
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 63553
                      length: 11
                    pos: 63519
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 63610
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 63658
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 63708
                              length: 17
                          children: []
                          pos: 63707
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 63737
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 63789
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 63798
                                          length: 4
                                      children: []
                                      pos: 63789
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 63983
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 64006
                                                  length: 4
                                              children: []
                                              pos: 63983
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 64159
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 64186
                                                  length: 6
                                              children: []
                                              pos: 64159
                                              length: 33
                                          children: []
                                          pos: 63983
                                          length: 209
                                      children: []
                                      pos: 63982
                                      length: 211
                                  children: []
                                  pos: 63789
                                  length: 404
                              children: []
                              pos: 63788
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 64207
                              length: 58
                            pos: 64195
                            length: 80
                          pos: 63785
                          length: 490
                        pos: 63727
                        length: 556
                      pos: 63704
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 64291
                      length: 25
                    pos: 63566
                    length: 756
                children: []
                pos: 63519
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 64404
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 64421
                      length: 17
                    pos: 64391
                    length: 843
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 64448
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 64515
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = (FunctionType) functionNode.getJSType();
                      children: []
                      pos: 64558
                      length: 68
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 64637
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 64653
                                  length: 4
                              children: []
                              pos: 64637
                              length: 20
                          children: []
                          pos: 64636
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 64669
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 64738
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 64757
                                      length: 4
                                  children: []
                                  pos: 64738
                                  length: 23
                              children: []
                              pos: 64737
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 64775
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), true);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 64840
                              length: 370
                            pos: 64763
                            length: 457
                          pos: 64734
                          length: 486
                        pos: 64659
                        length: 569
                      pos: 64633
                      length: 595
                    pos: 64440
                    length: 794
                children: []
                pos: 64391
                length: 843
              pos: 62543
              length: 2719
          children: []
          pos: 62543
          length: 2719
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBestJSDocInfo
              children: []
              pos: 65358
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 65375
                length: 6
              pos: 65341
              length: 614
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JSDocInfo info = n.getJSDocInfo();
                children: []
                pos: 65389
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: info
                            children: []
                            pos: 65432
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 65440
                            length: 4
                        children: []
                        pos: 65432
                        length: 12
                    children: []
                    pos: 65431
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node parent = n.getParent();
                    children: []
                    pos: 65454
                    length: 28
                  - type: local_variable_declaration
                    fields:
                      text: int parentType = parent.getType();
                    children: []
                    pos: 65489
                    length: 34
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: parentType
                                children: []
                                pos: 65534
                                length: 10
                              right:
                                type: field_access
                                fields:
                                  text: Token.NAME
                                children: []
                                pos: 65548
                                length: 10
                            children: []
                            pos: 65534
                            length: 24
                        children: []
                        pos: 65533
                        length: 26
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: info = parent.getJSDocInfo();
                        children: []
                        pos: 65570
                        length: 29
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: and
                                fields:
                                  left:
                                    type: equals
                                    fields:
                                      left:
                                        type: identifier
                                        fields:
                                          text: info
                                        children: []
                                        pos: 65612
                                        length: 4
                                      right:
                                        type: null_literal
                                        fields: {}
                                        children: []
                                        pos: 65620
                                        length: 4
                                    children: []
                                    pos: 65612
                                    length: 12
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: parent.getParent().hasOneChild()
                                    children: []
                                    pos: 65628
                                    length: 32
                                children: []
                                pos: 65612
                                length: 48
                            children: []
                            pos: 65611
                            length: 50
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: info = parent.getParent().getJSDocInfo();
                            children: []
                            pos: 65674
                            length: 41
                          pos: 65662
                          length: 63
                        pos: 65608
                        length: 117
                      pos: 65560
                      length: 173
                    pos: 65530
                    length: 398
                  pos: 65446
                  length: 488
                pos: 65428
                length: 506
              - type: return_statement
                fields:
                  text: return info;
                children: []
                pos: 65939
                length: 12
              pos: 65383
              length: 572
          children: []
          pos: 65341
          length: 614
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBestLValue
              children: []
              pos: 66050
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 66064
                length: 6
              pos: 66030
              length: 515
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Node parent = n.getParent();
                children: []
                pos: 66078
                length: 28
              - type: local_variable_declaration
                fields:
                  text: int parentType = parent.getType();
                children: []
                pos: 66111
                length: 34
              - type: local_variable_declaration
                fields:
                  text: boolean isFunctionDeclaration = NodeUtil.isFunctionDeclaration(n);
                children: []
                pos: 66150
                length: 66
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: isFunctionDeclaration
                        children: []
                        pos: 66225
                        length: 21
                    children: []
                    pos: 66224
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return n.getFirstChild();
                    children: []
                    pos: 66256
                    length: 25
                  pos: 66248
                  length: 39
                pos: 66221
                length: 303
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 66529
                length: 12
              pos: 66072
              length: 473
          children: []
          pos: 66030
          length: 515
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBestLValueName
              children: []
              pos: 66620
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node lValue"
                children: []
                pos: 66638
                length: 21
              pos: 66598
              length: 533
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: lValue
                                children: []
                                pos: 66671
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 66681
                                length: 4
                            children: []
                            pos: 66671
                            length: 14
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: lValue.getParent()
                                children: []
                                pos: 66689
                                length: 18
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 66711
                                length: 4
                            children: []
                            pos: 66689
                            length: 26
                        children: []
                        pos: 66671
                        length: 44
                    children: []
                    pos: 66670
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 66725
                    length: 12
                  pos: 66717
                  length: 26
                pos: 66667
                length: 76
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                        children: []
                        pos: 66752
                        length: 51
                    children: []
                    pos: 66751
                    length: 53
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node owner = getBestLValue(lValue.getParent());
                    children: []
                    pos: 66813
                    length: 47
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: owner
                                children: []
                                pos: 66871
                                length: 5
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 66880
                                length: 4
                            children: []
                            pos: 66871
                            length: 13
                        children: []
                        pos: 66870
                        length: 15
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String ownerName = getBestLValueName(owner);
                        children: []
                        pos: 66896
                        length: 44
                      - type: if_statement
                        fields:
                          condition:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: ownerName
                                    children: []
                                    pos: 66953
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 66966
                                    length: 4
                                children: []
                                pos: 66953
                                length: 17
                            children: []
                            pos: 66952
                            length: 19
                        children:
                        - type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return ownerName + "." + NodeUtil.getObjectLitKeyName(lValue);
                            children: []
                            pos: 66984
                            length: 62
                          pos: 66972
                          length: 84
                        pos: 66949
                        length: 107
                      pos: 66886
                      length: 178
                    pos: 66867
                    length: 197
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 67071
                    length: 12
                  pos: 66805
                  length: 284
                pos: 66748
                length: 341
              - type: return_statement
                fields:
                  text: return lValue.getQualifiedName();
                children: []
                pos: 67094
                length: 33
              pos: 66661
              length: 470
          children: []
          pos: 66598
          length: 533
        pos: 4741
        length: 62392
    children: []
    pos: 4741
    length: 62392
  pos: 0
  length: 67134
text_diff: |
  --- before
  +++ after
  @@ -1742,7 +1742,7 @@
             for (Node astParameter : astParameters.children()) {
               if (jsDocParameter != null) {
                 defineSlot(astParameter, functionNode,
  -                  jsDocParameter.getJSType(), false);
  +                  jsDocParameter.getJSType(), true);
                 jsDocParameter = jsDocParameter.getNext();
               } else {
                 defineSlot(astParameter, functionNode, null, true);
tree_diff: |+
  New cluster:
  UPDATE from for (Node astParameter : astParameters.children()) {
              if (jsDocParameter != null) {
                defineSlot(astParameter, functionNode,
                    jsDocParameter.getJSType(), false);
                jsDocParameter = jsDocParameter.getNext();
              } else {
                defineSlot(astParameter, functionNode, null, true);
              }
            } to for (Node astParameter : astParameters.children()) {
              if (jsDocParameter != null) {
                defineSlot(astParameter, functionNode,
                    jsDocParameter.getJSType(), true);
                jsDocParameter = jsDocParameter.getNext();
              } else {
                defineSlot(astParameter, functionNode, null, true);
              }
            }
  ------------
  ===
  update-node
  ---
  enhanced_for_statement: for (Node astParameter : astParameters.children()) {
              if (jsDocParameter != null) {
                defineSlot(astParameter, functionNode,
                    jsDocParameter.getJSType(), false);
                jsDocParameter = jsDocParameter.getNext();
              } else {
                defineSlot(astParameter, functionNode, null, true);
              }
            } [64840,65211]
  replace for (Node astParameter : astParameters.children()) {
              if (jsDocParameter != null) {
                defineSlot(astParameter, functionNode,
                    jsDocParameter.getJSType(), false);
                jsDocParameter = jsDocParameter.getNext();
              } else {
                defineSlot(astParameter, functionNode, null, true);
              }
            } by for (Node astParameter : astParameters.children()) {
              if (jsDocParameter != null) {
                defineSlot(astParameter, functionNode,
                    jsDocParameter.getJSType(), true);
                jsDocParameter = jsDocParameter.getNext();
              } else {
                defineSlot(astParameter, functionNode, null, true);
              }
            }

...
