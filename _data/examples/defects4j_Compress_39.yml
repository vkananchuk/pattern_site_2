---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ArchiveUtils
        children: []
        pos: 1030
        length: 12
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final int MAX_SANITIZED_NAME_LENGTH = 255;
          children: []
          pos: 1050
          length: 57
        - type: constructor_declaration
          fields:
            text: |-
              private ArchiveUtils(){
                  }
          children: []
          pos: 1192
          length: 29
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 1547
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final ArchiveEntry entry
                children: []
                pos: 1556
                length: 24
              pos: 1526
              length: 510
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final StringBuilder sb = new StringBuilder();
                children: []
                pos: 1591
                length: 45
              - type: expression_statement
                fields:
                  text: 'sb.append(entry.isDirectory()? ''d'' : ''-'');'
                children: []
                pos: 1645
                length: 42
              - type: local_variable_declaration
                fields:
                  text: final String size = Long.toString(entry.getSize());
                children: []
                pos: 1718
                length: 51
              - type: expression_statement
                fields:
                  text: sb.append(' ');
                children: []
                pos: 1778
                length: 15
              - type: for_statement
                fields:
                  text: |-
                    for(int i=7; i > size.length(); i--){
                                sb.append(' ');
                            }
                children: []
                pos: 1852
                length: 75
              - type: expression_statement
                fields:
                  text: sb.append(size);
                children: []
                pos: 1936
                length: 16
              - type: expression_statement
                fields:
                  text: sb.append(' ').append(entry.getName());
                children: []
                pos: 1961
                length: 39
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 2009
                length: 21
              pos: 1581
              length: 455
          children: []
          pos: 1526
          length: 510
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: matchAsciiBuffer
              children: []
              pos: 2369
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String expected
                children: []
                pos: 2399
                length: 21
              pos: 2347
              length: 454
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: byte[] buffer1;
                children: []
                pos: 2488
                length: 15
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: buffer1 = expected.getBytes(CharsetNames.US_ASCII);
                      children: []
                      pos: 2530
                      length: 51
                    pos: 2516
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                      throw new RuntimeException(e); // Should not happen
                                  }
                      children: []
                      pos: 2592
                      length: 120
                    pos: 2512
                    length: 200
                children: []
                pos: 2512
                length: 200
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, 0, buffer1.length, buffer, offset,
                    length, false);
                children: []
                pos: 2721
                length: 74
              pos: 2478
              length: 323
          children: []
          pos: 2347
          length: 454
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: matchAsciiBuffer
              children: []
              pos: 3054
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String expected
                children: []
                pos: 3071
                length: 21
              pos: 3032
              length: 158
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return matchAsciiBuffer(expected, buffer, 0, buffer.length);
                children: []
                pos: 3124
                length: 60
              pos: 3114
              length: 76
          children: []
          pos: 3032
          length: 158
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toAsciiBytes
              children: []
              pos: 3444
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String inputString
                children: []
                pos: 3457
                length: 24
              pos: 3423
              length: 276
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return inputString.getBytes(CharsetNames.US_ASCII);
                      children: []
                      pos: 3510
                      length: 51
                    pos: 3496
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                     throw new RuntimeException(e); // Should never happen
                                  }
                      children: []
                      pos: 3572
                      length: 121
                    pos: 3492
                    length: 201
                children: []
                pos: 3492
                length: 201
              pos: 3482
              length: 217
          children: []
          pos: 3423
          length: 276
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toAsciiString
              children: []
              pos: 3927
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] inputBytes
                children: []
                pos: 3941
                length: 23
              pos: 3906
              length: 279
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return new String(inputBytes, CharsetNames.US_ASCII);
                      children: []
                      pos: 3993
                      length: 53
                    pos: 3979
                    length: 77
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                      throw new RuntimeException(e); // Should never happen
                                  }
                      children: []
                      pos: 4057
                      length: 122
                    pos: 3975
                    length: 204
                children: []
                pos: 3975
                length: 204
              pos: 3965
              length: 220
          children: []
          pos: 3906
          length: 279
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toAsciiString
              children: []
              pos: 4491
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] inputBytes
                children: []
                pos: 4505
                length: 23
              pos: 4470
              length: 331
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return new String(inputBytes, offset, length, CharsetNames.US_ASCII);
                      children: []
                      pos: 4593
                      length: 69
                    pos: 4579
                    length: 93
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                      throw new RuntimeException(e); // Should never happen
                                  }
                      children: []
                      pos: 4673
                      length: 122
                    pos: 4575
                    length: 220
                children: []
                pos: 4575
                length: 220
              pos: 4565
              length: 236
          children: []
          pos: 4470
          length: 331
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 5300
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 5321
                length: 20
              pos: 5278
              length: 1043
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: 'final int minLen=length1 < length2 ? length1 : length2;'
                children: []
                pos: 5509
                length: 55
              - type: for_statement
                fields:
                  text: |-
                    for (int i=0; i < minLen; i++){
                                if (buffer1[offset1+i] != buffer2[offset2+i]){
                                    return false;
                                }
                            }
                children: []
                pos: 5573
                length: 144
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: length1
                            children: []
                            pos: 5730
                            length: 7
                          right:
                            type: identifier
                            fields:
                              text: length2
                            children: []
                            pos: 5741
                            length: 7
                        children: []
                        pos: 5730
                        length: 18
                    children: []
                    pos: 5729
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 5763
                    length: 12
                  pos: 5749
                  length: 36
                pos: 5726
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: ignoreTrailingNulls
                        children: []
                        pos: 5798
                        length: 19
                    children: []
                    pos: 5797
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: greater_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: length1
                                children: []
                                pos: 5836
                                length: 7
                              right:
                                type: identifier
                                fields:
                                  text: length2
                                children: []
                                pos: 5846
                                length: 7
                            children: []
                            pos: 5836
                            length: 17
                        children: []
                        pos: 5835
                        length: 19
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: for_statement
                        fields:
                          text: |-
                            for(int i = length2; i < length1; i++){
                                                if (buffer1[offset1+i] != 0){
                                                    return false;
                                                }
                                            }
                        children: []
                        pos: 5872
                        length: 167
                      pos: 5854
                      length: 199
                    pos: 5832
                    length: 426
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 6271
                    length: 12
                  pos: 5818
                  length: 475
                pos: 5794
                length: 499
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 6302
                length: 13
              pos: 5499
              length: 822
          children: []
          pos: 5278
          length: 1043
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 6708
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 6729
                length: 20
              pos: 6686
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, offset1, length1, buffer2, offset2,
                    length2, false);
                children: []
                pos: 6870
                length: 76
              pos: 6860
              length: 92
          children: []
          pos: 6686
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 7181
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 7189
                length: 20
              pos: 7159
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, 0, buffer1.length, buffer2, 0, buffer2.length,
                    false);
                children: []
                pos: 7243
                length: 78
              pos: 7233
              length: 94
          children: []
          pos: 7159
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 7660
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 7668
                length: 20
              pos: 7638
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, 0, buffer1.length, buffer2, 0, buffer2.length,
                    ignoreTrailingNulls);
                children: []
                pos: 7756
                length: 92
              pos: 7746
              length: 108
          children: []
          pos: 7638
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqualWithNull
              children: []
              pos: 8299
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 8328
                length: 20
              pos: 8277
              length: 273
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, offset1, length1, buffer2, offset2,
                    length2, true);
                children: []
                pos: 8469
                length: 75
              pos: 8459
              length: 91
          children: []
          pos: 8277
          length: 273
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isArrayZero
              children: []
              pos: 8874
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] a
                children: []
                pos: 8886
                length: 14
              pos: 8852
              length: 218
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < size; i++) {
                                if (a[i] != 0) {
                                    return false;
                                }
                            }
                children: []
                pos: 8928
                length: 115
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 9052
                length: 12
              pos: 8918
              length: 152
          children: []
          pos: 8852
          length: 218
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: sanitize
              children: []
              pos: 9689
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String s
                children: []
                pos: 9698
                length: 8
              pos: 9668
              length: 951
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final char[] cs = s.toCharArray();
                children: []
                pos: 9718
                length: 34
              - type: local_variable_declaration
                fields:
                  text: 'final char[] chars = cs.length <= MAX_SANITIZED_NAME_LENGTH
                    ? cs : Arrays.copyOf(cs, MAX_SANITIZED_NAME_LENGTH);'
                children: []
                pos: 9761
                length: 112
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: cs.length
                            children: []
                            pos: 9886
                            length: 9
                          right:
                            type: identifier
                            fields:
                              text: MAX_SANITIZED_NAME_LENGTH
                            children: []
                            pos: 9898
                            length: 25
                        children: []
                        pos: 9886
                        length: 37
                    children: []
                    pos: 9885
                    length: 39
                children:
                - type: block
                  fields: {}
                  children:
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = MAX_SANITIZED_NAME_LENGTH - 3; i < MAX_SANITIZED_NAME_LENGTH; i++) {
                                        chars[i] = '.';
                                    }
                    children: []
                    pos: 9939
                    length: 127
                  pos: 9925
                  length: 151
                pos: 9882
                length: 194
              - type: local_variable_declaration
                fields:
                  text: final int len = chars.length;
                children: []
                pos: 10085
                length: 29
              - type: local_variable_declaration
                fields:
                  text: final StringBuilder sb = new StringBuilder();
                children: []
                pos: 10123
                length: 45
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < len; i++) {
                                final char c = chars[i];
                                if (!Character.isISOControl(c)) {
                                    Character.UnicodeBlock block = Character.UnicodeBlock.of(c);
                                    if (block != null && block != Character.UnicodeBlock.SPECIALS) {
                                        sb.append(c);
                                        continue;
                                    }
                                }
                                sb.append('?');
                            }
                children: []
                pos: 10177
                length: 406
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 10592
                length: 21
              pos: 9708
              length: 911
          children: []
          pos: 9668
          length: 951
        pos: 1017
        length: 9605
    children: []
    pos: 1017
    length: 9605
  pos: 0
  length: 10623
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ArchiveUtils
        children: []
        pos: 1030
        length: 12
      body:
        type: class_body
        fields: {}
        children:
        - type: constructor_declaration
          fields:
            text: |-
              private ArchiveUtils(){
                  }
          children: []
          pos: 1130
          length: 29
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 1485
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final ArchiveEntry entry
                children: []
                pos: 1494
                length: 24
              pos: 1464
              length: 510
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final StringBuilder sb = new StringBuilder();
                children: []
                pos: 1529
                length: 45
              - type: expression_statement
                fields:
                  text: 'sb.append(entry.isDirectory()? ''d'' : ''-'');'
                children: []
                pos: 1583
                length: 42
              - type: local_variable_declaration
                fields:
                  text: final String size = Long.toString(entry.getSize());
                children: []
                pos: 1656
                length: 51
              - type: expression_statement
                fields:
                  text: sb.append(' ');
                children: []
                pos: 1716
                length: 15
              - type: for_statement
                fields:
                  text: |-
                    for(int i=7; i > size.length(); i--){
                                sb.append(' ');
                            }
                children: []
                pos: 1790
                length: 75
              - type: expression_statement
                fields:
                  text: sb.append(size);
                children: []
                pos: 1874
                length: 16
              - type: expression_statement
                fields:
                  text: sb.append(' ').append(entry.getName());
                children: []
                pos: 1899
                length: 39
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 1947
                length: 21
              pos: 1519
              length: 455
          children: []
          pos: 1464
          length: 510
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: matchAsciiBuffer
              children: []
              pos: 2307
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String expected
                children: []
                pos: 2337
                length: 21
              pos: 2285
              length: 454
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: byte[] buffer1;
                children: []
                pos: 2426
                length: 15
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: buffer1 = expected.getBytes(CharsetNames.US_ASCII);
                      children: []
                      pos: 2468
                      length: 51
                    pos: 2454
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                      throw new RuntimeException(e); // Should not happen
                                  }
                      children: []
                      pos: 2530
                      length: 120
                    pos: 2450
                    length: 200
                children: []
                pos: 2450
                length: 200
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, 0, buffer1.length, buffer, offset,
                    length, false);
                children: []
                pos: 2659
                length: 74
              pos: 2416
              length: 323
          children: []
          pos: 2285
          length: 454
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: matchAsciiBuffer
              children: []
              pos: 2992
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String expected
                children: []
                pos: 3009
                length: 21
              pos: 2970
              length: 158
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return matchAsciiBuffer(expected, buffer, 0, buffer.length);
                children: []
                pos: 3062
                length: 60
              pos: 3052
              length: 76
          children: []
          pos: 2970
          length: 158
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toAsciiBytes
              children: []
              pos: 3382
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final String inputString
                children: []
                pos: 3395
                length: 24
              pos: 3361
              length: 276
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return inputString.getBytes(CharsetNames.US_ASCII);
                      children: []
                      pos: 3448
                      length: 51
                    pos: 3434
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                     throw new RuntimeException(e); // Should never happen
                                  }
                      children: []
                      pos: 3510
                      length: 121
                    pos: 3430
                    length: 201
                children: []
                pos: 3430
                length: 201
              pos: 3420
              length: 217
          children: []
          pos: 3361
          length: 276
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toAsciiString
              children: []
              pos: 3865
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] inputBytes
                children: []
                pos: 3879
                length: 23
              pos: 3844
              length: 279
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return new String(inputBytes, CharsetNames.US_ASCII);
                      children: []
                      pos: 3931
                      length: 53
                    pos: 3917
                    length: 77
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                      throw new RuntimeException(e); // Should never happen
                                  }
                      children: []
                      pos: 3995
                      length: 122
                    pos: 3913
                    length: 204
                children: []
                pos: 3913
                length: 204
              pos: 3903
              length: 220
          children: []
          pos: 3844
          length: 279
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toAsciiString
              children: []
              pos: 4429
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] inputBytes
                children: []
                pos: 4443
                length: 23
              pos: 4408
              length: 331
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return new String(inputBytes, offset, length, CharsetNames.US_ASCII);
                      children: []
                      pos: 4531
                      length: 69
                    pos: 4517
                    length: 93
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (final UnsupportedEncodingException e) {
                                      throw new RuntimeException(e); // Should never happen
                                  }
                      children: []
                      pos: 4611
                      length: 122
                    pos: 4513
                    length: 220
                children: []
                pos: 4513
                length: 220
              pos: 4503
              length: 236
          children: []
          pos: 4408
          length: 331
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 5238
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 5259
                length: 20
              pos: 5216
              length: 1043
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: 'final int minLen=length1 < length2 ? length1 : length2;'
                children: []
                pos: 5447
                length: 55
              - type: for_statement
                fields:
                  text: |-
                    for (int i=0; i < minLen; i++){
                                if (buffer1[offset1+i] != buffer2[offset2+i]){
                                    return false;
                                }
                            }
                children: []
                pos: 5511
                length: 144
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: length1
                            children: []
                            pos: 5668
                            length: 7
                          right:
                            type: identifier
                            fields:
                              text: length2
                            children: []
                            pos: 5679
                            length: 7
                        children: []
                        pos: 5668
                        length: 18
                    children: []
                    pos: 5667
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 5701
                    length: 12
                  pos: 5687
                  length: 36
                pos: 5664
                length: 59
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: ignoreTrailingNulls
                        children: []
                        pos: 5736
                        length: 19
                    children: []
                    pos: 5735
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: greater_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: length1
                                children: []
                                pos: 5774
                                length: 7
                              right:
                                type: identifier
                                fields:
                                  text: length2
                                children: []
                                pos: 5784
                                length: 7
                            children: []
                            pos: 5774
                            length: 17
                        children: []
                        pos: 5773
                        length: 19
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: for_statement
                        fields:
                          text: |-
                            for(int i = length2; i < length1; i++){
                                                if (buffer1[offset1+i] != 0){
                                                    return false;
                                                }
                                            }
                        children: []
                        pos: 5810
                        length: 167
                      pos: 5792
                      length: 199
                    pos: 5770
                    length: 426
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 6209
                    length: 12
                  pos: 5756
                  length: 475
                pos: 5732
                length: 499
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 6240
                length: 13
              pos: 5437
              length: 822
          children: []
          pos: 5216
          length: 1043
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 6646
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 6667
                length: 20
              pos: 6624
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, offset1, length1, buffer2, offset2,
                    length2, false);
                children: []
                pos: 6808
                length: 76
              pos: 6798
              length: 92
          children: []
          pos: 6624
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 7119
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 7127
                length: 20
              pos: 7097
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, 0, buffer1.length, buffer2, 0, buffer2.length,
                    false);
                children: []
                pos: 7181
                length: 78
              pos: 7171
              length: 94
          children: []
          pos: 7097
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqual
              children: []
              pos: 7598
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 7606
                length: 20
              pos: 7576
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, 0, buffer1.length, buffer2, 0, buffer2.length,
                    ignoreTrailingNulls);
                children: []
                pos: 7694
                length: 92
              pos: 7684
              length: 108
          children: []
          pos: 7576
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isEqualWithNull
              children: []
              pos: 8237
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] buffer1
                children: []
                pos: 8266
                length: 20
              pos: 8215
              length: 273
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isEqual(buffer1, offset1, length1, buffer2, offset2,
                    length2, true);
                children: []
                pos: 8407
                length: 75
              pos: 8397
              length: 91
          children: []
          pos: 8215
          length: 273
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isArrayZero
              children: []
              pos: 8812
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] a
                children: []
                pos: 8824
                length: 14
              pos: 8790
              length: 218
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < size; i++) {
                                if (a[i] != 0) {
                                    return false;
                                }
                            }
                children: []
                pos: 8866
                length: 115
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 8990
                length: 12
              pos: 8856
              length: 152
          children: []
          pos: 8790
          length: 218
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: sanitize
              children: []
              pos: 9627
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String s
                children: []
                pos: 9636
                length: 8
              pos: 9606
              length: 630
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final char[] chars = s.toCharArray();
                children: []
                pos: 9656
                length: 37
              - type: local_variable_declaration
                fields:
                  text: final int len = chars.length;
                children: []
                pos: 9702
                length: 29
              - type: local_variable_declaration
                fields:
                  text: final StringBuilder sb = new StringBuilder();
                children: []
                pos: 9740
                length: 45
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < len; i++) {
                                final char c = chars[i];
                                if (!Character.isISOControl(c)) {
                                    Character.UnicodeBlock block = Character.UnicodeBlock.of(c);
                                    if (block != null && block != Character.UnicodeBlock.SPECIALS) {
                                        sb.append(c);
                                        continue;
                                    }
                                }
                                sb.append('?');
                            }
                children: []
                pos: 9794
                length: 406
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 10209
                length: 21
              pos: 9646
              length: 590
          children: []
          pos: 9606
          length: 630
        pos: 1017
        length: 9222
    children: []
    pos: 1017
    length: 9222
  pos: 0
  length: 10240
text_diff: "--- before\n+++ after\n@@ -28,7 +28,6 @@\n  */\n public class ArchiveUtils
  {\n \n-    private static final int MAX_SANITIZED_NAME_LENGTH = 255;\n \n     /**
  Private constructor to prevent instantiation of this utility class. */\n     private
  ArchiveUtils(){\n@@ -271,13 +270,7 @@\n      * @since Compress 1.12\n      */\n
  \    public static String sanitize(String s) {\n-        final char[] cs = s.toCharArray();\n-
  \       final char[] chars = cs.length <= MAX_SANITIZED_NAME_LENGTH ? cs : Arrays.copyOf(cs,
  MAX_SANITIZED_NAME_LENGTH);\n-        if (cs.length > MAX_SANITIZED_NAME_LENGTH)
  {\n-            for (int i = MAX_SANITIZED_NAME_LENGTH - 3; i < MAX_SANITIZED_NAME_LENGTH;
  i++) {\n-                chars[i] = '.';\n-            }\n-        }\n+        final
  char[] chars = s.toCharArray();\n         final int len = chars.length;\n         final
  StringBuilder sb = new StringBuilder();\n         for (int i = 0; i < len; i++)
  {\n"
tree_diff: |+
  New cluster:
  UPDATE from final char[] cs = s.toCharArray(); to final char[] chars = s.toCharArray();
  ------------
  ===
  update-node
  ---
  local_variable_declaration: final char[] cs = s.toCharArray(); [9718,9752]
  replace final char[] cs = s.toCharArray(); by final char[] chars = s.toCharArray();

  New cluster:
  ===
  delete-node
  ---
  field_declaration: private static final int MAX_SANITIZED_NAME_LENGTH = 255; [1050,1107]
  ===
  ------------
  ===
  delete-node
  ---
  field_declaration: private static final int MAX_SANITIZED_NAME_LENGTH = 255; [1050,1107]
  ===

  New cluster:
  ===
  delete-node
  ---
  local_variable_declaration: final char[] chars = cs.length <= MAX_SANITIZED_NAME_LENGTH ? cs : Arrays.copyOf(cs, MAX_SANITIZED_NAME_LENGTH); [9761,9873]
  ===
  ------------
  ===
  delete-node
  ---
  local_variable_declaration: final char[] chars = cs.length <= MAX_SANITIZED_NAME_LENGTH ? cs : Arrays.copyOf(cs, MAX_SANITIZED_NAME_LENGTH); [9761,9873]
  ===

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [9882,10076]
      parenthesized_expression [9885,9924]
          greater_than [9886,9923]
              field_access: cs.length [9886,9895]
              identifier: MAX_SANITIZED_NAME_LENGTH [9898,9923]
      block [9925,10076]
          for_statement: for (int i = MAX_SANITIZED_NAME_LENGTH - 3; i < MAX_SANITIZED_NAME_LENGTH; i++) {
                  chars[i] = '.';
              } [9939,10066]

...
