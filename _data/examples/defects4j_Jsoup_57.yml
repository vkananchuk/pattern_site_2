---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Attributes
        children: []
        pos: 848
        length: 10
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected static final String dataPrefix = "data-";
          children: []
          pos: 907
          length: 51
        - type: field_declaration
          fields:
            text: private LinkedHashMap<String, Attribute> attributes = null;
          children: []
          pos: 964
          length: 59
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: get
              children: []
              pos: 1387
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 1391
                length: 10
              pos: 1373
              length: 224
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 1413
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 1450
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 1464
                            length: 4
                        children: []
                        pos: 1450
                        length: 18
                    children: []
                    pos: 1449
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return "";
                  children: []
                  pos: 1482
                  length: 10
                pos: 1446
                length: 46
              - type: local_variable_declaration
                fields:
                  text: Attribute attr = attributes.get(key);
                children: []
                pos: 1502
                length: 37
              - type: return_statement
                fields:
                  text: 'return attr != null ? attr.getValue() : "";'
                children: []
                pos: 1548
                length: 43
              pos: 1403
              length: 194
          children: []
          pos: 1373
          length: 224
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getIgnoreCase
              children: []
              pos: 1812
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 1826
                length: 10
              pos: 1798
              length: 323
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 1848
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 1884
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 1898
                            length: 4
                        children: []
                        pos: 1884
                        length: 18
                    children: []
                    pos: 1883
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return "";
                  children: []
                  pos: 1916
                  length: 10
                pos: 1880
                length: 46
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (String attrKey : attributes.keySet()) {
                                if (attrKey.equalsIgnoreCase(key))
                                    return attributes.get(attrKey).getValue();
                            }
                children: []
                pos: 1936
                length: 160
              - type: return_statement
                fields:
                  text: return "";
                children: []
                pos: 2105
                length: 10
              pos: 1838
              length: 283
          children: []
          pos: 1798
          length: 323
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: put
              children: []
              pos: 2280
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 2284
                length: 10
              pos: 2268
              length: 120
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Attribute attr = new Attribute(key, value);
                children: []
                pos: 2320
                length: 43
              - type: expression_statement
                fields:
                  text: put(attr);
                children: []
                pos: 2372
                length: 10
              pos: 2310
              length: 78
          children: []
          pos: 2268
          length: 120
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: put
              children: []
              pos: 2552
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 2556
                length: 10
              pos: 2540
              length: 151
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: value
                        children: []
                        pos: 2597
                        length: 5
                    children: []
                    pos: 2596
                    length: 7
                children:
                - type: expression_statement
                  fields:
                    text: put(new BooleanAttribute(key));
                  children: []
                  pos: 2616
                  length: 31
                pos: 2593
                length: 92
              pos: 2583
              length: 108
          children: []
          pos: 2540
          length: 151
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: put
              children: []
              pos: 2818
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Attribute attribute
                children: []
                pos: 2822
                length: 19
              pos: 2806
              length: 235
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notNull(attribute);
                children: []
                pos: 2853
                length: 28
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 2894
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2908
                            length: 4
                        children: []
                        pos: 2894
                        length: 18
                    children: []
                    pos: 2893
                    length: 20
                children:
                - type: expression_statement
                  fields:
                    text: attributes = new LinkedHashMap<String, Attribute>(2);
                  children: []
                  pos: 2927
                  length: 53
                pos: 2890
                length: 90
              - type: expression_statement
                fields:
                  text: attributes.put(attribute.getKey(), attribute);
                children: []
                pos: 2989
                length: 46
              pos: 2843
              length: 198
          children: []
          pos: 2806
          length: 235
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: remove
              children: []
              pos: 3171
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 3178
                length: 10
              pos: 3159
              length: 154
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 3200
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 3236
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3250
                            length: 4
                        children: []
                        pos: 3236
                        length: 18
                    children: []
                    pos: 3235
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 3268
                  length: 7
                pos: 3232
                length: 43
              - type: expression_statement
                fields:
                  text: attributes.remove(key);
                children: []
                pos: 3284
                length: 23
              pos: 3190
              length: 123
          children: []
          pos: 3159
          length: 154
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: removeIgnoreCase
              children: []
              pos: 3445
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 3462
                length: 10
              pos: 3433
              length: 343
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 3484
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 3520
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3534
                            length: 4
                        children: []
                        pos: 3520
                        length: 18
                    children: []
                    pos: 3519
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 3552
                  length: 7
                pos: 3516
                length: 43
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
                                String attrKey = it.next();
                                if (attrKey.equalsIgnoreCase(key))
                                    it.remove();
                            }
                children: []
                pos: 3568
                length: 202
              pos: 3474
              length: 302
          children: []
          pos: 3433
          length: 343
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasKey
              children: []
              pos: 3977
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 3984
                length: 10
              pos: 3962
              length: 107
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return attributes != null && attributes.containsKey(key);
                children: []
                pos: 4006
                length: 57
              pos: 3996
              length: 73
          children: []
          pos: 3962
          length: 107
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasKeyIgnoreCase
              children: []
              pos: 4255
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 4272
                length: 10
              pos: 4240
              length: 270
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 4298
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4312
                            length: 4
                        children: []
                        pos: 4298
                        length: 18
                    children: []
                    pos: 4297
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 4330
                  length: 13
                pos: 4294
                length: 49
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (String attrKey : attributes.keySet()) {
                                if (attrKey.equalsIgnoreCase(key))
                                    return true;
                            }
                children: []
                pos: 4352
                length: 130
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 4491
                length: 13
              pos: 4284
              length: 226
          children: []
          pos: 4240
          length: 270
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: size
              children: []
              pos: 4608
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4597
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 4629
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4643
                            length: 4
                        children: []
                        pos: 4629
                        length: 18
                    children: []
                    pos: 4628
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return 0;
                  children: []
                  pos: 4661
                  length: 9
                pos: 4625
                length: 45
              - type: return_statement
                fields:
                  text: return attributes.size();
                children: []
                pos: 4679
                length: 25
              pos: 4615
              length: 95
          children: []
          pos: 4597
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addAll
              children: []
              pos: 4867
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Attributes incoming
                children: []
                pos: 4874
                length: 19
              pos: 4855
              length: 261
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: incoming.size()
                            children: []
                            pos: 4909
                            length: 15
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 4928
                            length: 1
                        children: []
                        pos: 4909
                        length: 20
                    children: []
                    pos: 4908
                    length: 22
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 4943
                  length: 7
                pos: 4905
                length: 45
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 4963
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4977
                            length: 4
                        children: []
                        pos: 4963
                        length: 18
                    children: []
                    pos: 4962
                    length: 20
                children:
                - type: expression_statement
                  fields:
                    text: attributes = new LinkedHashMap<String, Attribute>(incoming.size());
                  children: []
                  pos: 4995
                  length: 67
                pos: 4959
                length: 103
              - type: expression_statement
                fields:
                  text: attributes.putAll(incoming.attributes);
                children: []
                pos: 5071
                length: 39
              pos: 4895
              length: 221
          children: []
          pos: 4855
          length: 261
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 5149
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5122
              length: 227
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: attributes
                                children: []
                                pos: 5174
                                length: 10
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5188
                                length: 4
                            children: []
                            pos: 5174
                            length: 18
                          right:
                            type: method_invocation
                            fields:
                              text: attributes.isEmpty()
                            children: []
                            pos: 5196
                            length: 20
                        children: []
                        pos: 5174
                        length: 42
                    children: []
                    pos: 5173
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.<Attribute>emptyList().iterator();
                    children: []
                    pos: 5232
                    length: 53
                  pos: 5218
                  length: 77
                pos: 5170
                length: 125
              - type: return_statement
                fields:
                  text: return attributes.values().iterator();
                children: []
                pos: 5305
                length: 38
              pos: 5160
              length: 189
          children: []
          pos: 5122
          length: 227
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asList
              children: []
              pos: 5620
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5597
              length: 368
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 5643
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5657
                            length: 4
                        children: []
                        pos: 5643
                        length: 18
                    children: []
                    pos: 5642
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return Collections.emptyList();
                  children: []
                  pos: 5675
                  length: 31
                pos: 5639
                length: 67
              - type: local_variable_declaration
                fields:
                  text: List<Attribute> list = new ArrayList<Attribute>(attributes.size());
                children: []
                pos: 5716
                length: 67
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Map.Entry<String, Attribute> entry : attributes.entrySet()) {
                                list.add(entry.getValue());
                            }
                children: []
                pos: 5792
                length: 116
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(list);
                children: []
                pos: 5917
                length: 42
              pos: 5629
              length: 336
          children: []
          pos: 5597
          length: 368
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: dataset
              children: []
              pos: 6212
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6185
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new Dataset();
                children: []
                pos: 6232
                length: 21
              pos: 6222
              length: 37
          children: []
          pos: 6185
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: html
              children: []
              pos: 6471
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6457
              length: 363
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder accum = new StringBuilder();
                children: []
                pos: 6488
                length: 42
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: html(accum, (new Document("")).outputSettings());
                      children: []
                      pos: 6557
                      length: 49
                    pos: 6543
                    length: 133
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IOException e) { // ought never happen
                                      throw new SerializationException(e);
                                  }
                      children: []
                      pos: 6677
                      length: 104
                    pos: 6539
                    length: 242
                children: []
                pos: 6539
                length: 242
              - type: return_statement
                fields:
                  text: return accum.toString();
                children: []
                pos: 6790
                length: 24
              pos: 6478
              length: 342
          children: []
          pos: 6457
          length: 363
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: html
              children: []
              pos: 6831
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Appendable accum
                children: []
                pos: 6836
                length: 16
              pos: 6826
              length: 344
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 6916
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6930
                            length: 4
                        children: []
                        pos: 6916
                        length: 18
                    children: []
                    pos: 6915
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 6948
                  length: 7
                pos: 6912
                length: 43
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Map.Entry<String, Attribute> entry : attributes.entrySet()) {
                                Attribute attribute = entry.getValue();
                                accum.append(" ");
                                attribute.html(accum, out);
                            }
                children: []
                pos: 6965
                length: 199
              pos: 6902
              length: 268
          children: []
          pos: 6826
          length: 344
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 7204
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7176
              length: 69
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return html();
                children: []
                pos: 7225
                length: 14
              pos: 7215
              length: 30
          children: []
          pos: 7176
          length: 69
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 7503
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object o
                children: []
                pos: 7510
                length: 8
              pos: 7474
              length: 289
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: this
                            fields: {}
                            children: []
                            pos: 7534
                            length: 4
                          right:
                            type: identifier
                            fields:
                              text: o
                            children: []
                            pos: 7542
                            length: 1
                        children: []
                        pos: 7534
                        length: 9
                    children: []
                    pos: 7533
                    length: 11
                children:
                - type: return_statement
                  fields:
                    text: return true;
                  children: []
                  pos: 7545
                  length: 12
                pos: 7530
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!(o instanceof Attributes)"
                        children: []
                        pos: 7570
                        length: 26
                    children: []
                    pos: 7569
                    length: 28
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 7598
                  length: 13
                pos: 7566
                length: 45
              - type: local_variable_declaration
                fields:
                  text: Attributes that = (Attributes) o;
                children: []
                pos: 7621
                length: 33
              - type: return_statement
                fields:
                  text: 'return !(attributes != null ? !attributes.equals(that.attributes)
                    : that.attributes != null);'
                children: []
                pos: 7664
                length: 93
              pos: 7520
              length: 243
          children: []
          pos: 7474
          length: 289
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hashCode
              children: []
              pos: 7954
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7929
              length: 106
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return attributes != null ? attributes.hashCode() : 0;'
                children: []
                pos: 7975
                length: 54
              pos: 7965
              length: 70
          children: []
          pos: 7929
          length: 106
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: clone
              children: []
              pos: 8073
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8041
              length: 526
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 8095
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8109
                            length: 4
                        children: []
                        pos: 8095
                        length: 18
                    children: []
                    pos: 8094
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return new Attributes();
                  children: []
                  pos: 8127
                  length: 24
                pos: 8091
                length: 60
              - type: local_variable_declaration
                fields:
                  text: Attributes clone;
                children: []
                pos: 8161
                length: 17
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: clone = (Attributes) super.clone();
                      children: []
                      pos: 8205
                      length: 35
                    pos: 8191
                    length: 59
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (CloneNotSupportedException e) {
                                      throw new RuntimeException(e);
                                  }
                      children: []
                      pos: 8251
                      length: 91
                    pos: 8187
                    length: 155
                children: []
                pos: 8187
                length: 155
              - type: expression_statement
                fields:
                  text: clone.attributes = new LinkedHashMap<String, Attribute>(attributes.size());
                children: []
                pos: 8351
                length: 75
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Attribute attribute: this)
                                clone.attributes.put(attribute.getKey(), attribute.clone());
                children: []
                pos: 8435
                length: 104
              - type: return_statement
                fields:
                  text: return clone;
                children: []
                pos: 8548
                length: 13
              pos: 8081
              length: 486
          children: []
          pos: 8041
          length: 526
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: Dataset
              children: []
              pos: 8587
              length: 7
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private Dataset() {
                                if (attributes == null)
                                    attributes = new LinkedHashMap<String, Attribute>(2);
                            }
                children: []
                pos: 8642
                length: 135
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: entrySet
                    children: []
                    pos: 8839
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 8787
                    length: 109
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return new EntrySet();
                      children: []
                      pos: 8864
                      length: 22
                    pos: 8850
                    length: 46
                children: []
                pos: 8787
                length: 109
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: put
                    children: []
                    pos: 8938
                    length: 3
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String key
                      children: []
                      pos: 8942
                      length: 10
                    pos: 8906
                    length: 339
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: String dataKey = dataKey(key);
                      children: []
                      pos: 8982
                      length: 30
                    - type: local_variable_declaration
                      fields:
                        text: 'String oldValue = hasKey(dataKey) ? attributes.get(dataKey).getValue()
                          : null;'
                      children: []
                      pos: 9025
                      length: 78
                    - type: local_variable_declaration
                      fields:
                        text: Attribute attr = new Attribute(dataKey, value);
                      children: []
                      pos: 9116
                      length: 47
                    - type: expression_statement
                      fields:
                        text: attributes.put(dataKey, attr);
                      children: []
                      pos: 9176
                      length: 30
                    - type: return_statement
                      fields:
                        text: return oldValue;
                      children: []
                      pos: 9219
                      length: 16
                    pos: 8968
                    length: 277
                children: []
                pos: 8906
                length: 339
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: EntrySet
                    children: []
                    pos: 9269
                    length: 8
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: iterator
                          children: []
                          pos: 9405
                          length: 8
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 9340
                          length: 137
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return new DatasetIterator();
                            children: []
                            pos: 9434
                            length: 29
                          pos: 9416
                          length: 61
                      children: []
                      pos: 9340
                      length: 137
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: size
                          children: []
                          pos: 9523
                          length: 4
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 9490
                          length: 239
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: int count = 0;
                            children: []
                            pos: 9548
                            length: 14
                          - type: local_variable_declaration
                            fields:
                              text: Iterator iter = new DatasetIterator();
                            children: []
                            pos: 9579
                            length: 38
                          - type: while_statement
                            fields:
                              text: |-
                                while (iter.hasNext())
                                                    count++;
                            children: []
                            pos: 9634
                            length: 51
                          - type: return_statement
                            fields:
                              text: return count;
                            children: []
                            pos: 9702
                            length: 13
                          pos: 9530
                          length: 199
                      children: []
                      pos: 9490
                      length: 239
                    pos: 9255
                    length: 484
                children: []
                pos: 9255
                length: 484
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: DatasetIterator
                    children: []
                    pos: 9763
                    length: 15
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private Iterator<Attribute> attrIter = attributes.values().iterator();
                      children: []
                      pos: 9840
                      length: 70
                    - type: field_declaration
                      fields:
                        text: private Attribute attr;
                      children: []
                      pos: 9923
                      length: 23
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: hasNext
                          children: []
                          pos: 9974
                          length: 7
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 9959
                          length: 238
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: while_statement
                            fields:
                              text: |-
                                while (attrIter.hasNext()) {
                                                    attr = attrIter.next();
                                                    if (attr.isDataAttribute()) return true;
                                                }
                            children: []
                            pos: 10002
                            length: 151
                          - type: return_statement
                            fields:
                              text: return false;
                            children: []
                            pos: 10170
                            length: 13
                          pos: 9984
                          length: 213
                      children: []
                      pos: 9959
                      length: 238
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: next
                          children: []
                          pos: 10240
                          length: 4
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 10211
                          length: 152
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return new Attribute(attr.getKey().substring(dataPrefix.length()),
                                attr.getValue());
                            children: []
                            pos: 10265
                            length: 84
                          pos: 10247
                          length: 116
                      children: []
                      pos: 10211
                      length: 152
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: remove
                          children: []
                          pos: 10389
                          length: 6
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 10377
                          length: 86
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: attributes.remove(attr.getKey());
                            children: []
                            pos: 10416
                            length: 33
                          pos: 10398
                          length: 65
                      children: []
                      pos: 10377
                      length: 86
                    pos: 9749
                    length: 724
                children: []
                pos: 9749
                length: 724
              pos: 8573
              length: 1906
          children: []
          pos: 8573
          length: 1906
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: dataKey
              children: []
              pos: 10507
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 10515
                length: 10
              pos: 10485
              length: 82
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return dataPrefix + key;
                children: []
                pos: 10537
                length: 24
              pos: 10527
              length: 40
          children: []
          pos: 10485
          length: 82
        pos: 835
        length: 9734
    children: []
    pos: 835
    length: 9734
  pos: 0
  length: 10570
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Attributes
        children: []
        pos: 848
        length: 10
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected static final String dataPrefix = "data-";
          children: []
          pos: 907
          length: 51
        - type: field_declaration
          fields:
            text: private LinkedHashMap<String, Attribute> attributes = null;
          children: []
          pos: 964
          length: 59
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: get
              children: []
              pos: 1387
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 1391
                length: 10
              pos: 1373
              length: 224
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 1413
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 1450
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 1464
                            length: 4
                        children: []
                        pos: 1450
                        length: 18
                    children: []
                    pos: 1449
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return "";
                  children: []
                  pos: 1482
                  length: 10
                pos: 1446
                length: 46
              - type: local_variable_declaration
                fields:
                  text: Attribute attr = attributes.get(key);
                children: []
                pos: 1502
                length: 37
              - type: return_statement
                fields:
                  text: 'return attr != null ? attr.getValue() : "";'
                children: []
                pos: 1548
                length: 43
              pos: 1403
              length: 194
          children: []
          pos: 1373
          length: 224
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getIgnoreCase
              children: []
              pos: 1812
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 1826
                length: 10
              pos: 1798
              length: 323
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 1848
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 1884
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 1898
                            length: 4
                        children: []
                        pos: 1884
                        length: 18
                    children: []
                    pos: 1883
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return "";
                  children: []
                  pos: 1916
                  length: 10
                pos: 1880
                length: 46
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (String attrKey : attributes.keySet()) {
                                if (attrKey.equalsIgnoreCase(key))
                                    return attributes.get(attrKey).getValue();
                            }
                children: []
                pos: 1936
                length: 160
              - type: return_statement
                fields:
                  text: return "";
                children: []
                pos: 2105
                length: 10
              pos: 1838
              length: 283
          children: []
          pos: 1798
          length: 323
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: put
              children: []
              pos: 2280
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 2284
                length: 10
              pos: 2268
              length: 120
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Attribute attr = new Attribute(key, value);
                children: []
                pos: 2320
                length: 43
              - type: expression_statement
                fields:
                  text: put(attr);
                children: []
                pos: 2372
                length: 10
              pos: 2310
              length: 78
          children: []
          pos: 2268
          length: 120
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: put
              children: []
              pos: 2552
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 2556
                length: 10
              pos: 2540
              length: 151
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: value
                        children: []
                        pos: 2597
                        length: 5
                    children: []
                    pos: 2596
                    length: 7
                children:
                - type: expression_statement
                  fields:
                    text: put(new BooleanAttribute(key));
                  children: []
                  pos: 2616
                  length: 31
                pos: 2593
                length: 92
              pos: 2583
              length: 108
          children: []
          pos: 2540
          length: 151
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: put
              children: []
              pos: 2818
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Attribute attribute
                children: []
                pos: 2822
                length: 19
              pos: 2806
              length: 235
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notNull(attribute);
                children: []
                pos: 2853
                length: 28
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 2894
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2908
                            length: 4
                        children: []
                        pos: 2894
                        length: 18
                    children: []
                    pos: 2893
                    length: 20
                children:
                - type: expression_statement
                  fields:
                    text: attributes = new LinkedHashMap<String, Attribute>(2);
                  children: []
                  pos: 2927
                  length: 53
                pos: 2890
                length: 90
              - type: expression_statement
                fields:
                  text: attributes.put(attribute.getKey(), attribute);
                children: []
                pos: 2989
                length: 46
              pos: 2843
              length: 198
          children: []
          pos: 2806
          length: 235
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: remove
              children: []
              pos: 3171
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 3178
                length: 10
              pos: 3159
              length: 154
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 3200
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 3236
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3250
                            length: 4
                        children: []
                        pos: 3236
                        length: 18
                    children: []
                    pos: 3235
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 3268
                  length: 7
                pos: 3232
                length: 43
              - type: expression_statement
                fields:
                  text: attributes.remove(key);
                children: []
                pos: 3284
                length: 23
              pos: 3190
              length: 123
          children: []
          pos: 3159
          length: 154
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: removeIgnoreCase
              children: []
              pos: 3445
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 3462
                length: 10
              pos: 3433
              length: 358
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Validate.notEmpty(key);
                children: []
                pos: 3484
                length: 23
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 3520
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3534
                            length: 4
                        children: []
                        pos: 3520
                        length: 18
                    children: []
                    pos: 3519
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 3552
                  length: 7
                pos: 3516
                length: 43
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
                                String attrKey = it.next();
                                if (attrKey.equalsIgnoreCase(key))
                                    attributes.remove(attrKey);
                            }
                children: []
                pos: 3568
                length: 217
              pos: 3474
              length: 317
          children: []
          pos: 3433
          length: 358
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasKey
              children: []
              pos: 3992
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 3999
                length: 10
              pos: 3977
              length: 107
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return attributes != null && attributes.containsKey(key);
                children: []
                pos: 4021
                length: 57
              pos: 4011
              length: 73
          children: []
          pos: 3977
          length: 107
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hasKeyIgnoreCase
              children: []
              pos: 4270
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 4287
                length: 10
              pos: 4255
              length: 270
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 4313
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4327
                            length: 4
                        children: []
                        pos: 4313
                        length: 18
                    children: []
                    pos: 4312
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 4345
                  length: 13
                pos: 4309
                length: 49
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (String attrKey : attributes.keySet()) {
                                if (attrKey.equalsIgnoreCase(key))
                                    return true;
                            }
                children: []
                pos: 4367
                length: 130
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 4506
                length: 13
              pos: 4299
              length: 226
          children: []
          pos: 4255
          length: 270
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: size
              children: []
              pos: 4623
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4612
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 4644
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4658
                            length: 4
                        children: []
                        pos: 4644
                        length: 18
                    children: []
                    pos: 4643
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return 0;
                  children: []
                  pos: 4676
                  length: 9
                pos: 4640
                length: 45
              - type: return_statement
                fields:
                  text: return attributes.size();
                children: []
                pos: 4694
                length: 25
              pos: 4630
              length: 95
          children: []
          pos: 4612
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addAll
              children: []
              pos: 4882
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Attributes incoming
                children: []
                pos: 4889
                length: 19
              pos: 4870
              length: 261
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: incoming.size()
                            children: []
                            pos: 4924
                            length: 15
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 4943
                            length: 1
                        children: []
                        pos: 4924
                        length: 20
                    children: []
                    pos: 4923
                    length: 22
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 4958
                  length: 7
                pos: 4920
                length: 45
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 4978
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4992
                            length: 4
                        children: []
                        pos: 4978
                        length: 18
                    children: []
                    pos: 4977
                    length: 20
                children:
                - type: expression_statement
                  fields:
                    text: attributes = new LinkedHashMap<String, Attribute>(incoming.size());
                  children: []
                  pos: 5010
                  length: 67
                pos: 4974
                length: 103
              - type: expression_statement
                fields:
                  text: attributes.putAll(incoming.attributes);
                children: []
                pos: 5086
                length: 39
              pos: 4910
              length: 221
          children: []
          pos: 4870
          length: 261
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: iterator
              children: []
              pos: 5164
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5137
              length: 227
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: attributes
                                children: []
                                pos: 5189
                                length: 10
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5203
                                length: 4
                            children: []
                            pos: 5189
                            length: 18
                          right:
                            type: method_invocation
                            fields:
                              text: attributes.isEmpty()
                            children: []
                            pos: 5211
                            length: 20
                        children: []
                        pos: 5189
                        length: 42
                    children: []
                    pos: 5188
                    length: 44
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.<Attribute>emptyList().iterator();
                    children: []
                    pos: 5247
                    length: 53
                  pos: 5233
                  length: 77
                pos: 5185
                length: 125
              - type: return_statement
                fields:
                  text: return attributes.values().iterator();
                children: []
                pos: 5320
                length: 38
              pos: 5175
              length: 189
          children: []
          pos: 5137
          length: 227
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asList
              children: []
              pos: 5635
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5612
              length: 368
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 5658
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5672
                            length: 4
                        children: []
                        pos: 5658
                        length: 18
                    children: []
                    pos: 5657
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return Collections.emptyList();
                  children: []
                  pos: 5690
                  length: 31
                pos: 5654
                length: 67
              - type: local_variable_declaration
                fields:
                  text: List<Attribute> list = new ArrayList<Attribute>(attributes.size());
                children: []
                pos: 5731
                length: 67
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Map.Entry<String, Attribute> entry : attributes.entrySet()) {
                                list.add(entry.getValue());
                            }
                children: []
                pos: 5807
                length: 116
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(list);
                children: []
                pos: 5932
                length: 42
              pos: 5644
              length: 336
          children: []
          pos: 5612
          length: 368
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: dataset
              children: []
              pos: 6227
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6200
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new Dataset();
                children: []
                pos: 6247
                length: 21
              pos: 6237
              length: 37
          children: []
          pos: 6200
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: html
              children: []
              pos: 6486
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6472
              length: 363
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder accum = new StringBuilder();
                children: []
                pos: 6503
                length: 42
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: html(accum, (new Document("")).outputSettings());
                      children: []
                      pos: 6572
                      length: 49
                    pos: 6558
                    length: 133
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IOException e) { // ought never happen
                                      throw new SerializationException(e);
                                  }
                      children: []
                      pos: 6692
                      length: 104
                    pos: 6554
                    length: 242
                children: []
                pos: 6554
                length: 242
              - type: return_statement
                fields:
                  text: return accum.toString();
                children: []
                pos: 6805
                length: 24
              pos: 6493
              length: 342
          children: []
          pos: 6472
          length: 363
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: html
              children: []
              pos: 6846
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Appendable accum
                children: []
                pos: 6851
                length: 16
              pos: 6841
              length: 344
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 6931
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6945
                            length: 4
                        children: []
                        pos: 6931
                        length: 18
                    children: []
                    pos: 6930
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return;
                  children: []
                  pos: 6963
                  length: 7
                pos: 6927
                length: 43
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Map.Entry<String, Attribute> entry : attributes.entrySet()) {
                                Attribute attribute = entry.getValue();
                                accum.append(" ");
                                attribute.html(accum, out);
                            }
                children: []
                pos: 6980
                length: 199
              pos: 6917
              length: 268
          children: []
          pos: 6841
          length: 344
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 7219
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7191
              length: 69
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return html();
                children: []
                pos: 7240
                length: 14
              pos: 7230
              length: 30
          children: []
          pos: 7191
          length: 69
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 7518
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object o
                children: []
                pos: 7525
                length: 8
              pos: 7489
              length: 289
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: this
                            fields: {}
                            children: []
                            pos: 7549
                            length: 4
                          right:
                            type: identifier
                            fields:
                              text: o
                            children: []
                            pos: 7557
                            length: 1
                        children: []
                        pos: 7549
                        length: 9
                    children: []
                    pos: 7548
                    length: 11
                children:
                - type: return_statement
                  fields:
                    text: return true;
                  children: []
                  pos: 7560
                  length: 12
                pos: 7545
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!(o instanceof Attributes)"
                        children: []
                        pos: 7585
                        length: 26
                    children: []
                    pos: 7584
                    length: 28
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 7613
                  length: 13
                pos: 7581
                length: 45
              - type: local_variable_declaration
                fields:
                  text: Attributes that = (Attributes) o;
                children: []
                pos: 7636
                length: 33
              - type: return_statement
                fields:
                  text: 'return !(attributes != null ? !attributes.equals(that.attributes)
                    : that.attributes != null);'
                children: []
                pos: 7679
                length: 93
              pos: 7535
              length: 243
          children: []
          pos: 7489
          length: 289
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hashCode
              children: []
              pos: 7969
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7944
              length: 106
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return attributes != null ? attributes.hashCode() : 0;'
                children: []
                pos: 7990
                length: 54
              pos: 7980
              length: 70
          children: []
          pos: 7944
          length: 106
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: clone
              children: []
              pos: 8088
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8056
              length: 526
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: attributes
                            children: []
                            pos: 8110
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8124
                            length: 4
                        children: []
                        pos: 8110
                        length: 18
                    children: []
                    pos: 8109
                    length: 20
                children:
                - type: return_statement
                  fields:
                    text: return new Attributes();
                  children: []
                  pos: 8142
                  length: 24
                pos: 8106
                length: 60
              - type: local_variable_declaration
                fields:
                  text: Attributes clone;
                children: []
                pos: 8176
                length: 17
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: clone = (Attributes) super.clone();
                      children: []
                      pos: 8220
                      length: 35
                    pos: 8206
                    length: 59
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (CloneNotSupportedException e) {
                                      throw new RuntimeException(e);
                                  }
                      children: []
                      pos: 8266
                      length: 91
                    pos: 8202
                    length: 155
                children: []
                pos: 8202
                length: 155
              - type: expression_statement
                fields:
                  text: clone.attributes = new LinkedHashMap<String, Attribute>(attributes.size());
                children: []
                pos: 8366
                length: 75
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Attribute attribute: this)
                                clone.attributes.put(attribute.getKey(), attribute.clone());
                children: []
                pos: 8450
                length: 104
              - type: return_statement
                fields:
                  text: return clone;
                children: []
                pos: 8563
                length: 13
              pos: 8096
              length: 486
          children: []
          pos: 8056
          length: 526
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: Dataset
              children: []
              pos: 8602
              length: 7
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private Dataset() {
                                if (attributes == null)
                                    attributes = new LinkedHashMap<String, Attribute>(2);
                            }
                children: []
                pos: 8657
                length: 135
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: entrySet
                    children: []
                    pos: 8854
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 8802
                    length: 109
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return new EntrySet();
                      children: []
                      pos: 8879
                      length: 22
                    pos: 8865
                    length: 46
                children: []
                pos: 8802
                length: 109
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: put
                    children: []
                    pos: 8953
                    length: 3
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String key
                      children: []
                      pos: 8957
                      length: 10
                    pos: 8921
                    length: 339
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: String dataKey = dataKey(key);
                      children: []
                      pos: 8997
                      length: 30
                    - type: local_variable_declaration
                      fields:
                        text: 'String oldValue = hasKey(dataKey) ? attributes.get(dataKey).getValue()
                          : null;'
                      children: []
                      pos: 9040
                      length: 78
                    - type: local_variable_declaration
                      fields:
                        text: Attribute attr = new Attribute(dataKey, value);
                      children: []
                      pos: 9131
                      length: 47
                    - type: expression_statement
                      fields:
                        text: attributes.put(dataKey, attr);
                      children: []
                      pos: 9191
                      length: 30
                    - type: return_statement
                      fields:
                        text: return oldValue;
                      children: []
                      pos: 9234
                      length: 16
                    pos: 8983
                    length: 277
                children: []
                pos: 8921
                length: 339
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: EntrySet
                    children: []
                    pos: 9284
                    length: 8
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: iterator
                          children: []
                          pos: 9420
                          length: 8
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 9355
                          length: 137
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return new DatasetIterator();
                            children: []
                            pos: 9449
                            length: 29
                          pos: 9431
                          length: 61
                      children: []
                      pos: 9355
                      length: 137
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: size
                          children: []
                          pos: 9538
                          length: 4
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 9505
                          length: 239
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: int count = 0;
                            children: []
                            pos: 9563
                            length: 14
                          - type: local_variable_declaration
                            fields:
                              text: Iterator iter = new DatasetIterator();
                            children: []
                            pos: 9594
                            length: 38
                          - type: while_statement
                            fields:
                              text: |-
                                while (iter.hasNext())
                                                    count++;
                            children: []
                            pos: 9649
                            length: 51
                          - type: return_statement
                            fields:
                              text: return count;
                            children: []
                            pos: 9717
                            length: 13
                          pos: 9545
                          length: 199
                      children: []
                      pos: 9505
                      length: 239
                    pos: 9270
                    length: 484
                children: []
                pos: 9270
                length: 484
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: DatasetIterator
                    children: []
                    pos: 9778
                    length: 15
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private Iterator<Attribute> attrIter = attributes.values().iterator();
                      children: []
                      pos: 9855
                      length: 70
                    - type: field_declaration
                      fields:
                        text: private Attribute attr;
                      children: []
                      pos: 9938
                      length: 23
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: hasNext
                          children: []
                          pos: 9989
                          length: 7
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 9974
                          length: 238
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: while_statement
                            fields:
                              text: |-
                                while (attrIter.hasNext()) {
                                                    attr = attrIter.next();
                                                    if (attr.isDataAttribute()) return true;
                                                }
                            children: []
                            pos: 10017
                            length: 151
                          - type: return_statement
                            fields:
                              text: return false;
                            children: []
                            pos: 10185
                            length: 13
                          pos: 9999
                          length: 213
                      children: []
                      pos: 9974
                      length: 238
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: next
                          children: []
                          pos: 10255
                          length: 4
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 10226
                          length: 152
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: return_statement
                            fields:
                              text: return new Attribute(attr.getKey().substring(dataPrefix.length()),
                                attr.getValue());
                            children: []
                            pos: 10280
                            length: 84
                          pos: 10262
                          length: 116
                      children: []
                      pos: 10226
                      length: 152
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: remove
                          children: []
                          pos: 10404
                          length: 6
                        parameters:
                          type: method_parameters
                          fields: {}
                          children: []
                          pos: 10392
                          length: 86
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: expression_statement
                            fields:
                              text: attributes.remove(attr.getKey());
                            children: []
                            pos: 10431
                            length: 33
                          pos: 10413
                          length: 65
                      children: []
                      pos: 10392
                      length: 86
                    pos: 9764
                    length: 724
                children: []
                pos: 9764
                length: 724
              pos: 8588
              length: 1906
          children: []
          pos: 8588
          length: 1906
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: dataKey
              children: []
              pos: 10522
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String key
                children: []
                pos: 10530
                length: 10
              pos: 10500
              length: 82
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return dataPrefix + key;
                children: []
                pos: 10552
                length: 24
              pos: 10542
              length: 40
          children: []
          pos: 10500
          length: 82
        pos: 835
        length: 9749
    children: []
    pos: 835
    length: 9749
  pos: 0
  length: 10585
text_diff: "--- before\n+++ after\n@@ -122,7 +122,7 @@\n         for (Iterator<String>
  it = attributes.keySet().iterator(); it.hasNext(); ) {\n             String attrKey
  = it.next();\n             if (attrKey.equalsIgnoreCase(key))\n-                it.remove();\n+
  \               attributes.remove(attrKey);\n         }\n     }\n \n"
tree_diff: |+
  New cluster:
  UPDATE from for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
              String attrKey = it.next();
              if (attrKey.equalsIgnoreCase(key))
                  it.remove();
          } to for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
              String attrKey = it.next();
              if (attrKey.equalsIgnoreCase(key))
                  attributes.remove(attrKey);
          }
  ------------
  ===
  update-node
  ---
  for_statement: for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
              String attrKey = it.next();
              if (attrKey.equalsIgnoreCase(key))
                  it.remove();
          } [3568,3770]
  replace for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
              String attrKey = it.next();
              if (attrKey.equalsIgnoreCase(key))
                  it.remove();
          } by for (Iterator<String> it = attributes.keySet().iterator(); it.hasNext(); ) {
              String attrKey = it.next();
              if (attrKey.equalsIgnoreCase(key))
                  attributes.remove(attrKey);
          }

...
