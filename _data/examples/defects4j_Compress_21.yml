---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: SevenZOutputFile
        children: []
        pos: 1388
        length: 16
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final RandomAccessFile file;
          children: []
          pos: 1411
          length: 36
        - type: field_declaration
          fields:
            text: private final List<SevenZArchiveEntry> files = new ArrayList<SevenZArchiveEntry>();
          children: []
          pos: 1452
          length: 83
        - type: field_declaration
          fields:
            text: private int numNonEmptyStreams = 0;
          children: []
          pos: 1540
          length: 35
        - type: field_declaration
          fields:
            text: private CRC32 crc32 = new CRC32();
          children: []
          pos: 1580
          length: 34
        - type: field_declaration
          fields:
            text: private CRC32 compressedCrc32 = new CRC32();
          children: []
          pos: 1619
          length: 44
        - type: field_declaration
          fields:
            text: private long fileBytesWritten = 0;
          children: []
          pos: 1668
          length: 34
        - type: field_declaration
          fields:
            text: private boolean finished = false;
          children: []
          pos: 1707
          length: 33
        - type: field_declaration
          fields:
            text: private CountingOutputStream currentOutputStream;
          children: []
          pos: 1745
          length: 49
        - type: field_declaration
          fields:
            text: private SevenZMethod contentCompression = SevenZMethod.LZMA2;
          children: []
          pos: 1799
          length: 61
        - type: constructor_declaration
          fields:
            text: |-
              public SevenZOutputFile(final File filename) throws IOException {
                      file = new RandomAccessFile(filename, "rw");
                      file.seek(SevenZFile.SIGNATURE_HEADER_SIZE);
                  }
          children: []
          pos: 2042
          length: 177
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setContentCompression
              children: []
              pos: 2529
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SevenZMethod method
                children: []
                pos: 2551
                length: 19
              pos: 2517
              length: 104
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.contentCompression = method;
                children: []
                pos: 2582
                length: 33
              pos: 2572
              length: 49
          children: []
          pos: 2517
          length: 104
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: close
              children: []
              pos: 2755
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2743
              length: 125
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!finished"
                        children: []
                        pos: 2796
                        length: 9
                    children: []
                    pos: 2795
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: finish();
                    children: []
                    pos: 2821
                    length: 9
                  pos: 2807
                  length: 33
                pos: 2792
                length: 48
              - type: expression_statement
                fields:
                  text: file.close();
                children: []
                pos: 2849
                length: 13
              pos: 2782
              length: 86
          children: []
          pos: 2743
          length: 125
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveEntry
              children: []
              pos: 3153
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final File inputFile
                children: []
                pos: 3172
                length: 20
              pos: 3127
              length: 376
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final SevenZArchiveEntry entry = new SevenZArchiveEntry();
                children: []
                pos: 3259
                length: 58
              - type: expression_statement
                fields:
                  text: entry.setDirectory(inputFile.isDirectory());
                children: []
                pos: 3326
                length: 44
              - type: expression_statement
                fields:
                  text: entry.setName(entryName);
                children: []
                pos: 3379
                length: 25
              - type: expression_statement
                fields:
                  text: entry.setLastModifiedDate(new Date(inputFile.lastModified()));
                children: []
                pos: 3413
                length: 62
              - type: return_statement
                fields:
                  text: return entry;
                children: []
                pos: 3484
                length: 13
              pos: 3249
              length: 254
          children: []
          pos: 3127
          length: 376
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: putArchiveEntry
              children: []
              pos: 3797
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final ArchiveEntry archiveEntry
                children: []
                pos: 3813
                length: 31
              pos: 3785
              length: 189
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final SevenZArchiveEntry entry = (SevenZArchiveEntry) archiveEntry;
                children: []
                pos: 3875
                length: 67
              - type: expression_statement
                fields:
                  text: files.add(entry);
                children: []
                pos: 3951
                length: 17
              pos: 3865
              length: 109
          children: []
          pos: 3785
          length: 189
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: closeArchiveEntry
              children: []
              pos: 4072
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4060
              length: 940
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: currentOutputStream
                            children: []
                            pos: 4125
                            length: 19
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4148
                            length: 4
                        children: []
                        pos: 4125
                        length: 27
                    children: []
                    pos: 4124
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOutputStream.flush();
                    children: []
                    pos: 4168
                    length: 28
                  - type: expression_statement
                    fields:
                      text: currentOutputStream.close();
                    children: []
                    pos: 4209
                    length: 28
                  pos: 4154
                  length: 93
                pos: 4121
                length: 126
              - type: local_variable_declaration
                fields:
                  text: final SevenZArchiveEntry entry = files.get(files.size() -
                    1);
                children: []
                pos: 4257
                length: 61
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: fileBytesWritten
                            children: []
                            pos: 4331
                            length: 16
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 4350
                            length: 1
                        children: []
                        pos: 4331
                        length: 20
                    children: []
                    pos: 4330
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: entry.setHasStream(true);
                    children: []
                    pos: 4367
                    length: 25
                  - type: expression_statement
                    fields:
                      text: "++numNonEmptyStreams;"
                    children: []
                    pos: 4405
                    length: 21
                  - type: expression_statement
                    fields:
                      text: entry.setSize(currentOutputStream.getBytesWritten());
                    children: []
                    pos: 4439
                    length: 53
                  - type: expression_statement
                    fields:
                      text: entry.setCompressedSize(fileBytesWritten);
                    children: []
                    pos: 4505
                    length: 42
                  - type: expression_statement
                    fields:
                      text: entry.setCrcValue(crc32.getValue());
                    children: []
                    pos: 4560
                    length: 36
                  - type: expression_statement
                    fields:
                      text: entry.setCompressedCrcValue(compressedCrc32.getValue());
                    children: []
                    pos: 4609
                    length: 56
                  - type: expression_statement
                    fields:
                      text: entry.setHasCrc(true);
                    children: []
                    pos: 4678
                    length: 22
                  pos: 4353
                  length: 357
                pos: 4327
                length: 545
              - type: expression_statement
                fields:
                  text: currentOutputStream = null;
                children: []
                pos: 4881
                length: 27
              - type: expression_statement
                fields:
                  text: crc32.reset();
                children: []
                pos: 4917
                length: 14
              - type: expression_statement
                fields:
                  text: compressedCrc32.reset();
                children: []
                pos: 4940
                length: 24
              - type: expression_statement
                fields:
                  text: fileBytesWritten = 0;
                children: []
                pos: 4973
                length: 21
              pos: 4111
              length: 889
          children: []
          pos: 4060
          length: 940
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: write
              children: []
              pos: 5165
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int b
                children: []
                pos: 5171
                length: 11
              pos: 5153
              length: 100
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: getCurrentOutputStream().write(b);
                children: []
                pos: 5213
                length: 34
              pos: 5203
              length: 50
          children: []
          pos: 5153
          length: 100
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: write
              children: []
              pos: 5430
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] b
                children: []
                pos: 5436
                length: 14
              pos: 5418
              length: 91
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: write(b, 0, b.length);
                children: []
                pos: 5481
                length: 22
              pos: 5471
              length: 38
          children: []
          pos: 5418
          length: 91
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: write
              children: []
              pos: 5799
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] b
                children: []
                pos: 5805
                length: 14
              pos: 5787
              length: 180
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: len
                            children: []
                            pos: 5884
                            length: 3
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 5890
                            length: 1
                        children: []
                        pos: 5884
                        length: 7
                    children: []
                    pos: 5883
                    length: 9
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: getCurrentOutputStream().write(b, off, len);
                    children: []
                    pos: 5907
                    length: 44
                  pos: 5893
                  length: 68
                pos: 5880
                length: 81
              pos: 5870
              length: 97
          children: []
          pos: 5787
          length: 180
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: finish
              children: []
              pos: 6147
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6135
              length: 1608
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: finished
                        children: []
                        pos: 6189
                        length: 8
                    children: []
                    pos: 6188
                    length: 10
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IOException("This archive has already been finished");
                    children: []
                    pos: 6213
                    length: 64
                  pos: 6199
                  length: 88
                pos: 6185
                length: 102
              - type: expression_statement
                fields:
                  text: finished = true;
                children: []
                pos: 6296
                length: 16
              - type: local_variable_declaration
                fields:
                  text: final long headerPosition = file.getFilePointer();
                children: []
                pos: 6330
                length: 50
              - type: local_variable_declaration
                fields:
                  text: final ByteArrayOutputStream headerBaos = new ByteArrayOutputStream();
                children: []
                pos: 6398
                length: 69
              - type: local_variable_declaration
                fields:
                  text: final DataOutputStream header = new DataOutputStream(headerBaos);
                children: []
                pos: 6476
                length: 65
              - type: expression_statement
                fields:
                  text: writeHeader(header);
                children: []
                pos: 6559
                length: 20
              - type: expression_statement
                fields:
                  text: header.flush();
                children: []
                pos: 6588
                length: 15
              - type: local_variable_declaration
                fields:
                  text: final byte[] headerBytes = headerBaos.toByteArray();
                children: []
                pos: 6612
                length: 52
              - type: expression_statement
                fields:
                  text: file.write(headerBytes);
                children: []
                pos: 6673
                length: 24
              - type: local_variable_declaration
                fields:
                  text: final CRC32 crc32 = new CRC32();
                children: []
                pos: 6715
                length: 32
              - type: expression_statement
                fields:
                  text: file.seek(0);
                children: []
                pos: 6793
                length: 13
              - type: expression_statement
                fields:
                  text: file.write(SevenZFile.sevenZSignature);
                children: []
                pos: 6815
                length: 39
              - type: expression_statement
                fields:
                  text: file.write(0);
                children: []
                pos: 6882
                length: 14
              - type: expression_statement
                fields:
                  text: file.write(2);
                children: []
                pos: 6905
                length: 14
              - type: local_variable_declaration
                fields:
                  text: final ByteArrayOutputStream startHeaderBaos = new ByteArrayOutputStream();
                children: []
                pos: 6961
                length: 74
              - type: local_variable_declaration
                fields:
                  text: final DataOutputStream startHeaderStream = new DataOutputStream(startHeaderBaos);
                children: []
                pos: 7044
                length: 81
              - type: expression_statement
                fields:
                  text: startHeaderStream.writeLong(Long.reverseBytes(headerPosition
                    - SevenZFile.SIGNATURE_HEADER_SIZE));
                children: []
                pos: 7134
                length: 98
              - type: expression_statement
                fields:
                  text: startHeaderStream.writeLong(Long.reverseBytes(0xffffFFFFL
                    & headerBytes.length));
                children: []
                pos: 7241
                length: 81
              - type: expression_statement
                fields:
                  text: crc32.reset();
                children: []
                pos: 7331
                length: 14
              - type: expression_statement
                fields:
                  text: crc32.update(headerBytes);
                children: []
                pos: 7354
                length: 26
              - type: expression_statement
                fields:
                  text: startHeaderStream.writeInt(Integer.reverseBytes((int)crc32.getValue()));
                children: []
                pos: 7389
                length: 72
              - type: expression_statement
                fields:
                  text: startHeaderStream.flush();
                children: []
                pos: 7470
                length: 26
              - type: local_variable_declaration
                fields:
                  text: final byte[] startHeaderBytes = startHeaderBaos.toByteArray();
                children: []
                pos: 7505
                length: 62
              - type: expression_statement
                fields:
                  text: crc32.reset();
                children: []
                pos: 7576
                length: 14
              - type: expression_statement
                fields:
                  text: crc32.update(startHeaderBytes);
                children: []
                pos: 7599
                length: 31
              - type: expression_statement
                fields:
                  text: file.writeInt(Integer.reverseBytes((int) crc32.getValue()));
                children: []
                pos: 7639
                length: 60
              - type: expression_statement
                fields:
                  text: file.write(startHeaderBytes);
                children: []
                pos: 7708
                length: 29
              pos: 6175
              length: 1568
          children: []
          pos: 6135
          length: 1608
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getCurrentOutputStream
              children: []
              pos: 7975
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7954
              length: 220
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: currentOutputStream
                            children: []
                            pos: 8033
                            length: 19
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8056
                            length: 4
                        children: []
                        pos: 8033
                        length: 27
                    children: []
                    pos: 8032
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOutputStream = setupFileOutputStream();
                    children: []
                    pos: 8076
                    length: 46
                  pos: 8062
                  length: 70
                pos: 8029
                length: 103
              - type: return_statement
                fields:
                  text: return currentOutputStream;
                children: []
                pos: 8141
                length: 27
              pos: 8019
              length: 155
          children: []
          pos: 7954
          length: 220
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setupFileOutputStream
              children: []
              pos: 8209
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8180
              length: 958
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: OutputStream out = new OutputStreamWrapper();
                children: []
                pos: 8262
                length: 45
              - type: return_statement
                fields:
                  text: "return new CountingOutputStream(Coders\n                                        .addEncoder(out,\n
                    \                                                   contentCompression,\n
                    \                                                   null)) {\n
                    \           @Override\n            public void write(final int
                    b) throws IOException {\n                super.write(b);\n                crc32.update(b);\n
                    \           }\n    \n            @Override\n            public
                    void write(final byte[] b) throws IOException {\n                super.write(b);\n
                    \               crc32.update(b);\n            }\n    \n            @Override\n
                    \           public void write(final byte[] b, final int off, final
                    int len)\n                throws IOException {\n                super.write(b,
                    off, len);\n                crc32.update(b, off, len);\n            }\n
                    \       };"
                children: []
                pos: 8316
                length: 816
              pos: 8252
              length: 886
          children: []
          pos: 8180
          length: 958
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeHeader
              children: []
              pos: 9157
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 9169
                length: 23
              pos: 9144
              length: 262
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kHeader);
                children: []
                pos: 9223
                length: 26
              - type: expression_statement
                fields:
                  text: header.write(NID.kMainStreamsInfo);
                children: []
                pos: 9267
                length: 35
              - type: expression_statement
                fields:
                  text: writeStreamsInfo(header);
                children: []
                pos: 9311
                length: 25
              - type: expression_statement
                fields:
                  text: writeFilesInfo(header);
                children: []
                pos: 9345
                length: 23
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 9377
                length: 23
              pos: 9213
              length: 193
          children: []
          pos: 9144
          length: 262
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeStreamsInfo
              children: []
              pos: 9429
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 9446
                length: 23
              pos: 9416
              length: 288
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numNonEmptyStreams
                            children: []
                            pos: 9504
                            length: 18
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 9525
                            length: 1
                        children: []
                        pos: 9504
                        length: 22
                    children: []
                    pos: 9503
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: writePackInfo(header);
                    children: []
                    pos: 9542
                    length: 22
                  - type: expression_statement
                    fields:
                      text: writeUnpackInfo(header);
                    children: []
                    pos: 9577
                    length: 24
                  pos: 9528
                  length: 83
                pos: 9500
                length: 111
              - type: expression_statement
                fields:
                  text: writeSubStreamsInfo(header);
                children: []
                pos: 9629
                length: 28
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 9675
                length: 23
              pos: 9490
              length: 214
          children: []
          pos: 9416
          length: 288
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writePackInfo
              children: []
              pos: 9727
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 9741
                length: 23
              pos: 9714
              length: 756
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kPackInfo);
                children: []
                pos: 9795
                length: 28
              - type: expression_statement
                fields:
                  text: writeUint64(header, 0);
                children: []
                pos: 9841
                length: 23
              - type: expression_statement
                fields:
                  text: writeUint64(header, 0xffffFFFFL & numNonEmptyStreams);
                children: []
                pos: 9873
                length: 54
              - type: expression_statement
                fields:
                  text: header.write(NID.kSize);
                children: []
                pos: 9945
                length: 24
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    writeUint64(header, entry.getCompressedSize());
                                }
                            }
                children: []
                pos: 9978
                length: 171
              - type: expression_statement
                fields:
                  text: header.write(NID.kCRC);
                children: []
                pos: 10167
                length: 23
              - type: expression_statement
                fields:
                  text: header.write(1);
                children: []
                pos: 10199
                length: 16
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    header.writeInt(Integer.reverseBytes((int) entry.getCompressedCrcValue()));
                                }
                            }
                children: []
                pos: 10224
                length: 199
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 10441
                length: 23
              pos: 9785
              length: 685
          children: []
          pos: 9714
          length: 756
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeUnpackInfo
              children: []
              pos: 10493
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 10509
                length: 23
              pos: 10480
              length: 864
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kUnpackInfo);
                children: []
                pos: 10563
                length: 30
              - type: expression_statement
                fields:
                  text: header.write(NID.kFolder);
                children: []
                pos: 10611
                length: 26
              - type: expression_statement
                fields:
                  text: writeUint64(header, numNonEmptyStreams);
                children: []
                pos: 10646
                length: 40
              - type: expression_statement
                fields:
                  text: header.write(0);
                children: []
                pos: 10695
                length: 16
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < numNonEmptyStreams; i++) {
                                writeFolder(header);
                            }
                children: []
                pos: 10720
                length: 89
              - type: expression_statement
                fields:
                  text: header.write(NID.kCodersUnpackSize);
                children: []
                pos: 10827
                length: 36
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    writeUint64(header, entry.getSize());
                                }
                            }
                children: []
                pos: 10872
                length: 161
              - type: expression_statement
                fields:
                  text: header.write(NID.kCRC);
                children: []
                pos: 11051
                length: 23
              - type: expression_statement
                fields:
                  text: header.write(1);
                children: []
                pos: 11083
                length: 16
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    header.writeInt(Integer.reverseBytes((int) entry.getCrcValue()));
                                }
                            }
                children: []
                pos: 11108
                length: 189
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 11315
                length: 23
              pos: 10553
              length: 791
          children: []
          pos: 10480
          length: 864
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFolder
              children: []
              pos: 11367
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 11379
                length: 23
              pos: 11354
              length: 548
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: writeUint64(header, 1);
                children: []
                pos: 11454
                length: 23
              - type: local_variable_declaration
                fields:
                  text: byte[] id = contentCompression.getId();
                children: []
                pos: 11486
                length: 39
              - type: local_variable_declaration
                fields:
                  text: byte[] properties = contentCompression.getProperties();
                children: []
                pos: 11534
                length: 55
              - type: local_variable_declaration
                fields:
                  text: int codecFlags = id.length;
                children: []
                pos: 11599
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: properties.length
                            children: []
                            pos: 11639
                            length: 17
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11659
                            length: 1
                        children: []
                        pos: 11639
                        length: 21
                    children: []
                    pos: 11638
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: codecFlags |= 0x20;
                    children: []
                    pos: 11676
                    length: 19
                  pos: 11662
                  length: 43
                pos: 11635
                length: 70
              - type: expression_statement
                fields:
                  text: header.write(codecFlags);
                children: []
                pos: 11714
                length: 25
              - type: expression_statement
                fields:
                  text: header.write(id);
                children: []
                pos: 11748
                length: 17
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: properties.length
                            children: []
                            pos: 11779
                            length: 17
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11799
                            length: 1
                        children: []
                        pos: 11779
                        length: 21
                    children: []
                    pos: 11778
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(properties.length);
                    children: []
                    pos: 11816
                    length: 32
                  - type: expression_statement
                    fields:
                      text: header.write(properties);
                    children: []
                    pos: 11861
                    length: 25
                  pos: 11802
                  length: 94
                pos: 11775
                length: 121
              pos: 11423
              length: 479
          children: []
          pos: 11354
          length: 548
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeSubStreamsInfo
              children: []
              pos: 11925
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 11945
                length: 23
              pos: 11912
              length: 439
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kSubStreamsInfo);
                children: []
                pos: 11999
                length: 34
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 12322
                length: 23
              pos: 11989
              length: 362
          children: []
          pos: 11912
          length: 439
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFilesInfo
              children: []
              pos: 12374
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 12389
                length: 23
              pos: 12361
              length: 482
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kFilesInfo);
                children: []
                pos: 12443
                length: 29
              - type: expression_statement
                fields:
                  text: writeUint64(header, files.size());
                children: []
                pos: 12490
                length: 34
              - type: expression_statement
                fields:
                  text: writeFileEmptyStreams(header);
                children: []
                pos: 12534
                length: 30
              - type: expression_statement
                fields:
                  text: writeFileEmptyFiles(header);
                children: []
                pos: 12573
                length: 28
              - type: expression_statement
                fields:
                  text: writeFileAntiItems(header);
                children: []
                pos: 12610
                length: 27
              - type: expression_statement
                fields:
                  text: writeFileNames(header);
                children: []
                pos: 12646
                length: 23
              - type: expression_statement
                fields:
                  text: writeFileCTimes(header);
                children: []
                pos: 12678
                length: 24
              - type: expression_statement
                fields:
                  text: writeFileATimes(header);
                children: []
                pos: 12711
                length: 24
              - type: expression_statement
                fields:
                  text: writeFileMTimes(header);
                children: []
                pos: 12744
                length: 24
              - type: expression_statement
                fields:
                  text: writeFileWindowsAttributes(header);
                children: []
                pos: 12777
                length: 35
              - type: expression_statement
                fields:
                  text: header.write(0);
                children: []
                pos: 12821
                length: 16
              pos: 12433
              length: 410
          children: []
          pos: 12361
          length: 482
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileEmptyStreams
              children: []
              pos: 12866
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 12888
                length: 23
              pos: 12853
              length: 957
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasEmptyStreams = false;
                children: []
                pos: 12942
                length: 32
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (!entry.hasStream()) {
                                    hasEmptyStreams = true;
                                    break;
                                }
                            }
                children: []
                pos: 12983
                length: 171
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: hasEmptyStreams
                        children: []
                        pos: 13167
                        length: 15
                    children: []
                    pos: 13166
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kEmptyStream);
                    children: []
                    pos: 13198
                    length: 31
                  - type: local_variable_declaration
                    fields:
                      text: final BitSet emptyStreams = new BitSet(files.size());
                    children: []
                    pos: 13242
                    length: 53
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < files.size(); i++) {
                                        emptyStreams.set(i, !files.get(i).hasStream());
                                    }
                    children: []
                    pos: 13308
                    length: 118
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 13439
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 13515
                    length: 56
                  - type: expression_statement
                    fields:
                      text: writeBits(out, emptyStreams, files.size());
                    children: []
                    pos: 13584
                    length: 43
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 13640
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 13665
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 13721
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 13771
                    length: 23
                  pos: 13184
                  length: 620
                pos: 13163
                length: 641
              pos: 12932
              length: 878
          children: []
          pos: 12853
          length: 957
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileEmptyFiles
              children: []
              pos: 13833
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 13853
                length: 23
              pos: 13820
              length: 942
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasEmptyFiles = false;
                children: []
                pos: 13907
                length: 30
              - type: local_variable_declaration
                fields:
                  text: int emptyStreamCounter = 0;
                children: []
                pos: 13946
                length: 27
              - type: local_variable_declaration
                fields:
                  text: final BitSet emptyFiles = new BitSet(0);
                children: []
                pos: 13982
                length: 40
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < files.size(); i++) {
                                if (!files.get(i).hasStream()) {
                                    boolean isDir = files.get(i).isDirectory();
                                    emptyFiles.set(emptyStreamCounter++, !isDir);
                                    hasEmptyFiles |= !isDir;
                                }
                            }
                children: []
                pos: 14031
                length: 272
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: hasEmptyFiles
                        children: []
                        pos: 14316
                        length: 13
                    children: []
                    pos: 14315
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kEmptyFile);
                    children: []
                    pos: 14345
                    length: 29
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 14387
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 14463
                    length: 56
                  - type: expression_statement
                    fields:
                      text: writeBits(out, emptyFiles, emptyStreamCounter);
                    children: []
                    pos: 14532
                    length: 47
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 14592
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 14617
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 14673
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 14723
                    length: 23
                  pos: 14331
                  length: 425
                pos: 14312
                length: 444
              pos: 13897
              length: 865
          children: []
          pos: 13820
          length: 942
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileAntiItems
              children: []
              pos: 14785
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 14804
                length: 23
              pos: 14772
              length: 921
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasAntiItems = false;
                children: []
                pos: 14858
                length: 29
              - type: local_variable_declaration
                fields:
                  text: final BitSet antiItems = new BitSet(0);
                children: []
                pos: 14896
                length: 39
              - type: local_variable_declaration
                fields:
                  text: int antiItemCounter = 0;
                children: []
                pos: 14944
                length: 24
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < files.size(); i++) {
                                if (!files.get(i).hasStream()) {
                                    boolean isAnti = files.get(i).isAntiItem();
                                    antiItems.set(antiItemCounter++, isAnti);
                                    hasAntiItems |= isAnti;
                                }
                            }
                children: []
                pos: 14977
                length: 267
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: hasAntiItems
                        children: []
                        pos: 15257
                        length: 12
                    children: []
                    pos: 15256
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kAnti);
                    children: []
                    pos: 15285
                    length: 24
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 15322
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 15398
                    length: 56
                  - type: expression_statement
                    fields:
                      text: writeBits(out, antiItems, antiItemCounter);
                    children: []
                    pos: 15467
                    length: 43
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 15523
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 15548
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 15604
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 15654
                    length: 23
                  pos: 15271
                  length: 416
                pos: 15253
                length: 434
              pos: 14848
              length: 845
          children: []
          pos: 14772
          length: 921
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileNames
              children: []
              pos: 15716
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 15731
                length: 23
              pos: 15703
              length: 588
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kName);
                children: []
                pos: 15785
                length: 24
              - type: local_variable_declaration
                fields:
                  text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                children: []
                pos: 15827
                length: 63
              - type: local_variable_declaration
                fields:
                  text: final DataOutputStream out = new DataOutputStream(baos);
                children: []
                pos: 15899
                length: 56
              - type: expression_statement
                fields:
                  text: out.write(0);
                children: []
                pos: 15964
                length: 13
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                out.write(entry.getName().getBytes("UTF-16LE"));
                                out.writeShort(0);
                            }
                children: []
                pos: 15986
                length: 148
              - type: expression_statement
                fields:
                  text: out.flush();
                children: []
                pos: 16143
                length: 12
              - type: local_variable_declaration
                fields:
                  text: final byte[] contents = baos.toByteArray();
                children: []
                pos: 16164
                length: 43
              - type: expression_statement
                fields:
                  text: writeUint64(header, contents.length);
                children: []
                pos: 16216
                length: 37
              - type: expression_statement
                fields:
                  text: header.write(contents);
                children: []
                pos: 16262
                length: 23
              pos: 15775
              length: 516
          children: []
          pos: 15703
          length: 588
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileCTimes
              children: []
              pos: 16310
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 16326
                length: 23
              pos: 16297
              length: 1396
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numCreationDates = 0;
                children: []
                pos: 16380
                length: 25
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasCreationDate()) {
                                    ++numCreationDates;
                                }
                            }
                children: []
                pos: 16414
                length: 152
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numCreationDates
                            children: []
                            pos: 16579
                            length: 16
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 16598
                            length: 1
                        children: []
                        pos: 16579
                        length: 20
                    children: []
                    pos: 16578
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kCTime);
                    children: []
                    pos: 16615
                    length: 25
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 16654
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 16730
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numCreationDates
                                children: []
                                pos: 16803
                                length: 16
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 16823
                                length: 12
                            children: []
                            pos: 16803
                            length: 32
                        children: []
                        pos: 16802
                        length: 34
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 16855
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet cTimes = new BitSet(files.size());
                        children: []
                        pos: 16885
                        length: 47
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                cTimes.set(i, files.get(i).getHasCreationDate());
                                            }
                        children: []
                        pos: 16949
                        length: 128
                      - type: expression_statement
                        fields:
                          text: writeBits(out, cTimes, files.size());
                        children: []
                        pos: 17094
                        length: 37
                      pos: 16837
                      length: 308
                    pos: 16799
                    length: 397
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 17209
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasCreationDate()) {
                                            out.writeLong(Long.reverseBytes(
                                                    SevenZArchiveEntry.javaTimeToNtfsTime(entry.getCreationDate())));
                                        }
                                    }
                    children: []
                    pos: 17235
                    length: 275
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 17523
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 17548
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 17604
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 17654
                    length: 23
                  pos: 16601
                  length: 1086
                pos: 16575
                length: 1112
              pos: 16370
              length: 1323
          children: []
          pos: 16297
          length: 1396
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileATimes
              children: []
              pos: 17712
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 17728
                length: 23
              pos: 17699
              length: 1380
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numAccessDates = 0;
                children: []
                pos: 17782
                length: 23
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasAccessDate()) {
                                    ++numAccessDates;
                                }
                            }
                children: []
                pos: 17814
                length: 148
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numAccessDates
                            children: []
                            pos: 17975
                            length: 14
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 17992
                            length: 1
                        children: []
                        pos: 17975
                        length: 18
                    children: []
                    pos: 17974
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kATime);
                    children: []
                    pos: 18009
                    length: 25
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 18048
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 18124
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numAccessDates
                                children: []
                                pos: 18197
                                length: 14
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 18215
                                length: 12
                            children: []
                            pos: 18197
                            length: 30
                        children: []
                        pos: 18196
                        length: 32
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 18247
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet aTimes = new BitSet(files.size());
                        children: []
                        pos: 18277
                        length: 47
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                aTimes.set(i, files.get(i).getHasAccessDate());
                                            }
                        children: []
                        pos: 18341
                        length: 126
                      - type: expression_statement
                        fields:
                          text: writeBits(out, aTimes, files.size());
                        children: []
                        pos: 18484
                        length: 37
                      pos: 18229
                      length: 306
                    pos: 18193
                    length: 393
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 18599
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasAccessDate()) {
                                            out.writeLong(Long.reverseBytes(
                                                    SevenZArchiveEntry.javaTimeToNtfsTime(entry.getAccessDate())));
                                        }
                                    }
                    children: []
                    pos: 18625
                    length: 271
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 18909
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 18934
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 18990
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 19040
                    length: 23
                  pos: 17995
                  length: 1078
                pos: 17971
                length: 1102
              pos: 17772
              length: 1307
          children: []
          pos: 17699
          length: 1380
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileMTimes
              children: []
              pos: 19098
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 19114
                length: 23
              pos: 19085
              length: 1428
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numLastModifiedDates = 0;
                children: []
                pos: 19168
                length: 29
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasLastModifiedDate()) {
                                    ++numLastModifiedDates;
                                }
                            }
                children: []
                pos: 19206
                length: 160
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numLastModifiedDates
                            children: []
                            pos: 19379
                            length: 20
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 19402
                            length: 1
                        children: []
                        pos: 19379
                        length: 24
                    children: []
                    pos: 19378
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kMTime);
                    children: []
                    pos: 19419
                    length: 25
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 19458
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 19534
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numLastModifiedDates
                                children: []
                                pos: 19607
                                length: 20
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 19631
                                length: 12
                            children: []
                            pos: 19607
                            length: 36
                        children: []
                        pos: 19606
                        length: 38
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 19663
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet mTimes = new BitSet(files.size());
                        children: []
                        pos: 19693
                        length: 47
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                mTimes.set(i, files.get(i).getHasLastModifiedDate());
                                            }
                        children: []
                        pos: 19757
                        length: 132
                      - type: expression_statement
                        fields:
                          text: writeBits(out, mTimes, files.size());
                        children: []
                        pos: 19906
                        length: 37
                      pos: 19645
                      length: 312
                    pos: 19603
                    length: 405
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 20021
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasLastModifiedDate()) {
                                            out.writeLong(Long.reverseBytes(
                                                    SevenZArchiveEntry.javaTimeToNtfsTime(entry.getLastModifiedDate())));
                                        }
                                    }
                    children: []
                    pos: 20047
                    length: 283
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 20343
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 20368
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 20424
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 20474
                    length: 23
                  pos: 19405
                  length: 1102
                pos: 19375
                length: 1132
              pos: 19158
              length: 1355
          children: []
          pos: 19085
          length: 1428
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileWindowsAttributes
              children: []
              pos: 20532
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 20559
                length: 23
              pos: 20519
              length: 1397
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numWindowsAttributes = 0;
                children: []
                pos: 20613
                length: 29
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasWindowsAttributes()) {
                                    ++numWindowsAttributes;
                                }
                            }
                children: []
                pos: 20651
                length: 161
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numWindowsAttributes
                            children: []
                            pos: 20825
                            length: 20
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 20848
                            length: 1
                        children: []
                        pos: 20825
                        length: 24
                    children: []
                    pos: 20824
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kWinAttributes);
                    children: []
                    pos: 20865
                    length: 33
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 20912
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 20988
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numWindowsAttributes
                                children: []
                                pos: 21061
                                length: 20
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 21085
                                length: 12
                            children: []
                            pos: 21061
                            length: 36
                        children: []
                        pos: 21060
                        length: 38
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 21117
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet attributes = new BitSet(files.size());
                        children: []
                        pos: 21147
                        length: 51
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                attributes.set(i, files.get(i).getHasWindowsAttributes());
                                            }
                        children: []
                        pos: 21215
                        length: 137
                      - type: expression_statement
                        fields:
                          text: writeBits(out, attributes, files.size());
                        children: []
                        pos: 21369
                        length: 41
                      pos: 21099
                      length: 325
                    pos: 21057
                    length: 418
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 21488
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasWindowsAttributes()) {
                                            out.writeInt(Integer.reverseBytes(entry.getWindowsAttributes()));
                                        }
                                    }
                    children: []
                    pos: 21514
                    length: 219
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 21746
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 21771
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 21827
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 21877
                    length: 23
                  pos: 20851
                  length: 1059
                pos: 20821
                length: 1089
              pos: 20603
              length: 1313
          children: []
          pos: 20519
          length: 1397
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeUint64
              children: []
              pos: 21935
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 21947
                length: 23
              pos: 21922
              length: 541
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int firstByte = 0;
                children: []
                pos: 22013
                length: 18
              - type: local_variable_declaration
                fields:
                  text: int mask = 0x80;
                children: []
                pos: 22040
                length: 16
              - type: local_variable_declaration
                fields:
                  text: int i;
                children: []
                pos: 22065
                length: 6
              - type: for_statement
                fields:
                  text: |-
                    for (i = 0; i < 8; i++) {
                                if (value < ((1L << ( 7  * (i + 1))))) {
                                    firstByte |= (value >>> (8 * i));
                                    break;
                                }
                                firstByte |= mask;
                                mask >>>= 1;
                            }
                children: []
                pos: 22080
                length: 231
              - type: expression_statement
                fields:
                  text: header.write(firstByte);
                children: []
                pos: 22320
                length: 24
              - type: for_statement
                fields:
                  text: |-
                    for (; i > 0; i--) {
                                header.write((int) (0xff & value));
                                value >>>= 8;
                            }
                children: []
                pos: 22353
                length: 104
              pos: 22003
              length: 460
          children: []
          pos: 21922
          length: 541
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeBits
              children: []
              pos: 22482
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 22492
                length: 23
              pos: 22469
              length: 470
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int cache = 0;
                children: []
                pos: 22583
                length: 14
              - type: local_variable_declaration
                fields:
                  text: int shift = 7;
                children: []
                pos: 22606
                length: 14
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < length; i++) {
                                cache |= ((bits.get(i) ? 1 : 0) << shift);
                                if (--shift < 0) {
                                    header.write(cache);
                                    shift = 7;
                                    cache = 0;
                                }
                            }
                children: []
                pos: 22629
                length: 235
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: shift
                            children: []
                            pos: 22877
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '7'
                            children: []
                            pos: 22886
                            length: 1
                        children: []
                        pos: 22877
                        length: 10
                    children: []
                    pos: 22876
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(cache);
                    children: []
                    pos: 22903
                    length: 20
                  pos: 22889
                  length: 44
                pos: 22873
                length: 60
              pos: 22573
              length: 366
          children: []
          pos: 22469
          length: 470
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: OutputStreamWrapper
              children: []
              pos: 22959
              length: 19
            body:
              type: class_body
              fields: {}
              children:
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: write
                    children: []
                    pos: 23040
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: final int b
                      children: []
                      pos: 23046
                      length: 11
                    pos: 23010
                    length: 177
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: file.write(b);
                      children: []
                      pos: 23092
                      length: 14
                    - type: expression_statement
                      fields:
                        text: compressedCrc32.update(b);
                      children: []
                      pos: 23119
                      length: 26
                    - type: expression_statement
                      fields:
                        text: fileBytesWritten++;
                      children: []
                      pos: 23158
                      length: 19
                    pos: 23078
                    length: 109
                children: []
                pos: 23010
                length: 177
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: write
                    children: []
                    pos: 23231
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: final byte[] b
                      children: []
                      pos: 23237
                      length: 14
                    pos: 23201
                    length: 142
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: OutputStreamWrapper.this.write(b, 0, b.length);
                      children: []
                      pos: 23286
                      length: 47
                    pos: 23272
                    length: 71
                children: []
                pos: 23201
                length: 142
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: write
                    children: []
                    pos: 23387
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: final byte[] b
                      children: []
                      pos: 23393
                      length: 14
                    pos: 23357
                    length: 247
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: file.write(b, off, len);
                      children: []
                      pos: 23484
                      length: 24
                    - type: expression_statement
                      fields:
                        text: compressedCrc32.update(b, off, len);
                      children: []
                      pos: 23521
                      length: 36
                    - type: expression_statement
                      fields:
                        text: fileBytesWritten += len;
                      children: []
                      pos: 23570
                      length: 24
                    pos: 23470
                    length: 134
                children: []
                pos: 23357
                length: 247
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: flush
                    children: []
                    pos: 23644
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 23614
                    length: 121
                  body:
                    type: block
                    fields: {}
                    children: []
                    pos: 23671
                    length: 64
                children: []
                pos: 23614
                length: 121
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: close
                    children: []
                    pos: 23775
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 23745
                    length: 146
                  body:
                    type: block
                    fields: {}
                    children: []
                    pos: 23802
                    length: 89
                children: []
                pos: 23745
                length: 146
              pos: 22945
              length: 952
          children: []
          pos: 22945
          length: 952
        pos: 1375
        length: 22524
    children: []
    pos: 1375
    length: 22524
  pos: 0
  length: 23900
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: SevenZOutputFile
        children: []
        pos: 1388
        length: 16
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private final RandomAccessFile file;
          children: []
          pos: 1411
          length: 36
        - type: field_declaration
          fields:
            text: private final List<SevenZArchiveEntry> files = new ArrayList<SevenZArchiveEntry>();
          children: []
          pos: 1452
          length: 83
        - type: field_declaration
          fields:
            text: private int numNonEmptyStreams = 0;
          children: []
          pos: 1540
          length: 35
        - type: field_declaration
          fields:
            text: private CRC32 crc32 = new CRC32();
          children: []
          pos: 1580
          length: 34
        - type: field_declaration
          fields:
            text: private CRC32 compressedCrc32 = new CRC32();
          children: []
          pos: 1619
          length: 44
        - type: field_declaration
          fields:
            text: private long fileBytesWritten = 0;
          children: []
          pos: 1668
          length: 34
        - type: field_declaration
          fields:
            text: private boolean finished = false;
          children: []
          pos: 1707
          length: 33
        - type: field_declaration
          fields:
            text: private CountingOutputStream currentOutputStream;
          children: []
          pos: 1745
          length: 49
        - type: field_declaration
          fields:
            text: private SevenZMethod contentCompression = SevenZMethod.LZMA2;
          children: []
          pos: 1799
          length: 61
        - type: constructor_declaration
          fields:
            text: |-
              public SevenZOutputFile(final File filename) throws IOException {
                      file = new RandomAccessFile(filename, "rw");
                      file.seek(SevenZFile.SIGNATURE_HEADER_SIZE);
                  }
          children: []
          pos: 2042
          length: 177
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setContentCompression
              children: []
              pos: 2529
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SevenZMethod method
                children: []
                pos: 2551
                length: 19
              pos: 2517
              length: 104
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.contentCompression = method;
                children: []
                pos: 2582
                length: 33
              pos: 2572
              length: 49
          children: []
          pos: 2517
          length: 104
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: close
              children: []
              pos: 2755
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2743
              length: 125
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!finished"
                        children: []
                        pos: 2796
                        length: 9
                    children: []
                    pos: 2795
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: finish();
                    children: []
                    pos: 2821
                    length: 9
                  pos: 2807
                  length: 33
                pos: 2792
                length: 48
              - type: expression_statement
                fields:
                  text: file.close();
                children: []
                pos: 2849
                length: 13
              pos: 2782
              length: 86
          children: []
          pos: 2743
          length: 125
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createArchiveEntry
              children: []
              pos: 3153
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final File inputFile
                children: []
                pos: 3172
                length: 20
              pos: 3127
              length: 376
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final SevenZArchiveEntry entry = new SevenZArchiveEntry();
                children: []
                pos: 3259
                length: 58
              - type: expression_statement
                fields:
                  text: entry.setDirectory(inputFile.isDirectory());
                children: []
                pos: 3326
                length: 44
              - type: expression_statement
                fields:
                  text: entry.setName(entryName);
                children: []
                pos: 3379
                length: 25
              - type: expression_statement
                fields:
                  text: entry.setLastModifiedDate(new Date(inputFile.lastModified()));
                children: []
                pos: 3413
                length: 62
              - type: return_statement
                fields:
                  text: return entry;
                children: []
                pos: 3484
                length: 13
              pos: 3249
              length: 254
          children: []
          pos: 3127
          length: 376
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: putArchiveEntry
              children: []
              pos: 3797
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final ArchiveEntry archiveEntry
                children: []
                pos: 3813
                length: 31
              pos: 3785
              length: 189
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: final SevenZArchiveEntry entry = (SevenZArchiveEntry) archiveEntry;
                children: []
                pos: 3875
                length: 67
              - type: expression_statement
                fields:
                  text: files.add(entry);
                children: []
                pos: 3951
                length: 17
              pos: 3865
              length: 109
          children: []
          pos: 3785
          length: 189
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: closeArchiveEntry
              children: []
              pos: 4072
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4060
              length: 940
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: currentOutputStream
                            children: []
                            pos: 4125
                            length: 19
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4148
                            length: 4
                        children: []
                        pos: 4125
                        length: 27
                    children: []
                    pos: 4124
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOutputStream.flush();
                    children: []
                    pos: 4168
                    length: 28
                  - type: expression_statement
                    fields:
                      text: currentOutputStream.close();
                    children: []
                    pos: 4209
                    length: 28
                  pos: 4154
                  length: 93
                pos: 4121
                length: 126
              - type: local_variable_declaration
                fields:
                  text: final SevenZArchiveEntry entry = files.get(files.size() -
                    1);
                children: []
                pos: 4257
                length: 61
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: fileBytesWritten
                            children: []
                            pos: 4331
                            length: 16
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 4350
                            length: 1
                        children: []
                        pos: 4331
                        length: 20
                    children: []
                    pos: 4330
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: entry.setHasStream(true);
                    children: []
                    pos: 4367
                    length: 25
                  - type: expression_statement
                    fields:
                      text: "++numNonEmptyStreams;"
                    children: []
                    pos: 4405
                    length: 21
                  - type: expression_statement
                    fields:
                      text: entry.setSize(currentOutputStream.getBytesWritten());
                    children: []
                    pos: 4439
                    length: 53
                  - type: expression_statement
                    fields:
                      text: entry.setCompressedSize(fileBytesWritten);
                    children: []
                    pos: 4505
                    length: 42
                  - type: expression_statement
                    fields:
                      text: entry.setCrcValue(crc32.getValue());
                    children: []
                    pos: 4560
                    length: 36
                  - type: expression_statement
                    fields:
                      text: entry.setCompressedCrcValue(compressedCrc32.getValue());
                    children: []
                    pos: 4609
                    length: 56
                  - type: expression_statement
                    fields:
                      text: entry.setHasCrc(true);
                    children: []
                    pos: 4678
                    length: 22
                  pos: 4353
                  length: 357
                pos: 4327
                length: 545
              - type: expression_statement
                fields:
                  text: currentOutputStream = null;
                children: []
                pos: 4881
                length: 27
              - type: expression_statement
                fields:
                  text: crc32.reset();
                children: []
                pos: 4917
                length: 14
              - type: expression_statement
                fields:
                  text: compressedCrc32.reset();
                children: []
                pos: 4940
                length: 24
              - type: expression_statement
                fields:
                  text: fileBytesWritten = 0;
                children: []
                pos: 4973
                length: 21
              pos: 4111
              length: 889
          children: []
          pos: 4060
          length: 940
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: write
              children: []
              pos: 5165
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final int b
                children: []
                pos: 5171
                length: 11
              pos: 5153
              length: 100
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: getCurrentOutputStream().write(b);
                children: []
                pos: 5213
                length: 34
              pos: 5203
              length: 50
          children: []
          pos: 5153
          length: 100
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: write
              children: []
              pos: 5430
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] b
                children: []
                pos: 5436
                length: 14
              pos: 5418
              length: 91
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: write(b, 0, b.length);
                children: []
                pos: 5481
                length: 22
              pos: 5471
              length: 38
          children: []
          pos: 5418
          length: 91
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: write
              children: []
              pos: 5799
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final byte[] b
                children: []
                pos: 5805
                length: 14
              pos: 5787
              length: 180
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: len
                            children: []
                            pos: 5884
                            length: 3
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 5890
                            length: 1
                        children: []
                        pos: 5884
                        length: 7
                    children: []
                    pos: 5883
                    length: 9
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: getCurrentOutputStream().write(b, off, len);
                    children: []
                    pos: 5907
                    length: 44
                  pos: 5893
                  length: 68
                pos: 5880
                length: 81
              pos: 5870
              length: 97
          children: []
          pos: 5787
          length: 180
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: finish
              children: []
              pos: 6147
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6135
              length: 1608
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: finished
                        children: []
                        pos: 6189
                        length: 8
                    children: []
                    pos: 6188
                    length: 10
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IOException("This archive has already been finished");
                    children: []
                    pos: 6213
                    length: 64
                  pos: 6199
                  length: 88
                pos: 6185
                length: 102
              - type: expression_statement
                fields:
                  text: finished = true;
                children: []
                pos: 6296
                length: 16
              - type: local_variable_declaration
                fields:
                  text: final long headerPosition = file.getFilePointer();
                children: []
                pos: 6330
                length: 50
              - type: local_variable_declaration
                fields:
                  text: final ByteArrayOutputStream headerBaos = new ByteArrayOutputStream();
                children: []
                pos: 6398
                length: 69
              - type: local_variable_declaration
                fields:
                  text: final DataOutputStream header = new DataOutputStream(headerBaos);
                children: []
                pos: 6476
                length: 65
              - type: expression_statement
                fields:
                  text: writeHeader(header);
                children: []
                pos: 6559
                length: 20
              - type: expression_statement
                fields:
                  text: header.flush();
                children: []
                pos: 6588
                length: 15
              - type: local_variable_declaration
                fields:
                  text: final byte[] headerBytes = headerBaos.toByteArray();
                children: []
                pos: 6612
                length: 52
              - type: expression_statement
                fields:
                  text: file.write(headerBytes);
                children: []
                pos: 6673
                length: 24
              - type: local_variable_declaration
                fields:
                  text: final CRC32 crc32 = new CRC32();
                children: []
                pos: 6715
                length: 32
              - type: expression_statement
                fields:
                  text: file.seek(0);
                children: []
                pos: 6793
                length: 13
              - type: expression_statement
                fields:
                  text: file.write(SevenZFile.sevenZSignature);
                children: []
                pos: 6815
                length: 39
              - type: expression_statement
                fields:
                  text: file.write(0);
                children: []
                pos: 6882
                length: 14
              - type: expression_statement
                fields:
                  text: file.write(2);
                children: []
                pos: 6905
                length: 14
              - type: local_variable_declaration
                fields:
                  text: final ByteArrayOutputStream startHeaderBaos = new ByteArrayOutputStream();
                children: []
                pos: 6961
                length: 74
              - type: local_variable_declaration
                fields:
                  text: final DataOutputStream startHeaderStream = new DataOutputStream(startHeaderBaos);
                children: []
                pos: 7044
                length: 81
              - type: expression_statement
                fields:
                  text: startHeaderStream.writeLong(Long.reverseBytes(headerPosition
                    - SevenZFile.SIGNATURE_HEADER_SIZE));
                children: []
                pos: 7134
                length: 98
              - type: expression_statement
                fields:
                  text: startHeaderStream.writeLong(Long.reverseBytes(0xffffFFFFL
                    & headerBytes.length));
                children: []
                pos: 7241
                length: 81
              - type: expression_statement
                fields:
                  text: crc32.reset();
                children: []
                pos: 7331
                length: 14
              - type: expression_statement
                fields:
                  text: crc32.update(headerBytes);
                children: []
                pos: 7354
                length: 26
              - type: expression_statement
                fields:
                  text: startHeaderStream.writeInt(Integer.reverseBytes((int)crc32.getValue()));
                children: []
                pos: 7389
                length: 72
              - type: expression_statement
                fields:
                  text: startHeaderStream.flush();
                children: []
                pos: 7470
                length: 26
              - type: local_variable_declaration
                fields:
                  text: final byte[] startHeaderBytes = startHeaderBaos.toByteArray();
                children: []
                pos: 7505
                length: 62
              - type: expression_statement
                fields:
                  text: crc32.reset();
                children: []
                pos: 7576
                length: 14
              - type: expression_statement
                fields:
                  text: crc32.update(startHeaderBytes);
                children: []
                pos: 7599
                length: 31
              - type: expression_statement
                fields:
                  text: file.writeInt(Integer.reverseBytes((int) crc32.getValue()));
                children: []
                pos: 7639
                length: 60
              - type: expression_statement
                fields:
                  text: file.write(startHeaderBytes);
                children: []
                pos: 7708
                length: 29
              pos: 6175
              length: 1568
          children: []
          pos: 6135
          length: 1608
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getCurrentOutputStream
              children: []
              pos: 7975
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7954
              length: 220
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: currentOutputStream
                            children: []
                            pos: 8033
                            length: 19
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8056
                            length: 4
                        children: []
                        pos: 8033
                        length: 27
                    children: []
                    pos: 8032
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOutputStream = setupFileOutputStream();
                    children: []
                    pos: 8076
                    length: 46
                  pos: 8062
                  length: 70
                pos: 8029
                length: 103
              - type: return_statement
                fields:
                  text: return currentOutputStream;
                children: []
                pos: 8141
                length: 27
              pos: 8019
              length: 155
          children: []
          pos: 7954
          length: 220
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setupFileOutputStream
              children: []
              pos: 8209
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8180
              length: 958
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: OutputStream out = new OutputStreamWrapper();
                children: []
                pos: 8262
                length: 45
              - type: return_statement
                fields:
                  text: "return new CountingOutputStream(Coders\n                                        .addEncoder(out,\n
                    \                                                   contentCompression,\n
                    \                                                   null)) {\n
                    \           @Override\n            public void write(final int
                    b) throws IOException {\n                super.write(b);\n                crc32.update(b);\n
                    \           }\n    \n            @Override\n            public
                    void write(final byte[] b) throws IOException {\n                super.write(b);\n
                    \               crc32.update(b);\n            }\n    \n            @Override\n
                    \           public void write(final byte[] b, final int off, final
                    int len)\n                throws IOException {\n                super.write(b,
                    off, len);\n                crc32.update(b, off, len);\n            }\n
                    \       };"
                children: []
                pos: 8316
                length: 816
              pos: 8252
              length: 886
          children: []
          pos: 8180
          length: 958
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeHeader
              children: []
              pos: 9157
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 9169
                length: 23
              pos: 9144
              length: 262
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kHeader);
                children: []
                pos: 9223
                length: 26
              - type: expression_statement
                fields:
                  text: header.write(NID.kMainStreamsInfo);
                children: []
                pos: 9267
                length: 35
              - type: expression_statement
                fields:
                  text: writeStreamsInfo(header);
                children: []
                pos: 9311
                length: 25
              - type: expression_statement
                fields:
                  text: writeFilesInfo(header);
                children: []
                pos: 9345
                length: 23
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 9377
                length: 23
              pos: 9213
              length: 193
          children: []
          pos: 9144
          length: 262
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeStreamsInfo
              children: []
              pos: 9429
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 9446
                length: 23
              pos: 9416
              length: 288
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numNonEmptyStreams
                            children: []
                            pos: 9504
                            length: 18
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 9525
                            length: 1
                        children: []
                        pos: 9504
                        length: 22
                    children: []
                    pos: 9503
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: writePackInfo(header);
                    children: []
                    pos: 9542
                    length: 22
                  - type: expression_statement
                    fields:
                      text: writeUnpackInfo(header);
                    children: []
                    pos: 9577
                    length: 24
                  pos: 9528
                  length: 83
                pos: 9500
                length: 111
              - type: expression_statement
                fields:
                  text: writeSubStreamsInfo(header);
                children: []
                pos: 9629
                length: 28
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 9675
                length: 23
              pos: 9490
              length: 214
          children: []
          pos: 9416
          length: 288
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writePackInfo
              children: []
              pos: 9727
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 9741
                length: 23
              pos: 9714
              length: 756
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kPackInfo);
                children: []
                pos: 9795
                length: 28
              - type: expression_statement
                fields:
                  text: writeUint64(header, 0);
                children: []
                pos: 9841
                length: 23
              - type: expression_statement
                fields:
                  text: writeUint64(header, 0xffffFFFFL & numNonEmptyStreams);
                children: []
                pos: 9873
                length: 54
              - type: expression_statement
                fields:
                  text: header.write(NID.kSize);
                children: []
                pos: 9945
                length: 24
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    writeUint64(header, entry.getCompressedSize());
                                }
                            }
                children: []
                pos: 9978
                length: 171
              - type: expression_statement
                fields:
                  text: header.write(NID.kCRC);
                children: []
                pos: 10167
                length: 23
              - type: expression_statement
                fields:
                  text: header.write(1);
                children: []
                pos: 10199
                length: 16
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    header.writeInt(Integer.reverseBytes((int) entry.getCompressedCrcValue()));
                                }
                            }
                children: []
                pos: 10224
                length: 199
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 10441
                length: 23
              pos: 9785
              length: 685
          children: []
          pos: 9714
          length: 756
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeUnpackInfo
              children: []
              pos: 10493
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 10509
                length: 23
              pos: 10480
              length: 864
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kUnpackInfo);
                children: []
                pos: 10563
                length: 30
              - type: expression_statement
                fields:
                  text: header.write(NID.kFolder);
                children: []
                pos: 10611
                length: 26
              - type: expression_statement
                fields:
                  text: writeUint64(header, numNonEmptyStreams);
                children: []
                pos: 10646
                length: 40
              - type: expression_statement
                fields:
                  text: header.write(0);
                children: []
                pos: 10695
                length: 16
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < numNonEmptyStreams; i++) {
                                writeFolder(header);
                            }
                children: []
                pos: 10720
                length: 89
              - type: expression_statement
                fields:
                  text: header.write(NID.kCodersUnpackSize);
                children: []
                pos: 10827
                length: 36
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    writeUint64(header, entry.getSize());
                                }
                            }
                children: []
                pos: 10872
                length: 161
              - type: expression_statement
                fields:
                  text: header.write(NID.kCRC);
                children: []
                pos: 11051
                length: 23
              - type: expression_statement
                fields:
                  text: header.write(1);
                children: []
                pos: 11083
                length: 16
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.hasStream()) {
                                    header.writeInt(Integer.reverseBytes((int) entry.getCrcValue()));
                                }
                            }
                children: []
                pos: 11108
                length: 189
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 11315
                length: 23
              pos: 10553
              length: 791
          children: []
          pos: 10480
          length: 864
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFolder
              children: []
              pos: 11367
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 11379
                length: 23
              pos: 11354
              length: 548
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: writeUint64(header, 1);
                children: []
                pos: 11454
                length: 23
              - type: local_variable_declaration
                fields:
                  text: byte[] id = contentCompression.getId();
                children: []
                pos: 11486
                length: 39
              - type: local_variable_declaration
                fields:
                  text: byte[] properties = contentCompression.getProperties();
                children: []
                pos: 11534
                length: 55
              - type: local_variable_declaration
                fields:
                  text: int codecFlags = id.length;
                children: []
                pos: 11599
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: properties.length
                            children: []
                            pos: 11639
                            length: 17
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11659
                            length: 1
                        children: []
                        pos: 11639
                        length: 21
                    children: []
                    pos: 11638
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: codecFlags |= 0x20;
                    children: []
                    pos: 11676
                    length: 19
                  pos: 11662
                  length: 43
                pos: 11635
                length: 70
              - type: expression_statement
                fields:
                  text: header.write(codecFlags);
                children: []
                pos: 11714
                length: 25
              - type: expression_statement
                fields:
                  text: header.write(id);
                children: []
                pos: 11748
                length: 17
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: properties.length
                            children: []
                            pos: 11779
                            length: 17
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 11799
                            length: 1
                        children: []
                        pos: 11779
                        length: 21
                    children: []
                    pos: 11778
                    length: 23
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(properties.length);
                    children: []
                    pos: 11816
                    length: 32
                  - type: expression_statement
                    fields:
                      text: header.write(properties);
                    children: []
                    pos: 11861
                    length: 25
                  pos: 11802
                  length: 94
                pos: 11775
                length: 121
              pos: 11423
              length: 479
          children: []
          pos: 11354
          length: 548
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeSubStreamsInfo
              children: []
              pos: 11925
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 11945
                length: 23
              pos: 11912
              length: 439
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kSubStreamsInfo);
                children: []
                pos: 11999
                length: 34
              - type: expression_statement
                fields:
                  text: header.write(NID.kEnd);
                children: []
                pos: 12322
                length: 23
              pos: 11989
              length: 362
          children: []
          pos: 11912
          length: 439
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFilesInfo
              children: []
              pos: 12374
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 12389
                length: 23
              pos: 12361
              length: 482
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kFilesInfo);
                children: []
                pos: 12443
                length: 29
              - type: expression_statement
                fields:
                  text: writeUint64(header, files.size());
                children: []
                pos: 12490
                length: 34
              - type: expression_statement
                fields:
                  text: writeFileEmptyStreams(header);
                children: []
                pos: 12534
                length: 30
              - type: expression_statement
                fields:
                  text: writeFileEmptyFiles(header);
                children: []
                pos: 12573
                length: 28
              - type: expression_statement
                fields:
                  text: writeFileAntiItems(header);
                children: []
                pos: 12610
                length: 27
              - type: expression_statement
                fields:
                  text: writeFileNames(header);
                children: []
                pos: 12646
                length: 23
              - type: expression_statement
                fields:
                  text: writeFileCTimes(header);
                children: []
                pos: 12678
                length: 24
              - type: expression_statement
                fields:
                  text: writeFileATimes(header);
                children: []
                pos: 12711
                length: 24
              - type: expression_statement
                fields:
                  text: writeFileMTimes(header);
                children: []
                pos: 12744
                length: 24
              - type: expression_statement
                fields:
                  text: writeFileWindowsAttributes(header);
                children: []
                pos: 12777
                length: 35
              - type: expression_statement
                fields:
                  text: header.write(0);
                children: []
                pos: 12821
                length: 16
              pos: 12433
              length: 410
          children: []
          pos: 12361
          length: 482
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileEmptyStreams
              children: []
              pos: 12866
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 12888
                length: 23
              pos: 12853
              length: 957
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasEmptyStreams = false;
                children: []
                pos: 12942
                length: 32
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (!entry.hasStream()) {
                                    hasEmptyStreams = true;
                                    break;
                                }
                            }
                children: []
                pos: 12983
                length: 171
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: hasEmptyStreams
                        children: []
                        pos: 13167
                        length: 15
                    children: []
                    pos: 13166
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kEmptyStream);
                    children: []
                    pos: 13198
                    length: 31
                  - type: local_variable_declaration
                    fields:
                      text: final BitSet emptyStreams = new BitSet(files.size());
                    children: []
                    pos: 13242
                    length: 53
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < files.size(); i++) {
                                        emptyStreams.set(i, !files.get(i).hasStream());
                                    }
                    children: []
                    pos: 13308
                    length: 118
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 13439
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 13515
                    length: 56
                  - type: expression_statement
                    fields:
                      text: writeBits(out, emptyStreams, files.size());
                    children: []
                    pos: 13584
                    length: 43
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 13640
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 13665
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 13721
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 13771
                    length: 23
                  pos: 13184
                  length: 620
                pos: 13163
                length: 641
              pos: 12932
              length: 878
          children: []
          pos: 12853
          length: 957
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileEmptyFiles
              children: []
              pos: 13833
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 13853
                length: 23
              pos: 13820
              length: 942
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasEmptyFiles = false;
                children: []
                pos: 13907
                length: 30
              - type: local_variable_declaration
                fields:
                  text: int emptyStreamCounter = 0;
                children: []
                pos: 13946
                length: 27
              - type: local_variable_declaration
                fields:
                  text: final BitSet emptyFiles = new BitSet(0);
                children: []
                pos: 13982
                length: 40
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < files.size(); i++) {
                                if (!files.get(i).hasStream()) {
                                    boolean isDir = files.get(i).isDirectory();
                                    emptyFiles.set(emptyStreamCounter++, !isDir);
                                    hasEmptyFiles |= !isDir;
                                }
                            }
                children: []
                pos: 14031
                length: 272
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: hasEmptyFiles
                        children: []
                        pos: 14316
                        length: 13
                    children: []
                    pos: 14315
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kEmptyFile);
                    children: []
                    pos: 14345
                    length: 29
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 14387
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 14463
                    length: 56
                  - type: expression_statement
                    fields:
                      text: writeBits(out, emptyFiles, emptyStreamCounter);
                    children: []
                    pos: 14532
                    length: 47
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 14592
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 14617
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 14673
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 14723
                    length: 23
                  pos: 14331
                  length: 425
                pos: 14312
                length: 444
              pos: 13897
              length: 865
          children: []
          pos: 13820
          length: 942
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileAntiItems
              children: []
              pos: 14785
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 14804
                length: 23
              pos: 14772
              length: 921
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasAntiItems = false;
                children: []
                pos: 14858
                length: 29
              - type: local_variable_declaration
                fields:
                  text: final BitSet antiItems = new BitSet(0);
                children: []
                pos: 14896
                length: 39
              - type: local_variable_declaration
                fields:
                  text: int antiItemCounter = 0;
                children: []
                pos: 14944
                length: 24
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < files.size(); i++) {
                                if (!files.get(i).hasStream()) {
                                    boolean isAnti = files.get(i).isAntiItem();
                                    antiItems.set(antiItemCounter++, isAnti);
                                    hasAntiItems |= isAnti;
                                }
                            }
                children: []
                pos: 14977
                length: 267
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: hasAntiItems
                        children: []
                        pos: 15257
                        length: 12
                    children: []
                    pos: 15256
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kAnti);
                    children: []
                    pos: 15285
                    length: 24
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 15322
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 15398
                    length: 56
                  - type: expression_statement
                    fields:
                      text: writeBits(out, antiItems, antiItemCounter);
                    children: []
                    pos: 15467
                    length: 43
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 15523
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 15548
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 15604
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 15654
                    length: 23
                  pos: 15271
                  length: 416
                pos: 15253
                length: 434
              pos: 14848
              length: 845
          children: []
          pos: 14772
          length: 921
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileNames
              children: []
              pos: 15716
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 15731
                length: 23
              pos: 15703
              length: 588
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: header.write(NID.kName);
                children: []
                pos: 15785
                length: 24
              - type: local_variable_declaration
                fields:
                  text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                children: []
                pos: 15827
                length: 63
              - type: local_variable_declaration
                fields:
                  text: final DataOutputStream out = new DataOutputStream(baos);
                children: []
                pos: 15899
                length: 56
              - type: expression_statement
                fields:
                  text: out.write(0);
                children: []
                pos: 15964
                length: 13
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                out.write(entry.getName().getBytes("UTF-16LE"));
                                out.writeShort(0);
                            }
                children: []
                pos: 15986
                length: 148
              - type: expression_statement
                fields:
                  text: out.flush();
                children: []
                pos: 16143
                length: 12
              - type: local_variable_declaration
                fields:
                  text: final byte[] contents = baos.toByteArray();
                children: []
                pos: 16164
                length: 43
              - type: expression_statement
                fields:
                  text: writeUint64(header, contents.length);
                children: []
                pos: 16216
                length: 37
              - type: expression_statement
                fields:
                  text: header.write(contents);
                children: []
                pos: 16262
                length: 23
              pos: 15775
              length: 516
          children: []
          pos: 15703
          length: 588
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileCTimes
              children: []
              pos: 16310
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 16326
                length: 23
              pos: 16297
              length: 1396
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numCreationDates = 0;
                children: []
                pos: 16380
                length: 25
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasCreationDate()) {
                                    ++numCreationDates;
                                }
                            }
                children: []
                pos: 16414
                length: 152
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numCreationDates
                            children: []
                            pos: 16579
                            length: 16
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 16598
                            length: 1
                        children: []
                        pos: 16579
                        length: 20
                    children: []
                    pos: 16578
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kCTime);
                    children: []
                    pos: 16615
                    length: 25
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 16654
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 16730
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numCreationDates
                                children: []
                                pos: 16803
                                length: 16
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 16823
                                length: 12
                            children: []
                            pos: 16803
                            length: 32
                        children: []
                        pos: 16802
                        length: 34
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 16855
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet cTimes = new BitSet(files.size());
                        children: []
                        pos: 16885
                        length: 47
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                cTimes.set(i, files.get(i).getHasCreationDate());
                                            }
                        children: []
                        pos: 16949
                        length: 128
                      - type: expression_statement
                        fields:
                          text: writeBits(out, cTimes, files.size());
                        children: []
                        pos: 17094
                        length: 37
                      pos: 16837
                      length: 308
                    pos: 16799
                    length: 397
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 17209
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasCreationDate()) {
                                            out.writeLong(Long.reverseBytes(
                                                    SevenZArchiveEntry.javaTimeToNtfsTime(entry.getCreationDate())));
                                        }
                                    }
                    children: []
                    pos: 17235
                    length: 275
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 17523
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 17548
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 17604
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 17654
                    length: 23
                  pos: 16601
                  length: 1086
                pos: 16575
                length: 1112
              pos: 16370
              length: 1323
          children: []
          pos: 16297
          length: 1396
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileATimes
              children: []
              pos: 17712
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 17728
                length: 23
              pos: 17699
              length: 1380
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numAccessDates = 0;
                children: []
                pos: 17782
                length: 23
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasAccessDate()) {
                                    ++numAccessDates;
                                }
                            }
                children: []
                pos: 17814
                length: 148
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numAccessDates
                            children: []
                            pos: 17975
                            length: 14
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 17992
                            length: 1
                        children: []
                        pos: 17975
                        length: 18
                    children: []
                    pos: 17974
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kATime);
                    children: []
                    pos: 18009
                    length: 25
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 18048
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 18124
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numAccessDates
                                children: []
                                pos: 18197
                                length: 14
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 18215
                                length: 12
                            children: []
                            pos: 18197
                            length: 30
                        children: []
                        pos: 18196
                        length: 32
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 18247
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet aTimes = new BitSet(files.size());
                        children: []
                        pos: 18277
                        length: 47
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                aTimes.set(i, files.get(i).getHasAccessDate());
                                            }
                        children: []
                        pos: 18341
                        length: 126
                      - type: expression_statement
                        fields:
                          text: writeBits(out, aTimes, files.size());
                        children: []
                        pos: 18484
                        length: 37
                      pos: 18229
                      length: 306
                    pos: 18193
                    length: 393
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 18599
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasAccessDate()) {
                                            out.writeLong(Long.reverseBytes(
                                                    SevenZArchiveEntry.javaTimeToNtfsTime(entry.getAccessDate())));
                                        }
                                    }
                    children: []
                    pos: 18625
                    length: 271
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 18909
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 18934
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 18990
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 19040
                    length: 23
                  pos: 17995
                  length: 1078
                pos: 17971
                length: 1102
              pos: 17772
              length: 1307
          children: []
          pos: 17699
          length: 1380
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileMTimes
              children: []
              pos: 19098
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 19114
                length: 23
              pos: 19085
              length: 1428
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numLastModifiedDates = 0;
                children: []
                pos: 19168
                length: 29
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasLastModifiedDate()) {
                                    ++numLastModifiedDates;
                                }
                            }
                children: []
                pos: 19206
                length: 160
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numLastModifiedDates
                            children: []
                            pos: 19379
                            length: 20
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 19402
                            length: 1
                        children: []
                        pos: 19379
                        length: 24
                    children: []
                    pos: 19378
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kMTime);
                    children: []
                    pos: 19419
                    length: 25
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 19458
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 19534
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numLastModifiedDates
                                children: []
                                pos: 19607
                                length: 20
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 19631
                                length: 12
                            children: []
                            pos: 19607
                            length: 36
                        children: []
                        pos: 19606
                        length: 38
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 19663
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet mTimes = new BitSet(files.size());
                        children: []
                        pos: 19693
                        length: 47
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                mTimes.set(i, files.get(i).getHasLastModifiedDate());
                                            }
                        children: []
                        pos: 19757
                        length: 132
                      - type: expression_statement
                        fields:
                          text: writeBits(out, mTimes, files.size());
                        children: []
                        pos: 19906
                        length: 37
                      pos: 19645
                      length: 312
                    pos: 19603
                    length: 405
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 20021
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasLastModifiedDate()) {
                                            out.writeLong(Long.reverseBytes(
                                                    SevenZArchiveEntry.javaTimeToNtfsTime(entry.getLastModifiedDate())));
                                        }
                                    }
                    children: []
                    pos: 20047
                    length: 283
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 20343
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 20368
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 20424
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 20474
                    length: 23
                  pos: 19405
                  length: 1102
                pos: 19375
                length: 1132
              pos: 19158
              length: 1355
          children: []
          pos: 19085
          length: 1428
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeFileWindowsAttributes
              children: []
              pos: 20532
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 20559
                length: 23
              pos: 20519
              length: 1397
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int numWindowsAttributes = 0;
                children: []
                pos: 20613
                length: 29
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (final SevenZArchiveEntry entry : files) {
                                if (entry.getHasWindowsAttributes()) {
                                    ++numWindowsAttributes;
                                }
                            }
                children: []
                pos: 20651
                length: 161
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: numWindowsAttributes
                            children: []
                            pos: 20825
                            length: 20
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 20848
                            length: 1
                        children: []
                        pos: 20825
                        length: 24
                    children: []
                    pos: 20824
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(NID.kWinAttributes);
                    children: []
                    pos: 20865
                    length: 33
                  - type: local_variable_declaration
                    fields:
                      text: final ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    children: []
                    pos: 20912
                    length: 63
                  - type: local_variable_declaration
                    fields:
                      text: final DataOutputStream out = new DataOutputStream(baos);
                    children: []
                    pos: 20988
                    length: 56
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: numWindowsAttributes
                                children: []
                                pos: 21061
                                length: 20
                              right:
                                type: method_invocation
                                fields:
                                  text: files.size()
                                children: []
                                pos: 21085
                                length: 12
                            children: []
                            pos: 21061
                            length: 36
                        children: []
                        pos: 21060
                        length: 38
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: out.write(0);
                        children: []
                        pos: 21117
                        length: 13
                      - type: local_variable_declaration
                        fields:
                          text: final BitSet attributes = new BitSet(files.size());
                        children: []
                        pos: 21147
                        length: 51
                      - type: for_statement
                        fields:
                          text: |-
                            for (int i = 0; i < files.size(); i++) {
                                                attributes.set(i, files.get(i).getHasWindowsAttributes());
                                            }
                        children: []
                        pos: 21215
                        length: 137
                      - type: expression_statement
                        fields:
                          text: writeBits(out, attributes, files.size());
                        children: []
                        pos: 21369
                        length: 41
                      pos: 21099
                      length: 325
                    pos: 21057
                    length: 418
                  - type: expression_statement
                    fields:
                      text: out.write(0);
                    children: []
                    pos: 21488
                    length: 13
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (final SevenZArchiveEntry entry : files) {
                                        if (entry.getHasWindowsAttributes()) {
                                            out.writeInt(Integer.reverseBytes(entry.getWindowsAttributes()));
                                        }
                                    }
                    children: []
                    pos: 21514
                    length: 219
                  - type: expression_statement
                    fields:
                      text: out.flush();
                    children: []
                    pos: 21746
                    length: 12
                  - type: local_variable_declaration
                    fields:
                      text: final byte[] contents = baos.toByteArray();
                    children: []
                    pos: 21771
                    length: 43
                  - type: expression_statement
                    fields:
                      text: writeUint64(header, contents.length);
                    children: []
                    pos: 21827
                    length: 37
                  - type: expression_statement
                    fields:
                      text: header.write(contents);
                    children: []
                    pos: 21877
                    length: 23
                  pos: 20851
                  length: 1059
                pos: 20821
                length: 1089
              pos: 20603
              length: 1313
          children: []
          pos: 20519
          length: 1397
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeUint64
              children: []
              pos: 21935
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 21947
                length: 23
              pos: 21922
              length: 541
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int firstByte = 0;
                children: []
                pos: 22013
                length: 18
              - type: local_variable_declaration
                fields:
                  text: int mask = 0x80;
                children: []
                pos: 22040
                length: 16
              - type: local_variable_declaration
                fields:
                  text: int i;
                children: []
                pos: 22065
                length: 6
              - type: for_statement
                fields:
                  text: |-
                    for (i = 0; i < 8; i++) {
                                if (value < ((1L << ( 7  * (i + 1))))) {
                                    firstByte |= (value >>> (8 * i));
                                    break;
                                }
                                firstByte |= mask;
                                mask >>>= 1;
                            }
                children: []
                pos: 22080
                length: 231
              - type: expression_statement
                fields:
                  text: header.write(firstByte);
                children: []
                pos: 22320
                length: 24
              - type: for_statement
                fields:
                  text: |-
                    for (; i > 0; i--) {
                                header.write((int) (0xff & value));
                                value >>>= 8;
                            }
                children: []
                pos: 22353
                length: 104
              pos: 22003
              length: 460
          children: []
          pos: 21922
          length: 541
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: writeBits
              children: []
              pos: 22482
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: final DataOutput header
                children: []
                pos: 22492
                length: 23
              pos: 22469
              length: 503
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int cache = 0;
                children: []
                pos: 22583
                length: 14
              - type: local_variable_declaration
                fields:
                  text: int shift = 7;
                children: []
                pos: 22606
                length: 14
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < length; i++) {
                                cache |= ((bits.get(i) ? 1 : 0) << shift);
                                --shift;
                                if (shift == 0) {
                                    header.write(cache);
                                    shift = 7;
                                    cache = 0;
                                }
                            }
                children: []
                pos: 22629
                length: 255
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: greater_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: length
                                children: []
                                pos: 22897
                                length: 6
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 22906
                                length: 1
                            children: []
                            pos: 22897
                            length: 10
                          right:
                            type: greater_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: shift
                                children: []
                                pos: 22911
                                length: 5
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 22919
                                length: 1
                            children: []
                            pos: 22911
                            length: 9
                        children: []
                        pos: 22897
                        length: 23
                    children: []
                    pos: 22896
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: header.write(cache);
                    children: []
                    pos: 22936
                    length: 20
                  pos: 22922
                  length: 44
                pos: 22893
                length: 73
              pos: 22573
              length: 399
          children: []
          pos: 22469
          length: 503
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: OutputStreamWrapper
              children: []
              pos: 22992
              length: 19
            body:
              type: class_body
              fields: {}
              children:
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: write
                    children: []
                    pos: 23073
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: final int b
                      children: []
                      pos: 23079
                      length: 11
                    pos: 23043
                    length: 177
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: file.write(b);
                      children: []
                      pos: 23125
                      length: 14
                    - type: expression_statement
                      fields:
                        text: compressedCrc32.update(b);
                      children: []
                      pos: 23152
                      length: 26
                    - type: expression_statement
                      fields:
                        text: fileBytesWritten++;
                      children: []
                      pos: 23191
                      length: 19
                    pos: 23111
                    length: 109
                children: []
                pos: 23043
                length: 177
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: write
                    children: []
                    pos: 23264
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: final byte[] b
                      children: []
                      pos: 23270
                      length: 14
                    pos: 23234
                    length: 142
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: OutputStreamWrapper.this.write(b, 0, b.length);
                      children: []
                      pos: 23319
                      length: 47
                    pos: 23305
                    length: 71
                children: []
                pos: 23234
                length: 142
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: write
                    children: []
                    pos: 23420
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: final byte[] b
                      children: []
                      pos: 23426
                      length: 14
                    pos: 23390
                    length: 247
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: file.write(b, off, len);
                      children: []
                      pos: 23517
                      length: 24
                    - type: expression_statement
                      fields:
                        text: compressedCrc32.update(b, off, len);
                      children: []
                      pos: 23554
                      length: 36
                    - type: expression_statement
                      fields:
                        text: fileBytesWritten += len;
                      children: []
                      pos: 23603
                      length: 24
                    pos: 23503
                    length: 134
                children: []
                pos: 23390
                length: 247
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: flush
                    children: []
                    pos: 23677
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 23647
                    length: 121
                  body:
                    type: block
                    fields: {}
                    children: []
                    pos: 23704
                    length: 64
                children: []
                pos: 23647
                length: 121
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: close
                    children: []
                    pos: 23808
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 23778
                    length: 146
                  body:
                    type: block
                    fields: {}
                    children: []
                    pos: 23835
                    length: 89
                children: []
                pos: 23778
                length: 146
              pos: 22978
              length: 952
          children: []
          pos: 22978
          length: 952
        pos: 1375
        length: 22557
    children: []
    pos: 1375
    length: 22557
  pos: 0
  length: 23933
text_diff: |
  --- before
  +++ after
  @@ -636,13 +636,14 @@
           int shift = 7;
           for (int i = 0; i < length; i++) {
               cache |= ((bits.get(i) ? 1 : 0) << shift);
  -            if (--shift < 0) {
  +            --shift;
  +            if (shift == 0) {
                   header.write(cache);
                   shift = 7;
                   cache = 0;
               }
           }
  -        if (shift != 7) {
  +        if (length > 0 && shift > 0) {
               header.write(cache);
           }
       }
tree_diff: |+
  New cluster:
  UPDATE from for (int i = 0; i < length; i++) {
              cache |= ((bits.get(i) ? 1 : 0) << shift);
              if (--shift < 0) {
                  header.write(cache);
                  shift = 7;
                  cache = 0;
              }
          } to for (int i = 0; i < length; i++) {
              cache |= ((bits.get(i) ? 1 : 0) << shift);
              --shift;
              if (shift == 0) {
                  header.write(cache);
                  shift = 7;
                  cache = 0;
              }
          }
  ------------
  ===
  update-node
  ---
  for_statement: for (int i = 0; i < length; i++) {
              cache |= ((bits.get(i) ? 1 : 0) << shift);
              if (--shift < 0) {
                  header.write(cache);
                  shift = 7;
                  cache = 0;
              }
          } [22629,22864]
  replace for (int i = 0; i < length; i++) {
              cache |= ((bits.get(i) ? 1 : 0) << shift);
              if (--shift < 0) {
                  header.write(cache);
                  shift = 7;
                  cache = 0;
              }
          } by for (int i = 0; i < length; i++) {
              cache |= ((bits.get(i) ? 1 : 0) << shift);
              --shift;
              if (shift == 0) {
                  header.write(cache);
                  shift = 7;
                  cache = 0;
              }
          }

  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  and [22897,22920]
      greater_than [22897,22907]
          identifier: length [22897,22903]
          decimal_integer_literal: 0 [22906,22907]
      greater_than [22911,22920]
          identifier: shift [22911,22916]
          decimal_integer_literal: 0 [22919,22920]
  to
  parenthesized_expression [22876,22888]
  at 0

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  not_equals [22877,22887]
      identifier: shift [22877,22882]
      decimal_integer_literal: 7 [22886,22887]

...
