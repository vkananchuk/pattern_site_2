---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: IOContext
        children: []
        pos: 515
        length: 9
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected final Object _sourceRef;
          children: []
          pos: 812
          length: 34
        - type: field_declaration
          fields:
            text: protected JsonEncoding _encoding;
          children: []
          pos: 925
          length: 33
        - type: field_declaration
          fields:
            text: protected final boolean _managedResource;
          children: []
          pos: 1386
          length: 41
        - type: field_declaration
          fields:
            text: protected final BufferRecycler _bufferRecycler;
          children: []
          pos: 1689
          length: 47
        - type: field_declaration
          fields:
            text: protected byte[] _readIOBuffer;
          children: []
          pos: 1857
          length: 31
        - type: field_declaration
          fields:
            text: protected byte[] _writeEncodingBuffer;
          children: []
          pos: 2009
          length: 38
        - type: field_declaration
          fields:
            text: protected byte[] _base64Buffer;
          children: []
          pos: 2173
          length: 31
        - type: field_declaration
          fields:
            text: protected char[] _tokenCBuffer;
          children: []
          pos: 2385
          length: 31
        - type: field_declaration
          fields:
            text: protected char[] _concatCBuffer;
          children: []
          pos: 2623
          length: 32
        - type: field_declaration
          fields:
            text: protected char[] _nameCopyBuffer;
          children: []
          pos: 2930
          length: 33
        - type: constructor_declaration
          fields:
            text: |-
              public IOContext(BufferRecycler br, Object sourceRef, boolean managedResource)
                  {
                      _bufferRecycler = br;
                      _sourceRef = sourceRef;
                      _managedResource = managedResource;
                  }
          children: []
          pos: 3131
          length: 196
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setEncoding
              children: []
              pos: 3345
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonEncoding enc
                children: []
                pos: 3357
                length: 16
              pos: 3333
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _encoding = enc;
                children: []
                pos: 3385
                length: 16
              pos: 3375
              length: 32
          children: []
          pos: 3333
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withEncoding
              children: []
              pos: 3464
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonEncoding enc
                children: []
                pos: 3477
                length: 16
              pos: 3447
              length: 101
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _encoding = enc;
                children: []
                pos: 3505
                length: 16
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 3530
                length: 12
              pos: 3495
              length: 53
          children: []
          pos: 3447
          length: 101
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSourceReference
              children: []
              pos: 3745
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3731
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _sourceRef;
                children: []
                pos: 3768
                length: 18
              pos: 3766
              length: 22
          children: []
          pos: 3731
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getEncoding
              children: []
              pos: 3813
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3793
              length: 55
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _encoding;
                children: []
                pos: 3829
                length: 17
              pos: 3827
              length: 21
          children: []
          pos: 3793
          length: 55
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isResourceManaged
              children: []
              pos: 3868
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3853
              length: 63
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _managedResource;
                children: []
                pos: 3890
                length: 24
              pos: 3888
              length: 28
          children: []
          pos: 3853
          length: 63
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: constructTextBuffer
              children: []
              pos: 4121
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4103
              length: 95
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new TextBuffer(_bufferRecycler);
                children: []
                pos: 4153
                length: 39
              pos: 4143
              length: 55
          children: []
          pos: 4103
          length: 95
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocReadIOBuffer
              children: []
              pos: 4369
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4355
              length: 180
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_readIOBuffer);
                children: []
                pos: 4399
                length: 28
              - type: return_statement
                fields:
                  text: return (_readIOBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_READ_IO_BUFFER));
                children: []
                pos: 4436
                length: 93
              pos: 4389
              length: 146
          children: []
          pos: 4355
          length: 180
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocReadIOBuffer
              children: []
              pos: 4589
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 4607
                length: 11
              pos: 4575
              length: 200
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_readIOBuffer);
                children: []
                pos: 4630
                length: 28
              - type: return_statement
                fields:
                  text: return (_readIOBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_READ_IO_BUFFER,
                    minSize));
                children: []
                pos: 4667
                length: 102
              pos: 4620
              length: 155
          children: []
          pos: 4575
          length: 200
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocWriteEncodingBuffer
              children: []
              pos: 4799
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4785
              length: 208
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_writeEncodingBuffer);
                children: []
                pos: 4836
                length: 35
              - type: return_statement
                fields:
                  text: return (_writeEncodingBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_WRITE_ENCODING_BUFFER));
                children: []
                pos: 4880
                length: 107
              pos: 4826
              length: 167
          children: []
          pos: 4785
          length: 208
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocWriteEncodingBuffer
              children: []
              pos: 5047
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 5072
                length: 11
              pos: 5033
              length: 228
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_writeEncodingBuffer);
                children: []
                pos: 5095
                length: 35
              - type: return_statement
                fields:
                  text: return (_writeEncodingBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_WRITE_ENCODING_BUFFER,
                    minSize));
                children: []
                pos: 5139
                length: 116
              pos: 5085
              length: 176
          children: []
          pos: 5033
          length: 228
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocBase64Buffer
              children: []
              pos: 5319
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5305
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_base64Buffer);
                children: []
                pos: 5349
                length: 28
              - type: return_statement
                fields:
                  text: return (_base64Buffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_BASE64_CODEC_BUFFER));
                children: []
                pos: 5386
                length: 98
              pos: 5339
              length: 151
          children: []
          pos: 5305
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocTokenBuffer
              children: []
              pos: 5514
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5500
              length: 177
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_tokenCBuffer);
                children: []
                pos: 5543
                length: 28
              - type: return_statement
                fields:
                  text: return (_tokenCBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_TOKEN_BUFFER));
                children: []
                pos: 5580
                length: 91
              pos: 5533
              length: 144
          children: []
          pos: 5500
          length: 177
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocTokenBuffer
              children: []
              pos: 5731
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 5748
                length: 11
              pos: 5717
              length: 197
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_tokenCBuffer);
                children: []
                pos: 5771
                length: 28
              - type: return_statement
                fields:
                  text: return (_tokenCBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_TOKEN_BUFFER,
                    minSize));
                children: []
                pos: 5808
                length: 100
              pos: 5761
              length: 153
          children: []
          pos: 5717
          length: 197
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocConcatBuffer
              children: []
              pos: 5938
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5924
              length: 181
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_concatCBuffer);
                children: []
                pos: 5968
                length: 29
              - type: return_statement
                fields:
                  text: return (_concatCBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_CONCAT_BUFFER));
                children: []
                pos: 6006
                length: 93
              pos: 5958
              length: 147
          children: []
          pos: 5924
          length: 181
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocNameCopyBuffer
              children: []
              pos: 6125
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 6145
                length: 11
              pos: 6111
              length: 208
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_nameCopyBuffer);
                children: []
                pos: 6168
                length: 30
              - type: return_statement
                fields:
                  text: return (_nameCopyBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_NAME_COPY_BUFFER,
                    minSize));
                children: []
                pos: 6207
                length: 106
              pos: 6158
              length: 161
          children: []
          pos: 6111
          length: 208
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseReadIOBuffer
              children: []
              pos: 6438
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] buf
                children: []
                pos: 6458
                length: 10
              pos: 6426
              length: 421
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 6484
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6491
                            length: 4
                        children: []
                        pos: 6484
                        length: 11
                    children: []
                    pos: 6483
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _readIOBuffer);
                    children: []
                    pos: 6674
                    length: 35
                  - type: expression_statement
                    fields:
                      text: _readIOBuffer = null;
                    children: []
                    pos: 6722
                    length: 21
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseByteBuffer(BufferRecycler.BYTE_READ_IO_BUFFER,
                        buf);
                    children: []
                    pos: 6756
                    length: 75
                  pos: 6497
                  length: 344
                pos: 6480
                length: 361
              pos: 6470
              length: 377
          children: []
          pos: 6426
          length: 421
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseWriteEncodingBuffer
              children: []
              pos: 6865
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] buf
                children: []
                pos: 6892
                length: 10
              pos: 6853
              length: 449
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 6918
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6925
                            length: 4
                        children: []
                        pos: 6918
                        length: 11
                    children: []
                    pos: 6917
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _writeEncodingBuffer);
                    children: []
                    pos: 7108
                    length: 42
                  - type: expression_statement
                    fields:
                      text: _writeEncodingBuffer = null;
                    children: []
                    pos: 7163
                    length: 28
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseByteBuffer(BufferRecycler.BYTE_WRITE_ENCODING_BUFFER,
                        buf);
                    children: []
                    pos: 7204
                    length: 82
                  pos: 6931
                  length: 365
                pos: 6914
                length: 382
              pos: 6904
              length: 398
          children: []
          pos: 6853
          length: 449
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseBase64Buffer
              children: []
              pos: 7320
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] buf
                children: []
                pos: 7340
                length: 10
              pos: 7308
              length: 327
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 7366
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7373
                            length: 4
                        children: []
                        pos: 7366
                        length: 11
                    children: []
                    pos: 7365
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _base64Buffer);
                    children: []
                    pos: 7457
                    length: 35
                  - type: expression_statement
                    fields:
                      text: _base64Buffer = null;
                    children: []
                    pos: 7505
                    length: 21
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseByteBuffer(BufferRecycler.BYTE_BASE64_CODEC_BUFFER,
                        buf);
                    children: []
                    pos: 7539
                    length: 80
                  pos: 7379
                  length: 250
                pos: 7362
                length: 267
              pos: 7352
              length: 283
          children: []
          pos: 7308
          length: 327
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseTokenBuffer
              children: []
              pos: 7657
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] buf
                children: []
                pos: 7676
                length: 10
              pos: 7645
              length: 255
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 7702
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7709
                            length: 4
                        children: []
                        pos: 7702
                        length: 11
                    children: []
                    pos: 7701
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _tokenCBuffer);
                    children: []
                    pos: 7729
                    length: 35
                  - type: expression_statement
                    fields:
                      text: _tokenCBuffer = null;
                    children: []
                    pos: 7777
                    length: 21
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseCharBuffer(BufferRecycler.CHAR_TOKEN_BUFFER,
                        buf);
                    children: []
                    pos: 7811
                    length: 73
                  pos: 7715
                  length: 179
                pos: 7698
                length: 196
              pos: 7688
              length: 212
          children: []
          pos: 7645
          length: 255
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseConcatBuffer
              children: []
              pos: 7918
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] buf
                children: []
                pos: 7938
                length: 10
              pos: 7906
              length: 346
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 7964
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7971
                            length: 4
                        children: []
                        pos: 7964
                        length: 11
                    children: []
                    pos: 7963
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _concatCBuffer);
                    children: []
                    pos: 8078
                    length: 36
                  - type: expression_statement
                    fields:
                      text: _concatCBuffer = null;
                    children: []
                    pos: 8127
                    length: 22
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseCharBuffer(BufferRecycler.CHAR_CONCAT_BUFFER,
                        buf);
                    children: []
                    pos: 8162
                    length: 74
                  pos: 7977
                  length: 269
                pos: 7960
                length: 286
              pos: 7950
              length: 302
          children: []
          pos: 7906
          length: 346
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseNameCopyBuffer
              children: []
              pos: 8270
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] buf
                children: []
                pos: 8292
                length: 10
              pos: 8258
              length: 353
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 8318
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8325
                            length: 4
                        children: []
                        pos: 8318
                        length: 11
                    children: []
                    pos: 8317
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _nameCopyBuffer);
                    children: []
                    pos: 8432
                    length: 37
                  - type: expression_statement
                    fields:
                      text: _nameCopyBuffer = null;
                    children: []
                    pos: 8482
                    length: 23
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseCharBuffer(BufferRecycler.CHAR_NAME_COPY_BUFFER,
                        buf);
                    children: []
                    pos: 8518
                    length: 77
                  pos: 8331
                  length: 274
                pos: 8314
                length: 291
              pos: 8304
              length: 307
          children: []
          pos: 8258
          length: 353
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _verifyAlloc
              children: []
              pos: 8806
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object buffer
                children: []
                pos: 8819
                length: 13
              pos: 8785
              length: 174
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buffer
                            children: []
                            pos: 8848
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8858
                            length: 4
                        children: []
                        pos: 8848
                        length: 14
                    children: []
                    pos: 8847
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalStateException("Trying to call same allocXxx()
                        method second time");
                    children: []
                    pos: 8866
                    length: 85
                  pos: 8864
                  length: 89
                pos: 8844
                length: 109
              pos: 8834
              length: 125
          children: []
          pos: 8785
          length: 174
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _verifyRelease
              children: []
              pos: 8986
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] toRelease
                children: []
                pos: 9001
                length: 16
              pos: 8965
              length: 244
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: toRelease
                                    children: []
                                    pos: 9128
                                    length: 9
                                  right:
                                    type: identifier
                                    fields:
                                      text: src
                                    children: []
                                    pos: 9141
                                    length: 3
                                children: []
                                pos: 9128
                                length: 16
                            children: []
                            pos: 9127
                            length: 18
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: less_than
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: toRelease.length
                                    children: []
                                    pos: 9150
                                    length: 16
                                  right:
                                    type: field_access
                                    fields:
                                      text: src.length
                                    children: []
                                    pos: 9169
                                    length: 10
                                children: []
                                pos: 9150
                                length: 29
                            children: []
                            pos: 9149
                            length: 31
                        children: []
                        pos: 9127
                        length: 53
                    children: []
                    pos: 9126
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw wrongBuf();
                    children: []
                    pos: 9184
                    length: 17
                  pos: 9182
                  length: 21
                pos: 9123
                length: 80
              pos: 9031
              length: 178
          children: []
          pos: 8965
          length: 244
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _verifyRelease
              children: []
              pos: 9236
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] toRelease
                children: []
                pos: 9251
                length: 16
              pos: 9215
              length: 244
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: toRelease
                                    children: []
                                    pos: 9378
                                    length: 9
                                  right:
                                    type: identifier
                                    fields:
                                      text: src
                                    children: []
                                    pos: 9391
                                    length: 3
                                children: []
                                pos: 9378
                                length: 16
                            children: []
                            pos: 9377
                            length: 18
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: less_than
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: toRelease.length
                                    children: []
                                    pos: 9400
                                    length: 16
                                  right:
                                    type: field_access
                                    fields:
                                      text: src.length
                                    children: []
                                    pos: 9419
                                    length: 10
                                children: []
                                pos: 9400
                                length: 29
                            children: []
                            pos: 9399
                            length: 31
                        children: []
                        pos: 9377
                        length: 53
                    children: []
                    pos: 9376
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw wrongBuf();
                    children: []
                    pos: 9434
                    length: 17
                  pos: 9432
                  length: 21
                pos: 9373
                length: 80
              pos: 9281
              length: 178
          children: []
          pos: 9215
          length: 244
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrongBuf
              children: []
              pos: 9498
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9465
              length: 222
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new IllegalArgumentException("Trying to release buffer
                    smaller than original");
                children: []
                pos: 9595
                length: 86
              pos: 9509
              length: 178
          children: []
          pos: 9465
          length: 222
        pos: 502
        length: 9187
    children: []
    pos: 502
    length: 9187
  pos: 0
  length: 9690
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: IOContext
        children: []
        pos: 515
        length: 9
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected final Object _sourceRef;
          children: []
          pos: 812
          length: 34
        - type: field_declaration
          fields:
            text: protected JsonEncoding _encoding;
          children: []
          pos: 925
          length: 33
        - type: field_declaration
          fields:
            text: protected final boolean _managedResource;
          children: []
          pos: 1386
          length: 41
        - type: field_declaration
          fields:
            text: protected final BufferRecycler _bufferRecycler;
          children: []
          pos: 1689
          length: 47
        - type: field_declaration
          fields:
            text: protected byte[] _readIOBuffer;
          children: []
          pos: 1857
          length: 31
        - type: field_declaration
          fields:
            text: protected byte[] _writeEncodingBuffer;
          children: []
          pos: 2009
          length: 38
        - type: field_declaration
          fields:
            text: protected byte[] _base64Buffer;
          children: []
          pos: 2173
          length: 31
        - type: field_declaration
          fields:
            text: protected char[] _tokenCBuffer;
          children: []
          pos: 2385
          length: 31
        - type: field_declaration
          fields:
            text: protected char[] _concatCBuffer;
          children: []
          pos: 2623
          length: 32
        - type: field_declaration
          fields:
            text: protected char[] _nameCopyBuffer;
          children: []
          pos: 2930
          length: 33
        - type: constructor_declaration
          fields:
            text: |-
              public IOContext(BufferRecycler br, Object sourceRef, boolean managedResource)
                  {
                      _bufferRecycler = br;
                      _sourceRef = sourceRef;
                      _managedResource = managedResource;
                  }
          children: []
          pos: 3131
          length: 196
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setEncoding
              children: []
              pos: 3345
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonEncoding enc
                children: []
                pos: 3357
                length: 16
              pos: 3333
              length: 74
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _encoding = enc;
                children: []
                pos: 3385
                length: 16
              pos: 3375
              length: 32
          children: []
          pos: 3333
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withEncoding
              children: []
              pos: 3464
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonEncoding enc
                children: []
                pos: 3477
                length: 16
              pos: 3447
              length: 101
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _encoding = enc;
                children: []
                pos: 3505
                length: 16
              - type: return_statement
                fields:
                  text: return this;
                children: []
                pos: 3530
                length: 12
              pos: 3495
              length: 53
          children: []
          pos: 3447
          length: 101
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getSourceReference
              children: []
              pos: 3745
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3731
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _sourceRef;
                children: []
                pos: 3768
                length: 18
              pos: 3766
              length: 22
          children: []
          pos: 3731
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getEncoding
              children: []
              pos: 3813
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3793
              length: 55
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _encoding;
                children: []
                pos: 3829
                length: 17
              pos: 3827
              length: 21
          children: []
          pos: 3793
          length: 55
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isResourceManaged
              children: []
              pos: 3868
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 3853
              length: 63
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _managedResource;
                children: []
                pos: 3890
                length: 24
              pos: 3888
              length: 28
          children: []
          pos: 3853
          length: 63
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: constructTextBuffer
              children: []
              pos: 4121
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4103
              length: 95
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new TextBuffer(_bufferRecycler);
                children: []
                pos: 4153
                length: 39
              pos: 4143
              length: 55
          children: []
          pos: 4103
          length: 95
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocReadIOBuffer
              children: []
              pos: 4369
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4355
              length: 180
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_readIOBuffer);
                children: []
                pos: 4399
                length: 28
              - type: return_statement
                fields:
                  text: return (_readIOBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_READ_IO_BUFFER));
                children: []
                pos: 4436
                length: 93
              pos: 4389
              length: 146
          children: []
          pos: 4355
          length: 180
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocReadIOBuffer
              children: []
              pos: 4589
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 4607
                length: 11
              pos: 4575
              length: 200
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_readIOBuffer);
                children: []
                pos: 4630
                length: 28
              - type: return_statement
                fields:
                  text: return (_readIOBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_READ_IO_BUFFER,
                    minSize));
                children: []
                pos: 4667
                length: 102
              pos: 4620
              length: 155
          children: []
          pos: 4575
          length: 200
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocWriteEncodingBuffer
              children: []
              pos: 4799
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 4785
              length: 208
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_writeEncodingBuffer);
                children: []
                pos: 4836
                length: 35
              - type: return_statement
                fields:
                  text: return (_writeEncodingBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_WRITE_ENCODING_BUFFER));
                children: []
                pos: 4880
                length: 107
              pos: 4826
              length: 167
          children: []
          pos: 4785
          length: 208
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocWriteEncodingBuffer
              children: []
              pos: 5047
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 5072
                length: 11
              pos: 5033
              length: 228
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_writeEncodingBuffer);
                children: []
                pos: 5095
                length: 35
              - type: return_statement
                fields:
                  text: return (_writeEncodingBuffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_WRITE_ENCODING_BUFFER,
                    minSize));
                children: []
                pos: 5139
                length: 116
              pos: 5085
              length: 176
          children: []
          pos: 5033
          length: 228
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocBase64Buffer
              children: []
              pos: 5319
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5305
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_base64Buffer);
                children: []
                pos: 5349
                length: 28
              - type: return_statement
                fields:
                  text: return (_base64Buffer = _bufferRecycler.allocByteBuffer(BufferRecycler.BYTE_BASE64_CODEC_BUFFER));
                children: []
                pos: 5386
                length: 98
              pos: 5339
              length: 151
          children: []
          pos: 5305
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocTokenBuffer
              children: []
              pos: 5514
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5500
              length: 177
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_tokenCBuffer);
                children: []
                pos: 5543
                length: 28
              - type: return_statement
                fields:
                  text: return (_tokenCBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_TOKEN_BUFFER));
                children: []
                pos: 5580
                length: 91
              pos: 5533
              length: 144
          children: []
          pos: 5500
          length: 177
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocTokenBuffer
              children: []
              pos: 5731
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 5748
                length: 11
              pos: 5717
              length: 197
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_tokenCBuffer);
                children: []
                pos: 5771
                length: 28
              - type: return_statement
                fields:
                  text: return (_tokenCBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_TOKEN_BUFFER,
                    minSize));
                children: []
                pos: 5808
                length: 100
              pos: 5761
              length: 153
          children: []
          pos: 5717
          length: 197
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocConcatBuffer
              children: []
              pos: 5938
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5924
              length: 181
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_concatCBuffer);
                children: []
                pos: 5968
                length: 29
              - type: return_statement
                fields:
                  text: return (_concatCBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_CONCAT_BUFFER));
                children: []
                pos: 6006
                length: 93
              pos: 5958
              length: 147
          children: []
          pos: 5924
          length: 181
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: allocNameCopyBuffer
              children: []
              pos: 6125
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int minSize
                children: []
                pos: 6145
                length: 11
              pos: 6111
              length: 208
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _verifyAlloc(_nameCopyBuffer);
                children: []
                pos: 6168
                length: 30
              - type: return_statement
                fields:
                  text: return (_nameCopyBuffer = _bufferRecycler.allocCharBuffer(BufferRecycler.CHAR_NAME_COPY_BUFFER,
                    minSize));
                children: []
                pos: 6207
                length: 106
              pos: 6158
              length: 161
          children: []
          pos: 6111
          length: 208
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseReadIOBuffer
              children: []
              pos: 6438
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] buf
                children: []
                pos: 6458
                length: 10
              pos: 6426
              length: 421
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 6484
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6491
                            length: 4
                        children: []
                        pos: 6484
                        length: 11
                    children: []
                    pos: 6483
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _readIOBuffer);
                    children: []
                    pos: 6674
                    length: 35
                  - type: expression_statement
                    fields:
                      text: _readIOBuffer = null;
                    children: []
                    pos: 6722
                    length: 21
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseByteBuffer(BufferRecycler.BYTE_READ_IO_BUFFER,
                        buf);
                    children: []
                    pos: 6756
                    length: 75
                  pos: 6497
                  length: 344
                pos: 6480
                length: 361
              pos: 6470
              length: 377
          children: []
          pos: 6426
          length: 421
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseWriteEncodingBuffer
              children: []
              pos: 6865
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] buf
                children: []
                pos: 6892
                length: 10
              pos: 6853
              length: 449
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 6918
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6925
                            length: 4
                        children: []
                        pos: 6918
                        length: 11
                    children: []
                    pos: 6917
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _writeEncodingBuffer);
                    children: []
                    pos: 7108
                    length: 42
                  - type: expression_statement
                    fields:
                      text: _writeEncodingBuffer = null;
                    children: []
                    pos: 7163
                    length: 28
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseByteBuffer(BufferRecycler.BYTE_WRITE_ENCODING_BUFFER,
                        buf);
                    children: []
                    pos: 7204
                    length: 82
                  pos: 6931
                  length: 365
                pos: 6914
                length: 382
              pos: 6904
              length: 398
          children: []
          pos: 6853
          length: 449
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseBase64Buffer
              children: []
              pos: 7320
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] buf
                children: []
                pos: 7340
                length: 10
              pos: 7308
              length: 327
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 7366
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7373
                            length: 4
                        children: []
                        pos: 7366
                        length: 11
                    children: []
                    pos: 7365
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _base64Buffer);
                    children: []
                    pos: 7457
                    length: 35
                  - type: expression_statement
                    fields:
                      text: _base64Buffer = null;
                    children: []
                    pos: 7505
                    length: 21
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseByteBuffer(BufferRecycler.BYTE_BASE64_CODEC_BUFFER,
                        buf);
                    children: []
                    pos: 7539
                    length: 80
                  pos: 7379
                  length: 250
                pos: 7362
                length: 267
              pos: 7352
              length: 283
          children: []
          pos: 7308
          length: 327
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseTokenBuffer
              children: []
              pos: 7657
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] buf
                children: []
                pos: 7676
                length: 10
              pos: 7645
              length: 255
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 7702
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7709
                            length: 4
                        children: []
                        pos: 7702
                        length: 11
                    children: []
                    pos: 7701
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _tokenCBuffer);
                    children: []
                    pos: 7729
                    length: 35
                  - type: expression_statement
                    fields:
                      text: _tokenCBuffer = null;
                    children: []
                    pos: 7777
                    length: 21
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseCharBuffer(BufferRecycler.CHAR_TOKEN_BUFFER,
                        buf);
                    children: []
                    pos: 7811
                    length: 73
                  pos: 7715
                  length: 179
                pos: 7698
                length: 196
              pos: 7688
              length: 212
          children: []
          pos: 7645
          length: 255
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseConcatBuffer
              children: []
              pos: 7918
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] buf
                children: []
                pos: 7938
                length: 10
              pos: 7906
              length: 346
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 7964
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7971
                            length: 4
                        children: []
                        pos: 7964
                        length: 11
                    children: []
                    pos: 7963
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _concatCBuffer);
                    children: []
                    pos: 8078
                    length: 36
                  - type: expression_statement
                    fields:
                      text: _concatCBuffer = null;
                    children: []
                    pos: 8127
                    length: 22
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseCharBuffer(BufferRecycler.CHAR_CONCAT_BUFFER,
                        buf);
                    children: []
                    pos: 8162
                    length: 74
                  pos: 7977
                  length: 269
                pos: 7960
                length: 286
              pos: 7950
              length: 302
          children: []
          pos: 7906
          length: 346
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: releaseNameCopyBuffer
              children: []
              pos: 8270
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] buf
                children: []
                pos: 8292
                length: 10
              pos: 8258
              length: 353
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buf
                            children: []
                            pos: 8318
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8325
                            length: 4
                        children: []
                        pos: 8318
                        length: 11
                    children: []
                    pos: 8317
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _verifyRelease(buf, _nameCopyBuffer);
                    children: []
                    pos: 8432
                    length: 37
                  - type: expression_statement
                    fields:
                      text: _nameCopyBuffer = null;
                    children: []
                    pos: 8482
                    length: 23
                  - type: expression_statement
                    fields:
                      text: _bufferRecycler.releaseCharBuffer(BufferRecycler.CHAR_NAME_COPY_BUFFER,
                        buf);
                    children: []
                    pos: 8518
                    length: 77
                  pos: 8331
                  length: 274
                pos: 8314
                length: 291
              pos: 8304
              length: 307
          children: []
          pos: 8258
          length: 353
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _verifyAlloc
              children: []
              pos: 8806
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object buffer
                children: []
                pos: 8819
                length: 13
              pos: 8785
              length: 174
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: buffer
                            children: []
                            pos: 8848
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8858
                            length: 4
                        children: []
                        pos: 8848
                        length: 14
                    children: []
                    pos: 8847
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new IllegalStateException("Trying to call same allocXxx()
                        method second time");
                    children: []
                    pos: 8866
                    length: 85
                  pos: 8864
                  length: 89
                pos: 8844
                length: 109
              pos: 8834
              length: 125
          children: []
          pos: 8785
          length: 174
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _verifyRelease
              children: []
              pos: 8986
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: byte[] toRelease
                children: []
                pos: 9001
                length: 16
              pos: 8965
              length: 245
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: toRelease
                                    children: []
                                    pos: 9128
                                    length: 9
                                  right:
                                    type: identifier
                                    fields:
                                      text: src
                                    children: []
                                    pos: 9141
                                    length: 3
                                children: []
                                pos: 9128
                                length: 16
                            children: []
                            pos: 9127
                            length: 18
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: less_or_equals
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: toRelease.length
                                    children: []
                                    pos: 9150
                                    length: 16
                                  right:
                                    type: field_access
                                    fields:
                                      text: src.length
                                    children: []
                                    pos: 9170
                                    length: 10
                                children: []
                                pos: 9150
                                length: 30
                            children: []
                            pos: 9149
                            length: 32
                        children: []
                        pos: 9127
                        length: 54
                    children: []
                    pos: 9126
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw wrongBuf();
                    children: []
                    pos: 9185
                    length: 17
                  pos: 9183
                  length: 21
                pos: 9123
                length: 81
              pos: 9031
              length: 179
          children: []
          pos: 8965
          length: 245
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _verifyRelease
              children: []
              pos: 9237
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: char[] toRelease
                children: []
                pos: 9252
                length: 16
              pos: 9216
              length: 245
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: toRelease
                                    children: []
                                    pos: 9379
                                    length: 9
                                  right:
                                    type: identifier
                                    fields:
                                      text: src
                                    children: []
                                    pos: 9392
                                    length: 3
                                children: []
                                pos: 9379
                                length: 16
                            children: []
                            pos: 9378
                            length: 18
                          right:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: less_or_equals
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: toRelease.length
                                    children: []
                                    pos: 9401
                                    length: 16
                                  right:
                                    type: field_access
                                    fields:
                                      text: src.length
                                    children: []
                                    pos: 9421
                                    length: 10
                                children: []
                                pos: 9401
                                length: 30
                            children: []
                            pos: 9400
                            length: 32
                        children: []
                        pos: 9378
                        length: 54
                    children: []
                    pos: 9377
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw wrongBuf();
                    children: []
                    pos: 9436
                    length: 17
                  pos: 9434
                  length: 21
                pos: 9374
                length: 81
              pos: 9282
              length: 179
          children: []
          pos: 9216
          length: 245
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrongBuf
              children: []
              pos: 9500
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9467
              length: 218
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new IllegalArgumentException("Trying to release buffer
                    not owned by the context");
                children: []
                pos: 9589
                length: 89
              pos: 9511
              length: 174
          children: []
          pos: 9467
          length: 218
        pos: 502
        length: 9185
    children: []
    pos: 502
    length: 9185
  pos: 0
  length: 9688
text_diff: "--- before\n+++ after\n@@ -271,16 +271,16 @@\n \n     protected final
  void _verifyRelease(byte[] toRelease, byte[] src) {\n         // 07-Mar-2016, tatu:
  As per [core#255], only prevent shrinking of buffer\n-        if ((toRelease !=
  src) && (toRelease.length < src.length)) { throw wrongBuf(); }\n+        if ((toRelease
  != src) && (toRelease.length <= src.length)) { throw wrongBuf(); }\n     }\n \n
  \    protected final void _verifyRelease(char[] toRelease, char[] src) {\n         //
  07-Mar-2016, tatu: As per [core#255], only prevent shrinking of buffer\n-        if
  ((toRelease != src) && (toRelease.length < src.length)) { throw wrongBuf(); }\n+
  \       if ((toRelease != src) && (toRelease.length <= src.length)) { throw wrongBuf();
  }\n     }\n \n     private IllegalArgumentException wrongBuf() {\n         // sanity
  check failed; trying to return different, smaller buffer.\n-        return new IllegalArgumentException(\"Trying
  to release buffer smaller than original\");\n+return new IllegalArgumentException(\"Trying
  to release buffer not owned by the context\"); \n     }\n }\n"
tree_diff: |+
  New cluster:
  UPDATE from return new IllegalArgumentException("Trying to release buffer smaller than original"); to return new IllegalArgumentException("Trying to release buffer not owned by the context");
  ------------
  ===
  update-node
  ---
  return_statement: return new IllegalArgumentException("Trying to release buffer smaller than original"); [9595,9681]
  replace return new IllegalArgumentException("Trying to release buffer smaller than original"); by return new IllegalArgumentException("Trying to release buffer not owned by the context");

  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  less_or_equals [9150,9180]
      field_access: toRelease.length [9150,9166]
      field_access: src.length [9170,9180]
  to
  parenthesized_expression [9149,9180]
  at 0

  New cluster:
  Unknown cluster type
  ------------
  ===
  insert-tree
  ---
  less_or_equals [9401,9431]
      field_access: toRelease.length [9401,9417]
      field_access: src.length [9421,9431]
  to
  parenthesized_expression [9399,9430]
  at 0

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  less_than [9150,9179]
      field_access: toRelease.length [9150,9166]
      field_access: src.length [9169,9179]

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  less_than [9400,9429]
      field_access: toRelease.length [9400,9416]
      field_access: src.length [9419,9429]

...
