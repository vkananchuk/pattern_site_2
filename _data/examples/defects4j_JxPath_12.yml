---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DOMNodePointer
        children: []
        pos: 2097
        length: 14
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -8751046933894857319L;
          children: []
          pos: 2139
          length: 67
        - type: field_declaration
          fields:
            text: private Node node;
          children: []
          pos: 2216
          length: 18
        - type: field_declaration
          fields:
            text: private Map namespaces;
          children: []
          pos: 2239
          length: 23
        - type: field_declaration
          fields:
            text: private String defaultNamespace;
          children: []
          pos: 2267
          length: 32
        - type: field_declaration
          fields:
            text: private String id;
          children: []
          pos: 2304
          length: 18
        - type: field_declaration
          fields:
            text: "public static final String XML_NAMESPACE_URI = \n            \"http://www.w3.org/XML/1998/namespace\";"
          children: []
          pos: 2328
          length: 99
        - type: field_declaration
          fields:
            text: "public static final String XMLNS_NAMESPACE_URI = \n            \"http://www.w3.org/2000/xmlns/\";"
          children: []
          pos: 2432
          length: 94
        - type: constructor_declaration
          fields:
            text: |-
              public DOMNodePointer(Node node, Locale locale) {
                      super(null, locale);
                      this.node = node;
                  }
          children: []
          pos: 2532
          length: 110
        - type: constructor_declaration
          fields:
            text: |-
              public DOMNodePointer(Node node, Locale locale, String id) {
                      super(null, locale);
                      this.node = node;
                      this.id = id;
                  }
          children: []
          pos: 2648
          length: 143
        - type: constructor_declaration
          fields:
            text: |-
              public DOMNodePointer(NodePointer parent, Node node) {
                      super(parent);
                      this.node = node;
                  }
          children: []
          pos: 2797
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: testNode
              children: []
              pos: 2931
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 2940
                length: 13
              pos: 2916
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return testNode(node, test);
                children: []
                pos: 2965
                length: 28
              pos: 2955
              length: 44
          children: []
          pos: 2916
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: testNode
              children: []
              pos: 3027
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 3036
                length: 9
              pos: 3005
              length: 2200
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: test
                            children: []
                            pos: 3076
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3084
                            length: 4
                        children: []
                        pos: 3076
                        length: 12
                    children: []
                    pos: 3075
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 3104
                    length: 12
                  pos: 3090
                  length: 36
                pos: 3072
                length: 54
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof NodeNameTest
                        children: []
                        pos: 3139
                        length: 28
                    children: []
                    pos: 3138
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 3187
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.ELEMENT_NODE
                                children: []
                                pos: 3209
                                length: 17
                            children: []
                            pos: 3187
                            length: 39
                        children: []
                        pos: 3186
                        length: 41
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return false;
                        children: []
                        pos: 3246
                        length: 13
                      pos: 3228
                      length: 45
                    pos: 3183
                    length: 90
                  - type: local_variable_declaration
                    fields:
                      text: NodeNameTest nodeNameTest = (NodeNameTest) test;
                    children: []
                    pos: 3287
                    length: 48
                  - type: local_variable_declaration
                    fields:
                      text: QName testName = nodeNameTest.getNodeName();
                    children: []
                    pos: 3348
                    length: 44
                  - type: local_variable_declaration
                    fields:
                      text: String namespaceURI = nodeNameTest.getNamespaceURI();
                    children: []
                    pos: 3405
                    length: 53
                  - type: local_variable_declaration
                    fields:
                      text: boolean wildcard = nodeNameTest.isWildcard();
                    children: []
                    pos: 3471
                    length: 45
                  - type: local_variable_declaration
                    fields:
                      text: String testPrefix = testName.getPrefix();
                    children: []
                    pos: 3529
                    length: 41
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: wildcard
                                children: []
                                pos: 3587
                                length: 8
                              right:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: testPrefix
                                    children: []
                                    pos: 3599
                                    length: 10
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 3613
                                    length: 4
                                children: []
                                pos: 3599
                                length: 18
                            children: []
                            pos: 3587
                            length: 30
                        children: []
                        pos: 3586
                        length: 32
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 3637
                        length: 12
                      pos: 3619
                      length: 44
                    pos: 3583
                    length: 80
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: wildcard
                                children: []
                                pos: 3680
                                length: 8
                              right:
                                type: method_invocation
                                fields:
                                  text: |-
                                    testName.getName()
                                                            .equals(DOMNodePointer.getLocalName(node))
                                children: []
                                pos: 3708
                                length: 85
                            children: []
                            pos: 3680
                            length: 113
                        children: []
                        pos: 3679
                        length: 115
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String nodeNS = DOMNodePointer.getNamespaceURI(node);
                        children: []
                        pos: 3813
                        length: 53
                      - type: return_statement
                        fields:
                          text: |-
                            return equalStrings(namespaceURI, nodeNS) || nodeNS == null
                                                    && equalStrings(testPrefix, getPrefix(node));
                        children: []
                        pos: 3883
                        length: 129
                      pos: 3795
                      length: 231
                    pos: 3676
                    length: 350
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 4039
                    length: 13
                  pos: 3169
                  length: 893
                pos: 3135
                length: 927
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof NodeTypeTest
                        children: []
                        pos: 4075
                        length: 28
                    children: []
                    pos: 4074
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int nodeType = node.getNodeType();
                    children: []
                    pos: 4119
                    length: 34
                  - type: switch_expression
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: "((NodeTypeTest) test).getNodeType()"
                            children: []
                            pos: 4174
                            length: 35
                        children: []
                        pos: 4173
                        length: 37
                      body:
                        type: switch_block
                        fields:
                          text: |-
                            {
                                            case Compiler.NODE_TYPE_NODE :
                                                return nodeType == Node.ELEMENT_NODE
                                                        || nodeType == Node.DOCUMENT_NODE;
                                            case Compiler.NODE_TYPE_TEXT :
                                                return nodeType == Node.CDATA_SECTION_NODE
                                                    || nodeType == Node.TEXT_NODE;
                                            case Compiler.NODE_TYPE_COMMENT :
                                                return nodeType == Node.COMMENT_NODE;
                                            case Compiler.NODE_TYPE_PI :
                                                return nodeType == Node.PROCESSING_INSTRUCTION_NODE;
                                        }
                        children: []
                        pos: 4211
                        length: 573
                    children: []
                    pos: 4166
                    length: 618
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 4797
                    length: 13
                  pos: 4105
                  length: 715
                pos: 4071
                length: 749
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof ProcessingInstructionTest
                        children: []
                        pos: 4833
                        length: 41
                    children: []
                    pos: 4832
                    length: 43
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 4894
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.PROCESSING_INSTRUCTION_NODE
                                children: []
                                pos: 4916
                                length: 32
                            children: []
                            pos: 4894
                            length: 54
                        children: []
                        pos: 4893
                        length: 56
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String testPI = ((ProcessingInstructionTest) test).getTarget();
                        children: []
                        pos: 4968
                        length: 63
                      - type: local_variable_declaration
                        fields:
                          text: String nodePI = ((ProcessingInstruction) node).getTarget();
                        children: []
                        pos: 5048
                        length: 59
                      - type: return_statement
                        fields:
                          text: return testPI.equals(nodePI);
                        children: []
                        pos: 5124
                        length: 29
                      pos: 4950
                      length: 217
                    pos: 4890
                    length: 277
                  pos: 4876
                  length: 301
                pos: 4829
                length: 348
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 5186
                length: 13
              pos: 3062
              length: 2143
          children: []
          pos: 3005
          length: 2200
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equalStrings
              children: []
              pos: 5234
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String s1
                children: []
                pos: 5247
                length: 9
              pos: 5211
              length: 238
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: s1
                            children: []
                            pos: 5283
                            length: 2
                          right:
                            type: identifier
                            fields:
                              text: s2
                            children: []
                            pos: 5289
                            length: 2
                        children: []
                        pos: 5283
                        length: 8
                    children: []
                    pos: 5282
                    length: 10
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 5307
                    length: 12
                  pos: 5293
                  length: 36
                pos: 5279
                length: 50
              - type: expression_statement
                fields:
                  text: 's1 = s1 == null ? "" : s1.trim();'
                children: []
                pos: 5338
                length: 33
              - type: expression_statement
                fields:
                  text: 's2 = s2 == null ? "" : s2.trim();'
                children: []
                pos: 5380
                length: 33
              - type: return_statement
                fields:
                  text: return s1.equals(s2);
                children: []
                pos: 5422
                length: 21
              pos: 5269
              length: 180
          children: []
          pos: 5211
          length: 238
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getName
              children: []
              pos: 5468
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5455
              length: 439
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String ln = null;
                children: []
                pos: 5488
                length: 17
              - type: local_variable_declaration
                fields:
                  text: String ns = null;
                children: []
                pos: 5514
                length: 17
              - type: local_variable_declaration
                fields:
                  text: int type = node.getNodeType();
                children: []
                pos: 5540
                length: 30
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: type
                            children: []
                            pos: 5583
                            length: 4
                          right:
                            type: field_access
                            fields:
                              text: Node.ELEMENT_NODE
                            children: []
                            pos: 5591
                            length: 17
                        children: []
                        pos: 5583
                        length: 25
                    children: []
                    pos: 5582
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: ns = DOMNodePointer.getPrefix(node);
                    children: []
                    pos: 5624
                    length: 36
                  - type: expression_statement
                    fields:
                      text: ln = DOMNodePointer.getLocalName(node);
                    children: []
                    pos: 5673
                    length: 39
                  pos: 5610
                  length: 112
                pos: 5579
                length: 275
              - type: return_statement
                fields:
                  text: return new QName(ns, ln);
                children: []
                pos: 5863
                length: 25
              pos: 5478
              length: 416
          children: []
          pos: 5455
          length: 439
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 5914
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5900
              length: 77
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNamespaceURI(node);
                children: []
                pos: 5942
                length: 29
              pos: 5932
              length: 45
          children: []
          pos: 5900
          length: 77
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: childIterator
              children: []
              pos: 6003
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 6026
                length: 13
              pos: 5983
              length: 194
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new DOMNodeIterator(this, test, reverse, startWith);
                children: []
                pos: 6112
                length: 59
              pos: 6102
              length: 75
          children: []
          pos: 5983
          length: 194
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: attributeIterator
              children: []
              pos: 6203
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: QName name
                children: []
                pos: 6221
                length: 10
              pos: 6183
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new DOMAttributeIterator(this, name);
                children: []
                pos: 6243
                length: 44
              pos: 6233
              length: 60
          children: []
          pos: 6183
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespacePointer
              children: []
              pos: 6318
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 6335
                length: 13
              pos: 6299
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new NamespacePointer(this, prefix);
                children: []
                pos: 6360
                length: 42
              pos: 6350
              length: 58
          children: []
          pos: 6299
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespaceIterator
              children: []
              pos: 6434
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6414
              length: 94
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new DOMNamespaceIterator(this);
                children: []
                pos: 6464
                length: 38
              pos: 6454
              length: 54
          children: []
          pos: 6414
          length: 94
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 6528
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 6544
                length: 13
              pos: 6514
              length: 1545
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: prefix
                                children: []
                                pos: 6573
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 6583
                                length: 4
                            children: []
                            pos: 6573
                            length: 14
                          right:
                            type: method_invocation
                            fields:
                              text: prefix.equals("")
                            children: []
                            pos: 6591
                            length: 17
                        children: []
                        pos: 6573
                        length: 35
                    children: []
                    pos: 6572
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return getDefaultNamespaceURI();
                    children: []
                    pos: 6624
                    length: 32
                  pos: 6610
                  length: 56
                pos: 6569
                length: 97
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: prefix.equals("xml")
                        children: []
                        pos: 6680
                        length: 20
                    children: []
                    pos: 6679
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return XML_NAMESPACE_URI;
                    children: []
                    pos: 6716
                    length: 25
                  pos: 6702
                  length: 49
                pos: 6676
                length: 75
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: prefix.equals("xmlns")
                        children: []
                        pos: 6765
                        length: 22
                    children: []
                    pos: 6764
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return XMLNS_NAMESPACE_URI;
                    children: []
                    pos: 6803
                    length: 27
                  pos: 6789
                  length: 51
                pos: 6761
                length: 79
              - type: local_variable_declaration
                fields:
                  text: String namespace = null;
                children: []
                pos: 6850
                length: 24
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: namespaces
                            children: []
                            pos: 6887
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6901
                            length: 4
                        children: []
                        pos: 6887
                        length: 18
                    children: []
                    pos: 6886
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: namespaces = new HashMap();
                    children: []
                    pos: 6921
                    length: 27
                  pos: 6907
                  length: 51
                pos: 6883
                length: 157
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: namespace
                            children: []
                            pos: 7054
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7067
                            length: 4
                        children: []
                        pos: 7054
                        length: 17
                    children: []
                    pos: 7053
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String qname = "xmlns:" + prefix;
                    children: []
                    pos: 7087
                    length: 33
                  - type: local_variable_declaration
                    fields:
                      text: Node aNode = node;
                    children: []
                    pos: 7133
                    length: 18
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: instanceof_expression
                            fields:
                              text: aNode instanceof Document
                            children: []
                            pos: 7168
                            length: 25
                        children: []
                        pos: 7167
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: aNode = ((Document)aNode).getDocumentElement();
                        children: []
                        pos: 7213
                        length: 47
                      pos: 7195
                      length: 79
                    pos: 7164
                    length: 110
                  - type: while_statement
                    fields:
                      text: |-
                        while (aNode != null) {
                                        if (aNode.getNodeType() == Node.ELEMENT_NODE) {
                                            Attr attr = ((Element) aNode).getAttributeNode(qname);
                                            if (attr != null) {
                                                namespace = attr.getValue();
                                                break;
                                            }
                                        }
                                        aNode = aNode.getParentNode();
                                    }
                    children: []
                    pos: 7287
                    length: 387
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: namespace
                                    children: []
                                    pos: 7691
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 7704
                                    length: 4
                                children: []
                                pos: 7691
                                length: 17
                              right:
                                type: method_invocation
                                fields:
                                  text: namespace.equals("")
                                children: []
                                pos: 7712
                                length: 20
                            children: []
                            pos: 7691
                            length: 41
                        children: []
                        pos: 7690
                        length: 43
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: namespace = NodePointer.UNKNOWN_NAMESPACE;
                        children: []
                        pos: 7752
                        length: 42
                      pos: 7734
                      length: 74
                    pos: 7687
                    length: 121
                  pos: 7073
                  length: 745
                pos: 7050
                length: 768
              - type: expression_statement
                fields:
                  text: namespaces.put(prefix, namespace);
                children: []
                pos: 7828
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: namespace
                            children: []
                            pos: 7875
                            length: 9
                          right:
                            type: identifier
                            fields:
                              text: UNKNOWN_NAMESPACE
                            children: []
                            pos: 7888
                            length: 17
                        children: []
                        pos: 7875
                        length: 30
                    children: []
                    pos: 7874
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 7921
                    length: 12
                  pos: 7907
                  length: 36
                pos: 7871
                length: 72
              - type: return_statement
                fields:
                  text: return namespace;
                children: []
                pos: 8036
                length: 17
              pos: 6559
              length: 1500
          children: []
          pos: 6514
          length: 1545
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getDefaultNamespaceURI
              children: []
              pos: 8079
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8065
              length: 890
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaultNamespace
                            children: []
                            pos: 8118
                            length: 16
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8138
                            length: 4
                        children: []
                        pos: 8118
                        length: 24
                    children: []
                    pos: 8117
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node aNode = node;
                    children: []
                    pos: 8158
                    length: 18
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: instanceof_expression
                            fields:
                              text: aNode instanceof Document
                            children: []
                            pos: 8193
                            length: 25
                        children: []
                        pos: 8192
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: aNode = ((Document) aNode).getDocumentElement();
                        children: []
                        pos: 8238
                        length: 48
                      pos: 8220
                      length: 80
                    pos: 8189
                    length: 111
                  - type: while_statement
                    fields:
                      text: |-
                        while (aNode != null) {
                                        if (aNode.getNodeType() == Node.ELEMENT_NODE) {
                                            Attr attr = ((Element) aNode).getAttributeNode("xmlns");
                                            if (attr != null) {
                                                defaultNamespace = attr.getValue();
                                                break;
                                            }
                                        }
                                        aNode = aNode.getParentNode();
                                    }
                    children: []
                    pos: 8313
                    length: 396
                  pos: 8144
                  length: 575
                pos: 8114
                length: 605
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaultNamespace
                            children: []
                            pos: 8732
                            length: 16
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8752
                            length: 4
                        children: []
                        pos: 8732
                        length: 24
                    children: []
                    pos: 8731
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultNamespace = "";
                    children: []
                    pos: 8772
                    length: 22
                  pos: 8758
                  length: 46
                pos: 8728
                length: 76
              - type: return_statement
                fields:
                  text: 'return defaultNamespace.equals("") ? null : defaultNamespace;'
                children: []
                pos: 8888
                length: 61
              pos: 8104
              length: 851
          children: []
          pos: 8065
          length: 890
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBaseValue
              children: []
              pos: 8975
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8961
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return node;
                children: []
                pos: 9000
                length: 12
              pos: 8990
              length: 28
          children: []
          pos: 8961
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateNode
              children: []
              pos: 9038
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9024
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return node;
                children: []
                pos: 9067
                length: 12
              pos: 9057
              length: 28
          children: []
          pos: 9024
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActual
              children: []
              pos: 9106
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9091
              length: 54
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 9127
                length: 12
              pos: 9117
              length: 28
          children: []
          pos: 9091
          length: 54
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCollection
              children: []
              pos: 9166
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9151
              length: 59
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 9191
                length: 13
              pos: 9181
              length: 29
          children: []
          pos: 9151
          length: 59
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLength
              children: []
              pos: 9227
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9216
              length: 48
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 1;
                children: []
                pos: 9249
                length: 9
              pos: 9239
              length: 25
          children: []
          pos: 9216
          length: 48
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLeaf
              children: []
              pos: 9285
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9270
              length: 69
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !node.hasChildNodes();
                children: []
                pos: 9304
                length: 29
              pos: 9294
              length: 45
          children: []
          pos: 9270
          length: 69
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLanguage
              children: []
              pos: 9580
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String lang
                children: []
                pos: 9591
                length: 11
              pos: 9565
              length: 214
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String current = getLanguage();
                children: []
                pos: 9614
                length: 31
              - type: return_statement
                fields:
                  text: |-
                    return current == null ? super.isLanguage(lang)
                                    : current.toUpperCase().startsWith(lang.toUpperCase());
                children: []
                pos: 9654
                length: 119
              pos: 9604
              length: 175
          children: []
          pos: 9565
          length: 214
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: findEnclosingAttribute
              children: []
              pos: 9809
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 9832
                length: 6
              pos: 9785
              length: 447
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.ELEMENT_NODE) {
                                    Element e = (Element) n;
                                    String attr = e.getAttribute(attrName);
                                    if (attr != null && !attr.equals("")) {
                                        return attr;
                                    }
                                }
                                n = n.getParentNode();
                            }
                children: []
                pos: 9867
                length: 338
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 10214
                length: 12
              pos: 9857
              length: 375
          children: []
          pos: 9785
          length: 447
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLanguage
              children: []
              pos: 10255
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10238
              length: 95
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return findEnclosingAttribute(node, "xml:lang");
                children: []
                pos: 10279
                length: 48
              pos: 10269
              length: 64
          children: []
          pos: 10238
          length: 95
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setValue
              children: []
              pos: 10641
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object value
                children: []
                pos: 10650
                length: 12
              pos: 10629
              length: 1665
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 10678
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.TEXT_NODE
                                children: []
                                pos: 10700
                                length: 14
                            children: []
                            pos: 10678
                            length: 36
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 10730
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.CDATA_SECTION_NODE
                                children: []
                                pos: 10752
                                length: 23
                            children: []
                            pos: 10730
                            length: 45
                        children: []
                        pos: 10678
                        length: 97
                    children: []
                    pos: 10677
                    length: 99
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String string = (String) TypeUtils.convert(value, String.class);
                    children: []
                    pos: 10791
                    length: 64
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: string
                                    children: []
                                    pos: 10872
                                    length: 6
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 10882
                                    length: 4
                                children: []
                                pos: 10872
                                length: 14
                              right:
                                type: unary_expression
                                fields:
                                  text: '!string.equals("")'
                                children: []
                                pos: 10890
                                length: 18
                            children: []
                            pos: 10872
                            length: 36
                        children: []
                        pos: 10871
                        length: 38
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: node.setNodeValue(string);
                        children: []
                        pos: 10928
                        length: 26
                      pos: 10910
                      length: 58
                    pos: 10868
                    length: 189
                  pos: 10777
                  length: 290
                pos: 10674
                length: 1614
              pos: 10664
              length: 1630
          children: []
          pos: 10629
          length: 1665
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 12323
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 12344
                length: 21
              pos: 12304
              length: 1052
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: index
                            children: []
                            pos: 12425
                            length: 5
                          right:
                            type: identifier
                            fields:
                              text: WHOLE_COLLECTION
                            children: []
                            pos: 12434
                            length: 16
                        children: []
                        pos: 12425
                        length: 25
                    children: []
                    pos: 12424
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: index = 0;
                    children: []
                    pos: 12466
                    length: 10
                  pos: 12452
                  length: 34
                pos: 12421
                length: 65
              - type: local_variable_declaration
                fields:
                  text: |-
                    boolean success =
                                getAbstractFactory(context).createObject(
                                    context,
                                    this,
                                    node,
                                    name.toString(),
                                    index);
                children: []
                pos: 12495
                length: 197
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: success
                        children: []
                        pos: 12705
                        length: 7
                    children: []
                    pos: 12704
                    length: 9
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: NodeTest nodeTest;
                    children: []
                    pos: 12728
                    length: 18
                  - type: local_variable_declaration
                    fields:
                      text: String prefix = name.getPrefix();
                    children: []
                    pos: 12759
                    length: 33
                  - type: local_variable_declaration
                    fields:
                      text: "String namespaceURI = prefix == null ? null : \n                context.getNamespaceURI(prefix);"
                    children: []
                    pos: 12805
                    length: 95
                  - type: expression_statement
                    fields:
                      text: nodeTest = new NodeNameTest(name, namespaceURI);
                    children: []
                    pos: 12913
                    length: 48
                  - type: local_variable_declaration
                    fields:
                      text: NodeIterator it = childIterator(nodeTest, false, null);
                    children: []
                    pos: 12975
                    length: 55
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: it
                                    children: []
                                    pos: 13047
                                    length: 2
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 13053
                                    length: 4
                                children: []
                                pos: 13047
                                length: 10
                              right:
                                type: method_invocation
                                fields:
                                  text: it.setPosition(index + 1)
                                children: []
                                pos: 13061
                                length: 25
                            children: []
                            pos: 13047
                            length: 39
                        children: []
                        pos: 13046
                        length: 41
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return it.getNodePointer();
                        children: []
                        pos: 13106
                        length: 27
                      pos: 13088
                      length: 59
                    pos: 13043
                    length: 104
                  pos: 12714
                  length: 443
                pos: 12701
                length: 456
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathAbstractFactoryException(
                                    "Factory could not create a child node for path: " + asPath()
                                            + "/" + name + "[" + (index + 1) + "]");
                children: []
                pos: 13166
                length: 184
              pos: 12411
              length: 945
          children: []
          pos: 12304
          length: 1052
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 13381
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13393
                length: 21
              pos: 13362
              length: 229
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer ptr = createChild(context, name, index);
                children: []
                pos: 13484
                length: 52
              - type: expression_statement
                fields:
                  text: ptr.setValue(value);
                children: []
                pos: 13545
                length: 20
              - type: return_statement
                fields:
                  text: return ptr;
                children: []
                pos: 13574
                length: 11
              pos: 13474
              length: 117
          children: []
          pos: 13362
          length: 229
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createAttribute
              children: []
              pos: 13616
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13632
                length: 21
              pos: 13597
              length: 835
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!(node instanceof Element)"
                        children: []
                        pos: 13681
                        length: 26
                    children: []
                    pos: 13680
                    length: 28
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.createAttribute(context, name);
                    children: []
                    pos: 13723
                    length: 44
                  pos: 13709
                  length: 68
                pos: 13677
                length: 100
              - type: local_variable_declaration
                fields:
                  text: Element element = (Element) node;
                children: []
                pos: 13786
                length: 33
              - type: local_variable_declaration
                fields:
                  text: String prefix = name.getPrefix();
                children: []
                pos: 13828
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: prefix
                            children: []
                            pos: 13874
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 13884
                            length: 4
                        children: []
                        pos: 13874
                        length: 14
                    children: []
                    pos: 13873
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String ns = getNamespaceURI(prefix);
                    children: []
                    pos: 13904
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: ns
                                children: []
                                pos: 13957
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 13963
                                length: 4
                            children: []
                            pos: 13957
                            length: 10
                        children: []
                        pos: 13956
                        length: 12
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: throw_statement
                        fields:
                          text: |-
                            throw new JXPathException(
                                                "Unknown namespace prefix: " + prefix);
                        children: []
                        pos: 13987
                        length: 86
                      pos: 13969
                      length: 118
                    pos: 13953
                    length: 134
                  - type: expression_statement
                    fields:
                      text: element.setAttributeNS(ns, name.toString(), "");
                    children: []
                    pos: 14100
                    length: 48
                  pos: 13890
                  length: 268
                pos: 13870
                length: 442
              - type: local_variable_declaration
                fields:
                  text: NodeIterator it = attributeIterator(name);
                children: []
                pos: 14321
                length: 42
              - type: expression_statement
                fields:
                  text: it.setPosition(1);
                children: []
                pos: 14372
                length: 18
              - type: return_statement
                fields:
                  text: return it.getNodePointer();
                children: []
                pos: 14399
                length: 27
              pos: 13667
              length: 765
          children: []
          pos: 13597
          length: 835
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: remove
              children: []
              pos: 14450
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14438
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Node parent = node.getParentNode();
                children: []
                pos: 14469
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 14517
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14527
                            length: 4
                        children: []
                        pos: 14517
                        length: 14
                    children: []
                    pos: 14516
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new JXPathException("Cannot remove root DOM node");
                    children: []
                    pos: 14547
                    length: 57
                  pos: 14533
                  length: 81
                pos: 14513
                length: 101
              - type: expression_statement
                fields:
                  text: parent.removeChild(node);
                children: []
                pos: 14623
                length: 25
              pos: 14459
              length: 195
          children: []
          pos: 14438
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asPath
              children: []
              pos: 14674
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14660
              length: 2679
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: id
                            children: []
                            pos: 14697
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14703
                            length: 4
                        children: []
                        pos: 14697
                        length: 10
                    children: []
                    pos: 14696
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return "id('" + escape(id) + "')";
                    children: []
                    pos: 14723
                    length: 34
                  pos: 14709
                  length: 58
                pos: 14693
                length: 74
              - type: local_variable_declaration
                fields:
                  text: StringBuffer buffer = new StringBuffer();
                children: []
                pos: 14777
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 14831
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14841
                            length: 4
                        children: []
                        pos: 14831
                        length: 14
                    children: []
                    pos: 14830
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append(parent.asPath());
                    children: []
                    pos: 14861
                    length: 31
                  pos: 14847
                  length: 55
                pos: 14827
                length: 75
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: node.getNodeType()
                        children: []
                        pos: 14919
                        length: 18
                    children: []
                    pos: 14918
                    length: 20
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case Node.ELEMENT_NODE :
                                        // If the parent pointer is not a DOMNodePointer, it is
                                        // the parent's responsibility to produce the node test part
                                        // of the path
                                        if (parent instanceof DOMNodePointer) {
                                            if (buffer.length() == 0
                                                    || buffer.charAt(buffer.length() - 1) != '/') {
                                                buffer.append('/');
                                            }
                                            String ln = DOMNodePointer.getLocalName(node);
                                            String nsURI = getNamespaceURI();
                                            if (nsURI == null) {
                                                buffer.append(ln);
                                                buffer.append('[');
                                                buffer.append(getRelativePositionByName()).append(']');
                                            }
                                            else {
                                                String prefix = getNamespaceResolver().getPrefix(nsURI);
                                                if (prefix != null) {
                                                    buffer.append(prefix);
                                                    buffer.append(':');
                                                    buffer.append(ln);
                                                    buffer.append('[');
                                                    buffer.append(getRelativePositionByName());
                                                    buffer.append(']');
                                                }
                                                else {
                                                    buffer.append("node()");
                                                    buffer.append('[');
                                                    buffer.append(getRelativePositionOfElement());
                                                    buffer.append(']');
                                                }
                                            }
                                        }
                                    break;
                                    case Node.TEXT_NODE :
                                    case Node.CDATA_SECTION_NODE :
                                        buffer.append("/text()");
                                        buffer.append('[');
                                        buffer.append(getRelativePositionOfTextNode()).append(']');
                                        break;
                                    case Node.PROCESSING_INSTRUCTION_NODE :
                                        String target = ((ProcessingInstruction) node).getTarget();
                                        buffer.append("/processing-instruction(\'");
                                        buffer.append(target).append("')");
                                        buffer.append('[');
                                        buffer.append(getRelativePositionOfPI(target)).append(']');
                                        break;
                                    case Node.DOCUMENT_NODE :
                                        // That'll be empty
                                }
                    children: []
                    pos: 14939
                    length: 2360
                children: []
                pos: 14911
                length: 2388
              - type: return_statement
                fields:
                  text: return buffer.toString();
                children: []
                pos: 17308
                length: 25
              pos: 14683
              length: 2656
          children: []
          pos: 14660
          length: 2679
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: escape
              children: []
              pos: 17360
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String string
                children: []
                pos: 17367
                length: 13
              pos: 17345
              length: 603
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int index = string.indexOf('\'');
                children: []
                pos: 17392
                length: 33
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&apos;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\'');
                            }
                children: []
                pos: 17434
                length: 219
              - type: expression_statement
                fields:
                  text: index = string.indexOf('\"');
                children: []
                pos: 17662
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&quot;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\"');
                            }
                children: []
                pos: 17700
                length: 219
              - type: return_statement
                fields:
                  text: return string;
                children: []
                pos: 17928
                length: 14
              pos: 17382
              length: 566
          children: []
          pos: 17345
          length: 603
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionByName
              children: []
              pos: 17966
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17954
              length: 429
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 18004
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 18027
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.ELEMENT_NODE) {
                                    String nm = n.getNodeName();
                                    if (nm.equals(node.getNodeName())) {
                                        count++;
                                    }
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 18071
                length: 284
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 18364
                length: 13
              pos: 17994
              length: 389
          children: []
          pos: 17954
          length: 429
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionOfElement
              children: []
              pos: 18405
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18393
              length: 312
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 18446
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 18469
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.ELEMENT_NODE) {
                                    count++;
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 18513
                length: 164
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 18686
                length: 13
              pos: 18436
              length: 269
          children: []
          pos: 18393
          length: 312
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionOfTextNode
              children: []
              pos: 18723
              length: 29
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18711
              length: 372
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 18765
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 18788
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.TEXT_NODE
                                    || n.getNodeType() == Node.CDATA_SECTION_NODE) {
                                    count++;
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 18832
                length: 223
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 19064
                length: 13
              pos: 18755
              length: 328
          children: []
          pos: 18711
          length: 372
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionOfPI
              children: []
              pos: 19101
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String target
                children: []
                pos: 19125
                length: 13
              pos: 19089
              length: 409
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 19150
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 19173
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.PROCESSING_INSTRUCTION_NODE
                                    && ((ProcessingInstruction) n).getTarget().equals(target)) {
                                    count++;
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 19217
                length: 253
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 19479
                length: 13
              pos: 19140
              length: 358
          children: []
          pos: 19089
          length: 409
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hashCode
              children: []
              pos: 19515
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 19504
              length: 75
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return System.identityHashCode(node);
                children: []
                pos: 19536
                length: 37
              pos: 19526
              length: 53
          children: []
          pos: 19504
          length: 75
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 19600
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object object
                children: []
                pos: 19607
                length: 13
              pos: 19585
              length: 153
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return object == this || object instanceof DOMNodePointer
                    && node == ((DOMNodePointer) object).node;
                children: []
                pos: 19632
                length: 100
              pos: 19622
              length: 116
          children: []
          pos: 19585
          length: 153
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrefix
              children: []
              pos: 19765
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 19775
                length: 9
              pos: 19744
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String prefix = node.getPrefix();
                children: []
                pos: 19796
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: prefix
                            children: []
                            pos: 19842
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 19852
                            length: 4
                        children: []
                        pos: 19842
                        length: 14
                    children: []
                    pos: 19841
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return prefix;
                    children: []
                    pos: 19872
                    length: 14
                  pos: 19858
                  length: 38
                pos: 19838
                length: 58
              - type: local_variable_declaration
                fields:
                  text: String name = node.getNodeName();
                children: []
                pos: 19906
                length: 33
              - type: local_variable_declaration
                fields:
                  text: int index = name.lastIndexOf(':');
                children: []
                pos: 19948
                length: 34
              - type: return_statement
                fields:
                  text: 'return index < 0 ? null : name.substring(0, index);'
                children: []
                pos: 19991
                length: 51
              pos: 19786
              length: 262
          children: []
          pos: 19744
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocalName
              children: []
              pos: 20075
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 20088
                length: 9
              pos: 20054
              length: 320
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String localName = node.getLocalName();
                children: []
                pos: 20109
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: localName
                            children: []
                            pos: 20161
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 20174
                            length: 4
                        children: []
                        pos: 20161
                        length: 17
                    children: []
                    pos: 20160
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return localName;
                    children: []
                    pos: 20194
                    length: 17
                  pos: 20180
                  length: 41
                pos: 20157
                length: 64
              - type: local_variable_declaration
                fields:
                  text: String name = node.getNodeName();
                children: []
                pos: 20231
                length: 33
              - type: local_variable_declaration
                fields:
                  text: int index = name.lastIndexOf(':');
                children: []
                pos: 20273
                length: 34
              - type: return_statement
                fields:
                  text: 'return index < 0 ? name : name.substring(index + 1);'
                children: []
                pos: 20316
                length: 52
              pos: 20099
              length: 275
          children: []
          pos: 20054
          length: 320
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 20405
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 20421
                length: 9
              pos: 20384
              length: 805
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: node instanceof Document
                        children: []
                        pos: 20446
                        length: 24
                    children: []
                    pos: 20445
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: node = ((Document) node).getDocumentElement();
                    children: []
                    pos: 20486
                    length: 46
                  pos: 20472
                  length: 70
                pos: 20442
                length: 100
              - type: local_variable_declaration
                fields:
                  text: Element element = (Element) node;
                children: []
                pos: 20552
                length: 33
              - type: local_variable_declaration
                fields:
                  text: String uri = element.getNamespaceURI();
                children: []
                pos: 20595
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: uri
                            children: []
                            pos: 20647
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 20654
                            length: 4
                        children: []
                        pos: 20647
                        length: 11
                    children: []
                    pos: 20646
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return uri;
                    children: []
                    pos: 20674
                    length: 11
                  pos: 20660
                  length: 35
                pos: 20643
                length: 52
              - type: local_variable_declaration
                fields:
                  text: String prefix = getPrefix(node);
                children: []
                pos: 20705
                length: 32
              - type: local_variable_declaration
                fields:
                  text: 'String qname = prefix == null ? "xmlns" : "xmlns:" + prefix;'
                children: []
                pos: 20746
                length: 60
              - type: local_variable_declaration
                fields:
                  text: Node aNode = node;
                children: []
                pos: 20816
                length: 18
              - type: while_statement
                fields:
                  text: |-
                    while (aNode != null) {
                                if (aNode.getNodeType() == Node.ELEMENT_NODE) {
                                    Attr attr = ((Element) aNode).getAttributeNode(qname);
                                    if (attr != null) {
                                        return attr.getValue();
                                    }
                                }
                                aNode = aNode.getParentNode();
                            }
                children: []
                pos: 20843
                length: 319
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 21171
                length: 12
              pos: 20432
              length: 757
          children: []
          pos: 20384
          length: 805
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValue
              children: []
              pos: 21209
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 21195
              length: 237
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: node.getNodeType()
                            children: []
                            pos: 21234
                            length: 18
                          right:
                            type: field_access
                            fields:
                              text: Node.COMMENT_NODE
                            children: []
                            pos: 21256
                            length: 17
                        children: []
                        pos: 21234
                        length: 39
                    children: []
                    pos: 21233
                    length: 41
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String text = ((Comment) node).getData();
                    children: []
                    pos: 21289
                    length: 41
                  - type: return_statement
                    fields:
                      text: 'return text == null ? "" : text.trim();'
                    children: []
                    pos: 21343
                    length: 39
                  pos: 21275
                  length: 117
                pos: 21230
                length: 162
              - type: return_statement
                fields:
                  text: return stringValue(node);
                children: []
                pos: 21401
                length: 25
              pos: 21220
              length: 212
          children: []
          pos: 21195
          length: 237
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: stringValue
              children: []
              pos: 21453
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 21465
                length: 9
              pos: 21438
              length: 932
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int nodeType = node.getNodeType();
                children: []
                pos: 21486
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: nodeType
                            children: []
                            pos: 21533
                            length: 8
                          right:
                            type: field_access
                            fields:
                              text: Node.COMMENT_NODE
                            children: []
                            pos: 21545
                            length: 17
                        children: []
                        pos: 21533
                        length: 29
                    children: []
                    pos: 21532
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return "";
                    children: []
                    pos: 21578
                    length: 10
                  pos: 21564
                  length: 34
                pos: 21529
                length: 69
              - type: local_variable_declaration
                fields:
                  text: boolean trim = !"preserve".equals(findEnclosingAttribute(node,
                    "xml:space"));
                children: []
                pos: 21607
                length: 77
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: nodeType
                                children: []
                                pos: 21697
                                length: 8
                              right:
                                type: field_access
                                fields:
                                  text: Node.TEXT_NODE
                                children: []
                                pos: 21709
                                length: 14
                            children: []
                            pos: 21697
                            length: 26
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: nodeType
                                children: []
                                pos: 21727
                                length: 8
                              right:
                                type: field_access
                                fields:
                                  text: Node.CDATA_SECTION_NODE
                                children: []
                                pos: 21739
                                length: 23
                            children: []
                            pos: 21727
                            length: 35
                        children: []
                        pos: 21697
                        length: 65
                    children: []
                    pos: 21696
                    length: 67
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String text = node.getNodeValue();
                    children: []
                    pos: 21778
                    length: 34
                  - type: return_statement
                    fields:
                      text: 'return text == null ? "" : trim ? text.trim() : text;'
                    children: []
                    pos: 21825
                    length: 53
                  pos: 21764
                  length: 124
                pos: 21693
                length: 195
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: nodeType
                            children: []
                            pos: 21901
                            length: 8
                          right:
                            type: field_access
                            fields:
                              text: Node.PROCESSING_INSTRUCTION_NODE
                            children: []
                            pos: 21913
                            length: 32
                        children: []
                        pos: 21901
                        length: 44
                    children: []
                    pos: 21900
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String text = ((ProcessingInstruction) node).getData();
                    children: []
                    pos: 21961
                    length: 55
                  - type: return_statement
                    fields:
                      text: 'return text == null ? "" : trim ? text.trim() : text;'
                    children: []
                    pos: 22029
                    length: 53
                  pos: 21947
                  length: 145
                pos: 21897
                length: 195
              - type: local_variable_declaration
                fields:
                  text: NodeList list = node.getChildNodes();
                children: []
                pos: 22101
                length: 37
              - type: local_variable_declaration
                fields:
                  text: StringBuffer buf = new StringBuffer(16);
                children: []
                pos: 22147
                length: 40
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < list.getLength(); i++) {
                                Node child = list.item(i);
                                buf.append(stringValue(child));
                            }
                children: []
                pos: 22196
                length: 137
              - type: return_statement
                fields:
                  text: return buf.toString();
                children: []
                pos: 22342
                length: 22
              pos: 21476
              length: 894
          children: []
          pos: 21438
          length: 932
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPointerByID
              children: []
              pos: 22436
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 22451
                length: 21
              pos: 22421
              length: 396
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: |-
                    Document document = node.getNodeType() == Node.DOCUMENT_NODE ? (Document) node
                                    : node.getOwnerDocument();
                children: []
                pos: 22495
                length: 121
              - type: local_variable_declaration
                fields:
                  text: Element element = document.getElementById(id);
                children: []
                pos: 22625
                length: 46
              - type: return_statement
                fields:
                  text: |-
                    return element == null ? (Pointer) new NullPointer(getLocale(), id)
                                    : new DOMNodePointer(element, getLocale(), id);
                children: []
                pos: 22680
                length: 131
              pos: 22485
              length: 332
          children: []
          pos: 22421
          length: 396
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getAbstractFactory
              children: []
              pos: 22847
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 22866
                length: 21
              pos: 22823
              length: 372
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: AbstractFactory factory = context.getFactory();
                children: []
                pos: 22899
                length: 47
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: factory
                            children: []
                            pos: 22959
                            length: 7
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 22970
                            length: 4
                        children: []
                        pos: 22959
                        length: 15
                    children: []
                    pos: 22958
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new JXPathException(
                                        "Factory is not set on the JXPathContext - "
                                            + "cannot create path: "
                                            + asPath());
                    children: []
                    pos: 22990
                    length: 165
                  pos: 22976
                  length: 189
                pos: 22955
                length: 210
              - type: return_statement
                fields:
                  text: return factory;
                children: []
                pos: 23174
                length: 15
              pos: 22889
              length: 306
          children: []
          pos: 22823
          length: 372
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareChildNodePointers
              children: []
              pos: 23212
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer pointer1
                children: []
                pos: 23250
                length: 20
              pos: 23201
              length: 1359
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Node node1 = (Node) pointer1.getBaseValue();
                children: []
                pos: 23308
                length: 44
              - type: local_variable_declaration
                fields:
                  text: Node node2 = (Node) pointer2.getBaseValue();
                children: []
                pos: 23361
                length: 44
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: node1
                            children: []
                            pos: 23418
                            length: 5
                          right:
                            type: identifier
                            fields:
                              text: node2
                            children: []
                            pos: 23427
                            length: 5
                        children: []
                        pos: 23418
                        length: 14
                    children: []
                    pos: 23417
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 23448
                    length: 9
                  pos: 23434
                  length: 33
                pos: 23414
                length: 53
              - type: local_variable_declaration
                fields:
                  text: int t1 = node1.getNodeType();
                children: []
                pos: 23477
                length: 29
              - type: local_variable_declaration
                fields:
                  text: int t2 = node2.getNodeType();
                children: []
                pos: 23515
                length: 29
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t1
                                children: []
                                pos: 23557
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23563
                                length: 19
                            children: []
                            pos: 23557
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t2
                                children: []
                                pos: 23586
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23592
                                length: 19
                            children: []
                            pos: 23586
                            length: 25
                        children: []
                        pos: 23557
                        length: 54
                    children: []
                    pos: 23556
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return -1;
                    children: []
                    pos: 23627
                    length: 10
                  pos: 23613
                  length: 34
                pos: 23553
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t1
                                children: []
                                pos: 23660
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23666
                                length: 19
                            children: []
                            pos: 23660
                            length: 25
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t2
                                children: []
                                pos: 23689
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23695
                                length: 19
                            children: []
                            pos: 23689
                            length: 25
                        children: []
                        pos: 23660
                        length: 54
                    children: []
                    pos: 23659
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 1;
                    children: []
                    pos: 23730
                    length: 9
                  pos: 23716
                  length: 33
                pos: 23656
                length: 93
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t1
                                children: []
                                pos: 23762
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23768
                                length: 19
                            children: []
                            pos: 23762
                            length: 25
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t2
                                children: []
                                pos: 23791
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23797
                                length: 19
                            children: []
                            pos: 23791
                            length: 25
                        children: []
                        pos: 23762
                        length: 54
                    children: []
                    pos: 23761
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: NamedNodeMap map = ((Node) getNode()).getAttributes();
                    children: []
                    pos: 23832
                    length: 54
                  - type: local_variable_declaration
                    fields:
                      text: int length = map.getLength();
                    children: []
                    pos: 23899
                    length: 29
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < length; i++) {
                                        Node n = map.item(i);
                                        if (n == node1) {
                                            return -1;
                                        }
                                        if (n == node2) {
                                            return 1;
                                        }
                                    }
                    children: []
                    pos: 23941
                    length: 251
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 24205
                    length: 9
                  pos: 23818
                  length: 427
                pos: 23758
                length: 487
              - type: local_variable_declaration
                fields:
                  text: Node current = node.getFirstChild();
                children: []
                pos: 24255
                length: 36
              - type: while_statement
                fields:
                  text: |-
                    while (current != null) {
                                if (current == node1) {
                                    return -1;
                                }
                                if (current == node2) {
                                    return 1;
                                }
                                current = current.getNextSibling();
                            }
                children: []
                pos: 24300
                length: 236
              - type: return_statement
                fields:
                  text: return 0;
                children: []
                pos: 24545
                length: 9
              pos: 23298
              length: 1262
          children: []
          pos: 23201
          length: 1359
        pos: 2084
        length: 22478
    children: []
    pos: 2084
    length: 22478
  pos: 0
  length: 24563
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DOMNodePointer
        children: []
        pos: 2097
        length: 14
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = -8751046933894857319L;
          children: []
          pos: 2139
          length: 67
        - type: field_declaration
          fields:
            text: private Node node;
          children: []
          pos: 2216
          length: 18
        - type: field_declaration
          fields:
            text: private Map namespaces;
          children: []
          pos: 2239
          length: 23
        - type: field_declaration
          fields:
            text: private String defaultNamespace;
          children: []
          pos: 2267
          length: 32
        - type: field_declaration
          fields:
            text: private String id;
          children: []
          pos: 2304
          length: 18
        - type: field_declaration
          fields:
            text: "public static final String XML_NAMESPACE_URI = \n            \"http://www.w3.org/XML/1998/namespace\";"
          children: []
          pos: 2328
          length: 99
        - type: field_declaration
          fields:
            text: "public static final String XMLNS_NAMESPACE_URI = \n            \"http://www.w3.org/2000/xmlns/\";"
          children: []
          pos: 2432
          length: 94
        - type: constructor_declaration
          fields:
            text: |-
              public DOMNodePointer(Node node, Locale locale) {
                      super(null, locale);
                      this.node = node;
                  }
          children: []
          pos: 2532
          length: 110
        - type: constructor_declaration
          fields:
            text: |-
              public DOMNodePointer(Node node, Locale locale, String id) {
                      super(null, locale);
                      this.node = node;
                      this.id = id;
                  }
          children: []
          pos: 2648
          length: 143
        - type: constructor_declaration
          fields:
            text: |-
              public DOMNodePointer(NodePointer parent, Node node) {
                      super(parent);
                      this.node = node;
                  }
          children: []
          pos: 2797
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: testNode
              children: []
              pos: 2931
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 2940
                length: 13
              pos: 2916
              length: 83
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return testNode(node, test);
                children: []
                pos: 2965
                length: 28
              pos: 2955
              length: 44
          children: []
          pos: 2916
          length: 83
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: testNode
              children: []
              pos: 3027
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 3036
                length: 9
              pos: 3005
              length: 2113
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: test
                            children: []
                            pos: 3076
                            length: 4
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3084
                            length: 4
                        children: []
                        pos: 3076
                        length: 12
                    children: []
                    pos: 3075
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 3104
                    length: 12
                  pos: 3090
                  length: 36
                pos: 3072
                length: 54
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof NodeNameTest
                        children: []
                        pos: 3139
                        length: 28
                    children: []
                    pos: 3138
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 3187
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.ELEMENT_NODE
                                children: []
                                pos: 3209
                                length: 17
                            children: []
                            pos: 3187
                            length: 39
                        children: []
                        pos: 3186
                        length: 41
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return false;
                        children: []
                        pos: 3246
                        length: 13
                      pos: 3228
                      length: 45
                    pos: 3183
                    length: 90
                  - type: local_variable_declaration
                    fields:
                      text: NodeNameTest nodeNameTest = (NodeNameTest) test;
                    children: []
                    pos: 3287
                    length: 48
                  - type: local_variable_declaration
                    fields:
                      text: QName testName = nodeNameTest.getNodeName();
                    children: []
                    pos: 3348
                    length: 44
                  - type: local_variable_declaration
                    fields:
                      text: String namespaceURI = nodeNameTest.getNamespaceURI();
                    children: []
                    pos: 3405
                    length: 53
                  - type: local_variable_declaration
                    fields:
                      text: boolean wildcard = nodeNameTest.isWildcard();
                    children: []
                    pos: 3471
                    length: 45
                  - type: local_variable_declaration
                    fields:
                      text: String testPrefix = testName.getPrefix();
                    children: []
                    pos: 3529
                    length: 41
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: wildcard
                                children: []
                                pos: 3587
                                length: 8
                              right:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: testPrefix
                                    children: []
                                    pos: 3599
                                    length: 10
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 3613
                                    length: 4
                                children: []
                                pos: 3599
                                length: 18
                            children: []
                            pos: 3587
                            length: 30
                        children: []
                        pos: 3586
                        length: 32
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return true;
                        children: []
                        pos: 3637
                        length: 12
                      pos: 3619
                      length: 44
                    pos: 3583
                    length: 80
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: wildcard
                                children: []
                                pos: 3680
                                length: 8
                              right:
                                type: method_invocation
                                fields:
                                  text: |-
                                    testName.getName()
                                                            .equals(DOMNodePointer.getLocalName(node))
                                children: []
                                pos: 3708
                                length: 85
                            children: []
                            pos: 3680
                            length: 113
                        children: []
                        pos: 3679
                        length: 115
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String nodeNS = DOMNodePointer.getNamespaceURI(node);
                        children: []
                        pos: 3813
                        length: 53
                      - type: return_statement
                        fields:
                          text: return equalStrings(namespaceURI, nodeNS);
                        children: []
                        pos: 3883
                        length: 42
                      pos: 3795
                      length: 144
                    pos: 3676
                    length: 263
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 3952
                    length: 13
                  pos: 3169
                  length: 806
                pos: 3135
                length: 840
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof NodeTypeTest
                        children: []
                        pos: 3988
                        length: 28
                    children: []
                    pos: 3987
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int nodeType = node.getNodeType();
                    children: []
                    pos: 4032
                    length: 34
                  - type: switch_expression
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: "((NodeTypeTest) test).getNodeType()"
                            children: []
                            pos: 4087
                            length: 35
                        children: []
                        pos: 4086
                        length: 37
                      body:
                        type: switch_block
                        fields:
                          text: |-
                            {
                                            case Compiler.NODE_TYPE_NODE :
                                                return nodeType == Node.ELEMENT_NODE
                                                        || nodeType == Node.DOCUMENT_NODE;
                                            case Compiler.NODE_TYPE_TEXT :
                                                return nodeType == Node.CDATA_SECTION_NODE
                                                    || nodeType == Node.TEXT_NODE;
                                            case Compiler.NODE_TYPE_COMMENT :
                                                return nodeType == Node.COMMENT_NODE;
                                            case Compiler.NODE_TYPE_PI :
                                                return nodeType == Node.PROCESSING_INSTRUCTION_NODE;
                                        }
                        children: []
                        pos: 4124
                        length: 573
                    children: []
                    pos: 4079
                    length: 618
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 4710
                    length: 13
                  pos: 4018
                  length: 715
                pos: 3984
                length: 749
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: test instanceof ProcessingInstructionTest
                        children: []
                        pos: 4746
                        length: 41
                    children: []
                    pos: 4745
                    length: 43
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 4807
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.PROCESSING_INSTRUCTION_NODE
                                children: []
                                pos: 4829
                                length: 32
                            children: []
                            pos: 4807
                            length: 54
                        children: []
                        pos: 4806
                        length: 56
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: local_variable_declaration
                        fields:
                          text: String testPI = ((ProcessingInstructionTest) test).getTarget();
                        children: []
                        pos: 4881
                        length: 63
                      - type: local_variable_declaration
                        fields:
                          text: String nodePI = ((ProcessingInstruction) node).getTarget();
                        children: []
                        pos: 4961
                        length: 59
                      - type: return_statement
                        fields:
                          text: return testPI.equals(nodePI);
                        children: []
                        pos: 5037
                        length: 29
                      pos: 4863
                      length: 217
                    pos: 4803
                    length: 277
                  pos: 4789
                  length: 301
                pos: 4742
                length: 348
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 5099
                length: 13
              pos: 3062
              length: 2056
          children: []
          pos: 3005
          length: 2113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equalStrings
              children: []
              pos: 5147
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String s1
                children: []
                pos: 5160
                length: 9
              pos: 5124
              length: 238
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: s1
                            children: []
                            pos: 5196
                            length: 2
                          right:
                            type: identifier
                            fields:
                              text: s2
                            children: []
                            pos: 5202
                            length: 2
                        children: []
                        pos: 5196
                        length: 8
                    children: []
                    pos: 5195
                    length: 10
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 5220
                    length: 12
                  pos: 5206
                  length: 36
                pos: 5192
                length: 50
              - type: expression_statement
                fields:
                  text: 's1 = s1 == null ? "" : s1.trim();'
                children: []
                pos: 5251
                length: 33
              - type: expression_statement
                fields:
                  text: 's2 = s2 == null ? "" : s2.trim();'
                children: []
                pos: 5293
                length: 33
              - type: return_statement
                fields:
                  text: return s1.equals(s2);
                children: []
                pos: 5335
                length: 21
              pos: 5182
              length: 180
          children: []
          pos: 5124
          length: 238
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getName
              children: []
              pos: 5381
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5368
              length: 439
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String ln = null;
                children: []
                pos: 5401
                length: 17
              - type: local_variable_declaration
                fields:
                  text: String ns = null;
                children: []
                pos: 5427
                length: 17
              - type: local_variable_declaration
                fields:
                  text: int type = node.getNodeType();
                children: []
                pos: 5453
                length: 30
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: type
                            children: []
                            pos: 5496
                            length: 4
                          right:
                            type: field_access
                            fields:
                              text: Node.ELEMENT_NODE
                            children: []
                            pos: 5504
                            length: 17
                        children: []
                        pos: 5496
                        length: 25
                    children: []
                    pos: 5495
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: ns = DOMNodePointer.getPrefix(node);
                    children: []
                    pos: 5537
                    length: 36
                  - type: expression_statement
                    fields:
                      text: ln = DOMNodePointer.getLocalName(node);
                    children: []
                    pos: 5586
                    length: 39
                  pos: 5523
                  length: 112
                pos: 5492
                length: 275
              - type: return_statement
                fields:
                  text: return new QName(ns, ln);
                children: []
                pos: 5776
                length: 25
              pos: 5391
              length: 416
          children: []
          pos: 5368
          length: 439
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 5827
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 5813
              length: 77
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getNamespaceURI(node);
                children: []
                pos: 5855
                length: 29
              pos: 5845
              length: 45
          children: []
          pos: 5813
          length: 77
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: childIterator
              children: []
              pos: 5916
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodeTest test
                children: []
                pos: 5939
                length: 13
              pos: 5896
              length: 194
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new DOMNodeIterator(this, test, reverse, startWith);
                children: []
                pos: 6025
                length: 59
              pos: 6015
              length: 75
          children: []
          pos: 5896
          length: 194
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: attributeIterator
              children: []
              pos: 6116
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: QName name
                children: []
                pos: 6134
                length: 10
              pos: 6096
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new DOMAttributeIterator(this, name);
                children: []
                pos: 6156
                length: 44
              pos: 6146
              length: 60
          children: []
          pos: 6096
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespacePointer
              children: []
              pos: 6231
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 6248
                length: 13
              pos: 6212
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new NamespacePointer(this, prefix);
                children: []
                pos: 6273
                length: 42
              pos: 6263
              length: 58
          children: []
          pos: 6212
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: namespaceIterator
              children: []
              pos: 6347
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6327
              length: 94
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new DOMNamespaceIterator(this);
                children: []
                pos: 6377
                length: 38
              pos: 6367
              length: 54
          children: []
          pos: 6327
          length: 94
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 6441
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String prefix
                children: []
                pos: 6457
                length: 13
              pos: 6427
              length: 1545
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: prefix
                                children: []
                                pos: 6486
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 6496
                                length: 4
                            children: []
                            pos: 6486
                            length: 14
                          right:
                            type: method_invocation
                            fields:
                              text: prefix.equals("")
                            children: []
                            pos: 6504
                            length: 17
                        children: []
                        pos: 6486
                        length: 35
                    children: []
                    pos: 6485
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return getDefaultNamespaceURI();
                    children: []
                    pos: 6537
                    length: 32
                  pos: 6523
                  length: 56
                pos: 6482
                length: 97
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: prefix.equals("xml")
                        children: []
                        pos: 6593
                        length: 20
                    children: []
                    pos: 6592
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return XML_NAMESPACE_URI;
                    children: []
                    pos: 6629
                    length: 25
                  pos: 6615
                  length: 49
                pos: 6589
                length: 75
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: prefix.equals("xmlns")
                        children: []
                        pos: 6678
                        length: 22
                    children: []
                    pos: 6677
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return XMLNS_NAMESPACE_URI;
                    children: []
                    pos: 6716
                    length: 27
                  pos: 6702
                  length: 51
                pos: 6674
                length: 79
              - type: local_variable_declaration
                fields:
                  text: String namespace = null;
                children: []
                pos: 6763
                length: 24
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: namespaces
                            children: []
                            pos: 6800
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6814
                            length: 4
                        children: []
                        pos: 6800
                        length: 18
                    children: []
                    pos: 6799
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: namespaces = new HashMap();
                    children: []
                    pos: 6834
                    length: 27
                  pos: 6820
                  length: 51
                pos: 6796
                length: 157
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: namespace
                            children: []
                            pos: 6967
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6980
                            length: 4
                        children: []
                        pos: 6967
                        length: 17
                    children: []
                    pos: 6966
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String qname = "xmlns:" + prefix;
                    children: []
                    pos: 7000
                    length: 33
                  - type: local_variable_declaration
                    fields:
                      text: Node aNode = node;
                    children: []
                    pos: 7046
                    length: 18
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: instanceof_expression
                            fields:
                              text: aNode instanceof Document
                            children: []
                            pos: 7081
                            length: 25
                        children: []
                        pos: 7080
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: aNode = ((Document)aNode).getDocumentElement();
                        children: []
                        pos: 7126
                        length: 47
                      pos: 7108
                      length: 79
                    pos: 7077
                    length: 110
                  - type: while_statement
                    fields:
                      text: |-
                        while (aNode != null) {
                                        if (aNode.getNodeType() == Node.ELEMENT_NODE) {
                                            Attr attr = ((Element) aNode).getAttributeNode(qname);
                                            if (attr != null) {
                                                namespace = attr.getValue();
                                                break;
                                            }
                                        }
                                        aNode = aNode.getParentNode();
                                    }
                    children: []
                    pos: 7200
                    length: 387
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: namespace
                                    children: []
                                    pos: 7604
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 7617
                                    length: 4
                                children: []
                                pos: 7604
                                length: 17
                              right:
                                type: method_invocation
                                fields:
                                  text: namespace.equals("")
                                children: []
                                pos: 7625
                                length: 20
                            children: []
                            pos: 7604
                            length: 41
                        children: []
                        pos: 7603
                        length: 43
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: namespace = NodePointer.UNKNOWN_NAMESPACE;
                        children: []
                        pos: 7665
                        length: 42
                      pos: 7647
                      length: 74
                    pos: 7600
                    length: 121
                  pos: 6986
                  length: 745
                pos: 6963
                length: 768
              - type: expression_statement
                fields:
                  text: namespaces.put(prefix, namespace);
                children: []
                pos: 7741
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: namespace
                            children: []
                            pos: 7788
                            length: 9
                          right:
                            type: identifier
                            fields:
                              text: UNKNOWN_NAMESPACE
                            children: []
                            pos: 7801
                            length: 17
                        children: []
                        pos: 7788
                        length: 30
                    children: []
                    pos: 7787
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 7834
                    length: 12
                  pos: 7820
                  length: 36
                pos: 7784
                length: 72
              - type: return_statement
                fields:
                  text: return namespace;
                children: []
                pos: 7949
                length: 17
              pos: 6472
              length: 1500
          children: []
          pos: 6427
          length: 1545
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getDefaultNamespaceURI
              children: []
              pos: 7992
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7978
              length: 890
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaultNamespace
                            children: []
                            pos: 8031
                            length: 16
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8051
                            length: 4
                        children: []
                        pos: 8031
                        length: 24
                    children: []
                    pos: 8030
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Node aNode = node;
                    children: []
                    pos: 8071
                    length: 18
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: instanceof_expression
                            fields:
                              text: aNode instanceof Document
                            children: []
                            pos: 8106
                            length: 25
                        children: []
                        pos: 8105
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: aNode = ((Document) aNode).getDocumentElement();
                        children: []
                        pos: 8151
                        length: 48
                      pos: 8133
                      length: 80
                    pos: 8102
                    length: 111
                  - type: while_statement
                    fields:
                      text: |-
                        while (aNode != null) {
                                        if (aNode.getNodeType() == Node.ELEMENT_NODE) {
                                            Attr attr = ((Element) aNode).getAttributeNode("xmlns");
                                            if (attr != null) {
                                                defaultNamespace = attr.getValue();
                                                break;
                                            }
                                        }
                                        aNode = aNode.getParentNode();
                                    }
                    children: []
                    pos: 8226
                    length: 396
                  pos: 8057
                  length: 575
                pos: 8027
                length: 605
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: defaultNamespace
                            children: []
                            pos: 8645
                            length: 16
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8665
                            length: 4
                        children: []
                        pos: 8645
                        length: 24
                    children: []
                    pos: 8644
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: defaultNamespace = "";
                    children: []
                    pos: 8685
                    length: 22
                  pos: 8671
                  length: 46
                pos: 8641
                length: 76
              - type: return_statement
                fields:
                  text: 'return defaultNamespace.equals("") ? null : defaultNamespace;'
                children: []
                pos: 8801
                length: 61
              pos: 8017
              length: 851
          children: []
          pos: 7978
          length: 890
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getBaseValue
              children: []
              pos: 8888
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8874
              length: 57
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return node;
                children: []
                pos: 8913
                length: 12
              pos: 8903
              length: 28
          children: []
          pos: 8874
          length: 57
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getImmediateNode
              children: []
              pos: 8951
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8937
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return node;
                children: []
                pos: 8980
                length: 12
              pos: 8970
              length: 28
          children: []
          pos: 8937
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isActual
              children: []
              pos: 9019
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9004
              length: 54
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return true;
                children: []
                pos: 9040
                length: 12
              pos: 9030
              length: 28
          children: []
          pos: 9004
          length: 54
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isCollection
              children: []
              pos: 9079
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9064
              length: 59
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 9104
                length: 13
              pos: 9094
              length: 29
          children: []
          pos: 9064
          length: 59
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLength
              children: []
              pos: 9140
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9129
              length: 48
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 1;
                children: []
                pos: 9162
                length: 9
              pos: 9152
              length: 25
          children: []
          pos: 9129
          length: 48
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLeaf
              children: []
              pos: 9198
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9183
              length: 69
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !node.hasChildNodes();
                children: []
                pos: 9217
                length: 29
              pos: 9207
              length: 45
          children: []
          pos: 9183
          length: 69
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLanguage
              children: []
              pos: 9493
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String lang
                children: []
                pos: 9504
                length: 11
              pos: 9478
              length: 214
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String current = getLanguage();
                children: []
                pos: 9527
                length: 31
              - type: return_statement
                fields:
                  text: |-
                    return current == null ? super.isLanguage(lang)
                                    : current.toUpperCase().startsWith(lang.toUpperCase());
                children: []
                pos: 9567
                length: 119
              pos: 9517
              length: 175
          children: []
          pos: 9478
          length: 214
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: findEnclosingAttribute
              children: []
              pos: 9722
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node n
                children: []
                pos: 9745
                length: 6
              pos: 9698
              length: 447
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.ELEMENT_NODE) {
                                    Element e = (Element) n;
                                    String attr = e.getAttribute(attrName);
                                    if (attr != null && !attr.equals("")) {
                                        return attr;
                                    }
                                }
                                n = n.getParentNode();
                            }
                children: []
                pos: 9780
                length: 338
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 10127
                length: 12
              pos: 9770
              length: 375
          children: []
          pos: 9698
          length: 447
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLanguage
              children: []
              pos: 10168
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 10151
              length: 95
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return findEnclosingAttribute(node, "xml:lang");
                children: []
                pos: 10192
                length: 48
              pos: 10182
              length: 64
          children: []
          pos: 10151
          length: 95
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: setValue
              children: []
              pos: 10554
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object value
                children: []
                pos: 10563
                length: 12
              pos: 10542
              length: 1665
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 10591
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.TEXT_NODE
                                children: []
                                pos: 10613
                                length: 14
                            children: []
                            pos: 10591
                            length: 36
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: node.getNodeType()
                                children: []
                                pos: 10643
                                length: 18
                              right:
                                type: field_access
                                fields:
                                  text: Node.CDATA_SECTION_NODE
                                children: []
                                pos: 10665
                                length: 23
                            children: []
                            pos: 10643
                            length: 45
                        children: []
                        pos: 10591
                        length: 97
                    children: []
                    pos: 10590
                    length: 99
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String string = (String) TypeUtils.convert(value, String.class);
                    children: []
                    pos: 10704
                    length: 64
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: string
                                    children: []
                                    pos: 10785
                                    length: 6
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 10795
                                    length: 4
                                children: []
                                pos: 10785
                                length: 14
                              right:
                                type: unary_expression
                                fields:
                                  text: '!string.equals("")'
                                children: []
                                pos: 10803
                                length: 18
                            children: []
                            pos: 10785
                            length: 36
                        children: []
                        pos: 10784
                        length: 38
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: node.setNodeValue(string);
                        children: []
                        pos: 10841
                        length: 26
                      pos: 10823
                      length: 58
                    pos: 10781
                    length: 189
                  pos: 10690
                  length: 290
                pos: 10587
                length: 1614
              pos: 10577
              length: 1630
          children: []
          pos: 10542
          length: 1665
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 12236
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 12257
                length: 21
              pos: 12217
              length: 1052
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: index
                            children: []
                            pos: 12338
                            length: 5
                          right:
                            type: identifier
                            fields:
                              text: WHOLE_COLLECTION
                            children: []
                            pos: 12347
                            length: 16
                        children: []
                        pos: 12338
                        length: 25
                    children: []
                    pos: 12337
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: index = 0;
                    children: []
                    pos: 12379
                    length: 10
                  pos: 12365
                  length: 34
                pos: 12334
                length: 65
              - type: local_variable_declaration
                fields:
                  text: |-
                    boolean success =
                                getAbstractFactory(context).createObject(
                                    context,
                                    this,
                                    node,
                                    name.toString(),
                                    index);
                children: []
                pos: 12408
                length: 197
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: success
                        children: []
                        pos: 12618
                        length: 7
                    children: []
                    pos: 12617
                    length: 9
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: NodeTest nodeTest;
                    children: []
                    pos: 12641
                    length: 18
                  - type: local_variable_declaration
                    fields:
                      text: String prefix = name.getPrefix();
                    children: []
                    pos: 12672
                    length: 33
                  - type: local_variable_declaration
                    fields:
                      text: "String namespaceURI = prefix == null ? null : \n                context.getNamespaceURI(prefix);"
                    children: []
                    pos: 12718
                    length: 95
                  - type: expression_statement
                    fields:
                      text: nodeTest = new NodeNameTest(name, namespaceURI);
                    children: []
                    pos: 12826
                    length: 48
                  - type: local_variable_declaration
                    fields:
                      text: NodeIterator it = childIterator(nodeTest, false, null);
                    children: []
                    pos: 12888
                    length: 55
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: and
                            fields:
                              left:
                                type: not_equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: it
                                    children: []
                                    pos: 12960
                                    length: 2
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 12966
                                    length: 4
                                children: []
                                pos: 12960
                                length: 10
                              right:
                                type: method_invocation
                                fields:
                                  text: it.setPosition(index + 1)
                                children: []
                                pos: 12974
                                length: 25
                            children: []
                            pos: 12960
                            length: 39
                        children: []
                        pos: 12959
                        length: 41
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return it.getNodePointer();
                        children: []
                        pos: 13019
                        length: 27
                      pos: 13001
                      length: 59
                    pos: 12956
                    length: 104
                  pos: 12627
                  length: 443
                pos: 12614
                length: 456
              - type: throw_statement
                fields:
                  text: |-
                    throw new JXPathAbstractFactoryException(
                                    "Factory could not create a child node for path: " + asPath()
                                            + "/" + name + "[" + (index + 1) + "]");
                children: []
                pos: 13079
                length: 184
              pos: 12324
              length: 945
          children: []
          pos: 12217
          length: 1052
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createChild
              children: []
              pos: 13294
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13306
                length: 21
              pos: 13275
              length: 229
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: NodePointer ptr = createChild(context, name, index);
                children: []
                pos: 13397
                length: 52
              - type: expression_statement
                fields:
                  text: ptr.setValue(value);
                children: []
                pos: 13458
                length: 20
              - type: return_statement
                fields:
                  text: return ptr;
                children: []
                pos: 13487
                length: 11
              pos: 13387
              length: 117
          children: []
          pos: 13275
          length: 229
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createAttribute
              children: []
              pos: 13529
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 13545
                length: 21
              pos: 13510
              length: 835
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!(node instanceof Element)"
                        children: []
                        pos: 13594
                        length: 26
                    children: []
                    pos: 13593
                    length: 28
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.createAttribute(context, name);
                    children: []
                    pos: 13636
                    length: 44
                  pos: 13622
                  length: 68
                pos: 13590
                length: 100
              - type: local_variable_declaration
                fields:
                  text: Element element = (Element) node;
                children: []
                pos: 13699
                length: 33
              - type: local_variable_declaration
                fields:
                  text: String prefix = name.getPrefix();
                children: []
                pos: 13741
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: prefix
                            children: []
                            pos: 13787
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 13797
                            length: 4
                        children: []
                        pos: 13787
                        length: 14
                    children: []
                    pos: 13786
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String ns = getNamespaceURI(prefix);
                    children: []
                    pos: 13817
                    length: 36
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: ns
                                children: []
                                pos: 13870
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 13876
                                length: 4
                            children: []
                            pos: 13870
                            length: 10
                        children: []
                        pos: 13869
                        length: 12
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: throw_statement
                        fields:
                          text: |-
                            throw new JXPathException(
                                                "Unknown namespace prefix: " + prefix);
                        children: []
                        pos: 13900
                        length: 86
                      pos: 13882
                      length: 118
                    pos: 13866
                    length: 134
                  - type: expression_statement
                    fields:
                      text: element.setAttributeNS(ns, name.toString(), "");
                    children: []
                    pos: 14013
                    length: 48
                  pos: 13803
                  length: 268
                pos: 13783
                length: 442
              - type: local_variable_declaration
                fields:
                  text: NodeIterator it = attributeIterator(name);
                children: []
                pos: 14234
                length: 42
              - type: expression_statement
                fields:
                  text: it.setPosition(1);
                children: []
                pos: 14285
                length: 18
              - type: return_statement
                fields:
                  text: return it.getNodePointer();
                children: []
                pos: 14312
                length: 27
              pos: 13580
              length: 765
          children: []
          pos: 13510
          length: 835
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: remove
              children: []
              pos: 14363
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14351
              length: 216
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Node parent = node.getParentNode();
                children: []
                pos: 14382
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 14430
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14440
                            length: 4
                        children: []
                        pos: 14430
                        length: 14
                    children: []
                    pos: 14429
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new JXPathException("Cannot remove root DOM node");
                    children: []
                    pos: 14460
                    length: 57
                  pos: 14446
                  length: 81
                pos: 14426
                length: 101
              - type: expression_statement
                fields:
                  text: parent.removeChild(node);
                children: []
                pos: 14536
                length: 25
              pos: 14372
              length: 195
          children: []
          pos: 14351
          length: 216
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: asPath
              children: []
              pos: 14587
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14573
              length: 2679
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: id
                            children: []
                            pos: 14610
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14616
                            length: 4
                        children: []
                        pos: 14610
                        length: 10
                    children: []
                    pos: 14609
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return "id('" + escape(id) + "')";
                    children: []
                    pos: 14636
                    length: 34
                  pos: 14622
                  length: 58
                pos: 14606
                length: 74
              - type: local_variable_declaration
                fields:
                  text: StringBuffer buffer = new StringBuffer();
                children: []
                pos: 14690
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 14744
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14754
                            length: 4
                        children: []
                        pos: 14744
                        length: 14
                    children: []
                    pos: 14743
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: buffer.append(parent.asPath());
                    children: []
                    pos: 14774
                    length: 31
                  pos: 14760
                  length: 55
                pos: 14740
                length: 75
              - type: switch_expression
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: node.getNodeType()
                        children: []
                        pos: 14832
                        length: 18
                    children: []
                    pos: 14831
                    length: 20
                  body:
                    type: switch_block
                    fields:
                      text: |-
                        {
                                    case Node.ELEMENT_NODE :
                                        // If the parent pointer is not a DOMNodePointer, it is
                                        // the parent's responsibility to produce the node test part
                                        // of the path
                                        if (parent instanceof DOMNodePointer) {
                                            if (buffer.length() == 0
                                                    || buffer.charAt(buffer.length() - 1) != '/') {
                                                buffer.append('/');
                                            }
                                            String ln = DOMNodePointer.getLocalName(node);
                                            String nsURI = getNamespaceURI();
                                            if (nsURI == null) {
                                                buffer.append(ln);
                                                buffer.append('[');
                                                buffer.append(getRelativePositionByName()).append(']');
                                            }
                                            else {
                                                String prefix = getNamespaceResolver().getPrefix(nsURI);
                                                if (prefix != null) {
                                                    buffer.append(prefix);
                                                    buffer.append(':');
                                                    buffer.append(ln);
                                                    buffer.append('[');
                                                    buffer.append(getRelativePositionByName());
                                                    buffer.append(']');
                                                }
                                                else {
                                                    buffer.append("node()");
                                                    buffer.append('[');
                                                    buffer.append(getRelativePositionOfElement());
                                                    buffer.append(']');
                                                }
                                            }
                                        }
                                    break;
                                    case Node.TEXT_NODE :
                                    case Node.CDATA_SECTION_NODE :
                                        buffer.append("/text()");
                                        buffer.append('[');
                                        buffer.append(getRelativePositionOfTextNode()).append(']');
                                        break;
                                    case Node.PROCESSING_INSTRUCTION_NODE :
                                        String target = ((ProcessingInstruction) node).getTarget();
                                        buffer.append("/processing-instruction(\'");
                                        buffer.append(target).append("')");
                                        buffer.append('[');
                                        buffer.append(getRelativePositionOfPI(target)).append(']');
                                        break;
                                    case Node.DOCUMENT_NODE :
                                        // That'll be empty
                                }
                    children: []
                    pos: 14852
                    length: 2360
                children: []
                pos: 14824
                length: 2388
              - type: return_statement
                fields:
                  text: return buffer.toString();
                children: []
                pos: 17221
                length: 25
              pos: 14596
              length: 2656
          children: []
          pos: 14573
          length: 2679
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: escape
              children: []
              pos: 17273
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String string
                children: []
                pos: 17280
                length: 13
              pos: 17258
              length: 603
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int index = string.indexOf('\'');
                children: []
                pos: 17305
                length: 33
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&apos;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\'');
                            }
                children: []
                pos: 17347
                length: 219
              - type: expression_statement
                fields:
                  text: index = string.indexOf('\"');
                children: []
                pos: 17575
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (index != -1) {
                                string =
                                    string.substring(0, index)
                                        + "&quot;"
                                        + string.substring(index + 1);
                                index = string.indexOf('\"');
                            }
                children: []
                pos: 17613
                length: 219
              - type: return_statement
                fields:
                  text: return string;
                children: []
                pos: 17841
                length: 14
              pos: 17295
              length: 566
          children: []
          pos: 17258
          length: 603
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionByName
              children: []
              pos: 17879
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 17867
              length: 429
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 17917
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 17940
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.ELEMENT_NODE) {
                                    String nm = n.getNodeName();
                                    if (nm.equals(node.getNodeName())) {
                                        count++;
                                    }
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 17984
                length: 284
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 18277
                length: 13
              pos: 17907
              length: 389
          children: []
          pos: 17867
          length: 429
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionOfElement
              children: []
              pos: 18318
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18306
              length: 312
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 18359
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 18382
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.ELEMENT_NODE) {
                                    count++;
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 18426
                length: 164
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 18599
                length: 13
              pos: 18349
              length: 269
          children: []
          pos: 18306
          length: 312
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionOfTextNode
              children: []
              pos: 18636
              length: 29
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 18624
              length: 372
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 18678
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 18701
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.TEXT_NODE
                                    || n.getNodeType() == Node.CDATA_SECTION_NODE) {
                                    count++;
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 18745
                length: 223
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 18977
                length: 13
              pos: 18668
              length: 328
          children: []
          pos: 18624
          length: 372
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getRelativePositionOfPI
              children: []
              pos: 19014
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String target
                children: []
                pos: 19038
                length: 13
              pos: 19002
              length: 409
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int count = 1;
                children: []
                pos: 19063
                length: 14
              - type: local_variable_declaration
                fields:
                  text: Node n = node.getPreviousSibling();
                children: []
                pos: 19086
                length: 35
              - type: while_statement
                fields:
                  text: |-
                    while (n != null) {
                                if (n.getNodeType() == Node.PROCESSING_INSTRUCTION_NODE
                                    && ((ProcessingInstruction) n).getTarget().equals(target)) {
                                    count++;
                                }
                                n = n.getPreviousSibling();
                            }
                children: []
                pos: 19130
                length: 253
              - type: return_statement
                fields:
                  text: return count;
                children: []
                pos: 19392
                length: 13
              pos: 19053
              length: 358
          children: []
          pos: 19002
          length: 409
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: hashCode
              children: []
              pos: 19428
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 19417
              length: 75
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return System.identityHashCode(node);
                children: []
                pos: 19449
                length: 37
              pos: 19439
              length: 53
          children: []
          pos: 19417
          length: 75
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 19513
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object object
                children: []
                pos: 19520
                length: 13
              pos: 19498
              length: 153
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return object == this || object instanceof DOMNodePointer
                    && node == ((DOMNodePointer) object).node;
                children: []
                pos: 19545
                length: 100
              pos: 19535
              length: 116
          children: []
          pos: 19498
          length: 153
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrefix
              children: []
              pos: 19678
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 19688
                length: 9
              pos: 19657
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String prefix = node.getPrefix();
                children: []
                pos: 19709
                length: 33
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: prefix
                            children: []
                            pos: 19755
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 19765
                            length: 4
                        children: []
                        pos: 19755
                        length: 14
                    children: []
                    pos: 19754
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return prefix;
                    children: []
                    pos: 19785
                    length: 14
                  pos: 19771
                  length: 38
                pos: 19751
                length: 58
              - type: local_variable_declaration
                fields:
                  text: String name = node.getNodeName();
                children: []
                pos: 19819
                length: 33
              - type: local_variable_declaration
                fields:
                  text: int index = name.lastIndexOf(':');
                children: []
                pos: 19861
                length: 34
              - type: return_statement
                fields:
                  text: 'return index < 0 ? null : name.substring(0, index);'
                children: []
                pos: 19904
                length: 51
              pos: 19699
              length: 262
          children: []
          pos: 19657
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocalName
              children: []
              pos: 19988
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 20001
                length: 9
              pos: 19967
              length: 320
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String localName = node.getLocalName();
                children: []
                pos: 20022
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: localName
                            children: []
                            pos: 20074
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 20087
                            length: 4
                        children: []
                        pos: 20074
                        length: 17
                    children: []
                    pos: 20073
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return localName;
                    children: []
                    pos: 20107
                    length: 17
                  pos: 20093
                  length: 41
                pos: 20070
                length: 64
              - type: local_variable_declaration
                fields:
                  text: String name = node.getNodeName();
                children: []
                pos: 20144
                length: 33
              - type: local_variable_declaration
                fields:
                  text: int index = name.lastIndexOf(':');
                children: []
                pos: 20186
                length: 34
              - type: return_statement
                fields:
                  text: 'return index < 0 ? name : name.substring(index + 1);'
                children: []
                pos: 20229
                length: 52
              pos: 20012
              length: 275
          children: []
          pos: 19967
          length: 320
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNamespaceURI
              children: []
              pos: 20318
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 20334
                length: 9
              pos: 20297
              length: 805
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: node instanceof Document
                        children: []
                        pos: 20359
                        length: 24
                    children: []
                    pos: 20358
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: node = ((Document) node).getDocumentElement();
                    children: []
                    pos: 20399
                    length: 46
                  pos: 20385
                  length: 70
                pos: 20355
                length: 100
              - type: local_variable_declaration
                fields:
                  text: Element element = (Element) node;
                children: []
                pos: 20465
                length: 33
              - type: local_variable_declaration
                fields:
                  text: String uri = element.getNamespaceURI();
                children: []
                pos: 20508
                length: 39
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: uri
                            children: []
                            pos: 20560
                            length: 3
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 20567
                            length: 4
                        children: []
                        pos: 20560
                        length: 11
                    children: []
                    pos: 20559
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return uri;
                    children: []
                    pos: 20587
                    length: 11
                  pos: 20573
                  length: 35
                pos: 20556
                length: 52
              - type: local_variable_declaration
                fields:
                  text: String prefix = getPrefix(node);
                children: []
                pos: 20618
                length: 32
              - type: local_variable_declaration
                fields:
                  text: 'String qname = prefix == null ? "xmlns" : "xmlns:" + prefix;'
                children: []
                pos: 20659
                length: 60
              - type: local_variable_declaration
                fields:
                  text: Node aNode = node;
                children: []
                pos: 20729
                length: 18
              - type: while_statement
                fields:
                  text: |-
                    while (aNode != null) {
                                if (aNode.getNodeType() == Node.ELEMENT_NODE) {
                                    Attr attr = ((Element) aNode).getAttributeNode(qname);
                                    if (attr != null) {
                                        return attr.getValue();
                                    }
                                }
                                aNode = aNode.getParentNode();
                            }
                children: []
                pos: 20756
                length: 319
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 21084
                length: 12
              pos: 20345
              length: 757
          children: []
          pos: 20297
          length: 805
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getValue
              children: []
              pos: 21122
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 21108
              length: 237
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: node.getNodeType()
                            children: []
                            pos: 21147
                            length: 18
                          right:
                            type: field_access
                            fields:
                              text: Node.COMMENT_NODE
                            children: []
                            pos: 21169
                            length: 17
                        children: []
                        pos: 21147
                        length: 39
                    children: []
                    pos: 21146
                    length: 41
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String text = ((Comment) node).getData();
                    children: []
                    pos: 21202
                    length: 41
                  - type: return_statement
                    fields:
                      text: 'return text == null ? "" : text.trim();'
                    children: []
                    pos: 21256
                    length: 39
                  pos: 21188
                  length: 117
                pos: 21143
                length: 162
              - type: return_statement
                fields:
                  text: return stringValue(node);
                children: []
                pos: 21314
                length: 25
              pos: 21133
              length: 212
          children: []
          pos: 21108
          length: 237
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: stringValue
              children: []
              pos: 21366
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node node
                children: []
                pos: 21378
                length: 9
              pos: 21351
              length: 932
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int nodeType = node.getNodeType();
                children: []
                pos: 21399
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: nodeType
                            children: []
                            pos: 21446
                            length: 8
                          right:
                            type: field_access
                            fields:
                              text: Node.COMMENT_NODE
                            children: []
                            pos: 21458
                            length: 17
                        children: []
                        pos: 21446
                        length: 29
                    children: []
                    pos: 21445
                    length: 31
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return "";
                    children: []
                    pos: 21491
                    length: 10
                  pos: 21477
                  length: 34
                pos: 21442
                length: 69
              - type: local_variable_declaration
                fields:
                  text: boolean trim = !"preserve".equals(findEnclosingAttribute(node,
                    "xml:space"));
                children: []
                pos: 21520
                length: 77
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: nodeType
                                children: []
                                pos: 21610
                                length: 8
                              right:
                                type: field_access
                                fields:
                                  text: Node.TEXT_NODE
                                children: []
                                pos: 21622
                                length: 14
                            children: []
                            pos: 21610
                            length: 26
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: nodeType
                                children: []
                                pos: 21640
                                length: 8
                              right:
                                type: field_access
                                fields:
                                  text: Node.CDATA_SECTION_NODE
                                children: []
                                pos: 21652
                                length: 23
                            children: []
                            pos: 21640
                            length: 35
                        children: []
                        pos: 21610
                        length: 65
                    children: []
                    pos: 21609
                    length: 67
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String text = node.getNodeValue();
                    children: []
                    pos: 21691
                    length: 34
                  - type: return_statement
                    fields:
                      text: 'return text == null ? "" : trim ? text.trim() : text;'
                    children: []
                    pos: 21738
                    length: 53
                  pos: 21677
                  length: 124
                pos: 21606
                length: 195
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: nodeType
                            children: []
                            pos: 21814
                            length: 8
                          right:
                            type: field_access
                            fields:
                              text: Node.PROCESSING_INSTRUCTION_NODE
                            children: []
                            pos: 21826
                            length: 32
                        children: []
                        pos: 21814
                        length: 44
                    children: []
                    pos: 21813
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: String text = ((ProcessingInstruction) node).getData();
                    children: []
                    pos: 21874
                    length: 55
                  - type: return_statement
                    fields:
                      text: 'return text == null ? "" : trim ? text.trim() : text;'
                    children: []
                    pos: 21942
                    length: 53
                  pos: 21860
                  length: 145
                pos: 21810
                length: 195
              - type: local_variable_declaration
                fields:
                  text: NodeList list = node.getChildNodes();
                children: []
                pos: 22014
                length: 37
              - type: local_variable_declaration
                fields:
                  text: StringBuffer buf = new StringBuffer(16);
                children: []
                pos: 22060
                length: 40
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 0; i < list.getLength(); i++) {
                                Node child = list.item(i);
                                buf.append(stringValue(child));
                            }
                children: []
                pos: 22109
                length: 137
              - type: return_statement
                fields:
                  text: return buf.toString();
                children: []
                pos: 22255
                length: 22
              pos: 21389
              length: 894
          children: []
          pos: 21351
          length: 932
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPointerByID
              children: []
              pos: 22349
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 22364
                length: 21
              pos: 22334
              length: 396
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: |-
                    Document document = node.getNodeType() == Node.DOCUMENT_NODE ? (Document) node
                                    : node.getOwnerDocument();
                children: []
                pos: 22408
                length: 121
              - type: local_variable_declaration
                fields:
                  text: Element element = document.getElementById(id);
                children: []
                pos: 22538
                length: 46
              - type: return_statement
                fields:
                  text: |-
                    return element == null ? (Pointer) new NullPointer(getLocale(), id)
                                    : new DOMNodePointer(element, getLocale(), id);
                children: []
                pos: 22593
                length: 131
              pos: 22398
              length: 332
          children: []
          pos: 22334
          length: 396
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getAbstractFactory
              children: []
              pos: 22760
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JXPathContext context
                children: []
                pos: 22779
                length: 21
              pos: 22736
              length: 372
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: AbstractFactory factory = context.getFactory();
                children: []
                pos: 22812
                length: 47
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: factory
                            children: []
                            pos: 22872
                            length: 7
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 22883
                            length: 4
                        children: []
                        pos: 22872
                        length: 15
                    children: []
                    pos: 22871
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new JXPathException(
                                        "Factory is not set on the JXPathContext - "
                                            + "cannot create path: "
                                            + asPath());
                    children: []
                    pos: 22903
                    length: 165
                  pos: 22889
                  length: 189
                pos: 22868
                length: 210
              - type: return_statement
                fields:
                  text: return factory;
                children: []
                pos: 23087
                length: 15
              pos: 22802
              length: 306
          children: []
          pos: 22736
          length: 372
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compareChildNodePointers
              children: []
              pos: 23125
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: NodePointer pointer1
                children: []
                pos: 23163
                length: 20
              pos: 23114
              length: 1359
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Node node1 = (Node) pointer1.getBaseValue();
                children: []
                pos: 23221
                length: 44
              - type: local_variable_declaration
                fields:
                  text: Node node2 = (Node) pointer2.getBaseValue();
                children: []
                pos: 23274
                length: 44
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: node1
                            children: []
                            pos: 23331
                            length: 5
                          right:
                            type: identifier
                            fields:
                              text: node2
                            children: []
                            pos: 23340
                            length: 5
                        children: []
                        pos: 23331
                        length: 14
                    children: []
                    pos: 23330
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 23361
                    length: 9
                  pos: 23347
                  length: 33
                pos: 23327
                length: 53
              - type: local_variable_declaration
                fields:
                  text: int t1 = node1.getNodeType();
                children: []
                pos: 23390
                length: 29
              - type: local_variable_declaration
                fields:
                  text: int t2 = node2.getNodeType();
                children: []
                pos: 23428
                length: 29
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t1
                                children: []
                                pos: 23470
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23476
                                length: 19
                            children: []
                            pos: 23470
                            length: 25
                          right:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t2
                                children: []
                                pos: 23499
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23505
                                length: 19
                            children: []
                            pos: 23499
                            length: 25
                        children: []
                        pos: 23470
                        length: 54
                    children: []
                    pos: 23469
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return -1;
                    children: []
                    pos: 23540
                    length: 10
                  pos: 23526
                  length: 34
                pos: 23466
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t1
                                children: []
                                pos: 23573
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23579
                                length: 19
                            children: []
                            pos: 23573
                            length: 25
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t2
                                children: []
                                pos: 23602
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23608
                                length: 19
                            children: []
                            pos: 23602
                            length: 25
                        children: []
                        pos: 23573
                        length: 54
                    children: []
                    pos: 23572
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return 1;
                    children: []
                    pos: 23643
                    length: 9
                  pos: 23629
                  length: 33
                pos: 23569
                length: 93
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t1
                                children: []
                                pos: 23675
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23681
                                length: 19
                            children: []
                            pos: 23675
                            length: 25
                          right:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: t2
                                children: []
                                pos: 23704
                                length: 2
                              right:
                                type: field_access
                                fields:
                                  text: Node.ATTRIBUTE_NODE
                                children: []
                                pos: 23710
                                length: 19
                            children: []
                            pos: 23704
                            length: 25
                        children: []
                        pos: 23675
                        length: 54
                    children: []
                    pos: 23674
                    length: 56
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: NamedNodeMap map = ((Node) getNode()).getAttributes();
                    children: []
                    pos: 23745
                    length: 54
                  - type: local_variable_declaration
                    fields:
                      text: int length = map.getLength();
                    children: []
                    pos: 23812
                    length: 29
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < length; i++) {
                                        Node n = map.item(i);
                                        if (n == node1) {
                                            return -1;
                                        }
                                        if (n == node2) {
                                            return 1;
                                        }
                                    }
                    children: []
                    pos: 23854
                    length: 251
                  - type: return_statement
                    fields:
                      text: return 0;
                    children: []
                    pos: 24118
                    length: 9
                  pos: 23731
                  length: 427
                pos: 23671
                length: 487
              - type: local_variable_declaration
                fields:
                  text: Node current = node.getFirstChild();
                children: []
                pos: 24168
                length: 36
              - type: while_statement
                fields:
                  text: |-
                    while (current != null) {
                                if (current == node1) {
                                    return -1;
                                }
                                if (current == node2) {
                                    return 1;
                                }
                                current = current.getNextSibling();
                            }
                children: []
                pos: 24213
                length: 236
              - type: return_statement
                fields:
                  text: return 0;
                children: []
                pos: 24458
                length: 9
              pos: 23211
              length: 1262
          children: []
          pos: 23114
          length: 1359
        pos: 2084
        length: 22391
    children: []
    pos: 2084
    length: 22391
  pos: 0
  length: 24476
text_diff: |
  --- before
  +++ after
  @@ -105,8 +105,7 @@
                   || testName.getName()
                           .equals(DOMNodePointer.getLocalName(node))) {
                   String nodeNS = DOMNodePointer.getNamespaceURI(node);
  -                return equalStrings(namespaceURI, nodeNS) || nodeNS == null
  -                        && equalStrings(testPrefix, getPrefix(node));
  +                return equalStrings(namespaceURI, nodeNS);
               }
               return false;
           }
tree_diff: |+
  New cluster:
  UPDATE from return equalStrings(namespaceURI, nodeNS) || nodeNS == null
                          && equalStrings(testPrefix, getPrefix(node)); to return equalStrings(namespaceURI, nodeNS);
  ------------
  ===
  update-node
  ---
  return_statement: return equalStrings(namespaceURI, nodeNS) || nodeNS == null
                          && equalStrings(testPrefix, getPrefix(node)); [3883,4012]
  replace return equalStrings(namespaceURI, nodeNS) || nodeNS == null
                          && equalStrings(testPrefix, getPrefix(node)); by return equalStrings(namespaceURI, nodeNS);

...
