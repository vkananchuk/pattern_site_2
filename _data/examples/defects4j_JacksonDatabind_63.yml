---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: JsonMappingException
        children: []
        pos: 758
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = 1L;
          children: []
          pos: 821
          length: 48
        - type: field_declaration
          fields:
            text: final static int MAX_REFS_TO_LIST = 1000;
          children: []
          pos: 992
          length: 41
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: Reference
              children: []
              pos: 1442
              length: 9
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private static final long serialVersionUID = 2L;
                children: []
                pos: 1490
                length: 48
              - type: field_declaration
                fields:
                  text: protected transient Object _from;
                children: []
                pos: 1610
                length: 33
              - type: field_declaration
                fields:
                  text: protected String _fieldName;
                children: []
                pos: 1955
                length: 28
              - type: field_declaration
                fields:
                  text: protected int _index = -1;
                children: []
                pos: 2271
                length: 26
              - type: field_declaration
                fields:
                  text: protected String _desc;
                children: []
                pos: 2631
                length: 23
              - type: constructor_declaration
                fields:
                  text: protected Reference() { }
                children: []
                pos: 2761
                length: 25
              - type: constructor_declaration
                fields:
                  text: public Reference(Object from) { _from = from; }
                children: []
                pos: 2796
                length: 47
              - type: constructor_declaration
                fields:
                  text: |-
                    public Reference(Object from, String fieldName) {
                                _from = from;
                                if (fieldName == null) {
                                    throw new NullPointerException("Can not pass null fieldName");
                                }
                                _fieldName = fieldName;
                            }
                children: []
                pos: 2853
                length: 251
              - type: constructor_declaration
                fields:
                  text: |-
                    public Reference(Object from, int index) {
                                _from = from;
                                _index = index;
                            }
                children: []
                pos: 3114
                length: 106
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setFieldName
                    children: []
                    pos: 3326
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String n
                      children: []
                      pos: 3339
                      length: 8
                    pos: 3321
                    length: 47
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _fieldName = n;
                      children: []
                      pos: 3351
                      length: 15
                    pos: 3349
                    length: 19
                children: []
                pos: 3321
                length: 47
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setIndex
                    children: []
                    pos: 3382
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: int ix
                      children: []
                      pos: 3391
                      length: 6
                    pos: 3377
                    length: 38
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _index = ix;
                      children: []
                      pos: 3401
                      length: 12
                    pos: 3399
                    length: 16
                children: []
                pos: 3377
                length: 38
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDescription
                    children: []
                    pos: 3429
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String d
                      children: []
                      pos: 3444
                      length: 8
                    pos: 3424
                    length: 44
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _desc = d;
                      children: []
                      pos: 3456
                      length: 10
                    pos: 3454
                    length: 14
                children: []
                pos: 3424
                length: 44
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFrom
                    children: []
                    pos: 4054
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4020
                    length: 61
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return _from;
                      children: []
                      pos: 4066
                      length: 13
                    pos: 4064
                    length: 17
                children: []
                pos: 4020
                length: 61
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFieldName
                    children: []
                    pos: 4105
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4091
                    length: 51
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return _fieldName;
                      children: []
                      pos: 4122
                      length: 18
                    pos: 4120
                    length: 22
                children: []
                pos: 4091
                length: 51
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getIndex
                    children: []
                    pos: 4162
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4151
                    length: 40
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return _index;
                      children: []
                      pos: 4175
                      length: 14
                    pos: 4173
                    length: 18
                children: []
                pos: 4151
                length: 40
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDescription
                    children: []
                    pos: 4214
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4200
                    length: 1762
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: _desc
                                  children: []
                                  pos: 4249
                                  length: 5
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 4258
                                  length: 4
                              children: []
                              pos: 4249
                              length: 13
                          children: []
                          pos: 4248
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: StringBuilder sb = new StringBuilder();
                          children: []
                          pos: 4282
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: _from
                                      children: []
                                      pos: 4343
                                      length: 5
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 4352
                                      length: 4
                                  children: []
                                  pos: 4343
                                  length: 13
                              children: []
                              pos: 4342
                              length: 15
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: sb.append("UNKNOWN");
                              children: []
                              pos: 4404
                              length: 21
                            pos: 4358
                            length: 85
                          pos: 4339
                          length: 1153
                        - type: expression_statement
                          fields:
                            text: sb.append('[');
                          children: []
                          pos: 5509
                          length: 15
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: _fieldName
                                      children: []
                                      pos: 5545
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 5559
                                      length: 4
                                  children: []
                                  pos: 5545
                                  length: 18
                              children: []
                              pos: 5544
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: sb.append('"');
                              children: []
                              pos: 5587
                              length: 15
                            - type: expression_statement
                              fields:
                                text: sb.append(_fieldName);
                              children: []
                              pos: 5623
                              length: 22
                            - type: expression_statement
                              fields:
                                text: sb.append('"');
                              children: []
                              pos: 5666
                              length: 15
                            pos: 5565
                            length: 134
                          pos: 5541
                          length: 300
                        - type: expression_statement
                          fields:
                            text: sb.append(']');
                          children: []
                          pos: 5858
                          length: 15
                        - type: expression_statement
                          fields:
                            text: _desc = sb.toString();
                          children: []
                          pos: 5890
                          length: 22
                        pos: 4264
                        length: 1662
                      pos: 4245
                      length: 1681
                    - type: return_statement
                      fields:
                        text: return _desc;
                      children: []
                      pos: 5939
                      length: 13
                    pos: 4231
                    length: 1731
                children: []
                pos: 4200
                length: 1762
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: toString
                    children: []
                    pos: 6004
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 5972
                    length: 91
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return getDescription();
                      children: []
                      pos: 6029
                      length: 24
                    pos: 6015
                    length: 48
                children: []
                pos: 5972
                length: 91
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: writeReplace
                    children: []
                    pos: 6226
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 6219
                    length: 209
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: getDescription();
                      children: []
                      pos: 6376
                      length: 17
                    - type: return_statement
                      fields:
                        text: return this;
                      children: []
                      pos: 6406
                      length: 12
                    pos: 6241
                    length: 187
                children: []
                pos: 6219
                length: 209
              pos: 1422
              length: 5012
          children: []
          pos: 1422
          length: 5012
        - type: field_declaration
          fields:
            text: protected LinkedList<Reference> _path;
          children: []
          pos: 6724
          length: 38
        - type: field_declaration
          fields:
            text: protected transient Closeable _processor;
          children: []
          pos: 6980
          length: 41
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg) { super(msg); }
          children: []
          pos: 7288
          length: 84
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg, Throwable rootCause) { super(msg, rootCause); }
          children: []
          pos: 7473
          length: 116
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg, JsonLocation loc) { super(msg, loc); }
          children: []
          pos: 7690
          length: 107
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg, JsonLocation loc, Throwable rootCause) { super(msg, loc, rootCause); }
          children: []
          pos: 7898
          length: 139
        - type: constructor_declaration
          fields:
            text: |-
              public JsonMappingException(Closeable processor, String msg) {
                      super(msg);
                      _processor = processor;
                      if (processor instanceof JsonParser) {
                          // 17-Aug-2015, tatu: Use of token location makes some sense from databinding,
                          //   since actual parsing (current) location is typically only needed for low-level
                          //   parsing exceptions.
                          _location = ((JsonParser) processor).getTokenLocation();
                      }
                  }
          children: []
          pos: 8077
          length: 470
        - type: constructor_declaration
          fields:
            text: |-
              public JsonMappingException(Closeable processor, String msg, Throwable problem) {
                      super(msg, problem);
                      _processor = processor;
                      if (processor instanceof JsonParser) {
                          _location = ((JsonParser) processor).getTokenLocation();
                      }
                  }
          children: []
          pos: 8587
          length: 274
        - type: constructor_declaration
          fields:
            text: |-
              public JsonMappingException(Closeable processor, String msg, JsonLocation loc) {
                      super(msg, loc);
                      _processor = processor;
                  }
          children: []
          pos: 8901
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9119
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 9124
                length: 12
              pos: 9084
              length: 122
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(p, msg);
                children: []
                pos: 9160
                length: 40
              pos: 9150
              length: 56
          children: []
          pos: 9084
          length: 122
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9281
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 9286
                length: 12
              pos: 9246
              length: 150
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(p, msg, problem);
                children: []
                pos: 9341
                length: 49
              pos: 9331
              length: 65
          children: []
          pos: 9246
          length: 150
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9471
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonGenerator g
                children: []
                pos: 9476
                length: 15
              pos: 9436
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(g, msg, (Throwable) null);
                children: []
                pos: 9515
                length: 58
              pos: 9505
              length: 74
          children: []
          pos: 9436
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9654
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonGenerator g
                children: []
                pos: 9659
                length: 15
              pos: 9619
              length: 153
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(g, msg, problem);
                children: []
                pos: 9717
                length: 49
              pos: 9707
              length: 65
          children: []
          pos: 9619
          length: 153
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9847
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 9852
                length: 27
              pos: 9812
              length: 152
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getParser(), msg);
                children: []
                pos: 9903
                length: 55
              pos: 9893
              length: 71
          children: []
          pos: 9812
          length: 152
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 10039
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 10044
                length: 27
              pos: 10004
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getParser(), msg, t);
                children: []
                pos: 10108
                length: 58
              pos: 10098
              length: 74
          children: []
          pos: 10004
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 10247
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SerializerProvider ctxt
                children: []
                pos: 10252
                length: 23
              pos: 10212
              length: 151
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getGenerator(), msg);
                children: []
                pos: 10299
                length: 58
              pos: 10289
              length: 74
          children: []
          pos: 10212
          length: 151
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 10438
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SerializerProvider ctxt
                children: []
                pos: 10443
                length: 23
              pos: 10403
              length: 354
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getGenerator(), msg,
                    problem);
                children: []
                pos: 10684
                length: 67
              pos: 10499
              length: 258
          children: []
          pos: 10403
          length: 354
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: fromUnexpectedIOE
              children: []
              pos: 11008
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: IOException src
                children: []
                pos: 11026
                length: 15
              pos: 10973
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return new JsonMappingException(null,
                                    String.format("Unexpected IOException (of type %s): %s",
                                            src.getClass().getName(), src.getMessage()));
                children: []
                pos: 11053
                length: 180
              pos: 11043
              length: 196
          children: []
          pos: 10973
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapWithPath
              children: []
              pos: 11644
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable src
                children: []
                pos: 11657
                length: 13
              pos: 11609
              length: 191
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return wrapWithPath(src, new Reference(refFrom, refFieldName));
                children: []
                pos: 11731
                length: 63
              pos: 11721
              length: 79
          children: []
          pos: 11609
          length: 191
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapWithPath
              children: []
              pos: 12208
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable src
                children: []
                pos: 12221
                length: 13
              pos: 12173
              length: 162
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return wrapWithPath(src, new Reference(refFrom, index));
                children: []
                pos: 12273
                length: 56
              pos: 12263
              length: 72
          children: []
          pos: 12173
          length: 162
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapWithPath
              children: []
              pos: 12640
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable src
                children: []
                pos: 12653
                length: 13
              pos: 12571
              length: 1027
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonMappingException jme;
                children: []
                pos: 12697
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: src instanceof JsonMappingException
                        children: []
                        pos: 12735
                        length: 35
                    children: []
                    pos: 12734
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: jme = (JsonMappingException) src;
                    children: []
                    pos: 12786
                    length: 33
                  pos: 12772
                  length: 57
                pos: 12731
                length: 811
              - type: expression_statement
                fields:
                  text: jme.prependPath(ref);
                children: []
                pos: 13551
                length: 21
              - type: return_statement
                fields:
                  text: return jme;
                children: []
                pos: 13581
                length: 11
              pos: 12687
              length: 911
          children: []
          pos: 12571
          length: 1027
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPath
              children: []
              pos: 13921
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 13898
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 13949
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 13958
                            length: 4
                        children: []
                        pos: 13949
                        length: 13
                    children: []
                    pos: 13948
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.emptyList();
                    children: []
                    pos: 13978
                    length: 31
                  pos: 13964
                  length: 55
                pos: 13945
                length: 74
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(_path);
                children: []
                pos: 14028
                length: 43
              pos: 13935
              length: 142
          children: []
          pos: 13898
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPathReference
              children: []
              pos: 14223
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 14209
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getPathReference(new StringBuilder()).toString();
                children: []
                pos: 14256
                length: 56
              pos: 14246
              length: 72
          children: []
          pos: 14209
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPathReference
              children: []
              pos: 14345
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 14362
                length: 16
              pos: 14324
              length: 115
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _appendPathDesc(sb);
                children: []
                pos: 14394
                length: 20
              - type: return_statement
                fields:
                  text: return sb;
                children: []
                pos: 14423
                length: 10
              pos: 14384
              length: 55
          children: []
          pos: 14324
          length: 115
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: prependPath
              children: []
              pos: 14565
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object referrer
                children: []
                pos: 14577
                length: 15
              pos: 14553
              length: 156
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Reference ref = new Reference(referrer, fieldName);
                children: []
                pos: 14626
                length: 51
              - type: expression_statement
                fields:
                  text: prependPath(ref);
                children: []
                pos: 14686
                length: 17
              pos: 14616
              length: 93
          children: []
          pos: 14553
          length: 156
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: prependPath
              children: []
              pos: 14830
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object referrer
                children: []
                pos: 14842
                length: 15
              pos: 14818
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Reference ref = new Reference(referrer, index);
                children: []
                pos: 14884
                length: 47
              - type: expression_statement
                fields:
                  text: prependPath(ref);
                children: []
                pos: 14940
                length: 17
              pos: 14874
              length: 89
          children: []
          pos: 14818
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: prependPath
              children: []
              pos: 14981
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Reference r
                children: []
                pos: 14993
                length: 11
              pos: 14969
              length: 437
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 15024
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 15033
                            length: 4
                        children: []
                        pos: 15024
                        length: 13
                    children: []
                    pos: 15023
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _path = new LinkedList<Reference>();
                    children: []
                    pos: 15053
                    length: 36
                  pos: 15039
                  length: 60
                pos: 15020
                length: 79
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: _path.size()
                            children: []
                            pos: 15325
                            length: 12
                          right:
                            type: identifier
                            fields:
                              text: MAX_REFS_TO_LIST
                            children: []
                            pos: 15340
                            length: 16
                        children: []
                        pos: 15325
                        length: 31
                    children: []
                    pos: 15324
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _path.addFirst(r);
                    children: []
                    pos: 15372
                    length: 18
                  pos: 15358
                  length: 42
                pos: 15321
                length: 79
              pos: 15010
              length: 396
          children: []
          pos: 14969
          length: 437
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProcessor
              children: []
              pos: 15671
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15586
              length: 122
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _processor;
                children: []
                pos: 15688
                length: 18
              pos: 15686
              length: 22
          children: []
          pos: 15586
          length: 122
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocalizedMessage
              children: []
              pos: 15742
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15714
              length: 89
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _buildMessage();
                children: []
                pos: 15774
                length: 23
              pos: 15764
              length: 39
          children: []
          pos: 15714
          length: 89
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMessage
              children: []
              pos: 15972
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15944
              length: 80
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _buildMessage();
                children: []
                pos: 15995
                length: 23
              pos: 15985
              length: 39
          children: []
          pos: 15944
          length: 80
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _buildMessage
              children: []
              pos: 16047
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16030
              length: 745
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String msg = super.getMessage();
                children: []
                pos: 16184
                length: 32
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 16229
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 16238
                            length: 4
                        children: []
                        pos: 16229
                        length: 13
                    children: []
                    pos: 16228
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return msg;
                    children: []
                    pos: 16258
                    length: 11
                  pos: 16244
                  length: 35
                pos: 16225
                length: 54
              - type: local_variable_declaration
                fields:
                  text: 'StringBuilder sb = (msg == null) ? new StringBuilder() :
                    new StringBuilder(msg);'
                children: []
                pos: 16288
                length: 80
              - type: expression_statement
                fields:
                  text: 'sb.append(" (through reference chain: ");'
                children: []
                pos: 16639
                length: 41
              - type: expression_statement
                fields:
                  text: sb = getPathReference(sb);
                children: []
                pos: 16689
                length: 26
              - type: expression_statement
                fields:
                  text: sb.append(')');
                children: []
                pos: 16724
                length: 15
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 16748
                length: 21
              pos: 16067
              length: 708
          children: []
          pos: 16030
          length: 745
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 16809
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16781
              length: 105
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return getClass().getName()+": "+getMessage();'
                children: []
                pos: 16834
                length: 46
              pos: 16824
              length: 62
          children: []
          pos: 16781
          length: 105
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _appendPathDesc
              children: []
              pos: 17075
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 17091
                length: 16
              pos: 17060
              length: 335
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 17127
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 17136
                            length: 4
                        children: []
                        pos: 17127
                        length: 13
                    children: []
                    pos: 17126
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 17156
                    length: 7
                  pos: 17142
                  length: 31
                pos: 17123
                length: 50
              - type: local_variable_declaration
                fields:
                  text: Iterator<Reference> it = _path.iterator();
                children: []
                pos: 17182
                length: 42
              - type: while_statement
                fields:
                  text: |-
                    while (it.hasNext()) {
                                sb.append(it.next().toString());
                                if (it.hasNext()) {
                                    sb.append("->");
                                }
                            }
                children: []
                pos: 17233
                length: 156
              pos: 17113
              length: 282
          children: []
          pos: 17060
          length: 335
        pos: 745
        length: 16652
    children: []
    pos: 745
    length: 16652
  pos: 0
  length: 17398
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: JsonMappingException
        children: []
        pos: 758
        length: 20
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = 1L;
          children: []
          pos: 821
          length: 48
        - type: field_declaration
          fields:
            text: final static int MAX_REFS_TO_LIST = 1000;
          children: []
          pos: 992
          length: 41
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: Reference
              children: []
              pos: 1442
              length: 9
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private static final long serialVersionUID = 2L;
                children: []
                pos: 1490
                length: 48
              - type: field_declaration
                fields:
                  text: protected transient Object _from;
                children: []
                pos: 1610
                length: 33
              - type: field_declaration
                fields:
                  text: protected String _fieldName;
                children: []
                pos: 1955
                length: 28
              - type: field_declaration
                fields:
                  text: protected int _index = -1;
                children: []
                pos: 2271
                length: 26
              - type: field_declaration
                fields:
                  text: protected String _desc;
                children: []
                pos: 2631
                length: 23
              - type: constructor_declaration
                fields:
                  text: protected Reference() { }
                children: []
                pos: 2761
                length: 25
              - type: constructor_declaration
                fields:
                  text: public Reference(Object from) { _from = from; }
                children: []
                pos: 2796
                length: 47
              - type: constructor_declaration
                fields:
                  text: |-
                    public Reference(Object from, String fieldName) {
                                _from = from;
                                if (fieldName == null) {
                                    throw new NullPointerException("Can not pass null fieldName");
                                }
                                _fieldName = fieldName;
                            }
                children: []
                pos: 2853
                length: 251
              - type: constructor_declaration
                fields:
                  text: |-
                    public Reference(Object from, int index) {
                                _from = from;
                                _index = index;
                            }
                children: []
                pos: 3114
                length: 106
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setFieldName
                    children: []
                    pos: 3326
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String n
                      children: []
                      pos: 3339
                      length: 8
                    pos: 3321
                    length: 47
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _fieldName = n;
                      children: []
                      pos: 3351
                      length: 15
                    pos: 3349
                    length: 19
                children: []
                pos: 3321
                length: 47
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setIndex
                    children: []
                    pos: 3382
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: int ix
                      children: []
                      pos: 3391
                      length: 6
                    pos: 3377
                    length: 38
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _index = ix;
                      children: []
                      pos: 3401
                      length: 12
                    pos: 3399
                    length: 16
                children: []
                pos: 3377
                length: 38
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDescription
                    children: []
                    pos: 3429
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String d
                      children: []
                      pos: 3444
                      length: 8
                    pos: 3424
                    length: 44
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: _desc = d;
                      children: []
                      pos: 3456
                      length: 10
                    pos: 3454
                    length: 14
                children: []
                pos: 3424
                length: 44
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFrom
                    children: []
                    pos: 4054
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4020
                    length: 61
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return _from;
                      children: []
                      pos: 4066
                      length: 13
                    pos: 4064
                    length: 17
                children: []
                pos: 4020
                length: 61
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFieldName
                    children: []
                    pos: 4105
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4091
                    length: 51
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return _fieldName;
                      children: []
                      pos: 4122
                      length: 18
                    pos: 4120
                    length: 22
                children: []
                pos: 4091
                length: 51
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getIndex
                    children: []
                    pos: 4162
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4151
                    length: 40
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return _index;
                      children: []
                      pos: 4175
                      length: 14
                    pos: 4173
                    length: 18
                children: []
                pos: 4151
                length: 40
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDescription
                    children: []
                    pos: 4214
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 4200
                    length: 1456
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: _desc
                                  children: []
                                  pos: 4249
                                  length: 5
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 4258
                                  length: 4
                              children: []
                              pos: 4249
                              length: 13
                          children: []
                          pos: 4248
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: StringBuilder sb = new StringBuilder();
                          children: []
                          pos: 4282
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: _from
                                      children: []
                                      pos: 4343
                                      length: 5
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 4352
                                      length: 4
                                  children: []
                                  pos: 4343
                                  length: 13
                              children: []
                              pos: 4342
                              length: 15
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: sb.append("UNKNOWN");
                              children: []
                              pos: 4404
                              length: 21
                            pos: 4358
                            length: 85
                          pos: 4339
                          length: 847
                        - type: expression_statement
                          fields:
                            text: sb.append('[');
                          children: []
                          pos: 5203
                          length: 15
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: _fieldName
                                      children: []
                                      pos: 5239
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 5253
                                      length: 4
                                  children: []
                                  pos: 5239
                                  length: 18
                              children: []
                              pos: 5238
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: sb.append('"');
                              children: []
                              pos: 5281
                              length: 15
                            - type: expression_statement
                              fields:
                                text: sb.append(_fieldName);
                              children: []
                              pos: 5317
                              length: 22
                            - type: expression_statement
                              fields:
                                text: sb.append('"');
                              children: []
                              pos: 5360
                              length: 15
                            pos: 5259
                            length: 134
                          pos: 5235
                          length: 300
                        - type: expression_statement
                          fields:
                            text: sb.append(']');
                          children: []
                          pos: 5552
                          length: 15
                        - type: expression_statement
                          fields:
                            text: _desc = sb.toString();
                          children: []
                          pos: 5584
                          length: 22
                        pos: 4264
                        length: 1356
                      pos: 4245
                      length: 1375
                    - type: return_statement
                      fields:
                        text: return _desc;
                      children: []
                      pos: 5633
                      length: 13
                    pos: 4231
                    length: 1425
                children: []
                pos: 4200
                length: 1456
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: toString
                    children: []
                    pos: 5698
                    length: 8
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 5666
                    length: 91
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: return_statement
                      fields:
                        text: return getDescription();
                      children: []
                      pos: 5723
                      length: 24
                    pos: 5709
                    length: 48
                children: []
                pos: 5666
                length: 91
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: writeReplace
                    children: []
                    pos: 5920
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 5913
                    length: 209
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: getDescription();
                      children: []
                      pos: 6070
                      length: 17
                    - type: return_statement
                      fields:
                        text: return this;
                      children: []
                      pos: 6100
                      length: 12
                    pos: 5935
                    length: 187
                children: []
                pos: 5913
                length: 209
              pos: 1422
              length: 4706
          children: []
          pos: 1422
          length: 4706
        - type: field_declaration
          fields:
            text: protected LinkedList<Reference> _path;
          children: []
          pos: 6418
          length: 38
        - type: field_declaration
          fields:
            text: protected transient Closeable _processor;
          children: []
          pos: 6674
          length: 41
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg) { super(msg); }
          children: []
          pos: 6982
          length: 84
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg, Throwable rootCause) { super(msg, rootCause); }
          children: []
          pos: 7167
          length: 116
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg, JsonLocation loc) { super(msg, loc); }
          children: []
          pos: 7384
          length: 107
        - type: constructor_declaration
          fields:
            text: |-
              @Deprecated // since 2.7
                  public JsonMappingException(String msg, JsonLocation loc, Throwable rootCause) { super(msg, loc, rootCause); }
          children: []
          pos: 7592
          length: 139
        - type: constructor_declaration
          fields:
            text: |-
              public JsonMappingException(Closeable processor, String msg) {
                      super(msg);
                      _processor = processor;
                      if (processor instanceof JsonParser) {
                          // 17-Aug-2015, tatu: Use of token location makes some sense from databinding,
                          //   since actual parsing (current) location is typically only needed for low-level
                          //   parsing exceptions.
                          _location = ((JsonParser) processor).getTokenLocation();
                      }
                  }
          children: []
          pos: 7771
          length: 470
        - type: constructor_declaration
          fields:
            text: |-
              public JsonMappingException(Closeable processor, String msg, Throwable problem) {
                      super(msg, problem);
                      _processor = processor;
                      if (processor instanceof JsonParser) {
                          _location = ((JsonParser) processor).getTokenLocation();
                      }
                  }
          children: []
          pos: 8281
          length: 274
        - type: constructor_declaration
          fields:
            text: |-
              public JsonMappingException(Closeable processor, String msg, JsonLocation loc) {
                      super(msg, loc);
                      _processor = processor;
                  }
          children: []
          pos: 8595
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 8813
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 8818
                length: 12
              pos: 8778
              length: 122
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(p, msg);
                children: []
                pos: 8854
                length: 40
              pos: 8844
              length: 56
          children: []
          pos: 8778
          length: 122
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 8975
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 8980
                length: 12
              pos: 8940
              length: 150
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(p, msg, problem);
                children: []
                pos: 9035
                length: 49
              pos: 9025
              length: 65
          children: []
          pos: 8940
          length: 150
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9165
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonGenerator g
                children: []
                pos: 9170
                length: 15
              pos: 9130
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(g, msg, (Throwable) null);
                children: []
                pos: 9209
                length: 58
              pos: 9199
              length: 74
          children: []
          pos: 9130
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9348
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonGenerator g
                children: []
                pos: 9353
                length: 15
              pos: 9313
              length: 153
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(g, msg, problem);
                children: []
                pos: 9411
                length: 49
              pos: 9401
              length: 65
          children: []
          pos: 9313
          length: 153
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9541
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 9546
                length: 27
              pos: 9506
              length: 152
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getParser(), msg);
                children: []
                pos: 9597
                length: 55
              pos: 9587
              length: 71
          children: []
          pos: 9506
          length: 152
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9733
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: DeserializationContext ctxt
                children: []
                pos: 9738
                length: 27
              pos: 9698
              length: 168
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getParser(), msg, t);
                children: []
                pos: 9802
                length: 58
              pos: 9792
              length: 74
          children: []
          pos: 9698
          length: 168
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 9941
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SerializerProvider ctxt
                children: []
                pos: 9946
                length: 23
              pos: 9906
              length: 151
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getGenerator(), msg);
                children: []
                pos: 9993
                length: 58
              pos: 9983
              length: 74
          children: []
          pos: 9906
          length: 151
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: from
              children: []
              pos: 10132
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: SerializerProvider ctxt
                children: []
                pos: 10137
                length: 23
              pos: 10097
              length: 354
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return new JsonMappingException(ctxt.getGenerator(), msg,
                    problem);
                children: []
                pos: 10378
                length: 67
              pos: 10193
              length: 258
          children: []
          pos: 10097
          length: 354
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: fromUnexpectedIOE
              children: []
              pos: 10702
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: IOException src
                children: []
                pos: 10720
                length: 15
              pos: 10667
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return new JsonMappingException(null,
                                    String.format("Unexpected IOException (of type %s): %s",
                                            src.getClass().getName(), src.getMessage()));
                children: []
                pos: 10747
                length: 180
              pos: 10737
              length: 196
          children: []
          pos: 10667
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapWithPath
              children: []
              pos: 11338
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable src
                children: []
                pos: 11351
                length: 13
              pos: 11303
              length: 191
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return wrapWithPath(src, new Reference(refFrom, refFieldName));
                children: []
                pos: 11425
                length: 63
              pos: 11415
              length: 79
          children: []
          pos: 11303
          length: 191
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapWithPath
              children: []
              pos: 11902
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable src
                children: []
                pos: 11915
                length: 13
              pos: 11867
              length: 162
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return wrapWithPath(src, new Reference(refFrom, index));
                children: []
                pos: 11967
                length: 56
              pos: 11957
              length: 72
          children: []
          pos: 11867
          length: 162
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: wrapWithPath
              children: []
              pos: 12334
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Throwable src
                children: []
                pos: 12347
                length: 13
              pos: 12265
              length: 1027
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonMappingException jme;
                children: []
                pos: 12391
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: src instanceof JsonMappingException
                        children: []
                        pos: 12429
                        length: 35
                    children: []
                    pos: 12428
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: jme = (JsonMappingException) src;
                    children: []
                    pos: 12480
                    length: 33
                  pos: 12466
                  length: 57
                pos: 12425
                length: 811
              - type: expression_statement
                fields:
                  text: jme.prependPath(ref);
                children: []
                pos: 13245
                length: 21
              - type: return_statement
                fields:
                  text: return jme;
                children: []
                pos: 13275
                length: 11
              pos: 12381
              length: 911
          children: []
          pos: 12265
          length: 1027
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPath
              children: []
              pos: 13615
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 13592
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 13643
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 13652
                            length: 4
                        children: []
                        pos: 13643
                        length: 13
                    children: []
                    pos: 13642
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.emptyList();
                    children: []
                    pos: 13672
                    length: 31
                  pos: 13658
                  length: 55
                pos: 13639
                length: 74
              - type: return_statement
                fields:
                  text: return Collections.unmodifiableList(_path);
                children: []
                pos: 13722
                length: 43
              pos: 13629
              length: 142
          children: []
          pos: 13592
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPathReference
              children: []
              pos: 13917
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 13903
              length: 109
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return getPathReference(new StringBuilder()).toString();
                children: []
                pos: 13950
                length: 56
              pos: 13940
              length: 72
          children: []
          pos: 13903
          length: 109
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPathReference
              children: []
              pos: 14039
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 14056
                length: 16
              pos: 14018
              length: 115
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _appendPathDesc(sb);
                children: []
                pos: 14088
                length: 20
              - type: return_statement
                fields:
                  text: return sb;
                children: []
                pos: 14117
                length: 10
              pos: 14078
              length: 55
          children: []
          pos: 14018
          length: 115
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: prependPath
              children: []
              pos: 14259
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object referrer
                children: []
                pos: 14271
                length: 15
              pos: 14247
              length: 156
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Reference ref = new Reference(referrer, fieldName);
                children: []
                pos: 14320
                length: 51
              - type: expression_statement
                fields:
                  text: prependPath(ref);
                children: []
                pos: 14380
                length: 17
              pos: 14310
              length: 93
          children: []
          pos: 14247
          length: 156
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: prependPath
              children: []
              pos: 14524
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object referrer
                children: []
                pos: 14536
                length: 15
              pos: 14512
              length: 145
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Reference ref = new Reference(referrer, index);
                children: []
                pos: 14578
                length: 47
              - type: expression_statement
                fields:
                  text: prependPath(ref);
                children: []
                pos: 14634
                length: 17
              pos: 14568
              length: 89
          children: []
          pos: 14512
          length: 145
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: prependPath
              children: []
              pos: 14675
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Reference r
                children: []
                pos: 14687
                length: 11
              pos: 14663
              length: 437
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 14718
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 14727
                            length: 4
                        children: []
                        pos: 14718
                        length: 13
                    children: []
                    pos: 14717
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _path = new LinkedList<Reference>();
                    children: []
                    pos: 14747
                    length: 36
                  pos: 14733
                  length: 60
                pos: 14714
                length: 79
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: _path.size()
                            children: []
                            pos: 15019
                            length: 12
                          right:
                            type: identifier
                            fields:
                              text: MAX_REFS_TO_LIST
                            children: []
                            pos: 15034
                            length: 16
                        children: []
                        pos: 15019
                        length: 31
                    children: []
                    pos: 15018
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _path.addFirst(r);
                    children: []
                    pos: 15066
                    length: 18
                  pos: 15052
                  length: 42
                pos: 15015
                length: 79
              pos: 14704
              length: 396
          children: []
          pos: 14663
          length: 437
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getProcessor
              children: []
              pos: 15365
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15280
              length: 122
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _processor;
                children: []
                pos: 15382
                length: 18
              pos: 15380
              length: 22
          children: []
          pos: 15280
          length: 122
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLocalizedMessage
              children: []
              pos: 15436
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15408
              length: 89
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _buildMessage();
                children: []
                pos: 15468
                length: 23
              pos: 15458
              length: 39
          children: []
          pos: 15408
          length: 89
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getMessage
              children: []
              pos: 15666
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15638
              length: 80
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _buildMessage();
                children: []
                pos: 15689
                length: 23
              pos: 15679
              length: 39
          children: []
          pos: 15638
          length: 80
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _buildMessage
              children: []
              pos: 15741
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 15724
              length: 745
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String msg = super.getMessage();
                children: []
                pos: 15878
                length: 32
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 15923
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 15932
                            length: 4
                        children: []
                        pos: 15923
                        length: 13
                    children: []
                    pos: 15922
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return msg;
                    children: []
                    pos: 15952
                    length: 11
                  pos: 15938
                  length: 35
                pos: 15919
                length: 54
              - type: local_variable_declaration
                fields:
                  text: 'StringBuilder sb = (msg == null) ? new StringBuilder() :
                    new StringBuilder(msg);'
                children: []
                pos: 15982
                length: 80
              - type: expression_statement
                fields:
                  text: 'sb.append(" (through reference chain: ");'
                children: []
                pos: 16333
                length: 41
              - type: expression_statement
                fields:
                  text: sb = getPathReference(sb);
                children: []
                pos: 16383
                length: 26
              - type: expression_statement
                fields:
                  text: sb.append(')');
                children: []
                pos: 16418
                length: 15
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 16442
                length: 21
              pos: 15761
              length: 708
          children: []
          pos: 15724
          length: 745
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 16503
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 16475
              length: 105
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return getClass().getName()+": "+getMessage();'
                children: []
                pos: 16528
                length: 46
              pos: 16518
              length: 62
          children: []
          pos: 16475
          length: 105
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _appendPathDesc
              children: []
              pos: 16769
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 16785
                length: 16
              pos: 16754
              length: 335
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _path
                            children: []
                            pos: 16821
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 16830
                            length: 4
                        children: []
                        pos: 16821
                        length: 13
                    children: []
                    pos: 16820
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 16850
                    length: 7
                  pos: 16836
                  length: 31
                pos: 16817
                length: 50
              - type: local_variable_declaration
                fields:
                  text: Iterator<Reference> it = _path.iterator();
                children: []
                pos: 16876
                length: 42
              - type: while_statement
                fields:
                  text: |-
                    while (it.hasNext()) {
                                sb.append(it.next().toString());
                                if (it.hasNext()) {
                                    sb.append("->");
                                }
                            }
                children: []
                pos: 16927
                length: 156
              pos: 16807
              length: 282
          children: []
          pos: 16754
          length: 335
        pos: 745
        length: 16346
    children: []
    pos: 745
    length: 16346
  pos: 0
  length: 17092
text_diff: |
  --- before
  +++ after
  @@ -127,22 +127,12 @@
                       // butt-ugly for arrays.
                       // 06-Oct-2016, tatu: as per [databind#1403], `getSimpleName()` not so good
                       //   as it drops enclosing class. So let's try bit different approach
  -                    int arrays = 0;
  -                    while (cls.isArray()) {
  -                        cls = cls.getComponentType();
  -                        ++arrays;
  -                    }
  -                    sb.append(cls.getName());
  -                    while (--arrays >= 0) {
  -                        sb.append("[]");
  -                    }
  -                    /* was:
  -                    String pkgName = ClassUtil.getPackageName(cls);
  +                    String pkgName = com.fasterxml.jackson.databind.util.ClassUtil.getPackageName(cls);
                       if (pkgName != null) {
                           sb.append(pkgName);
                           sb.append('.');
                       }
  -                    */
  +                    sb.append(cls.getSimpleName());
                   }
                   sb.append('[');
                   if (_fieldName != null) {
tree_diff: ''
