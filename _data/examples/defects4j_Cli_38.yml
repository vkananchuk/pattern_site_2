---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DefaultParser
        children: []
        pos: 1023
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected CommandLine cmd;
          children: []
          pos: 1110
          length: 26
        - type: field_declaration
          fields:
            text: protected Options options;
          children: []
          pos: 1178
          length: 26
        - type: field_declaration
          fields:
            text: protected boolean stopAtNonOption;
          children: []
          pos: 1420
          length: 34
        - type: field_declaration
          fields:
            text: protected String currentToken;
          children: []
          pos: 1502
          length: 30
        - type: field_declaration
          fields:
            text: protected Option currentOption;
          children: []
          pos: 1574
          length: 31
        - type: field_declaration
          fields:
            text: protected boolean skipParsing;
          children: []
          pos: 1729
          length: 30
        - type: field_declaration
          fields:
            text: protected List expectedOpts;
          children: []
          pos: 1861
          length: 28
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 1915
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 1921
                length: 15
              pos: 1896
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null);
                children: []
                pos: 1994
                length: 39
              pos: 1984
              length: 55
          children: []
          pos: 1896
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2505
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2511
                length: 15
              pos: 2486
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 2607
                length: 52
              pos: 2597
              length: 68
          children: []
          pos: 2486
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2690
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2696
                length: 15
              pos: 2671
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 2794
                length: 56
              pos: 2784
              length: 72
          children: []
          pos: 2671
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3608
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3614
                length: 15
              pos: 3589
              length: 929
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 3747
                length: 23
              - type: expression_statement
                fields:
                  text: this.stopAtNonOption = stopAtNonOption;
                children: []
                pos: 3779
                length: 39
              - type: expression_statement
                fields:
                  text: skipParsing = false;
                children: []
                pos: 3827
                length: 20
              - type: expression_statement
                fields:
                  text: currentOption = null;
                children: []
                pos: 3856
                length: 21
              - type: expression_statement
                fields:
                  text: expectedOpts = new ArrayList(options.getRequiredOptions());
                children: []
                pos: 3886
                length: 59
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (OptionGroup group : options.getOptionGroups())
                            {
                                group.setSelected(null);
                            }
                children: []
                pos: 3997
                length: 108
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 4115
                length: 24
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 4153
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4166
                            length: 4
                        children: []
                        pos: 4153
                        length: 17
                    children: []
                    pos: 4152
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (String argument : arguments)
                                    {
                                        handleToken(argument);
                                    }
                    children: []
                    pos: 4194
                    length: 100
                  pos: 4180
                  length: 124
                pos: 4149
                length: 155
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 4364
                length: 20
              - type: expression_statement
                fields:
                  text: handleProperties(properties);
                children: []
                pos: 4429
                length: 29
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 4468
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 4501
                length: 11
              pos: 3737
              length: 781
          children: []
          pos: 3589
          length: 929
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleProperties
              children: []
              pos: 4702
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 4719
                length: 21
              pos: 4689
              length: 1632
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 4782
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4796
                            length: 4
                        children: []
                        pos: 4782
                        length: 18
                    children: []
                    pos: 4781
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 4824
                    length: 7
                  pos: 4810
                  length: 31
                pos: 4778
                length: 63
              - type: for_statement
                fields:
                  text: |-
                    for (Enumeration<?> e = properties.propertyNames(); e.hasMoreElements();)
                            {
                                String option = e.nextElement().toString();

                                Option opt = options.getOption(option);
                                if (opt == null)
                                {
                                    throw new UnrecognizedOptionException("Default option wasn't defined", option);
                                }

                                // if the option is part of a group, check if another option of the group has been selected
                                OptionGroup group = options.getOptionGroup(opt);
                                boolean selected = group != null && group.getSelected() != null;

                                if (!cmd.hasOption(option) && !selected)
                                {
                                    // get the value from the properties
                                    String value = properties.getProperty(option);

                                    if (opt.hasArg())
                                    {
                                        if (opt.getValues() == null || opt.getValues().length == 0)
                                        {
                                            opt.addValueForProcessing(value);
                                        }
                                    }
                                    else if (!("yes".equalsIgnoreCase(value)
                                            || "true".equalsIgnoreCase(value)
                                            || "1".equalsIgnoreCase(value)))
                                    {
                                        // if the value is not yes, true or 1 then don't add the option to the CommandLine
                                        continue;
                                    }

                                    handleOption(opt);
                                    currentOption = null;
                                }
                            }
                children: []
                pos: 4851
                length: 1464
              pos: 4768
              length: 1553
          children: []
          pos: 4689
          length: 1632
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 6558
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6545
              length: 264
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!expectedOpts.isEmpty()"
                        children: []
                        pos: 6699
                        length: 23
                    children: []
                    pos: 6698
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(expectedOpts);
                    children: []
                    pos: 6746
                    length: 47
                  pos: 6732
                  length: 71
                pos: 6695
                length: 108
              pos: 6615
              length: 194
          children: []
          pos: 6545
          length: 264
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredArgs
              children: []
              pos: 6970
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6957
              length: 215
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 7030
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7047
                                length: 4
                            children: []
                            pos: 7030
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: currentOption.requiresArg()
                            children: []
                            pos: 7055
                            length: 27
                        children: []
                        pos: 7030
                        length: 52
                    children: []
                    pos: 7029
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingArgumentException(currentOption);
                    children: []
                    pos: 7106
                    length: 50
                  pos: 7092
                  length: 74
                pos: 7026
                length: 140
              pos: 7016
              length: 156
          children: []
          pos: 6957
          length: 215
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleToken
              children: []
              pos: 7335
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 7347
                length: 12
              pos: 7322
              length: 889
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: currentToken = token;
                children: []
                pos: 7397
                length: 21
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: skipParsing
                        children: []
                        pos: 7432
                        length: 11
                    children: []
                    pos: 7431
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: cmd.addArg(token);
                    children: []
                    pos: 7467
                    length: 18
                  pos: 7453
                  length: 42
                pos: 7428
                length: 656
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 8098
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8115
                                length: 4
                            children: []
                            pos: 8098
                            length: 21
                          right:
                            type: unary_expression
                            fields:
                              text: "!currentOption.acceptsArg()"
                            children: []
                            pos: 8123
                            length: 27
                        children: []
                        pos: 8098
                        length: 52
                    children: []
                    pos: 8097
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = null;
                    children: []
                    pos: 8174
                    length: 21
                  pos: 8160
                  length: 45
                pos: 8094
                length: 111
              pos: 7387
              length: 824
          children: []
          pos: 7322
          length: 889
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isArgument
              children: []
              pos: 8330
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8341
                length: 12
              pos: 8314
              length: 112
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !isOption(token) || isNegativeNumber(token);
                children: []
                pos: 8369
                length: 51
              pos: 8359
              length: 67
          children: []
          pos: 8314
          length: 112
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isNegativeNumber
              children: []
              pos: 8539
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8556
                length: 12
              pos: 8523
              length: 240
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Double.parseDouble(token);
                      children: []
                      pos: 8610
                      length: 26
                    - type: return_statement
                      fields:
                        text: return true;
                      children: []
                      pos: 8649
                      length: 12
                    pos: 8596
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (NumberFormatException e)
                                  {
                                      return false;
                                  }
                      children: []
                      pos: 8680
                      length: 77
                    pos: 8584
                    length: 173
                children: []
                pos: 8584
                length: 173
              pos: 8574
              length: 189
          children: []
          pos: 8523
          length: 240
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isOption
              children: []
              pos: 8876
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8885
                length: 12
              pos: 8860
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isLongOption(token) || isShortOption(token);
                children: []
                pos: 8913
                length: 51
              pos: 8903
              length: 67
          children: []
          pos: 8860
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isShortOption
              children: []
              pos: 9089
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9103
                length: 12
              pos: 9073
              length: 626
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9192
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9218
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9236
                                length: 1
                            children: []
                            pos: 9218
                            length: 19
                        children: []
                        pos: 9192
                        length: 45
                    children: []
                    pos: 9191
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9261
                    length: 13
                  pos: 9247
                  length: 37
                pos: 9188
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9337
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String optName = pos == -1 ? token.substring(1) : token.substring(1,
                    pos);'
                children: []
                pos: 9375
                length: 74
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: options.hasShortOption(optName)
                        children: []
                        pos: 9462
                        length: 31
                    children: []
                    pos: 9461
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 9517
                    length: 12
                  pos: 9503
                  length: 36
                pos: 9458
                length: 81
              - type: return_statement
                fields:
                  text: return optName.length() > 0 && options.hasShortOption(String.valueOf(optName.charAt(0)));
                children: []
                pos: 9604
                length: 89
              pos: 9121
              length: 578
          children: []
          pos: 9073
          length: 626
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLongOption
              children: []
              pos: 9816
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9829
                length: 12
              pos: 9800
              length: 602
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9861
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9887
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9905
                                length: 1
                            children: []
                            pos: 9887
                            length: 19
                        children: []
                        pos: 9861
                        length: 45
                    children: []
                    pos: 9860
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9930
                    length: 13
                  pos: 9916
                  length: 37
                pos: 9857
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9963
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String t = pos == -1 ? token : token.substring(0, pos);'
                children: []
                pos: 10001
                length: 55
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!options.getMatchingOptions(t).isEmpty()"
                        children: []
                        pos: 10070
                        length: 40
                    children: []
                    pos: 10069
                    length: 42
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 10213
                    length: 12
                  pos: 10120
                  length: 115
                pos: 10066
                length: 307
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 10383
                length: 13
              pos: 9847
              length: 555
          children: []
          pos: 9800
          length: 602
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleUnknownToken
              children: []
              pos: 10841
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 10860
                length: 12
              pos: 10828
              length: 376
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.startsWith("-")
                                children: []
                                pos: 10914
                                length: 21
                              right:
                                type: greater_than
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: token.length()
                                    children: []
                                    pos: 10939
                                    length: 14
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '1'
                                    children: []
                                    pos: 10956
                                    length: 1
                                children: []
                                pos: 10939
                                length: 18
                            children: []
                            pos: 10914
                            length: 43
                          right:
                            type: unary_expression
                            fields:
                              text: "!stopAtNonOption"
                            children: []
                            pos: 10961
                            length: 16
                        children: []
                        pos: 10914
                        length: 63
                    children: []
                    pos: 10913
                    length: 65
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new UnrecognizedOptionException("Unrecognized option:
                        " + token, token);'
                    children: []
                    pos: 11001
                    length: 78
                  pos: 10987
                  length: 102
                pos: 10910
                length: 179
              - type: expression_statement
                fields:
                  text: cmd.addArg(token);
                children: []
                pos: 11099
                length: 18
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: stopAtNonOption
                        children: []
                        pos: 11130
                        length: 15
                    children: []
                    pos: 11129
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: skipParsing = true;
                    children: []
                    pos: 11169
                    length: 19
                  pos: 11155
                  length: 43
                pos: 11126
                length: 72
              pos: 10900
              length: 304
          children: []
          pos: 10828
          length: 376
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOption
              children: []
              pos: 11391
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11408
                length: 12
              pos: 11378
              length: 263
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: token.indexOf('=')
                            children: []
                            pos: 11462
                            length: 18
                          right:
                            type: unary_expression
                            fields:
                              text: "-1"
                            children: []
                            pos: 11484
                            length: 2
                        children: []
                        pos: 11462
                        length: 24
                    children: []
                    pos: 11461
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleLongOptionWithoutEqual(token);
                    children: []
                    pos: 11510
                    length: 36
                  pos: 11496
                  length: 60
                pos: 11458
                length: 177
              pos: 11448
              length: 193
          children: []
          pos: 11378
          length: 263
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithoutEqual
              children: []
              pos: 11823
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11852
                length: 12
              pos: 11810
              length: 492
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(token);
                children: []
                pos: 11902
                length: 62
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 11977
                        length: 22
                    children: []
                    pos: 11976
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 12023
                    length: 33
                  pos: 12009
                  length: 57
                pos: 11973
                length: 323
              pos: 11892
              length: 410
          children: []
          pos: 11810
          length: 492
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithEqual
              children: []
              pos: 12491
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 12517
                length: 12
              pos: 12478
              length: 920
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf('=');
                children: []
                pos: 12567
                length: 29
              - type: local_variable_declaration
                fields:
                  text: String value = token.substring(pos + 1);
                children: []
                pos: 12606
                length: 40
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, pos);
                children: []
                pos: 12656
                length: 37
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(opt);
                children: []
                pos: 12703
                length: 60
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 12776
                        length: 22
                    children: []
                    pos: 12775
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 12822
                    length: 33
                  pos: 12808
                  length: 57
                pos: 12772
                length: 620
              pos: 12557
              length: 841
          children: []
          pos: 12478
          length: 920
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleShortAndLongOption
              children: []
              pos: 13687
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 13712
                length: 12
              pos: 13674
              length: 2869
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 13762
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int pos = t.indexOf('=');
                children: []
                pos: 13815
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: t.length()
                            children: []
                            pos: 13854
                            length: 10
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '1'
                            children: []
                            pos: 13868
                            length: 1
                        children: []
                        pos: 13854
                        length: 15
                    children: []
                    pos: 13853
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: options.hasShortOption(t)
                            children: []
                            pos: 13915
                            length: 25
                        children: []
                        pos: 13914
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: handleOption(options.getOption(t));
                        children: []
                        pos: 13972
                        length: 35
                      pos: 13954
                      length: 67
                    pos: 13911
                    length: 198
                  pos: 13879
                  length: 240
                pos: 13850
                length: 2687
              pos: 13752
              length: 2791
          children: []
          pos: 13674
          length: 2869
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLongPrefix
              children: []
              pos: 16680
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 16694
                length: 12
              pos: 16665
              length: 418
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 16722
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int i;
                children: []
                pos: 16775
                length: 6
              - type: local_variable_declaration
                fields:
                  text: String opt = null;
                children: []
                pos: 16790
                length: 18
              - type: for_statement
                fields:
                  text: |-
                    for (i = t.length() - 2; i > 1; i--)
                            {
                                String prefix = t.substring(0, i);
                                if (options.hasLongOption(prefix))
                                {
                                    opt = prefix;
                                    break;
                                }
                            }
                children: []
                pos: 16817
                length: 231
              - type: return_statement
                fields:
                  text: return opt;
                children: []
                pos: 17066
                length: 11
              pos: 16712
              length: 371
          children: []
          pos: 16665
          length: 418
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isJavaProperty
              children: []
              pos: 17196
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 17211
                length: 12
              pos: 17180
              length: 254
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, 1);
                children: []
                pos: 17239
                length: 35
              - type: local_variable_declaration
                fields:
                  text: Option option = options.getOption(opt);
                children: []
                pos: 17283
                length: 39
              - type: return_statement
                fields:
                  text: return option != null && (option.getArgs() >= 2 || option.getArgs()
                    == Option.UNLIMITED_VALUES);
                children: []
                pos: 17332
                length: 96
              pos: 17229
              length: 205
          children: []
          pos: 17180
          length: 254
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleOption
              children: []
              pos: 17453
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17466
                length: 13
              pos: 17440
              length: 437
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 17583
                length: 20
              - type: expression_statement
                fields:
                  text: option = (Option) option.clone();
                children: []
                pos: 17613
                length: 33
              - type: expression_statement
                fields:
                  text: updateRequiredOptions(option);
                children: []
                pos: 17656
                length: 30
              - type: expression_statement
                fields:
                  text: cmd.addOption(option);
                children: []
                pos: 17696
                length: 22
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.hasArg()
                        children: []
                        pos: 17732
                        length: 15
                    children: []
                    pos: 17731
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = option;
                    children: []
                    pos: 17771
                    length: 23
                  pos: 17757
                  length: 47
                pos: 17728
                length: 143
              pos: 17507
              length: 370
          children: []
          pos: 17440
          length: 437
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: updateRequiredOptions
              children: []
              pos: 18015
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 18037
                length: 13
              pos: 18002
              length: 578
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.isRequired()
                        children: []
                        pos: 18102
                        length: 19
                    children: []
                    pos: 18101
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: expectedOpts.remove(option.getKey());
                    children: []
                    pos: 18145
                    length: 37
                  pos: 18131
                  length: 61
                pos: 18098
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: options.getOptionGroup(option)
                            children: []
                            pos: 18302
                            length: 30
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18336
                            length: 4
                        children: []
                        pos: 18302
                        length: 38
                    children: []
                    pos: 18301
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = options.getOptionGroup(option);
                    children: []
                    pos: 18364
                    length: 51
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 18433
                            length: 18
                        children: []
                        pos: 18432
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: expectedOpts.remove(group);
                        children: []
                        pos: 18483
                        length: 27
                      pos: 18465
                      length: 59
                    pos: 18429
                    length: 95
                  - type: expression_statement
                    fields:
                      text: group.setSelected(option);
                    children: []
                    pos: 18538
                    length: 26
                  pos: 18350
                  length: 224
                pos: 18298
                length: 276
              pos: 18088
              length: 492
          children: []
          pos: 18002
          length: 578
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleConcatenatedOptions
              children: []
              pos: 19965
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 19991
                length: 12
              pos: 19950
              length: 775
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 1; i < token.length(); i++)
                            {
                                String ch = String.valueOf(token.charAt(i));

                                if (options.hasOption(ch))
                                {
                                    handleOption(options.getOption(ch));

                                    if (currentOption != null && token.length() != i + 1)
                                    {
                                        // add the trail as an argument of the option
                                        currentOption.addValueForProcessing(token.substring(i + 1));
                                        break;
                                    }
                                }
                                else
                                {
                                    handleUnknownToken(stopAtNonOption && i > 1 ? token.substring(i) : token);
                                    break;
                                }
                            }
                children: []
                pos: 20041
                length: 678
              pos: 20031
              length: 694
          children: []
          pos: 19950
          length: 775
        pos: 1010
        length: 19717
    children: []
    pos: 1010
    length: 19717
  pos: 0
  length: 20728
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DefaultParser
        children: []
        pos: 1023
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected CommandLine cmd;
          children: []
          pos: 1110
          length: 26
        - type: field_declaration
          fields:
            text: protected Options options;
          children: []
          pos: 1178
          length: 26
        - type: field_declaration
          fields:
            text: protected boolean stopAtNonOption;
          children: []
          pos: 1420
          length: 34
        - type: field_declaration
          fields:
            text: protected String currentToken;
          children: []
          pos: 1502
          length: 30
        - type: field_declaration
          fields:
            text: protected Option currentOption;
          children: []
          pos: 1574
          length: 31
        - type: field_declaration
          fields:
            text: protected boolean skipParsing;
          children: []
          pos: 1729
          length: 30
        - type: field_declaration
          fields:
            text: protected List expectedOpts;
          children: []
          pos: 1861
          length: 28
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 1915
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 1921
                length: 15
              pos: 1896
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null);
                children: []
                pos: 1994
                length: 39
              pos: 1984
              length: 55
          children: []
          pos: 1896
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2505
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2511
                length: 15
              pos: 2486
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 2607
                length: 52
              pos: 2597
              length: 68
          children: []
          pos: 2486
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2690
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2696
                length: 15
              pos: 2671
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 2794
                length: 56
              pos: 2784
              length: 72
          children: []
          pos: 2671
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3608
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3614
                length: 15
              pos: 3589
              length: 929
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 3747
                length: 23
              - type: expression_statement
                fields:
                  text: this.stopAtNonOption = stopAtNonOption;
                children: []
                pos: 3779
                length: 39
              - type: expression_statement
                fields:
                  text: skipParsing = false;
                children: []
                pos: 3827
                length: 20
              - type: expression_statement
                fields:
                  text: currentOption = null;
                children: []
                pos: 3856
                length: 21
              - type: expression_statement
                fields:
                  text: expectedOpts = new ArrayList(options.getRequiredOptions());
                children: []
                pos: 3886
                length: 59
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (OptionGroup group : options.getOptionGroups())
                            {
                                group.setSelected(null);
                            }
                children: []
                pos: 3997
                length: 108
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 4115
                length: 24
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 4153
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4166
                            length: 4
                        children: []
                        pos: 4153
                        length: 17
                    children: []
                    pos: 4152
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (String argument : arguments)
                                    {
                                        handleToken(argument);
                                    }
                    children: []
                    pos: 4194
                    length: 100
                  pos: 4180
                  length: 124
                pos: 4149
                length: 155
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 4364
                length: 20
              - type: expression_statement
                fields:
                  text: handleProperties(properties);
                children: []
                pos: 4429
                length: 29
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 4468
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 4501
                length: 11
              pos: 3737
              length: 781
          children: []
          pos: 3589
          length: 929
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleProperties
              children: []
              pos: 4702
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 4719
                length: 21
              pos: 4689
              length: 1632
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 4782
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4796
                            length: 4
                        children: []
                        pos: 4782
                        length: 18
                    children: []
                    pos: 4781
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 4824
                    length: 7
                  pos: 4810
                  length: 31
                pos: 4778
                length: 63
              - type: for_statement
                fields:
                  text: |-
                    for (Enumeration<?> e = properties.propertyNames(); e.hasMoreElements();)
                            {
                                String option = e.nextElement().toString();

                                Option opt = options.getOption(option);
                                if (opt == null)
                                {
                                    throw new UnrecognizedOptionException("Default option wasn't defined", option);
                                }

                                // if the option is part of a group, check if another option of the group has been selected
                                OptionGroup group = options.getOptionGroup(opt);
                                boolean selected = group != null && group.getSelected() != null;

                                if (!cmd.hasOption(option) && !selected)
                                {
                                    // get the value from the properties
                                    String value = properties.getProperty(option);

                                    if (opt.hasArg())
                                    {
                                        if (opt.getValues() == null || opt.getValues().length == 0)
                                        {
                                            opt.addValueForProcessing(value);
                                        }
                                    }
                                    else if (!("yes".equalsIgnoreCase(value)
                                            || "true".equalsIgnoreCase(value)
                                            || "1".equalsIgnoreCase(value)))
                                    {
                                        // if the value is not yes, true or 1 then don't add the option to the CommandLine
                                        continue;
                                    }

                                    handleOption(opt);
                                    currentOption = null;
                                }
                            }
                children: []
                pos: 4851
                length: 1464
              pos: 4768
              length: 1553
          children: []
          pos: 4689
          length: 1632
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 6558
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6545
              length: 264
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!expectedOpts.isEmpty()"
                        children: []
                        pos: 6699
                        length: 23
                    children: []
                    pos: 6698
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(expectedOpts);
                    children: []
                    pos: 6746
                    length: 47
                  pos: 6732
                  length: 71
                pos: 6695
                length: 108
              pos: 6615
              length: 194
          children: []
          pos: 6545
          length: 264
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredArgs
              children: []
              pos: 6970
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6957
              length: 215
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 7030
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7047
                                length: 4
                            children: []
                            pos: 7030
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: currentOption.requiresArg()
                            children: []
                            pos: 7055
                            length: 27
                        children: []
                        pos: 7030
                        length: 52
                    children: []
                    pos: 7029
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingArgumentException(currentOption);
                    children: []
                    pos: 7106
                    length: 50
                  pos: 7092
                  length: 74
                pos: 7026
                length: 140
              pos: 7016
              length: 156
          children: []
          pos: 6957
          length: 215
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleToken
              children: []
              pos: 7335
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 7347
                length: 12
              pos: 7322
              length: 889
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: currentToken = token;
                children: []
                pos: 7397
                length: 21
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: skipParsing
                        children: []
                        pos: 7432
                        length: 11
                    children: []
                    pos: 7431
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: cmd.addArg(token);
                    children: []
                    pos: 7467
                    length: 18
                  pos: 7453
                  length: 42
                pos: 7428
                length: 656
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 8098
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8115
                                length: 4
                            children: []
                            pos: 8098
                            length: 21
                          right:
                            type: unary_expression
                            fields:
                              text: "!currentOption.acceptsArg()"
                            children: []
                            pos: 8123
                            length: 27
                        children: []
                        pos: 8098
                        length: 52
                    children: []
                    pos: 8097
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = null;
                    children: []
                    pos: 8174
                    length: 21
                  pos: 8160
                  length: 45
                pos: 8094
                length: 111
              pos: 7387
              length: 824
          children: []
          pos: 7322
          length: 889
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isArgument
              children: []
              pos: 8330
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8341
                length: 12
              pos: 8314
              length: 112
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !isOption(token) || isNegativeNumber(token);
                children: []
                pos: 8369
                length: 51
              pos: 8359
              length: 67
          children: []
          pos: 8314
          length: 112
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isNegativeNumber
              children: []
              pos: 8539
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8556
                length: 12
              pos: 8523
              length: 240
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Double.parseDouble(token);
                      children: []
                      pos: 8610
                      length: 26
                    - type: return_statement
                      fields:
                        text: return true;
                      children: []
                      pos: 8649
                      length: 12
                    pos: 8596
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (NumberFormatException e)
                                  {
                                      return false;
                                  }
                      children: []
                      pos: 8680
                      length: 77
                    pos: 8584
                    length: 173
                children: []
                pos: 8584
                length: 173
              pos: 8574
              length: 189
          children: []
          pos: 8523
          length: 240
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isOption
              children: []
              pos: 8876
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8885
                length: 12
              pos: 8860
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isLongOption(token) || isShortOption(token);
                children: []
                pos: 8913
                length: 51
              pos: 8903
              length: 67
          children: []
          pos: 8860
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isShortOption
              children: []
              pos: 9089
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9103
                length: 12
              pos: 9073
              length: 486
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9192
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9218
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9236
                                length: 1
                            children: []
                            pos: 9218
                            length: 19
                        children: []
                        pos: 9192
                        length: 45
                    children: []
                    pos: 9191
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9261
                    length: 13
                  pos: 9247
                  length: 37
                pos: 9188
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9337
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String optName = pos == -1 ? token.substring(1) : token.substring(1,
                    pos);'
                children: []
                pos: 9375
                length: 74
              - type: return_statement
                fields:
                  text: return options.hasShortOption(optName);
                children: []
                pos: 9458
                length: 39
              pos: 9121
              length: 438
          children: []
          pos: 9073
          length: 486
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLongOption
              children: []
              pos: 9676
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9689
                length: 12
              pos: 9660
              length: 602
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9721
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9747
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9765
                                length: 1
                            children: []
                            pos: 9747
                            length: 19
                        children: []
                        pos: 9721
                        length: 45
                    children: []
                    pos: 9720
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9790
                    length: 13
                  pos: 9776
                  length: 37
                pos: 9717
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9823
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String t = pos == -1 ? token : token.substring(0, pos);'
                children: []
                pos: 9861
                length: 55
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!options.getMatchingOptions(t).isEmpty()"
                        children: []
                        pos: 9930
                        length: 40
                    children: []
                    pos: 9929
                    length: 42
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 10073
                    length: 12
                  pos: 9980
                  length: 115
                pos: 9926
                length: 307
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 10243
                length: 13
              pos: 9707
              length: 555
          children: []
          pos: 9660
          length: 602
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleUnknownToken
              children: []
              pos: 10701
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 10720
                length: 12
              pos: 10688
              length: 376
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.startsWith("-")
                                children: []
                                pos: 10774
                                length: 21
                              right:
                                type: greater_than
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: token.length()
                                    children: []
                                    pos: 10799
                                    length: 14
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '1'
                                    children: []
                                    pos: 10816
                                    length: 1
                                children: []
                                pos: 10799
                                length: 18
                            children: []
                            pos: 10774
                            length: 43
                          right:
                            type: unary_expression
                            fields:
                              text: "!stopAtNonOption"
                            children: []
                            pos: 10821
                            length: 16
                        children: []
                        pos: 10774
                        length: 63
                    children: []
                    pos: 10773
                    length: 65
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new UnrecognizedOptionException("Unrecognized option:
                        " + token, token);'
                    children: []
                    pos: 10861
                    length: 78
                  pos: 10847
                  length: 102
                pos: 10770
                length: 179
              - type: expression_statement
                fields:
                  text: cmd.addArg(token);
                children: []
                pos: 10959
                length: 18
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: stopAtNonOption
                        children: []
                        pos: 10990
                        length: 15
                    children: []
                    pos: 10989
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: skipParsing = true;
                    children: []
                    pos: 11029
                    length: 19
                  pos: 11015
                  length: 43
                pos: 10986
                length: 72
              pos: 10760
              length: 304
          children: []
          pos: 10688
          length: 376
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOption
              children: []
              pos: 11251
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11268
                length: 12
              pos: 11238
              length: 263
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: token.indexOf('=')
                            children: []
                            pos: 11322
                            length: 18
                          right:
                            type: unary_expression
                            fields:
                              text: "-1"
                            children: []
                            pos: 11344
                            length: 2
                        children: []
                        pos: 11322
                        length: 24
                    children: []
                    pos: 11321
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleLongOptionWithoutEqual(token);
                    children: []
                    pos: 11370
                    length: 36
                  pos: 11356
                  length: 60
                pos: 11318
                length: 177
              pos: 11308
              length: 193
          children: []
          pos: 11238
          length: 263
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithoutEqual
              children: []
              pos: 11683
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11712
                length: 12
              pos: 11670
              length: 492
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(token);
                children: []
                pos: 11762
                length: 62
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 11837
                        length: 22
                    children: []
                    pos: 11836
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 11883
                    length: 33
                  pos: 11869
                  length: 57
                pos: 11833
                length: 323
              pos: 11752
              length: 410
          children: []
          pos: 11670
          length: 492
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithEqual
              children: []
              pos: 12351
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 12377
                length: 12
              pos: 12338
              length: 920
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf('=');
                children: []
                pos: 12427
                length: 29
              - type: local_variable_declaration
                fields:
                  text: String value = token.substring(pos + 1);
                children: []
                pos: 12466
                length: 40
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, pos);
                children: []
                pos: 12516
                length: 37
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(opt);
                children: []
                pos: 12563
                length: 60
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 12636
                        length: 22
                    children: []
                    pos: 12635
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 12682
                    length: 33
                  pos: 12668
                  length: 57
                pos: 12632
                length: 620
              pos: 12417
              length: 841
          children: []
          pos: 12338
          length: 920
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleShortAndLongOption
              children: []
              pos: 13547
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 13572
                length: 12
              pos: 13534
              length: 2869
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 13622
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int pos = t.indexOf('=');
                children: []
                pos: 13675
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: t.length()
                            children: []
                            pos: 13714
                            length: 10
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '1'
                            children: []
                            pos: 13728
                            length: 1
                        children: []
                        pos: 13714
                        length: 15
                    children: []
                    pos: 13713
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: options.hasShortOption(t)
                            children: []
                            pos: 13775
                            length: 25
                        children: []
                        pos: 13774
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: handleOption(options.getOption(t));
                        children: []
                        pos: 13832
                        length: 35
                      pos: 13814
                      length: 67
                    pos: 13771
                    length: 198
                  pos: 13739
                  length: 240
                pos: 13710
                length: 2687
              pos: 13612
              length: 2791
          children: []
          pos: 13534
          length: 2869
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLongPrefix
              children: []
              pos: 16540
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 16554
                length: 12
              pos: 16525
              length: 418
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 16582
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int i;
                children: []
                pos: 16635
                length: 6
              - type: local_variable_declaration
                fields:
                  text: String opt = null;
                children: []
                pos: 16650
                length: 18
              - type: for_statement
                fields:
                  text: |-
                    for (i = t.length() - 2; i > 1; i--)
                            {
                                String prefix = t.substring(0, i);
                                if (options.hasLongOption(prefix))
                                {
                                    opt = prefix;
                                    break;
                                }
                            }
                children: []
                pos: 16677
                length: 231
              - type: return_statement
                fields:
                  text: return opt;
                children: []
                pos: 16926
                length: 11
              pos: 16572
              length: 371
          children: []
          pos: 16525
          length: 418
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isJavaProperty
              children: []
              pos: 17056
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 17071
                length: 12
              pos: 17040
              length: 254
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, 1);
                children: []
                pos: 17099
                length: 35
              - type: local_variable_declaration
                fields:
                  text: Option option = options.getOption(opt);
                children: []
                pos: 17143
                length: 39
              - type: return_statement
                fields:
                  text: return option != null && (option.getArgs() >= 2 || option.getArgs()
                    == Option.UNLIMITED_VALUES);
                children: []
                pos: 17192
                length: 96
              pos: 17089
              length: 205
          children: []
          pos: 17040
          length: 254
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleOption
              children: []
              pos: 17313
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17326
                length: 13
              pos: 17300
              length: 437
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 17443
                length: 20
              - type: expression_statement
                fields:
                  text: option = (Option) option.clone();
                children: []
                pos: 17473
                length: 33
              - type: expression_statement
                fields:
                  text: updateRequiredOptions(option);
                children: []
                pos: 17516
                length: 30
              - type: expression_statement
                fields:
                  text: cmd.addOption(option);
                children: []
                pos: 17556
                length: 22
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.hasArg()
                        children: []
                        pos: 17592
                        length: 15
                    children: []
                    pos: 17591
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = option;
                    children: []
                    pos: 17631
                    length: 23
                  pos: 17617
                  length: 47
                pos: 17588
                length: 143
              pos: 17367
              length: 370
          children: []
          pos: 17300
          length: 437
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: updateRequiredOptions
              children: []
              pos: 17875
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17897
                length: 13
              pos: 17862
              length: 578
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.isRequired()
                        children: []
                        pos: 17962
                        length: 19
                    children: []
                    pos: 17961
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: expectedOpts.remove(option.getKey());
                    children: []
                    pos: 18005
                    length: 37
                  pos: 17991
                  length: 61
                pos: 17958
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: options.getOptionGroup(option)
                            children: []
                            pos: 18162
                            length: 30
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18196
                            length: 4
                        children: []
                        pos: 18162
                        length: 38
                    children: []
                    pos: 18161
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = options.getOptionGroup(option);
                    children: []
                    pos: 18224
                    length: 51
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 18293
                            length: 18
                        children: []
                        pos: 18292
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: expectedOpts.remove(group);
                        children: []
                        pos: 18343
                        length: 27
                      pos: 18325
                      length: 59
                    pos: 18289
                    length: 95
                  - type: expression_statement
                    fields:
                      text: group.setSelected(option);
                    children: []
                    pos: 18398
                    length: 26
                  pos: 18210
                  length: 224
                pos: 18158
                length: 276
              pos: 17948
              length: 492
          children: []
          pos: 17862
          length: 578
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleConcatenatedOptions
              children: []
              pos: 19825
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 19851
                length: 12
              pos: 19810
              length: 775
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 1; i < token.length(); i++)
                            {
                                String ch = String.valueOf(token.charAt(i));

                                if (options.hasOption(ch))
                                {
                                    handleOption(options.getOption(ch));

                                    if (currentOption != null && token.length() != i + 1)
                                    {
                                        // add the trail as an argument of the option
                                        currentOption.addValueForProcessing(token.substring(i + 1));
                                        break;
                                    }
                                }
                                else
                                {
                                    handleUnknownToken(stopAtNonOption && i > 1 ? token.substring(i) : token);
                                    break;
                                }
                            }
                children: []
                pos: 19901
                length: 678
              pos: 19891
              length: 694
          children: []
          pos: 19810
          length: 775
        pos: 1010
        length: 19577
    children: []
    pos: 1010
    length: 19577
  pos: 0
  length: 20588
text_diff: "--- before\n+++ after\n@@ -307,12 +307,8 @@\n         // remove leading
  \"-\" and \"=value\"\n         int pos = token.indexOf(\"=\");\n         String
  optName = pos == -1 ? token.substring(1) : token.substring(1, pos);\n-        if
  (options.hasShortOption(optName))\n-        {\n-            return true;\n-        }\n+
  \       return options.hasShortOption(optName);\n         // check for several concatenated
  short options\n-        return optName.length() > 0 && options.hasShortOption(String.valueOf(optName.charAt(0)));\n
  \    }\n \n     /**\n"
tree_diff: |+
  New cluster:
  UPDATE from return optName.length() > 0 && options.hasShortOption(String.valueOf(optName.charAt(0))); to return options.hasShortOption(optName);
  ------------
  ===
  update-node
  ---
  return_statement: return optName.length() > 0 && options.hasShortOption(String.valueOf(optName.charAt(0))); [9604,9693]
  replace return optName.length() > 0 && options.hasShortOption(String.valueOf(optName.charAt(0))); by return options.hasShortOption(optName);

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [9458,9539]
      parenthesized_expression [9461,9494]
          method_invocation: options.hasShortOption(optName) [9462,9493]
      block [9503,9539]
          return_statement: return true; [9517,9529]

...
