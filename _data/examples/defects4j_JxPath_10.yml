---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: CoreOperationRelationalExpression
        children: []
        pos: 1340
        length: 33
      body:
        type: class_body
        fields: {}
        children:
        - type: constructor_declaration
          fields:
            text: |-
              protected CoreOperationRelationalExpression(Expression[] args) {
                      super(args);
                  }
          children: []
          pos: 1403
          length: 91
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeValue
              children: []
              pos: 1520
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 1533
                length: 19
              pos: 1500
              length: 184
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return compute(args[0].compute(context), args[1].compute(context))
                                    ? Boolean.TRUE : Boolean.FALSE;
                children: []
                pos: 1564
                length: 114
              pos: 1554
              length: 130
          children: []
          pos: 1500
          length: 184
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrecedence
              children: []
              pos: 1710
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1690
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 3;
                children: []
                pos: 1736
                length: 9
              pos: 1726
              length: 25
          children: []
          pos: 1690
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSymmetric
              children: []
              pos: 1781
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1757
              length: 67
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 1805
                length: 13
              pos: 1795
              length: 29
          children: []
          pos: 1757
          length: 67
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: evaluateCompare
              children: []
              pos: 1857
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int compare
                children: []
                pos: 1873
                length: 11
              pos: 1830
              length: 56
          children: []
          pos: 1830
          length: 56
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compute
              children: []
              pos: 1908
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object left
                children: []
                pos: 1916
                length: 11
              pos: 1892
              length: 988
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: left = reduce(left);
                children: []
                pos: 1953
                length: 20
              - type: expression_statement
                fields:
                  text: right = reduce(right);
                children: []
                pos: 1982
                length: 22
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: left instanceof InitialContext
                        children: []
                        pos: 2018
                        length: 30
                    children: []
                    pos: 2017
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: "((InitialContext) left).reset();"
                    children: []
                    pos: 2064
                    length: 32
                  pos: 2050
                  length: 56
                pos: 2014
                length: 92
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: right instanceof InitialContext
                        children: []
                        pos: 2119
                        length: 31
                    children: []
                    pos: 2118
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: "((InitialContext) right).reset();"
                    children: []
                    pos: 2166
                    length: 33
                  pos: 2152
                  length: 57
                pos: 2115
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: left instanceof Iterator
                            children: []
                            pos: 2222
                            length: 24
                          right:
                            type: instanceof_expression
                            fields:
                              text: right instanceof Iterator
                            children: []
                            pos: 2250
                            length: 25
                        children: []
                        pos: 2222
                        length: 53
                    children: []
                    pos: 2221
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return findMatch((Iterator) left, (Iterator) right);
                    children: []
                    pos: 2291
                    length: 52
                  pos: 2277
                  length: 76
                pos: 2218
                length: 135
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: left instanceof Iterator
                        children: []
                        pos: 2366
                        length: 24
                    children: []
                    pos: 2365
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return containsMatch((Iterator) left, right);
                    children: []
                    pos: 2406
                    length: 45
                  pos: 2392
                  length: 69
                pos: 2362
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: right instanceof Iterator
                        children: []
                        pos: 2474
                        length: 25
                    children: []
                    pos: 2473
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return containsMatch((Iterator) right, left);
                    children: []
                    pos: 2515
                    length: 45
                  pos: 2501
                  length: 69
                pos: 2470
                length: 100
              - type: local_variable_declaration
                fields:
                  text: double ld = InfoSetUtil.doubleValue(left);
                children: []
                pos: 2579
                length: 42
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Double.isNaN(ld)
                        children: []
                        pos: 2634
                        length: 16
                    children: []
                    pos: 2633
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 2666
                    length: 13
                  pos: 2652
                  length: 37
                pos: 2630
                length: 59
              - type: local_variable_declaration
                fields:
                  text: double rd = InfoSetUtil.doubleValue(right);
                children: []
                pos: 2698
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Double.isNaN(rd)
                        children: []
                        pos: 2754
                        length: 16
                    children: []
                    pos: 2753
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 2786
                    length: 13
                  pos: 2772
                  length: 37
                pos: 2750
                length: 59
              - type: return_statement
                fields:
                  text: 'return evaluateCompare(ld == rd ? 0 : ld < rd ? -1 : 1);'
                children: []
                pos: 2818
                length: 56
              pos: 1943
              length: 937
          children: []
          pos: 1892
          length: 988
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: reduce
              children: []
              pos: 2901
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object o
                children: []
                pos: 2908
                length: 8
              pos: 2886
              length: 259
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: o instanceof SelfContext
                        children: []
                        pos: 2932
                        length: 24
                    children: []
                    pos: 2931
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: o = ((EvalContext) o).getSingleNodePointer();
                    children: []
                    pos: 2972
                    length: 45
                  pos: 2958
                  length: 69
                pos: 2928
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: o instanceof Collection
                        children: []
                        pos: 3040
                        length: 23
                    children: []
                    pos: 3039
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: o = ((Collection) o).iterator();
                    children: []
                    pos: 3079
                    length: 32
                  pos: 3065
                  length: 56
                pos: 3036
                length: 85
              - type: return_statement
                fields:
                  text: return o;
                children: []
                pos: 3130
                length: 9
              pos: 2918
              length: 227
          children: []
          pos: 2886
          length: 259
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: containsMatch
              children: []
              pos: 3167
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator it
                children: []
                pos: 3181
                length: 11
              pos: 3151
              length: 253
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (it.hasNext()) {
                                Object element = it.next();
                                if (compute(element, value)) {
                                    return true;
                                }
                            }
                children: []
                pos: 3218
                length: 158
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3385
                length: 13
              pos: 3208
              length: 196
          children: []
          pos: 3151
          length: 253
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: findMatch
              children: []
              pos: 3426
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator lit
                children: []
                pos: 3436
                length: 12
              pos: 3410
              length: 344
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: HashSet left = new HashSet();
                children: []
                pos: 3474
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (lit.hasNext()) {
                                left.add(lit.next());
                            }
                children: []
                pos: 3512
                length: 67
              - type: while_statement
                fields:
                  text: |-
                    while (rit.hasNext()) {
                                if (containsMatch(left.iterator(), rit.next())) {
                                    return true;
                                }
                            }
                children: []
                pos: 3588
                length: 138
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3735
                length: 13
              pos: 3464
              length: 290
          children: []
          pos: 3410
          length: 344
        pos: 1318
        length: 2439
    children: []
    pos: 1318
    length: 2439
  pos: 0
  length: 3758
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: CoreOperationRelationalExpression
        children: []
        pos: 1340
        length: 33
      body:
        type: class_body
        fields: {}
        children:
        - type: constructor_declaration
          fields:
            text: |-
              protected CoreOperationRelationalExpression(Expression[] args) {
                      super(args);
                  }
          children: []
          pos: 1403
          length: 91
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: computeValue
              children: []
              pos: 1520
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: EvalContext context
                children: []
                pos: 1533
                length: 19
              pos: 1500
              length: 195
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: "return compute(args[0].computeValue(context), args[1].computeValue(context))
                    \n                ? Boolean.TRUE : Boolean.FALSE;"
                children: []
                pos: 1564
                length: 125
              pos: 1554
              length: 141
          children: []
          pos: 1500
          length: 195
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getPrecedence
              children: []
              pos: 1721
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1701
              length: 61
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return 3;
                children: []
                pos: 1747
                length: 9
              pos: 1737
              length: 25
          children: []
          pos: 1701
          length: 61
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isSymmetric
              children: []
              pos: 1792
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1768
              length: 67
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 1816
                length: 13
              pos: 1806
              length: 29
          children: []
          pos: 1768
          length: 67
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: evaluateCompare
              children: []
              pos: 1868
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: int compare
                children: []
                pos: 1884
                length: 11
              pos: 1841
              length: 56
          children: []
          pos: 1841
          length: 56
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: compute
              children: []
              pos: 1919
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object left
                children: []
                pos: 1927
                length: 11
              pos: 1903
              length: 988
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: left = reduce(left);
                children: []
                pos: 1964
                length: 20
              - type: expression_statement
                fields:
                  text: right = reduce(right);
                children: []
                pos: 1993
                length: 22
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: left instanceof InitialContext
                        children: []
                        pos: 2029
                        length: 30
                    children: []
                    pos: 2028
                    length: 32
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: "((InitialContext) left).reset();"
                    children: []
                    pos: 2075
                    length: 32
                  pos: 2061
                  length: 56
                pos: 2025
                length: 92
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: right instanceof InitialContext
                        children: []
                        pos: 2130
                        length: 31
                    children: []
                    pos: 2129
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: "((InitialContext) right).reset();"
                    children: []
                    pos: 2177
                    length: 33
                  pos: 2163
                  length: 57
                pos: 2126
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: instanceof_expression
                            fields:
                              text: left instanceof Iterator
                            children: []
                            pos: 2233
                            length: 24
                          right:
                            type: instanceof_expression
                            fields:
                              text: right instanceof Iterator
                            children: []
                            pos: 2261
                            length: 25
                        children: []
                        pos: 2233
                        length: 53
                    children: []
                    pos: 2232
                    length: 55
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return findMatch((Iterator) left, (Iterator) right);
                    children: []
                    pos: 2302
                    length: 52
                  pos: 2288
                  length: 76
                pos: 2229
                length: 135
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: left instanceof Iterator
                        children: []
                        pos: 2377
                        length: 24
                    children: []
                    pos: 2376
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return containsMatch((Iterator) left, right);
                    children: []
                    pos: 2417
                    length: 45
                  pos: 2403
                  length: 69
                pos: 2373
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: right instanceof Iterator
                        children: []
                        pos: 2485
                        length: 25
                    children: []
                    pos: 2484
                    length: 27
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return containsMatch((Iterator) right, left);
                    children: []
                    pos: 2526
                    length: 45
                  pos: 2512
                  length: 69
                pos: 2481
                length: 100
              - type: local_variable_declaration
                fields:
                  text: double ld = InfoSetUtil.doubleValue(left);
                children: []
                pos: 2590
                length: 42
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Double.isNaN(ld)
                        children: []
                        pos: 2645
                        length: 16
                    children: []
                    pos: 2644
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 2677
                    length: 13
                  pos: 2663
                  length: 37
                pos: 2641
                length: 59
              - type: local_variable_declaration
                fields:
                  text: double rd = InfoSetUtil.doubleValue(right);
                children: []
                pos: 2709
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Double.isNaN(rd)
                        children: []
                        pos: 2765
                        length: 16
                    children: []
                    pos: 2764
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 2797
                    length: 13
                  pos: 2783
                  length: 37
                pos: 2761
                length: 59
              - type: return_statement
                fields:
                  text: 'return evaluateCompare(ld == rd ? 0 : ld < rd ? -1 : 1);'
                children: []
                pos: 2829
                length: 56
              pos: 1954
              length: 937
          children: []
          pos: 1903
          length: 988
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: reduce
              children: []
              pos: 2912
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object o
                children: []
                pos: 2919
                length: 8
              pos: 2897
              length: 259
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: o instanceof SelfContext
                        children: []
                        pos: 2943
                        length: 24
                    children: []
                    pos: 2942
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: o = ((EvalContext) o).getSingleNodePointer();
                    children: []
                    pos: 2983
                    length: 45
                  pos: 2969
                  length: 69
                pos: 2939
                length: 99
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: instanceof_expression
                        fields:
                          text: o instanceof Collection
                        children: []
                        pos: 3051
                        length: 23
                    children: []
                    pos: 3050
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: o = ((Collection) o).iterator();
                    children: []
                    pos: 3090
                    length: 32
                  pos: 3076
                  length: 56
                pos: 3047
                length: 85
              - type: return_statement
                fields:
                  text: return o;
                children: []
                pos: 3141
                length: 9
              pos: 2929
              length: 227
          children: []
          pos: 2897
          length: 259
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: containsMatch
              children: []
              pos: 3178
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator it
                children: []
                pos: 3192
                length: 11
              pos: 3162
              length: 253
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (it.hasNext()) {
                                Object element = it.next();
                                if (compute(element, value)) {
                                    return true;
                                }
                            }
                children: []
                pos: 3229
                length: 158
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3396
                length: 13
              pos: 3219
              length: 196
          children: []
          pos: 3162
          length: 253
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: findMatch
              children: []
              pos: 3437
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Iterator lit
                children: []
                pos: 3447
                length: 12
              pos: 3421
              length: 344
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: HashSet left = new HashSet();
                children: []
                pos: 3485
                length: 29
              - type: while_statement
                fields:
                  text: |-
                    while (lit.hasNext()) {
                                left.add(lit.next());
                            }
                children: []
                pos: 3523
                length: 67
              - type: while_statement
                fields:
                  text: |-
                    while (rit.hasNext()) {
                                if (containsMatch(left.iterator(), rit.next())) {
                                    return true;
                                }
                            }
                children: []
                pos: 3599
                length: 138
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 3746
                length: 13
              pos: 3475
              length: 290
          children: []
          pos: 3421
          length: 344
        pos: 1318
        length: 2450
    children: []
    pos: 1318
    length: 2450
  pos: 0
  length: 3769
text_diff: "--- before\n+++ after\n@@ -39,7 +39,7 @@\n     }\n \n     public final
  Object computeValue(EvalContext context) {\n-        return compute(args[0].compute(context),
  args[1].compute(context))\n+        return compute(args[0].computeValue(context),
  args[1].computeValue(context)) \n                 ? Boolean.TRUE : Boolean.FALSE;\n
  \    }\n \n"
tree_diff: "New cluster:\nUPDATE from return compute(args[0].compute(context), args[1].compute(context))\n
  \               ? Boolean.TRUE : Boolean.FALSE; to return compute(args[0].computeValue(context),
  args[1].computeValue(context)) \n                ? Boolean.TRUE : Boolean.FALSE;\n------------\n===\nupdate-node\n---\nreturn_statement:
  return compute(args[0].compute(context), args[1].compute(context))\n                ?
  Boolean.TRUE : Boolean.FALSE; [1564,1678]\nreplace return compute(args[0].compute(context),
  args[1].compute(context))\n                ? Boolean.TRUE : Boolean.FALSE; by return
  compute(args[0].computeValue(context), args[1].computeValue(context)) \n                ?
  Boolean.TRUE : Boolean.FALSE;\n\n"
