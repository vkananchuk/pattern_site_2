---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ISO8601Utils
        children: []
        pos: 724
        length: 12
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final String UTC_ID = "UTC";
          children: []
          pos: 861
          length: 43
        - type: field_declaration
          fields:
            text: private static final TimeZone TIMEZONE_UTC = TimeZone.getTimeZone(UTC_ID);
          children: []
          pos: 1010
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 1490
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 1497
                length: 9
              pos: 1469
              length: 96
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return format(date, false, TIMEZONE_UTC);
                children: []
                pos: 1518
                length: 41
              pos: 1508
              length: 57
          children: []
          pos: 1469
          length: 96
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 1860
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 1867
                length: 9
              pos: 1839
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return format(date, millis, TIMEZONE_UTC);
                children: []
                pos: 1904
                length: 42
              pos: 1894
              length: 58
          children: []
          pos: 1839
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 2325
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 2332
                length: 9
              pos: 2304
              length: 1779
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Calendar calendar = new GregorianCalendar(tz, Locale.US);
                children: []
                pos: 2382
                length: 57
              - type: expression_statement
                fields:
                  text: calendar.setTime(date);
                children: []
                pos: 2448
                length: 23
              - type: local_variable_declaration
                fields:
                  text: int capacity = "yyyy-MM-ddThh:mm:ss".length();
                children: []
                pos: 2565
                length: 46
              - type: expression_statement
                fields:
                  text: 'capacity += millis ? ".sss".length() : 0;'
                children: []
                pos: 2620
                length: 41
              - type: expression_statement
                fields:
                  text: 'capacity += tz.getRawOffset() == 0 ? "Z".length() : "+hh:mm".length();'
                children: []
                pos: 2670
                length: 70
              - type: local_variable_declaration
                fields:
                  text: StringBuilder formatted = new StringBuilder(capacity);
                children: []
                pos: 2749
                length: 54
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.YEAR), "yyyy".length());
                children: []
                pos: 2813
                length: 64
              - type: expression_statement
                fields:
                  text: formatted.append('-');
                children: []
                pos: 2886
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.MONTH) + 1, "MM".length());
                children: []
                pos: 2917
                length: 67
              - type: expression_statement
                fields:
                  text: formatted.append('-');
                children: []
                pos: 2993
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.DAY_OF_MONTH), "dd".length());
                children: []
                pos: 3024
                length: 70
              - type: expression_statement
                fields:
                  text: formatted.append('T');
                children: []
                pos: 3103
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.HOUR_OF_DAY), "hh".length());
                children: []
                pos: 3134
                length: 69
              - type: expression_statement
                fields:
                  text: formatted.append(':');
                children: []
                pos: 3212
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.MINUTE), "mm".length());
                children: []
                pos: 3243
                length: 64
              - type: expression_statement
                fields:
                  text: formatted.append(':');
                children: []
                pos: 3316
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.SECOND), "ss".length());
                children: []
                pos: 3347
                length: 64
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: millis
                        children: []
                        pos: 3424
                        length: 6
                    children: []
                    pos: 3423
                    length: 8
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: formatted.append('.');
                    children: []
                    pos: 3446
                    length: 22
                  - type: expression_statement
                    fields:
                      text: padInt(formatted, calendar.get(Calendar.MILLISECOND),
                        "sss".length());
                    children: []
                    pos: 3481
                    length: 70
                  pos: 3432
                  length: 129
                pos: 3420
                length: 141
              - type: local_variable_declaration
                fields:
                  text: int offset = tz.getOffset(calendar.getTimeInMillis());
                children: []
                pos: 3571
                length: 54
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: offset
                            children: []
                            pos: 3638
                            length: 6
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3648
                            length: 1
                        children: []
                        pos: 3638
                        length: 11
                    children: []
                    pos: 3637
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int hours = Math.abs((offset / (60 * 1000)) / 60);
                    children: []
                    pos: 3665
                    length: 50
                  - type: local_variable_declaration
                    fields:
                      text: int minutes = Math.abs((offset / (60 * 1000)) % 60);
                    children: []
                    pos: 3728
                    length: 52
                  - type: expression_statement
                    fields:
                      text: 'formatted.append(offset < 0 ? ''-'' : ''+'');'
                    children: []
                    pos: 3793
                    length: 41
                  - type: expression_statement
                    fields:
                      text: padInt(formatted, hours, "hh".length());
                    children: []
                    pos: 3847
                    length: 40
                  - type: expression_statement
                    fields:
                      text: formatted.append(':');
                    children: []
                    pos: 3900
                    length: 22
                  - type: expression_statement
                    fields:
                      text: padInt(formatted, minutes, "mm".length());
                    children: []
                    pos: 3935
                    length: 42
                  pos: 3651
                  length: 336
                pos: 3634
                length: 405
              - type: return_statement
                fields:
                  text: return formatted.toString();
                children: []
                pos: 4049
                length: 28
              pos: 2372
              length: 1711
          children: []
          pos: 2304
          length: 1779
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4705
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String date
                children: []
                pos: 4711
                length: 11
              pos: 4686
              length: 7067
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Exception fail = null;
                children: []
                pos: 4775
                length: 22
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: int offset = pos.getIndex();
                      children: []
                      pos: 4824
                      length: 28
                    - type: local_variable_declaration
                      fields:
                        text: int year = parseInt(date, offset, offset += 4);
                      children: []
                      pos: 4894
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: checkOffset(date, offset, '-')
                              children: []
                              pos: 4958
                              length: 30
                          children: []
                          pos: 4957
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: offset += 1;
                          children: []
                          pos: 5008
                          length: 12
                        pos: 4990
                        length: 44
                      pos: 4954
                      length: 80
                    - type: local_variable_declaration
                      fields:
                        text: int month = parseInt(date, offset, offset += 2);
                      children: []
                      pos: 5077
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: checkOffset(date, offset, '-')
                              children: []
                              pos: 5142
                              length: 30
                          children: []
                          pos: 5141
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: offset += 1;
                          children: []
                          pos: 5192
                          length: 12
                        pos: 5174
                        length: 44
                      pos: 5138
                      length: 80
                    - type: local_variable_declaration
                      fields:
                        text: int day = parseInt(date, offset, offset += 2);
                      children: []
                      pos: 5259
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: int hour = 0;
                      children: []
                      pos: 5352
                      length: 13
                    - type: local_variable_declaration
                      fields:
                        text: int minutes = 0;
                      children: []
                      pos: 5378
                      length: 16
                    - type: local_variable_declaration
                      fields:
                        text: int seconds = 0;
                      children: []
                      pos: 5407
                      length: 16
                    - type: local_variable_declaration
                      fields:
                        text: int milliseconds = 0;
                      children: []
                      pos: 5436
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: boolean hasT = checkOffset(date, offset, 'T');
                      children: []
                      pos: 5629
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: unary_expression
                                  fields:
                                    text: "!hasT"
                                  children: []
                                  pos: 5705
                                  length: 5
                                right:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: less_or_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: date.length()
                                          children: []
                                          pos: 5715
                                          length: 13
                                        right:
                                          type: identifier
                                          fields:
                                            text: offset
                                          children: []
                                          pos: 5732
                                          length: 6
                                      children: []
                                      pos: 5715
                                      length: 23
                                  children: []
                                  pos: 5714
                                  length: 25
                              children: []
                              pos: 5705
                              length: 34
                          children: []
                          pos: 5704
                          length: 36
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Calendar calendar = new GregorianCalendar(year,
                              month - 1, day);
                          children: []
                          pos: 5759
                          length: 64
                        - type: expression_statement
                          fields:
                            text: pos.setIndex(offset);
                          children: []
                          pos: 5841
                          length: 21
                        - type: return_statement
                          fields:
                            text: return calendar.getTime();
                          children: []
                          pos: 5879
                          length: 26
                        pos: 5741
                        length: 178
                      pos: 5701
                      length: 218
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: hasT
                              children: []
                              pos: 5937
                              length: 4
                          children: []
                          pos: 5936
                          length: 6
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: hour = parseInt(date, offset += 1, offset += 2);
                          children: []
                          pos: 6030
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: checkOffset(date, offset, ':')
                                  children: []
                                  pos: 6099
                                  length: 30
                              children: []
                              pos: 6098
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: offset += 1;
                              children: []
                              pos: 6153
                              length: 12
                            pos: 6131
                            length: 52
                          pos: 6095
                          length: 88
                        - type: expression_statement
                          fields:
                            text: minutes = parseInt(date, offset, offset += 2);
                          children: []
                          pos: 6201
                          length: 46
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: checkOffset(date, offset, ':')
                                  children: []
                                  pos: 6268
                                  length: 30
                              children: []
                              pos: 6267
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: offset += 1;
                              children: []
                              pos: 6322
                              length: 12
                            pos: 6300
                            length: 52
                          pos: 6264
                          length: 88
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: greater_than
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: date.length()
                                      children: []
                                      pos: 6432
                                      length: 13
                                    right:
                                      type: identifier
                                      fields:
                                        text: offset
                                      children: []
                                      pos: 6448
                                      length: 6
                                  children: []
                                  pos: 6432
                                  length: 22
                              children: []
                              pos: 6431
                              length: 24
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: char c = date.charAt(offset);
                              children: []
                              pos: 6478
                              length: 29
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: c
                                                  children: []
                                                  pos: 6532
                                                  length: 1
                                                right:
                                                  type: character_literal
                                                  fields:
                                                    text: "'Z'"
                                                  children: []
                                                  pos: 6537
                                                  length: 3
                                              children: []
                                              pos: 6532
                                              length: 8
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: c
                                                  children: []
                                                  pos: 6544
                                                  length: 1
                                                right:
                                                  type: character_literal
                                                  fields:
                                                    text: "'+'"
                                                  children: []
                                                  pos: 6549
                                                  length: 3
                                              children: []
                                              pos: 6544
                                              length: 8
                                          children: []
                                          pos: 6532
                                          length: 20
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: c
                                              children: []
                                              pos: 6556
                                              length: 1
                                            right:
                                              type: character_literal
                                              fields:
                                                text: "'-'"
                                              children: []
                                              pos: 6561
                                              length: 3
                                          children: []
                                          pos: 6556
                                          length: 8
                                      children: []
                                      pos: 6532
                                      length: 32
                                  children: []
                                  pos: 6531
                                  length: 34
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: seconds = parseInt(date, offset, offset
                                      += 2);
                                  children: []
                                  pos: 6592
                                  length: 46
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: greater_than
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: seconds
                                                  children: []
                                                  pos: 6667
                                                  length: 7
                                                right:
                                                  type: decimal_integer_literal
                                                  fields:
                                                    text: '59'
                                                  children: []
                                                  pos: 6677
                                                  length: 2
                                              children: []
                                              pos: 6667
                                              length: 12
                                            right:
                                              type: less_than
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: seconds
                                                  children: []
                                                  pos: 6683
                                                  length: 7
                                                right:
                                                  type: decimal_integer_literal
                                                  fields:
                                                    text: '63'
                                                  children: []
                                                  pos: 6693
                                                  length: 2
                                              children: []
                                              pos: 6683
                                              length: 12
                                          children: []
                                          pos: 6667
                                          length: 28
                                      children: []
                                      pos: 6666
                                      length: 30
                                  children:
                                  - type: expression_statement
                                    fields:
                                      text: seconds = 59;
                                    children: []
                                    pos: 6697
                                    length: 13
                                  pos: 6663
                                  length: 47
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: method_invocation
                                          fields:
                                            text: checkOffset(date, offset, '.')
                                          children: []
                                          pos: 6842
                                          length: 30
                                      children: []
                                      pos: 6841
                                      length: 32
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: offset += 1;
                                      children: []
                                      pos: 6904
                                      length: 12
                                    - type: local_variable_declaration
                                      fields:
                                        text: int endOffset = indexOfNonDigit(date,
                                          offset + 1);
                                      children: []
                                      pos: 6945
                                      length: 50
                                    - type: local_variable_declaration
                                      fields:
                                        text: int parseEndOffset = Math.min(endOffset,
                                          offset + 3);
                                      children: []
                                      pos: 7053
                                      length: 53
                                    - type: local_variable_declaration
                                      fields:
                                        text: int fraction = parseInt(date, offset,
                                          parseEndOffset);
                                      children: []
                                      pos: 7159
                                      length: 54
                                    - type: switch_expression
                                      fields:
                                        condition:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: minus
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: parseEndOffset
                                                  children: []
                                                  pos: 7313
                                                  length: 14
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: offset
                                                  children: []
                                                  pos: 7330
                                                  length: 6
                                              children: []
                                              pos: 7313
                                              length: 23
                                          children: []
                                          pos: 7312
                                          length: 25
                                        body:
                                          type: switch_block
                                          fields:
                                            text: |-
                                              { // number of digits parsed
                                                                          case 2:
                                                                              milliseconds = fraction * 10;
                                                                              break;
                                                                          case 1:
                                                                              milliseconds = fraction * 100;
                                                                              break;
                                                                          default:
                                                                              milliseconds = fraction;
                                                                          }
                                          children: []
                                          pos: 7338
                                          length: 427
                                      children: []
                                      pos: 7305
                                      length: 460
                                    - type: expression_statement
                                      fields:
                                        text: offset = endOffset;
                                      children: []
                                      pos: 7794
                                      length: 19
                                    pos: 6874
                                    length: 965
                                  pos: 6838
                                  length: 1001
                                pos: 6566
                                length: 1295
                              pos: 6528
                              length: 1333
                            pos: 6456
                            length: 1423
                          pos: 6428
                          length: 1451
                        pos: 5943
                        length: 1950
                      pos: 5933
                      length: 1960
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_or_equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: date.length()
                                  children: []
                                  pos: 7943
                                  length: 13
                                right:
                                  type: identifier
                                  fields:
                                    text: offset
                                  children: []
                                  pos: 7960
                                  length: 6
                              children: []
                              pos: 7943
                              length: 23
                          children: []
                          pos: 7942
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: throw_statement
                          fields:
                            text: throw new IllegalArgumentException("No time zone
                              indicator");
                          children: []
                          pos: 7986
                          length: 61
                        pos: 7968
                        length: 93
                      pos: 7939
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: TimeZone timezone = null;
                      children: []
                      pos: 8075
                      length: 25
                    - type: local_variable_declaration
                      fields:
                        text: char timezoneIndicator = date.charAt(offset);
                      children: []
                      pos: 8113
                      length: 45
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: timezoneIndicator
                                  children: []
                                  pos: 8176
                                  length: 17
                                right:
                                  type: character_literal
                                  fields:
                                    text: "'Z'"
                                  children: []
                                  pos: 8197
                                  length: 3
                              children: []
                              pos: 8176
                              length: 24
                          children: []
                          pos: 8175
                          length: 26
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: timezone = TIMEZONE_UTC;
                          children: []
                          pos: 8220
                          length: 24
                        - type: expression_statement
                          fields:
                            text: offset += 1;
                          children: []
                          pos: 8261
                          length: 12
                        pos: 8202
                        length: 85
                      pos: 8172
                      length: 2292
                    - type: local_variable_declaration
                      fields:
                        text: Calendar calendar = new GregorianCalendar(timezone);
                      children: []
                      pos: 10478
                      length: 52
                    - type: expression_statement
                      fields:
                        text: calendar.setLenient(false);
                      children: []
                      pos: 10543
                      length: 27
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.YEAR, year);
                      children: []
                      pos: 10583
                      length: 34
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.MONTH, month - 1);
                      children: []
                      pos: 10630
                      length: 40
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.DAY_OF_MONTH, day);
                      children: []
                      pos: 10683
                      length: 41
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.HOUR_OF_DAY, hour);
                      children: []
                      pos: 10737
                      length: 41
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.MINUTE, minutes);
                      children: []
                      pos: 10791
                      length: 39
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.SECOND, seconds);
                      children: []
                      pos: 10843
                      length: 39
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.MILLISECOND, milliseconds);
                      children: []
                      pos: 10895
                      length: 49
                    - type: expression_statement
                      fields:
                        text: pos.setIndex(offset);
                      children: []
                      pos: 10958
                      length: 21
                    - type: return_statement
                      fields:
                        text: return calendar.getTime();
                      children: []
                      pos: 10992
                      length: 26
                    pos: 4810
                    length: 6360
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IndexOutOfBoundsException e) {
                                      fail = e;
                                  }
                      children: []
                      pos: 11171
                      length: 69
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (NumberFormatException e) {
                                      fail = e;
                                  }
                      children: []
                      pos: 11241
                      length: 65
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IllegalArgumentException e) {
                                      fail = e;
                                  }
                      children: []
                      pos: 11307
                      length: 68
                    pos: 4806
                    length: 6569
                children: []
                pos: 4806
                length: 6569
              - type: local_variable_declaration
                fields:
                  text: 'String input = (date == null) ? null : (''"'' + date + "''");'
                children: []
                pos: 11384
                length: 58
              - type: local_variable_declaration
                fields:
                  text: String msg = fail.getMessage();
                children: []
                pos: 11451
                length: 31
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: msg
                                children: []
                                pos: 11495
                                length: 3
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 11502
                                length: 4
                            children: []
                            pos: 11495
                            length: 11
                          right:
                            type: method_invocation
                            fields:
                              text: msg.isEmpty()
                            children: []
                            pos: 11510
                            length: 13
                        children: []
                        pos: 11495
                        length: 28
                    children: []
                    pos: 11494
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: msg = "("+fail.getClass().getName()+")";
                    children: []
                    pos: 11539
                    length: 40
                  pos: 11525
                  length: 64
                pos: 11491
                length: 98
              - type: local_variable_declaration
                fields:
                  text: 'ParseException ex = new ParseException("Failed to parse date
                    [" + input + "]: " + msg, pos.getIndex());'
                children: []
                pos: 11598
                length: 103
              - type: expression_statement
                fields:
                  text: ex.initCause(fail);
                children: []
                pos: 11710
                length: 19
              - type: throw_statement
                fields:
                  text: throw ex;
                children: []
                pos: 11738
                length: 9
              pos: 4765
              length: 6988
          children: []
          pos: 4686
          length: 7067
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkOffset
              children: []
              pos: 12134
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String value
                children: []
                pos: 12146
                length: 12
              pos: 12111
              length: 163
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return (offset < value.length()) && (value.charAt(offset)
                    == expected);
                children: []
                pos: 12197
                length: 71
              pos: 12187
              length: 87
          children: []
          pos: 12111
          length: 163
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseInt
              children: []
              pos: 12658
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String value
                children: []
                pos: 12667
                length: 12
              pos: 12639
              length: 1041
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: or
                            fields:
                              left:
                                type: less_than
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: beginIndex
                                    children: []
                                    pos: 12754
                                    length: 10
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '0'
                                    children: []
                                    pos: 12767
                                    length: 1
                                children: []
                                pos: 12754
                                length: 14
                              right:
                                type: greater_than
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: endIndex
                                    children: []
                                    pos: 12772
                                    length: 8
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: value.length()
                                    children: []
                                    pos: 12783
                                    length: 14
                                children: []
                                pos: 12772
                                length: 25
                            children: []
                            pos: 12754
                            length: 43
                          right:
                            type: greater_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: beginIndex
                                children: []
                                pos: 12801
                                length: 10
                              right:
                                type: identifier
                                fields:
                                  text: endIndex
                                children: []
                                pos: 12814
                                length: 8
                            children: []
                            pos: 12801
                            length: 21
                        children: []
                        pos: 12754
                        length: 68
                    children: []
                    pos: 12753
                    length: 70
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new NumberFormatException(value);
                    children: []
                    pos: 12838
                    length: 39
                  pos: 12824
                  length: 63
                pos: 12750
                length: 137
              - type: local_variable_declaration
                fields:
                  text: int i = beginIndex;
                children: []
                pos: 13001
                length: 19
              - type: local_variable_declaration
                fields:
                  text: int result = 0;
                children: []
                pos: 13029
                length: 15
              - type: local_variable_declaration
                fields:
                  text: int digit;
                children: []
                pos: 13053
                length: 10
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: i
                            children: []
                            pos: 13076
                            length: 1
                          right:
                            type: identifier
                            fields:
                              text: endIndex
                            children: []
                            pos: 13080
                            length: 8
                        children: []
                        pos: 13076
                        length: 12
                    children: []
                    pos: 13075
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: digit = Character.digit(value.charAt(i++), 10);
                    children: []
                    pos: 13104
                    length: 47
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: less_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: digit
                                children: []
                                pos: 13168
                                length: 5
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 13176
                                length: 1
                            children: []
                            pos: 13168
                            length: 9
                        children: []
                        pos: 13167
                        length: 11
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: throw_statement
                        fields:
                          text: 'throw new NumberFormatException("Invalid number:
                            " + value.substring(beginIndex, endIndex));'
                        children: []
                        pos: 13197
                        length: 92
                      pos: 13179
                      length: 124
                    pos: 13164
                    length: 139
                  - type: expression_statement
                    fields:
                      text: result = -digit;
                    children: []
                    pos: 13316
                    length: 16
                  pos: 13090
                  length: 252
                pos: 13072
                length: 270
              - type: while_statement
                fields:
                  text: |-
                    while (i < endIndex) {
                                digit = Character.digit(value.charAt(i++), 10);
                                if (digit < 0) {
                                    throw new NumberFormatException("Invalid number: " + value.substring(beginIndex, endIndex));
                                }
                                result *= 10;
                                result -= digit;
                            }
                children: []
                pos: 13351
                length: 299
              - type: return_statement
                fields:
                  text: return -result;
                children: []
                pos: 13659
                length: 15
              pos: 12740
              length: 940
          children: []
          pos: 12639
          length: 1041
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: padInt
              children: []
              pos: 13948
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder buffer
                children: []
                pos: 13955
                length: 20
              pos: 13928
              length: 268
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String strValue = Integer.toString(value);
                children: []
                pos: 14010
                length: 42
              - type: for_statement
                fields:
                  text: |-
                    for (int i = length - strValue.length(); i > 0; i--) {
                                buffer.append('0');
                            }
                children: []
                pos: 14061
                length: 96
              - type: expression_statement
                fields:
                  text: buffer.append(strValue);
                children: []
                pos: 14166
                length: 24
              pos: 14000
              length: 196
          children: []
          pos: 13928
          length: 268
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: indexOfNonDigit
              children: []
              pos: 14340
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String string
                children: []
                pos: 14356
                length: 13
              pos: 14321
              length: 253
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = offset; i < string.length(); i++) {
                                char c = string.charAt(i);
                                if (c < '0' || c > '9') return i;
                            }
                children: []
                pos: 14393
                length: 143
              - type: return_statement
                fields:
                  text: return string.length();
                children: []
                pos: 14545
                length: 23
              pos: 14383
              length: 191
          children: []
          pos: 14321
          length: 253
        pos: 711
        length: 13866
    children: []
    pos: 711
    length: 13866
  pos: 0
  length: 14578
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: ISO8601Utils
        children: []
        pos: 724
        length: 12
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final String UTC_ID = "UTC";
          children: []
          pos: 861
          length: 43
        - type: field_declaration
          fields:
            text: private static final TimeZone TIMEZONE_UTC = TimeZone.getTimeZone(UTC_ID);
          children: []
          pos: 1010
          length: 74
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 1490
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 1497
                length: 9
              pos: 1469
              length: 96
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return format(date, false, TIMEZONE_UTC);
                children: []
                pos: 1518
                length: 41
              pos: 1508
              length: 57
          children: []
          pos: 1469
          length: 96
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 1860
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 1867
                length: 9
              pos: 1839
              length: 113
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return format(date, millis, TIMEZONE_UTC);
                children: []
                pos: 1904
                length: 42
              pos: 1894
              length: 58
          children: []
          pos: 1839
          length: 113
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: format
              children: []
              pos: 2325
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Date date
                children: []
                pos: 2332
                length: 9
              pos: 2304
              length: 1779
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Calendar calendar = new GregorianCalendar(tz, Locale.US);
                children: []
                pos: 2382
                length: 57
              - type: expression_statement
                fields:
                  text: calendar.setTime(date);
                children: []
                pos: 2448
                length: 23
              - type: local_variable_declaration
                fields:
                  text: int capacity = "yyyy-MM-ddThh:mm:ss".length();
                children: []
                pos: 2565
                length: 46
              - type: expression_statement
                fields:
                  text: 'capacity += millis ? ".sss".length() : 0;'
                children: []
                pos: 2620
                length: 41
              - type: expression_statement
                fields:
                  text: 'capacity += tz.getRawOffset() == 0 ? "Z".length() : "+hh:mm".length();'
                children: []
                pos: 2670
                length: 70
              - type: local_variable_declaration
                fields:
                  text: StringBuilder formatted = new StringBuilder(capacity);
                children: []
                pos: 2749
                length: 54
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.YEAR), "yyyy".length());
                children: []
                pos: 2813
                length: 64
              - type: expression_statement
                fields:
                  text: formatted.append('-');
                children: []
                pos: 2886
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.MONTH) + 1, "MM".length());
                children: []
                pos: 2917
                length: 67
              - type: expression_statement
                fields:
                  text: formatted.append('-');
                children: []
                pos: 2993
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.DAY_OF_MONTH), "dd".length());
                children: []
                pos: 3024
                length: 70
              - type: expression_statement
                fields:
                  text: formatted.append('T');
                children: []
                pos: 3103
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.HOUR_OF_DAY), "hh".length());
                children: []
                pos: 3134
                length: 69
              - type: expression_statement
                fields:
                  text: formatted.append(':');
                children: []
                pos: 3212
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.MINUTE), "mm".length());
                children: []
                pos: 3243
                length: 64
              - type: expression_statement
                fields:
                  text: formatted.append(':');
                children: []
                pos: 3316
                length: 22
              - type: expression_statement
                fields:
                  text: padInt(formatted, calendar.get(Calendar.SECOND), "ss".length());
                children: []
                pos: 3347
                length: 64
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: millis
                        children: []
                        pos: 3424
                        length: 6
                    children: []
                    pos: 3423
                    length: 8
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: formatted.append('.');
                    children: []
                    pos: 3446
                    length: 22
                  - type: expression_statement
                    fields:
                      text: padInt(formatted, calendar.get(Calendar.MILLISECOND),
                        "sss".length());
                    children: []
                    pos: 3481
                    length: 70
                  pos: 3432
                  length: 129
                pos: 3420
                length: 141
              - type: local_variable_declaration
                fields:
                  text: int offset = tz.getOffset(calendar.getTimeInMillis());
                children: []
                pos: 3571
                length: 54
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: offset
                            children: []
                            pos: 3638
                            length: 6
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 3648
                            length: 1
                        children: []
                        pos: 3638
                        length: 11
                    children: []
                    pos: 3637
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: int hours = Math.abs((offset / (60 * 1000)) / 60);
                    children: []
                    pos: 3665
                    length: 50
                  - type: local_variable_declaration
                    fields:
                      text: int minutes = Math.abs((offset / (60 * 1000)) % 60);
                    children: []
                    pos: 3728
                    length: 52
                  - type: expression_statement
                    fields:
                      text: 'formatted.append(offset < 0 ? ''-'' : ''+'');'
                    children: []
                    pos: 3793
                    length: 41
                  - type: expression_statement
                    fields:
                      text: padInt(formatted, hours, "hh".length());
                    children: []
                    pos: 3847
                    length: 40
                  - type: expression_statement
                    fields:
                      text: formatted.append(':');
                    children: []
                    pos: 3900
                    length: 22
                  - type: expression_statement
                    fields:
                      text: padInt(formatted, minutes, "mm".length());
                    children: []
                    pos: 3935
                    length: 42
                  pos: 3651
                  length: 336
                pos: 3634
                length: 405
              - type: return_statement
                fields:
                  text: return formatted.toString();
                children: []
                pos: 4049
                length: 28
              pos: 2372
              length: 1711
          children: []
          pos: 2304
          length: 1779
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4705
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String date
                children: []
                pos: 4711
                length: 11
              pos: 4686
              length: 6963
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Exception fail = null;
                children: []
                pos: 4775
                length: 22
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: int offset = pos.getIndex();
                      children: []
                      pos: 4824
                      length: 28
                    - type: local_variable_declaration
                      fields:
                        text: int year = parseInt(date, offset, offset += 4);
                      children: []
                      pos: 4894
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: checkOffset(date, offset, '-')
                              children: []
                              pos: 4958
                              length: 30
                          children: []
                          pos: 4957
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: offset += 1;
                          children: []
                          pos: 5008
                          length: 12
                        pos: 4990
                        length: 44
                      pos: 4954
                      length: 80
                    - type: local_variable_declaration
                      fields:
                        text: int month = parseInt(date, offset, offset += 2);
                      children: []
                      pos: 5077
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: checkOffset(date, offset, '-')
                              children: []
                              pos: 5142
                              length: 30
                          children: []
                          pos: 5141
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: offset += 1;
                          children: []
                          pos: 5192
                          length: 12
                        pos: 5174
                        length: 44
                      pos: 5138
                      length: 80
                    - type: local_variable_declaration
                      fields:
                        text: int day = parseInt(date, offset, offset += 2);
                      children: []
                      pos: 5259
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: int hour = 0;
                      children: []
                      pos: 5352
                      length: 13
                    - type: local_variable_declaration
                      fields:
                        text: int minutes = 0;
                      children: []
                      pos: 5378
                      length: 16
                    - type: local_variable_declaration
                      fields:
                        text: int seconds = 0;
                      children: []
                      pos: 5407
                      length: 16
                    - type: local_variable_declaration
                      fields:
                        text: int milliseconds = 0;
                      children: []
                      pos: 5436
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: boolean hasT = checkOffset(date, offset, 'T');
                      children: []
                      pos: 5629
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: unary_expression
                                  fields:
                                    text: "!hasT"
                                  children: []
                                  pos: 5705
                                  length: 5
                                right:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: less_or_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: date.length()
                                          children: []
                                          pos: 5715
                                          length: 13
                                        right:
                                          type: identifier
                                          fields:
                                            text: offset
                                          children: []
                                          pos: 5732
                                          length: 6
                                      children: []
                                      pos: 5715
                                      length: 23
                                  children: []
                                  pos: 5714
                                  length: 25
                              children: []
                              pos: 5705
                              length: 34
                          children: []
                          pos: 5704
                          length: 36
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Calendar calendar = new GregorianCalendar(year,
                              month - 1, day);
                          children: []
                          pos: 5759
                          length: 64
                        - type: expression_statement
                          fields:
                            text: pos.setIndex(offset);
                          children: []
                          pos: 5841
                          length: 21
                        - type: return_statement
                          fields:
                            text: return calendar.getTime();
                          children: []
                          pos: 5879
                          length: 26
                        pos: 5741
                        length: 178
                      pos: 5701
                      length: 218
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: hasT
                              children: []
                              pos: 5937
                              length: 4
                          children: []
                          pos: 5936
                          length: 6
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: hour = parseInt(date, offset += 1, offset += 2);
                          children: []
                          pos: 6030
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: checkOffset(date, offset, ':')
                                  children: []
                                  pos: 6099
                                  length: 30
                              children: []
                              pos: 6098
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: offset += 1;
                              children: []
                              pos: 6153
                              length: 12
                            pos: 6131
                            length: 52
                          pos: 6095
                          length: 88
                        - type: expression_statement
                          fields:
                            text: minutes = parseInt(date, offset, offset += 2);
                          children: []
                          pos: 6201
                          length: 46
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: checkOffset(date, offset, ':')
                                  children: []
                                  pos: 6268
                                  length: 30
                              children: []
                              pos: 6267
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: offset += 1;
                              children: []
                              pos: 6322
                              length: 12
                            pos: 6300
                            length: 52
                          pos: 6264
                          length: 88
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: greater_than
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: date.length()
                                      children: []
                                      pos: 6432
                                      length: 13
                                    right:
                                      type: identifier
                                      fields:
                                        text: offset
                                      children: []
                                      pos: 6448
                                      length: 6
                                  children: []
                                  pos: 6432
                                  length: 22
                              children: []
                              pos: 6431
                              length: 24
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: char c = date.charAt(offset);
                              children: []
                              pos: 6478
                              length: 29
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: c
                                                  children: []
                                                  pos: 6532
                                                  length: 1
                                                right:
                                                  type: character_literal
                                                  fields:
                                                    text: "'Z'"
                                                  children: []
                                                  pos: 6537
                                                  length: 3
                                              children: []
                                              pos: 6532
                                              length: 8
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: c
                                                  children: []
                                                  pos: 6544
                                                  length: 1
                                                right:
                                                  type: character_literal
                                                  fields:
                                                    text: "'+'"
                                                  children: []
                                                  pos: 6549
                                                  length: 3
                                              children: []
                                              pos: 6544
                                              length: 8
                                          children: []
                                          pos: 6532
                                          length: 20
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: c
                                              children: []
                                              pos: 6556
                                              length: 1
                                            right:
                                              type: character_literal
                                              fields:
                                                text: "'-'"
                                              children: []
                                              pos: 6561
                                              length: 3
                                          children: []
                                          pos: 6556
                                          length: 8
                                      children: []
                                      pos: 6532
                                      length: 32
                                  children: []
                                  pos: 6531
                                  length: 34
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: seconds = parseInt(date, offset, offset
                                      += 2);
                                  children: []
                                  pos: 6592
                                  length: 46
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: greater_than
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: seconds
                                                  children: []
                                                  pos: 6667
                                                  length: 7
                                                right:
                                                  type: decimal_integer_literal
                                                  fields:
                                                    text: '59'
                                                  children: []
                                                  pos: 6677
                                                  length: 2
                                              children: []
                                              pos: 6667
                                              length: 12
                                            right:
                                              type: less_than
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: seconds
                                                  children: []
                                                  pos: 6683
                                                  length: 7
                                                right:
                                                  type: decimal_integer_literal
                                                  fields:
                                                    text: '63'
                                                  children: []
                                                  pos: 6693
                                                  length: 2
                                              children: []
                                              pos: 6683
                                              length: 12
                                          children: []
                                          pos: 6667
                                          length: 28
                                      children: []
                                      pos: 6666
                                      length: 30
                                  children:
                                  - type: expression_statement
                                    fields:
                                      text: seconds = 59;
                                    children: []
                                    pos: 6697
                                    length: 13
                                  pos: 6663
                                  length: 47
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: method_invocation
                                          fields:
                                            text: checkOffset(date, offset, '.')
                                          children: []
                                          pos: 6842
                                          length: 30
                                      children: []
                                      pos: 6841
                                      length: 32
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: offset += 1;
                                      children: []
                                      pos: 6904
                                      length: 12
                                    - type: local_variable_declaration
                                      fields:
                                        text: int endOffset = indexOfNonDigit(date,
                                          offset + 1);
                                      children: []
                                      pos: 6945
                                      length: 50
                                    - type: local_variable_declaration
                                      fields:
                                        text: int parseEndOffset = Math.min(endOffset,
                                          offset + 3);
                                      children: []
                                      pos: 7053
                                      length: 53
                                    - type: local_variable_declaration
                                      fields:
                                        text: int fraction = parseInt(date, offset,
                                          parseEndOffset);
                                      children: []
                                      pos: 7159
                                      length: 54
                                    - type: switch_expression
                                      fields:
                                        condition:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: minus
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: parseEndOffset
                                                  children: []
                                                  pos: 7313
                                                  length: 14
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: offset
                                                  children: []
                                                  pos: 7330
                                                  length: 6
                                              children: []
                                              pos: 7313
                                              length: 23
                                          children: []
                                          pos: 7312
                                          length: 25
                                        body:
                                          type: switch_block
                                          fields:
                                            text: |-
                                              { // number of digits parsed
                                                                          case 2:
                                                                              milliseconds = fraction * 10;
                                                                              break;
                                                                          case 1:
                                                                              milliseconds = fraction * 100;
                                                                              break;
                                                                          default:
                                                                              milliseconds = fraction;
                                                                          }
                                          children: []
                                          pos: 7338
                                          length: 427
                                      children: []
                                      pos: 7305
                                      length: 460
                                    - type: expression_statement
                                      fields:
                                        text: offset = endOffset;
                                      children: []
                                      pos: 7794
                                      length: 19
                                    pos: 6874
                                    length: 965
                                  pos: 6838
                                  length: 1001
                                pos: 6566
                                length: 1295
                              pos: 6528
                              length: 1333
                            pos: 6456
                            length: 1423
                          pos: 6428
                          length: 1451
                        pos: 5943
                        length: 1950
                      pos: 5933
                      length: 1960
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: less_or_equals
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: date.length()
                                  children: []
                                  pos: 7943
                                  length: 13
                                right:
                                  type: identifier
                                  fields:
                                    text: offset
                                  children: []
                                  pos: 7960
                                  length: 6
                              children: []
                              pos: 7943
                              length: 23
                          children: []
                          pos: 7942
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: throw_statement
                          fields:
                            text: throw new IllegalArgumentException("No time zone
                              indicator");
                          children: []
                          pos: 7986
                          length: 61
                        pos: 7968
                        length: 93
                      pos: 7939
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: TimeZone timezone = null;
                      children: []
                      pos: 8075
                      length: 25
                    - type: local_variable_declaration
                      fields:
                        text: char timezoneIndicator = date.charAt(offset);
                      children: []
                      pos: 8113
                      length: 45
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: timezoneIndicator
                                  children: []
                                  pos: 8176
                                  length: 17
                                right:
                                  type: character_literal
                                  fields:
                                    text: "'Z'"
                                  children: []
                                  pos: 8197
                                  length: 3
                              children: []
                              pos: 8176
                              length: 24
                          children: []
                          pos: 8175
                          length: 26
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: timezone = TIMEZONE_UTC;
                          children: []
                          pos: 8220
                          length: 24
                        - type: expression_statement
                          fields:
                            text: offset += 1;
                          children: []
                          pos: 8261
                          length: 12
                        pos: 8202
                        length: 85
                      pos: 8172
                      length: 2188
                    - type: local_variable_declaration
                      fields:
                        text: Calendar calendar = new GregorianCalendar(timezone);
                      children: []
                      pos: 10374
                      length: 52
                    - type: expression_statement
                      fields:
                        text: calendar.setLenient(false);
                      children: []
                      pos: 10439
                      length: 27
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.YEAR, year);
                      children: []
                      pos: 10479
                      length: 34
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.MONTH, month - 1);
                      children: []
                      pos: 10526
                      length: 40
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.DAY_OF_MONTH, day);
                      children: []
                      pos: 10579
                      length: 41
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.HOUR_OF_DAY, hour);
                      children: []
                      pos: 10633
                      length: 41
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.MINUTE, minutes);
                      children: []
                      pos: 10687
                      length: 39
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.SECOND, seconds);
                      children: []
                      pos: 10739
                      length: 39
                    - type: expression_statement
                      fields:
                        text: calendar.set(Calendar.MILLISECOND, milliseconds);
                      children: []
                      pos: 10791
                      length: 49
                    - type: expression_statement
                      fields:
                        text: pos.setIndex(offset);
                      children: []
                      pos: 10854
                      length: 21
                    - type: return_statement
                      fields:
                        text: return calendar.getTime();
                      children: []
                      pos: 10888
                      length: 26
                    pos: 4810
                    length: 6256
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IndexOutOfBoundsException e) {
                                      fail = e;
                                  }
                      children: []
                      pos: 11067
                      length: 69
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (NumberFormatException e) {
                                      fail = e;
                                  }
                      children: []
                      pos: 11137
                      length: 65
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (IllegalArgumentException e) {
                                      fail = e;
                                  }
                      children: []
                      pos: 11203
                      length: 68
                    pos: 4806
                    length: 6465
                children: []
                pos: 4806
                length: 6465
              - type: local_variable_declaration
                fields:
                  text: 'String input = (date == null) ? null : (''"'' + date + "''");'
                children: []
                pos: 11280
                length: 58
              - type: local_variable_declaration
                fields:
                  text: String msg = fail.getMessage();
                children: []
                pos: 11347
                length: 31
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: msg
                                children: []
                                pos: 11391
                                length: 3
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 11398
                                length: 4
                            children: []
                            pos: 11391
                            length: 11
                          right:
                            type: method_invocation
                            fields:
                              text: msg.isEmpty()
                            children: []
                            pos: 11406
                            length: 13
                        children: []
                        pos: 11391
                        length: 28
                    children: []
                    pos: 11390
                    length: 30
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: msg = "("+fail.getClass().getName()+")";
                    children: []
                    pos: 11435
                    length: 40
                  pos: 11421
                  length: 64
                pos: 11387
                length: 98
              - type: local_variable_declaration
                fields:
                  text: 'ParseException ex = new ParseException("Failed to parse date
                    [" + input + "]: " + msg, pos.getIndex());'
                children: []
                pos: 11494
                length: 103
              - type: expression_statement
                fields:
                  text: ex.initCause(fail);
                children: []
                pos: 11606
                length: 19
              - type: throw_statement
                fields:
                  text: throw ex;
                children: []
                pos: 11634
                length: 9
              pos: 4765
              length: 6884
          children: []
          pos: 4686
          length: 6963
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkOffset
              children: []
              pos: 12030
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String value
                children: []
                pos: 12042
                length: 12
              pos: 12007
              length: 163
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return (offset < value.length()) && (value.charAt(offset)
                    == expected);
                children: []
                pos: 12093
                length: 71
              pos: 12083
              length: 87
          children: []
          pos: 12007
          length: 163
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parseInt
              children: []
              pos: 12554
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String value
                children: []
                pos: 12563
                length: 12
              pos: 12535
              length: 1041
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: or
                            fields:
                              left:
                                type: less_than
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: beginIndex
                                    children: []
                                    pos: 12650
                                    length: 10
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '0'
                                    children: []
                                    pos: 12663
                                    length: 1
                                children: []
                                pos: 12650
                                length: 14
                              right:
                                type: greater_than
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: endIndex
                                    children: []
                                    pos: 12668
                                    length: 8
                                  right:
                                    type: method_invocation
                                    fields:
                                      text: value.length()
                                    children: []
                                    pos: 12679
                                    length: 14
                                children: []
                                pos: 12668
                                length: 25
                            children: []
                            pos: 12650
                            length: 43
                          right:
                            type: greater_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: beginIndex
                                children: []
                                pos: 12697
                                length: 10
                              right:
                                type: identifier
                                fields:
                                  text: endIndex
                                children: []
                                pos: 12710
                                length: 8
                            children: []
                            pos: 12697
                            length: 21
                        children: []
                        pos: 12650
                        length: 68
                    children: []
                    pos: 12649
                    length: 70
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new NumberFormatException(value);
                    children: []
                    pos: 12734
                    length: 39
                  pos: 12720
                  length: 63
                pos: 12646
                length: 137
              - type: local_variable_declaration
                fields:
                  text: int i = beginIndex;
                children: []
                pos: 12897
                length: 19
              - type: local_variable_declaration
                fields:
                  text: int result = 0;
                children: []
                pos: 12925
                length: 15
              - type: local_variable_declaration
                fields:
                  text: int digit;
                children: []
                pos: 12949
                length: 10
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: less_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: i
                            children: []
                            pos: 12972
                            length: 1
                          right:
                            type: identifier
                            fields:
                              text: endIndex
                            children: []
                            pos: 12976
                            length: 8
                        children: []
                        pos: 12972
                        length: 12
                    children: []
                    pos: 12971
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: digit = Character.digit(value.charAt(i++), 10);
                    children: []
                    pos: 13000
                    length: 47
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: less_than
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: digit
                                children: []
                                pos: 13064
                                length: 5
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 13072
                                length: 1
                            children: []
                            pos: 13064
                            length: 9
                        children: []
                        pos: 13063
                        length: 11
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: throw_statement
                        fields:
                          text: 'throw new NumberFormatException("Invalid number:
                            " + value.substring(beginIndex, endIndex));'
                        children: []
                        pos: 13093
                        length: 92
                      pos: 13075
                      length: 124
                    pos: 13060
                    length: 139
                  - type: expression_statement
                    fields:
                      text: result = -digit;
                    children: []
                    pos: 13212
                    length: 16
                  pos: 12986
                  length: 252
                pos: 12968
                length: 270
              - type: while_statement
                fields:
                  text: |-
                    while (i < endIndex) {
                                digit = Character.digit(value.charAt(i++), 10);
                                if (digit < 0) {
                                    throw new NumberFormatException("Invalid number: " + value.substring(beginIndex, endIndex));
                                }
                                result *= 10;
                                result -= digit;
                            }
                children: []
                pos: 13247
                length: 299
              - type: return_statement
                fields:
                  text: return -result;
                children: []
                pos: 13555
                length: 15
              pos: 12636
              length: 940
          children: []
          pos: 12535
          length: 1041
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: padInt
              children: []
              pos: 13844
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder buffer
                children: []
                pos: 13851
                length: 20
              pos: 13824
              length: 268
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String strValue = Integer.toString(value);
                children: []
                pos: 13906
                length: 42
              - type: for_statement
                fields:
                  text: |-
                    for (int i = length - strValue.length(); i > 0; i--) {
                                buffer.append('0');
                            }
                children: []
                pos: 13957
                length: 96
              - type: expression_statement
                fields:
                  text: buffer.append(strValue);
                children: []
                pos: 14062
                length: 24
              pos: 13896
              length: 196
          children: []
          pos: 13824
          length: 268
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: indexOfNonDigit
              children: []
              pos: 14236
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String string
                children: []
                pos: 14252
                length: 13
              pos: 14217
              length: 253
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = offset; i < string.length(); i++) {
                                char c = string.charAt(i);
                                if (c < '0' || c > '9') return i;
                            }
                children: []
                pos: 14289
                length: 143
              - type: return_statement
                fields:
                  text: return string.length();
                children: []
                pos: 14441
                length: 23
              pos: 14279
              length: 191
          children: []
          pos: 14217
          length: 253
        pos: 711
        length: 13762
    children: []
    pos: 711
    length: 13762
  pos: 0
  length: 14474
text_diff: "--- before\n+++ after\n@@ -211,7 +211,6 @@\n                 String timezoneOffset
  = date.substring(offset);\n \n                 // When timezone has no minutes,
  we should append it, valid timezones are, for example: +00:00, +0000 and +00\n-
  \               timezoneOffset = timezoneOffset.length() >= 5 ? timezoneOffset :
  timezoneOffset + \"00\";\n \n                 offset += timezoneOffset.length();\n
  \                // 18-Jun-2015, tatu: Minor simplification, skip offset of \"+0000\"/\"+00:00\"\n"
tree_diff: ''
