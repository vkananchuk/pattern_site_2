---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: AsPropertyTypeDeserializer
        children: []
        pos: 802
        length: 26
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = 1L;
          children: []
          pos: 867
          length: 48
        - type: field_declaration
          fields:
            text: protected final As _inclusion;
          children: []
          pos: 921
          length: 30
        - type: constructor_declaration
          fields:
            text: |-
              public AsPropertyTypeDeserializer(JavaType bt, TypeIdResolver idRes,
                          String typePropertyName, boolean typeIdVisible, JavaType defaultImpl)
                  {
                      this(bt, idRes, typePropertyName, typeIdVisible, defaultImpl, As.PROPERTY);
                  }
          children: []
          pos: 991
          length: 246
        - type: constructor_declaration
          fields:
            text: |-
              public AsPropertyTypeDeserializer(JavaType bt, TypeIdResolver idRes,
                          String typePropertyName, boolean typeIdVisible, JavaType defaultImpl,
                          As inclusion)
                  {
                      super(bt, idRes, typePropertyName, typeIdVisible, defaultImpl);
                      _inclusion = inclusion;
                  }
          children: []
          pos: 1281
          length: 292
        - type: constructor_declaration
          fields:
            text: |-
              public AsPropertyTypeDeserializer(AsPropertyTypeDeserializer src, BeanProperty property) {
                      super(src, property);
                      _inclusion = src._inclusion;
                  }
          children: []
          pos: 1579
          length: 163
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: forProperty
              children: []
              pos: 1790
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: BeanProperty prop
                children: []
                pos: 1802
                length: 17
              pos: 1752
              length: 164
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return (prop == _property) ? this : new AsPropertyTypeDeserializer(this,
                    prop);'
                children: []
                pos: 1831
                length: 79
              pos: 1821
              length: 95
          children: []
          pos: 1752
          length: 164
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getTypeInclusion
              children: []
              pos: 1950
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1926
              length: 65
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _inclusion;
                children: []
                pos: 1971
                length: 18
              pos: 1969
              length: 22
          children: []
          pos: 1926
          length: 65
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserializeTypedFromObject
              children: []
              pos: 2181
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 2208
                length: 12
              pos: 2119
              length: 1905
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: p.canReadTypeId()
                        children: []
                        pos: 2350
                        length: 17
                    children: []
                    pos: 2349
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Object typeId = p.getTypeId();
                    children: []
                    pos: 2383
                    length: 30
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: typeId
                                children: []
                                pos: 2430
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 2440
                                length: 4
                            children: []
                            pos: 2430
                            length: 14
                        children: []
                        pos: 2429
                        length: 16
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return _deserializeWithNativeTypeId(p, ctxt, typeId);
                        children: []
                        pos: 2464
                        length: 53
                      pos: 2446
                      length: 85
                    pos: 2426
                    length: 105
                  pos: 2369
                  length: 172
                pos: 2346
                length: 195
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = p.getCurrentToken();
                children: []
                pos: 2639
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 2686
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 2691
                            length: 22
                        children: []
                        pos: 2686
                        length: 27
                    children: []
                    pos: 2685
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = p.nextToken();
                    children: []
                    pos: 2729
                    length: 18
                  pos: 2715
                  length: 42
                pos: 2682
                length: 688
              - type: local_variable_declaration
                fields:
                  text: TokenBuffer tb = null;
                children: []
                pos: 3458
                length: 22
              - type: for_statement
                fields:
                  text: |-
                    for (; t == JsonToken.FIELD_NAME; t = p.nextToken()) {
                                String name = p.getCurrentName();
                                p.nextToken(); // to point to the value
                                if (name.equals(_typePropertyName)) { // gotcha!
                                    return _deserializeTypedForId(p, ctxt, tb);
                                }
                                if (tb == null) {
                                    tb = new TokenBuffer(p, ctxt);
                                }
                                tb.writeFieldName(name);
                                tb.copyCurrentStructure(p);
                            }
                children: []
                pos: 3490
                length: 465
              - type: return_statement
                fields:
                  text: return _deserializeTypedUsingDefaultImpl(p, ctxt, tb);
                children: []
                pos: 3964
                length: 54
              pos: 2274
              length: 1750
          children: []
          pos: 2119
          length: 1905
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _deserializeTypedForId
              children: []
              pos: 4081
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 4104
                length: 12
              pos: 4030
              length: 1136
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String typeId = p.getText();
                children: []
                pos: 4196
                length: 28
              - type: local_variable_declaration
                fields:
                  text: JsonDeserializer<Object> deser = _findDeserializer(ctxt, typeId);
                children: []
                pos: 4233
                length: 65
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: _typeIdVisible
                        children: []
                        pos: 4311
                        length: 14
                    children: []
                    pos: 4310
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: tb
                                children: []
                                pos: 4385
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4391
                                length: 4
                            children: []
                            pos: 4385
                            length: 10
                        children: []
                        pos: 4384
                        length: 12
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: tb = new TokenBuffer(p, ctxt);
                        children: []
                        pos: 4415
                        length: 30
                      pos: 4397
                      length: 62
                    pos: 4381
                    length: 78
                  - type: expression_statement
                    fields:
                      text: tb.writeFieldName(p.getCurrentName());
                    children: []
                    pos: 4472
                    length: 38
                  - type: expression_statement
                    fields:
                      text: tb.writeString(typeId);
                    children: []
                    pos: 4523
                    length: 23
                  pos: 4327
                  length: 229
                pos: 4307
                length: 249
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: tb
                            children: []
                            pos: 4569
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4575
                            length: 4
                        children: []
                        pos: 4569
                        length: 10
                    children: []
                    pos: 4568
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: p.clearCurrentToken();
                    children: []
                    pos: 4796
                    length: 22
                  - type: expression_statement
                    fields:
                      text: p = JsonParserSequence.createFlattened(false, tb.asParser(p),
                        p);
                    children: []
                    pos: 4831
                    length: 65
                  pos: 4581
                  length: 325
                pos: 4565
                length: 341
              - type: expression_statement
                fields:
                  text: p.nextToken();
                children: []
                pos: 5003
                length: 14
              - type: return_statement
                fields:
                  text: return deser.deserialize(p, ctxt);
                children: []
                pos: 5126
                length: 34
              pos: 4186
              length: 980
          children: []
          pos: 4030
          length: 1136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _deserializeTypedUsingDefaultImpl
              children: []
              pos: 5281
              length: 33
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 5315
                length: 12
              pos: 5230
              length: 1609
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonDeserializer<Object> deser = _findDefaultImplDeserializer(ctxt);
                children: []
                pos: 5491
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: deser
                            children: []
                            pos: 5572
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5581
                            length: 4
                        children: []
                        pos: 5572
                        length: 13
                    children: []
                    pos: 5571
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: tb
                                children: []
                                pos: 5605
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5611
                                length: 4
                            children: []
                            pos: 5605
                            length: 10
                        children: []
                        pos: 5604
                        length: 12
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: tb.writeEndObject();
                        children: []
                        pos: 5635
                        length: 20
                      - type: expression_statement
                        fields:
                          text: p = tb.asParser(p);
                        children: []
                        pos: 5672
                        length: 19
                      - type: expression_statement
                        fields:
                          text: p.nextToken();
                        children: []
                        pos: 5766
                        length: 14
                      pos: 5617
                      length: 177
                    pos: 5601
                    length: 193
                  - type: return_statement
                    fields:
                      text: return deser.deserialize(p, ctxt);
                    children: []
                    pos: 5807
                    length: 34
                  pos: 5587
                  length: 264
                pos: 5568
                length: 283
              - type: local_variable_declaration
                fields:
                  text: Object result = TypeDeserializer.deserializeIfNatural(p, ctxt,
                    _baseType);
                children: []
                pos: 5950
                length: 74
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: result
                            children: []
                            pos: 6037
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6047
                            length: 4
                        children: []
                        pos: 6037
                        length: 14
                    children: []
                    pos: 6036
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return result;
                    children: []
                    pos: 6067
                    length: 14
                  pos: 6053
                  length: 38
                pos: 6033
                length: 58
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: p.getCurrentToken()
                            children: []
                            pos: 6200
                            length: 19
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_ARRAY
                            children: []
                            pos: 6223
                            length: 21
                        children: []
                        pos: 6200
                        length: 44
                    children: []
                    pos: 6199
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.deserializeTypedFromAny(p, ctxt);
                    children: []
                    pos: 6260
                    length: 46
                  pos: 6246
                  length: 70
                pos: 6196
                length: 432
              - type: expression_statement
                fields:
                  text: |-
                    ctxt.reportWrongTokenException(p, JsonToken.FIELD_NAME,
                                    "missing property '"+_typePropertyName+"' that is to contain type id  (for class "+baseTypeName()+")");
                children: []
                pos: 6637
                length: 175
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 6821
                length: 12
              pos: 5409
              length: 1430
          children: []
          pos: 5230
          length: 1609
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserializeTypedFromAny
              children: []
              pos: 7103
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 7127
                length: 12
              pos: 7075
              length: 461
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: p.getCurrentToken()
                            children: []
                            pos: 7360
                            length: 19
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_ARRAY
                            children: []
                            pos: 7383
                            length: 21
                        children: []
                        pos: 7360
                        length: 44
                    children: []
                    pos: 7359
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.deserializeTypedFromArray(p, ctxt);
                    children: []
                    pos: 7420
                    length: 48
                  pos: 7406
                  length: 72
                pos: 7356
                length: 122
              - type: return_statement
                fields:
                  text: return deserializeTypedFromObject(p, ctxt);
                children: []
                pos: 7487
                length: 43
              pos: 7189
              length: 347
          children: []
          pos: 7075
          length: 461
        pos: 789
        length: 6982
    children: []
    pos: 789
    length: 6982
  pos: 0
  length: 7772
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: AsPropertyTypeDeserializer
        children: []
        pos: 802
        length: 26
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = 1L;
          children: []
          pos: 867
          length: 48
        - type: field_declaration
          fields:
            text: protected final As _inclusion;
          children: []
          pos: 921
          length: 30
        - type: constructor_declaration
          fields:
            text: |-
              public AsPropertyTypeDeserializer(JavaType bt, TypeIdResolver idRes,
                          String typePropertyName, boolean typeIdVisible, JavaType defaultImpl)
                  {
                      this(bt, idRes, typePropertyName, typeIdVisible, defaultImpl, As.PROPERTY);
                  }
          children: []
          pos: 991
          length: 246
        - type: constructor_declaration
          fields:
            text: |-
              public AsPropertyTypeDeserializer(JavaType bt, TypeIdResolver idRes,
                          String typePropertyName, boolean typeIdVisible, JavaType defaultImpl,
                          As inclusion)
                  {
                      super(bt, idRes, typePropertyName, typeIdVisible, defaultImpl);
                      _inclusion = inclusion;
                  }
          children: []
          pos: 1281
          length: 292
        - type: constructor_declaration
          fields:
            text: |-
              public AsPropertyTypeDeserializer(AsPropertyTypeDeserializer src, BeanProperty property) {
                      super(src, property);
                      _inclusion = src._inclusion;
                  }
          children: []
          pos: 1579
          length: 163
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: forProperty
              children: []
              pos: 1790
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: BeanProperty prop
                children: []
                pos: 1802
                length: 17
              pos: 1752
              length: 164
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return (prop == _property) ? this : new AsPropertyTypeDeserializer(this,
                    prop);'
                children: []
                pos: 1831
                length: 79
              pos: 1821
              length: 95
          children: []
          pos: 1752
          length: 164
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getTypeInclusion
              children: []
              pos: 1950
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 1926
              length: 65
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _inclusion;
                children: []
                pos: 1971
                length: 18
              pos: 1969
              length: 22
          children: []
          pos: 1926
          length: 65
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserializeTypedFromObject
              children: []
              pos: 2181
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 2208
                length: 12
              pos: 2119
              length: 1905
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: p.canReadTypeId()
                        children: []
                        pos: 2350
                        length: 17
                    children: []
                    pos: 2349
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Object typeId = p.getTypeId();
                    children: []
                    pos: 2383
                    length: 30
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: typeId
                                children: []
                                pos: 2430
                                length: 6
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 2440
                                length: 4
                            children: []
                            pos: 2430
                            length: 14
                        children: []
                        pos: 2429
                        length: 16
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: return_statement
                        fields:
                          text: return _deserializeWithNativeTypeId(p, ctxt, typeId);
                        children: []
                        pos: 2464
                        length: 53
                      pos: 2446
                      length: 85
                    pos: 2426
                    length: 105
                  pos: 2369
                  length: 172
                pos: 2346
                length: 195
              - type: local_variable_declaration
                fields:
                  text: JsonToken t = p.getCurrentToken();
                children: []
                pos: 2639
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: t
                            children: []
                            pos: 2686
                            length: 1
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_OBJECT
                            children: []
                            pos: 2691
                            length: 22
                        children: []
                        pos: 2686
                        length: 27
                    children: []
                    pos: 2685
                    length: 29
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: t = p.nextToken();
                    children: []
                    pos: 2729
                    length: 18
                  pos: 2715
                  length: 42
                pos: 2682
                length: 688
              - type: local_variable_declaration
                fields:
                  text: TokenBuffer tb = null;
                children: []
                pos: 3458
                length: 22
              - type: for_statement
                fields:
                  text: |-
                    for (; t == JsonToken.FIELD_NAME; t = p.nextToken()) {
                                String name = p.getCurrentName();
                                p.nextToken(); // to point to the value
                                if (name.equals(_typePropertyName)) { // gotcha!
                                    return _deserializeTypedForId(p, ctxt, tb);
                                }
                                if (tb == null) {
                                    tb = new TokenBuffer(p, ctxt);
                                }
                                tb.writeFieldName(name);
                                tb.copyCurrentStructure(p);
                            }
                children: []
                pos: 3490
                length: 465
              - type: return_statement
                fields:
                  text: return _deserializeTypedUsingDefaultImpl(p, ctxt, tb);
                children: []
                pos: 3964
                length: 54
              pos: 2274
              length: 1750
          children: []
          pos: 2119
          length: 1905
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _deserializeTypedForId
              children: []
              pos: 4081
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 4104
                length: 12
              pos: 4030
              length: 1136
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String typeId = p.getText();
                children: []
                pos: 4196
                length: 28
              - type: local_variable_declaration
                fields:
                  text: JsonDeserializer<Object> deser = _findDeserializer(ctxt, typeId);
                children: []
                pos: 4233
                length: 65
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: _typeIdVisible
                        children: []
                        pos: 4311
                        length: 14
                    children: []
                    pos: 4310
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: tb
                                children: []
                                pos: 4385
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 4391
                                length: 4
                            children: []
                            pos: 4385
                            length: 10
                        children: []
                        pos: 4384
                        length: 12
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: tb = new TokenBuffer(p, ctxt);
                        children: []
                        pos: 4415
                        length: 30
                      pos: 4397
                      length: 62
                    pos: 4381
                    length: 78
                  - type: expression_statement
                    fields:
                      text: tb.writeFieldName(p.getCurrentName());
                    children: []
                    pos: 4472
                    length: 38
                  - type: expression_statement
                    fields:
                      text: tb.writeString(typeId);
                    children: []
                    pos: 4523
                    length: 23
                  pos: 4327
                  length: 229
                pos: 4307
                length: 249
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: tb
                            children: []
                            pos: 4569
                            length: 2
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4575
                            length: 4
                        children: []
                        pos: 4569
                        length: 10
                    children: []
                    pos: 4568
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: p.clearCurrentToken();
                    children: []
                    pos: 4796
                    length: 22
                  - type: expression_statement
                    fields:
                      text: p = JsonParserSequence.createFlattened(false, tb.asParser(p),
                        p);
                    children: []
                    pos: 4831
                    length: 65
                  pos: 4581
                  length: 325
                pos: 4565
                length: 341
              - type: expression_statement
                fields:
                  text: p.nextToken();
                children: []
                pos: 5003
                length: 14
              - type: return_statement
                fields:
                  text: return deser.deserialize(p, ctxt);
                children: []
                pos: 5126
                length: 34
              pos: 4186
              length: 980
          children: []
          pos: 4030
          length: 1136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _deserializeTypedUsingDefaultImpl
              children: []
              pos: 5281
              length: 33
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 5315
                length: 12
              pos: 5230
              length: 1297
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: JsonDeserializer<Object> deser = _findDefaultImplDeserializer(ctxt);
                children: []
                pos: 5491
                length: 68
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: deser
                            children: []
                            pos: 5572
                            length: 5
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5581
                            length: 4
                        children: []
                        pos: 5572
                        length: 13
                    children: []
                    pos: 5571
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: tb
                                children: []
                                pos: 5605
                                length: 2
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 5611
                                length: 4
                            children: []
                            pos: 5605
                            length: 10
                        children: []
                        pos: 5604
                        length: 12
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: tb.writeEndObject();
                        children: []
                        pos: 5635
                        length: 20
                      - type: expression_statement
                        fields:
                          text: p = tb.asParser(p);
                        children: []
                        pos: 5672
                        length: 19
                      - type: expression_statement
                        fields:
                          text: p.nextToken();
                        children: []
                        pos: 5766
                        length: 14
                      pos: 5617
                      length: 177
                    pos: 5601
                    length: 193
                  - type: return_statement
                    fields:
                      text: return deser.deserialize(p, ctxt);
                    children: []
                    pos: 5807
                    length: 34
                  pos: 5587
                  length: 264
                pos: 5568
                length: 283
              - type: local_variable_declaration
                fields:
                  text: Object result = TypeDeserializer.deserializeIfNatural(p, ctxt,
                    _baseType);
                children: []
                pos: 5950
                length: 74
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: result
                            children: []
                            pos: 6037
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 6047
                            length: 4
                        children: []
                        pos: 6037
                        length: 14
                    children: []
                    pos: 6036
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return result;
                    children: []
                    pos: 6067
                    length: 14
                  pos: 6053
                  length: 38
                pos: 6033
                length: 58
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: p.getCurrentToken()
                            children: []
                            pos: 6200
                            length: 19
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_ARRAY
                            children: []
                            pos: 6223
                            length: 21
                        children: []
                        pos: 6200
                        length: 44
                    children: []
                    pos: 6199
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.deserializeTypedFromAny(p, ctxt);
                    children: []
                    pos: 6260
                    length: 46
                  pos: 6246
                  length: 70
                pos: 6196
                length: 120
              - type: expression_statement
                fields:
                  text: |-
                    ctxt.reportWrongTokenException(p, JsonToken.FIELD_NAME,
                                    "missing property '"+_typePropertyName+"' that is to contain type id  (for class "+baseTypeName()+")");
                children: []
                pos: 6325
                length: 175
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 6509
                length: 12
              pos: 5409
              length: 1118
          children: []
          pos: 5230
          length: 1297
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: deserializeTypedFromAny
              children: []
              pos: 6791
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JsonParser p
                children: []
                pos: 6815
                length: 12
              pos: 6763
              length: 461
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: p.getCurrentToken()
                            children: []
                            pos: 7048
                            length: 19
                          right:
                            type: field_access
                            fields:
                              text: JsonToken.START_ARRAY
                            children: []
                            pos: 7071
                            length: 21
                        children: []
                        pos: 7048
                        length: 44
                    children: []
                    pos: 7047
                    length: 46
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return super.deserializeTypedFromArray(p, ctxt);
                    children: []
                    pos: 7108
                    length: 48
                  pos: 7094
                  length: 72
                pos: 7044
                length: 122
              - type: return_statement
                fields:
                  text: return deserializeTypedFromObject(p, ctxt);
                children: []
                pos: 7175
                length: 43
              pos: 6877
              length: 347
          children: []
          pos: 6763
          length: 461
        pos: 789
        length: 6670
    children: []
    pos: 789
    length: 6670
  pos: 0
  length: 7460
text_diff: |
  --- before
  +++ after
  @@ -153,13 +153,6 @@
           // or, something for which "as-property" won't work, changed into "wrapper-array" type:
           if (p.getCurrentToken() == JsonToken.START_ARRAY) {
               return super.deserializeTypedFromAny(p, ctxt);
  -        } else if (p.getCurrentToken() == JsonToken.VALUE_STRING) {
  -            if (ctxt.isEnabled(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)) {
  -                String str = p.getText().trim();
  -                if (str.isEmpty()) {
  -                    return null;
  -                }
  -            }
           }
           ctxt.reportWrongTokenException(p, JsonToken.FIELD_NAME,
                   "missing property '"+_typePropertyName+"' that is to contain type id  (for class "+baseTypeName()+")");
tree_diff: ''
