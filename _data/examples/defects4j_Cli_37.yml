---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DefaultParser
        children: []
        pos: 1023
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected CommandLine cmd;
          children: []
          pos: 1110
          length: 26
        - type: field_declaration
          fields:
            text: protected Options options;
          children: []
          pos: 1178
          length: 26
        - type: field_declaration
          fields:
            text: protected boolean stopAtNonOption;
          children: []
          pos: 1420
          length: 34
        - type: field_declaration
          fields:
            text: protected String currentToken;
          children: []
          pos: 1502
          length: 30
        - type: field_declaration
          fields:
            text: protected Option currentOption;
          children: []
          pos: 1574
          length: 31
        - type: field_declaration
          fields:
            text: protected boolean skipParsing;
          children: []
          pos: 1729
          length: 30
        - type: field_declaration
          fields:
            text: protected List expectedOpts;
          children: []
          pos: 1861
          length: 28
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 1915
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 1921
                length: 15
              pos: 1896
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null);
                children: []
                pos: 1994
                length: 39
              pos: 1984
              length: 55
          children: []
          pos: 1896
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2505
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2511
                length: 15
              pos: 2486
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 2607
                length: 52
              pos: 2597
              length: 68
          children: []
          pos: 2486
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2690
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2696
                length: 15
              pos: 2671
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 2794
                length: 56
              pos: 2784
              length: 72
          children: []
          pos: 2671
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3608
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3614
                length: 15
              pos: 3589
              length: 929
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 3747
                length: 23
              - type: expression_statement
                fields:
                  text: this.stopAtNonOption = stopAtNonOption;
                children: []
                pos: 3779
                length: 39
              - type: expression_statement
                fields:
                  text: skipParsing = false;
                children: []
                pos: 3827
                length: 20
              - type: expression_statement
                fields:
                  text: currentOption = null;
                children: []
                pos: 3856
                length: 21
              - type: expression_statement
                fields:
                  text: expectedOpts = new ArrayList(options.getRequiredOptions());
                children: []
                pos: 3886
                length: 59
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (OptionGroup group : options.getOptionGroups())
                            {
                                group.setSelected(null);
                            }
                children: []
                pos: 3997
                length: 108
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 4115
                length: 24
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 4153
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4166
                            length: 4
                        children: []
                        pos: 4153
                        length: 17
                    children: []
                    pos: 4152
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (String argument : arguments)
                                    {
                                        handleToken(argument);
                                    }
                    children: []
                    pos: 4194
                    length: 100
                  pos: 4180
                  length: 124
                pos: 4149
                length: 155
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 4364
                length: 20
              - type: expression_statement
                fields:
                  text: handleProperties(properties);
                children: []
                pos: 4429
                length: 29
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 4468
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 4501
                length: 11
              pos: 3737
              length: 781
          children: []
          pos: 3589
          length: 929
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleProperties
              children: []
              pos: 4702
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 4719
                length: 21
              pos: 4689
              length: 1632
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 4782
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4796
                            length: 4
                        children: []
                        pos: 4782
                        length: 18
                    children: []
                    pos: 4781
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 4824
                    length: 7
                  pos: 4810
                  length: 31
                pos: 4778
                length: 63
              - type: for_statement
                fields:
                  text: |-
                    for (Enumeration<?> e = properties.propertyNames(); e.hasMoreElements();)
                            {
                                String option = e.nextElement().toString();

                                Option opt = options.getOption(option);
                                if (opt == null)
                                {
                                    throw new UnrecognizedOptionException("Default option wasn't defined", option);
                                }

                                // if the option is part of a group, check if another option of the group has been selected
                                OptionGroup group = options.getOptionGroup(opt);
                                boolean selected = group != null && group.getSelected() != null;

                                if (!cmd.hasOption(option) && !selected)
                                {
                                    // get the value from the properties
                                    String value = properties.getProperty(option);

                                    if (opt.hasArg())
                                    {
                                        if (opt.getValues() == null || opt.getValues().length == 0)
                                        {
                                            opt.addValueForProcessing(value);
                                        }
                                    }
                                    else if (!("yes".equalsIgnoreCase(value)
                                            || "true".equalsIgnoreCase(value)
                                            || "1".equalsIgnoreCase(value)))
                                    {
                                        // if the value is not yes, true or 1 then don't add the option to the CommandLine
                                        continue;
                                    }

                                    handleOption(opt);
                                    currentOption = null;
                                }
                            }
                children: []
                pos: 4851
                length: 1464
              pos: 4768
              length: 1553
          children: []
          pos: 4689
          length: 1632
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 6558
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6545
              length: 264
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!expectedOpts.isEmpty()"
                        children: []
                        pos: 6699
                        length: 23
                    children: []
                    pos: 6698
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(expectedOpts);
                    children: []
                    pos: 6746
                    length: 47
                  pos: 6732
                  length: 71
                pos: 6695
                length: 108
              pos: 6615
              length: 194
          children: []
          pos: 6545
          length: 264
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredArgs
              children: []
              pos: 6970
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6957
              length: 215
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 7030
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7047
                                length: 4
                            children: []
                            pos: 7030
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: currentOption.requiresArg()
                            children: []
                            pos: 7055
                            length: 27
                        children: []
                        pos: 7030
                        length: 52
                    children: []
                    pos: 7029
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingArgumentException(currentOption);
                    children: []
                    pos: 7106
                    length: 50
                  pos: 7092
                  length: 74
                pos: 7026
                length: 140
              pos: 7016
              length: 156
          children: []
          pos: 6957
          length: 215
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleToken
              children: []
              pos: 7335
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 7347
                length: 12
              pos: 7322
              length: 889
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: currentToken = token;
                children: []
                pos: 7397
                length: 21
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: skipParsing
                        children: []
                        pos: 7432
                        length: 11
                    children: []
                    pos: 7431
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: cmd.addArg(token);
                    children: []
                    pos: 7467
                    length: 18
                  pos: 7453
                  length: 42
                pos: 7428
                length: 656
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 8098
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8115
                                length: 4
                            children: []
                            pos: 8098
                            length: 21
                          right:
                            type: unary_expression
                            fields:
                              text: "!currentOption.acceptsArg()"
                            children: []
                            pos: 8123
                            length: 27
                        children: []
                        pos: 8098
                        length: 52
                    children: []
                    pos: 8097
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = null;
                    children: []
                    pos: 8174
                    length: 21
                  pos: 8160
                  length: 45
                pos: 8094
                length: 111
              pos: 7387
              length: 824
          children: []
          pos: 7322
          length: 889
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isArgument
              children: []
              pos: 8330
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8341
                length: 12
              pos: 8314
              length: 112
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !isOption(token) || isNegativeNumber(token);
                children: []
                pos: 8369
                length: 51
              pos: 8359
              length: 67
          children: []
          pos: 8314
          length: 112
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isNegativeNumber
              children: []
              pos: 8539
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8556
                length: 12
              pos: 8523
              length: 240
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Double.parseDouble(token);
                      children: []
                      pos: 8610
                      length: 26
                    - type: return_statement
                      fields:
                        text: return true;
                      children: []
                      pos: 8649
                      length: 12
                    pos: 8596
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (NumberFormatException e)
                                  {
                                      return false;
                                  }
                      children: []
                      pos: 8680
                      length: 77
                    pos: 8584
                    length: 173
                children: []
                pos: 8584
                length: 173
              pos: 8574
              length: 189
          children: []
          pos: 8523
          length: 240
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isOption
              children: []
              pos: 8876
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8885
                length: 12
              pos: 8860
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isLongOption(token) || isShortOption(token);
                children: []
                pos: 8913
                length: 51
              pos: 8903
              length: 67
          children: []
          pos: 8860
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isShortOption
              children: []
              pos: 9089
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9103
                length: 12
              pos: 9073
              length: 430
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9192
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9218
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9236
                                length: 1
                            children: []
                            pos: 9218
                            length: 19
                        children: []
                        pos: 9192
                        length: 45
                    children: []
                    pos: 9191
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9261
                    length: 13
                  pos: 9247
                  length: 37
                pos: 9188
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9337
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String optName = pos == -1 ? token.substring(1) : token.substring(1,
                    pos);'
                children: []
                pos: 9375
                length: 74
              - type: return_statement
                fields:
                  text: return options.hasShortOption(optName);
                children: []
                pos: 9458
                length: 39
              pos: 9121
              length: 382
          children: []
          pos: 9073
          length: 430
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLongOption
              children: []
              pos: 9620
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9633
                length: 12
              pos: 9604
              length: 602
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9665
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9691
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9709
                                length: 1
                            children: []
                            pos: 9691
                            length: 19
                        children: []
                        pos: 9665
                        length: 45
                    children: []
                    pos: 9664
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9734
                    length: 13
                  pos: 9720
                  length: 37
                pos: 9661
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9767
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String t = pos == -1 ? token : token.substring(0, pos);'
                children: []
                pos: 9805
                length: 55
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!options.getMatchingOptions(t).isEmpty()"
                        children: []
                        pos: 9874
                        length: 40
                    children: []
                    pos: 9873
                    length: 42
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 10017
                    length: 12
                  pos: 9924
                  length: 115
                pos: 9870
                length: 307
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 10187
                length: 13
              pos: 9651
              length: 555
          children: []
          pos: 9604
          length: 602
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleUnknownToken
              children: []
              pos: 10645
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 10664
                length: 12
              pos: 10632
              length: 376
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.startsWith("-")
                                children: []
                                pos: 10718
                                length: 21
                              right:
                                type: greater_than
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: token.length()
                                    children: []
                                    pos: 10743
                                    length: 14
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '1'
                                    children: []
                                    pos: 10760
                                    length: 1
                                children: []
                                pos: 10743
                                length: 18
                            children: []
                            pos: 10718
                            length: 43
                          right:
                            type: unary_expression
                            fields:
                              text: "!stopAtNonOption"
                            children: []
                            pos: 10765
                            length: 16
                        children: []
                        pos: 10718
                        length: 63
                    children: []
                    pos: 10717
                    length: 65
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new UnrecognizedOptionException("Unrecognized option:
                        " + token, token);'
                    children: []
                    pos: 10805
                    length: 78
                  pos: 10791
                  length: 102
                pos: 10714
                length: 179
              - type: expression_statement
                fields:
                  text: cmd.addArg(token);
                children: []
                pos: 10903
                length: 18
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: stopAtNonOption
                        children: []
                        pos: 10934
                        length: 15
                    children: []
                    pos: 10933
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: skipParsing = true;
                    children: []
                    pos: 10973
                    length: 19
                  pos: 10959
                  length: 43
                pos: 10930
                length: 72
              pos: 10704
              length: 304
          children: []
          pos: 10632
          length: 376
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOption
              children: []
              pos: 11195
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11212
                length: 12
              pos: 11182
              length: 263
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: token.indexOf('=')
                            children: []
                            pos: 11266
                            length: 18
                          right:
                            type: unary_expression
                            fields:
                              text: "-1"
                            children: []
                            pos: 11288
                            length: 2
                        children: []
                        pos: 11266
                        length: 24
                    children: []
                    pos: 11265
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleLongOptionWithoutEqual(token);
                    children: []
                    pos: 11314
                    length: 36
                  pos: 11300
                  length: 60
                pos: 11262
                length: 177
              pos: 11252
              length: 193
          children: []
          pos: 11182
          length: 263
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithoutEqual
              children: []
              pos: 11627
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11656
                length: 12
              pos: 11614
              length: 492
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(token);
                children: []
                pos: 11706
                length: 62
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 11781
                        length: 22
                    children: []
                    pos: 11780
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 11827
                    length: 33
                  pos: 11813
                  length: 57
                pos: 11777
                length: 323
              pos: 11696
              length: 410
          children: []
          pos: 11614
          length: 492
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithEqual
              children: []
              pos: 12295
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 12321
                length: 12
              pos: 12282
              length: 920
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf('=');
                children: []
                pos: 12371
                length: 29
              - type: local_variable_declaration
                fields:
                  text: String value = token.substring(pos + 1);
                children: []
                pos: 12410
                length: 40
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, pos);
                children: []
                pos: 12460
                length: 37
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(opt);
                children: []
                pos: 12507
                length: 60
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 12580
                        length: 22
                    children: []
                    pos: 12579
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 12626
                    length: 33
                  pos: 12612
                  length: 57
                pos: 12576
                length: 620
              pos: 12361
              length: 841
          children: []
          pos: 12282
          length: 920
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleShortAndLongOption
              children: []
              pos: 13491
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 13516
                length: 12
              pos: 13478
              length: 2869
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 13566
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int pos = t.indexOf('=');
                children: []
                pos: 13619
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: t.length()
                            children: []
                            pos: 13658
                            length: 10
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '1'
                            children: []
                            pos: 13672
                            length: 1
                        children: []
                        pos: 13658
                        length: 15
                    children: []
                    pos: 13657
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: options.hasShortOption(t)
                            children: []
                            pos: 13719
                            length: 25
                        children: []
                        pos: 13718
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: handleOption(options.getOption(t));
                        children: []
                        pos: 13776
                        length: 35
                      pos: 13758
                      length: 67
                    pos: 13715
                    length: 198
                  pos: 13683
                  length: 240
                pos: 13654
                length: 2687
              pos: 13556
              length: 2791
          children: []
          pos: 13478
          length: 2869
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLongPrefix
              children: []
              pos: 16484
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 16498
                length: 12
              pos: 16469
              length: 418
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 16526
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int i;
                children: []
                pos: 16579
                length: 6
              - type: local_variable_declaration
                fields:
                  text: String opt = null;
                children: []
                pos: 16594
                length: 18
              - type: for_statement
                fields:
                  text: |-
                    for (i = t.length() - 2; i > 1; i--)
                            {
                                String prefix = t.substring(0, i);
                                if (options.hasLongOption(prefix))
                                {
                                    opt = prefix;
                                    break;
                                }
                            }
                children: []
                pos: 16621
                length: 231
              - type: return_statement
                fields:
                  text: return opt;
                children: []
                pos: 16870
                length: 11
              pos: 16516
              length: 371
          children: []
          pos: 16469
          length: 418
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isJavaProperty
              children: []
              pos: 17000
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 17015
                length: 12
              pos: 16984
              length: 254
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, 1);
                children: []
                pos: 17043
                length: 35
              - type: local_variable_declaration
                fields:
                  text: Option option = options.getOption(opt);
                children: []
                pos: 17087
                length: 39
              - type: return_statement
                fields:
                  text: return option != null && (option.getArgs() >= 2 || option.getArgs()
                    == Option.UNLIMITED_VALUES);
                children: []
                pos: 17136
                length: 96
              pos: 17033
              length: 205
          children: []
          pos: 16984
          length: 254
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleOption
              children: []
              pos: 17257
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17270
                length: 13
              pos: 17244
              length: 437
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 17387
                length: 20
              - type: expression_statement
                fields:
                  text: option = (Option) option.clone();
                children: []
                pos: 17417
                length: 33
              - type: expression_statement
                fields:
                  text: updateRequiredOptions(option);
                children: []
                pos: 17460
                length: 30
              - type: expression_statement
                fields:
                  text: cmd.addOption(option);
                children: []
                pos: 17500
                length: 22
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.hasArg()
                        children: []
                        pos: 17536
                        length: 15
                    children: []
                    pos: 17535
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = option;
                    children: []
                    pos: 17575
                    length: 23
                  pos: 17561
                  length: 47
                pos: 17532
                length: 143
              pos: 17311
              length: 370
          children: []
          pos: 17244
          length: 437
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: updateRequiredOptions
              children: []
              pos: 17819
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17841
                length: 13
              pos: 17806
              length: 578
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.isRequired()
                        children: []
                        pos: 17906
                        length: 19
                    children: []
                    pos: 17905
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: expectedOpts.remove(option.getKey());
                    children: []
                    pos: 17949
                    length: 37
                  pos: 17935
                  length: 61
                pos: 17902
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: options.getOptionGroup(option)
                            children: []
                            pos: 18106
                            length: 30
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 18140
                            length: 4
                        children: []
                        pos: 18106
                        length: 38
                    children: []
                    pos: 18105
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = options.getOptionGroup(option);
                    children: []
                    pos: 18168
                    length: 51
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 18237
                            length: 18
                        children: []
                        pos: 18236
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: expectedOpts.remove(group);
                        children: []
                        pos: 18287
                        length: 27
                      pos: 18269
                      length: 59
                    pos: 18233
                    length: 95
                  - type: expression_statement
                    fields:
                      text: group.setSelected(option);
                    children: []
                    pos: 18342
                    length: 26
                  pos: 18154
                  length: 224
                pos: 18102
                length: 276
              pos: 17892
              length: 492
          children: []
          pos: 17806
          length: 578
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleConcatenatedOptions
              children: []
              pos: 19769
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 19795
                length: 12
              pos: 19754
              length: 775
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 1; i < token.length(); i++)
                            {
                                String ch = String.valueOf(token.charAt(i));

                                if (options.hasOption(ch))
                                {
                                    handleOption(options.getOption(ch));

                                    if (currentOption != null && token.length() != i + 1)
                                    {
                                        // add the trail as an argument of the option
                                        currentOption.addValueForProcessing(token.substring(i + 1));
                                        break;
                                    }
                                }
                                else
                                {
                                    handleUnknownToken(stopAtNonOption && i > 1 ? token.substring(i) : token);
                                    break;
                                }
                            }
                children: []
                pos: 19845
                length: 678
              pos: 19835
              length: 694
          children: []
          pos: 19754
          length: 775
        pos: 1010
        length: 19521
    children: []
    pos: 1010
    length: 19521
  pos: 0
  length: 20532
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: DefaultParser
        children: []
        pos: 1023
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected CommandLine cmd;
          children: []
          pos: 1110
          length: 26
        - type: field_declaration
          fields:
            text: protected Options options;
          children: []
          pos: 1178
          length: 26
        - type: field_declaration
          fields:
            text: protected boolean stopAtNonOption;
          children: []
          pos: 1420
          length: 34
        - type: field_declaration
          fields:
            text: protected String currentToken;
          children: []
          pos: 1502
          length: 30
        - type: field_declaration
          fields:
            text: protected Option currentOption;
          children: []
          pos: 1574
          length: 31
        - type: field_declaration
          fields:
            text: protected boolean skipParsing;
          children: []
          pos: 1729
          length: 30
        - type: field_declaration
          fields:
            text: protected List expectedOpts;
          children: []
          pos: 1861
          length: 28
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 1915
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 1921
                length: 15
              pos: 1896
              length: 143
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null);
                children: []
                pos: 1994
                length: 39
              pos: 1984
              length: 55
          children: []
          pos: 1896
          length: 143
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2505
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2511
                length: 15
              pos: 2486
              length: 179
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 2607
                length: 52
              pos: 2597
              length: 68
          children: []
          pos: 2486
          length: 179
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2690
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2696
                length: 15
              pos: 2671
              length: 185
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 2794
                length: 56
              pos: 2784
              length: 72
          children: []
          pos: 2671
          length: 185
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3608
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3614
                length: 15
              pos: 3589
              length: 929
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 3747
                length: 23
              - type: expression_statement
                fields:
                  text: this.stopAtNonOption = stopAtNonOption;
                children: []
                pos: 3779
                length: 39
              - type: expression_statement
                fields:
                  text: skipParsing = false;
                children: []
                pos: 3827
                length: 20
              - type: expression_statement
                fields:
                  text: currentOption = null;
                children: []
                pos: 3856
                length: 21
              - type: expression_statement
                fields:
                  text: expectedOpts = new ArrayList(options.getRequiredOptions());
                children: []
                pos: 3886
                length: 59
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (OptionGroup group : options.getOptionGroups())
                            {
                                group.setSelected(null);
                            }
                children: []
                pos: 3997
                length: 108
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 4115
                length: 24
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 4153
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4166
                            length: 4
                        children: []
                        pos: 4153
                        length: 17
                    children: []
                    pos: 4152
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: enhanced_for_statement
                    fields:
                      text: |-
                        for (String argument : arguments)
                                    {
                                        handleToken(argument);
                                    }
                    children: []
                    pos: 4194
                    length: 100
                  pos: 4180
                  length: 124
                pos: 4149
                length: 155
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 4364
                length: 20
              - type: expression_statement
                fields:
                  text: handleProperties(properties);
                children: []
                pos: 4429
                length: 29
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 4468
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 4501
                length: 11
              pos: 3737
              length: 781
          children: []
          pos: 3589
          length: 929
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleProperties
              children: []
              pos: 4702
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 4719
                length: 21
              pos: 4689
              length: 1632
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 4782
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 4796
                            length: 4
                        children: []
                        pos: 4782
                        length: 18
                    children: []
                    pos: 4781
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 4824
                    length: 7
                  pos: 4810
                  length: 31
                pos: 4778
                length: 63
              - type: for_statement
                fields:
                  text: |-
                    for (Enumeration<?> e = properties.propertyNames(); e.hasMoreElements();)
                            {
                                String option = e.nextElement().toString();

                                Option opt = options.getOption(option);
                                if (opt == null)
                                {
                                    throw new UnrecognizedOptionException("Default option wasn't defined", option);
                                }

                                // if the option is part of a group, check if another option of the group has been selected
                                OptionGroup group = options.getOptionGroup(opt);
                                boolean selected = group != null && group.getSelected() != null;

                                if (!cmd.hasOption(option) && !selected)
                                {
                                    // get the value from the properties
                                    String value = properties.getProperty(option);

                                    if (opt.hasArg())
                                    {
                                        if (opt.getValues() == null || opt.getValues().length == 0)
                                        {
                                            opt.addValueForProcessing(value);
                                        }
                                    }
                                    else if (!("yes".equalsIgnoreCase(value)
                                            || "true".equalsIgnoreCase(value)
                                            || "1".equalsIgnoreCase(value)))
                                    {
                                        // if the value is not yes, true or 1 then don't add the option to the CommandLine
                                        continue;
                                    }

                                    handleOption(opt);
                                    currentOption = null;
                                }
                            }
                children: []
                pos: 4851
                length: 1464
              pos: 4768
              length: 1553
          children: []
          pos: 4689
          length: 1632
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 6558
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6545
              length: 264
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!expectedOpts.isEmpty()"
                        children: []
                        pos: 6699
                        length: 23
                    children: []
                    pos: 6698
                    length: 25
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(expectedOpts);
                    children: []
                    pos: 6746
                    length: 47
                  pos: 6732
                  length: 71
                pos: 6695
                length: 108
              pos: 6615
              length: 194
          children: []
          pos: 6545
          length: 264
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredArgs
              children: []
              pos: 6970
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6957
              length: 215
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 7030
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 7047
                                length: 4
                            children: []
                            pos: 7030
                            length: 21
                          right:
                            type: method_invocation
                            fields:
                              text: currentOption.requiresArg()
                            children: []
                            pos: 7055
                            length: 27
                        children: []
                        pos: 7030
                        length: 52
                    children: []
                    pos: 7029
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: throw new MissingArgumentException(currentOption);
                    children: []
                    pos: 7106
                    length: 50
                  pos: 7092
                  length: 74
                pos: 7026
                length: 140
              pos: 7016
              length: 156
          children: []
          pos: 6957
          length: 215
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleToken
              children: []
              pos: 7335
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 7347
                length: 12
              pos: 7322
              length: 889
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: currentToken = token;
                children: []
                pos: 7397
                length: 21
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: skipParsing
                        children: []
                        pos: 7432
                        length: 11
                    children: []
                    pos: 7431
                    length: 13
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: cmd.addArg(token);
                    children: []
                    pos: 7467
                    length: 18
                  pos: 7453
                  length: 42
                pos: 7428
                length: 656
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: not_equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: currentOption
                                children: []
                                pos: 8098
                                length: 13
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 8115
                                length: 4
                            children: []
                            pos: 8098
                            length: 21
                          right:
                            type: unary_expression
                            fields:
                              text: "!currentOption.acceptsArg()"
                            children: []
                            pos: 8123
                            length: 27
                        children: []
                        pos: 8098
                        length: 52
                    children: []
                    pos: 8097
                    length: 54
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = null;
                    children: []
                    pos: 8174
                    length: 21
                  pos: 8160
                  length: 45
                pos: 8094
                length: 111
              pos: 7387
              length: 824
          children: []
          pos: 7322
          length: 889
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isArgument
              children: []
              pos: 8330
              length: 10
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8341
                length: 12
              pos: 8314
              length: 112
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return !isOption(token) || isNegativeNumber(token);
                children: []
                pos: 8369
                length: 51
              pos: 8359
              length: 67
          children: []
          pos: 8314
          length: 112
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isNegativeNumber
              children: []
              pos: 8539
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8556
                length: 12
              pos: 8523
              length: 240
            body:
              type: block
              fields: {}
              children:
              - type: try_statement
                fields:
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Double.parseDouble(token);
                      children: []
                      pos: 8610
                      length: 26
                    - type: return_statement
                      fields:
                        text: return true;
                      children: []
                      pos: 8649
                      length: 12
                    pos: 8596
                    length: 75
                  excepts:
                    type: excepts
                    fields: {}
                    children:
                    - type: catch_clause
                      fields:
                        text: |-
                          catch (NumberFormatException e)
                                  {
                                      return false;
                                  }
                      children: []
                      pos: 8680
                      length: 77
                    pos: 8584
                    length: 173
                children: []
                pos: 8584
                length: 173
              pos: 8574
              length: 189
          children: []
          pos: 8523
          length: 240
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isOption
              children: []
              pos: 8876
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 8885
                length: 12
              pos: 8860
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return isLongOption(token) || isShortOption(token);
                children: []
                pos: 8913
                length: 51
              pos: 8903
              length: 67
          children: []
          pos: 8860
          length: 110
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isShortOption
              children: []
              pos: 9089
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9103
                length: 12
              pos: 9073
              length: 266
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return token.startsWith("-") && token.length() >= 2 && options.hasShortOption(token.substring(1,
                    2));
                children: []
                pos: 9188
                length: 101
              pos: 9121
              length: 218
          children: []
          pos: 9073
          length: 266
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isLongOption
              children: []
              pos: 9456
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 9469
                length: 12
              pos: 9440
              length: 602
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: unary_expression
                            fields:
                              text: '!token.startsWith("-")'
                            children: []
                            pos: 9501
                            length: 22
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.length()
                                children: []
                                pos: 9527
                                length: 14
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '1'
                                children: []
                                pos: 9545
                                length: 1
                            children: []
                            pos: 9527
                            length: 19
                        children: []
                        pos: 9501
                        length: 45
                    children: []
                    pos: 9500
                    length: 47
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return false;
                    children: []
                    pos: 9570
                    length: 13
                  pos: 9556
                  length: 37
                pos: 9497
                length: 96
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf("=");
                children: []
                pos: 9603
                length: 29
              - type: local_variable_declaration
                fields:
                  text: 'String t = pos == -1 ? token : token.substring(0, pos);'
                children: []
                pos: 9641
                length: 55
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!options.getMatchingOptions(t).isEmpty()"
                        children: []
                        pos: 9710
                        length: 40
                    children: []
                    pos: 9709
                    length: 42
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 9853
                    length: 12
                  pos: 9760
                  length: 115
                pos: 9706
                length: 307
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 10023
                length: 13
              pos: 9487
              length: 555
          children: []
          pos: 9440
          length: 602
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleUnknownToken
              children: []
              pos: 10481
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 10500
                length: 12
              pos: 10468
              length: 376
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: and
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: token.startsWith("-")
                                children: []
                                pos: 10554
                                length: 21
                              right:
                                type: greater_than
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: token.length()
                                    children: []
                                    pos: 10579
                                    length: 14
                                  right:
                                    type: decimal_integer_literal
                                    fields:
                                      text: '1'
                                    children: []
                                    pos: 10596
                                    length: 1
                                children: []
                                pos: 10579
                                length: 18
                            children: []
                            pos: 10554
                            length: 43
                          right:
                            type: unary_expression
                            fields:
                              text: "!stopAtNonOption"
                            children: []
                            pos: 10601
                            length: 16
                        children: []
                        pos: 10554
                        length: 63
                    children: []
                    pos: 10553
                    length: 65
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new UnrecognizedOptionException("Unrecognized option:
                        " + token, token);'
                    children: []
                    pos: 10641
                    length: 78
                  pos: 10627
                  length: 102
                pos: 10550
                length: 179
              - type: expression_statement
                fields:
                  text: cmd.addArg(token);
                children: []
                pos: 10739
                length: 18
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: identifier
                        fields:
                          text: stopAtNonOption
                        children: []
                        pos: 10770
                        length: 15
                    children: []
                    pos: 10769
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: skipParsing = true;
                    children: []
                    pos: 10809
                    length: 19
                  pos: 10795
                  length: 43
                pos: 10766
                length: 72
              pos: 10540
              length: 304
          children: []
          pos: 10468
          length: 376
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOption
              children: []
              pos: 11031
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11048
                length: 12
              pos: 11018
              length: 263
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: token.indexOf('=')
                            children: []
                            pos: 11102
                            length: 18
                          right:
                            type: unary_expression
                            fields:
                              text: "-1"
                            children: []
                            pos: 11124
                            length: 2
                        children: []
                        pos: 11102
                        length: 24
                    children: []
                    pos: 11101
                    length: 26
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleLongOptionWithoutEqual(token);
                    children: []
                    pos: 11150
                    length: 36
                  pos: 11136
                  length: 60
                pos: 11098
                length: 177
              pos: 11088
              length: 193
          children: []
          pos: 11018
          length: 263
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithoutEqual
              children: []
              pos: 11463
              length: 28
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 11492
                length: 12
              pos: 11450
              length: 492
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(token);
                children: []
                pos: 11542
                length: 62
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 11617
                        length: 22
                    children: []
                    pos: 11616
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 11663
                    length: 33
                  pos: 11649
                  length: 57
                pos: 11613
                length: 323
              pos: 11532
              length: 410
          children: []
          pos: 11450
          length: 492
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleLongOptionWithEqual
              children: []
              pos: 12131
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 12157
                length: 12
              pos: 12118
              length: 920
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: int pos = token.indexOf('=');
                children: []
                pos: 12207
                length: 29
              - type: local_variable_declaration
                fields:
                  text: String value = token.substring(pos + 1);
                children: []
                pos: 12246
                length: 40
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, pos);
                children: []
                pos: 12296
                length: 37
              - type: local_variable_declaration
                fields:
                  text: List<String> matchingOpts = options.getMatchingOptions(opt);
                children: []
                pos: 12343
                length: 60
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: matchingOpts.isEmpty()
                        children: []
                        pos: 12416
                        length: 22
                    children: []
                    pos: 12415
                    length: 24
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: handleUnknownToken(currentToken);
                    children: []
                    pos: 12462
                    length: 33
                  pos: 12448
                  length: 57
                pos: 12412
                length: 620
              pos: 12197
              length: 841
          children: []
          pos: 12118
          length: 920
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleShortAndLongOption
              children: []
              pos: 13327
              length: 24
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 13352
                length: 12
              pos: 13314
              length: 2869
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 13402
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int pos = t.indexOf('=');
                children: []
                pos: 13455
                length: 25
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: t.length()
                            children: []
                            pos: 13494
                            length: 10
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '1'
                            children: []
                            pos: 13508
                            length: 1
                        children: []
                        pos: 13494
                        length: 15
                    children: []
                    pos: 13493
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: options.hasShortOption(t)
                            children: []
                            pos: 13555
                            length: 25
                        children: []
                        pos: 13554
                        length: 27
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: handleOption(options.getOption(t));
                        children: []
                        pos: 13612
                        length: 35
                      pos: 13594
                      length: 67
                    pos: 13551
                    length: 198
                  pos: 13519
                  length: 240
                pos: 13490
                length: 2687
              pos: 13392
              length: 2791
          children: []
          pos: 13314
          length: 2869
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getLongPrefix
              children: []
              pos: 16320
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 16334
                length: 12
              pos: 16305
              length: 418
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String t = Util.stripLeadingHyphens(token);
                children: []
                pos: 16362
                length: 43
              - type: local_variable_declaration
                fields:
                  text: int i;
                children: []
                pos: 16415
                length: 6
              - type: local_variable_declaration
                fields:
                  text: String opt = null;
                children: []
                pos: 16430
                length: 18
              - type: for_statement
                fields:
                  text: |-
                    for (i = t.length() - 2; i > 1; i--)
                            {
                                String prefix = t.substring(0, i);
                                if (options.hasLongOption(prefix))
                                {
                                    opt = prefix;
                                    break;
                                }
                            }
                children: []
                pos: 16457
                length: 231
              - type: return_statement
                fields:
                  text: return opt;
                children: []
                pos: 16706
                length: 11
              pos: 16352
              length: 371
          children: []
          pos: 16305
          length: 418
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isJavaProperty
              children: []
              pos: 16836
              length: 14
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 16851
                length: 12
              pos: 16820
              length: 254
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: String opt = token.substring(0, 1);
                children: []
                pos: 16879
                length: 35
              - type: local_variable_declaration
                fields:
                  text: Option option = options.getOption(opt);
                children: []
                pos: 16923
                length: 39
              - type: return_statement
                fields:
                  text: return option != null && (option.getArgs() >= 2 || option.getArgs()
                    == Option.UNLIMITED_VALUES);
                children: []
                pos: 16972
                length: 96
              pos: 16869
              length: 205
          children: []
          pos: 16820
          length: 254
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleOption
              children: []
              pos: 17093
              length: 12
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17106
                length: 13
              pos: 17080
              length: 437
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: checkRequiredArgs();
                children: []
                pos: 17223
                length: 20
              - type: expression_statement
                fields:
                  text: option = (Option) option.clone();
                children: []
                pos: 17253
                length: 33
              - type: expression_statement
                fields:
                  text: updateRequiredOptions(option);
                children: []
                pos: 17296
                length: 30
              - type: expression_statement
                fields:
                  text: cmd.addOption(option);
                children: []
                pos: 17336
                length: 22
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.hasArg()
                        children: []
                        pos: 17372
                        length: 15
                    children: []
                    pos: 17371
                    length: 17
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: currentOption = option;
                    children: []
                    pos: 17411
                    length: 23
                  pos: 17397
                  length: 47
                pos: 17368
                length: 143
              pos: 17147
              length: 370
          children: []
          pos: 17080
          length: 437
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: updateRequiredOptions
              children: []
              pos: 17655
              length: 21
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option option
                children: []
                pos: 17677
                length: 13
              pos: 17642
              length: 578
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: option.isRequired()
                        children: []
                        pos: 17742
                        length: 19
                    children: []
                    pos: 17741
                    length: 21
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: expectedOpts.remove(option.getKey());
                    children: []
                    pos: 17785
                    length: 37
                  pos: 17771
                  length: 61
                pos: 17738
                length: 94
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: options.getOptionGroup(option)
                            children: []
                            pos: 17942
                            length: 30
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 17976
                            length: 4
                        children: []
                        pos: 17942
                        length: 38
                    children: []
                    pos: 17941
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = options.getOptionGroup(option);
                    children: []
                    pos: 18004
                    length: 51
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 18073
                            length: 18
                        children: []
                        pos: 18072
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: expectedOpts.remove(group);
                        children: []
                        pos: 18123
                        length: 27
                      pos: 18105
                      length: 59
                    pos: 18069
                    length: 95
                  - type: expression_statement
                    fields:
                      text: group.setSelected(option);
                    children: []
                    pos: 18178
                    length: 26
                  pos: 17990
                  length: 224
                pos: 17938
                length: 276
              pos: 17728
              length: 492
          children: []
          pos: 17642
          length: 578
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: handleConcatenatedOptions
              children: []
              pos: 19605
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String token
                children: []
                pos: 19631
                length: 12
              pos: 19590
              length: 775
            body:
              type: block
              fields: {}
              children:
              - type: for_statement
                fields:
                  text: |-
                    for (int i = 1; i < token.length(); i++)
                            {
                                String ch = String.valueOf(token.charAt(i));

                                if (options.hasOption(ch))
                                {
                                    handleOption(options.getOption(ch));

                                    if (currentOption != null && token.length() != i + 1)
                                    {
                                        // add the trail as an argument of the option
                                        currentOption.addValueForProcessing(token.substring(i + 1));
                                        break;
                                    }
                                }
                                else
                                {
                                    handleUnknownToken(stopAtNonOption && i > 1 ? token.substring(i) : token);
                                    break;
                                }
                            }
                children: []
                pos: 19681
                length: 678
              pos: 19671
              length: 694
          children: []
          pos: 19590
          length: 775
        pos: 1010
        length: 19357
    children: []
    pos: 1010
    length: 19357
  pos: 0
  length: 20368
text_diff: "--- before\n+++ after\n@@ -299,15 +299,9 @@\n     private boolean isShortOption(String
  token)\n     {\n         // short options (-S, -SV, -S=V, -SV1=V2, -S1S2)\n-        if
  (!token.startsWith(\"-\") || token.length() == 1)\n-        {\n-            return
  false;\n-        }\n+        return token.startsWith(\"-\") && token.length() >=
  2 && options.hasShortOption(token.substring(1, 2));\n \n         // remove leading
  \"-\" and \"=value\"\n-        int pos = token.indexOf(\"=\");\n-        String
  optName = pos == -1 ? token.substring(1) : token.substring(1, pos);\n-        return
  options.hasShortOption(optName);\n     }\n \n     /**\n"
tree_diff: |+
  New cluster:
  UPDATE from return options.hasShortOption(optName); to return token.startsWith("-") && token.length() >= 2 && options.hasShortOption(token.substring(1, 2));
  ------------
  ===
  update-node
  ---
  return_statement: return options.hasShortOption(optName); [9458,9497]
  replace return options.hasShortOption(optName); by return token.startsWith("-") && token.length() >= 2 && options.hasShortOption(token.substring(1, 2));

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [9188,9284]
      parenthesized_expression [9191,9238]
          or [9192,9237]
              unary_expression: !token.startsWith("-") [9192,9214]
              equals [9218,9237]
                  method_invocation: token.length() [9218,9232]
                  decimal_integer_literal: 1 [9236,9237]
      block [9247,9284]
          return_statement: return false; [9261,9274]

  New cluster:
  ===
  delete-node
  ---
  local_variable_declaration: int pos = token.indexOf("="); [9337,9366]
  ===
  ------------
  ===
  delete-node
  ---
  local_variable_declaration: int pos = token.indexOf("="); [9337,9366]
  ===

  New cluster:
  ===
  delete-node
  ---
  local_variable_declaration: String optName = pos == -1 ? token.substring(1) : token.substring(1, pos); [9375,9449]
  ===
  ------------
  ===
  delete-node
  ---
  local_variable_declaration: String optName = pos == -1 ? token.substring(1) : token.substring(1, pos); [9375,9449]
  ===

...
