---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 5044
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 5173
          length: 91
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5268
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5449
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5640
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 5828
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 6017
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 6200
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6374
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6568
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6611
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6667
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6708
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 6759
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 6804
          length: 78
        - type: field_declaration
          fields:
            text: |-
              private final Map<String, String> delegateCallingConventions =
                    Maps.newHashMap();
          children: []
          pos: 6885
          length: 87
        - type: field_declaration
          fields:
            text: |-
              private final Map<Node, AstFunctionContents> functionAnalysisResults =
                    Maps.newHashMap();
          children: []
          pos: 7025
          length: 95
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 7281
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 7303
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 7324
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 7348
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 7696
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 7704
                      length: 11
                    pos: 7691
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 7725
                      length: 62
                    pos: 7717
                    length: 76
                children: []
                pos: 7691
                length: 102
              pos: 7267
              length: 530
          children: []
          pos: 7267
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 7801
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 7907
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 8411
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8423
                length: 9
              pos: 8386
              length: 1971
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 8643
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 8670
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8720
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8730
                            length: 4
                        children: []
                        pos: 8720
                        length: 14
                    children: []
                    pos: 8719
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        (new FirstOrderFunctionAnalyzer(compiler, functionAnalysisResults))
                                  .process(root.getFirstChild(), root.getLastChild());
                    children: []
                    pos: 8802
                    length: 130
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 8991
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 9035
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 9115
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 9156
                    length: 53
                  pos: 8736
                  length: 479
                pos: 8716
                length: 704
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 9426
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 9470
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type.isFunctionType()) {
                            FunctionType fnType = type.toMaybeFunctionType();
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 9666
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 10148
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10158
                            length: 4
                        children: []
                        pos: 10148
                        length: 14
                    children: []
                    pos: 10147
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes,
                                  delegateCallingConventions);
                    children: []
                    pos: 10172
                    length: 154
                  pos: 10164
                  length: 168
                pos: 10144
                length: 188
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 10337
                length: 16
              pos: 8448
              length: 1909
          children: []
          pos: 8386
          length: 1971
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: patchGlobalScope
              children: []
              pos: 10651
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope globalScope
                children: []
                pos: 10668
                length: 17
              pos: 10646
              length: 1668
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(scriptRoot.isScript());
                children: []
                pos: 10859
                length: 48
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(globalScope);
                children: []
                pos: 10912
                length: 40
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(globalScope.isGlobal());
                children: []
                pos: 10957
                length: 49
              - type: local_variable_declaration
                fields:
                  text: String scriptName = NodeUtil.getSourceName(scriptRoot);
                children: []
                pos: 11012
                length: 55
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(scriptName);
                children: []
                pos: 11072
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {
                          if (scriptName.equals(NodeUtil.getSourceName(node))) {
                            functionAnalysisResults.remove(node);
                          }
                        }
                children: []
                pos: 11116
                length: 195
              - type: expression_statement
                fields:
                  text: |-
                    (new FirstOrderFunctionAnalyzer(
                            compiler, functionAnalysisResults)).process(null, scriptRoot);
                children: []
                pos: 11317
                length: 103
              - type: local_variable_declaration
                fields:
                  text: Iterator<Var> varIter = globalScope.getVars();
                children: []
                pos: 11723
                length: 46
              - type: local_variable_declaration
                fields:
                  text: List<Var> varsToRemove = Lists.newArrayList();
                children: []
                pos: 11774
                length: 46
              - type: while_statement
                fields:
                  text: |-
                    while (varIter.hasNext()) {
                          Var oldVar = varIter.next();
                          if (scriptName.equals(oldVar.getInputName())) {
                            varsToRemove.add(oldVar);
                          }
                        }
                children: []
                pos: 11825
                length: 164
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Var var : varsToRemove) {
                          globalScope.undeclare(var);
                          globalScope.getTypeOfThis().removeProperty(var.getName());
                        }
                children: []
                pos: 11994
                length: 135
              - type: local_variable_declaration
                fields:
                  text: GlobalScopeBuilder scopeBuilder = new GlobalScopeBuilder(globalScope);
                children: []
                pos: 12176
                length: 70
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, scriptRoot, scopeBuilder);
                children: []
                pos: 12251
                length: 59
              pos: 10704
              length: 1610
          children: []
          pos: 10646
          length: 1668
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 12473
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 12492
                length: 9
              pos: 12446
              length: 1400
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 12510
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 12608
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 12649
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 12704
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 12768
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 12822
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 12877
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 12937
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 12995
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13058
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13114
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13175
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 13240
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13296
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13359
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13421
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13481
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 13540
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 13768
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 13833
                length: 9
              pos: 12503
              length: 1343
          children: []
          pos: 12446
          length: 1400
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 13863
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 13889
                length: 11
              pos: 13850
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 13926
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 13988
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 14061
                length: 89
              pos: 13920
              length: 234
          children: []
          pos: 13850
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 14171
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14194
                length: 11
              pos: 14158
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 14250
                length: 64
              pos: 14244
              length: 74
          children: []
          pos: 14158
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 14335
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14353
                length: 11
              pos: 14322
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 14395
                length: 42
              pos: 14389
              length: 52
          children: []
          pos: 14322
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 14466
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 14544
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 14588
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 14709
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 14715
                      length: 15
                    pos: 14683
                    length: 841
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 14764
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 14800
                              length: 14
                          children: []
                          pos: 14799
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, child.getFirstChild(),
                                              NodeUtil.getBestJSDocInfo(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.isAssign()) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getLastChild(),
                                              firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, null, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 14816
                          length: 702
                      children: []
                      pos: 14792
                      length: 726
                    pos: 14756
                    length: 768
                children: []
                pos: 14683
                length: 841
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 15543
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 15569
                      length: 13
                    pos: 15530
                    length: 432
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 15628
                              length: 26
                          children: []
                          pos: 15627
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 15670
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 15678
                                      length: 4
                                  children: []
                                  pos: 15670
                                  length: 12
                              children: []
                              pos: 15669
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 15700
                                      length: 27
                                  children: []
                                  pos: 15699
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 15743
                                  length: 62
                                pos: 15729
                                length: 88
                              pos: 15696
                              length: 242
                            pos: 15684
                            length: 264
                          pos: 15666
                          length: 282
                        pos: 15656
                        length: 300
                      pos: 15624
                      length: 332
                    pos: 15616
                    length: 346
                children: []
                pos: 15530
                length: 432
              pos: 14445
              length: 1521
          children: []
          pos: 14445
          length: 1521
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 15985
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 15999
                length: 23
              pos: 15970
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 16030
                length: 46
              pos: 16024
              length: 56
          children: []
          pos: 15970
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 16107
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 16229
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 16253
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 16430
                length: 67
              - type: field_declaration
                fields:
                  text: private List<Node> lentObjectLiterals = null;
                children: []
                pos: 16914
                length: 45
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 17135
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 17287
                length: 33
              - type: field_declaration
                fields:
                  text: private InputId inputId;
                children: []
                pos: 17382
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 17412
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 17498
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 17514
                      length: 9
                    pos: 17493
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 17546
                      length: 54
                    pos: 17538
                    length: 68
                children: []
                pos: 17493
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 17617
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 17612
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 17689
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 17844
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 17888
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 18066
                      length: 40
                    pos: 17632
                    length: 480
                children: []
                pos: 17612
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 18153
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18168
                      length: 15
                    pos: 18118
                    length: 1043
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 18222
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isFunction()
                                  children: []
                                  pos: 18258
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: n.isScript()
                                  children: []
                                  pos: 18286
                                  length: 12
                              children: []
                              pos: 18258
                              length: 40
                          children: []
                          pos: 18257
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(inputId);
                          children: []
                          pos: 18310
                          length: 36
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 18355
                          length: 39
                        pos: 18300
                        length: 102
                      pos: 18254
                      length: 148
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || !parent.isFunction() ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 18534
                      length: 131
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 18677
                              length: 7
                          children: []
                          pos: 18676
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 18826
                                  length: 29
                              children: []
                              pos: 18825
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child, n);
                                              }
                                            }
                              children: []
                              pos: 18869
                              length: 245
                            pos: 18857
                            length: 267
                          pos: 18822
                          length: 302
                        pos: 18686
                        length: 446
                      pos: 18673
                      length: 459
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 19140
                      length: 15
                    pos: 18214
                    length: 947
                children: []
                pos: 18118
                length: 1043
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 19193
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19199
                      length: 15
                    pos: 19167
                    length: 1765
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 19245
                      length: 25
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(t, n);
                      children: []
                      pos: 19277
                      length: 25
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 19318
                              length: 11
                          children: []
                          pos: 19317
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        checkForCallingConventionDefiningCalls(n, delegateCallingConventions);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n, parent);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.isGetProp() &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.isExprResult() &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 19331
                          length: 1287
                      children: []
                      pos: 19310
                      length: 1308
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: n.getParent()
                                          children: []
                                          pos: 20693
                                          length: 13
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 20710
                                          length: 4
                                      children: []
                                      pos: 20693
                                      length: 21
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: NodeUtil.isStatement(n)
                                      children: []
                                      pos: 20718
                                      length: 23
                                  children: []
                                  pos: 20693
                                  length: 48
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lentObjectLiterals
                                      children: []
                                      pos: 20755
                                      length: 18
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 20777
                                      length: 4
                                  children: []
                                  pos: 20755
                                  length: 26
                              children: []
                              pos: 20693
                              length: 88
                          children: []
                          pos: 20692
                          length: 90
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node objLit : lentObjectLiterals) {
                                        defineObjectLiteral(objLit);
                                      }
                          children: []
                          pos: 20793
                          length: 89
                        - type: expression_statement
                          fields:
                            text: lentObjectLiterals.clear();
                          children: []
                          pos: 20891
                          length: 27
                        pos: 20783
                        length: 143
                      pos: 20689
                      length: 237
                    pos: 19237
                    length: 1695
                children: []
                pos: 19167
                length: 1765
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 20951
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 20970
                      length: 15
                    pos: 20938
                    length: 1331
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 21011
                              length: 11
                          children: []
                          pos: 21010
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        // Defer keys to the Token.OBJECTLIT case
                                        if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
                                          n.setJSType(getNativeType(STRING_TYPE));
                                        }
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                        JSDocInfo info = n.getJSDocInfo();
                                        if (info != null &&
                                            info.getLendsName() != null) {
                                          if (lentObjectLiterals == null) {
                                            lentObjectLiterals = Lists.newArrayList();
                                          }
                                          lentObjectLiterals.add(n);
                                        } else {
                                          defineObjectLiteral(n);
                                        }
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 21024
                          length: 1239
                      children: []
                      pos: 21003
                      length: 1260
                    pos: 20995
                    length: 1274
                children: []
                pos: 20938
                length: 1331
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 22288
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objectLit
                      children: []
                      pos: 22308
                      length: 14
                    pos: 22275
                    length: 1674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 22371
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 22397
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 22450
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22458
                                      length: 4
                                  children: []
                                  pos: 22450
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 22476
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22499
                                      length: 4
                                  children: []
                                  pos: 22476
                                  length: 27
                              children: []
                              pos: 22450
                              length: 53
                          children: []
                          pos: 22449
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 22515
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 22563
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 22615
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22627
                                      length: 4
                                  children: []
                                  pos: 22615
                                  length: 16
                              children: []
                              pos: 22614
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 22645
                              length: 94
                            pos: 22633
                            length: 116
                          pos: 22611
                          length: 616
                        pos: 22505
                        length: 730
                      pos: 22446
                      length: 789
                    - type: expression_statement
                      fields:
                        text: info = NodeUtil.getBestJSDocInfo(objectLit);
                      children: []
                      pos: 23243
                      length: 44
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(objectLit);
                      children: []
                      pos: 23294
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 23349
                      length: 55
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 23411
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 23454
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 23462
                                      length: 4
                                  children: []
                                  pos: 23454
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 23470
                                  length: 27
                              children: []
                              pos: 23454
                              length: 43
                          children: []
                          pos: 23453
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 23509
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 23586
                          length: 23
                        pos: 23499
                        length: 118
                      pos: 23450
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 23629
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 23637
                                  length: 4
                              children: []
                              pos: 23629
                              length: 12
                          children: []
                          pos: 23628
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType();
                          children: []
                          pos: 23653
                          length: 48
                        pos: 23643
                        length: 66
                      pos: 23625
                      length: 84
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 23717
                      length: 33
                    - type: expression_statement
                      fields:
                        text: |-
                          processObjectLitProperties(
                                    objectLit, ObjectType.cast(objectLit.getJSType()), !createdEnumType);
                      children: []
                      pos: 23836
                      length: 107
                    pos: 22324
                    length: 1625
                children: []
                pos: 22275
                length: 1674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 24346
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objLit
                      children: []
                      pos: 24382
                      length: 11
                    pos: 24341
                    length: 1382
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType =
                                      getDeclaredType(keyNode.getSourceFileName(), info, keyNode, value);
                                  JSType keyType =  objLitType.isEnumType() ?
                                      objLitType.toMaybeEnumType().getElementsType() :
                                      NodeUtil.getObjectLitKeyTypeFromValueType(keyNode, valueType);

                                  // Try to declare this property in the current scope if it
                                  // has an authoritative name.
                                  String qualifiedName = NodeUtil.getBestLValueName(keyNode);
                                  if (qualifiedName != null) {
                                    boolean inferred = keyType == null;
                                    defineSlot(keyNode, objLit, qualifiedName, keyType, inferred);
                                  } else if (keyType != null) {
                                    setDeferredType(keyNode, keyType);
                                  }

                                  if (keyType != null && objLitType != null && declareOnOwner) {
                                    // Declare this property on its object literal.
                                    boolean isExtern = keyNode.isFromExterns();
                                    objLitType.defineDeclaredProperty(memberName, keyType, keyNode);
                                  }
                                }
                      children: []
                      pos: 24458
                      length: 1259
                    pos: 24450
                    length: 1273
                children: []
                pos: 24341
                length: 1382
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 25974
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 26002
                      length: 17
                    pos: 25959
                    length: 674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 26064
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode =
                                    node.isGetProp() ? node.getFirstChild() :
                                    NodeUtil.isObjectLitKey(node, node.getParent()) ? node.getParent() :
                                    null;
                      children: []
                      pos: 26092
                      length: 161
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 26264
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 26272
                                  length: 4
                              children: []
                              pos: 26264
                              length: 12
                          children: []
                          pos: 26263
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 26292
                                  length: 14
                              children: []
                              pos: 26291
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 26320
                              length: 54
                            pos: 26308
                            length: 76
                          pos: 26288
                          length: 310
                        pos: 26278
                        length: 328
                      pos: 26260
                      length: 346
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 26613
                      length: 14
                    pos: 26056
                    length: 577
                children: []
                pos: 25959
                length: 674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 26788
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26809
                      length: 6
                    pos: 26783
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 26835
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 26887
                      length: 46
                    pos: 26827
                    length: 112
                children: []
                pos: 26783
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 27000
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27012
                      length: 6
                    pos: 26995
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 27041
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 27085
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 27127
                      length: 31
                    pos: 27033
                    length: 131
                children: []
                pos: 26995
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 27228
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27238
                      length: 6
                    pos: 27223
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 27267
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 27309
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 27354
                              length: 23
                          children: []
                          pos: 27353
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 27393
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 27401
                                      length: 4
                                  children: []
                                  pos: 27393
                                  length: 12
                              children: []
                              pos: 27392
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 27450
                              length: 63
                            pos: 27407
                            length: 116
                          pos: 27389
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 27532
                          length: 102
                        pos: 27379
                        length: 263
                      pos: 27350
                      length: 440
                    pos: 27259
                    length: 537
                children: []
                pos: 27223
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 27858
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27880
                      length: 6
                    pos: 27853
                    length: 849
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 27909
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(n);
                      children: []
                      pos: 28063
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = NodeUtil.getBestJSDocInfo(n);
                      children: []
                      pos: 28110
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 28163
                      length: 57
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 28227
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 28390
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 28596
                              length: 33
                          children: []
                          pos: 28595
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 28641
                          length: 47
                        pos: 28631
                        length: 65
                      pos: 28592
                      length: 104
                    pos: 27901
                    length: 801
                children: []
                pos: 27853
                length: 849
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 29105
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 29116
                      length: 9
                    pos: 29092
                    length: 420
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 29174
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(sourceName, info, name,
                          value);
                      children: []
                      pos: 29241
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 29313
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29321
                                  length: 4
                              children: []
                              pos: 29313
                              length: 12
                          children: []
                          pos: 29312
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              type = name.isFromExterns() ?
                                          getNativeType(UNKNOWN_TYPE) : null;
                          children: []
                          pos: 29386
                          length: 77
                        pos: 29327
                        length: 144
                      pos: 29309
                      length: 162
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 29478
                      length: 28
                    pos: 29166
                    length: 346
                children: []
                pos: 29092
                length: 420
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 29858
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 29896
                      length: 17
                    pos: 29842
                    length: 350
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 29956
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29964
                                  length: 4
                              children: []
                              pos: 29956
                              length: 12
                          children: []
                          pos: 29955
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 29980
                          length: 12
                        pos: 29970
                        length: 30
                      pos: 29952
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 30011
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 30021
                                      length: 4
                                  children: []
                                  pos: 30011
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                                  children: []
                                  pos: 30039
                                  length: 51
                              children: []
                              pos: 30011
                              length: 79
                          children: []
                          pos: 30010
                          length: 81
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 30102
                          length: 13
                        pos: 30092
                        length: 31
                      pos: 30007
                      length: 116
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 30130
                      length: 56
                    pos: 29944
                    length: 248
                children: []
                pos: 29842
                length: 350
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 31240
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 31277
                      length: 21
                    pos: 31219
                    length: 3793
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 31409
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 31528
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 31538
                                          length: 4
                                      children: []
                                      pos: 31528
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 31546
                                      length: 24
                                  children: []
                                  pos: 31528
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 31574
                                  length: 16
                              children: []
                              pos: 31528
                              length: 62
                          children: []
                          pos: 31527
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 31602
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 31665
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31672
                                              length: 4
                                          children: []
                                          pos: 31665
                                          length: 11
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: var.getType()
                                              children: []
                                              pos: 31680
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31697
                                              length: 4
                                          children: []
                                          pos: 31680
                                          length: 21
                                      children: []
                                      pos: 31665
                                      length: 36
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: var.getType().isFunctionType()
                                      children: []
                                      pos: 31717
                                      length: 30
                                  children: []
                                  pos: 31665
                                  length: 82
                              children: []
                              pos: 31664
                              length: 84
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = var.getType().toMaybeFunctionType();
                              children: []
                              pos: 31761
                              length: 64
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 31841
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 31872
                                                  length: 25
                                              children: []
                                              pos: 31841
                                              length: 56
                                          children: []
                                          pos: 31840
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 31916
                                          length: 33
                                      children: []
                                      pos: 31840
                                      length: 109
                                  children: []
                                  pos: 31839
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 31965
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 32010
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 32018
                                                  length: 4
                                              children: []
                                              pos: 32010
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 32026
                                              length: 16
                                          children: []
                                          pos: 32010
                                          length: 32
                                      children: []
                                      pos: 32009
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 32060
                                      length: 63
                                    pos: 32044
                                    length: 93
                                  pos: 32006
                                  length: 131
                                pos: 31951
                                length: 198
                              pos: 31836
                              length: 313
                            pos: 31749
                            length: 410
                          pos: 31661
                          length: 498
                        pos: 31592
                        length: 575
                      pos: 31524
                      length: 643
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 32179
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 32195
                                  length: 4
                              children: []
                              pos: 32179
                              length: 20
                          children: []
                          pos: 32178
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 32211
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.isFunction();
                          children: []
                          pos: 32274
                          length: 72
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 32355
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 32406
                          length: 88
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                              : null;'
                          children: []
                          pos: 32503
                          length: 61
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 32578
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 32586
                                          length: 4
                                      children: []
                                      pos: 32578
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 32594
                                      length: 14
                                  children: []
                                  pos: 32578
                                  length: 30
                              children: []
                              pos: 32577
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 32622
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 32767
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 32825
                                      length: 21
                                  children: []
                                  pos: 32824
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = type.toMaybeFunctionType();
                                  children: []
                                  pos: 32862
                                  length: 42
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 32917
                                  length: 32
                                pos: 32848
                                length: 113
                              pos: 32821
                              length: 140
                            pos: 32610
                            length: 361
                          pos: 32574
                          length: 397
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 32985
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 33001
                                      length: 4
                                  children: []
                                  pos: 32985
                                  length: 20
                              children: []
                              pos: 32984
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(lvalueNode);
                              children: []
                              pos: 33074
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 33142
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: Var ownerVar = null;
                              children: []
                              pos: 33210
                              length: 20
                            - type: local_variable_declaration
                              fields:
                                text: String propName = null;
                              children: []
                              pos: 33241
                              length: 23
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 33275
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 33318
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 33331
                                          length: 4
                                      children: []
                                      pos: 33318
                                      length: 17
                                  children: []
                                  pos: 33317
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 33351
                                  length: 35
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 33403
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33415
                                              length: 4
                                          children: []
                                          pos: 33403
                                          length: 16
                                      children: []
                                      pos: 33402
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: ownerType = ObjectType.cast(ownerVar.getType());
                                      children: []
                                      pos: 33437
                                      length: 48
                                    pos: 33421
                                    length: 78
                                  pos: 33399
                                  length: 100
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: name
                                              children: []
                                              pos: 33516
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33524
                                              length: 4
                                          children: []
                                          pos: 33516
                                          length: 12
                                      children: []
                                      pos: 33515
                                      length: 14
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: propName = name.substring(ownerName.length()
                                          + 1);
                                      children: []
                                      pos: 33546
                                      length: 50
                                    pos: 33530
                                    length: 80
                                  pos: 33512
                                  length: 98
                                pos: 33337
                                length: 285
                              pos: 33314
                              length: 308
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenPropType = null;
                              children: []
                              pos: 33634
                              length: 39
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 33688
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33701
                                              length: 4
                                          children: []
                                          pos: 33688
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: propName
                                              children: []
                                              pos: 33709
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33721
                                              length: 4
                                          children: []
                                          pos: 33709
                                          length: 16
                                      children: []
                                      pos: 33688
                                      length: 37
                                  children: []
                                  pos: 33687
                                  length: 39
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      overriddenPropType =
                                                      findOverriddenFunction(ownerType, propName);
                                  children: []
                                  pos: 33741
                                  length: 81
                                pos: 33727
                                length: 107
                              pos: 33684
                              length: 150
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setContents(getFunctionAnalysisResults(fnRoot))
                                                .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                                .inferTemplateTypeName(info)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 33846
                              length: 392
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 34288
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 34339
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 34352
                                              length: 4
                                          children: []
                                          pos: 34339
                                          length: 17
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerType.isFunctionPrototypeType()
                                          children: []
                                          pos: 34360
                                          length: 35
                                      children: []
                                      pos: 34339
                                      length: 56
                                  children: []
                                  pos: 34338
                                  length: 58
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      builder.inferThisType(
                                                      info, ownerType.getOwnerFunction().getInstanceType());
                                  children: []
                                  pos: 34411
                                  length: 93
                                - type: expression_statement
                                  fields:
                                    text: searchedForThisType = true;
                                  children: []
                                  pos: 34517
                                  length: 27
                                pos: 34397
                                length: 159
                              pos: 34335
                              length: 389
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 34740
                                      length: 20
                                  children: []
                                  pos: 34739
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info);
                                  children: []
                                  pos: 34776
                                  length: 28
                                pos: 34762
                                length: 54
                              pos: 34736
                              length: 80
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .buildAndRegister();
                              children: []
                              pos: 34828
                              length: 114
                            pos: 33007
                            length: 1945
                          pos: 32981
                          length: 1971
                        pos: 32201
                        length: 2759
                      pos: 32175
                      length: 2785
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 34986
                      length: 20
                    pos: 31400
                    length: 3612
                children: []
                pos: 31219
                length: 3793
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 35126
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 35158
                      length: 20
                    pos: 35105
                    length: 780
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 35291
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: propType
                                      children: []
                                      pos: 35356
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 35368
                                      length: 4
                                  children: []
                                  pos: 35356
                                  length: 16
                                right:
                                  type: method_invocation
                                  fields:
                                    text: propType.isFunctionType()
                                  children: []
                                  pos: 35376
                                  length: 25
                              children: []
                              pos: 35356
                              length: 45
                          children: []
                          pos: 35355
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return propType.toMaybeFunctionType();
                          children: []
                          pos: 35413
                          length: 38
                        pos: 35403
                        length: 56
                      pos: 35352
                      length: 507
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 35867
                      length: 12
                    pos: 35197
                    length: 688
                children: []
                pos: 35105
                length: 780
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 36592
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 36616
                      length: 11
                    pos: 36575
                    length: 1636
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 36691
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 36731
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 36793
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 36829
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 36839
                                      length: 4
                                  children: []
                                  pos: 36829
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 36847
                                  length: 24
                              children: []
                              pos: 36829
                              length: 42
                          children: []
                          pos: 36828
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 36918
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 36981
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36988
                                          length: 4
                                      children: []
                                      pos: 36981
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 36996
                                      length: 33
                                  children: []
                                  pos: 36981
                                  length: 48
                              children: []
                              pos: 36980
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 37043
                              length: 36
                            pos: 37031
                            length: 58
                          pos: 36977
                          length: 112
                        pos: 36873
                        length: 224
                      pos: 36825
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 37109
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 37121
                                  length: 4
                              children: []
                              pos: 37109
                              length: 16
                          children: []
                          pos: 37108
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 37137
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, rValue,
                              elementsType);
                          children: []
                          pos: 37238
                          length: 67
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 37319
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 37329
                                          length: 4
                                      children: []
                                      pos: 37319
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isObjectLit()
                                      children: []
                                      pos: 37337
                                      length: 20
                                  children: []
                                  pos: 37319
                                  length: 38
                              children: []
                              pos: 37318
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 37406
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 37451
                              length: 589
                            pos: 37359
                            length: 691
                          pos: 37315
                          length: 735
                        pos: 37127
                        length: 931
                      pos: 37105
                      length: 953
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 38070
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 38078
                                      length: 4
                                  children: []
                                  pos: 38070
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 38086
                                  length: 16
                              children: []
                              pos: 38070
                              length: 32
                          children: []
                          pos: 38069
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 38114
                          length: 59
                        pos: 38104
                        length: 77
                      pos: 38066
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 38189
                      length: 16
                    pos: 36683
                    length: 1528
                children: []
                pos: 36575
                length: 1636
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 38634
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 38645
                      length: 9
                    pos: 38621
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 38690
                      length: 45
                    pos: 38682
                    length: 59
                children: []
                pos: 38621
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 39235
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 39246
                      length: 6
                    pos: 39230
                    length: 694
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 39306
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.isName()
                              children: []
                              pos: 39508
                              length: 10
                          children: []
                          pos: 39507
                          length: 12
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.isFunction() ||
                                          parent.isVar() ||
                                          parent.isParamList() ||
                                          parent.isCatch());
                          children: []
                          pos: 39530
                          length: 160
                        pos: 39520
                        length: 178
                      pos: 39504
                      length: 347
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 39858
                      length: 60
                    pos: 39298
                    length: 626
                children: []
                pos: 39230
                length: 694
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 40365
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 40376
                      length: 6
                    pos: 40360
                    length: 5801
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 40465
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.isName() && scope.isGlobal();
                      children: []
                      pos: 40526
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.isVar() ||
                                     parent.isFunction());
                      children: []
                      pos: 40586
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 40916
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isGetProp()
                                      children: []
                                      pos: 40958
                                      length: 13
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 40975
                                      length: 17
                                  children: []
                                  pos: 40958
                                  length: 34
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 41006
                                  length: 29
                              children: []
                              pos: 40958
                              length: 77
                          children: []
                          pos: 40957
                          length: 79
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 41047
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 41217
                                  length: 44
                              children: []
                              pos: 41216
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 41275
                              length: 42
                            pos: 41263
                            length: 64
                          pos: 41213
                          length: 114
                        pos: 41037
                        length: 298
                      pos: 40954
                      length: 381
                    - type: local_variable_declaration
                      fields:
                        text: boolean isExtern = n.isFromExterns();
                      children: []
                      pos: 41460
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Var newVar = null;
                      children: []
                      pos: 41504
                      length: 18
                    - type: local_variable_declaration
                      fields:
                        text: CompilerInput input = compiler.getInput(inputId);
                      children: []
                      pos: 41566
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 41626
                              length: 48
                          children: []
                          pos: 41625
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 41686
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              newVar = validator.expectUndeclaredVariable(
                                          sourceName, input, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 41746
                          length: 115
                        pos: 41676
                        length: 193
                      pos: 41622
                      length: 803
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType fnType = JSType.toMaybeFunctionType(type);
                      children: []
                      pos: 42510
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: fnType
                                      children: []
                                      pos: 42576
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 42586
                                      length: 4
                                  children: []
                                  pos: 42576
                                  length: 14
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!type.isEmptyType()"
                                  children: []
                                  pos: 42664
                                  length: 19
                              children: []
                              pos: 42576
                              length: 107
                          children: []
                          pos: 42575
                          length: 109
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isConstructor()
                                              children: []
                                              pos: 42700
                                              length: 22
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isInterface()
                                              children: []
                                              pos: 42726
                                              length: 20
                                          children: []
                                          pos: 42700
                                          length: 46
                                      children: []
                                      pos: 42699
                                      length: 48
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!fnType.equals(getNativeType(U2U_CONSTRUCTOR_TYPE))"
                                      children: []
                                      pos: 42763
                                      length: 51
                                  children: []
                                  pos: 42699
                                  length: 115
                              children: []
                              pos: 42698
                              length: 117
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superClassCtor = fnType.getSuperClassConstructor();
                              children: []
                              pos: 42883
                              length: 64
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType.Property prototypeSlot = fnType.getSlot("prototype");
                              children: []
                              pos: 42958
                              length: 64
                            - type: expression_statement
                              fields:
                                text: prototypeSlot.setNode(n);
                              children: []
                              pos: 43483
                              length: 25
                            - type: local_variable_declaration
                              fields:
                                text: String prototypeName = variableName + ".prototype";
                              children: []
                              pos: 43520
                              length: 51
                            - type: local_variable_declaration
                              fields:
                                text: Var prototypeVar = scopeToDeclareIn.getVar(prototypeName);
                              children: []
                              pos: 43803
                              length: 58
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: prototypeVar
                                              children: []
                                              pos: 43876
                                              length: 12
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 43892
                                              length: 4
                                          children: []
                                          pos: 43876
                                          length: 20
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: field_access
                                              fields:
                                                text: prototypeVar.scope
                                              children: []
                                              pos: 43900
                                              length: 18
                                            right:
                                              type: identifier
                                              fields:
                                                text: scopeToDeclareIn
                                              children: []
                                              pos: 43922
                                              length: 16
                                          children: []
                                          pos: 43900
                                          length: 38
                                      children: []
                                      pos: 43876
                                      length: 62
                                  children: []
                                  pos: 43875
                                  length: 64
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scopeToDeclareIn.undeclare(prototypeVar);
                                  children: []
                                  pos: 43954
                                  length: 41
                                pos: 43940
                                length: 67
                              pos: 43872
                              length: 135
                            - type: expression_statement
                              fields:
                                text: |-
                                  scopeToDeclareIn.declare(prototypeName,
                                                n, prototypeSlot.getType(), input,
                                                /* declared iff there's an explicit supertype */
                                                superClassCtor == null ||
                                                superClassCtor.getInstanceType().equals(
                                                    getNativeType(OBJECT_TYPE)));
                              children: []
                              pos: 44019
                              length: 294
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: newVar.getInitialValue()
                                                  children: []
                                                  pos: 44431
                                                  length: 24
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 44459
                                                  length: 4
                                              children: []
                                              pos: 44431
                                              length: 32
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!isExtern"
                                              children: []
                                              pos: 44481
                                              length: 9
                                          children: []
                                          pos: 44431
                                          length: 59
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: |-
                                              variableName.equals(
                                                                fnType.getInstanceType().getReferenceName())
                                          children: []
                                          pos: 44890
                                          length: 83
                                      children: []
                                      pos: 44431
                                      length: 542
                                  children: []
                                  pos: 44430
                                  length: 544
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      compiler.report(
                                                      JSError.make(sourceName, n,
                                                          fnType.isConstructor() ?
                                                          CTOR_INITIALIZER : IFACE_INITIALIZER,
                                                          variableName));
                                  children: []
                                  pos: 44989
                                  length: 199
                                pos: 44975
                                length: 225
                              pos: 44427
                              length: 773
                            pos: 42816
                            length: 2394
                          pos: 42695
                          length: 2515
                        pos: 42685
                        length: 2533
                      pos: 42572
                      length: 2646
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: shouldDeclareOnGlobalThis
                              children: []
                              pos: 45230
                              length: 25
                          children: []
                          pos: 45229
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType globalThis =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS);
                          children: []
                          pos: 45267
                          length: 82
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: identifier
                                  fields:
                                    text: inferred
                                  children: []
                                  pos: 45362
                                  length: 8
                              children: []
                              pos: 45361
                              length: 10
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  globalThis.defineInferredProperty(variableName,
                                                type == null ?
                                                getNativeType(JSTypeNative.NO_TYPE) :
                                                type,
                                                n);
                              children: []
                              pos: 45384
                              length: 166
                            pos: 45372
                            length: 188
                          pos: 45358
                          length: 287
                        pos: 45257
                        length: 396
                      pos: 45226
                      length: 427
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: isGlobalVar
                                              children: []
                                              pos: 45665
                                              length: 11
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: '"Window".equals(variableName)'
                                              children: []
                                              pos: 45680
                                              length: 29
                                          children: []
                                          pos: 45665
                                          length: 44
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 45723
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 45731
                                              length: 4
                                          children: []
                                          pos: 45723
                                          length: 12
                                      children: []
                                      pos: 45665
                                      length: 70
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 45749
                                      length: 21
                                  children: []
                                  pos: 45665
                                  length: 105
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 45784
                                  length: 20
                              children: []
                              pos: 45665
                              length: 139
                          children: []
                          pos: 45664
                          length: 141
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 45816
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 45930
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 45992
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn((type.toMaybeFunctionType()).getInstanceType());
                          children: []
                          pos: 46051
                          length: 96
                        pos: 45806
                        length: 349
                      pos: 45661
                      length: 494
                    pos: 40457
                    length: 5704
                children: []
                pos: 40360
                length: 5801
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 46275
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46302
                      length: 6
                    pos: 46259
                    length: 148
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Scope scope = getQnameRootScope(n);
                      children: []
                      pos: 46318
                      length: 35
                    - type: return_statement
                      fields:
                        text: return scope != null && scope.isGlobal();
                      children: []
                      pos: 46360
                      length: 41
                    pos: 46310
                    length: 97
                children: []
                pos: 46259
                length: 148
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getQnameRootScope
                    children: []
                    pos: 46499
                    length: 17
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 46517
                      length: 6
                    pos: 46485
                    length: 275
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 46533
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: root.isName()
                              children: []
                              pos: 46591
                              length: 13
                          children: []
                          pos: 46590
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 46616
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 46670
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 46677
                                      length: 4
                                  children: []
                                  pos: 46670
                                  length: 11
                              children: []
                              pos: 46669
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.getScope();
                              children: []
                              pos: 46695
                              length: 22
                            pos: 46683
                            length: 44
                          pos: 46666
                          length: 61
                        pos: 46606
                        length: 129
                      pos: 46587
                      length: 148
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 46742
                      length: 12
                    pos: 46525
                    length: 235
                children: []
                pos: 46485
                length: 275
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 47130
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 47146
                      length: 17
                    pos: 47115
                    length: 2128
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 47237
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 47245
                                      length: 4
                                  children: []
                                  pos: 47237
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 47253
                                  length: 14
                              children: []
                              pos: 47237
                              length: 30
                          children: []
                          pos: 47236
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                              info);
                          children: []
                          pos: 47279
                          length: 61
                        pos: 47269
                        length: 79
                      pos: 47233
                      length: 1935
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                          info);
                      children: []
                      pos: 49176
                      length: 61
                    pos: 47225
                    length: 2018
                children: []
                pos: 47115
                length: 2128
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 49270
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Var v"
                      children: []
                      pos: 49286
                      length: 15
                    pos: 49249
                    length: 211
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: 'JSType t = v == null ? null : v.getType();'
                      children: []
                      pos: 49311
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: 'ObjectType o = t == null ? null : t.dereference();'
                      children: []
                      pos: 49360
                      length: 50
                    - type: return_statement
                      fields:
                        text: return JSType.toMaybeFunctionType(o);
                      children: []
                      pos: 49417
                      length: 37
                    pos: 49303
                    length: 157
                children: []
                pos: 49249
                length: 211
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForCallingConventionDefiningCalls
                    children: []
                    pos: 49566
                    length: 38
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 49614
                      length: 6
                    pos: 49553
                    length: 228
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: |-
                          codingConvention.checkForCallingConventionDefiningCalls(n,
                                    delegateCallingConventions);
                      children: []
                      pos: 49678
                      length: 97
                    pos: 49670
                    length: 111
                children: []
                pos: 49553
                length: 228
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 49997
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 50033
                      length: 15
                    pos: 49984
                    length: 2717
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 50079
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 50180
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 50196
                                  length: 4
                              children: []
                              pos: 50180
                              length: 20
                          children: []
                          pos: 50179
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType superCtor = getFunctionType(
                                          scope.getVar(relationship.superclassName));
                          children: []
                          pos: 50212
                          length: 97
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType subCtor = getFunctionType(
                                          scope.getVar(relationship.subclassName));
                          children: []
                          pos: 50318
                          length: 93
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: superCtor
                                                  children: []
                                                  pos: 50424
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 50437
                                                  length: 4
                                              children: []
                                              pos: 50424
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: superCtor.isConstructor()
                                              children: []
                                              pos: 50445
                                              length: 25
                                          children: []
                                          pos: 50424
                                          length: 46
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 50486
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 50497
                                              length: 4
                                          children: []
                                          pos: 50486
                                          length: 15
                                      children: []
                                      pos: 50424
                                      length: 77
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: subCtor.isConstructor()
                                      children: []
                                      pos: 50505
                                      length: 23
                                  children: []
                                  pos: 50424
                                  length: 104
                              children: []
                              pos: 50423
                              length: 106
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType superClass = superCtor.getInstanceType();
                              children: []
                              pos: 50542
                              length: 52
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType subClass = subCtor.getInstanceType();
                              children: []
                              pos: 50605
                              length: 48
                            - type: expression_statement
                              fields:
                                text: superCtor = superClass.getConstructor();
                              children: []
                              pos: 50851
                              length: 40
                            - type: expression_statement
                              fields:
                                text: subCtor = subClass.getConstructor();
                              children: []
                              pos: 50902
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: field_access
                                                  fields:
                                                    text: relationship.type
                                                  children: []
                                                  pos: 50954
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: SubclassType.INHERITS
                                                  children: []
                                                  pos: 50975
                                                  length: 21
                                              children: []
                                              pos: 50954
                                              length: 42
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!superClass.isEmptyType()"
                                              children: []
                                              pos: 51014
                                              length: 25
                                          children: []
                                          pos: 50954
                                          length: 85
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!subClass.isEmptyType()"
                                          children: []
                                          pos: 51043
                                          length: 23
                                      children: []
                                      pos: 50954
                                      length: 112
                                  children: []
                                  pos: 50953
                                  length: 114
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 51082
                                  length: 54
                                pos: 51068
                                length: 80
                              pos: 50950
                              length: 198
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 51164
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51177
                                              length: 4
                                          children: []
                                          pos: 51164
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 51185
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 51196
                                              length: 4
                                          children: []
                                          pos: 51185
                                          length: 15
                                      children: []
                                      pos: 51164
                                      length: 36
                                  children: []
                                  pos: 51163
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 51216
                                  length: 99
                                pos: 51202
                                length: 125
                              pos: 51160
                              length: 167
                            pos: 50530
                            length: 807
                          pos: 50420
                          length: 917
                        pos: 50202
                        length: 1143
                      pos: 50176
                      length: 1169
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 51353
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 51456
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 51484
                                  length: 4
                              children: []
                              pos: 51456
                              length: 32
                          children: []
                          pos: 51455
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 51500
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 51614
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 51628
                                      length: 4
                                  children: []
                                  pos: 51614
                                  length: 18
                              children: []
                              pos: 51613
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 51646
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 51718
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51734
                                          length: 4
                                      children: []
                                      pos: 51718
                                      length: 20
                                  children: []
                                  pos: 51717
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 51754
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 51853
                                  length: 92
                                pos: 51740
                                length: 217
                              pos: 51714
                              length: 243
                            pos: 51634
                            length: 333
                          pos: 51610
                          length: 357
                        pos: 51490
                        length: 485
                      pos: 51452
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 51983
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 52092
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52116
                                  length: 4
                              children: []
                              pos: 52092
                              length: 28
                          children: []
                          pos: 52091
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 52132
                          length: 48
                        pos: 52122
                        length: 66
                      pos: 52088
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(t, n);
                      children: []
                      pos: 52196
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 52299
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 52320
                                  length: 4
                              children: []
                              pos: 52299
                              length: 25
                          children: []
                          pos: 52298
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType type = ObjectType.cast(
                                          typeRegistry.getType(objectLiteralCast.typeName));
                          children: []
                          pos: 52336
                          length: 97
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: type
                                          children: []
                                          pos: 52446
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 52454
                                          length: 4
                                      children: []
                                      pos: 52446
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: type.getConstructor()
                                          children: []
                                          pos: 52462
                                          length: 21
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 52487
                                          length: 4
                                      children: []
                                      pos: 52462
                                      length: 29
                                  children: []
                                  pos: 52446
                                  length: 45
                              children: []
                              pos: 52445
                              length: 47
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: setDeferredType(objectLiteralCast.objectNode,
                                  type);
                              children: []
                              pos: 52505
                              length: 52
                            pos: 52493
                            length: 74
                          pos: 52442
                          length: 245
                        pos: 52326
                        length: 369
                      pos: 52295
                      length: 400
                    pos: 50071
                    length: 2630
                children: []
                pos: 49984
                length: 2717
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 52798
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 52833
                      length: 41
                    pos: 52785
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 52884
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 53001
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 53124
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 53263
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 53282
                                          length: 4
                                      children: []
                                      pos: 53263
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 53300
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 53322
                                          length: 4
                                      children: []
                                      pos: 53300
                                      length: 26
                                  children: []
                                  pos: 53263
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 53340
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 53363
                                      length: 4
                                  children: []
                                  pos: 53340
                                  length: 27
                              children: []
                              pos: 53263
                              length: 104
                          children: []
                          pos: 53262
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 53379
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 53450
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 53527
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 53611
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53628
                                              length: 4
                                          children: []
                                          pos: 53611
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 53636
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53656
                                              length: 4
                                          children: []
                                          pos: 53636
                                          length: 24
                                      children: []
                                      pos: 53611
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 53676
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 53697
                                          length: 4
                                      children: []
                                      pos: 53676
                                      length: 25
                                  children: []
                                  pos: 53611
                                  length: 90
                              children: []
                              pos: 53610
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 53715
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 53823
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 53925
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 54115
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 54300
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 54366
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 54536
                              length: 58
                            pos: 53703
                            length: 901
                          pos: 53607
                          length: 997
                        pos: 53369
                        length: 1243
                      pos: 53259
                      length: 1353
                    pos: 52876
                    length: 1742
                children: []
                pos: 52785
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 55052
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 55078
                      length: 15
                    pos: 55047
                    length: 4680
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 55163
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 55205
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 55260
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 55303
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 55357
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(t.getSourceName(),
                          info, n, rhsValue);
                      children: []
                      pos: 56079
                      length: 73
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 56163
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 56176
                                      length: 4
                                  children: []
                                  pos: 56163
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 56184
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 56196
                                      length: 4
                                  children: []
                                  pos: 56184
                                  length: 16
                              children: []
                              pos: 56163
                              length: 37
                          children: []
                          pos: 56162
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 56247
                          length: 33
                        pos: 56202
                        length: 86
                      pos: 56159
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 56535
                              length: 28
                          children: []
                          pos: 56534
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 56575
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 56619
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 56627
                                      length: 4
                                  children: []
                                  pos: 56619
                                  length: 12
                              children: []
                              pos: 56618
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType qVarType = ObjectType.cast(qVar.getType());
                              children: []
                              pos: 56962
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: qVarType
                                                  children: []
                                                  pos: 57031
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 57043
                                                  length: 4
                                              children: []
                                              pos: 57031
                                              length: 16
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: rhsValue
                                                  children: []
                                                  pos: 57065
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 57077
                                                  length: 4
                                              children: []
                                              pos: 57065
                                              length: 16
                                          children: []
                                          pos: 57031
                                          length: 50
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rhsValue.isObjectLit()
                                          children: []
                                          pos: 57099
                                          length: 22
                                      children: []
                                      pos: 57031
                                      length: 90
                                  children: []
                                  pos: 57030
                                  length: 92
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      typeRegistry.resetImplicitPrototype(
                                                      rhsValue.getJSType(), qVarType.getImplicitPrototype());
                                  children: []
                                  pos: 57137
                                  length: 108
                                pos: 57123
                                length: 134
                              pos: 57027
                              length: 652
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: qVar.getScope()
                                          children: []
                                          pos: 57694
                                          length: 15
                                        right:
                                          type: identifier
                                          fields:
                                            text: scope
                                          children: []
                                          pos: 57713
                                          length: 5
                                      children: []
                                      pos: 57694
                                      length: 24
                                  children: []
                                  pos: 57693
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scope.undeclare(qVar);
                                  children: []
                                  pos: 57734
                                  length: 22
                                pos: 57720
                                length: 48
                              pos: 57690
                              length: 78
                            pos: 56633
                            length: 1145
                          pos: 56615
                          length: 1163
                        pos: 56565
                        length: 1221
                      pos: 56531
                      length: 1255
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 57798
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 57811
                                  length: 4
                              children: []
                              pos: 57798
                              length: 17
                          children: []
                          pos: 57797
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: parent.isExprResult()
                                  children: []
                                  pos: 57831
                                  length: 21
                              children: []
                              pos: 57830
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 57866
                              length: 148
                            pos: 57854
                            length: 170
                          pos: 57827
                          length: 197
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 58034
                          length: 7
                        pos: 57817
                        length: 232
                      pos: 57794
                      length: 255
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean inferred = isQualifiedNameInferred(
                                    qName, n, info, rhsValue, valueType);
                      children: []
                      pos: 58057
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 58159
                              length: 9
                          children: []
                          pos: 58158
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 58180
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 58241
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 58254
                                      length: 4
                                  children: []
                                  pos: 58241
                                  length: 17
                              children: []
                              pos: 58240
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 58373
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 58456
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 58510
                                                  length: 42
                                              children: []
                                              pos: 58456
                                              length: 96
                                          children: []
                                          pos: 58455
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 58573
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 58585
                                                          length: 31
                                                      children: []
                                                      pos: 58573
                                                      length: 43
                                                  children: []
                                                  pos: 58572
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 58636
                                                  length: 27
                                              children: []
                                              pos: 58572
                                              length: 91
                                          children: []
                                          pos: 58571
                                          length: 93
                                      children: []
                                      pos: 58455
                                      length: 209
                                  children: []
                                  pos: 58454
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, n);
                                  children: []
                                  pos: 58754
                                  length: 57
                                pos: 58666
                                length: 157
                              pos: 58451
                              length: 372
                            pos: 58260
                            length: 573
                          pos: 58237
                          length: 596
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 58975
                          length: 43
                        pos: 58170
                        length: 856
                      pos: 58155
                      length: 1566
                    pos: 55155
                    length: 4572
                children: []
                pos: 55047
                length: 4680
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQualifiedNameInferred
                    children: []
                    pos: 60776
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String qName
                      children: []
                      pos: 60809
                      length: 12
                    pos: 60760
                    length: 808
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 60900
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60913
                                  length: 4
                              children: []
                              pos: 60900
                              length: 17
                          children: []
                          pos: 60899
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 60929
                          length: 12
                        pos: 60919
                        length: 30
                      pos: 60896
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 60957
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 60992
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61000
                                  length: 4
                              children: []
                              pos: 60992
                              length: 12
                          children: []
                          pos: 60991
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (info.isConstant() && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 61016
                          length: 241
                        pos: 61006
                        length: 259
                      pos: 60988
                      length: 277
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: inferred
                                      children: []
                                      pos: 61277
                                      length: 8
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rhsValue
                                          children: []
                                          pos: 61289
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 61301
                                          length: 4
                                      children: []
                                      pos: 61289
                                      length: 16
                                  children: []
                                  pos: 61277
                                  length: 28
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rhsValue.isFunction()
                                  children: []
                                  pos: 61309
                                  length: 21
                              children: []
                              pos: 61277
                              length: 53
                          children: []
                          pos: 61276
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 61346
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 61354
                                      length: 4
                                  children: []
                                  pos: 61346
                                  length: 12
                              children: []
                              pos: 61345
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: inferred = false;
                              children: []
                              pos: 61372
                              length: 17
                            pos: 61360
                            length: 39
                          pos: 61342
                          length: 189
                        pos: 61332
                        length: 207
                      pos: 61273
                      length: 266
                    - type: return_statement
                      fields:
                        text: return inferred;
                      children: []
                      pos: 61546
                      length: 16
                    pos: 60888
                    length: 680
                children: []
                pos: 60760
                length: 808
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 61813
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 61827
                      length: 15
                    pos: 61794
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 61852
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 61901
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61913
                                  length: 4
                              children: []
                              pos: 61901
                              length: 16
                          children: []
                          pos: 61900
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 61929
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 61979
                          length: 110
                        pos: 61919
                        length: 178
                      pos: 61897
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 62104
                      length: 12
                    pos: 61844
                    length: 278
                children: []
                pos: 61794
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 62264
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 62259
                    length: 1182
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 62298
                      length: 1137
                    pos: 62290
                    length: 1151
                children: []
                pos: 62259
                length: 1182
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 63593
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 63668
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 63710
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 63828
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 63834
                            length: 15
                          pos: 63800
                          length: 483
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: method_invocation
                                    fields:
                                      text: n.isExprResult()
                                    children: []
                                    pos: 63886
                                    length: 16
                                children: []
                                pos: 63885
                                length: 18
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 63916
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 63966
                                        length: 15
                                    children: []
                                    pos: 63965
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 63983
                                    length: 282
                                children: []
                                pos: 63958
                                length: 307
                              pos: 63904
                              length: 371
                            pos: 63882
                            length: 393
                          pos: 63872
                          length: 411
                      children: []
                      pos: 63800
                      length: 483
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 64304
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 64323
                            length: 15
                          pos: 64291
                          length: 899
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 64419
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 64669
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 64677
                                                length: 4
                                            children: []
                                            pos: 64669
                                            length: 12
                                          right:
                                            type: unary_expression
                                            fields:
                                              text: "!member.isGetProp()"
                                            children: []
                                            pos: 64697
                                            length: 19
                                        children: []
                                        pos: 64669
                                        length: 47
                                      right:
                                        type: unary_expression
                                        fields:
                                          text: "!member.getFirstChild().isThis()"
                                        children: []
                                        pos: 64732
                                        length: 32
                                    children: []
                                    pos: 64669
                                    length: 95
                                children: []
                                pos: 64668
                                length: 97
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 64778
                                length: 7
                              pos: 64766
                              length: 29
                            pos: 64665
                            length: 130
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 64805
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(t.getSourceName(),
                                info, member, value);
                            children: []
                            pos: 64857
                            length: 72
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 64938
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 64985
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 64995
                                            length: 4
                                        children: []
                                        pos: 64985
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: name.isName()
                                                children: []
                                                pos: 65016
                                                length: 13
                                              right:
                                                type: method_invocation
                                                fields:
                                                  text: name.isString()
                                                children: []
                                                pos: 65033
                                                length: 15
                                            children: []
                                            pos: 65016
                                            length: 32
                                        children: []
                                        pos: 65015
                                        length: 34
                                    children: []
                                    pos: 64985
                                    length: 64
                                children: []
                                pos: 64984
                                length: 66
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  member);
                                children: []
                                pos: 65063
                                length: 109
                              pos: 65051
                              length: 131
                            pos: 64981
                            length: 201
                          pos: 64409
                          length: 781
                      children: []
                      pos: 64291
                      length: 899
                    pos: 63573
                    length: 1623
                children: []
                pos: 63573
                length: 1623
              pos: 16084
              length: 49141
          children: []
          pos: 16084
          length: 49141
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 65322
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 65344
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 65373
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 65409
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 65446
                length: 168
              pos: 65295
              length: 323
          children: []
          pos: 65295
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 65753
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 65808
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 66147
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 66153
                      length: 15
                    pos: 66125
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 66199
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 66241
                              length: 11
                          children: []
                          pos: 66240
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 66254
                          length: 195
                      children: []
                      pos: 66233
                      length: 216
                    pos: 66191
                    length: 264
                children: []
                pos: 66125
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 66480
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 66515
                      length: 15
                    pos: 66461
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 66600
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 66635
                      length: 62
                    pos: 66592
                    length: 111
                children: []
                pos: 66461
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 66883
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 66908
                      length: 15
                    pos: 66870
                    length: 959
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 66969
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 66977
                                      length: 4
                                  children: []
                                  pos: 66969
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 66985
                                  length: 22
                              children: []
                              pos: 66969
                              length: 38
                          children: []
                          pos: 66968
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 67019
                          length: 7
                        pos: 67009
                        length: 25
                      pos: 66965
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 67042
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 67099
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 67110
                                  length: 4
                              children: []
                              pos: 67099
                              length: 15
                          children: []
                          pos: 67098
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 67126
                          length: 7
                        pos: 67116
                        length: 25
                      pos: 67095
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                      children: []
                      pos: 67315
                      length: 63
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 67386
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 67467
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 67479
                                  length: 4
                              children: []
                              pos: 67467
                              length: 16
                          children: []
                          pos: 67466
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 67495
                          length: 118
                        pos: 67485
                        length: 136
                      pos: 67463
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 67629
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: candidate.isGetProp()
                              children: []
                              pos: 67694
                              length: 21
                          children: []
                          pos: 67693
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 67727
                          length: 88
                        pos: 67717
                        length: 106
                      pos: 67690
                      length: 133
                    pos: 66957
                    length: 872
                children: []
                pos: 66870
                length: 959
              pos: 65733
              length: 2100
          children: []
          pos: 65733
          length: 2100
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 67985
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 68105
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 68243
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 68238
                    length: 422
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 68259
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          AstFunctionContents contents =
                                    getFunctionAnalysisResults(scope.getRootNode());
                      children: []
                      pos: 68327
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: contents
                                  children: []
                                  pos: 68427
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 68439
                                  length: 4
                              children: []
                              pos: 68427
                              length: 16
                          children: []
                          pos: 68426
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (String varName : contents.getEscapedVarNames()) {
                                        Var v = scope.getVar(varName);
                                        Preconditions.checkState(v.getScope() == scope);
                                        v.markEscaped();
                                      }
                          children: []
                          pos: 68455
                          length: 191
                        pos: 68445
                        length: 209
                      pos: 68423
                      length: 231
                    pos: 68251
                    length: 409
                children: []
                pos: 68238
                length: 422
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 68946
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 68952
                      length: 15
                    pos: 68924
                    length: 276
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 69002
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 69007
                                  length: 19
                              children: []
                              pos: 69002
                              length: 24
                          children: []
                          pos: 69001
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 69028
                        length: 7
                      pos: 68998
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isParamList()
                                  children: []
                                  pos: 69047
                                  length: 15
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 69066
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 69076
                                      length: 19
                                  children: []
                                  pos: 69066
                                  length: 29
                              children: []
                              pos: 69047
                              length: 48
                          children: []
                          pos: 69046
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 69107
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 69145
                          length: 7
                        pos: 69097
                        length: 63
                      pos: 69043
                      length: 117
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 69168
                      length: 26
                    pos: 68990
                    length: 210
                children: []
                pos: 68924
                length: 276
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 69281
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 69302
                      length: 11
                    pos: 69268
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 69359
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 69407
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 69457
                              length: 17
                          children: []
                          pos: 69456
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 69486
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 69538
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 69547
                                          length: 4
                                      children: []
                                      pos: 69538
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 69732
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 69755
                                                  length: 4
                                              children: []
                                              pos: 69732
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 69908
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 69935
                                                  length: 6
                                              children: []
                                              pos: 69908
                                              length: 33
                                          children: []
                                          pos: 69732
                                          length: 209
                                      children: []
                                      pos: 69731
                                      length: 211
                                  children: []
                                  pos: 69538
                                  length: 404
                              children: []
                              pos: 69537
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 69956
                              length: 58
                            pos: 69944
                            length: 80
                          pos: 69534
                          length: 490
                        pos: 69476
                        length: 556
                      pos: 69453
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 70040
                      length: 25
                    pos: 69315
                    length: 756
                children: []
                pos: 69268
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 70153
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 70170
                      length: 17
                    pos: 70140
                    length: 867
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 70197
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 70264
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    JSType.toMaybeFunctionType(functionNode.getJSType());
                      children: []
                      pos: 70307
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 70409
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 70425
                                  length: 4
                              children: []
                              pos: 70409
                              length: 20
                          children: []
                          pos: 70408
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 70441
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 70510
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 70529
                                      length: 4
                                  children: []
                                  pos: 70510
                                  length: 23
                              children: []
                              pos: 70509
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 70547
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), false);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 70612
                              length: 371
                            pos: 70535
                            length: 458
                          pos: 70506
                          length: 487
                        pos: 70431
                        length: 570
                      pos: 70405
                      length: 596
                    pos: 70189
                    length: 818
                children: []
                pos: 70140
                length: 867
              pos: 67965
              length: 3070
          children: []
          pos: 67965
          length: 3070
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: FirstOrderFunctionAnalyzer
              children: []
              pos: 71238
              length: 26
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final AbstractCompiler compiler;
                children: []
                pos: 71332
                length: 40
              - type: field_declaration
                fields:
                  text: private final Map<Node, AstFunctionContents> data;
                children: []
                pos: 71377
                length: 50
              - type: constructor_declaration
                fields:
                  text: |-
                    FirstOrderFunctionAnalyzer(
                            AbstractCompiler compiler, Map<Node, AstFunctionContents> outParam) {
                          this.compiler = compiler;
                          this.data = outParam;
                        }
                children: []
                pos: 71433
                length: 171
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: process
                    children: []
                    pos: 71632
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node externs
                      children: []
                      pos: 71640
                      length: 12
                    pos: 71610
                    length: 267
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: externs
                                  children: []
                                  pos: 71677
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 71688
                                  length: 4
                              children: []
                              pos: 71677
                              length: 15
                          children: []
                          pos: 71676
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: NodeTraversal.traverse(compiler, root, this);
                          children: []
                          pos: 71704
                          length: 45
                        pos: 71694
                        length: 63
                      pos: 71673
                      length: 198
                    pos: 71665
                    length: 212
                children: []
                pos: 71610
                length: 267
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: enterScope
                    children: []
                    pos: 71905
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71916
                      length: 15
                    pos: 71883
                    length: 181
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!t.inGlobalScope()"
                              children: []
                              pos: 71945
                              length: 18
                          children: []
                          pos: 71944
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node n = t.getScopeRoot();
                          children: []
                          pos: 71975
                          length: 26
                        - type: expression_statement
                          fields:
                            text: data.put(n, new AstFunctionContents(n));
                          children: []
                          pos: 72010
                          length: 40
                        pos: 71965
                        length: 93
                      pos: 71941
                      length: 117
                    pos: 71933
                    length: 131
                children: []
                pos: 71883
                length: 181
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 72092
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 72098
                      length: 15
                    pos: 72070
                    length: 647
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: t.inGlobalScope()
                              children: []
                              pos: 72148
                              length: 17
                          children: []
                          pos: 72147
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 72177
                          length: 7
                        pos: 72167
                        length: 25
                      pos: 72144
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isReturn()
                                  children: []
                                  pos: 72204
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getFirstChild()
                                      children: []
                                      pos: 72220
                                      length: 17
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 72241
                                      length: 4
                                  children: []
                                  pos: 72220
                                  length: 25
                              children: []
                              pos: 72204
                              length: 41
                          children: []
                          pos: 72203
                          length: 43
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: data.get(t.getScopeRoot()).recordNonEmptyReturn();
                          children: []
                          pos: 72257
                          length: 50
                        pos: 72247
                        length: 68
                      pos: 72200
                      length: 511
                    pos: 72136
                    length: 581
                children: []
                pos: 72070
                length: 647
              pos: 71217
              length: 1504
          children: []
          pos: 71217
          length: 1504
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFunctionAnalysisResults
              children: []
              pos: 72753
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node n"
                children: []
                pos: 72780
                length: 16
              pos: 72725
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: "n"
                            children: []
                            pos: 72808
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 72813
                            length: 4
                        children: []
                        pos: 72808
                        length: 9
                    children: []
                    pos: 72807
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 72827
                    length: 12
                  pos: 72819
                  length: 26
                pos: 72804
                length: 41
              - type: return_statement
                fields:
                  text: return functionAnalysisResults.get(n);
                children: []
                pos: 72970
                length: 38
              pos: 72798
              length: 214
          children: []
          pos: 72725
          length: 287
        pos: 5032
        length: 67982
    children: []
    pos: 5032
    length: 67982
  pos: 0
  length: 73015
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: TypedScopeCreator
        children: []
        pos: 5044
        length: 17
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: |-
              static final String DELEGATE_PROXY_SUFFIX =
                    ObjectType.createDelegateSuffix("Proxy");
          children: []
          pos: 5173
          length: 91
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType MALFORMED_TYPEDEF =
                    DiagnosticType.warning(
                        "JSC_MALFORMED_TYPEDEF",
                        "Typedef for {0} does not have any type information");
          children: []
          pos: 5268
          length: 177
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType ENUM_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_ENUM_INITIALIZER_NOT_ENUM",
                        "enum initializer must be an object literal or an enum");
          children: []
          pos: 5449
          length: 187
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CTOR_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_CTOR_INITIALIZER_NOT_CTOR",
                        "Constructor {0} must be initialized at declaration");
          children: []
          pos: 5640
          length: 184
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType IFACE_INITIALIZER =
                    DiagnosticType.warning(
                        "JSC_IFACE_INITIALIZER_NOT_IFACE",
                        "Interface {0} must be initialized at declaration");
          children: []
          pos: 5828
          length: 185
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType CONSTRUCTOR_EXPECTED =
                    DiagnosticType.warning(
                        "JSC_REFLECT_CONSTRUCTOR_EXPECTED",
                        "Constructor expected as first argument");
          children: []
          pos: 6017
          length: 179
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType UNKNOWN_LENDS =
                    DiagnosticType.warning(
                        "JSC_UNKNOWN_LENDS",
                        "Variable {0} not declared before @lends annotation.");
          children: []
          pos: 6200
          length: 170
        - type: field_declaration
          fields:
            text: |-
              static final DiagnosticType LENDS_ON_NON_OBJECT =
                    DiagnosticType.warning(
                        "JSC_LENDS_ON_NON_OBJECT",
                        "May only lend properties to object types. {0} has type {1}.");
          children: []
          pos: 6374
          length: 190
        - type: field_declaration
          fields:
            text: private final AbstractCompiler compiler;
          children: []
          pos: 6568
          length: 40
        - type: field_declaration
          fields:
            text: private final ErrorReporter typeParsingErrorReporter;
          children: []
          pos: 6611
          length: 53
        - type: field_declaration
          fields:
            text: private final TypeValidator validator;
          children: []
          pos: 6667
          length: 38
        - type: field_declaration
          fields:
            text: private final CodingConvention codingConvention;
          children: []
          pos: 6708
          length: 48
        - type: field_declaration
          fields:
            text: private final JSTypeRegistry typeRegistry;
          children: []
          pos: 6759
          length: 42
        - type: field_declaration
          fields:
            text: private final List<ObjectType> delegateProxyPrototypes = Lists.newArrayList();
          children: []
          pos: 6804
          length: 78
        - type: field_declaration
          fields:
            text: |-
              private final Map<String, String> delegateCallingConventions =
                    Maps.newHashMap();
          children: []
          pos: 6885
          length: 87
        - type: field_declaration
          fields:
            text: |-
              private final Map<Node, AstFunctionContents> functionAnalysisResults =
                    Maps.newHashMap();
          children: []
          pos: 7025
          length: 95
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DeferredSetType
              children: []
              pos: 7281
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Node node;
                children: []
                pos: 7303
                length: 16
              - type: field_declaration
                fields:
                  text: final JSType type;
                children: []
                pos: 7324
                length: 18
              - type: constructor_declaration
                fields:
                  text: |-
                    DeferredSetType(Node node, JSType type) {
                          Preconditions.checkNotNull(node);
                          Preconditions.checkNotNull(type);
                          this.node = node;
                          this.type = type;

                          // Other parts of this pass may read off the node.
                          // (like when we set the LHS of an assign with a typed RHS function.)
                          node.setJSType(type);
                        }
                children: []
                pos: 7348
                length: 337
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolve
                    children: []
                    pos: 7696
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Scope scope
                      children: []
                      pos: 7704
                      length: 11
                    pos: 7691
                    length: 102
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: node.setJSType(type.resolve(typeParsingErrorReporter,
                          scope));
                      children: []
                      pos: 7725
                      length: 62
                    pos: 7717
                    length: 76
                children: []
                pos: 7691
                length: 102
              pos: 7267
              length: 530
          children: []
          pos: 7267
          length: 530
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler) {
                  this(compiler, compiler.getCodingConvention());
                }
          children: []
          pos: 7801
          length: 102
        - type: constructor_declaration
          fields:
            text: |-
              TypedScopeCreator(AbstractCompiler compiler,
                    CodingConvention codingConvention) {
                  this.compiler = compiler;
                  this.validator = compiler.getTypeValidator();
                  this.codingConvention = codingConvention;
                  this.typeRegistry = compiler.getTypeRegistry();
                  this.typeParsingErrorReporter = typeRegistry.getErrorReporter();
                }
          children: []
          pos: 7907
          length: 338
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createScope
              children: []
              pos: 8411
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 8423
                length: 9
              pos: 8386
              length: 1971
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: Scope newScope = null;
                children: []
                pos: 8643
                length: 22
              - type: local_variable_declaration
                fields:
                  text: AbstractScopeBuilder scopeBuilder = null;
                children: []
                pos: 8670
                length: 41
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 8720
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8730
                            length: 4
                        children: []
                        pos: 8720
                        length: 14
                    children: []
                    pos: 8719
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        (new FirstOrderFunctionAnalyzer(compiler, functionAnalysisResults))
                                  .process(root.getFirstChild(), root.getLastChild());
                    children: []
                    pos: 8802
                    length: 130
                  - type: expression_statement
                    fields:
                      text: newScope = createInitialScope(root);
                    children: []
                    pos: 8991
                    length: 36
                  - type: local_variable_declaration
                    fields:
                      text: GlobalScopeBuilder globalScopeBuilder = new GlobalScopeBuilder(newScope);
                    children: []
                    pos: 9035
                    length: 73
                  - type: expression_statement
                    fields:
                      text: scopeBuilder = globalScopeBuilder;
                    children: []
                    pos: 9115
                    length: 34
                  - type: expression_statement
                    fields:
                      text: NodeTraversal.traverse(compiler, root, scopeBuilder);
                    children: []
                    pos: 9156
                    length: 53
                  pos: 8736
                  length: 479
                pos: 8716
                length: 704
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveStubDeclarations();
                children: []
                pos: 9426
                length: 39
              - type: expression_statement
                fields:
                  text: scopeBuilder.resolveTypes();
                children: []
                pos: 9470
                length: 28
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node functionNode : scopeBuilder.nonExternFunctions) {
                          JSType type = functionNode.getJSType();
                          if (type != null && type.isFunctionType()) {
                            FunctionType fnType = type.toMaybeFunctionType();
                            ObjectType fnThisType = fnType.getTypeOfThis();
                            if (!fnThisType.isUnknownType()) {
                              NodeTraversal.traverse(compiler, functionNode.getLastChild(),
                                  scopeBuilder.new CollectProperties(fnThisType));
                            }
                          }
                        }
                children: []
                pos: 9666
                length: 472
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: parent
                            children: []
                            pos: 10148
                            length: 6
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 10158
                            length: 4
                        children: []
                        pos: 10148
                        length: 14
                    children: []
                    pos: 10147
                    length: 16
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: |-
                        codingConvention.defineDelegateProxyPrototypeProperties(
                                  typeRegistry, newScope, delegateProxyPrototypes,
                                  delegateCallingConventions);
                    children: []
                    pos: 10172
                    length: 154
                  pos: 10164
                  length: 168
                pos: 10144
                length: 188
              - type: return_statement
                fields:
                  text: return newScope;
                children: []
                pos: 10337
                length: 16
              pos: 8448
              length: 1909
          children: []
          pos: 8386
          length: 1971
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: patchGlobalScope
              children: []
              pos: 10651
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope globalScope
                children: []
                pos: 10668
                length: 17
              pos: 10646
              length: 1668
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(scriptRoot.isScript());
                children: []
                pos: 10859
                length: 48
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(globalScope);
                children: []
                pos: 10912
                length: 40
              - type: expression_statement
                fields:
                  text: Preconditions.checkState(globalScope.isGlobal());
                children: []
                pos: 10957
                length: 49
              - type: local_variable_declaration
                fields:
                  text: String scriptName = NodeUtil.getSourceName(scriptRoot);
                children: []
                pos: 11012
                length: 55
              - type: expression_statement
                fields:
                  text: Preconditions.checkNotNull(scriptName);
                children: []
                pos: 11072
                length: 39
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {
                          if (scriptName.equals(NodeUtil.getSourceName(node))) {
                            functionAnalysisResults.remove(node);
                          }
                        }
                children: []
                pos: 11116
                length: 195
              - type: expression_statement
                fields:
                  text: |-
                    (new FirstOrderFunctionAnalyzer(
                            compiler, functionAnalysisResults)).process(null, scriptRoot);
                children: []
                pos: 11317
                length: 103
              - type: local_variable_declaration
                fields:
                  text: Iterator<Var> varIter = globalScope.getVars();
                children: []
                pos: 11723
                length: 46
              - type: local_variable_declaration
                fields:
                  text: List<Var> varsToRemove = Lists.newArrayList();
                children: []
                pos: 11774
                length: 46
              - type: while_statement
                fields:
                  text: |-
                    while (varIter.hasNext()) {
                          Var oldVar = varIter.next();
                          if (scriptName.equals(oldVar.getInputName())) {
                            varsToRemove.add(oldVar);
                          }
                        }
                children: []
                pos: 11825
                length: 164
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Var var : varsToRemove) {
                          globalScope.undeclare(var);
                          globalScope.getTypeOfThis().removeProperty(var.getName());
                        }
                children: []
                pos: 11994
                length: 135
              - type: local_variable_declaration
                fields:
                  text: GlobalScopeBuilder scopeBuilder = new GlobalScopeBuilder(globalScope);
                children: []
                pos: 12176
                length: 70
              - type: expression_statement
                fields:
                  text: NodeTraversal.traverse(compiler, scriptRoot, scopeBuilder);
                children: []
                pos: 12251
                length: 59
              pos: 10704
              length: 1610
          children: []
          pos: 10646
          length: 1668
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: createInitialScope
              children: []
              pos: 12473
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Node root
                children: []
                pos: 12492
                length: 9
              pos: 12446
              length: 1400
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: |-
                    NodeTraversal.traverse(
                            compiler, root, new DiscoverEnumsAndTypedefs(typeRegistry));
                children: []
                pos: 12510
                length: 92
              - type: local_variable_declaration
                fields:
                  text: Scope s = new Scope(root, compiler);
                children: []
                pos: 12608
                length: 36
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ARRAY_FUNCTION_TYPE);
                children: []
                pos: 12649
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, BOOLEAN_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 12704
                length: 59
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, DATE_FUNCTION_TYPE);
                children: []
                pos: 12768
                length: 49
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, ERROR_FUNCTION_TYPE);
                children: []
                pos: 12822
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, EVAL_ERROR_FUNCTION_TYPE);
                children: []
                pos: 12877
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, FUNCTION_FUNCTION_TYPE);
                children: []
                pos: 12937
                length: 53
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, NUMBER_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 12995
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13058
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, RANGE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13114
                length: 56
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REFERENCE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13175
                length: 60
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, REGEXP_FUNCTION_TYPE);
                children: []
                pos: 13240
                length: 51
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, STRING_OBJECT_FUNCTION_TYPE);
                children: []
                pos: 13296
                length: 58
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, SYNTAX_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13359
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, TYPE_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13421
                length: 55
              - type: expression_statement
                fields:
                  text: declareNativeFunctionType(s, URI_ERROR_FUNCTION_TYPE);
                children: []
                pos: 13481
                length: 54
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "undefined", VOID_TYPE);
                children: []
                pos: 13540
                length: 50
              - type: expression_statement
                fields:
                  text: declareNativeValueType(s, "ActiveXObject", NO_OBJECT_TYPE);
                children: []
                pos: 13768
                length: 59
              - type: return_statement
                fields:
                  text: return s;
                children: []
                pos: 13833
                length: 9
              pos: 12503
              length: 1343
          children: []
          pos: 12446
          length: 1400
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeFunctionType
              children: []
              pos: 13863
              length: 25
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 13889
                length: 11
              pos: 13850
              length: 304
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: FunctionType t = typeRegistry.getNativeFunctionType(tId);
                children: []
                pos: 13926
                length: 57
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, t.getInstanceType().getReferenceName(),
                    t);
                children: []
                pos: 13988
                length: 68
              - type: expression_statement
                fields:
                  text: |-
                    declareNativeType(
                            scope, t.getPrototype().getReferenceName(), t.getPrototype());
                children: []
                pos: 14061
                length: 89
              pos: 13920
              length: 234
          children: []
          pos: 13850
          length: 304
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeValueType
              children: []
              pos: 14171
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14194
                length: 11
              pos: 14158
              length: 160
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: declareNativeType(scope, name, typeRegistry.getNativeType(tId));
                children: []
                pos: 14250
                length: 64
              pos: 14244
              length: 74
          children: []
          pos: 14158
          length: 160
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: declareNativeType
              children: []
              pos: 14335
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Scope scope
                children: []
                pos: 14353
                length: 11
              pos: 14322
              length: 119
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: scope.declare(name, null, t, null, false);
                children: []
                pos: 14395
                length: 42
              pos: 14389
              length: 52
          children: []
          pos: 14322
          length: 119
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: DiscoverEnumsAndTypedefs
              children: []
              pos: 14466
              length: 24
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final JSTypeRegistry registry;
                children: []
                pos: 14544
                length: 38
              - type: constructor_declaration
                fields:
                  text: |-
                    DiscoverEnumsAndTypedefs(JSTypeRegistry registry) {
                          this.registry = registry;
                        }
                children: []
                pos: 14588
                length: 89
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 14709
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 14715
                      length: 15
                    pos: 14683
                    length: 841
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node nameNode = null;
                      children: []
                      pos: 14764
                      length: 21
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: node.getType()
                              children: []
                              pos: 14800
                              length: 14
                          children: []
                          pos: 14799
                          length: 16
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.VAR:
                                        for (Node child = node.getFirstChild();
                                             child != null; child = child.getNext()) {
                                          identifyNameNode(
                                              child, child.getFirstChild(),
                                              NodeUtil.getBestJSDocInfo(child));
                                        }
                                        break;
                                      case Token.EXPR_RESULT:
                                        Node firstChild = node.getFirstChild();
                                        if (firstChild.isAssign()) {
                                          identifyNameNode(
                                              firstChild.getFirstChild(), firstChild.getLastChild(),
                                              firstChild.getJSDocInfo());
                                        } else {
                                          identifyNameNode(
                                              firstChild, null, firstChild.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 14816
                          length: 702
                      children: []
                      pos: 14792
                      length: 726
                    pos: 14756
                    length: 768
                children: []
                pos: 14683
                length: 841
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: identifyNameNode
                    children: []
                    pos: 15543
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node nameNode
                      children: []
                      pos: 15569
                      length: 13
                    pos: 15530
                    length: 432
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: nameNode.isQualifiedName()
                              children: []
                              pos: 15628
                              length: 26
                          children: []
                          pos: 15627
                          length: 28
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 15670
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 15678
                                      length: 4
                                  children: []
                                  pos: 15670
                                  length: 12
                              children: []
                              pos: 15669
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: info.hasEnumParameterType()
                                      children: []
                                      pos: 15700
                                      length: 27
                                  children: []
                                  pos: 15699
                                  length: 29
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: registry.identifyNonNullableName(nameNode.getQualifiedName());
                                  children: []
                                  pos: 15743
                                  length: 62
                                pos: 15729
                                length: 88
                              pos: 15696
                              length: 242
                            pos: 15684
                            length: 264
                          pos: 15666
                          length: 282
                        pos: 15656
                        length: 300
                      pos: 15624
                      length: 332
                    pos: 15616
                    length: 346
                children: []
                pos: 15530
                length: 432
              pos: 14445
              length: 1521
          children: []
          pos: 14445
          length: 1521
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getNativeType
              children: []
              pos: 15985
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JSTypeNative nativeType
                children: []
                pos: 15999
                length: 23
              pos: 15970
              length: 110
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return typeRegistry.getNativeType(nativeType);
                children: []
                pos: 16030
                length: 46
              pos: 16024
              length: 56
          children: []
          pos: 15970
          length: 110
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: AbstractScopeBuilder
              children: []
              pos: 16107
              length: 20
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: final Scope scope;
                children: []
                pos: 16229
                length: 18
              - type: field_declaration
                fields:
                  text: |-
                    private final List<DeferredSetType> deferredSetTypes =
                            Lists.newArrayList();
                children: []
                pos: 16253
                length: 84
              - type: field_declaration
                fields:
                  text: private final List<Node> nonExternFunctions = Lists.newArrayList();
                children: []
                pos: 16430
                length: 67
              - type: field_declaration
                fields:
                  text: |-
                    private final List<StubDeclaration> stubDeclarations =
                            Lists.newArrayList();
                children: []
                pos: 17085
                length: 84
              - type: field_declaration
                fields:
                  text: private String sourceName = null;
                children: []
                pos: 17237
                length: 33
              - type: field_declaration
                fields:
                  text: private InputId inputId;
                children: []
                pos: 17332
                length: 24
              - type: constructor_declaration
                fields:
                  text: |-
                    private AbstractScopeBuilder(Scope scope) {
                          this.scope = scope;
                        }
                children: []
                pos: 17362
                length: 75
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: setDeferredType
                    children: []
                    pos: 17448
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node node
                      children: []
                      pos: 17464
                      length: 9
                    pos: 17443
                    length: 113
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: deferredSetTypes.add(new DeferredSetType(node, type));
                      children: []
                      pos: 17496
                      length: 54
                    pos: 17488
                    length: 68
                children: []
                pos: 17443
                length: 113
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveTypes
                    children: []
                    pos: 17567
                    length: 12
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 17562
                    length: 500
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (DeferredSetType deferred : deferredSetTypes) {
                                  deferred.resolve(scope);
                                }
                      children: []
                      pos: 17639
                      length: 92
                    - type: local_variable_declaration
                      fields:
                        text: Iterator<Var> vars = scope.getVars();
                      children: []
                      pos: 17794
                      length: 37
                    - type: while_statement
                      fields:
                        text: |-
                          while (vars.hasNext()) {
                                  vars.next().resolveType(typeParsingErrorReporter);
                                }
                      children: []
                      pos: 17838
                      length: 91
                    - type: expression_statement
                      fields:
                        text: typeRegistry.resolveTypesInScope(scope);
                      children: []
                      pos: 18016
                      length: 40
                    pos: 17582
                    length: 480
                children: []
                pos: 17562
                length: 500
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldTraverse
                    children: []
                    pos: 18103
                    length: 14
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 18118
                      length: 15
                    pos: 18068
                    length: 1043
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 18172
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isFunction()
                                  children: []
                                  pos: 18208
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: n.isScript()
                                  children: []
                                  pos: 18236
                                  length: 12
                              children: []
                              pos: 18208
                              length: 40
                          children: []
                          pos: 18207
                          length: 42
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: Preconditions.checkNotNull(inputId);
                          children: []
                          pos: 18260
                          length: 36
                        - type: expression_statement
                          fields:
                            text: sourceName = NodeUtil.getSourceName(n);
                          children: []
                          pos: 18305
                          length: 39
                        pos: 18250
                        length: 102
                      pos: 18204
                      length: 148
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean descend = parent == null || !parent.isFunction() ||
                                    n == parent.getFirstChild() || parent == scope.getRootNode();
                      children: []
                      pos: 18484
                      length: 131
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: descend
                              children: []
                              pos: 18627
                              length: 7
                          children: []
                          pos: 18626
                          length: 9
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isStatementParent(n)
                                  children: []
                                  pos: 18776
                                  length: 29
                              children: []
                              pos: 18775
                              length: 31
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: for_statement
                              fields:
                                text: |-
                                  for (Node child = n.getFirstChild();
                                                 child != null;
                                                 child = child.getNext()) {
                                              if (NodeUtil.isHoistedFunctionDeclaration(child)) {
                                                defineFunctionLiteral(child, n);
                                              }
                                            }
                              children: []
                              pos: 18819
                              length: 245
                            pos: 18807
                            length: 267
                          pos: 18772
                          length: 302
                        pos: 18636
                        length: 446
                      pos: 18623
                      length: 459
                    - type: return_statement
                      fields:
                        text: return descend;
                      children: []
                      pos: 19090
                      length: 15
                    pos: 18164
                    length: 947
                children: []
                pos: 18068
                length: 1043
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 19143
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 19149
                      length: 15
                    pos: 19117
                    length: 1521
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: inputId = t.getInputId();
                      children: []
                      pos: 19195
                      length: 25
                    - type: expression_statement
                      fields:
                        text: attachLiteralTypes(t, n);
                      children: []
                      pos: 19227
                      length: 25
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 19268
                              length: 11
                          children: []
                          pos: 19267
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.CALL:
                                        checkForClassDefiningCalls(t, n, parent);
                                        checkForCallingConventionDefiningCalls(n, delegateCallingConventions);
                                        break;

                                      case Token.FUNCTION:
                                        if (t.getInput() == null || !t.getInput().isExtern()) {
                                          nonExternFunctions.add(n);
                                        }

                                        // Hoisted functions are handled during pre-traversal.
                                        if (!NodeUtil.isHoistedFunctionDeclaration(n)) {
                                          defineFunctionLiteral(n, parent);
                                        }
                                        break;

                                      case Token.ASSIGN:
                                        // Handle initialization of properties.
                                        Node firstChild = n.getFirstChild();
                                        if (firstChild.isGetProp() &&
                                            firstChild.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(),
                                              firstChild, n, firstChild.getNext());
                                        }
                                        break;

                                      case Token.CATCH:
                                        defineCatch(n, parent);
                                        break;

                                      case Token.VAR:
                                        defineVar(n, parent);
                                        break;

                                      case Token.GETPROP:
                                        // Handle stubbed properties.
                                        if (parent.isExprResult() &&
                                            n.isQualifiedName()) {
                                          maybeDeclareQualifiedName(t, n.getJSDocInfo(), n, parent, null);
                                        }
                                        break;
                                    }
                          children: []
                          pos: 19281
                          length: 1287
                      children: []
                      pos: 19260
                      length: 1308
                    pos: 19187
                    length: 1451
                children: []
                pos: 19117
                length: 1521
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: attachLiteralTypes
                    children: []
                    pos: 20657
                    length: 18
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 20676
                      length: 15
                    pos: 20644
                    length: 1024
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 20717
                              length: 11
                          children: []
                          pos: 20716
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {
                                      case Token.NULL:
                                        n.setJSType(getNativeType(NULL_TYPE));
                                        break;

                                      case Token.VOID:
                                        n.setJSType(getNativeType(VOID_TYPE));
                                        break;

                                      case Token.STRING:
                                        // Defer keys to the Token.OBJECTLIT case
                                        if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
                                          n.setJSType(getNativeType(STRING_TYPE));
                                        }
                                        break;

                                      case Token.NUMBER:
                                        n.setJSType(getNativeType(NUMBER_TYPE));
                                        break;

                                      case Token.TRUE:
                                      case Token.FALSE:
                                        n.setJSType(getNativeType(BOOLEAN_TYPE));
                                        break;

                                      case Token.REGEXP:
                                        n.setJSType(getNativeType(REGEXP_TYPE));
                                        break;

                                      case Token.OBJECTLIT:
                                          defineObjectLiteral(n);
                                        break;

                                        // NOTE(nicksantos): If we ever support Array tuples,
                                        // we will need to put ARRAYLIT here as well.
                                    }
                          children: []
                          pos: 20730
                          length: 932
                      children: []
                      pos: 20709
                      length: 953
                    pos: 20701
                    length: 967
                children: []
                pos: 20644
                length: 1024
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineObjectLiteral
                    children: []
                    pos: 21687
                    length: 19
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objectLit
                      children: []
                      pos: 21707
                      length: 14
                    pos: 21674
                    length: 1674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = null;
                      children: []
                      pos: 21770
                      length: 19
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = objectLit.getJSDocInfo();
                      children: []
                      pos: 21796
                      length: 42
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 21849
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 21857
                                      length: 4
                                  children: []
                                  pos: 21849
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: info.getLendsName()
                                      children: []
                                      pos: 21875
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 21898
                                      length: 4
                                  children: []
                                  pos: 21875
                                  length: 27
                              children: []
                              pos: 21849
                              length: 53
                          children: []
                          pos: 21848
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: String lendsName = info.getLendsName();
                          children: []
                          pos: 21914
                          length: 39
                        - type: local_variable_declaration
                          fields:
                            text: Var lendsVar = scope.getVar(lendsName);
                          children: []
                          pos: 21962
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lendsVar
                                      children: []
                                      pos: 22014
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22026
                                      length: 4
                                  children: []
                                  pos: 22014
                                  length: 16
                              children: []
                              pos: 22013
                              length: 18
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  compiler.report(
                                                JSError.make(sourceName, objectLit, UNKNOWN_LENDS, lendsName));
                              children: []
                              pos: 22044
                              length: 94
                            pos: 22032
                            length: 116
                          pos: 22010
                          length: 616
                        pos: 21904
                        length: 730
                      pos: 21845
                      length: 789
                    - type: expression_statement
                      fields:
                        text: info = NodeUtil.getBestJSDocInfo(objectLit);
                      children: []
                      pos: 22642
                      length: 44
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(objectLit);
                      children: []
                      pos: 22693
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String lValueName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 22748
                      length: 55
                    - type: local_variable_declaration
                      fields:
                        text: boolean createdEnumType = false;
                      children: []
                      pos: 22810
                      length: 32
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 22853
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 22861
                                      length: 4
                                  children: []
                                  pos: 22853
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasEnumParameterType()
                                  children: []
                                  pos: 22869
                                  length: 27
                              children: []
                              pos: 22853
                              length: 43
                          children: []
                          pos: 22852
                          length: 45
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = createEnumTypeFromNodes(objectLit, lValueName,
                              info, lValue);
                          children: []
                          pos: 22908
                          length: 68
                        - type: expression_statement
                          fields:
                            text: createdEnumType = true;
                          children: []
                          pos: 22985
                          length: 23
                        pos: 22898
                        length: 118
                      pos: 22849
                      length: 167
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 23028
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 23036
                                  length: 4
                              children: []
                              pos: 23028
                              length: 12
                          children: []
                          pos: 23027
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: type = typeRegistry.createAnonymousObjectType();
                          children: []
                          pos: 23052
                          length: 48
                        pos: 23042
                        length: 66
                      pos: 23024
                      length: 84
                    - type: expression_statement
                      fields:
                        text: setDeferredType(objectLit, type);
                      children: []
                      pos: 23116
                      length: 33
                    - type: expression_statement
                      fields:
                        text: |-
                          processObjectLitProperties(
                                    objectLit, ObjectType.cast(objectLit.getJSType()), !createdEnumType);
                      children: []
                      pos: 23235
                      length: 107
                    pos: 21723
                    length: 1625
                children: []
                pos: 21674
                length: 1674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: processObjectLitProperties
                    children: []
                    pos: 23745
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node objLit
                      children: []
                      pos: 23781
                      length: 11
                    pos: 23740
                    length: 1382
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: for_statement
                      fields:
                        text: |-
                          for (Node keyNode = objLit.getFirstChild(); keyNode != null;
                                     keyNode = keyNode.getNext()) {
                                  Node value = keyNode.getFirstChild();
                                  String memberName = NodeUtil.getObjectLitKeyName(keyNode);
                                  JSDocInfo info = keyNode.getJSDocInfo();
                                  JSType valueType =
                                      getDeclaredType(keyNode.getSourceFileName(), info, keyNode, value);
                                  JSType keyType =  objLitType.isEnumType() ?
                                      objLitType.toMaybeEnumType().getElementsType() :
                                      NodeUtil.getObjectLitKeyTypeFromValueType(keyNode, valueType);

                                  // Try to declare this property in the current scope if it
                                  // has an authoritative name.
                                  String qualifiedName = NodeUtil.getBestLValueName(keyNode);
                                  if (qualifiedName != null) {
                                    boolean inferred = keyType == null;
                                    defineSlot(keyNode, objLit, qualifiedName, keyType, inferred);
                                  } else if (keyType != null) {
                                    setDeferredType(keyNode, keyType);
                                  }

                                  if (keyType != null && objLitType != null && declareOnOwner) {
                                    // Declare this property on its object literal.
                                    boolean isExtern = keyNode.isFromExterns();
                                    objLitType.defineDeclaredProperty(memberName, keyType, keyNode);
                                  }
                                }
                      children: []
                      pos: 23857
                      length: 1259
                    pos: 23849
                    length: 1273
                children: []
                pos: 23740
                length: 1382
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredTypeInAnnotation
                    children: []
                    pos: 25373
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 25401
                      length: 17
                    pos: 25358
                    length: 674
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType jsType = null;
                      children: []
                      pos: 25463
                      length: 21
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          Node objNode =
                                    node.isGetProp() ? node.getFirstChild() :
                                    NodeUtil.isObjectLitKey(node, node.getParent()) ? node.getParent() :
                                    null;
                      children: []
                      pos: 25491
                      length: 161
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 25663
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 25671
                                  length: 4
                              children: []
                              pos: 25663
                              length: 12
                          children: []
                          pos: 25662
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 25691
                                  length: 14
                              children: []
                              pos: 25690
                              length: 16
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: jsType = info.getType().evaluate(scope, typeRegistry);
                              children: []
                              pos: 25719
                              length: 54
                            pos: 25707
                            length: 76
                          pos: 25687
                          length: 310
                        pos: 25677
                        length: 328
                      pos: 25659
                      length: 346
                    - type: return_statement
                      fields:
                        text: return jsType;
                      children: []
                      pos: 26012
                      length: 14
                    pos: 25455
                    length: 577
                children: []
                pos: 25358
                length: 674
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: assertDefinitionNode
                    children: []
                    pos: 26187
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26208
                      length: 6
                    pos: 26182
                    length: 156
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(sourceName != null);
                      children: []
                      pos: 26234
                      length: 45
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(n.getType() == type);
                      children: []
                      pos: 26286
                      length: 46
                    pos: 26226
                    length: 112
                children: []
                pos: 26182
                length: 156
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineCatch
                    children: []
                    pos: 26399
                    length: 11
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26411
                      length: 6
                    pos: 26394
                    length: 169
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.CATCH);
                      children: []
                      pos: 26440
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Node catchName = n.getFirstChild();
                      children: []
                      pos: 26484
                      length: 35
                    - type: expression_statement
                      fields:
                        text: defineSlot(catchName, n, null);
                      children: []
                      pos: 26526
                      length: 31
                    pos: 26432
                    length: 131
                children: []
                pos: 26394
                length: 169
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineVar
                    children: []
                    pos: 26627
                    length: 9
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 26637
                      length: 6
                    pos: 26622
                    length: 573
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.VAR);
                      children: []
                      pos: 26666
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = n.getJSDocInfo();
                      children: []
                      pos: 26708
                      length: 34
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.hasMoreThanOneChild()
                              children: []
                              pos: 26753
                              length: 23
                          children: []
                          pos: 26752
                          length: 25
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 26792
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 26800
                                      length: 4
                                  children: []
                                  pos: 26792
                                  length: 12
                              children: []
                              pos: 26791
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: compiler.report(JSError.make(sourceName, n,
                                  MULTIPLE_VAR_DEF));
                              children: []
                              pos: 26849
                              length: 63
                            pos: 26806
                            length: 116
                          pos: 26788
                          length: 134
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (Node name : n.children()) {
                                        defineName(name, n, parent, name.getJSDocInfo());
                                      }
                          children: []
                          pos: 26931
                          length: 102
                        pos: 26778
                        length: 263
                      pos: 26749
                      length: 440
                    pos: 26658
                    length: 537
                children: []
                pos: 26622
                length: 573
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineFunctionLiteral
                    children: []
                    pos: 27257
                    length: 21
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 27279
                      length: 6
                    pos: 27252
                    length: 849
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: assertDefinitionNode(n, Token.FUNCTION);
                      children: []
                      pos: 27308
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: Node lValue = NodeUtil.getBestLValue(n);
                      children: []
                      pos: 27462
                      length: 40
                    - type: local_variable_declaration
                      fields:
                        text: JSDocInfo info = NodeUtil.getBestJSDocInfo(n);
                      children: []
                      pos: 27509
                      length: 46
                    - type: local_variable_declaration
                      fields:
                        text: String functionName = NodeUtil.getBestLValueName(lValue);
                      children: []
                      pos: 27562
                      length: 57
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    createFunctionTypeFromNodes(n, functionName, info, lValue);
                      children: []
                      pos: 27626
                      length: 97
                    - type: expression_statement
                      fields:
                        text: setDeferredType(n, functionType);
                      children: []
                      pos: 27789
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: NodeUtil.isFunctionDeclaration(n)
                              children: []
                              pos: 27995
                              length: 33
                          children: []
                          pos: 27994
                          length: 35
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: defineSlot(n.getFirstChild(), n, functionType);
                          children: []
                          pos: 28040
                          length: 47
                        pos: 28030
                        length: 65
                      pos: 27991
                      length: 104
                    pos: 27300
                    length: 801
                children: []
                pos: 27252
                length: 849
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineName
                    children: []
                    pos: 28504
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 28515
                      length: 9
                    pos: 28491
                    length: 420
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node value = name.getFirstChild();
                      children: []
                      pos: 28573
                      length: 34
                    - type: local_variable_declaration
                      fields:
                        text: JSType type = getDeclaredType(sourceName, info, name,
                          value);
                      children: []
                      pos: 28640
                      length: 61
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: type
                                  children: []
                                  pos: 28712
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 28720
                                  length: 4
                              children: []
                              pos: 28712
                              length: 12
                          children: []
                          pos: 28711
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              type = name.isFromExterns() ?
                                          getNativeType(UNKNOWN_TYPE) : null;
                          children: []
                          pos: 28785
                          length: 77
                        pos: 28726
                        length: 144
                      pos: 28708
                      length: 162
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, var, type);
                      children: []
                      pos: 28877
                      length: 28
                    pos: 28565
                    length: 346
                children: []
                pos: 28491
                length: 420
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: shouldUseFunctionLiteralType
                    children: []
                    pos: 29257
                    length: 28
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: FunctionType type
                      children: []
                      pos: 29295
                      length: 17
                    pos: 29241
                    length: 350
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 29355
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 29363
                                  length: 4
                              children: []
                              pos: 29355
                              length: 12
                          children: []
                          pos: 29354
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 29379
                          length: 12
                        pos: 29369
                        length: 30
                      pos: 29351
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: lValue
                                      children: []
                                      pos: 29410
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 29420
                                      length: 4
                                  children: []
                                  pos: 29410
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: NodeUtil.isObjectLitKey(lValue, lValue.getParent())
                                  children: []
                                  pos: 29438
                                  length: 51
                              children: []
                              pos: 29410
                              length: 79
                          children: []
                          pos: 29409
                          length: 81
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return false;
                          children: []
                          pos: 29501
                          length: 13
                        pos: 29491
                        length: 31
                      pos: 29406
                      length: 116
                    - type: return_statement
                      fields:
                        text: return scope.isGlobal() || !type.isReturnTypeInferred();
                      children: []
                      pos: 29529
                      length: 56
                    pos: 29343
                    length: 248
                children: []
                pos: 29241
                length: 350
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createFunctionTypeFromNodes
                    children: []
                    pos: 30639
                    length: 27
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Node rValue"
                      children: []
                      pos: 30676
                      length: 21
                    pos: 30618
                    length: 3793
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType functionType = null;
                      children: []
                      pos: 30808
                      length: 33
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 30927
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 30937
                                          length: 4
                                      children: []
                                      pos: 30927
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isQualifiedName()
                                      children: []
                                      pos: 30945
                                      length: 24
                                  children: []
                                  pos: 30927
                                  length: 42
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 30973
                                  length: 16
                              children: []
                              pos: 30927
                              length: 62
                          children: []
                          pos: 30926
                          length: 64
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 31001
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: var
                                              children: []
                                              pos: 31064
                                              length: 3
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31071
                                              length: 4
                                          children: []
                                          pos: 31064
                                          length: 11
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: var.getType()
                                              children: []
                                              pos: 31079
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 31096
                                              length: 4
                                          children: []
                                          pos: 31079
                                          length: 21
                                      children: []
                                      pos: 31064
                                      length: 36
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: var.getType().isFunctionType()
                                      children: []
                                      pos: 31116
                                      length: 30
                                  children: []
                                  pos: 31064
                                  length: 82
                              children: []
                              pos: 31063
                              length: 84
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType aliasedType  = var.getType().toMaybeFunctionType();
                              children: []
                              pos: 31160
                              length: 64
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isConstructor()
                                                  children: []
                                                  pos: 31240
                                                  length: 27
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: aliasedType.isInterface()
                                                  children: []
                                                  pos: 31271
                                                  length: 25
                                              children: []
                                              pos: 31240
                                              length: 56
                                          children: []
                                          pos: 31239
                                          length: 58
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!aliasedType.isNativeObjectType()"
                                          children: []
                                          pos: 31315
                                          length: 33
                                      children: []
                                      pos: 31239
                                      length: 109
                                  children: []
                                  pos: 31238
                                  length: 111
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = aliasedType;
                                  children: []
                                  pos: 31364
                                  length: 27
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: name
                                                  children: []
                                                  pos: 31409
                                                  length: 4
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 31417
                                                  length: 4
                                              children: []
                                              pos: 31409
                                              length: 12
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: scope.isGlobal()
                                              children: []
                                              pos: 31425
                                              length: 16
                                          children: []
                                          pos: 31409
                                          length: 32
                                      children: []
                                      pos: 31408
                                      length: 34
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: typeRegistry.declareType(name, functionType.getInstanceType());
                                      children: []
                                      pos: 31459
                                      length: 63
                                    pos: 31443
                                    length: 93
                                  pos: 31405
                                  length: 131
                                pos: 31350
                                length: 198
                              pos: 31235
                              length: 313
                            pos: 31148
                            length: 410
                          pos: 31060
                          length: 498
                        pos: 30991
                        length: 575
                      pos: 30923
                      length: 643
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 31578
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 31594
                                  length: 4
                              children: []
                              pos: 31578
                              length: 20
                          children: []
                          pos: 31577
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: 'Node errorRoot = rValue == null ? lvalueNode :
                              rValue;'
                          children: []
                          pos: 31610
                          length: 54
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              boolean isFnLiteral =
                                          rValue != null && rValue.isFunction();
                          children: []
                          pos: 31673
                          length: 72
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnRoot = isFnLiteral ? rValue : null;'
                          children: []
                          pos: 31754
                          length: 42
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              Node parametersNode = isFnLiteral ?
                                          rValue.getFirstChild().getNext() : null;
                          children: []
                          pos: 31805
                          length: 88
                        - type: local_variable_declaration
                          fields:
                            text: 'Node fnBlock = isFnLiteral ? parametersNode.getNext()
                              : null;'
                          children: []
                          pos: 31902
                          length: 61
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: info
                                          children: []
                                          pos: 31977
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 31985
                                          length: 4
                                      children: []
                                      pos: 31977
                                      length: 12
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: info.hasType()
                                      children: []
                                      pos: 31993
                                      length: 14
                                  children: []
                                  pos: 31977
                                  length: 30
                              children: []
                              pos: 31976
                              length: 32
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: JSType type = info.getType().evaluate(scope,
                                  typeRegistry);
                              children: []
                              pos: 32021
                              length: 59
                            - type: expression_statement
                              fields:
                                text: type = type.restrictByNotNullOrUndefined();
                              children: []
                              pos: 32166
                              length: 43
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 32224
                                      length: 21
                                  children: []
                                  pos: 32223
                                  length: 23
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: functionType = type.toMaybeFunctionType();
                                  children: []
                                  pos: 32261
                                  length: 42
                                - type: expression_statement
                                  fields:
                                    text: functionType.setJSDocInfo(info);
                                  children: []
                                  pos: 32316
                                  length: 32
                                pos: 32247
                                length: 113
                              pos: 32220
                              length: 140
                            pos: 32009
                            length: 361
                          pos: 31973
                          length: 397
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: functionType
                                      children: []
                                      pos: 32384
                                      length: 12
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 32400
                                      length: 4
                                  children: []
                                  pos: 32384
                                  length: 20
                              children: []
                              pos: 32383
                              length: 22
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node ownerNode = NodeUtil.getBestLValueOwner(lvalueNode);
                              children: []
                              pos: 32473
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: String ownerName = NodeUtil.getBestLValueName(ownerNode);
                              children: []
                              pos: 32541
                              length: 57
                            - type: local_variable_declaration
                              fields:
                                text: Var ownerVar = null;
                              children: []
                              pos: 32609
                              length: 20
                            - type: local_variable_declaration
                              fields:
                                text: String propName = null;
                              children: []
                              pos: 32640
                              length: 23
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType ownerType = null;
                              children: []
                              pos: 32674
                              length: 28
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: ownerName
                                          children: []
                                          pos: 32717
                                          length: 9
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 32730
                                          length: 4
                                      children: []
                                      pos: 32717
                                      length: 17
                                  children: []
                                  pos: 32716
                                  length: 19
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerVar = scope.getVar(ownerName);
                                  children: []
                                  pos: 32750
                                  length: 35
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerVar
                                              children: []
                                              pos: 32802
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 32814
                                              length: 4
                                          children: []
                                          pos: 32802
                                          length: 16
                                      children: []
                                      pos: 32801
                                      length: 18
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: ownerType = ObjectType.cast(ownerVar.getType());
                                      children: []
                                      pos: 32836
                                      length: 48
                                    pos: 32820
                                    length: 78
                                  pos: 32798
                                  length: 100
                                - type: if_statement
                                  fields:
                                    condition:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: name
                                              children: []
                                              pos: 32915
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 32923
                                              length: 4
                                          children: []
                                          pos: 32915
                                          length: 12
                                      children: []
                                      pos: 32914
                                      length: 14
                                  children:
                                  - type: block
                                    fields: {}
                                    children:
                                    - type: expression_statement
                                      fields:
                                        text: propName = name.substring(ownerName.length()
                                          + 1);
                                      children: []
                                      pos: 32945
                                      length: 50
                                    pos: 32929
                                    length: 80
                                  pos: 32911
                                  length: 98
                                pos: 32736
                                length: 285
                              pos: 32713
                              length: 308
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType overriddenPropType = null;
                              children: []
                              pos: 33033
                              length: 39
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 33087
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33100
                                              length: 4
                                          children: []
                                          pos: 33087
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: propName
                                              children: []
                                              pos: 33108
                                              length: 8
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33120
                                              length: 4
                                          children: []
                                          pos: 33108
                                          length: 16
                                      children: []
                                      pos: 33087
                                      length: 37
                                  children: []
                                  pos: 33086
                                  length: 39
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      overriddenPropType =
                                                      findOverriddenFunction(ownerType, propName);
                                  children: []
                                  pos: 33140
                                  length: 81
                                pos: 33126
                                length: 107
                              pos: 33083
                              length: 150
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionTypeBuilder builder =
                                                new FunctionTypeBuilder(name, compiler, errorRoot, sourceName,
                                                    scope)
                                                .setContents(getFunctionAnalysisResults(fnRoot))
                                                .inferFromOverriddenFunction(overriddenPropType, parametersNode)
                                                .inferTemplateTypeName(info)
                                                .inferReturnType(info)
                                                .inferInheritance(info);
                              children: []
                              pos: 33245
                              length: 392
                            - type: local_variable_declaration
                              fields:
                                text: boolean searchedForThisType = false;
                              children: []
                              pos: 33687
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: ownerType
                                              children: []
                                              pos: 33738
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 33751
                                              length: 4
                                          children: []
                                          pos: 33738
                                          length: 17
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: ownerType.isFunctionPrototypeType()
                                          children: []
                                          pos: 33759
                                          length: 35
                                      children: []
                                      pos: 33738
                                      length: 56
                                  children: []
                                  pos: 33737
                                  length: 58
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      builder.inferThisType(
                                                      info, ownerType.getOwnerFunction().getInstanceType());
                                  children: []
                                  pos: 33810
                                  length: 93
                                - type: expression_statement
                                  fields:
                                    text: searchedForThisType = true;
                                  children: []
                                  pos: 33916
                                  length: 27
                                pos: 33796
                                length: 159
                              pos: 33734
                              length: 389
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: unary_expression
                                      fields:
                                        text: "!searchedForThisType"
                                      children: []
                                      pos: 34139
                                      length: 20
                                  children: []
                                  pos: 34138
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: builder.inferThisType(info);
                                  children: []
                                  pos: 34175
                                  length: 28
                                pos: 34161
                                length: 54
                              pos: 34135
                              length: 80
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionType = builder
                                                .inferParameterTypes(parametersNode, info)
                                                .buildAndRegister();
                              children: []
                              pos: 34227
                              length: 114
                            pos: 32406
                            length: 1945
                          pos: 32380
                          length: 1971
                        pos: 31600
                        length: 2759
                      pos: 31574
                      length: 2785
                    - type: return_statement
                      fields:
                        text: return functionType;
                      children: []
                      pos: 34385
                      length: 20
                    pos: 30799
                    length: 3612
                children: []
                pos: 30618
                length: 3793
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: findOverriddenFunction
                    children: []
                    pos: 34525
                    length: 22
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: ObjectType ownerType
                      children: []
                      pos: 34557
                      length: 20
                    pos: 34504
                    length: 780
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: JSType propType = ownerType.getPropertyType(propName);
                      children: []
                      pos: 34690
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: propType
                                      children: []
                                      pos: 34755
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 34767
                                      length: 4
                                  children: []
                                  pos: 34755
                                  length: 16
                                right:
                                  type: method_invocation
                                  fields:
                                    text: propType.isFunctionType()
                                  children: []
                                  pos: 34775
                                  length: 25
                              children: []
                              pos: 34755
                              length: 45
                          children: []
                          pos: 34754
                          length: 47
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return propType.toMaybeFunctionType();
                          children: []
                          pos: 34812
                          length: 38
                        pos: 34802
                        length: 56
                      pos: 34751
                      length: 507
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 35266
                      length: 12
                    pos: 34596
                    length: 688
                children: []
                pos: 34504
                length: 780
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: createEnumTypeFromNodes
                    children: []
                    pos: 35991
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node rValue
                      children: []
                      pos: 36015
                      length: 11
                    pos: 35974
                    length: 1636
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkNotNull(info);
                      children: []
                      pos: 36090
                      length: 33
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkState(info.hasEnumParameterType());
                      children: []
                      pos: 36130
                      length: 54
                    - type: local_variable_declaration
                      fields:
                        text: EnumType enumType = null;
                      children: []
                      pos: 36192
                      length: 25
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rValue
                                      children: []
                                      pos: 36228
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 36238
                                      length: 4
                                  children: []
                                  pos: 36228
                                  length: 14
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rValue.isQualifiedName()
                                  children: []
                                  pos: 36246
                                  length: 24
                              children: []
                              pos: 36228
                              length: 42
                          children: []
                          pos: 36227
                          length: 44
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(rValue.getQualifiedName());
                          children: []
                          pos: 36317
                          length: 50
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: var
                                          children: []
                                          pos: 36380
                                          length: 3
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36387
                                          length: 4
                                      children: []
                                      pos: 36380
                                      length: 11
                                    right:
                                      type: instanceof_expression
                                      fields:
                                        text: var.getType() instanceof EnumType
                                      children: []
                                      pos: 36395
                                      length: 33
                                  children: []
                                  pos: 36380
                                  length: 48
                              children: []
                              pos: 36379
                              length: 50
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: enumType = (EnumType) var.getType();
                              children: []
                              pos: 36442
                              length: 36
                            pos: 36430
                            length: 58
                          pos: 36376
                          length: 112
                        pos: 36272
                        length: 224
                      pos: 36224
                      length: 272
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: enumType
                                  children: []
                                  pos: 36508
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 36520
                                  length: 4
                              children: []
                              pos: 36508
                              length: 16
                          children: []
                          pos: 36507
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              JSType elementsType =
                                          info.getEnumParameterType().evaluate(scope, typeRegistry);
                          children: []
                          pos: 36536
                          length: 92
                        - type: expression_statement
                          fields:
                            text: enumType = typeRegistry.createEnumType(name, rValue,
                              elementsType);
                          children: []
                          pos: 36637
                          length: 67
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rValue
                                          children: []
                                          pos: 36718
                                          length: 6
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 36728
                                          length: 4
                                      children: []
                                      pos: 36718
                                      length: 14
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: rValue.isObjectLit()
                                      children: []
                                      pos: 36736
                                      length: 20
                                  children: []
                                  pos: 36718
                                  length: 38
                              children: []
                              pos: 36717
                              length: 40
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node key = rValue.getFirstChild();
                              children: []
                              pos: 36805
                              length: 34
                            - type: while_statement
                              fields:
                                text: |-
                                  while (key != null) {
                                              String keyName = NodeUtil.getStringValue(key);
                                              if (keyName == null) {
                                                // GET and SET don't have a String value;
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else if (!codingConvention.isValidEnumKey(keyName)) {
                                                compiler.report(
                                                    JSError.make(sourceName, key, ENUM_NOT_CONSTANT, keyName));
                                              } else {
                                                enumType.defineElement(keyName, key);
                                              }
                                              key = key.getNext();
                                            }
                              children: []
                              pos: 36850
                              length: 589
                            pos: 36758
                            length: 691
                          pos: 36714
                          length: 735
                        pos: 36526
                        length: 931
                      pos: 36504
                      length: 953
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: name
                                      children: []
                                      pos: 37469
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 37477
                                      length: 4
                                  children: []
                                  pos: 37469
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.isGlobal()
                                  children: []
                                  pos: 37485
                                  length: 16
                              children: []
                              pos: 37469
                              length: 32
                          children: []
                          pos: 37468
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: typeRegistry.declareType(name, enumType.getElementsType());
                          children: []
                          pos: 37513
                          length: 59
                        pos: 37503
                        length: 77
                      pos: 37465
                      length: 115
                    - type: return_statement
                      fields:
                        text: return enumType;
                      children: []
                      pos: 37588
                      length: 16
                    pos: 36082
                    length: 1528
                children: []
                pos: 35974
                length: 1636
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 38033
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node name
                      children: []
                      pos: 38044
                      length: 9
                    pos: 38020
                    length: 120
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: defineSlot(name, parent, type, type == null);
                      children: []
                      pos: 38089
                      length: 45
                    pos: 38081
                    length: 59
                children: []
                pos: 38020
                length: 120
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 38634
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 38645
                      length: 6
                    pos: 38629
                    length: 694
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(inferred || type != null);
                      children: []
                      pos: 38705
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.isName()
                              children: []
                              pos: 38907
                              length: 10
                          children: []
                          pos: 38906
                          length: 12
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              Preconditions.checkArgument(
                                          parent.isFunction() ||
                                          parent.isVar() ||
                                          parent.isParamList() ||
                                          parent.isCatch());
                          children: []
                          pos: 38929
                          length: 160
                        pos: 38919
                        length: 178
                      pos: 38903
                      length: 347
                    - type: expression_statement
                      fields:
                        text: defineSlot(n, parent, n.getQualifiedName(), type, inferred);
                      children: []
                      pos: 39257
                      length: 60
                    pos: 38697
                    length: 626
                children: []
                pos: 38629
                length: 694
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: defineSlot
                    children: []
                    pos: 39764
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 39775
                      length: 6
                    pos: 39759
                    length: 5801
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(!variableName.isEmpty());
                      children: []
                      pos: 39864
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean isGlobalVar = n.isName() && scope.isGlobal();
                      children: []
                      pos: 39925
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean shouldDeclareOnGlobalThis =
                                    isGlobalVar &&
                                    (parent.isVar() ||
                                     parent.isFunction());
                      children: []
                      pos: 39985
                      length: 122
                    - type: local_variable_declaration
                      fields:
                        text: Scope scopeToDeclareIn = scope;
                      children: []
                      pos: 40315
                      length: 31
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.isGetProp()
                                      children: []
                                      pos: 40357
                                      length: 13
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!scope.isGlobal()"
                                      children: []
                                      pos: 40374
                                      length: 17
                                  children: []
                                  pos: 40357
                                  length: 34
                                right:
                                  type: method_invocation
                                  fields:
                                    text: isQnameRootedInGlobalScope(n)
                                  children: []
                                  pos: 40405
                                  length: 29
                              children: []
                              pos: 40357
                              length: 77
                          children: []
                          pos: 40356
                          length: 79
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope globalScope = scope.getGlobalScope();
                          children: []
                          pos: 40446
                          length: 43
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: unary_expression
                                  fields:
                                    text: "!globalScope.isDeclared(variableName, false)"
                                  children: []
                                  pos: 40616
                                  length: 44
                              children: []
                              pos: 40615
                              length: 46
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: scopeToDeclareIn = scope.getGlobalScope();
                              children: []
                              pos: 40674
                              length: 42
                            pos: 40662
                            length: 64
                          pos: 40612
                          length: 114
                        pos: 40436
                        length: 298
                      pos: 40353
                      length: 381
                    - type: local_variable_declaration
                      fields:
                        text: boolean isExtern = n.isFromExterns();
                      children: []
                      pos: 40859
                      length: 37
                    - type: local_variable_declaration
                      fields:
                        text: Var newVar = null;
                      children: []
                      pos: 40903
                      length: 18
                    - type: local_variable_declaration
                      fields:
                        text: CompilerInput input = compiler.getInput(inputId);
                      children: []
                      pos: 40965
                      length: 49
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: scopeToDeclareIn.isDeclared(variableName, false)
                              children: []
                              pos: 41025
                              length: 48
                          children: []
                          pos: 41024
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var oldVar = scopeToDeclareIn.getVar(variableName);
                          children: []
                          pos: 41085
                          length: 51
                        - type: expression_statement
                          fields:
                            text: |-
                              newVar = validator.expectUndeclaredVariable(
                                          sourceName, input, n, parent, oldVar, variableName, type);
                          children: []
                          pos: 41145
                          length: 115
                        pos: 41075
                        length: 193
                      pos: 41021
                      length: 803
                    - type: local_variable_declaration
                      fields:
                        text: FunctionType fnType = JSType.toMaybeFunctionType(type);
                      children: []
                      pos: 41909
                      length: 55
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: fnType
                                      children: []
                                      pos: 41975
                                      length: 6
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 41985
                                      length: 4
                                  children: []
                                  pos: 41975
                                  length: 14
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!type.isEmptyType()"
                                  children: []
                                  pos: 42063
                                  length: 19
                              children: []
                              pos: 41975
                              length: 107
                          children: []
                          pos: 41974
                          length: 109
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: or
                                          fields:
                                            left:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isConstructor()
                                              children: []
                                              pos: 42099
                                              length: 22
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: fnType.isInterface()
                                              children: []
                                              pos: 42125
                                              length: 20
                                          children: []
                                          pos: 42099
                                          length: 46
                                      children: []
                                      pos: 42098
                                      length: 48
                                    right:
                                      type: unary_expression
                                      fields:
                                        text: "!fnType.equals(getNativeType(U2U_CONSTRUCTOR_TYPE))"
                                      children: []
                                      pos: 42162
                                      length: 51
                                  children: []
                                  pos: 42098
                                  length: 115
                              children: []
                              pos: 42097
                              length: 117
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType superClassCtor = fnType.getSuperClassConstructor();
                              children: []
                              pos: 42282
                              length: 64
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType.Property prototypeSlot = fnType.getSlot("prototype");
                              children: []
                              pos: 42357
                              length: 64
                            - type: expression_statement
                              fields:
                                text: prototypeSlot.setNode(n);
                              children: []
                              pos: 42882
                              length: 25
                            - type: local_variable_declaration
                              fields:
                                text: String prototypeName = variableName + ".prototype";
                              children: []
                              pos: 42919
                              length: 51
                            - type: local_variable_declaration
                              fields:
                                text: Var prototypeVar = scopeToDeclareIn.getVar(prototypeName);
                              children: []
                              pos: 43202
                              length: 58
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: prototypeVar
                                              children: []
                                              pos: 43275
                                              length: 12
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 43291
                                              length: 4
                                          children: []
                                          pos: 43275
                                          length: 20
                                        right:
                                          type: equals
                                          fields:
                                            left:
                                              type: field_access
                                              fields:
                                                text: prototypeVar.scope
                                              children: []
                                              pos: 43299
                                              length: 18
                                            right:
                                              type: identifier
                                              fields:
                                                text: scopeToDeclareIn
                                              children: []
                                              pos: 43321
                                              length: 16
                                          children: []
                                          pos: 43299
                                          length: 38
                                      children: []
                                      pos: 43275
                                      length: 62
                                  children: []
                                  pos: 43274
                                  length: 64
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scopeToDeclareIn.undeclare(prototypeVar);
                                  children: []
                                  pos: 43353
                                  length: 41
                                pos: 43339
                                length: 67
                              pos: 43271
                              length: 135
                            - type: expression_statement
                              fields:
                                text: |-
                                  scopeToDeclareIn.declare(prototypeName,
                                                n, prototypeSlot.getType(), input,
                                                /* declared iff there's an explicit supertype */
                                                superClassCtor == null ||
                                                superClassCtor.getInstanceType().equals(
                                                    getNativeType(OBJECT_TYPE)));
                              children: []
                              pos: 43418
                              length: 294
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: newVar.getInitialValue()
                                                  children: []
                                                  pos: 43830
                                                  length: 24
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 43858
                                                  length: 4
                                              children: []
                                              pos: 43830
                                              length: 32
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!isExtern"
                                              children: []
                                              pos: 43880
                                              length: 9
                                          children: []
                                          pos: 43830
                                          length: 59
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: |-
                                              variableName.equals(
                                                                fnType.getInstanceType().getReferenceName())
                                          children: []
                                          pos: 44289
                                          length: 83
                                      children: []
                                      pos: 43830
                                      length: 542
                                  children: []
                                  pos: 43829
                                  length: 544
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      compiler.report(
                                                      JSError.make(sourceName, n,
                                                          fnType.isConstructor() ?
                                                          CTOR_INITIALIZER : IFACE_INITIALIZER,
                                                          variableName));
                                  children: []
                                  pos: 44388
                                  length: 199
                                pos: 44374
                                length: 225
                              pos: 43826
                              length: 773
                            pos: 42215
                            length: 2394
                          pos: 42094
                          length: 2515
                        pos: 42084
                        length: 2533
                      pos: 41971
                      length: 2646
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: identifier
                              fields:
                                text: shouldDeclareOnGlobalThis
                              children: []
                              pos: 44629
                              length: 25
                          children: []
                          pos: 44628
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType globalThis =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS);
                          children: []
                          pos: 44666
                          length: 82
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: identifier
                                  fields:
                                    text: inferred
                                  children: []
                                  pos: 44761
                                  length: 8
                              children: []
                              pos: 44760
                              length: 10
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  globalThis.defineInferredProperty(variableName,
                                                type == null ?
                                                getNativeType(JSTypeNative.NO_TYPE) :
                                                type,
                                                n);
                              children: []
                              pos: 44783
                              length: 166
                            pos: 44771
                            length: 188
                          pos: 44757
                          length: 287
                        pos: 44656
                        length: 396
                      pos: 44625
                      length: 427
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: isGlobalVar
                                              children: []
                                              pos: 45064
                                              length: 11
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: '"Window".equals(variableName)'
                                              children: []
                                              pos: 45079
                                              length: 29
                                          children: []
                                          pos: 45064
                                          length: 44
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: type
                                              children: []
                                              pos: 45122
                                              length: 4
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 45130
                                              length: 4
                                          children: []
                                          pos: 45122
                                          length: 12
                                      children: []
                                      pos: 45064
                                      length: 70
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: type.isFunctionType()
                                      children: []
                                      pos: 45148
                                      length: 21
                                  children: []
                                  pos: 45064
                                  length: 105
                                right:
                                  type: method_invocation
                                  fields:
                                    text: type.isConstructor()
                                  children: []
                                  pos: 45183
                                  length: 20
                              children: []
                              pos: 45064
                              length: 139
                          children: []
                          pos: 45063
                          length: 141
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType globalThisCtor =
                                          typeRegistry.getNativeObjectType(GLOBAL_THIS).getConstructor();
                          children: []
                          pos: 45215
                          length: 105
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getInstanceType().clearCachedValues();
                          children: []
                          pos: 45329
                          length: 53
                        - type: expression_statement
                          fields:
                            text: globalThisCtor.getPrototype().clearCachedValues();
                          children: []
                          pos: 45391
                          length: 50
                        - type: expression_statement
                          fields:
                            text: |-
                              globalThisCtor
                                          .setPrototypeBasedOn((type.toMaybeFunctionType()).getInstanceType());
                          children: []
                          pos: 45450
                          length: 96
                        pos: 45205
                        length: 349
                      pos: 45060
                      length: 494
                    pos: 39856
                    length: 5704
                children: []
                pos: 39759
                length: 5801
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQnameRootedInGlobalScope
                    children: []
                    pos: 45674
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 45701
                      length: 6
                    pos: 45658
                    length: 148
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Scope scope = getQnameRootScope(n);
                      children: []
                      pos: 45717
                      length: 35
                    - type: return_statement
                      fields:
                        text: return scope != null && scope.isGlobal();
                      children: []
                      pos: 45759
                      length: 41
                    pos: 45709
                    length: 97
                children: []
                pos: 45658
                length: 148
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getQnameRootScope
                    children: []
                    pos: 45898
                    length: 17
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 45916
                      length: 6
                    pos: 45884
                    length: 275
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node root = NodeUtil.getRootOfQualifiedName(n);
                      children: []
                      pos: 45932
                      length: 47
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: root.isName()
                              children: []
                              pos: 45990
                              length: 13
                          children: []
                          pos: 45989
                          length: 15
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var var = scope.getVar(root.getString());
                          children: []
                          pos: 46015
                          length: 41
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: var
                                      children: []
                                      pos: 46069
                                      length: 3
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 46076
                                      length: 4
                                  children: []
                                  pos: 46069
                                  length: 11
                              children: []
                              pos: 46068
                              length: 13
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: return_statement
                              fields:
                                text: return var.getScope();
                              children: []
                              pos: 46094
                              length: 22
                            pos: 46082
                            length: 44
                          pos: 46065
                          length: 61
                        pos: 46005
                        length: 129
                      pos: 45986
                      length: 148
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 46141
                      length: 12
                    pos: 45924
                    length: 235
                children: []
                pos: 45884
                length: 275
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getDeclaredType
                    children: []
                    pos: 46529
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String sourceName
                      children: []
                      pos: 46545
                      length: 17
                    pos: 46514
                    length: 2128
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 46636
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 46644
                                      length: 4
                                  children: []
                                  pos: 46636
                                  length: 12
                                right:
                                  type: method_invocation
                                  fields:
                                    text: info.hasType()
                                  children: []
                                  pos: 46652
                                  length: 14
                              children: []
                              pos: 46636
                              length: 30
                          children: []
                          pos: 46635
                          length: 32
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                              info);
                          children: []
                          pos: 46678
                          length: 61
                        pos: 46668
                        length: 79
                      pos: 46632
                      length: 1935
                    - type: return_statement
                      fields:
                        text: return getDeclaredTypeInAnnotation(sourceName, lValue,
                          info);
                      children: []
                      pos: 48575
                      length: 61
                    pos: 46624
                    length: 2018
                children: []
                pos: 46514
                length: 2128
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getFunctionType
                    children: []
                    pos: 48669
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: "@Nullable Var v"
                      children: []
                      pos: 48685
                      length: 15
                    pos: 48648
                    length: 211
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: 'JSType t = v == null ? null : v.getType();'
                      children: []
                      pos: 48710
                      length: 42
                    - type: local_variable_declaration
                      fields:
                        text: 'ObjectType o = t == null ? null : t.dereference();'
                      children: []
                      pos: 48759
                      length: 50
                    - type: return_statement
                      fields:
                        text: return JSType.toMaybeFunctionType(o);
                      children: []
                      pos: 48816
                      length: 37
                    pos: 48702
                    length: 157
                children: []
                pos: 48648
                length: 211
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForCallingConventionDefiningCalls
                    children: []
                    pos: 48965
                    length: 38
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node n
                      children: []
                      pos: 49013
                      length: 6
                    pos: 48952
                    length: 228
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: |-
                          codingConvention.checkForCallingConventionDefiningCalls(n,
                                    delegateCallingConventions);
                      children: []
                      pos: 49077
                      length: 97
                    pos: 49069
                    length: 111
                children: []
                pos: 48952
                length: 228
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForClassDefiningCalls
                    children: []
                    pos: 49396
                    length: 26
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 49432
                      length: 15
                    pos: 49383
                    length: 2717
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          SubclassRelationship relationship =
                                    codingConvention.getClassesDefinedByCall(n);
                      children: []
                      pos: 49478
                      length: 90
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: relationship
                                  children: []
                                  pos: 49579
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 49595
                                  length: 4
                              children: []
                              pos: 49579
                              length: 20
                          children: []
                          pos: 49578
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType superCtor = getFunctionType(
                                          scope.getVar(relationship.superclassName));
                          children: []
                          pos: 49611
                          length: 97
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              FunctionType subCtor = getFunctionType(
                                          scope.getVar(relationship.subclassName));
                          children: []
                          pos: 49717
                          length: 93
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: superCtor
                                                  children: []
                                                  pos: 49823
                                                  length: 9
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 49836
                                                  length: 4
                                              children: []
                                              pos: 49823
                                              length: 17
                                            right:
                                              type: method_invocation
                                              fields:
                                                text: superCtor.isConstructor()
                                              children: []
                                              pos: 49844
                                              length: 25
                                          children: []
                                          pos: 49823
                                          length: 46
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 49885
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 49896
                                              length: 4
                                          children: []
                                          pos: 49885
                                          length: 15
                                      children: []
                                      pos: 49823
                                      length: 77
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: subCtor.isConstructor()
                                      children: []
                                      pos: 49904
                                      length: 23
                                  children: []
                                  pos: 49823
                                  length: 104
                              children: []
                              pos: 49822
                              length: 106
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType superClass = superCtor.getInstanceType();
                              children: []
                              pos: 49941
                              length: 52
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType subClass = subCtor.getInstanceType();
                              children: []
                              pos: 50004
                              length: 48
                            - type: expression_statement
                              fields:
                                text: superCtor = superClass.getConstructor();
                              children: []
                              pos: 50250
                              length: 40
                            - type: expression_statement
                              fields:
                                text: subCtor = subClass.getConstructor();
                              children: []
                              pos: 50301
                              length: 36
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: equals
                                              fields:
                                                left:
                                                  type: field_access
                                                  fields:
                                                    text: relationship.type
                                                  children: []
                                                  pos: 50353
                                                  length: 17
                                                right:
                                                  type: field_access
                                                  fields:
                                                    text: SubclassType.INHERITS
                                                  children: []
                                                  pos: 50374
                                                  length: 21
                                              children: []
                                              pos: 50353
                                              length: 42
                                            right:
                                              type: unary_expression
                                              fields:
                                                text: "!superClass.isEmptyType()"
                                              children: []
                                              pos: 50413
                                              length: 25
                                          children: []
                                          pos: 50353
                                          length: 85
                                        right:
                                          type: unary_expression
                                          fields:
                                            text: "!subClass.isEmptyType()"
                                          children: []
                                          pos: 50442
                                          length: 23
                                      children: []
                                      pos: 50353
                                      length: 112
                                  children: []
                                  pos: 50352
                                  length: 114
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: validator.expectSuperType(t, n, superClass,
                                      subClass);
                                  children: []
                                  pos: 50481
                                  length: 54
                                pos: 50467
                                length: 80
                              pos: 50349
                              length: 198
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: superCtor
                                              children: []
                                              pos: 50563
                                              length: 9
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 50576
                                              length: 4
                                          children: []
                                          pos: 50563
                                          length: 17
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: subCtor
                                              children: []
                                              pos: 50584
                                              length: 7
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 50595
                                              length: 4
                                          children: []
                                          pos: 50584
                                          length: 15
                                      children: []
                                      pos: 50563
                                      length: 36
                                  children: []
                                  pos: 50562
                                  length: 38
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySubclassRelationship(
                                                      superCtor, subCtor, relationship.type);
                                  children: []
                                  pos: 50615
                                  length: 99
                                pos: 50601
                                length: 125
                              pos: 50559
                              length: 167
                            pos: 49929
                            length: 807
                          pos: 49819
                          length: 917
                        pos: 49601
                        length: 1143
                      pos: 49575
                      length: 1169
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          String singletonGetterClassName =
                                    codingConvention.getSingletonGetterClassName(n);
                      children: []
                      pos: 50752
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: singletonGetterClassName
                                  children: []
                                  pos: 50855
                                  length: 24
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 50883
                                  length: 4
                              children: []
                              pos: 50855
                              length: 32
                          children: []
                          pos: 50854
                          length: 34
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType objectType = ObjectType.cast(
                                          typeRegistry.getType(singletonGetterClassName));
                          children: []
                          pos: 50899
                          length: 101
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: objectType
                                      children: []
                                      pos: 51013
                                      length: 10
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 51027
                                      length: 4
                                  children: []
                                  pos: 51013
                                  length: 18
                              children: []
                              pos: 51012
                              length: 20
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: FunctionType functionType = objectType.getConstructor();
                              children: []
                              pos: 51045
                              length: 56
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: functionType
                                          children: []
                                          pos: 51117
                                          length: 12
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51133
                                          length: 4
                                      children: []
                                      pos: 51117
                                      length: 20
                                  children: []
                                  pos: 51116
                                  length: 22
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: local_variable_declaration
                                  fields:
                                    text: |-
                                      FunctionType getterType =
                                                      typeRegistry.createFunctionType(objectType);
                                  children: []
                                  pos: 51153
                                  length: 86
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      codingConvention.applySingletonGetter(functionType, getterType,
                                                      objectType);
                                  children: []
                                  pos: 51252
                                  length: 92
                                pos: 51139
                                length: 217
                              pos: 51113
                              length: 243
                            pos: 51033
                            length: 333
                          pos: 51009
                          length: 357
                        pos: 50889
                        length: 485
                      pos: 50851
                      length: 523
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          DelegateRelationship delegateRelationship =
                                    codingConvention.getDelegateRelationship(n);
                      children: []
                      pos: 51382
                      length: 98
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: delegateRelationship
                                  children: []
                                  pos: 51491
                                  length: 20
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 51515
                                  length: 4
                              children: []
                              pos: 51491
                              length: 28
                          children: []
                          pos: 51490
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: applyDelegateRelationship(delegateRelationship);
                          children: []
                          pos: 51531
                          length: 48
                        pos: 51521
                        length: 66
                      pos: 51487
                      length: 100
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectLiteralCast objectLiteralCast =
                                    codingConvention.getObjectLiteralCast(t, n);
                      children: []
                      pos: 51595
                      length: 92
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: objectLiteralCast
                                  children: []
                                  pos: 51698
                                  length: 17
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 51719
                                  length: 4
                              children: []
                              pos: 51698
                              length: 25
                          children: []
                          pos: 51697
                          length: 27
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: |-
                              ObjectType type = ObjectType.cast(
                                          typeRegistry.getType(objectLiteralCast.typeName));
                          children: []
                          pos: 51735
                          length: 97
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: type
                                          children: []
                                          pos: 51845
                                          length: 4
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51853
                                          length: 4
                                      children: []
                                      pos: 51845
                                      length: 12
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: type.getConstructor()
                                          children: []
                                          pos: 51861
                                          length: 21
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 51886
                                          length: 4
                                      children: []
                                      pos: 51861
                                      length: 29
                                  children: []
                                  pos: 51845
                                  length: 45
                              children: []
                              pos: 51844
                              length: 47
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: setDeferredType(objectLiteralCast.objectNode,
                                  type);
                              children: []
                              pos: 51904
                              length: 52
                            pos: 51892
                            length: 74
                          pos: 51841
                          length: 245
                        pos: 51725
                        length: 369
                      pos: 51694
                      length: 400
                    pos: 49470
                    length: 2630
                children: []
                pos: 49383
                length: 2717
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: applyDelegateRelationship
                    children: []
                    pos: 52197
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: DelegateRelationship delegateRelationship
                      children: []
                      pos: 52232
                      length: 41
                    pos: 52184
                    length: 1833
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegatorObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegator));
                      children: []
                      pos: 52283
                      length: 110
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateBaseObject = ObjectType.cast(
                                    typeRegistry.getType(delegateRelationship.delegateBase));
                      children: []
                      pos: 52400
                      length: 116
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          ObjectType delegateSuperObject = ObjectType.cast(
                                    typeRegistry.getType(codingConvention.getDelegateSuperclassName()));
                      children: []
                      pos: 52523
                      length: 128
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegatorObject
                                          children: []
                                          pos: 52662
                                          length: 15
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 52681
                                          length: 4
                                      children: []
                                      pos: 52662
                                      length: 23
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateBaseObject
                                          children: []
                                          pos: 52699
                                          length: 18
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 52721
                                          length: 4
                                      children: []
                                      pos: 52699
                                      length: 26
                                  children: []
                                  pos: 52662
                                  length: 63
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: delegateSuperObject
                                      children: []
                                      pos: 52739
                                      length: 19
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 52762
                                      length: 4
                                  children: []
                                  pos: 52739
                                  length: 27
                              children: []
                              pos: 52662
                              length: 104
                          children: []
                          pos: 52661
                          length: 106
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegatorCtor = delegatorObject.getConstructor();
                          children: []
                          pos: 52778
                          length: 62
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateBaseCtor = delegateBaseObject.getConstructor();
                          children: []
                          pos: 52849
                          length: 68
                        - type: local_variable_declaration
                          fields:
                            text: FunctionType delegateSuperCtor = delegateSuperObject.getConstructor();
                          children: []
                          pos: 52926
                          length: 70
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: and
                                  fields:
                                    left:
                                      type: and
                                      fields:
                                        left:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegatorCtor
                                              children: []
                                              pos: 53010
                                              length: 13
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53027
                                              length: 4
                                          children: []
                                          pos: 53010
                                          length: 21
                                        right:
                                          type: not_equals
                                          fields:
                                            left:
                                              type: identifier
                                              fields:
                                                text: delegateBaseCtor
                                              children: []
                                              pos: 53035
                                              length: 16
                                            right:
                                              type: null_literal
                                              fields: {}
                                              children: []
                                              pos: 53055
                                              length: 4
                                          children: []
                                          pos: 53035
                                          length: 24
                                      children: []
                                      pos: 53010
                                      length: 49
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: delegateSuperCtor
                                          children: []
                                          pos: 53075
                                          length: 17
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 53096
                                          length: 4
                                      children: []
                                      pos: 53075
                                      length: 25
                                  children: []
                                  pos: 53010
                                  length: 90
                              children: []
                              pos: 53009
                              length: 92
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionParamBuilder functionParamBuilder =
                                                new FunctionParamBuilder(typeRegistry);
                              children: []
                              pos: 53114
                              length: 97
                            - type: expression_statement
                              fields:
                                text: |-
                                  functionParamBuilder.addRequiredParams(
                                                getNativeType(U2U_CONSTRUCTOR_TYPE));
                              children: []
                              pos: 53222
                              length: 91
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType findDelegate = typeRegistry.createFunctionType(
                                                typeRegistry.createDefaultObjectUnion(delegateBaseObject),
                                                functionParamBuilder.build());
                              children: []
                              pos: 53324
                              length: 178
                            - type: local_variable_declaration
                              fields:
                                text: |-
                                  FunctionType delegateProxy = typeRegistry.createConstructorType(
                                                delegateBaseObject.getReferenceName() + DELEGATE_PROXY_SUFFIX,
                                                null, null, null);
                              children: []
                              pos: 53514
                              length: 174
                            - type: expression_statement
                              fields:
                                text: delegateProxy.setPrototypeBasedOn(delegateBaseObject);
                              children: []
                              pos: 53699
                              length: 54
                            - type: expression_statement
                              fields:
                                text: |-
                                  codingConvention.applyDelegateRelationship(
                                                delegateSuperObject, delegateBaseObject, delegatorObject,
                                                delegateProxy, findDelegate);
                              children: []
                              pos: 53765
                              length: 159
                            - type: expression_statement
                              fields:
                                text: delegateProxyPrototypes.add(delegateProxy.getPrototype());
                              children: []
                              pos: 53935
                              length: 58
                            pos: 53102
                            length: 901
                          pos: 53006
                          length: 997
                        pos: 52768
                        length: 1243
                      pos: 52658
                      length: 1353
                    pos: 52275
                    length: 1742
                children: []
                pos: 52184
                length: 1833
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 54451
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 54477
                      length: 15
                    pos: 54446
                    length: 4680
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node ownerNode = n.getFirstChild();
                      children: []
                      pos: 54562
                      length: 35
                    - type: local_variable_declaration
                      fields:
                        text: String ownerName = ownerNode.getQualifiedName();
                      children: []
                      pos: 54604
                      length: 48
                    - type: local_variable_declaration
                      fields:
                        text: String qName = n.getQualifiedName();
                      children: []
                      pos: 54659
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: String propName = n.getLastChild().getString();
                      children: []
                      pos: 54702
                      length: 47
                    - type: expression_statement
                      fields:
                        text: Preconditions.checkArgument(qName != null && ownerName
                          != null);
                      children: []
                      pos: 54756
                      length: 64
                    - type: local_variable_declaration
                      fields:
                        text: JSType valueType = getDeclaredType(t.getSourceName(),
                          info, n, rhsValue);
                      children: []
                      pos: 55478
                      length: 73
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: valueType
                                      children: []
                                      pos: 55562
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 55575
                                      length: 4
                                  children: []
                                  pos: 55562
                                  length: 17
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: rhsValue
                                      children: []
                                      pos: 55583
                                      length: 8
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 55595
                                      length: 4
                                  children: []
                                  pos: 55583
                                  length: 16
                              children: []
                              pos: 55562
                              length: 37
                          children: []
                          pos: 55561
                          length: 39
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: valueType = rhsValue.getJSType();
                          children: []
                          pos: 55646
                          length: 33
                        pos: 55601
                        length: 86
                      pos: 55558
                      length: 129
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: '"prototype".equals(propName)'
                              children: []
                              pos: 55934
                              length: 28
                          children: []
                          pos: 55933
                          length: 30
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Var qVar = scope.getVar(qName);
                          children: []
                          pos: 55974
                          length: 31
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: qVar
                                      children: []
                                      pos: 56018
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 56026
                                      length: 4
                                  children: []
                                  pos: 56018
                                  length: 12
                              children: []
                              pos: 56017
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: ObjectType qVarType = ObjectType.cast(qVar.getType());
                              children: []
                              pos: 56361
                              length: 54
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: qVarType
                                                  children: []
                                                  pos: 56430
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 56442
                                                  length: 4
                                              children: []
                                              pos: 56430
                                              length: 16
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: identifier
                                                  fields:
                                                    text: rhsValue
                                                  children: []
                                                  pos: 56464
                                                  length: 8
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 56476
                                                  length: 4
                                              children: []
                                              pos: 56464
                                              length: 16
                                          children: []
                                          pos: 56430
                                          length: 50
                                        right:
                                          type: method_invocation
                                          fields:
                                            text: rhsValue.isObjectLit()
                                          children: []
                                          pos: 56498
                                          length: 22
                                      children: []
                                      pos: 56430
                                      length: 90
                                  children: []
                                  pos: 56429
                                  length: 92
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: |-
                                      typeRegistry.resetImplicitPrototype(
                                                      rhsValue.getJSType(), qVarType.getImplicitPrototype());
                                  children: []
                                  pos: 56536
                                  length: 108
                                pos: 56522
                                length: 134
                              pos: 56426
                              length: 652
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: equals
                                      fields:
                                        left:
                                          type: method_invocation
                                          fields:
                                            text: qVar.getScope()
                                          children: []
                                          pos: 57093
                                          length: 15
                                        right:
                                          type: identifier
                                          fields:
                                            text: scope
                                          children: []
                                          pos: 57112
                                          length: 5
                                      children: []
                                      pos: 57093
                                      length: 24
                                  children: []
                                  pos: 57092
                                  length: 26
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: scope.undeclare(qVar);
                                  children: []
                                  pos: 57133
                                  length: 22
                                pos: 57119
                                length: 48
                              pos: 57089
                              length: 78
                            pos: 56032
                            length: 1145
                          pos: 56014
                          length: 1163
                        pos: 55964
                        length: 1221
                      pos: 55930
                      length: 1255
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 57197
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 57210
                                  length: 4
                              children: []
                              pos: 57197
                              length: 17
                          children: []
                          pos: 57196
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: method_invocation
                                  fields:
                                    text: parent.isExprResult()
                                  children: []
                                  pos: 57230
                                  length: 21
                              children: []
                              pos: 57229
                              length: 23
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: |-
                                  stubDeclarations.add(new StubDeclaration(
                                                n,
                                                t.getInput() != null && t.getInput().isExtern(),
                                                ownerName));
                              children: []
                              pos: 57265
                              length: 148
                            pos: 57253
                            length: 170
                          pos: 57226
                          length: 197
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 57433
                          length: 7
                        pos: 57216
                        length: 232
                      pos: 57193
                      length: 255
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          boolean inferred = isQualifiedNameInferred(
                                    qName, n, info, rhsValue, valueType);
                      children: []
                      pos: 57456
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!inferred"
                              children: []
                              pos: 57558
                              length: 9
                          children: []
                          pos: 57557
                          length: 11
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: ObjectType ownerType = getObjectSlot(ownerName);
                          children: []
                          pos: 57579
                          length: 48
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: ownerType
                                      children: []
                                      pos: 57640
                                      length: 9
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 57653
                                      length: 4
                                  children: []
                                  pos: 57640
                                  length: 17
                              children: []
                              pos: 57639
                              length: 19
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: boolean isExtern = t.getInput() != null && t.getInput().isExtern();
                              children: []
                              pos: 57772
                              length: 67
                            - type: if_statement
                              fields:
                                condition:
                                  type: parenthesized_expression
                                  fields:
                                    expression:
                                      type: and
                                      fields:
                                        left:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.hasOwnProperty(propName)"
                                                  children: []
                                                  pos: 57855
                                                  length: 35
                                                right:
                                                  type: method_invocation
                                                  fields:
                                                    text: ownerType.isPropertyTypeInferred(propName)
                                                  children: []
                                                  pos: 57909
                                                  length: 42
                                              children: []
                                              pos: 57855
                                              length: 96
                                          children: []
                                          pos: 57854
                                          length: 98
                                        right:
                                          type: parenthesized_expression
                                          fields:
                                            expression:
                                              type: or
                                              fields:
                                                left:
                                                  type: parenthesized_expression
                                                  fields:
                                                    expression:
                                                      type: and
                                                      fields:
                                                        left:
                                                          type: identifier
                                                          fields:
                                                            text: isExtern
                                                          children: []
                                                          pos: 57972
                                                          length: 8
                                                        right:
                                                          type: unary_expression
                                                          fields:
                                                            text: "!ownerType.isNativeObjectType()"
                                                          children: []
                                                          pos: 57984
                                                          length: 31
                                                      children: []
                                                      pos: 57972
                                                      length: 43
                                                  children: []
                                                  pos: 57971
                                                  length: 45
                                                right:
                                                  type: unary_expression
                                                  fields:
                                                    text: "!ownerType.isInstanceType()"
                                                  children: []
                                                  pos: 58035
                                                  length: 27
                                              children: []
                                              pos: 57971
                                              length: 91
                                          children: []
                                          pos: 57970
                                          length: 93
                                      children: []
                                      pos: 57854
                                      length: 209
                                  children: []
                                  pos: 57853
                                  length: 211
                              children:
                              - type: block
                                fields: {}
                                children:
                                - type: expression_statement
                                  fields:
                                    text: ownerType.defineDeclaredProperty(propName,
                                      valueType, n);
                                  children: []
                                  pos: 58153
                                  length: 57
                                pos: 58065
                                length: 157
                              pos: 57850
                              length: 372
                            pos: 57659
                            length: 573
                          pos: 57636
                          length: 596
                        - type: expression_statement
                          fields:
                            text: defineSlot(n, parent, valueType, inferred);
                          children: []
                          pos: 58374
                          length: 43
                        pos: 57569
                        length: 856
                      pos: 57554
                      length: 1566
                    pos: 54554
                    length: 4572
                children: []
                pos: 54446
                length: 4680
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: isQualifiedNameInferred
                    children: []
                    pos: 60175
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String qName
                      children: []
                      pos: 60208
                      length: 12
                    pos: 60159
                    length: 808
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: valueType
                                  children: []
                                  pos: 60299
                                  length: 9
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60312
                                  length: 4
                              children: []
                              pos: 60299
                              length: 17
                          children: []
                          pos: 60298
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return true;
                          children: []
                          pos: 60328
                          length: 12
                        pos: 60318
                        length: 30
                      pos: 60295
                      length: 53
                    - type: local_variable_declaration
                      fields:
                        text: boolean inferred = true;
                      children: []
                      pos: 60356
                      length: 24
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: info
                                  children: []
                                  pos: 60391
                                  length: 4
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 60399
                                  length: 4
                              children: []
                              pos: 60391
                              length: 12
                          children: []
                          pos: 60390
                          length: 14
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              inferred = !(info.hasType()
                                          || info.hasEnumParameterType()
                                          || (info.isConstant() && valueType != null
                                              && !valueType.isUnknownType())
                                          || FunctionTypeBuilder.isFunctionTypeDeclaration(info));
                          children: []
                          pos: 60415
                          length: 241
                        pos: 60405
                        length: 259
                      pos: 60387
                      length: 277
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: and
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: inferred
                                      children: []
                                      pos: 60676
                                      length: 8
                                    right:
                                      type: not_equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: rhsValue
                                          children: []
                                          pos: 60688
                                          length: 8
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 60700
                                          length: 4
                                      children: []
                                      pos: 60688
                                      length: 16
                                  children: []
                                  pos: 60676
                                  length: 28
                                right:
                                  type: method_invocation
                                  fields:
                                    text: rhsValue.isFunction()
                                  children: []
                                  pos: 60708
                                  length: 21
                              children: []
                              pos: 60676
                              length: 53
                          children: []
                          pos: 60675
                          length: 55
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 60745
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 60753
                                      length: 4
                                  children: []
                                  pos: 60745
                                  length: 12
                              children: []
                              pos: 60744
                              length: 14
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: inferred = false;
                              children: []
                              pos: 60771
                              length: 17
                            pos: 60759
                            length: 39
                          pos: 60741
                          length: 189
                        pos: 60731
                        length: 207
                      pos: 60672
                      length: 266
                    - type: return_statement
                      fields:
                        text: return inferred;
                      children: []
                      pos: 60945
                      length: 16
                    pos: 60287
                    length: 680
                children: []
                pos: 60159
                length: 808
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: getObjectSlot
                    children: []
                    pos: 61212
                    length: 13
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: String slotName
                      children: []
                      pos: 61226
                      length: 15
                    pos: 61193
                    length: 328
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Var ownerVar = scope.getVar(slotName);
                      children: []
                      pos: 61251
                      length: 38
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: ownerVar
                                  children: []
                                  pos: 61300
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 61312
                                  length: 4
                              children: []
                              pos: 61300
                              length: 16
                          children: []
                          pos: 61299
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: JSType ownerVarType = ownerVar.getType();
                          children: []
                          pos: 61328
                          length: 41
                        - type: return_statement
                          fields:
                            text: |-
                              return ObjectType.cast(ownerVarType == null ?
                                          null : ownerVarType.restrictByNotNullOrUndefined());
                          children: []
                          pos: 61378
                          length: 110
                        pos: 61318
                        length: 178
                      pos: 61296
                      length: 200
                    - type: return_statement
                      fields:
                        text: return null;
                      children: []
                      pos: 61503
                      length: 12
                    pos: 61243
                    length: 278
                children: []
                pos: 61193
                length: 328
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: resolveStubDeclarations
                    children: []
                    pos: 61663
                    length: 23
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 61658
                    length: 1182
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: enhanced_for_statement
                      fields:
                        text: |-
                          for (StubDeclaration stub : stubDeclarations) {
                                  Node n = stub.node;
                                  Node parent = n.getParent();
                                  String qName = n.getQualifiedName();
                                  String propName = n.getLastChild().getString();
                                  String ownerName = stub.ownerName;
                                  boolean isExtern = stub.isExtern;

                                  if (scope.isDeclared(qName, false)) {
                                    continue;
                                  }

                                  // If we see a stub property, make sure to register this property
                                  // in the type registry.
                                  ObjectType ownerType = getObjectSlot(ownerName);
                                  ObjectType unknownType = typeRegistry.getNativeObjectType(UNKNOWN_TYPE);
                                  defineSlot(n, parent, unknownType, true);

                                  if (ownerType != null &&
                                      (isExtern || ownerType.isFunctionPrototypeType())) {
                                    // If this is a stub for a prototype, just declare it
                                    // as an unknown type. These are seen often in externs.
                                    ownerType.defineInferredProperty(
                                        propName, unknownType, n);
                                  } else {
                                    typeRegistry.registerPropertyOnType(
                                        propName, ownerType == null ? unknownType : ownerType);
                                  }
                                }
                      children: []
                      pos: 61697
                      length: 1137
                    pos: 61689
                    length: 1151
                children: []
                pos: 61658
                length: 1182
              - type: class_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: CollectProperties
                    children: []
                    pos: 62992
                    length: 17
                  body:
                    type: class_body
                    fields: {}
                    children:
                    - type: field_declaration
                      fields:
                        text: private final ObjectType thisType;
                      children: []
                      pos: 63067
                      length: 34
                    - type: constructor_declaration
                      fields:
                        text: |-
                          CollectProperties(ObjectType thisType) {
                                  this.thisType = thisType;
                                }
                      children: []
                      pos: 63109
                      length: 82
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: visit
                          children: []
                          pos: 63227
                          length: 5
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 63233
                            length: 15
                          pos: 63199
                          length: 483
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: method_invocation
                                    fields:
                                      text: n.isExprResult()
                                    children: []
                                    pos: 63285
                                    length: 16
                                children: []
                                pos: 63284
                                length: 18
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: local_variable_declaration
                                fields:
                                  text: Node child = n.getFirstChild();
                                children: []
                                pos: 63315
                                length: 31
                              - type: switch_expression
                                fields:
                                  condition:
                                    type: parenthesized_expression
                                    fields:
                                      expression:
                                        type: method_invocation
                                        fields:
                                          text: child.getType()
                                        children: []
                                        pos: 63365
                                        length: 15
                                    children: []
                                    pos: 63364
                                    length: 17
                                  body:
                                    type: switch_block
                                    fields:
                                      text: |-
                                        {
                                                    case Token.ASSIGN:
                                                      maybeCollectMember(t, child.getFirstChild(), child,
                                                          child.getLastChild());
                                                      break;
                                                    case Token.GETPROP:
                                                      maybeCollectMember(t, child, child, null);
                                                      break;
                                                  }
                                    children: []
                                    pos: 63382
                                    length: 282
                                children: []
                                pos: 63357
                                length: 307
                              pos: 63303
                              length: 371
                            pos: 63281
                            length: 393
                          pos: 63271
                          length: 411
                      children: []
                      pos: 63199
                      length: 483
                    - type: method_declaration
                      fields:
                        name:
                          type: identifier
                          fields:
                            text: maybeCollectMember
                          children: []
                          pos: 63703
                          length: 18
                        parameters:
                          type: method_parameters
                          fields: {}
                          children:
                          - type: formal_parameter
                            fields:
                              text: NodeTraversal t
                            children: []
                            pos: 63722
                            length: 15
                          pos: 63690
                          length: 899
                        body:
                          type: block
                          fields: {}
                          children:
                          - type: local_variable_declaration
                            fields:
                              text: JSDocInfo info = nodeWithJsDocInfo.getJSDocInfo();
                            children: []
                            pos: 63818
                            length: 50
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: or
                                    fields:
                                      left:
                                        type: or
                                        fields:
                                          left:
                                            type: equals
                                            fields:
                                              left:
                                                type: identifier
                                                fields:
                                                  text: info
                                                children: []
                                                pos: 64068
                                                length: 4
                                              right:
                                                type: null_literal
                                                fields: {}
                                                children: []
                                                pos: 64076
                                                length: 4
                                            children: []
                                            pos: 64068
                                            length: 12
                                          right:
                                            type: unary_expression
                                            fields:
                                              text: "!member.isGetProp()"
                                            children: []
                                            pos: 64096
                                            length: 19
                                        children: []
                                        pos: 64068
                                        length: 47
                                      right:
                                        type: unary_expression
                                        fields:
                                          text: "!member.getFirstChild().isThis()"
                                        children: []
                                        pos: 64131
                                        length: 32
                                    children: []
                                    pos: 64068
                                    length: 95
                                children: []
                                pos: 64067
                                length: 97
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: return_statement
                                fields:
                                  text: return;
                                children: []
                                pos: 64177
                                length: 7
                              pos: 64165
                              length: 29
                            pos: 64064
                            length: 130
                          - type: expression_statement
                            fields:
                              text: member.getFirstChild().setJSType(thisType);
                            children: []
                            pos: 64204
                            length: 43
                          - type: local_variable_declaration
                            fields:
                              text: JSType jsType = getDeclaredType(t.getSourceName(),
                                info, member, value);
                            children: []
                            pos: 64256
                            length: 72
                          - type: local_variable_declaration
                            fields:
                              text: Node name = member.getLastChild();
                            children: []
                            pos: 64337
                            length: 34
                          - type: if_statement
                            fields:
                              condition:
                                type: parenthesized_expression
                                fields:
                                  expression:
                                    type: and
                                    fields:
                                      left:
                                        type: not_equals
                                        fields:
                                          left:
                                            type: identifier
                                            fields:
                                              text: jsType
                                            children: []
                                            pos: 64384
                                            length: 6
                                          right:
                                            type: null_literal
                                            fields: {}
                                            children: []
                                            pos: 64394
                                            length: 4
                                        children: []
                                        pos: 64384
                                        length: 14
                                      right:
                                        type: parenthesized_expression
                                        fields:
                                          expression:
                                            type: or
                                            fields:
                                              left:
                                                type: method_invocation
                                                fields:
                                                  text: name.isName()
                                                children: []
                                                pos: 64415
                                                length: 13
                                              right:
                                                type: method_invocation
                                                fields:
                                                  text: name.isString()
                                                children: []
                                                pos: 64432
                                                length: 15
                                            children: []
                                            pos: 64415
                                            length: 32
                                        children: []
                                        pos: 64414
                                        length: 34
                                    children: []
                                    pos: 64384
                                    length: 64
                                children: []
                                pos: 64383
                                length: 66
                            children:
                            - type: block
                              fields: {}
                              children:
                              - type: expression_statement
                                fields:
                                  text: |-
                                    thisType.defineDeclaredProperty(
                                                  name.getString(),
                                                  jsType,
                                                  member);
                                children: []
                                pos: 64462
                                length: 109
                              pos: 64450
                              length: 131
                            pos: 64380
                            length: 201
                          pos: 63808
                          length: 781
                      children: []
                      pos: 63690
                      length: 899
                    pos: 62972
                    length: 1623
                children: []
                pos: 62972
                length: 1623
              pos: 16084
              length: 48540
          children: []
          pos: 16084
          length: 48540
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: StubDeclaration
              children: []
              pos: 64721
              length: 15
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final Node node;
                children: []
                pos: 64743
                length: 24
              - type: field_declaration
                fields:
                  text: private final boolean isExtern;
                children: []
                pos: 64772
                length: 31
              - type: field_declaration
                fields:
                  text: private final String ownerName;
                children: []
                pos: 64808
                length: 31
              - type: constructor_declaration
                fields:
                  text: |-
                    private StubDeclaration(Node node, boolean isExtern, String ownerName) {
                          this.node = node;
                          this.isExtern = isExtern;
                          this.ownerName = ownerName;
                        }
                children: []
                pos: 64845
                length: 168
              pos: 64694
              length: 323
          children: []
          pos: 64694
          length: 323
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: GlobalScopeBuilder
              children: []
              pos: 65152
              length: 18
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private GlobalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 65207
                length: 67
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 65546
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 65552
                      length: 15
                    pos: 65524
                    length: 330
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 65598
                      length: 26
                    - type: switch_expression
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: n.getType()
                              children: []
                              pos: 65640
                              length: 11
                          children: []
                          pos: 65639
                          length: 13
                        body:
                          type: switch_block
                          fields:
                            text: |-
                              {

                                      case Token.VAR:
                                        // Handle typedefs.
                                        if (n.hasOneChild()) {
                                          checkForTypedef(t, n.getFirstChild(), n.getJSDocInfo());
                                        }
                                        break;
                                    }
                          children: []
                          pos: 65653
                          length: 195
                      children: []
                      pos: 65632
                      length: 216
                    pos: 65590
                    length: 264
                children: []
                pos: 65524
                length: 330
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: maybeDeclareQualifiedName
                    children: []
                    pos: 65879
                    length: 25
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 65914
                      length: 15
                    pos: 65860
                    length: 242
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: checkForTypedef(t, n, info);
                      children: []
                      pos: 65999
                      length: 28
                    - type: expression_statement
                      fields:
                        text: super.maybeDeclareQualifiedName(t, info, n, parent,
                          rhsValue);
                      children: []
                      pos: 66034
                      length: 62
                    pos: 65991
                    length: 111
                children: []
                pos: 65860
                length: 242
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: checkForTypedef
                    children: []
                    pos: 66282
                    length: 15
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 66307
                      length: 15
                    pos: 66269
                    length: 959
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: or
                              fields:
                                left:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: info
                                      children: []
                                      pos: 66368
                                      length: 4
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 66376
                                      length: 4
                                  children: []
                                  pos: 66368
                                  length: 12
                                right:
                                  type: unary_expression
                                  fields:
                                    text: "!info.hasTypedefType()"
                                  children: []
                                  pos: 66384
                                  length: 22
                              children: []
                              pos: 66368
                              length: 38
                          children: []
                          pos: 66367
                          length: 40
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 66418
                          length: 7
                        pos: 66408
                        length: 25
                      pos: 66364
                      length: 69
                    - type: local_variable_declaration
                      fields:
                        text: String typedef = candidate.getQualifiedName();
                      children: []
                      pos: 66441
                      length: 46
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: typedef
                                  children: []
                                  pos: 66498
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 66509
                                  length: 4
                              children: []
                              pos: 66498
                              length: 15
                          children: []
                          pos: 66497
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 66525
                          length: 7
                        pos: 66515
                        length: 25
                      pos: 66494
                      length: 46
                    - type: expression_statement
                      fields:
                        text: typeRegistry.declareType(typedef, getNativeType(UNKNOWN_TYPE));
                      children: []
                      pos: 66714
                      length: 63
                    - type: local_variable_declaration
                      fields:
                        text: JSType realType = info.getTypedefType().evaluate(scope,
                          typeRegistry);
                      children: []
                      pos: 66785
                      length: 70
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: realType
                                  children: []
                                  pos: 66866
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 66878
                                  length: 4
                              children: []
                              pos: 66866
                              length: 16
                          children: []
                          pos: 66865
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              compiler.report(
                                          JSError.make(
                                              t.getSourceName(), candidate, MALFORMED_TYPEDEF, typedef));
                          children: []
                          pos: 66894
                          length: 118
                        pos: 66884
                        length: 136
                      pos: 66862
                      length: 158
                    - type: expression_statement
                      fields:
                        text: typeRegistry.overwriteDeclaredType(typedef, realType);
                      children: []
                      pos: 67028
                      length: 54
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: candidate.isGetProp()
                              children: []
                              pos: 67093
                              length: 21
                          children: []
                          pos: 67092
                          length: 23
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: |-
                              defineSlot(candidate, candidate.getParent(),
                                          getNativeType(NO_TYPE), false);
                          children: []
                          pos: 67126
                          length: 88
                        pos: 67116
                        length: 106
                      pos: 67089
                      length: 133
                    pos: 66356
                    length: 872
                children: []
                pos: 66269
                length: 959
              pos: 65132
              length: 2100
          children: []
          pos: 65132
          length: 2100
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: LocalScopeBuilder
              children: []
              pos: 67384
              length: 17
            body:
              type: class_body
              fields: {}
              children:
              - type: constructor_declaration
                fields:
                  text: |-
                    private LocalScopeBuilder(Scope scope) {
                          super(scope);
                        }
                children: []
                pos: 67504
                length: 66
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: build
                    children: []
                    pos: 67642
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children: []
                    pos: 67637
                    length: 422
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: expression_statement
                      fields:
                        text: NodeTraversal.traverse(compiler, scope.getRootNode(),
                          this);
                      children: []
                      pos: 67658
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          AstFunctionContents contents =
                                    getFunctionAnalysisResults(scope.getRootNode());
                      children: []
                      pos: 67726
                      length: 89
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: contents
                                  children: []
                                  pos: 67826
                                  length: 8
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 67838
                                  length: 4
                              children: []
                              pos: 67826
                              length: 16
                          children: []
                          pos: 67825
                          length: 18
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: enhanced_for_statement
                          fields:
                            text: |-
                              for (String varName : contents.getEscapedVarNames()) {
                                        Var v = scope.getVar(varName);
                                        Preconditions.checkState(v.getScope() == scope);
                                        v.markEscaped();
                                      }
                          children: []
                          pos: 67854
                          length: 191
                        pos: 67844
                        length: 209
                      pos: 67822
                      length: 231
                    pos: 67650
                    length: 409
                children: []
                pos: 67637
                length: 422
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 68345
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 68351
                      length: 15
                    pos: 68323
                    length: 276
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: "n"
                                  children: []
                                  pos: 68401
                                  length: 1
                                right:
                                  type: method_invocation
                                  fields:
                                    text: scope.getRootNode()
                                  children: []
                                  pos: 68406
                                  length: 19
                              children: []
                              pos: 68401
                              length: 24
                          children: []
                          pos: 68400
                          length: 26
                      children:
                      - type: return_statement
                        fields:
                          text: return;
                        children: []
                        pos: 68427
                        length: 7
                      pos: 68397
                      length: 37
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isParamList()
                                  children: []
                                  pos: 68446
                                  length: 15
                                right:
                                  type: equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: parent
                                      children: []
                                      pos: 68465
                                      length: 6
                                    right:
                                      type: method_invocation
                                      fields:
                                        text: scope.getRootNode()
                                      children: []
                                      pos: 68475
                                      length: 19
                                  children: []
                                  pos: 68465
                                  length: 29
                              children: []
                              pos: 68446
                              length: 48
                          children: []
                          pos: 68445
                          length: 50
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: handleFunctionInputs(parent);
                          children: []
                          pos: 68506
                          length: 29
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 68544
                          length: 7
                        pos: 68496
                        length: 63
                      pos: 68442
                      length: 117
                    - type: expression_statement
                      fields:
                        text: super.visit(t, n, parent);
                      children: []
                      pos: 68567
                      length: 26
                    pos: 68389
                    length: 210
                children: []
                pos: 68323
                length: 276
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: handleFunctionInputs
                    children: []
                    pos: 68680
                    length: 20
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node fnNode
                      children: []
                      pos: 68701
                      length: 11
                    pos: 68667
                    length: 803
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node fnNameNode = fnNode.getFirstChild();
                      children: []
                      pos: 68758
                      length: 41
                    - type: local_variable_declaration
                      fields:
                        text: String fnName = fnNameNode.getString();
                      children: []
                      pos: 68806
                      length: 39
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!fnName.isEmpty()"
                              children: []
                              pos: 68856
                              length: 17
                          children: []
                          pos: 68855
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Scope.Var fnVar = scope.getVar(fnName);
                          children: []
                          pos: 68885
                          length: 39
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: or
                                  fields:
                                    left:
                                      type: equals
                                      fields:
                                        left:
                                          type: identifier
                                          fields:
                                            text: fnVar
                                          children: []
                                          pos: 68937
                                          length: 5
                                        right:
                                          type: null_literal
                                          fields: {}
                                          children: []
                                          pos: 68946
                                          length: 4
                                      children: []
                                      pos: 68937
                                      length: 13
                                    right:
                                      type: parenthesized_expression
                                      fields:
                                        expression:
                                          type: and
                                          fields:
                                            left:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getNameNode()
                                                  children: []
                                                  pos: 69131
                                                  length: 19
                                                right:
                                                  type: null_literal
                                                  fields: {}
                                                  children: []
                                                  pos: 69154
                                                  length: 4
                                              children: []
                                              pos: 69131
                                              length: 27
                                            right:
                                              type: not_equals
                                              fields:
                                                left:
                                                  type: method_invocation
                                                  fields:
                                                    text: fnVar.getInitialValue()
                                                  children: []
                                                  pos: 69307
                                                  length: 23
                                                right:
                                                  type: identifier
                                                  fields:
                                                    text: fnNode
                                                  children: []
                                                  pos: 69334
                                                  length: 6
                                              children: []
                                              pos: 69307
                                              length: 33
                                          children: []
                                          pos: 69131
                                          length: 209
                                      children: []
                                      pos: 69130
                                      length: 211
                                  children: []
                                  pos: 68937
                                  length: 404
                              children: []
                              pos: 68936
                              length: 406
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: expression_statement
                              fields:
                                text: defineSlot(fnNameNode, fnNode, fnNode.getJSType(),
                                  false);
                              children: []
                              pos: 69355
                              length: 58
                            pos: 69343
                            length: 80
                          pos: 68933
                          length: 490
                        pos: 68875
                        length: 556
                      pos: 68852
                      length: 579
                    - type: expression_statement
                      fields:
                        text: declareArguments(fnNode);
                      children: []
                      pos: 69439
                      length: 25
                    pos: 68714
                    length: 756
                children: []
                pos: 68667
                length: 803
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: declareArguments
                    children: []
                    pos: 69552
                    length: 16
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node functionNode
                      children: []
                      pos: 69569
                      length: 17
                    pos: 69539
                    length: 867
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: local_variable_declaration
                      fields:
                        text: Node astParameters = functionNode.getFirstChild().getNext();
                      children: []
                      pos: 69596
                      length: 60
                    - type: local_variable_declaration
                      fields:
                        text: Node body = astParameters.getNext();
                      children: []
                      pos: 69663
                      length: 36
                    - type: local_variable_declaration
                      fields:
                        text: |-
                          FunctionType functionType =
                                    JSType.toMaybeFunctionType(functionNode.getJSType());
                      children: []
                      pos: 69706
                      length: 91
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: not_equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: functionType
                                  children: []
                                  pos: 69808
                                  length: 12
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 69824
                                  length: 4
                              children: []
                              pos: 69808
                              length: 20
                          children: []
                          pos: 69807
                          length: 22
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node jsDocParameters = functionType.getParametersNode();
                          children: []
                          pos: 69840
                          length: 56
                        - type: if_statement
                          fields:
                            condition:
                              type: parenthesized_expression
                              fields:
                                expression:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: identifier
                                      fields:
                                        text: jsDocParameters
                                      children: []
                                      pos: 69909
                                      length: 15
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 69928
                                      length: 4
                                  children: []
                                  pos: 69909
                                  length: 23
                              children: []
                              pos: 69908
                              length: 25
                          children:
                          - type: block
                            fields: {}
                            children:
                            - type: local_variable_declaration
                              fields:
                                text: Node jsDocParameter = jsDocParameters.getFirstChild();
                              children: []
                              pos: 69946
                              length: 54
                            - type: enhanced_for_statement
                              fields:
                                text: |-
                                  for (Node astParameter : astParameters.children()) {
                                              if (jsDocParameter != null) {
                                                defineSlot(astParameter, functionNode,
                                                    jsDocParameter.getJSType(), false);
                                                jsDocParameter = jsDocParameter.getNext();
                                              } else {
                                                defineSlot(astParameter, functionNode, null, true);
                                              }
                                            }
                              children: []
                              pos: 70011
                              length: 371
                            pos: 69934
                            length: 458
                          pos: 69905
                          length: 487
                        pos: 69830
                        length: 570
                      pos: 69804
                      length: 596
                    pos: 69588
                    length: 818
                children: []
                pos: 69539
                length: 867
              pos: 67364
              length: 3070
          children: []
          pos: 67364
          length: 3070
        - type: class_declaration
          fields:
            name:
              type: identifier
              fields:
                text: FirstOrderFunctionAnalyzer
              children: []
              pos: 70637
              length: 26
            body:
              type: class_body
              fields: {}
              children:
              - type: field_declaration
                fields:
                  text: private final AbstractCompiler compiler;
                children: []
                pos: 70731
                length: 40
              - type: field_declaration
                fields:
                  text: private final Map<Node, AstFunctionContents> data;
                children: []
                pos: 70776
                length: 50
              - type: constructor_declaration
                fields:
                  text: |-
                    FirstOrderFunctionAnalyzer(
                            AbstractCompiler compiler, Map<Node, AstFunctionContents> outParam) {
                          this.compiler = compiler;
                          this.data = outParam;
                        }
                children: []
                pos: 70832
                length: 171
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: process
                    children: []
                    pos: 71031
                    length: 7
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: Node externs
                      children: []
                      pos: 71039
                      length: 12
                    pos: 71009
                    length: 267
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: equals
                              fields:
                                left:
                                  type: identifier
                                  fields:
                                    text: externs
                                  children: []
                                  pos: 71076
                                  length: 7
                                right:
                                  type: null_literal
                                  fields: {}
                                  children: []
                                  pos: 71087
                                  length: 4
                              children: []
                              pos: 71076
                              length: 15
                          children: []
                          pos: 71075
                          length: 17
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: NodeTraversal.traverse(compiler, root, this);
                          children: []
                          pos: 71103
                          length: 45
                        pos: 71093
                        length: 63
                      pos: 71072
                      length: 198
                    pos: 71064
                    length: 212
                children: []
                pos: 71009
                length: 267
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: enterScope
                    children: []
                    pos: 71304
                    length: 10
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71315
                      length: 15
                    pos: 71282
                    length: 181
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: unary_expression
                              fields:
                                text: "!t.inGlobalScope()"
                              children: []
                              pos: 71344
                              length: 18
                          children: []
                          pos: 71343
                          length: 20
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: local_variable_declaration
                          fields:
                            text: Node n = t.getScopeRoot();
                          children: []
                          pos: 71374
                          length: 26
                        - type: expression_statement
                          fields:
                            text: data.put(n, new AstFunctionContents(n));
                          children: []
                          pos: 71409
                          length: 40
                        pos: 71364
                        length: 93
                      pos: 71340
                      length: 117
                    pos: 71332
                    length: 131
                children: []
                pos: 71282
                length: 181
              - type: method_declaration
                fields:
                  name:
                    type: identifier
                    fields:
                      text: visit
                    children: []
                    pos: 71491
                    length: 5
                  parameters:
                    type: method_parameters
                    fields: {}
                    children:
                    - type: formal_parameter
                      fields:
                        text: NodeTraversal t
                      children: []
                      pos: 71497
                      length: 15
                    pos: 71469
                    length: 647
                  body:
                    type: block
                    fields: {}
                    children:
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: method_invocation
                              fields:
                                text: t.inGlobalScope()
                              children: []
                              pos: 71547
                              length: 17
                          children: []
                          pos: 71546
                          length: 19
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: return_statement
                          fields:
                            text: return;
                          children: []
                          pos: 71576
                          length: 7
                        pos: 71566
                        length: 25
                      pos: 71543
                      length: 48
                    - type: if_statement
                      fields:
                        condition:
                          type: parenthesized_expression
                          fields:
                            expression:
                              type: and
                              fields:
                                left:
                                  type: method_invocation
                                  fields:
                                    text: n.isReturn()
                                  children: []
                                  pos: 71603
                                  length: 12
                                right:
                                  type: not_equals
                                  fields:
                                    left:
                                      type: method_invocation
                                      fields:
                                        text: n.getFirstChild()
                                      children: []
                                      pos: 71619
                                      length: 17
                                    right:
                                      type: null_literal
                                      fields: {}
                                      children: []
                                      pos: 71640
                                      length: 4
                                  children: []
                                  pos: 71619
                                  length: 25
                              children: []
                              pos: 71603
                              length: 41
                          children: []
                          pos: 71602
                          length: 43
                      children:
                      - type: block
                        fields: {}
                        children:
                        - type: expression_statement
                          fields:
                            text: data.get(t.getScopeRoot()).recordNonEmptyReturn();
                          children: []
                          pos: 71656
                          length: 50
                        pos: 71646
                        length: 68
                      pos: 71599
                      length: 511
                    pos: 71535
                    length: 581
                children: []
                pos: 71469
                length: 647
              pos: 70616
              length: 1504
          children: []
          pos: 70616
          length: 1504
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getFunctionAnalysisResults
              children: []
              pos: 72152
              length: 26
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: "@Nullable Node n"
                children: []
                pos: 72179
                length: 16
              pos: 72124
              length: 287
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: "n"
                            children: []
                            pos: 72207
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 72212
                            length: 4
                        children: []
                        pos: 72207
                        length: 9
                    children: []
                    pos: 72206
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 72226
                    length: 12
                  pos: 72218
                  length: 26
                pos: 72203
                length: 41
              - type: return_statement
                fields:
                  text: return functionAnalysisResults.get(n);
                children: []
                pos: 72369
                length: 38
              pos: 72197
              length: 214
          children: []
          pos: 72124
          length: 287
        pos: 5032
        length: 67381
    children: []
    pos: 5032
    length: 67381
  pos: 0
  length: 72414
text_diff: "--- before\n+++ after\n@@ -417,7 +417,6 @@\n      * For more information,
  see\n      * http://code.google.com/p/closure-compiler/issues/detail?id=314\n      */\n-
  \   private List<Node> lentObjectLiterals = null;\n \n     /**\n      * Type-less
  stubs.\n@@ -545,13 +544,6 @@\n       }\n \n       // Analyze any @lends object literals
  in this statement.\n-      if (n.getParent() != null && NodeUtil.isStatement(n)
  &&\n-          lentObjectLiterals != null) {\n-        for (Node objLit : lentObjectLiterals)
  {\n-          defineObjectLiteral(objLit);\n-        }\n-        lentObjectLiterals.clear();\n-
  \     }\n     }\n \n     private void attachLiteralTypes(NodeTraversal t, Node n)
  {\n@@ -585,16 +577,7 @@\n           break;\n \n         case Token.OBJECTLIT:\n-
  \         JSDocInfo info = n.getJSDocInfo();\n-          if (info != null &&\n-
  \             info.getLendsName() != null) {\n-            if (lentObjectLiterals
  == null) {\n-              lentObjectLiterals = Lists.newArrayList();\n-            }\n-
  \           lentObjectLiterals.add(n);\n-          } else {\n             defineObjectLiteral(n);\n-
  \         }\n           break;\n \n           // NOTE(nicksantos): If we ever support
  Array tuples,\n"
tree_diff: |+
  New cluster:
  UPDATE from {
          case Token.NULL:
            n.setJSType(getNativeType(NULL_TYPE));
            break;

          case Token.VOID:
            n.setJSType(getNativeType(VOID_TYPE));
            break;

          case Token.STRING:
            // Defer keys to the Token.OBJECTLIT case
            if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
              n.setJSType(getNativeType(STRING_TYPE));
            }
            break;

          case Token.NUMBER:
            n.setJSType(getNativeType(NUMBER_TYPE));
            break;

          case Token.TRUE:
          case Token.FALSE:
            n.setJSType(getNativeType(BOOLEAN_TYPE));
            break;

          case Token.REGEXP:
            n.setJSType(getNativeType(REGEXP_TYPE));
            break;

          case Token.OBJECTLIT:
            JSDocInfo info = n.getJSDocInfo();
            if (info != null &&
                info.getLendsName() != null) {
              if (lentObjectLiterals == null) {
                lentObjectLiterals = Lists.newArrayList();
              }
              lentObjectLiterals.add(n);
            } else {
              defineObjectLiteral(n);
            }
            break;

            // NOTE(nicksantos): If we ever support Array tuples,
            // we will need to put ARRAYLIT here as well.
        } to {
          case Token.NULL:
            n.setJSType(getNativeType(NULL_TYPE));
            break;

          case Token.VOID:
            n.setJSType(getNativeType(VOID_TYPE));
            break;

          case Token.STRING:
            // Defer keys to the Token.OBJECTLIT case
            if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
              n.setJSType(getNativeType(STRING_TYPE));
            }
            break;

          case Token.NUMBER:
            n.setJSType(getNativeType(NUMBER_TYPE));
            break;

          case Token.TRUE:
          case Token.FALSE:
            n.setJSType(getNativeType(BOOLEAN_TYPE));
            break;

          case Token.REGEXP:
            n.setJSType(getNativeType(REGEXP_TYPE));
            break;

          case Token.OBJECTLIT:
              defineObjectLiteral(n);
            break;

            // NOTE(nicksantos): If we ever support Array tuples,
            // we will need to put ARRAYLIT here as well.
        }
  ------------
  ===
  update-node
  ---
  switch_block: {
          case Token.NULL:
            n.setJSType(getNativeType(NULL_TYPE));
            break;

          case Token.VOID:
            n.setJSType(getNativeType(VOID_TYPE));
            break;

          case Token.STRING:
            // Defer keys to the Token.OBJECTLIT case
            if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
              n.setJSType(getNativeType(STRING_TYPE));
            }
            break;

          case Token.NUMBER:
            n.setJSType(getNativeType(NUMBER_TYPE));
            break;

          case Token.TRUE:
          case Token.FALSE:
            n.setJSType(getNativeType(BOOLEAN_TYPE));
            break;

          case Token.REGEXP:
            n.setJSType(getNativeType(REGEXP_TYPE));
            break;

          case Token.OBJECTLIT:
            JSDocInfo info = n.getJSDocInfo();
            if (info != null &&
                info.getLendsName() != null) {
              if (lentObjectLiterals == null) {
                lentObjectLiterals = Lists.newArrayList();
              }
              lentObjectLiterals.add(n);
            } else {
              defineObjectLiteral(n);
            }
            break;

            // NOTE(nicksantos): If we ever support Array tuples,
            // we will need to put ARRAYLIT here as well.
        } [21024,22263]
  replace {
          case Token.NULL:
            n.setJSType(getNativeType(NULL_TYPE));
            break;

          case Token.VOID:
            n.setJSType(getNativeType(VOID_TYPE));
            break;

          case Token.STRING:
            // Defer keys to the Token.OBJECTLIT case
            if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
              n.setJSType(getNativeType(STRING_TYPE));
            }
            break;

          case Token.NUMBER:
            n.setJSType(getNativeType(NUMBER_TYPE));
            break;

          case Token.TRUE:
          case Token.FALSE:
            n.setJSType(getNativeType(BOOLEAN_TYPE));
            break;

          case Token.REGEXP:
            n.setJSType(getNativeType(REGEXP_TYPE));
            break;

          case Token.OBJECTLIT:
            JSDocInfo info = n.getJSDocInfo();
            if (info != null &&
                info.getLendsName() != null) {
              if (lentObjectLiterals == null) {
                lentObjectLiterals = Lists.newArrayList();
              }
              lentObjectLiterals.add(n);
            } else {
              defineObjectLiteral(n);
            }
            break;

            // NOTE(nicksantos): If we ever support Array tuples,
            // we will need to put ARRAYLIT here as well.
        } by {
          case Token.NULL:
            n.setJSType(getNativeType(NULL_TYPE));
            break;

          case Token.VOID:
            n.setJSType(getNativeType(VOID_TYPE));
            break;

          case Token.STRING:
            // Defer keys to the Token.OBJECTLIT case
            if (!NodeUtil.isObjectLitKey(n, n.getParent())) {
              n.setJSType(getNativeType(STRING_TYPE));
            }
            break;

          case Token.NUMBER:
            n.setJSType(getNativeType(NUMBER_TYPE));
            break;

          case Token.TRUE:
          case Token.FALSE:
            n.setJSType(getNativeType(BOOLEAN_TYPE));
            break;

          case Token.REGEXP:
            n.setJSType(getNativeType(REGEXP_TYPE));
            break;

          case Token.OBJECTLIT:
              defineObjectLiteral(n);
            break;

            // NOTE(nicksantos): If we ever support Array tuples,
            // we will need to put ARRAYLIT here as well.
        }

  New cluster:
  ===
  delete-node
  ---
  field_declaration: private List<Node> lentObjectLiterals = null; [16914,16959]
  ===
  ------------
  ===
  delete-node
  ---
  field_declaration: private List<Node> lentObjectLiterals = null; [16914,16959]
  ===

  New cluster:
  Unknown cluster type
  ------------
  ===
  delete-tree
  ---
  if_statement [20689,20926]
      parenthesized_expression [20692,20782]
          and [20693,20781]
              and [20693,20741]
                  not_equals [20693,20714]
                      method_invocation: n.getParent() [20693,20706]
                      null_literal [20710,20714]
                  method_invocation: NodeUtil.isStatement(n) [20718,20741]
              not_equals [20755,20781]
                  identifier: lentObjectLiterals [20755,20773]
                  null_literal [20777,20781]
      block [20783,20926]
          enhanced_for_statement: for (Node objLit : lentObjectLiterals) {
            defineObjectLiteral(objLit);
          } [20793,20882]
          expression_statement: lentObjectLiterals.clear(); [20891,20918]

...
