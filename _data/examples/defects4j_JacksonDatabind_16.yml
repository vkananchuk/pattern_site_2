---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: AnnotationMap
        children: []
        pos: 419
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected HashMap<Class<? extends Annotation>,Annotation> _annotations;
          children: []
          pos: 462
          length: 71
        - type: constructor_declaration
          fields:
            text: public AnnotationMap() { }
          children: []
          pos: 539
          length: 26
        - type: constructor_declaration
          fields:
            text: |-
              private AnnotationMap(HashMap<Class<? extends Annotation>,Annotation> a) {
                      _annotations = a;
                  }
          children: []
          pos: 575
          length: 106
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: get
              children: []
              pos: 768
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<A> cls
                children: []
                pos: 772
                length: 12
              pos: 687
              length: 223
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _annotations
                            children: []
                            pos: 804
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 820
                            length: 4
                        children: []
                        pos: 804
                        length: 20
                    children: []
                    pos: 803
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 840
                    length: 12
                  pos: 826
                  length: 36
                pos: 800
                length: 62
              - type: return_statement
                fields:
                  text: return (A) _annotations.get(cls);
                children: []
                pos: 871
                length: 33
              pos: 790
              length: 120
          children: []
          pos: 687
          length: 223
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: annotations
              children: []
              pos: 978
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 950
              length: 205
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: _annotations
                                children: []
                                pos: 1006
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 1022
                                length: 4
                            children: []
                            pos: 1006
                            length: 20
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: _annotations.size()
                                children: []
                                pos: 1030
                                length: 19
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 1053
                                length: 1
                            children: []
                            pos: 1030
                            length: 24
                        children: []
                        pos: 1006
                        length: 48
                    children: []
                    pos: 1005
                    length: 50
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.emptyList();
                    children: []
                    pos: 1070
                    length: 31
                  pos: 1056
                  length: 55
                pos: 1002
                length: 109
              - type: return_statement
                fields:
                  text: return _annotations.values();
                children: []
                pos: 1120
                length: 29
              pos: 992
              length: 163
          children: []
          pos: 950
          length: 205
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: merge
              children: []
              pos: 1193
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: AnnotationMap primary
                children: []
                pos: 1199
                length: 21
              pos: 1165
              length: 895
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: primary
                                    children: []
                                    pos: 1265
                                    length: 7
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1276
                                    length: 4
                                children: []
                                pos: 1265
                                length: 15
                              right:
                                type: equals
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: primary._annotations
                                    children: []
                                    pos: 1284
                                    length: 20
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1308
                                    length: 4
                                children: []
                                pos: 1284
                                length: 28
                            children: []
                            pos: 1265
                            length: 47
                          right:
                            type: method_invocation
                            fields:
                              text: primary._annotations.isEmpty()
                            children: []
                            pos: 1316
                            length: 30
                        children: []
                        pos: 1265
                        length: 81
                    children: []
                    pos: 1264
                    length: 83
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return secondary;
                    children: []
                    pos: 1362
                    length: 17
                  pos: 1348
                  length: 41
                pos: 1261
                length: 128
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: secondary
                                    children: []
                                    pos: 1402
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1415
                                    length: 4
                                children: []
                                pos: 1402
                                length: 17
                              right:
                                type: equals
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: secondary._annotations
                                    children: []
                                    pos: 1423
                                    length: 22
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1449
                                    length: 4
                                children: []
                                pos: 1423
                                length: 30
                            children: []
                            pos: 1402
                            length: 51
                          right:
                            type: method_invocation
                            fields:
                              text: secondary._annotations.isEmpty()
                            children: []
                            pos: 1457
                            length: 32
                        children: []
                        pos: 1402
                        length: 87
                    children: []
                    pos: 1401
                    length: 89
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return primary;
                    children: []
                    pos: 1505
                    length: 15
                  pos: 1491
                  length: 39
                pos: 1398
                length: 132
              - type: local_variable_declaration
                fields:
                  text: |-
                    HashMap<Class<? extends Annotation>,Annotation> annotations
                                = new HashMap<Class<? extends Annotation>,Annotation>();
                children: []
                pos: 1539
                length: 128
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Annotation ann : secondary._annotations.values()) {
                                annotations.put(ann.annotationType(), ann);
                            }
                children: []
                pos: 1712
                length: 122
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Annotation ann : primary._annotations.values()) {
                                annotations.put(ann.annotationType(), ann);
                            }
                children: []
                pos: 1887
                length: 120
              - type: return_statement
                fields:
                  text: return new AnnotationMap(annotations);
                children: []
                pos: 2016
                length: 38
              pos: 1251
              length: 809
          children: []
          pos: 1165
          length: 895
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: size
              children: []
              pos: 2095
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2070
              length: 104
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return (_annotations == null) ? 0 : _annotations.size();'
                children: []
                pos: 2112
                length: 56
              pos: 2102
              length: 72
          children: []
          pos: 2070
          length: 104
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addIfNotPresent
              children: []
              pos: 2312
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Annotation ann
                children: []
                pos: 2328
                length: 14
              pos: 2297
              length: 225
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: _annotations
                                children: []
                                pos: 2362
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 2378
                                length: 4
                            children: []
                            pos: 2362
                            length: 20
                          right:
                            type: unary_expression
                            fields:
                              text: "!_annotations.containsKey(ann.annotationType())"
                            children: []
                            pos: 2386
                            length: 47
                        children: []
                        pos: 2362
                        length: 71
                    children: []
                    pos: 2361
                    length: 73
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _add(ann);
                    children: []
                    pos: 2449
                    length: 10
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 2472
                    length: 12
                  pos: 2435
                  length: 59
                pos: 2358
                length: 136
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 2503
                length: 13
              pos: 2348
              length: 174
          children: []
          pos: 2297
          length: 225
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: add
              children: []
              pos: 2755
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Annotation ann
                children: []
                pos: 2759
                length: 14
              pos: 2740
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _add(ann);
                children: []
                pos: 2785
                length: 17
              pos: 2775
              length: 33
          children: []
          pos: 2740
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 2842
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2814
              length: 161
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _annotations
                            children: []
                            pos: 2867
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2883
                            length: 4
                        children: []
                        pos: 2867
                        length: 20
                    children: []
                    pos: 2866
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return "[null]";
                    children: []
                    pos: 2903
                    length: 16
                  pos: 2889
                  length: 40
                pos: 2863
                length: 66
              - type: return_statement
                fields:
                  text: return _annotations.toString();
                children: []
                pos: 2938
                length: 31
              pos: 2853
              length: 122
          children: []
          pos: 2814
          length: 161
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _add
              children: []
              pos: 3171
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Annotation ann
                children: []
                pos: 3176
                length: 14
              pos: 3147
              length: 315
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _annotations
                            children: []
                            pos: 3206
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3222
                            length: 4
                        children: []
                        pos: 3206
                        length: 20
                    children: []
                    pos: 3205
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _annotations = new HashMap<Class<? extends Annotation>,Annotation>();
                    children: []
                    pos: 3242
                    length: 69
                  pos: 3228
                  length: 93
                pos: 3202
                length: 119
              - type: local_variable_declaration
                fields:
                  text: Annotation previous = _annotations.put(ann.annotationType(),
                    ann);
                children: []
                pos: 3330
                length: 66
              - type: return_statement
                fields:
                  text: return (previous == null) || !previous.equals(ann);
                children: []
                pos: 3405
                length: 51
              pos: 3192
              length: 270
          children: []
          pos: 3147
          length: 315
        pos: 400
        length: 3064
    children: []
    pos: 400
    length: 3064
  pos: 0
  length: 3467
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: AnnotationMap
        children: []
        pos: 419
        length: 13
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: protected HashMap<Class<? extends Annotation>,Annotation> _annotations;
          children: []
          pos: 462
          length: 71
        - type: constructor_declaration
          fields:
            text: public AnnotationMap() { }
          children: []
          pos: 539
          length: 26
        - type: constructor_declaration
          fields:
            text: |-
              private AnnotationMap(HashMap<Class<? extends Annotation>,Annotation> a) {
                      _annotations = a;
                  }
          children: []
          pos: 575
          length: 106
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: get
              children: []
              pos: 768
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<A> cls
                children: []
                pos: 772
                length: 12
              pos: 687
              length: 223
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _annotations
                            children: []
                            pos: 804
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 820
                            length: 4
                        children: []
                        pos: 804
                        length: 20
                    children: []
                    pos: 803
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return null;
                    children: []
                    pos: 840
                    length: 12
                  pos: 826
                  length: 36
                pos: 800
                length: 62
              - type: return_statement
                fields:
                  text: return (A) _annotations.get(cls);
                children: []
                pos: 871
                length: 33
              pos: 790
              length: 120
          children: []
          pos: 687
          length: 223
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: annotations
              children: []
              pos: 978
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 950
              length: 205
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: _annotations
                                children: []
                                pos: 1006
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 1022
                                length: 4
                            children: []
                            pos: 1006
                            length: 20
                          right:
                            type: equals
                            fields:
                              left:
                                type: method_invocation
                                fields:
                                  text: _annotations.size()
                                children: []
                                pos: 1030
                                length: 19
                              right:
                                type: decimal_integer_literal
                                fields:
                                  text: '0'
                                children: []
                                pos: 1053
                                length: 1
                            children: []
                            pos: 1030
                            length: 24
                        children: []
                        pos: 1006
                        length: 48
                    children: []
                    pos: 1005
                    length: 50
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return Collections.emptyList();
                    children: []
                    pos: 1070
                    length: 31
                  pos: 1056
                  length: 55
                pos: 1002
                length: 109
              - type: return_statement
                fields:
                  text: return _annotations.values();
                children: []
                pos: 1120
                length: 29
              pos: 992
              length: 163
          children: []
          pos: 950
          length: 205
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: merge
              children: []
              pos: 1193
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: AnnotationMap primary
                children: []
                pos: 1199
                length: 21
              pos: 1165
              length: 895
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: primary
                                    children: []
                                    pos: 1265
                                    length: 7
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1276
                                    length: 4
                                children: []
                                pos: 1265
                                length: 15
                              right:
                                type: equals
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: primary._annotations
                                    children: []
                                    pos: 1284
                                    length: 20
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1308
                                    length: 4
                                children: []
                                pos: 1284
                                length: 28
                            children: []
                            pos: 1265
                            length: 47
                          right:
                            type: method_invocation
                            fields:
                              text: primary._annotations.isEmpty()
                            children: []
                            pos: 1316
                            length: 30
                        children: []
                        pos: 1265
                        length: 81
                    children: []
                    pos: 1264
                    length: 83
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return secondary;
                    children: []
                    pos: 1362
                    length: 17
                  pos: 1348
                  length: 41
                pos: 1261
                length: 128
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: or
                            fields:
                              left:
                                type: equals
                                fields:
                                  left:
                                    type: identifier
                                    fields:
                                      text: secondary
                                    children: []
                                    pos: 1402
                                    length: 9
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1415
                                    length: 4
                                children: []
                                pos: 1402
                                length: 17
                              right:
                                type: equals
                                fields:
                                  left:
                                    type: field_access
                                    fields:
                                      text: secondary._annotations
                                    children: []
                                    pos: 1423
                                    length: 22
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 1449
                                    length: 4
                                children: []
                                pos: 1423
                                length: 30
                            children: []
                            pos: 1402
                            length: 51
                          right:
                            type: method_invocation
                            fields:
                              text: secondary._annotations.isEmpty()
                            children: []
                            pos: 1457
                            length: 32
                        children: []
                        pos: 1402
                        length: 87
                    children: []
                    pos: 1401
                    length: 89
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return primary;
                    children: []
                    pos: 1505
                    length: 15
                  pos: 1491
                  length: 39
                pos: 1398
                length: 132
              - type: local_variable_declaration
                fields:
                  text: |-
                    HashMap<Class<? extends Annotation>,Annotation> annotations
                                = new HashMap<Class<? extends Annotation>,Annotation>();
                children: []
                pos: 1539
                length: 128
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Annotation ann : secondary._annotations.values()) {
                                annotations.put(ann.annotationType(), ann);
                            }
                children: []
                pos: 1712
                length: 122
              - type: enhanced_for_statement
                fields:
                  text: |-
                    for (Annotation ann : primary._annotations.values()) {
                                annotations.put(ann.annotationType(), ann);
                            }
                children: []
                pos: 1887
                length: 120
              - type: return_statement
                fields:
                  text: return new AnnotationMap(annotations);
                children: []
                pos: 2016
                length: 38
              pos: 1251
              length: 809
          children: []
          pos: 1165
          length: 895
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: size
              children: []
              pos: 2095
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2070
              length: 104
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: 'return (_annotations == null) ? 0 : _annotations.size();'
                children: []
                pos: 2112
                length: 56
              pos: 2102
              length: 72
          children: []
          pos: 2070
          length: 104
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: addIfNotPresent
              children: []
              pos: 2312
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Annotation ann
                children: []
                pos: 2328
                length: 14
              pos: 2297
              length: 225
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: or
                        fields:
                          left:
                            type: equals
                            fields:
                              left:
                                type: identifier
                                fields:
                                  text: _annotations
                                children: []
                                pos: 2362
                                length: 12
                              right:
                                type: null_literal
                                fields: {}
                                children: []
                                pos: 2378
                                length: 4
                            children: []
                            pos: 2362
                            length: 20
                          right:
                            type: unary_expression
                            fields:
                              text: "!_annotations.containsKey(ann.annotationType())"
                            children: []
                            pos: 2386
                            length: 47
                        children: []
                        pos: 2362
                        length: 71
                    children: []
                    pos: 2361
                    length: 73
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _add(ann);
                    children: []
                    pos: 2449
                    length: 10
                  - type: return_statement
                    fields:
                      text: return true;
                    children: []
                    pos: 2472
                    length: 12
                  pos: 2435
                  length: 59
                pos: 2358
                length: 136
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 2503
                length: 13
              pos: 2348
              length: 174
          children: []
          pos: 2297
          length: 225
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: add
              children: []
              pos: 2755
              length: 3
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Annotation ann
                children: []
                pos: 2759
                length: 14
              pos: 2740
              length: 68
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _add(ann);
                children: []
                pos: 2785
                length: 17
              pos: 2775
              length: 33
          children: []
          pos: 2740
          length: 68
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 2842
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 2814
              length: 161
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _annotations
                            children: []
                            pos: 2867
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 2883
                            length: 4
                        children: []
                        pos: 2867
                        length: 20
                    children: []
                    pos: 2866
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return "[null]";
                    children: []
                    pos: 2903
                    length: 16
                  pos: 2889
                  length: 40
                pos: 2863
                length: 66
              - type: return_statement
                fields:
                  text: return _annotations.toString();
                children: []
                pos: 2938
                length: 31
              pos: 2853
              length: 122
          children: []
          pos: 2814
          length: 161
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _add
              children: []
              pos: 3171
              length: 4
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Annotation ann
                children: []
                pos: 3176
                length: 14
              pos: 3147
              length: 314
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _annotations
                            children: []
                            pos: 3206
                            length: 12
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 3222
                            length: 4
                        children: []
                        pos: 3206
                        length: 20
                    children: []
                    pos: 3205
                    length: 22
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: _annotations = new HashMap<Class<? extends Annotation>,Annotation>();
                    children: []
                    pos: 3242
                    length: 69
                  pos: 3228
                  length: 93
                pos: 3202
                length: 119
              - type: local_variable_declaration
                fields:
                  text: Annotation previous = _annotations.put(ann.annotationType(),
                    ann);
                children: []
                pos: 3330
                length: 66
              - type: return_statement
                fields:
                  text: return (previous != null) && previous.equals(ann);
                children: []
                pos: 3405
                length: 50
              pos: 3192
              length: 269
          children: []
          pos: 3147
          length: 314
        pos: 400
        length: 3063
    children: []
    pos: 400
    length: 3063
  pos: 0
  length: 3466
text_diff: "--- before\n+++ after\n@@ -109,7 +109,7 @@\n             _annotations
  = new HashMap<Class<? extends Annotation>,Annotation>();\n         }\n         Annotation
  previous = _annotations.put(ann.annotationType(), ann);\n-        return (previous
  == null) || !previous.equals(ann);\n+        return (previous != null) && previous.equals(ann);\n
  \    }\n }\n \n"
tree_diff: |+
  New cluster:
  UPDATE from return (previous == null) || !previous.equals(ann); to return (previous != null) && previous.equals(ann);
  ------------
  ===
  update-node
  ---
  return_statement: return (previous == null) || !previous.equals(ann); [3405,3456]
  replace return (previous == null) || !previous.equals(ann); by return (previous != null) && previous.equals(ann);

...
