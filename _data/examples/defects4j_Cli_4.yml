---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Parser
        children: []
        pos: 1184
        length: 6
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private CommandLine cmd;
          children: []
          pos: 1259
          length: 24
        - type: field_declaration
          fields:
            text: private Options options;
          children: []
          pos: 1316
          length: 24
        - type: field_declaration
          fields:
            text: private List requiredOptions;
          children: []
          pos: 1390
          length: 29
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: flatten
              children: []
              pos: 1917
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options opts
                children: []
                pos: 1925
                length: 12
              pos: 1889
              length: 136
          children: []
          pos: 1889
          length: 136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2404
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2410
                length: 15
              pos: 2385
              length: 172
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, false);
                children: []
                pos: 2505
                length: 46
              pos: 2495
              length: 62
          children: []
          pos: 2385
          length: 172
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3026
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3032
                length: 15
              pos: 3007
              length: 217
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 3166
                length: 52
              pos: 3156
              length: 68
          children: []
          pos: 3007
          length: 217
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3802
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3808
                length: 15
              pos: 3783
              length: 223
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 3944
                length: 56
              pos: 3934
              length: 72
          children: []
          pos: 3783
          length: 223
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4588
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 4594
                length: 15
              pos: 4569
              length: 2680
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 4783
                length: 23
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator it = options.helpOptions().iterator(); it.hasNext();) {
                                Option opt = (Option) it.next();
                                opt.clearValues();
                            }
                children: []
                pos: 4896
                length: 155
              - type: expression_statement
                fields:
                  text: requiredOptions = options.getRequiredOptions();
                children: []
                pos: 5061
                length: 47
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 5117
                length: 24
              - type: local_variable_declaration
                fields:
                  text: boolean eatTheRest = false;
                children: []
                pos: 5151
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 5192
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5205
                            length: 4
                        children: []
                        pos: 5192
                        length: 17
                    children: []
                    pos: 5191
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: arguments = new String[0];
                    children: []
                    pos: 5233
                    length: 26
                  pos: 5219
                  length: 50
                pos: 5188
                length: 81
              - type: local_variable_declaration
                fields:
                  text: "List tokenList = Arrays.asList(flatten(this.options, \n                                               arguments,
                    \n                                               stopAtNonOption));"
                children: []
                pos: 5279
                length: 178
              - type: local_variable_declaration
                fields:
                  text: ListIterator iterator = tokenList.listIterator();
                children: []
                pos: 5467
                length: 49
              - type: while_statement
                fields:
                  text: |-
                    while (iterator.hasNext())
                            {
                                String t = (String) iterator.next();

                                // the value is the double-dash
                                if ("--".equals(t))
                                {
                                    eatTheRest = true;
                                }

                                // the value is a single dash
                                else if ("-".equals(t))
                                {
                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                    else
                                    {
                                        cmd.addArg(t);
                                    }
                                }

                                // the value is an option
                                else if (t.startsWith("-"))
                                {
                                    if (stopAtNonOption && !options.hasOption(t))
                                    {
                                        eatTheRest = true;
                                        cmd.addArg(t);
                                    }
                                    else
                                    {
                                        processOption(t, iterator);
                                    }
                                }

                                // the value is an argument
                                else
                                {
                                    cmd.addArg(t);

                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                }

                                // eat the remaining tokens
                                if (eatTheRest)
                                {
                                    while (iterator.hasNext())
                                    {
                                        String str = (String) iterator.next();

                                        // ensure only one double-dash is added
                                        if (!"--".equals(str))
                                        {
                                            cmd.addArg(str);
                                        }
                                    }
                                }
                            }
                children: []
                pos: 5566
                length: 1584
              - type: expression_statement
                fields:
                  text: processProperties(properties);
                children: []
                pos: 7160
                length: 30
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 7199
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 7232
                length: 11
              pos: 4743
              length: 2506
          children: []
          pos: 4569
          length: 2680
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processProperties
              children: []
              pos: 7448
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 7466
                length: 21
              pos: 7435
              length: 1485
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 7507
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7521
                            length: 4
                        children: []
                        pos: 7507
                        length: 18
                    children: []
                    pos: 7506
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 7549
                    length: 7
                  pos: 7535
                  length: 31
                pos: 7503
                length: 63
              - type: for_statement
                fields:
                  text: "for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)\n
                    \       {\n            String option = e.nextElement().toString();\n\n
                    \           if (!cmd.hasOption(option))\n            {\n                Option
                    opt = options.getOption(option);\n\n                // get the
                    value from the properties instance\n                String value
                    = properties.getProperty(option);\n\n                if (opt.hasArg())\n
                    \               {\n                    if ((opt.getValues() ==
                    null)\n                        || (opt.getValues().length == 0))\n
                    \                   {\n                        try\n                        {\n
                    \                           opt.addValue(value);\n                        }\n
                    \                       catch (RuntimeException exp)\n                        {\n
                    \                           // if we cannot add the value don't
                    worry about it\n                        }\n                    }\n
                    \               }\n                else if (!(\"yes\".equalsIgnoreCase(value)
                    \n                           || \"true\".equalsIgnoreCase(value)\n
                    \                          || \"1\".equalsIgnoreCase(value)))\n
                    \               {\n                    // if the value is not
                    yes, true or 1 then don't add the\n                    // option
                    to the CommandLine\n                    break;\n                }\n\n
                    \               cmd.addOption(opt);\n            }\n        }"
                children: []
                pos: 7576
                length: 1338
              pos: 7493
              length: 1427
          children: []
          pos: 7435
          length: 1485
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 9163
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9150
              length: 676
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: requiredOptions.size()
                            children: []
                            pos: 9324
                            length: 22
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 9349
                            length: 1
                        children: []
                        pos: 9324
                        length: 26
                    children: []
                    pos: 9323
                    length: 28
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Iterator iter = requiredOptions.iterator();
                    children: []
                    pos: 9374
                    length: 43
                  - type: local_variable_declaration
                    fields:
                      text: StringBuffer buff = new StringBuffer("Missing required
                        option");
                    children: []
                    pos: 9430
                    length: 64
                  - type: expression_statement
                    fields:
                      text: 'buff.append(requiredOptions.size() == 1 ? "" : "s");'
                    children: []
                    pos: 9507
                    length: 52
                  - type: expression_statement
                    fields:
                      text: 'buff.append(": ");'
                    children: []
                    pos: 9572
                    length: 18
                  - type: while_statement
                    fields:
                      text: |-
                        while (iter.hasNext())
                                    {
                                        buff.append(iter.next());
                                    }
                    children: []
                    pos: 9654
                    length: 92
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(buff.toString());
                    children: []
                    pos: 9760
                    length: 50
                  pos: 9360
                  length: 460
                pos: 9320
                length: 500
              pos: 9228
              length: 598
          children: []
          pos: 9150
          length: 676
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processArgs
              children: []
              pos: 10260
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option opt
                children: []
                pos: 10272
                length: 10
              pos: 10248
              length: 930
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (iter.hasNext())
                            {
                                String str = (String) iter.next();

                                // found an Option, not an argument
                                if (options.hasOption(str) && str.startsWith("-"))
                                {
                                    iter.previous();
                                    break;
                                }

                                // found a value
                                try
                                {
                                    opt.addValue( Util.stripLeadingAndTrailingQuotes(str) );
                                }
                                catch (RuntimeException exp)
                                {
                                    iter.previous();
                                    break;
                                }
                            }
                children: []
                pos: 10388
                length: 557
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: opt.getValues()
                                    children: []
                                    pos: 10960
                                    length: 15
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 10979
                                    length: 4
                                children: []
                                pos: 10960
                                length: 23
                            children: []
                            pos: 10959
                            length: 25
                          right:
                            type: unary_expression
                            fields:
                              text: "!opt.hasOptionalArg()"
                            children: []
                            pos: 10988
                            length: 21
                        children: []
                        pos: 10959
                        length: 50
                    children: []
                    pos: 10958
                    length: 52
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new MissingArgumentException("Missing argument for option:"
                                                                       + opt.getKey());
                    children: []
                    pos: 11033
                    length: 129
                  pos: 11019
                  length: 153
                pos: 10955
                length: 217
              pos: 10337
              length: 841
          children: []
          pos: 10248
          length: 930
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processOption
              children: []
              pos: 11600
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String arg
                children: []
                pos: 11614
                length: 10
              pos: 11587
              length: 1305
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasOption = options.hasOption(arg);
                children: []
                pos: 11689
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!hasOption"
                        children: []
                        pos: 11816
                        length: 10
                    children: []
                    pos: 11815
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: "throw new UnrecognizedOptionException(\"Unrecognized
                        option: \" \n                                                  +
                        arg);"
                    children: []
                    pos: 11850
                    length: 120
                  pos: 11836
                  length: 144
                pos: 11812
                length: 168
              - type: local_variable_declaration
                fields:
                  text: final Option opt = options.getOption(arg);
                children: []
                pos: 12043
                length: 42
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.isRequired()
                        children: []
                        pos: 12204
                        length: 16
                    children: []
                    pos: 12203
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: requiredOptions.remove(opt.getKey());
                    children: []
                    pos: 12244
                    length: 37
                  pos: 12230
                  length: 61
                pos: 12200
                length: 91
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: options.getOptionGroup(opt)
                            children: []
                            pos: 12412
                            length: 27
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12443
                            length: 4
                        children: []
                        pos: 12412
                        length: 35
                    children: []
                    pos: 12411
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = options.getOptionGroup(opt);
                    children: []
                    pos: 12471
                    length: 48
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 12537
                            length: 18
                        children: []
                        pos: 12536
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: requiredOptions.remove(group);
                        children: []
                        pos: 12587
                        length: 30
                      pos: 12569
                      length: 62
                    pos: 12533
                    length: 98
                  - type: expression_statement
                    fields:
                      text: group.setSelected(opt);
                    children: []
                    pos: 12645
                    length: 23
                  pos: 12457
                  length: 221
                pos: 12408
                length: 270
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.hasArg()
                        children: []
                        pos: 12741
                        length: 12
                    children: []
                    pos: 12740
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: processArgs(opt, iter);
                    children: []
                    pos: 12777
                    length: 23
                  pos: 12763
                  length: 47
                pos: 12737
                length: 73
              - type: expression_statement
                fields:
                  text: cmd.addOption(opt);
                children: []
                pos: 12867
                length: 19
              pos: 11679
              length: 1213
          children: []
          pos: 11587
          length: 1305
        pos: 1162
        length: 11732
    children: []
    pos: 1162
    length: 11732
  pos: 0
  length: 12895
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: Parser
        children: []
        pos: 1184
        length: 6
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private CommandLine cmd;
          children: []
          pos: 1259
          length: 24
        - type: field_declaration
          fields:
            text: private Options options;
          children: []
          pos: 1316
          length: 24
        - type: field_declaration
          fields:
            text: private List requiredOptions;
          children: []
          pos: 1390
          length: 29
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: flatten
              children: []
              pos: 1917
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options opts
                children: []
                pos: 1925
                length: 12
              pos: 1889
              length: 136
          children: []
          pos: 1889
          length: 136
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 2404
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 2410
                length: 15
              pos: 2385
              length: 172
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, false);
                children: []
                pos: 2505
                length: 46
              pos: 2495
              length: 62
          children: []
          pos: 2385
          length: 172
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3026
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3032
                length: 15
              pos: 3007
              length: 217
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, properties, false);
                children: []
                pos: 3166
                length: 52
              pos: 3156
              length: 68
          children: []
          pos: 3007
          length: 217
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 3802
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 3808
                length: 15
              pos: 3783
              length: 223
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return parse(options, arguments, null, stopAtNonOption);
                children: []
                pos: 3944
                length: 56
              pos: 3934
              length: 72
          children: []
          pos: 3783
          length: 223
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: parse
              children: []
              pos: 4588
              length: 5
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Options options
                children: []
                pos: 4594
                length: 15
              pos: 4569
              length: 2680
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: this.options = options;
                children: []
                pos: 4783
                length: 23
              - type: for_statement
                fields:
                  text: |-
                    for (Iterator it = options.helpOptions().iterator(); it.hasNext();) {
                                Option opt = (Option) it.next();
                                opt.clearValues();
                            }
                children: []
                pos: 4896
                length: 155
              - type: expression_statement
                fields:
                  text: requiredOptions = options.getRequiredOptions();
                children: []
                pos: 5061
                length: 47
              - type: expression_statement
                fields:
                  text: cmd = new CommandLine();
                children: []
                pos: 5117
                length: 24
              - type: local_variable_declaration
                fields:
                  text: boolean eatTheRest = false;
                children: []
                pos: 5151
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: arguments
                            children: []
                            pos: 5192
                            length: 9
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 5205
                            length: 4
                        children: []
                        pos: 5192
                        length: 17
                    children: []
                    pos: 5191
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: arguments = new String[0];
                    children: []
                    pos: 5233
                    length: 26
                  pos: 5219
                  length: 50
                pos: 5188
                length: 81
              - type: local_variable_declaration
                fields:
                  text: "List tokenList = Arrays.asList(flatten(this.options, \n                                               arguments,
                    \n                                               stopAtNonOption));"
                children: []
                pos: 5279
                length: 178
              - type: local_variable_declaration
                fields:
                  text: ListIterator iterator = tokenList.listIterator();
                children: []
                pos: 5467
                length: 49
              - type: while_statement
                fields:
                  text: |-
                    while (iterator.hasNext())
                            {
                                String t = (String) iterator.next();

                                // the value is the double-dash
                                if ("--".equals(t))
                                {
                                    eatTheRest = true;
                                }

                                // the value is a single dash
                                else if ("-".equals(t))
                                {
                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                    else
                                    {
                                        cmd.addArg(t);
                                    }
                                }

                                // the value is an option
                                else if (t.startsWith("-"))
                                {
                                    if (stopAtNonOption && !options.hasOption(t))
                                    {
                                        eatTheRest = true;
                                        cmd.addArg(t);
                                    }
                                    else
                                    {
                                        processOption(t, iterator);
                                    }
                                }

                                // the value is an argument
                                else
                                {
                                    cmd.addArg(t);

                                    if (stopAtNonOption)
                                    {
                                        eatTheRest = true;
                                    }
                                }

                                // eat the remaining tokens
                                if (eatTheRest)
                                {
                                    while (iterator.hasNext())
                                    {
                                        String str = (String) iterator.next();

                                        // ensure only one double-dash is added
                                        if (!"--".equals(str))
                                        {
                                            cmd.addArg(str);
                                        }
                                    }
                                }
                            }
                children: []
                pos: 5566
                length: 1584
              - type: expression_statement
                fields:
                  text: processProperties(properties);
                children: []
                pos: 7160
                length: 30
              - type: expression_statement
                fields:
                  text: checkRequiredOptions();
                children: []
                pos: 7199
                length: 23
              - type: return_statement
                fields:
                  text: return cmd;
                children: []
                pos: 7232
                length: 11
              pos: 4743
              length: 2506
          children: []
          pos: 4569
          length: 2680
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processProperties
              children: []
              pos: 7448
              length: 17
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Properties properties
                children: []
                pos: 7466
                length: 21
              pos: 7435
              length: 1485
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: properties
                            children: []
                            pos: 7507
                            length: 10
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 7521
                            length: 4
                        children: []
                        pos: 7507
                        length: 18
                    children: []
                    pos: 7506
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return;
                    children: []
                    pos: 7549
                    length: 7
                  pos: 7535
                  length: 31
                pos: 7503
                length: 63
              - type: for_statement
                fields:
                  text: "for (Enumeration e = properties.propertyNames(); e.hasMoreElements();)\n
                    \       {\n            String option = e.nextElement().toString();\n\n
                    \           if (!cmd.hasOption(option))\n            {\n                Option
                    opt = options.getOption(option);\n\n                // get the
                    value from the properties instance\n                String value
                    = properties.getProperty(option);\n\n                if (opt.hasArg())\n
                    \               {\n                    if ((opt.getValues() ==
                    null)\n                        || (opt.getValues().length == 0))\n
                    \                   {\n                        try\n                        {\n
                    \                           opt.addValue(value);\n                        }\n
                    \                       catch (RuntimeException exp)\n                        {\n
                    \                           // if we cannot add the value don't
                    worry about it\n                        }\n                    }\n
                    \               }\n                else if (!(\"yes\".equalsIgnoreCase(value)
                    \n                           || \"true\".equalsIgnoreCase(value)\n
                    \                          || \"1\".equalsIgnoreCase(value)))\n
                    \               {\n                    // if the value is not
                    yes, true or 1 then don't add the\n                    // option
                    to the CommandLine\n                    break;\n                }\n\n
                    \               cmd.addOption(opt);\n            }\n        }"
                children: []
                pos: 7576
                length: 1338
              pos: 7493
              length: 1427
          children: []
          pos: 7435
          length: 1485
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: checkRequiredOptions
              children: []
              pos: 9163
              length: 20
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 9150
              length: 555
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: requiredOptions.size()
                            children: []
                            pos: 9324
                            length: 22
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 9349
                            length: 1
                        children: []
                        pos: 9324
                        length: 26
                    children: []
                    pos: 9323
                    length: 28
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: Iterator iter = requiredOptions.iterator();
                    children: []
                    pos: 9374
                    length: 43
                  - type: local_variable_declaration
                    fields:
                      text: StringBuffer buff = new StringBuffer();
                    children: []
                    pos: 9430
                    length: 39
                  - type: while_statement
                    fields:
                      text: |-
                        while (iter.hasNext())
                                    {
                                        buff.append(iter.next());
                                    }
                    children: []
                    pos: 9533
                    length: 92
                  - type: throw_statement
                    fields:
                      text: throw new MissingOptionException(buff.toString());
                    children: []
                    pos: 9639
                    length: 50
                  pos: 9360
                  length: 339
                pos: 9320
                length: 379
              pos: 9228
              length: 477
          children: []
          pos: 9150
          length: 555
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processArgs
              children: []
              pos: 10139
              length: 11
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Option opt
                children: []
                pos: 10151
                length: 10
              pos: 10127
              length: 930
            body:
              type: block
              fields: {}
              children:
              - type: while_statement
                fields:
                  text: |-
                    while (iter.hasNext())
                            {
                                String str = (String) iter.next();

                                // found an Option, not an argument
                                if (options.hasOption(str) && str.startsWith("-"))
                                {
                                    iter.previous();
                                    break;
                                }

                                // found a value
                                try
                                {
                                    opt.addValue( Util.stripLeadingAndTrailingQuotes(str) );
                                }
                                catch (RuntimeException exp)
                                {
                                    iter.previous();
                                    break;
                                }
                            }
                children: []
                pos: 10267
                length: 557
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: and
                        fields:
                          left:
                            type: parenthesized_expression
                            fields:
                              expression:
                                type: equals
                                fields:
                                  left:
                                    type: method_invocation
                                    fields:
                                      text: opt.getValues()
                                    children: []
                                    pos: 10839
                                    length: 15
                                  right:
                                    type: null_literal
                                    fields: {}
                                    children: []
                                    pos: 10858
                                    length: 4
                                children: []
                                pos: 10839
                                length: 23
                            children: []
                            pos: 10838
                            length: 25
                          right:
                            type: unary_expression
                            fields:
                              text: "!opt.hasOptionalArg()"
                            children: []
                            pos: 10867
                            length: 21
                        children: []
                        pos: 10838
                        length: 50
                    children: []
                    pos: 10837
                    length: 52
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: |-
                        throw new MissingArgumentException("Missing argument for option:"
                                                                       + opt.getKey());
                    children: []
                    pos: 10912
                    length: 129
                  pos: 10898
                  length: 153
                pos: 10834
                length: 217
              pos: 10216
              length: 841
          children: []
          pos: 10127
          length: 930
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: processOption
              children: []
              pos: 11479
              length: 13
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: String arg
                children: []
                pos: 11493
                length: 10
              pos: 11466
              length: 1305
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: boolean hasOption = options.hasOption(arg);
                children: []
                pos: 11568
                length: 43
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: unary_expression
                        fields:
                          text: "!hasOption"
                        children: []
                        pos: 11695
                        length: 10
                    children: []
                    pos: 11694
                    length: 12
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: "throw new UnrecognizedOptionException(\"Unrecognized
                        option: \" \n                                                  +
                        arg);"
                    children: []
                    pos: 11729
                    length: 120
                  pos: 11715
                  length: 144
                pos: 11691
                length: 168
              - type: local_variable_declaration
                fields:
                  text: final Option opt = options.getOption(arg);
                children: []
                pos: 11922
                length: 42
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.isRequired()
                        children: []
                        pos: 12083
                        length: 16
                    children: []
                    pos: 12082
                    length: 18
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: requiredOptions.remove(opt.getKey());
                    children: []
                    pos: 12123
                    length: 37
                  pos: 12109
                  length: 61
                pos: 12079
                length: 91
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: options.getOptionGroup(opt)
                            children: []
                            pos: 12291
                            length: 27
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 12322
                            length: 4
                        children: []
                        pos: 12291
                        length: 35
                    children: []
                    pos: 12290
                    length: 37
                children:
                - type: block
                  fields: {}
                  children:
                  - type: local_variable_declaration
                    fields:
                      text: OptionGroup group = options.getOptionGroup(opt);
                    children: []
                    pos: 12350
                    length: 48
                  - type: if_statement
                    fields:
                      condition:
                        type: parenthesized_expression
                        fields:
                          expression:
                            type: method_invocation
                            fields:
                              text: group.isRequired()
                            children: []
                            pos: 12416
                            length: 18
                        children: []
                        pos: 12415
                        length: 20
                    children:
                    - type: block
                      fields: {}
                      children:
                      - type: expression_statement
                        fields:
                          text: requiredOptions.remove(group);
                        children: []
                        pos: 12466
                        length: 30
                      pos: 12448
                      length: 62
                    pos: 12412
                    length: 98
                  - type: expression_statement
                    fields:
                      text: group.setSelected(opt);
                    children: []
                    pos: 12524
                    length: 23
                  pos: 12336
                  length: 221
                pos: 12287
                length: 270
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: opt.hasArg()
                        children: []
                        pos: 12620
                        length: 12
                    children: []
                    pos: 12619
                    length: 14
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: processArgs(opt, iter);
                    children: []
                    pos: 12656
                    length: 23
                  pos: 12642
                  length: 47
                pos: 12616
                length: 73
              - type: expression_statement
                fields:
                  text: cmd.addOption(opt);
                children: []
                pos: 12746
                length: 19
              pos: 11558
              length: 1213
          children: []
          pos: 11466
          length: 1305
        pos: 1162
        length: 11611
    children: []
    pos: 1162
    length: 11611
  pos: 0
  length: 12774
text_diff: "--- before\n+++ after\n@@ -295,9 +295,7 @@\n         if (requiredOptions.size()
  > 0)\n         {\n             Iterator iter = requiredOptions.iterator();\n-            StringBuffer
  buff = new StringBuffer(\"Missing required option\");\n-            buff.append(requiredOptions.size()
  == 1 ? \"\" : \"s\");\n-            buff.append(\": \");\n+            StringBuffer
  buff = new StringBuffer();\n \n \n             // loop through the required options\n"
tree_diff: |+
  New cluster:
  UPDATE from StringBuffer buff = new StringBuffer("Missing required option"); to StringBuffer buff = new StringBuffer();
  ------------
  ===
  update-node
  ---
  local_variable_declaration: StringBuffer buff = new StringBuffer("Missing required option"); [9430,9494]
  replace StringBuffer buff = new StringBuffer("Missing required option"); by StringBuffer buff = new StringBuffer();

  New cluster:
  ===
  delete-node
  ---
  expression_statement: buff.append(requiredOptions.size() == 1 ? "" : "s"); [9507,9559]
  ===
  ------------
  ===
  delete-node
  ---
  expression_statement: buff.append(requiredOptions.size() == 1 ? "" : "s"); [9507,9559]
  ===

  New cluster:
  ===
  delete-node
  ---
  expression_statement: buff.append(": "); [9572,9590]
  ===
  ------------
  ===
  delete-node
  ---
  expression_statement: buff.append(": "); [9572,9590]
  ===

...
