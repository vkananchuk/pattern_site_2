---
language: java
before_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: SimpleType
        children: []
        pos: 393
        length: 10
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = 1L;
          children: []
          pos: 460
          length: 48
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(Class<?> cls) {
                      this(cls, TypeBindings.emptyBindings(), null, null);
                  }
          children: []
          pos: 1025
          length: 103
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(Class<?> cls, TypeBindings bindings,
                          JavaType superClass, JavaType[] superInts) {
                      this(cls, bindings, superClass, superInts, null, null, false);
                  }
          children: []
          pos: 1134
          length: 191
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(TypeBase base) {
                      super(base);
                  }
          children: []
          pos: 1490
          length: 64
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(Class<?> cls, TypeBindings bindings,
                          JavaType superClass, JavaType[] superInts,
                          Object valueHandler, Object typeHandler, boolean asStatic)
                  {
                      super(cls, bindings, superClass, superInts,
                              0, valueHandler, typeHandler, asStatic);
                  }
          children: []
          pos: 1560
          length: 304
        - type: constructor_declaration
          fields:
            text: "protected SimpleType(Class<?> cls, TypeBindings bindings,\n            JavaType
              superClass, JavaType[] superInts, int extraHash,\n            Object
              valueHandler, Object typeHandler, boolean asStatic)\n    {\n        super(cls,
              bindings, superClass, superInts, \n                extraHash, valueHandler,
              typeHandler, asStatic);\n    }"
          children: []
          pos: 1975
          length: 328
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: constructUnsafe
              children: []
              pos: 2729
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> raw
                children: []
                pos: 2745
                length: 12
              pos: 2704
              length: 239
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return new SimpleType(raw, null,
                                    // 18-Oct-2015, tatu: Should be ok to omit possible super-types, right?
                                    null, null, null, null, false);
                children: []
                pos: 2769
                length: 168
              pos: 2759
              length: 184
          children: []
          pos: 2704
          length: 239
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: construct
              children: []
              pos: 3642
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> cls
                children: []
                pos: 3652
                length: 12
              pos: 3601
              length: 811
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Map.class.isAssignableFrom(cls)
                        children: []
                        pos: 3800
                        length: 31
                    children: []
                    pos: 3799
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new IllegalArgumentException("Can not construct
                        SimpleType for a Map (class: "+cls.getName()+")");'
                    children: []
                    pos: 3847
                    length: 104
                  pos: 3833
                  length: 128
                pos: 3796
                length: 165
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Collection.class.isAssignableFrom(cls)
                        children: []
                        pos: 3974
                        length: 38
                    children: []
                    pos: 3973
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new IllegalArgumentException("Can not construct
                        SimpleType for a Collection (class: "+cls.getName()+")");'
                    children: []
                    pos: 4028
                    length: 111
                  pos: 4014
                  length: 135
                pos: 3970
                length: 179
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: cls.isArray()
                        children: []
                        pos: 4224
                        length: 13
                    children: []
                    pos: 4223
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new IllegalArgumentException("Can not construct
                        SimpleType for an array (class: "+cls.getName()+")");'
                    children: []
                    pos: 4253
                    length: 107
                  pos: 4239
                  length: 131
                pos: 4220
                length: 150
              - type: return_statement
                fields:
                  text: return new SimpleType(cls);
                children: []
                pos: 4379
                length: 27
              pos: 3670
              length: 742
          children: []
          pos: 3601
          length: 811
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _narrow
              children: []
              pos: 4451
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> subclass
                children: []
                pos: 4459
                length: 17
              pos: 4418
              length: 748
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _class
                            children: []
                            pos: 4496
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: subclass
                            children: []
                            pos: 4506
                            length: 8
                        children: []
                        pos: 4496
                        length: 18
                    children: []
                    pos: 4495
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 4530
                    length: 12
                  pos: 4516
                  length: 36
                pos: 4492
                length: 60
              - type: return_statement
                fields:
                  text: |-
                    return new SimpleType(subclass, _bindings, this, _superInterfaces,
                                    _valueHandler, _typeHandler, _asStatic);
                children: []
                pos: 5037
                length: 123
              pos: 4482
              length: 684
          children: []
          pos: 4418
          length: 748
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withContentType
              children: []
              pos: 5206
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JavaType contentType
                children: []
                pos: 5222
                length: 20
              pos: 5176
              length: 189
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("Simple types have no content
                    types; can not call withContentType()");
                children: []
                pos: 5254
                length: 105
              pos: 5244
              length: 121
          children: []
          pos: 5176
          length: 189
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withTypeHandler
              children: []
              pos: 5407
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 5423
                length: 8
              pos: 5375
              length: 243
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _typeHandler
                            children: []
                            pos: 5447
                            length: 12
                          right:
                            type: identifier
                            fields:
                              text: h
                            children: []
                            pos: 5463
                            length: 1
                        children: []
                        pos: 5447
                        length: 17
                    children: []
                    pos: 5446
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 5480
                    length: 12
                  pos: 5466
                  length: 36
                pos: 5443
                length: 59
              - type: return_statement
                fields:
                  text: return new SimpleType(_class, _bindings, _superClass, _superInterfaces,
                    _valueHandler, h, _asStatic);
                children: []
                pos: 5511
                length: 101
              pos: 5433
              length: 185
          children: []
          pos: 5375
          length: 243
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withContentTypeHandler
              children: []
              pos: 5654
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 5677
                length: 8
              pos: 5624
              length: 222
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("Simple types have no content
                    types; can not call withContenTypeHandler()");
                children: []
                pos: 5729
                length: 111
              pos: 5687
              length: 159
          children: []
          pos: 5624
          length: 222
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withValueHandler
              children: []
              pos: 5884
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 5901
                length: 8
              pos: 5852
              length: 244
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: h
                            children: []
                            pos: 5925
                            length: 1
                          right:
                            type: identifier
                            fields:
                              text: _valueHandler
                            children: []
                            pos: 5930
                            length: 13
                        children: []
                        pos: 5925
                        length: 18
                    children: []
                    pos: 5924
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 5959
                    length: 12
                  pos: 5945
                  length: 36
                pos: 5921
                length: 60
              - type: return_statement
                fields:
                  text: return new SimpleType(_class, _bindings, _superClass, _superInterfaces,
                    h, _typeHandler, _asStatic);
                children: []
                pos: 5990
                length: 100
              pos: 5911
              length: 185
          children: []
          pos: 5852
          length: 244
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withContentValueHandler
              children: []
              pos: 6139
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 6163
                length: 8
              pos: 6106
              length: 227
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("Simple types have no content
                    types; can not call withContenValueHandler()");
                children: []
                pos: 6215
                length: 112
              pos: 6173
              length: 160
          children: []
          pos: 6106
          length: 227
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withStaticTyping
              children: []
              pos: 6371
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6339
              length: 209
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return _asStatic ? this : new SimpleType(_class, _bindings,
                                    _superClass, _superInterfaces, _valueHandler, _typeHandler, true);
                children: []
                pos: 6400
                length: 142
              pos: 6390
              length: 158
          children: []
          pos: 6339
          length: 209
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: refine
              children: []
              pos: 6584
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> rawType
                children: []
                pos: 6591
                length: 16
              pos: 6554
              length: 226
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 6762
                length: 12
              pos: 6693
              length: 87
          children: []
          pos: 6554
          length: 226
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: buildCanonicalName
              children: []
              pos: 6821
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6790
              length: 548
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder sb = new StringBuilder();
                children: []
                pos: 6856
                length: 39
              - type: expression_statement
                fields:
                  text: sb.append(_class.getName());
                children: []
                pos: 6904
                length: 28
              - type: local_variable_declaration
                fields:
                  text: final int count = _bindings.size();
                children: []
                pos: 6942
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: count
                            children: []
                            pos: 6990
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 6998
                            length: 1
                        children: []
                        pos: 6990
                        length: 9
                    children: []
                    pos: 6989
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: sb.append('<');
                    children: []
                    pos: 7015
                    length: 15
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < count; ++i) {
                                        JavaType t = containedType(i);
                                        if (i > 0) {
                                            sb.append(',');
                                        }
                                        sb.append(t.toCanonical());
                                    }
                    children: []
                    pos: 7043
                    length: 221
                  - type: expression_statement
                    fields:
                      text: sb.append('>');
                    children: []
                    pos: 7277
                    length: 15
                  pos: 7001
                  length: 301
                pos: 6986
                length: 316
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 7311
                length: 21
              pos: 6846
              length: 492
          children: []
          pos: 6790
          length: 548
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContainerType
              children: []
              pos: 7535
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7506
              length: 64
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 7555
                length: 13
              pos: 7553
              length: 17
          children: []
          pos: 7506
          length: 64
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getErasedSignature
              children: []
              pos: 7611
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 7630
                length: 16
              pos: 7576
              length: 129
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _classSignature(_class, sb, true);
                children: []
                pos: 7658
                length: 41
              pos: 7648
              length: 57
          children: []
          pos: 7576
          length: 129
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getGenericSignature
              children: []
              pos: 7750
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 7770
                length: 16
              pos: 7715
              length: 430
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _classSignature(_class, sb, false);
                children: []
                pos: 7802
                length: 35
              - type: local_variable_declaration
                fields:
                  text: final int count = _bindings.size();
                children: []
                pos: 7847
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: count
                            children: []
                            pos: 7895
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7903
                            length: 1
                        children: []
                        pos: 7895
                        length: 9
                    children: []
                    pos: 7894
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: sb.append('<');
                    children: []
                    pos: 7920
                    length: 15
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < count; ++i) {
                                        sb = containedType(i).getGenericSignature(sb);
                                    }
                    children: []
                    pos: 7948
                    length: 110
                  - type: expression_statement
                    fields:
                      text: sb.append('>');
                    children: []
                    pos: 8071
                    length: 15
                  pos: 7906
                  length: 190
                pos: 7891
                length: 205
              - type: expression_statement
                fields:
                  text: sb.append(';');
                children: []
                pos: 8105
                length: 15
              - type: return_statement
                fields:
                  text: return sb;
                children: []
                pos: 8129
                length: 10
              pos: 7792
              length: 353
          children: []
          pos: 7715
          length: 430
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 8347
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8319
              length: 214
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder sb = new StringBuilder(40);
                children: []
                pos: 8372
                length: 41
              - type: expression_statement
                fields:
                  text: sb.append("[simple type, class ").append(buildCanonicalName()).append(']');
                children: []
                pos: 8422
                length: 75
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 8506
                length: 21
              pos: 8362
              length: 171
          children: []
          pos: 8319
          length: 214
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 8568
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object o
                children: []
                pos: 8575
                length: 8
              pos: 8539
              length: 485
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: o
                            children: []
                            pos: 8603
                            length: 1
                          right:
                            type: this
                            fields: {}
                            children: []
                            pos: 8608
                            length: 4
                        children: []
                        pos: 8603
                        length: 9
                    children: []
                    pos: 8602
                    length: 11
                children:
                - type: return_statement
                  fields:
                    text: return true;
                  children: []
                  pos: 8614
                  length: 12
                pos: 8599
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: o
                            children: []
                            pos: 8639
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8644
                            length: 4
                        children: []
                        pos: 8639
                        length: 9
                    children: []
                    pos: 8638
                    length: 11
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 8650
                  length: 13
                pos: 8635
                length: 28
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: o.getClass()
                            children: []
                            pos: 8676
                            length: 12
                          right:
                            type: method_invocation
                            fields:
                              text: getClass()
                            children: []
                            pos: 8692
                            length: 10
                        children: []
                        pos: 8676
                        length: 26
                    children: []
                    pos: 8675
                    length: 28
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 8704
                  length: 13
                pos: 8672
                length: 45
              - type: local_variable_declaration
                fields:
                  text: SimpleType other = (SimpleType) o;
                children: []
                pos: 8727
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: other._class
                            children: []
                            pos: 8816
                            length: 12
                          right:
                            type: field_access
                            fields:
                              text: this._class
                            children: []
                            pos: 8832
                            length: 11
                        children: []
                        pos: 8816
                        length: 27
                    children: []
                    pos: 8815
                    length: 29
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 8845
                  length: 13
                pos: 8812
                length: 46
              - type: local_variable_declaration
                fields:
                  text: TypeBindings b1 = _bindings;
                children: []
                pos: 8917
                length: 28
              - type: local_variable_declaration
                fields:
                  text: TypeBindings b2 = other._bindings;
                children: []
                pos: 8954
                length: 34
              - type: return_statement
                fields:
                  text: return b1.equals(b2);
                children: []
                pos: 8997
                length: 21
              pos: 8589
              length: 435
          children: []
          pos: 8539
          length: 485
        pos: 380
        length: 8646
    children: []
    pos: 380
    length: 8646
  pos: 0
  length: 9027
after_tree:
  type: program
  fields: {}
  children:
  - type: class_declaration
    fields:
      name:
        type: identifier
        fields:
          text: SimpleType
        children: []
        pos: 393
        length: 10
      body:
        type: class_body
        fields: {}
        children:
        - type: field_declaration
          fields:
            text: private static final long serialVersionUID = 1L;
          children: []
          pos: 460
          length: 48
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(Class<?> cls) {
                      this(cls, TypeBindings.emptyBindings(), null, null);
                  }
          children: []
          pos: 1025
          length: 103
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(Class<?> cls, TypeBindings bindings,
                          JavaType superClass, JavaType[] superInts) {
                      this(cls, bindings, superClass, superInts, null, null, false);
                  }
          children: []
          pos: 1134
          length: 191
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(TypeBase base) {
                      super(base);
                  }
          children: []
          pos: 1490
          length: 64
        - type: constructor_declaration
          fields:
            text: |-
              protected SimpleType(Class<?> cls, TypeBindings bindings,
                          JavaType superClass, JavaType[] superInts,
                          Object valueHandler, Object typeHandler, boolean asStatic)
                  {
                      super(cls, bindings, superClass, superInts,
                              0, valueHandler, typeHandler, asStatic);
                  }
          children: []
          pos: 1560
          length: 304
        - type: constructor_declaration
          fields:
            text: "protected SimpleType(Class<?> cls, TypeBindings bindings,\n            JavaType
              superClass, JavaType[] superInts, int extraHash,\n            Object
              valueHandler, Object typeHandler, boolean asStatic)\n    {\n        super(cls,
              bindings, superClass, superInts, \n                extraHash, valueHandler,
              typeHandler, asStatic);\n    }"
          children: []
          pos: 1975
          length: 328
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: constructUnsafe
              children: []
              pos: 2729
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> raw
                children: []
                pos: 2745
                length: 12
              pos: 2704
              length: 239
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return new SimpleType(raw, null,
                                    // 18-Oct-2015, tatu: Should be ok to omit possible super-types, right?
                                    null, null, null, null, false);
                children: []
                pos: 2769
                length: 168
              pos: 2759
              length: 184
          children: []
          pos: 2704
          length: 239
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: construct
              children: []
              pos: 3642
              length: 9
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> cls
                children: []
                pos: 3652
                length: 12
              pos: 3601
              length: 811
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Map.class.isAssignableFrom(cls)
                        children: []
                        pos: 3800
                        length: 31
                    children: []
                    pos: 3799
                    length: 33
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new IllegalArgumentException("Can not construct
                        SimpleType for a Map (class: "+cls.getName()+")");'
                    children: []
                    pos: 3847
                    length: 104
                  pos: 3833
                  length: 128
                pos: 3796
                length: 165
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: Collection.class.isAssignableFrom(cls)
                        children: []
                        pos: 3974
                        length: 38
                    children: []
                    pos: 3973
                    length: 40
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new IllegalArgumentException("Can not construct
                        SimpleType for a Collection (class: "+cls.getName()+")");'
                    children: []
                    pos: 4028
                    length: 111
                  pos: 4014
                  length: 135
                pos: 3970
                length: 179
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: method_invocation
                        fields:
                          text: cls.isArray()
                        children: []
                        pos: 4224
                        length: 13
                    children: []
                    pos: 4223
                    length: 15
                children:
                - type: block
                  fields: {}
                  children:
                  - type: throw_statement
                    fields:
                      text: 'throw new IllegalArgumentException("Can not construct
                        SimpleType for an array (class: "+cls.getName()+")");'
                    children: []
                    pos: 4253
                    length: 107
                  pos: 4239
                  length: 131
                pos: 4220
                length: 150
              - type: return_statement
                fields:
                  text: return new SimpleType(cls);
                children: []
                pos: 4379
                length: 27
              pos: 3670
              length: 742
          children: []
          pos: 3601
          length: 811
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: _narrow
              children: []
              pos: 4451
              length: 7
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> subclass
                children: []
                pos: 4459
                length: 17
              pos: 4418
              length: 755
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _class
                            children: []
                            pos: 4496
                            length: 6
                          right:
                            type: identifier
                            fields:
                              text: subclass
                            children: []
                            pos: 4506
                            length: 8
                        children: []
                        pos: 4496
                        length: 18
                    children: []
                    pos: 4495
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 4530
                    length: 12
                  pos: 4516
                  length: 36
                pos: 4492
                length: 60
              - type: return_statement
                fields:
                  text: |-
                    return new SimpleType(subclass, _bindings, _superClass, _superInterfaces,
                                    _valueHandler, _typeHandler, _asStatic);
                children: []
                pos: 5037
                length: 130
              pos: 4482
              length: 691
          children: []
          pos: 4418
          length: 755
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withContentType
              children: []
              pos: 5213
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: JavaType contentType
                children: []
                pos: 5229
                length: 20
              pos: 5183
              length: 189
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("Simple types have no content
                    types; can not call withContentType()");
                children: []
                pos: 5261
                length: 105
              pos: 5251
              length: 121
          children: []
          pos: 5183
          length: 189
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withTypeHandler
              children: []
              pos: 5414
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 5430
                length: 8
              pos: 5382
              length: 243
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: _typeHandler
                            children: []
                            pos: 5454
                            length: 12
                          right:
                            type: identifier
                            fields:
                              text: h
                            children: []
                            pos: 5470
                            length: 1
                        children: []
                        pos: 5454
                        length: 17
                    children: []
                    pos: 5453
                    length: 19
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 5487
                    length: 12
                  pos: 5473
                  length: 36
                pos: 5450
                length: 59
              - type: return_statement
                fields:
                  text: return new SimpleType(_class, _bindings, _superClass, _superInterfaces,
                    _valueHandler, h, _asStatic);
                children: []
                pos: 5518
                length: 101
              pos: 5440
              length: 185
          children: []
          pos: 5382
          length: 243
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withContentTypeHandler
              children: []
              pos: 5661
              length: 22
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 5684
                length: 8
              pos: 5631
              length: 222
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("Simple types have no content
                    types; can not call withContenTypeHandler()");
                children: []
                pos: 5736
                length: 111
              pos: 5694
              length: 159
          children: []
          pos: 5631
          length: 222
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withValueHandler
              children: []
              pos: 5891
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 5908
                length: 8
              pos: 5859
              length: 244
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: h
                            children: []
                            pos: 5932
                            length: 1
                          right:
                            type: identifier
                            fields:
                              text: _valueHandler
                            children: []
                            pos: 5937
                            length: 13
                        children: []
                        pos: 5932
                        length: 18
                    children: []
                    pos: 5931
                    length: 20
                children:
                - type: block
                  fields: {}
                  children:
                  - type: return_statement
                    fields:
                      text: return this;
                    children: []
                    pos: 5966
                    length: 12
                  pos: 5952
                  length: 36
                pos: 5928
                length: 60
              - type: return_statement
                fields:
                  text: return new SimpleType(_class, _bindings, _superClass, _superInterfaces,
                    h, _typeHandler, _asStatic);
                children: []
                pos: 5997
                length: 100
              pos: 5918
              length: 185
          children: []
          pos: 5859
          length: 244
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withContentValueHandler
              children: []
              pos: 6146
              length: 23
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object h
                children: []
                pos: 6170
                length: 8
              pos: 6113
              length: 227
            body:
              type: block
              fields: {}
              children:
              - type: throw_statement
                fields:
                  text: throw new IllegalArgumentException("Simple types have no content
                    types; can not call withContenValueHandler()");
                children: []
                pos: 6222
                length: 112
              pos: 6180
              length: 160
          children: []
          pos: 6113
          length: 227
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: withStaticTyping
              children: []
              pos: 6378
              length: 16
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6346
              length: 209
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: |-
                    return _asStatic ? this : new SimpleType(_class, _bindings,
                                    _superClass, _superInterfaces, _valueHandler, _typeHandler, true);
                children: []
                pos: 6407
                length: 142
              pos: 6397
              length: 158
          children: []
          pos: 6346
          length: 209
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: refine
              children: []
              pos: 6591
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Class<?> rawType
                children: []
                pos: 6598
                length: 16
              pos: 6561
              length: 226
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return null;
                children: []
                pos: 6769
                length: 12
              pos: 6700
              length: 87
          children: []
          pos: 6561
          length: 226
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: buildCanonicalName
              children: []
              pos: 6828
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 6797
              length: 548
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder sb = new StringBuilder();
                children: []
                pos: 6863
                length: 39
              - type: expression_statement
                fields:
                  text: sb.append(_class.getName());
                children: []
                pos: 6911
                length: 28
              - type: local_variable_declaration
                fields:
                  text: final int count = _bindings.size();
                children: []
                pos: 6949
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: count
                            children: []
                            pos: 6997
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7005
                            length: 1
                        children: []
                        pos: 6997
                        length: 9
                    children: []
                    pos: 6996
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: sb.append('<');
                    children: []
                    pos: 7022
                    length: 15
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < count; ++i) {
                                        JavaType t = containedType(i);
                                        if (i > 0) {
                                            sb.append(',');
                                        }
                                        sb.append(t.toCanonical());
                                    }
                    children: []
                    pos: 7050
                    length: 221
                  - type: expression_statement
                    fields:
                      text: sb.append('>');
                    children: []
                    pos: 7284
                    length: 15
                  pos: 7008
                  length: 301
                pos: 6993
                length: 316
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 7318
                length: 21
              pos: 6853
              length: 492
          children: []
          pos: 6797
          length: 548
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: isContainerType
              children: []
              pos: 7542
              length: 15
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 7513
              length: 64
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return false;
                children: []
                pos: 7562
                length: 13
              pos: 7560
              length: 17
          children: []
          pos: 7513
          length: 64
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getErasedSignature
              children: []
              pos: 7618
              length: 18
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 7637
                length: 16
              pos: 7583
              length: 129
            body:
              type: block
              fields: {}
              children:
              - type: return_statement
                fields:
                  text: return _classSignature(_class, sb, true);
                children: []
                pos: 7665
                length: 41
              pos: 7655
              length: 57
          children: []
          pos: 7583
          length: 129
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: getGenericSignature
              children: []
              pos: 7757
              length: 19
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: StringBuilder sb
                children: []
                pos: 7777
                length: 16
              pos: 7722
              length: 430
            body:
              type: block
              fields: {}
              children:
              - type: expression_statement
                fields:
                  text: _classSignature(_class, sb, false);
                children: []
                pos: 7809
                length: 35
              - type: local_variable_declaration
                fields:
                  text: final int count = _bindings.size();
                children: []
                pos: 7854
                length: 35
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: greater_than
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: count
                            children: []
                            pos: 7902
                            length: 5
                          right:
                            type: decimal_integer_literal
                            fields:
                              text: '0'
                            children: []
                            pos: 7910
                            length: 1
                        children: []
                        pos: 7902
                        length: 9
                    children: []
                    pos: 7901
                    length: 11
                children:
                - type: block
                  fields: {}
                  children:
                  - type: expression_statement
                    fields:
                      text: sb.append('<');
                    children: []
                    pos: 7927
                    length: 15
                  - type: for_statement
                    fields:
                      text: |-
                        for (int i = 0; i < count; ++i) {
                                        sb = containedType(i).getGenericSignature(sb);
                                    }
                    children: []
                    pos: 7955
                    length: 110
                  - type: expression_statement
                    fields:
                      text: sb.append('>');
                    children: []
                    pos: 8078
                    length: 15
                  pos: 7913
                  length: 190
                pos: 7898
                length: 205
              - type: expression_statement
                fields:
                  text: sb.append(';');
                children: []
                pos: 8112
                length: 15
              - type: return_statement
                fields:
                  text: return sb;
                children: []
                pos: 8136
                length: 10
              pos: 7799
              length: 353
          children: []
          pos: 7722
          length: 430
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: toString
              children: []
              pos: 8354
              length: 8
            parameters:
              type: method_parameters
              fields: {}
              children: []
              pos: 8326
              length: 214
            body:
              type: block
              fields: {}
              children:
              - type: local_variable_declaration
                fields:
                  text: StringBuilder sb = new StringBuilder(40);
                children: []
                pos: 8379
                length: 41
              - type: expression_statement
                fields:
                  text: sb.append("[simple type, class ").append(buildCanonicalName()).append(']');
                children: []
                pos: 8429
                length: 75
              - type: return_statement
                fields:
                  text: return sb.toString();
                children: []
                pos: 8513
                length: 21
              pos: 8369
              length: 171
          children: []
          pos: 8326
          length: 214
        - type: method_declaration
          fields:
            name:
              type: identifier
              fields:
                text: equals
              children: []
              pos: 8575
              length: 6
            parameters:
              type: method_parameters
              fields: {}
              children:
              - type: formal_parameter
                fields:
                  text: Object o
                children: []
                pos: 8582
                length: 8
              pos: 8546
              length: 485
            body:
              type: block
              fields: {}
              children:
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: o
                            children: []
                            pos: 8610
                            length: 1
                          right:
                            type: this
                            fields: {}
                            children: []
                            pos: 8615
                            length: 4
                        children: []
                        pos: 8610
                        length: 9
                    children: []
                    pos: 8609
                    length: 11
                children:
                - type: return_statement
                  fields:
                    text: return true;
                  children: []
                  pos: 8621
                  length: 12
                pos: 8606
                length: 27
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: equals
                        fields:
                          left:
                            type: identifier
                            fields:
                              text: o
                            children: []
                            pos: 8646
                            length: 1
                          right:
                            type: null_literal
                            fields: {}
                            children: []
                            pos: 8651
                            length: 4
                        children: []
                        pos: 8646
                        length: 9
                    children: []
                    pos: 8645
                    length: 11
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 8657
                  length: 13
                pos: 8642
                length: 28
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: method_invocation
                            fields:
                              text: o.getClass()
                            children: []
                            pos: 8683
                            length: 12
                          right:
                            type: method_invocation
                            fields:
                              text: getClass()
                            children: []
                            pos: 8699
                            length: 10
                        children: []
                        pos: 8683
                        length: 26
                    children: []
                    pos: 8682
                    length: 28
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 8711
                  length: 13
                pos: 8679
                length: 45
              - type: local_variable_declaration
                fields:
                  text: SimpleType other = (SimpleType) o;
                children: []
                pos: 8734
                length: 34
              - type: if_statement
                fields:
                  condition:
                    type: parenthesized_expression
                    fields:
                      expression:
                        type: not_equals
                        fields:
                          left:
                            type: field_access
                            fields:
                              text: other._class
                            children: []
                            pos: 8823
                            length: 12
                          right:
                            type: field_access
                            fields:
                              text: this._class
                            children: []
                            pos: 8839
                            length: 11
                        children: []
                        pos: 8823
                        length: 27
                    children: []
                    pos: 8822
                    length: 29
                children:
                - type: return_statement
                  fields:
                    text: return false;
                  children: []
                  pos: 8852
                  length: 13
                pos: 8819
                length: 46
              - type: local_variable_declaration
                fields:
                  text: TypeBindings b1 = _bindings;
                children: []
                pos: 8924
                length: 28
              - type: local_variable_declaration
                fields:
                  text: TypeBindings b2 = other._bindings;
                children: []
                pos: 8961
                length: 34
              - type: return_statement
                fields:
                  text: return b1.equals(b2);
                children: []
                pos: 9004
                length: 21
              pos: 8596
              length: 435
          children: []
          pos: 8546
          length: 485
        pos: 380
        length: 8653
    children: []
    pos: 380
    length: 8653
  pos: 0
  length: 9034
text_diff: "--- before\n+++ after\n@@ -132,7 +132,7 @@\n         }\n         */\n
  \        // 15-Jan-2015, tatu: Not correct; should really re-resolve...\n-        return
  new SimpleType(subclass, _bindings, this, _superInterfaces,\n+        return new
  SimpleType(subclass, _bindings, _superClass, _superInterfaces,\n                 _valueHandler,
  _typeHandler, _asStatic);\n     }\n     \n"
tree_diff: |+
  New cluster:
  UPDATE from return new SimpleType(subclass, _bindings, this, _superInterfaces,
                  _valueHandler, _typeHandler, _asStatic); to return new SimpleType(subclass, _bindings, _superClass, _superInterfaces,
                  _valueHandler, _typeHandler, _asStatic);
  ------------
  ===
  update-node
  ---
  return_statement: return new SimpleType(subclass, _bindings, this, _superInterfaces,
                  _valueHandler, _typeHandler, _asStatic); [5037,5160]
  replace return new SimpleType(subclass, _bindings, this, _superInterfaces,
                  _valueHandler, _typeHandler, _asStatic); by return new SimpleType(subclass, _bindings, _superClass, _superInterfaces,
                  _valueHandler, _typeHandler, _asStatic);

...
